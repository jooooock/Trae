/*! For license information please see extension.js.LICENSE.txt */
(()=>{var __webpack_modules__={655:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.browserModule=void 0;const r=n(2479),i=n(8851),o=n(3675),s=n(228),a=n(2284),c=n(2196);t.browserModule=new r.ContainerModule(((e,t,n,r)=>{e(i.BuildConfig).toSelf().inSingletonScope(),e(i.Debounce).to(o.Debouncer).inTransientScope(),e(i.DefaultDebounce).to(o.Debouncer).inSingletonScope(),e(i.IReporter).to(s.BrowserSlardarReporter).inSingletonScope(),e(i.SlardarLogger).toService(i.IReporter),e(i.RemoteLogger).toSelf().inSingletonScope(),e(i.MultiLogger).toService(i.SlardarLogger),e(i.MultiLogger).toService(i.RemoteLogger),e(i.Log).to(c.MultiLoggerImpl).inSingletonScope(),e(i.TeaInterface).to(a.BrowserTeaSDKImpl).inSingletonScope(),e(i.LibraInterface).toService(i.TeaInterface)}))},3675:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.Debouncer=void 0;const i=n(2479);let o=class{async debounce(e){return this.state&&(window.clearTimeout(this.state.timer),this.state.reject(),this.state=void 0),new Promise(((t,n)=>{this.state={timer:window.setTimeout((()=>t()),e),reject:n}}))}};t.Debouncer=o,t.Debouncer=o=r([(0,i.injectable)()],o)},228:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserSlardarReporter=void 0;const o=n(8474),s=n(8474),a=n(4131),c=n(7512),u=n(9658),l=n(8851),d=n(2479);let f=class{constructor(){this.level=l.LogLevel.Log}init(e,t,n,r,i,s,l,d,f,h,p){this.dispose();const g=`${t}-${r}`;let _;h&&(_={osName:h?.osName,osVersion:h?.osVersion,cpuArch:h?.cpuArch,cpuModel:h.cpuModel,nodeVersion:h.nodeVersion,region:l,channel:t,ideVersion:f}),this.slardar=(0,o.createSlardarClient)({pid:g,userId:e,env:i?"production":"test",release:`${s?"tob-":""}${t}-${n}`},_,this.getSlardarRegion(l)),this.slardar.set({sessionId:d}),this.reporter=new a.Reporter(this.slardar),this.logger=new u.SlardarLogger({},s?"MarsCode":"Codeverse",this.slardar),this.sendPageview(g,c.PageviewEventSource.Init)}updateUserInfo(e){this.slardar?.config({userId:e.id})}dispose(){this.reporter?.dispose(),this.slardar?.destroy(),this.reporter=void 0,this.slardar=void 0,this.logger=void 0}getSlardarRegion(e){return e===l.Region.cn?s.Region.CN:e===l.Region.sg||e===l.Region.us?s.Region.US:s.Region.CN}error(e){this.logger?.error(e)}warn(e){this.logger?.warn(e)}info(e){this.logger?.info(e)}log(e){this.logger?.info(e)}report(e){this.reporter?.report(e)}sendEvent(e){this.reporter?.sendEvent(e)}sendPageview(e,t){this.reporter?.sendPageview(e,t)}captureException(e,t){if(e instanceof Error)this.reporter?.captureException(e,t),this.error(`captureException: ${JSON.stringify(e)}`);else{const n=new Error;"message"in e&&(n.message=e.message),"name"in e&&(n.name=e.name),"stack"in e&&(n.stack=e.stack),this.error(`captureException: ${JSON.stringify(n)}`),this.reporter?.captureException(n,t)}}emitStore(e,t,n){this.reporter?.emitStore(e,t,n)}emitTimer(e,t,n){this.reporter?.emitTimer(e,t,n)}emitCounter(e,t){this.reporter?.emitCounter(e,t)}flush(){this.reporter?.flush()}getDeviceId(){return this.slardar?.config()?.deviceId}};t.BrowserSlardarReporter=f,t.BrowserSlardarReporter=f=r([(0,d.injectable)(),i("design:paramtypes",[])],f)},2284:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserTeaSDKImpl=void 0;const i=n(2479),o=n(8474);let s=class{init(e,t,n,r,i,s){let a;this.dispose(),function(e){e.USEast="US-East",e.SG="Singapore-Central",e.CN="China-North"}(a||(a={})),this.teaClient=(0,o.createTeaClient)({app_id:e,channel:t,retry:5,event_verify_url:i,abServiceOrigin:n}),this.teaClient.config({user:{user_unique_id:r},header:{app_id:e,region:function(e){switch(e){case"cn":return a.CN;case"sg":return a.SG;case"va":return a.USEast}}(t),os_name:s?.osName,os_version:s?.osVersion},custom:{cpu_arch:s?.cpuArch,cpu_model:s?.cpuModel,node_version:s?.nodeVersion}})}dispose(){this.teaClient=void 0}collect(e,t){this.teaClient?.collect(e,t)}collectEvents(e){this.teaClient?.collect(e)}getVar(e,t){return this.teaClient?.getVar(e,t)??Promise.resolve(t.defaultValue)}getAllVars(e){return this.teaClient?.getAllVars(e)??Promise.resolve(void 0)}};t.BrowserTeaSDKImpl=s,t.BrowserTeaSDKImpl=s=r([(0,i.injectable)()],s)},4930:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseDomain=void 0,t.BaseDomain=Symbol("BaseDomain")},1853:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseFeatureGate=void 0,t.BaseFeatureGate=Symbol("BaseFeatureGate")},6777:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.BuildConfig=void 0;const i=n(2479);let o=class{isToB(){return BUILD_TOB}isProd(){return BUILD_PROD}isProdToB(){return this.isProd()&&this.isToB()}getVersion(){return""}toString(){return`isTob:${this.isToB()},isProd:${this.isProd()}}`}};t.BuildConfig=o,t.BuildConfig=o=r([(0,i.injectable)()],o)},9604:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.container=void 0;const r=n(2479);t.container=new r.Container},1232:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultDebounce=t.Debounce=void 0,t.Debounce=Symbol("Debounce"),t.DefaultDebounce=Symbol("DefaultDebounce")},4014:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3735:(e,t)=>{"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.SlardarEventName=t.SlardarEventStatus=void 0,function(e){e.Success="Success",e.Failed="Failed",e.None="None"}(n||(t.SlardarEventStatus=n={})),function(e){e.AICompletionExtensionActive="icube_ai_completion_extension_active",e.CompletionExecute="icube_ai_completion_execute",e.MultiEditExecute="icube_ai_completion_multi_edit_execute"}(r||(t.SlardarEventName=r={}))},8851:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(4014),t),i(n(7804),t),i(n(8046),t),i(n(494),t),i(n(6208),t),i(n(2496),t),i(n(1495),t),i(n(8987),t),i(n(2183),t),i(n(9604),t),i(n(467),t),i(n(6285),t),i(n(1232),t),i(n(878),t),i(n(3377),t),i(n(6777),t),i(n(1256),t),i(n(4930),t),i(n(1853),t),i(n(3499),t),i(n(3735),t),i(n(2010),t),i(n(7171),t),i(n(3911),t),i(n(7745),t),i(n(9266),t),i(n(8673),t),i(n(5320),t)},467:(e,t)=>{"use strict";var n;function r(){const e=new Date;return`${e.getFullYear()}-${("0"+(e.getMonth()+1)).slice(-2)}-${("0"+e.getDate()).slice(-2)} ${("0"+e.getHours()).slice(-2)}:${("0"+e.getMinutes()).slice(-2)}:${("0"+e.getSeconds()).slice(-2)}.${("00"+e.getMilliseconds()).slice(-3)}`}Object.defineProperty(t,"__esModule",{value:!0}),t.LogLevel=t.SlardarLogger=t.MultiLogger=t.Log=void 0,t.formatMessage=function(e,t,i,o,...s){let a=`${r()} `;e&&(a+=`[${n.toString(e)}] `);t&&t.length>0&&(a+=`[${t}] `);i&&i.length>0&&(a+=`[${i}] `);a+="object"==typeof o?JSON.stringify(o):o;for(const e of s)a+=" ",a+="object"==typeof e?JSON.stringify(e):e;return a},t.formatCurrentDateTime=r,t.Log=Symbol("Log"),t.MultiLogger=Symbol("MultiLogger"),t.SlardarLogger=Symbol("SlardarLogger"),function(e){e[e.NEVER=0]="NEVER",e[e.Error=1]="Error",e[e.Warning=2]="Warning",e[e.Info=3]="Info",e[e.Log=4]="Log"}(n||(t.LogLevel=n={})),function(e){e.toString=function(t){switch(t){case e.Error:return"error";case e.Warning:return"warn";case e.Info:return"info";case e.Log:return"verbose";default:return"info"}}}(n||(t.LogLevel=n={}))},2196:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.MultiLoggerImpl=void 0;const s=n(2479),a=n(467);let c=class{constructor(e){this.level=a.LogLevel.Log,this.loggers=e}error(e){this.level>=a.LogLevel.Error&&this.loggers.forEach((t=>t.error(e)))}warn(e){this.level>=a.LogLevel.Warning&&this.loggers.forEach((t=>t.warn(e)))}info(e){this.level>=a.LogLevel.Info&&this.loggers.forEach((t=>t.info(e)))}log(e){this.level>=a.LogLevel.Log&&this.loggers.forEach((t=>t.log(e)))}};t.MultiLoggerImpl=c,t.MultiLoggerImpl=c=r([(0,s.injectable)(),o(0,(0,s.multiInject)(a.MultiLogger)),i("design:paramtypes",[Array])],c)},494:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataHolderImpl=void 0;t.DataHolderImpl=class{constructor(){this.data=new Map}getData(e){return this.data.get(e)}setData(e,t){this.data.set(e,t)}}},8046:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Pipeline=t.Pipeline_State=t.Pipeline_Error=t.Pipeline_Canceled=void 0;const r=n(494),i=n(9604),o=n(878);class s extends Error{constructor(e,t){super(`[Pipeline_Canceled]: ${e}, errorCode: ${t}`),this.errorCode=t,Object.setPrototypeOf(this,s.prototype)}}t.Pipeline_Canceled=s;class a extends Error{constructor(e){super(`[Pipeline_Error]: ${e}`),Object.setPrototypeOf(this,a.prototype)}}var c;t.Pipeline_Error=a,function(e){e.IDLE="IDLE",e.PROCESSING="PROCESSING",e.BEING_DONE="BEING_DONE"}(c||(t.Pipeline_State=c={}));t.Pipeline=class{constructor(e){this.stages=[],this.dataHolder=new r.DataHolderImpl,this._state=c.IDLE,this.name=e}cancelImmediately(e){throw new s("cancelImmediately:"+e)}doneWithCurrentStageOutput(){this._state=c.BEING_DONE}get state(){return this._state}addStage(e){return this.state==c.IDLE&&(e.pipeline=this,this.stages.push(e)),this}async process(e,t){this._state=c.PROCESSING;let n=e;for(const e of this.stages){try{n=await e.process(n,t)}catch(t){if(this._state=c.IDLE,t instanceof s)return t;{let n;n=t instanceof Error?`${t}\n ${t.stack}`:"[object Object]"==`${t}`?`Error: ${JSON.stringify(t)}`:`Error: ${t}`;const r=new a(`Error in stage: ${e.name}: ${n}`);return i.container.get(o.IReporter).captureException(r),r}}if(t?.isCancellationRequested)return this._state=c.IDLE,new s(`Cancelled in stage: ${e.name}`);if(this.state==c.BEING_DONE)return this._state=c.IDLE,n}return this._state=c.IDLE,n}getData(e){return this.dataHolder.getData(e)}setData(e,t){this.dataHolder.setData(e,t)}}},7804:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStage=void 0;const r=n(494);t.BaseStage=class{constructor(){this.stageDataHolder=new r.DataHolderImpl,this._pipeline=void 0}get pipeline(){return this._pipeline}set pipeline(e){this._pipeline=e}getData(e){return this.stageDataHolder.getData(e)}setData(e,t){this.stageDataHolder.setData(e,t)}}},6208:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContextCollectStage=void 0;const r=n(7804);class i extends r.BaseStage{constructor(){super(...arguments),this.name="ContextCollectStage"}}t.ContextCollectStage=i},2496:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PostProcessStage=void 0;const r=n(7804);class i extends r.BaseStage{constructor(){super(...arguments),this.name="PostProcessStage"}}t.PostProcessStage=i},1495:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreProcessStage=void 0;const r=n(7804);class i extends r.BaseStage{constructor(){super(...arguments),this.name="PreProcessStage"}}t.PreProcessStage=i},8987:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromptAssembleStage=void 0;const r=n(7804);class i extends r.BaseStage{constructor(){super(...arguments),this.name="PromptAssembleStage"}}t.PromptAssembleStage=i},2183:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RequestModelStage=void 0;const r=n(7804);class i extends r.BaseStage{constructor(){super(...arguments),this.name="RequestModelStage"}}t.RequestModelStage=i},3499:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Region=void 0,t.Region={cn:"cn",us:"us",sg:"sg"}},6285:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteLogger=void 0;const i=n(467),o=n(2479);let s=class{constructor(){this.level=i.LogLevel.Log}attachPrint(e){this.loggerPrint=e}error(e){this.print(e,i.LogLevel.Error)}warn(e){this.print(e,i.LogLevel.Warning)}info(e){this.print(e,i.LogLevel.Info)}log(e){this.print(e,i.LogLevel.Log)}print(e,t){this.level>=t&&this.loggerPrint&&this.loggerPrint(e,i.LogLevel.Log)}};t.RemoteLogger=s,t.RemoteLogger=s=r([(0,o.injectable)()],s)},878:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ReportEvent=t.IReporter=void 0,t.IReporter=Symbol("IReporter"),function(e){e.LoginFailEvent="ReportEvent.LoginFail",e.CompletionFailEvent="ReportEvent.CompletionFail",e.ChatFailEvent="ReportEvent.ChatFail",e.ExchangeTokenFailEvent="ReportEvent.ExchangeTokenFail",e.newExchangeTokenFailEvent=(t,n,r)=>({name:e.ExchangeTokenFailEvent,categories:{pluginSessionID:t,region:n,message:r}}),e.newLoginFailEvent=(t,n,r)=>({name:e.LoginFailEvent,categories:{pluginSessionID:t,region:n,message:r}}),e.newCompletionFailEvent=(t,n,r)=>({name:e.CompletionFailEvent,categories:{pluginSessionID:t,region:n,message:r}}),e.newChatFailEvent=(t,n,r)=>({name:e.ChatFailEvent,categories:{pluginSessionID:t,region:n,message:r}})}(n||(t.ReportEvent=n={}))},3377:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LibraInterface=t.TeaInterface=t.TeaComprehension=void 0,t.TeaComprehension=Symbol("TeaComprehension"),t.TeaInterface=Symbol("TeaInterface"),t.LibraInterface=Symbol("LibraInterface")},1256:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.User=void 0,t.User=Symbol("User")},5320:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.comment=o,t.commentBlockAsSingles=function(e,t){if(!i[t]||""===e)return"";const n=e.endsWith("\n"),r=(n?e.slice(0,-1):e).split("\n").map((e=>o(e,t))).join("\n");return n?r+"\n":r},t.isCommentOnLine=function(e,t,n,i){try{const o=r.TreeSitter.INSTANCE.parseSyntaxTree(t,e),a=i??o?.rootNode;if(void 0===a)return o?.delete(),!1;const c=s(a,n);return o?.delete(),c}catch(e){return!1}};const r=n(2010),i={abap:{start:'"',end:""},bat:{start:"REM",end:""},bibtex:{start:"%",end:""},blade:{start:"#",end:""},c:{start:"//",end:""},clojure:{start:";",end:""},coffeescript:{start:"//",end:""},cpp:{start:"//",end:""},csharp:{start:"//",end:""},css:{start:"/*",end:"*/"},dart:{start:"//",end:""},dockerfile:{start:"#",end:""},elixir:{start:"#",end:""},erb:{start:"<%#",end:"%>"},erlang:{start:"%",end:""},fsharp:{start:"//",end:""},go:{start:"//",end:""},groovy:{start:"//",end:""},haml:{start:"-#",end:""},handlebars:{start:"{{!",end:"}}"},haskell:{start:"--",end:""},html:{start:"\x3c!--",end:"--\x3e"},ini:{start:";",end:""},java:{start:"//",end:""},javascript:{start:"//",end:""},javascriptreact:{start:"//",end:""},jsonc:{start:"//",end:""},jsx:{start:"//",end:""},julia:{start:"#",end:""},kotlin:{start:"//",end:""},latex:{start:"%",end:""},less:{start:"//",end:""},lua:{start:"--",end:""},makefile:{start:"#",end:""},markdown:{start:"[]: #",end:""},"objective-c":{start:"//",end:""},"objective-cpp":{start:"//",end:""},perl:{start:"#",end:""},php:{start:"//",end:""},powershell:{start:"#",end:""},pug:{start:"//",end:""},python:{start:"#",end:""},ql:{start:"//",end:""},r:{start:"#",end:""},razor:{start:"\x3c!--",end:"--\x3e"},ruby:{start:"#",end:""},rust:{start:"//",end:""},sass:{start:"//",end:""},scala:{start:"//",end:""},scss:{start:"//",end:""},shellscript:{start:"#",end:""},slim:{start:"/",end:""},solidity:{start:"//",end:""},sql:{start:"--",end:""},stylus:{start:"//",end:""},svelte:{start:"\x3c!--",end:"--\x3e"},swift:{start:"//",end:""},terraform:{start:"#",end:""},tex:{start:"%",end:""},typescript:{start:"//",end:""},typescriptreact:{start:"//",end:""},vb:{start:"'",end:""},verilog:{start:"//",end:""},"vue-html":{start:"\x3c!--",end:"--\x3e"},vue:{start:"//",end:""},xml:{start:"\x3c!--",end:"--\x3e"},xsl:{start:"\x3c!--",end:"--\x3e"},yaml:{start:"#",end:""}};function o(e,t){const n=i[t];if(n){const t=""==n.end?"":" "+n.end;return`${n.start} ${e}${t}`}return""}function s(e,t){let n=!1;"comment"===e.type&&e.startPosition.row<=t&&e.endPosition.row>=t&&(n=!0);for(const r of e.children){if(n)break;n=s(r,t)}return n}},7171:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentUtils=void 0;const r=n(9128),i=n(3911);class o{static lineAt(e,t){return o.lineRange(e,t,t)}static endOfLinePosition(e,t){const n=this.lineAt(e,t.line);return r.Position.create(t.line,n.length)}static lineRange(e,t,n){let o=r.Range.create(t,0,n<e.lineCount-1?n+1:e.lineCount,0);return(0,i.trimEndLineBreak)(e.getText(o))}static getCompletionTriggerCharater(e,t){const n=t.line,i=t.character;let o=r.Range.create(n,Math.max(0,i-1),n,i);return e.getText(o)}static getLanguage(e){const{languageId:t}=e;if(t&&t.length>0)return t;let n=o.getFileName(e);switch(n.substring(n.lastIndexOf("."))){case".go":return"go";case".py":return"python";case".java":return"java";case".kt":case".kts":return"kotlin";case".js":return"javascript";case".jsx":return"javascriptreact";case".ts":return"typescript";case".tsx":return"typescriptreact";case".cpp":case".cc":case".cxx":case".hpp":case".h":case".c++":case"hh":case".h++":return"cpp";case".m":return"objective-c";case".mm":return"objective-cpp";case".swift":return"swift";case".rs":return"rust";case".sql":return"sql";case".json":return"json";case".yml":case".yaml":return"yaml";case".md":case".markdown":case".mkd":case".mkdn":case".mkdown":case".ron":return"markdown";default:return"unknown"}}static getRelativePath(e,t){const n=t?.find((t=>-1!=e.indexOf(t.uri)))?.uri;return n?e.substring(n.length):""}static getFilePath(e){try{return new URL(e).pathname}catch(e){return""}}static getWorkspaceUrl(e,t){return t?.find((t=>-1!=e.uri.indexOf(t.uri)))?.uri??""}static getWorkspacePath(e,t){return o.getFilePath(o.getWorkspaceUrl(e,t))}static getWorkspaceFolder(e,t){return t?.find((t=>-1!=e.uri.indexOf(t.uri)))}static getWorkspacePathByUri(e,t){return t?.find((t=>-1!=e.indexOf(t.uri)))?.uri??""}static getFileName(e){let t=e.uri.toString(),n=t.lastIndexOf("/");return-1==n?t:t.substring(n+1)}static getContentLines(e){return e&&e.length>0?(e.match(/\n/g)||[]).length+1:0}}t.DocumentUtils=o},9266:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.functionQuery=t.jsFunctionQuery=void 0,t.isSupportedLanguageId=function(e){return e in o.languageTypeMap},t.getAncestorWithSiblingFunctions=function(e,t){const n=u[l(e)];for(;t.parent;){if(n(t.parent))return t;t=t.parent}return t.parent?t:null},t.getFirstPrecedComment=function(e){let t=e;for(;s===t.previousSibling?.type;){const e=t.previousSibling;if(e.endPosition.row<t.startPosition.row-1)break;t=e}return s===t?.type?t:null},t.isFunctionDefinition=function(e,t){const n=l(e);switch(n){case o.WASMLanguage.Python:case o.WASMLanguage.Go:case o.WASMLanguage.Ruby:return d(n,t);case o.WASMLanguage.Javascript:case o.WASMLanguage.Typescript:if("function_declaration"===t.type||"generator_function_declaration"===t.type||"method_definition"===t.type)return!0;if("lexical_declaration"===t.type||"variable_declaration"===t.type){if(t.namedChildCount>1)return!1;const e=t.namedChild(0);if(null===e)return!1;const r=e.namedChild(1);return null!==r&&d(n,r)}if("expression_statement"===t.type){const e=t.namedChild(0);if("assigment_expression"===e?.type){const t=e.namedChild(1);return null!==t&&d(n,t)}}return!1;default:return!1}},t.getLanguageIdToWasmLanguage=l,t.parseTreeSitter=f,t.queryPythonIsDocstring=function(e){return 1==p([h],e).length},t.getFunctionPositions=async function(e,t){const n=await f(e,t),r=g(e,n.rootNode).map((e=>{const t=e.captures.find((e=>"function"===e.name)).node;return{startIndex:t.startIndex,endIndex:t.endIndex}}));return n.delete(),r},t.queryFunctions=g;const i=r(n(8154)),o=n(2010),s="comment",a=["function","function_declaration","generator_function","arrow_function","generator_function_declaration","method_definition"];t.jsFunctionQuery="[\n  (function body: (statement_block) @body)\n  (function_declaration body: (statement_block) @body)\n  (generator_function body: (statement_block) @body)\n  (generator_function_declaration body: (statement_block) @body)\n  (method_definition body: (statement_block) @body)\n  (arrow_function body: (statement_block) @body)\n] @function",t.functionQuery={python:[["(function_definition body: (block\n           (expression_statement (string))? @docstring) @body) @function"],['(ERROR ("def" (identifier) (parameters))) @function']],javascript:[[t.jsFunctionQuery]],typescript:[[t.jsFunctionQuery]],typescriptreact:[[t.jsFunctionQuery]],go:[["[\n          (function_declaration body: (block) @body)\n          (method_declaration body: (block) @body)\n        ] @function"]],ruby:[['[\n          (method name: (_) parameters: (method_parameters)? @params [(_)+ "end"] @body)\n          (singleton_method name: (_) parameters: (method_parameters)? @params [(_)+ "end"] @body)\n        ] @function']],java:[],cpp:[],html:[],kotlin:[],dart:[],php:[]};const c={python:new Set(["function_definition"]),javascript:new Set(a),typescript:new Set(a),typescriptreact:new Set(a),go:new Set(["function_declaration","method_declaration"]),ruby:new Set(["method","singleton_method"]),java:new Set,cpp:new Set,kotlin:new Set,html:new Set,dart:new Set,php:new Set},u={python:e=>"module"===e.type||"block"===e.type&&"class_definition"===e.parent?.type,javascript:e=>"program"===e.type||"class_body"===e.type,typescript:e=>"program"===e.type||"class_body"===e.type,typescriptreact:e=>"program"===e.type||"class_body"===e.type,go:e=>"source_file"===e.type,ruby:e=>"program"===e.type||"class"===e.type,java:e=>!1,cpp:e=>!1,kotlin:e=>!1,html:e=>!1,dart:e=>!1,php:e=>!1};function l(e){if(!(e in o.languageTypeMap))throw new Error(`Unrecognized language: ${e}`);return o.languageTypeMap[e]}function d(e,t){const n=l(e);return c[n].has(t.type)}async function f(e,t){const n=await o.TreeSitter.INSTANCE.getLanguageParser(e),r=new i.default;r.setLanguage(n);const s=r.parse(t);return r.delete(),s}const h=["[\n    (class_definition (block (expression_statement (string))))\n    (function_definition (block (expression_statement (string))))\n  ]"];function p(e,t){const n=[];for(const r of e){if(!r[1]){const e=t.tree.getLanguage();r[1]=e.query(r[0])}n.push(...r[1].matches(t))}return n}function g(e,n){return p(t.functionQuery[(0,o.languageIdToWasmLanguage)(e)],n)}},8673:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBlockParser=f,t.isEmptyBlockStart=async function(e,t){const n=e.languageId;if(!(0,i.isSupportedLanguageId)(n))return!1;return f(n).isEmptyBlockStart(e.getText(),e.offsetAt(t))},t.blockBodyFinishOffset=async function(e,t,n){const o=e.languageId;if(!(0,i.isSupportedLanguageId)(o))return;const s=e.getText(r.Range.create(r.Position.create(0,0),t)),a=e.offsetAt(t);return f(o).isBlockBodyFinished(s,n,a)};const r=n(9128),i=n(9266);class o{constructor(e,t,n){this.languageId=e,this.nodeMatch=t,this.nodeTypesWithBlockOrStmtChild=n}async getNodeMatchAtPosition(e,t,n){const r=await(0,i.parseTreeSitter)(this.languageId,e);try{let e=r.rootNode.descendantForIndex(t);for(;e;){const t=this.nodeMatch[e.type];if(t){if(!this.nodeTypesWithBlockOrStmtChild.has(e.type))break;const n=this.nodeTypesWithBlockOrStmtChild.get(e.type)??"",r=""==n?e.namedChildren[0]:e.childForFieldName(n);if(r?.type==t)break}e=e.parent}if(!e)return;return n(e)}finally{r.delete()}}getNextBlockAtPosition(e,t,n){return this.getNodeMatchAtPosition(e,t,(e=>{let t=e.children.reverse().find((t=>t.type==this.nodeMatch[e.type]));if(t){if("python"==this.languageId&&t.parent){const e=":"==t.parent.type?t.parent.parent:t.parent;let n=e?.nextSibling;for(;n&&"comment"==n.type;){const r=n.startPosition.row==t.endPosition.row&&n.startPosition.column>=t.endPosition.column,i=n.startPosition.row>e.endPosition.row&&n.startPosition.column>e.startPosition.column;if(!r&&!i)break;t=n,n=n.nextSibling}}if(!(t.endIndex>=t.tree.rootNode.endIndex-1&&(t.hasError()||t.parent.hasError())))return n(t)}}))}async isBlockBodyFinished(e,t,n){const r=(e+t).trimEnd(),i=await this.getNextBlockAtPosition(r,n,(e=>e.endIndex));if(void 0!==i&&i<r.length){const t=i-e.length;return t>0?t:void 0}}getNodeStart(e,t){const n=e.trimEnd();return this.getNodeMatchAtPosition(n,t,(e=>e.startIndex))}}class s extends o{constructor(e,t,n,r,i){super(e,r,i),this.blockEmptyMatch=t,this.lineMatch=n}isBlockStart(e){return this.lineMatch.test(e.trimStart())}async isBlockBodyEmpty(e,t){const n=await this.getNextBlockAtPosition(e,t,(n=>{n.startIndex<t&&(t=n.startIndex);let r=e.substring(t,n.endIndex).trim();return""==r||r.replace(/\s/g,"")==this.blockEmptyMatch}));return void 0===n||n}async isEmptyBlockStart(e,t){return t=a(e,t),this.isBlockStart(function(e,t){const n=e.lastIndexOf("\n",t-1);let r=e.indexOf("\n",t);r<0&&(r=e.length);return e.slice(n+1,r)}(e,t))&&this.isBlockBodyEmpty(e,t)}}function a(e,t){let n=t;for(;n>0&&/\s/.test(e.charAt(n-1));)n--;return n}class c extends o{constructor(e,t,n,r,i,o,s){super(e,t,n),this.startKeywords=r,this.blockNodeType=i,this.emptyStatementType=o,this.curlyBraceLanguage=s}isBlockEmpty(e,t){let n=e.text.trim();return this.curlyBraceLanguage&&(n.startsWith("{")&&(n=n.slice(1)),n.endsWith("}")&&(n=n.slice(0,-1)),n=n.trim()),0===n.length||!("python"!=this.languageId||!("class_definition"===e.parent?.type||"function_definition"==e.parent?.type&&1==e.children.length&&(0,i.queryPythonIsDocstring)(e.parent)))}async isEmptyBlockStart(e,t){if(t>e.length)throw new RangeError("Invalid offset");for(let n=t;n<e.length&&"\n"!=e.charAt(n);n++)if(/\S/.test(e.charAt(n)))return!1;t=a(e,t);const n=await(0,i.parseTreeSitter)(this.languageId,e);try{const r=n.rootNode.descendantForIndex(t-1);if(null==r)return!1;if(this.curlyBraceLanguage&&"}"==r.type)return!1;if("javascript"==this.languageId||"typescript"==this.languageId&&r.parent&&"object"==r.parent.type&&"{"==r.parent.text.trim())return!0;if("typescript"==this.languageId){let n=r;for(;n.parent;){if("function_signature"==n.type||"method_signature"==n.type){const i=r.nextSibling;if(i&&n.hasError()&&l(n,i,e))return!0;return!n.children.find((e=>";"==e.type))&&n.endIndex<=t}n=n.parent}}let i=null,o=null,s=null,a=r;for(;null!=a;){if(a.type==this.blockNodeType){o=a;break}if(this.nodeMatch[a.type]){s=a;break}if("ERROR"==a.type){i=a;break}a=a.parent}if(null!=o){if(!o.parent||!this.nodeMatch[o.parent.type])return!1;if("python"==this.languageId){const e=o.previousSibling;if(null!=e&&e.hasError()&&e.text.startsWith('"""'))return!0}return this.isBlockEmpty(o,t)}if(null!=i){if("module"==i.previousSibling?.type||"internal_module"==i.previousSibling?.type||"def"==i.previousSibling?.type)return!0;const e=[...i.children].reverse(),n=e.find((e=>this.startKeywords.includes(e.type)));let o=e.find((e=>e.type==this.blockNodeType));if(n){switch(this.languageId){case"python":{let t;"try"==n.type&&"identifier"==r.type&&r.text.length>4&&(o=e.find((e=>e.hasError()))?.children.find((e=>"block"==e.type)));let s=0;for(const e of i.children){if(":"==e.type&&0==s){t=e;break}"("==e.type&&(s+=1),")"==e.type&&(s-=1)}if(t&&n.endIndex<=t.startIndex&&t.nextSibling){if("def"==n.type){const e=t.nextSibling;if('"'==e.type||"'"==e.type)return!0;if("ERROR"==e.type&&('"""'==e.text||"'''"==e.text))return!0}return!1}break}case"javascript":{const t=e.find((e=>"formal_parameters"==e.type));if("class"==n.type&&t)return!0;const r=e.find((e=>"{"==e.type));if(r&&r.startIndex>n.endIndex&&null!=r.nextSibling)return!1;if(e.find((e=>"do"==e.type))&&"while"==n.type)return!1;if("=>"==n.type&&n.nextSibling&&"{"!=n.nextSibling.type)return!1;break}case"typescript":{const t=e.find((e=>"{"==e.type));if(t&&t.startIndex>n.endIndex&&null!=t.nextSibling)return!1;if(e.find((e=>"do"==e.type))&&"while"==n.type)return!1;if("=>"==n.type&&n.nextSibling&&"{"!=n.nextSibling.type)return!1;break}}return!(o&&o.startIndex>n.endIndex)||this.isBlockEmpty(o,t)}}if(null!=s){const e=this.nodeMatch[s.type],n=s.children.slice().reverse().find((t=>t.type==e));if(n)return this.isBlockEmpty(n,t);if(this.nodeTypesWithBlockOrStmtChild.has(s.type)){const e=this.nodeTypesWithBlockOrStmtChild.get(s.type)??"",t=""==e?s.children[0]:s.childForFieldName(e);if(t&&t.type!=this.blockNodeType&&t.type!=this.emptyStatementType)return!1}return!0}return!1}finally{n.delete()}}}function u(e,t){const n=e.startIndex,r=e.startIndex-e.startPosition.column,i=t.substring(r,n);if(/^\s*$/.test(i))return i}function l(e,t,n){if(t.startPosition.row<=e.startPosition.row)return!1;const r=u(e,n),i=u(t,n);return void 0!==r&&void 0!==i&&r.startsWith(i)}const d={python:new c("python",{class_definition:"block",elif_clause:"block",else_clause:"block",except_clause:"block",finally_clause:"block",for_statement:"block",function_definition:"block",if_statement:"block",try_statement:"block",while_statement:"block",with_statemenet:"block"},new Map,[],"block",null,!1),javascript:new c("javascript",{arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",method_definition:"statement_block",try_statement:"statement_block",while_statement:"statement_block",with_statement:"statement_block",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),typescript:new c("typescript",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),typescriptreact:new c("typescript",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),go:new s("go","{}",/\b(func|if|else|for)\b/,{communication_case:"block",default_case:"block",expression_case:"block",for_statement:"block",func_literal:"block",function_declaration:"block",if_statement:"block",labeled_statement:"block",method_declaration:"block",type_case:"block"},new Map),ruby:new s("ruby","end",/\b(BEGIN|END|case|class|def|do|else|elsif|for|if|module|unless|until|while)\b|->/,{begin_block:"}",block:"}",end_block:"}",lambda:"block",for:"do",until:"do",while:"do",case:"end",do:"end",if:"end",method:"end",module:"end",unless:"end",do_block:"end"},new Map),java:new c("java",{},new Map,[],"",null,!1),cpp:new c("cpp",{},new Map,[],"",null,!1),kotlin:new c("kotlin",{},new Map,[],"",null,!1),html:new c("html",{},new Map,[],"",null,!1),php:new c("php",{},new Map,[],"",null,!1),dart:new c("dart",{},new Map,[],"",null,!1)};function f(e){return d[(0,i.getLanguageIdToWasmLanguage)(e)]}},3911:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trimStartWs=function(e){return e?e.replace(/^[ \t]+/g,""):e},t.trimEndWs=function(e){return e?e.replace(/[ \t]+$/g,""):e},t.searchStartWs=function(e){if(!e)return 0;const t=e.match(/^[ \t]*/);if(!t)return 0;return t[0].length??0},t.searchEndWs=function(e){if(!e)return 0;const t=e.match(/[ \t]+$/);if(!t)return 0;return t[0].length??0},t.trimEndLineBreak=function(e){return e?e.replace(/\n+$/g,""):e},t.trimStartLineBreak=function(e){return e?e.replace(/^\n+/g,""):e},t.isStartWhiteSpace=function(e){return!!e&&32===e.charCodeAt(0)},t.getLastLine=function(e){const t=e.split("\n");return t[t.length-1]}},7745:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.newLineEnded=function(e){return""===e||e.endsWith("\n")?e:e+"\n"},t.isNewLine=a,t.shouldRequestMultiline=async function(e,t,n,o){if(!(e.lineCount>=8e3)){if(o){if(a(t,e))return!0}let c=!1;return!n&&(0,r.isSupportedLanguageId)(e.languageId)?c=await(0,i.isEmptyBlockStart)(e,t):n&&(0,r.isSupportedLanguageId)(e.languageId)&&(c=await(0,i.isEmptyBlockStart)(e,t)||await(0,i.isEmptyBlockStart)(e,s.DocumentUtils.endOfLinePosition(e,t))),c}return!1},t.isChinese=function(e){return/^[\u4e00-\u9fa5]+$/.test(e)},t.isString=function(e,t,n,r,i){const s=o.TreeSitter.INSTANCE.parseSyntaxTree(t,e),a=i??s?.rootNode;if(void 0===a)return s?.delete(),!1;const u=c(a,n,r);return s?.delete(),u};const r=n(9266),i=n(8673),o=n(2010),s=n(7171);function a(e,t){return 0===s.DocumentUtils.lineAt(t,e.line).trim().length}function c(e,t,n){let r=!1;"string"===e.type&&e.startPosition.row<=t&&e.endPosition.row>=t&&e.startIndex<=n&&e.endIndex>=n&&(r=!0);for(const i of e.children){if(r)break;r=c(i,t,n)}return r}},2010:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TreeSitter=t.languageTypeMap=t.WASMLanguage=void 0,t.languageIdToWasmLanguage=function(e){if(!(e in t.languageTypeMap))throw new Error(`Unrecognized language: ${e}`);return t.languageTypeMap[e]},t.findNode=function(e,t){const n=[],r=[e];for(;r.length>0;){const e=r.shift();if(!e)continue;let i=!1;try{i=t(e)}catch(e){}i&&n.push(e);for(let t=0;t<e.childCount;t++){const n=e.child(t);n&&r.push(n)}}return n};const i=r(n(8154));var o;!function(e){e.Python="python",e.Javascript="javascript",e.Typescript="typescript",e.TypescriptReact="typescriptreact",e.Go="go",e.Ruby="ruby",e.Java="java",e.Cpp="cpp",e.Kotlin="kotlin",e.HTML="html",e.Dart="dart",e.Php="php"}(o||(t.WASMLanguage=o={})),t.languageTypeMap={python:o.Python,javascript:o.Javascript,javascriptreact:o.Javascript,jsx:o.Javascript,typescript:o.Typescript,typescriptreact:o.TypescriptReact,go:o.Go,ruby:o.Ruby,java:o.Java,cpp:o.Cpp,html:o.HTML,dart:o.Dart,php:o.Php,kotlin:o.Kotlin};class s{constructor(){this.supportLanguageMap=new Map,this.languageIdMap=new Map,this.resourcesRootPath=""}async init(e){this.resourcesRootPath=e,await i.default.init(),await this.loadLanguage("typescript"),await this.loadLanguage("javascript"),await this.loadLanguage("go"),await this.loadLanguage("python"),await this.loadLanguage("ruby"),await this.loadLanguage("java"),await this.loadLanguage("typescriptreact"),await this.loadLanguage("cpp"),await this.loadLanguage("kotlin"),await this.loadLanguage("html"),await this.loadLanguage("dart"),await this.loadLanguage("php")}async loadLanguage(e){let t=await i.default.Language.load(`${this.resourcesRootPath}/wasms/tree-sitter-${e}.wasm`);this.supportLanguageMap.set(e,t)}getLanguageParser(e){return this.supportLanguageMap.get(t.languageTypeMap[e])}getParser(e){let t=this.getLanguageParser(e);if(void 0===t)return;let n=new i.default;return n.setLanguage(t),n.setTimeoutMicros(7e4),n}parseSyntaxTree(e,t){const n=this.getParser(e);if(void 0===n)return;const r=n.parse(t);return n.delete(),r}getQuery(e,t){let n=this.getLanguageParser(e);return n?.query(t)}}t.TreeSitter=s,s.INSTANCE=new s},7933:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(8851),t),i(n(228),t),i(n(2284),t),i(n(655),t)},3117:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.BaseAIClient=t.MessageTransports=t.State=t.RevealOutputChannelOn=void 0;const a=n(6727),c=n(3717),u=n(2433),l=n(5819),d=s(n(2187)),f=n(8268),h=n(6727),p=n(7933),g=n(41),_=n(1398),m=n(4847);var v,y,b,E;!function(e){e[e.Info=1]="Info",e[e.Warn=2]="Warn",e[e.Error=3]="Error",e[e.Never=4]="Never"}(v||(t.RevealOutputChannelOn=v={})),function(e){e[e.Stopped=1]="Stopped",e[e.Starting=3]="Starting",e[e.Running=2]="Running"}(y||(t.State=y={})),function(e){e[e.Initial=0]="Initial",e[e.Starting=1]="Starting",e[e.StartFailed=2]="StartFailed",e[e.Running=3]="Running",e[e.Stopping=4]="Stopping",e[e.Stopped=5]="Stopped"}(b||(b={})),function(e){e.is=function(e){return e&&c.MessageReader.is(e.reader)&&c.MessageWriter.is(e.writer)}}(E||(t.MessageTransports=E={}));t.BaseAIClient=class{constructor(e,t,n,r,i){this._traceFormat=c.TraceFormat.Text,this._features=[],this._id=e,this._name=t,this._brand=n,this._worker=i,this._state=b.Initial,this._listeners=[],this._stateChangeEmitter=new c.Emitter,this._serverOnErrorEmitter=new c.Emitter,this._baseOutputChannel=r.outputChannel,this._baseTraceOutputChannel=r.traceOutputChannel,this._trace=c.Trace.Off,this._tracer={log:(e,t)=>{d.string(e)}},this._baseClientOptions={userId:r.userId,documentSelector:r.documentSelector??[],clientInfo:r.clientInfo,revealOutputChannelOn:r.revealOutputChannelOn??v.Error,workspaceFolders:r.workspaceFolders,messages:r.messages}}get baseClientOptions(){return this._baseClientOptions}isRunning(){return this.$state===b.Running}handleFailedRequest(e,t,n,r,i){throw this.error(`Request ${e.method} failed.`,n,i),n}get $state(){return this._state}set $state(e){let t=this.getPublicState();this._state=e;let n=this.getPublicState();n!==t&&this._stateChangeEmitter.fire({oldState:t,newState:n})}getPublicState(){switch(this.$state){case b.Starting:return y.Starting;case b.Running:return y.Running;default:return y.Stopped}}get initializeResult(){return this._initializeResult}get onServerError(){return this._serverOnErrorEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}needsStop(){return this.$state===b.Starting||this.$state===b.Running}activeConnection(){return this.$state!==b.Running&&this.$state!==b.StartFailed||void 0===this._connection?void 0:this._connection}async start(){if(this.$state===b.Stopping)throw new Error("Client is currently stopping. Can only restart a full stopped client");if(void 0!==this._onStart)return this._onStart;const[e,t,n]=this.createOnStartPromise();this._onStart=e,this.$state=b.Starting;try{const e=await this.createConnection();e.onNotification(a.LogMessageNotification.type,(e=>{this.baseOutputChannel.appendLine(e.message)})),e.onNotification(a.ShowMessageNotification.type,(e=>{this.baseClientOptions.messages?.showMessage(e.type,e.message)})),e.listen(),await this.initialize(e),t()}catch(e){this.$state=b.StartFailed,this.error(`${this._name} client: couldn't create connection to server.`,e,!1),g.slardarReporter.captureException(e),this.stop(),n(e)}return this._onStart}createOnStartPromise(){let e,t;return[new Promise(((n,r)=>{e=n,t=r})),e,t]}async initialize(e){this._baseOutputChannel?.appendLine((0,p.formatMessage)(void 0,this._id,"client","initialize"));try{const t=this._baseClientOptions.workspaceFolders,n={workspaceFolders:t,clientInfo:this._baseClientOptions.clientInfo,userId:this._baseClientOptions.userId},r=await e.initialize(n);this._initializeResult=r,this._baseOutputChannel?.appendLine((0,p.formatMessage)(void 0,this._id,"client","initialized")),this.$state=b.Running,this.logTrace("Server initialized successfully, and now is running..."),await e.sendNotification(a.InitializedNotification.type,{}),this.refreshWorkspaceConfiguration(e,this._brand,!1);const i=(!t||await this.exceedFileCount(t[0],1e4))&&"codeverse"===this._brand;return this.logTrace(`BaseAIClient.initialize registerFeature {withFileSystemFeatures} = ${i}`),this.registerFeatures(i),this.initializeFeatures(r.capabilities),r}catch(e){throw this.logTrace("Server initialized failed."),this._baseOutputChannel?.appendLine("Server initialized failed."),g.slardarReporter.captureException(e),e}}exceedFileCount(e,t){return Promise.resolve(!0)}getTraceConfig(){return{trace:c.Trace.Off,traceFormat:c.TraceFormat.Text}}async stop(e=2e3){if(this.$state===b.Stopped||this.$state===b.Initial)return;if(this.$state===b.Stopping){if(void 0!==this._onStop)return this._onStop;throw new Error("Client is stopping but no stop promise available.")}const t=this.activeConnection();if(void 0===t||this.$state!==b.Running&&this.$state!==b.StartFailed)throw new Error(`Client is not running and can't be stopped. It's current state is: ${this.$state}`);this._initializeResult=void 0,this.$state=b.Stopping,this.cleanUp();const n=new Promise((t=>{(0,c.RAL)().timer.setTimeout(t,e)})),r=(async e=>(await e.shutdown(),await e.exit(),e))(t);return this._onStop=Promise.race([n,r]).then((e=>{if(void 0===e)throw this.logTrace("Stopping server timed out",void 0),new Error("Stopping the server timed out");e.end(),e.dispose()}),(e=>{throw this.logTrace("Stopping server failed",e),e})).finally((()=>{this.$state=b.Stopped,this.cleanUpChannel(),this._onStart=void 0,this._onStop=void 0,this._connection=void 0}))}cleanUp(){const e=this._listeners.splice(0,this._listeners.length);for(const t of e)t.dispose();for(const e of Array.from(this._features.entries()).map((e=>e[1])).reverse())e.dispose()}cleanUpChannel(){this._baseOutputChannel=void 0,this._baseTraceOutputChannel=void 0}async $start(){if(this.$state===b.StartFailed)throw new Error("Previous start failed. Can't restart server.");await this.start();const e=this.activeConnection();if(void 0===e)throw new Error("Starting server failed");return e}async createConnection(){m.RPCTraceUtil.setEnable(!0);const e=await this.createMessageTransports();return this._connection=(0,l.createConnection)(e.reader,e.writer,((e,t,n)=>{this.handleConnectionError(e,t,n)}),(()=>{this.handleConnectionClosed()})),this._connection}createMessageTransports(){const e=new u.BrowserMessageReader(this._worker),t=new u.BrowserMessageWriter(this._worker);return Promise.resolve({reader:e,writer:t})}handleConnectionClosed(){if(this.$state!==b.Stopped){try{void 0!==this._connection&&this._connection.dispose()}catch(e){}this.logTrace("Connection to server got closed."),this.cleanUp(),this.$state===b.Starting?this.$state=b.StartFailed:this.$state=b.Stopped,this._onStop=Promise.resolve(),this._onStart=void 0}}handleConnectionError(e,t,n){this.logTrace("Connection to server is erroring. Shutting down server, error: "+e+e.stack+", message: "+t),this.stop()}async sendRequest(e,...t){if(this.$state===b.StartFailed||this.$state===b.Stopping||this.$state===b.Stopped)return Promise.reject(new c.ResponseError(c.ErrorCodes.ConnectionInactive,"Client is not running"));return(await this.$start()).sendRequest(e,...t)}onRequest(e,t){const n=this.activeConnection();let r;return void 0!==n&&(r=n.onRequest(e,((...n)=>(m.RPCTraceUtil.traceRPC("onRequest",e,n),t(...n))))),{dispose:()=>{void 0!==r&&r.dispose()}}}async sendNotification(e,t){if(this.$state===b.StartFailed||this.$state===b.Stopping||this.$state===b.Stopped)return Promise.reject(new c.ResponseError(c.ErrorCodes.ConnectionInactive,"Client is not running"));return(await this.$start()).sendNotification(e,t)}onNotification(e,t){const n=this.activeConnection();let r;return void 0!==n&&(r=n.onNotification(e,(n=>(m.RPCTraceUtil.traceRPC("onNotification",e,n),t(n))))),{dispose:()=>{void 0!==r&&r.dispose()}}}async sendProgress(e,t,n){if(this.$state===b.StartFailed||this.$state===b.Stopping||this.$state===b.Stopped)return Promise.reject(new c.ResponseError(c.ErrorCodes.ConnectionInactive,"Client is not running"));try{return(await this.$start()).sendProgress(e,t,n)}catch(e){throw this.logTrace(`Sending progress for token ${t} failed.`,e),g.slardarReporter.captureException(e),e}}onProgress(e,t,n){const r=this.activeConnection();let i;return void 0!==r&&(i=r.onProgress(e,t,n)),{dispose:()=>{void 0!==i&&i.dispose()}}}codeGetCompletion(e,t){return this.sendRequest(a.CodeGetCompletionRequest.type,e,t)}getMultiPointCompletion(e,t){return this.sendRequest(a.MultiPointCompletionRequest.type,e,t)}codeAcceptCompletion(e,t){return this.sendRequest(a.CodeAcceptCompletionRequest.type,e,t)}getModelNames(e){return this.sendRequest(f.GetModelNamesRequest.type,e)}getAppVersion(){return this.sendRequest(h.GetAppVersionRequest.type)}getConfigWithLanguage(e){return this.sendRequest(a.GetConfigRequest.type,e)}telemetryAction(e,t){return this.sendNotification(e,t)}refreshUserInfo(e,t){return this.sendNotification(a.UserInfoNotification.type,{userInfo:e,authInfo:t})}get baseOutputChannel(){return this._baseOutputChannel||(this._baseOutputChannel=new class{constructor(){this.name="default-output"}append(e){}appendLine(e){}dispose(){}}),this._baseOutputChannel}get baseTraceOutputChannel(){return this._baseTraceOutputChannel?this._baseTraceOutputChannel:this.baseOutputChannel}async setTrace(e){this._trace=e;const t=this.activeConnection();void 0!==t&&await t.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})}refreshTrace(e,t=!1){const{trace:n,traceFormat:r}=this.getTraceConfig();this._trace=n,this._traceFormat=r,e.trace(this._trace,this._tracer,{sendNotification:t,traceFormat:this._traceFormat}).catch((e=>{this.logTrace("Updating trace failed with error",e),g.slardarReporter.captureException(e)}))}refreshWorkspaceConfiguration(e,t,n=!1){this.refreshTrace(e,n);try{const n=_.workspace.getConfiguration(t);e.sendNotification(a.DidChangeConfigurationNotification.type,{settings:JSON.parse(JSON.stringify(n))})}catch(e){}}data2String(e){if(e instanceof c.ResponseError){const t=e;return`  Message: ${t.message}\n  Code: ${t.code} ${t.data?"\n"+t.data.toString():""}`}return e instanceof Error?d.string(e.stack)?e.stack:e.message:d.string(e)?e:JSON.stringify(e)}info(e,t,n=!0){this.baseOutputChannel.appendLine(e),t&&this.baseOutputChannel.appendLine(this.data2String(t)),n&&this._baseClientOptions.revealOutputChannelOn<=v.Info&&this.showNotificationMessage(a.MessageType.Info,e)}warn(e,t,n=!0){this.baseOutputChannel.appendLine(e),t&&this.baseOutputChannel.appendLine(this.data2String(t)),n&&this._baseClientOptions.revealOutputChannelOn<=v.Warn&&this.showNotificationMessage(a.MessageType.Warning,e)}error(e,t,n=!0){this.baseOutputChannel.appendLine(e),t&&this.baseOutputChannel.appendLine(this.data2String(t)),n&&this._baseClientOptions.revealOutputChannelOn<=v.Error&&this.showNotificationMessage(a.MessageType.Error,e)}showNotificationMessage(e,t){this._baseClientOptions.messages?.showMessage(e,t??"")}logTrace(e,t){this._baseOutputChannel?.appendLine((0,p.formatMessage)(void 0,"trace","client",e)),t&&this._baseOutputChannel?.appendLine((0,p.formatMessage)(void 0,"trace","client",this.data2String(t)))}logObjectTrace(e){e&&this.baseTraceOutputChannel.appendLine((0,p.formatMessage)(void 0,"trace","client",this.data2String(e)))}registerFeatures(e=!0){}registerFeature(e){this._features.push(e)}initializeFeatures(e){const t=this._baseClientOptions.documentSelector;this._features.forEach((n=>n.initialize(e,t)))}}},2224:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.AIClient=void 0;const a=n(6727),c=n(1398),u=n(3717),l=n(1074),d=s(n(3872)),f=s(n(4675)),h=n(3610),p=n(3117);class g extends p.BaseAIClient{constructor(e,t,n,r,i){const o=d.createConverter(),s=f.createConverter(),a=void 0!==r.workspaceFolders?r.workspaceFolders.map((e=>({uri:o.asUri(e.uri),name:e.name}))):null,c=new _(r.outputChannelName??t,r.outputChannel),u=void 0===r.traceOutputChannel?void 0:new _(r.outputChannelName??t,r.traceOutputChannel);super(e,t,n,{userId:r.userId,documentSelector:r.documentSelector??[],clientInfo:r.clientInfo,revealOutputChannelOn:r.revealOutputChannelOn??p.RevealOutputChannelOn.Error,workspaceFolders:a,outputChannel:c,traceOutputChannel:u,messages:new m},i),this._syncedDocuments=new Map,this._c2p=o,this._p2c=s,this._outputChannelAdapter=c,this._traceOutputChannelAdapter=u,this._clientOptions={documentSelector:r.documentSelector??[],clientInfo:r.clientInfo,outputChannelName:r.outputChannelName??t,revealOutputChannelOn:r.revealOutputChannelOn??p.RevealOutputChannelOn.Error,workspaceFolders:r.workspaceFolders}}initialize(e){return super.initialize(e)}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}cleanUp(){super.cleanUp(),this._syncedDocuments&&this._syncedDocuments.clear()}cleanUpChannel(){this._outputChannelAdapter.dispose(),this._traceOutputChannelAdapter?.dispose()}get outputChannel(){return this._outputChannelAdapter.outputChannel}get traceOutputChannel(){return this._traceOutputChannelAdapter?.outputChannel??this.outputChannel}showNotificationMessage(e,t){t=t??"A request has failed. See the output for more information.";(e===a.MessageType.Error?c.window.showErrorMessage:e===a.MessageType.Warning?c.window.showWarningMessage:c.window.showInformationMessage)(t,"Go to output").then((e=>{void 0!==e&&this.outputChannel.show(!0)}))}registerFeatures(e=!0){this.registerFeature(new l.DidOpenTextDocumentFeature(this,this._syncedDocuments)),this.registerFeature(new l.DidCloseTextDocumentFeature(this,this._syncedDocuments)),this.registerFeature(new l.DidChangeTextDocumentFeature(this)),this.registerFeature(new l.WillSaveTextDocumentFeature(this)),this.registerFeature(new l.DidSaveTextDocumentFeature(this)),this.registerFeature(new h.WorkspaceFolderFeature(this)),e&&(this.registerFeature(new l.DidCreateTextDocumentFeature(this)),this.registerFeature(new l.DidDeleteTextDocumentFeature(this)))}getTraceConfig(){const e=c.workspace.getConfiguration(this._id);let t=u.Trace.Off,n=u.TraceFormat.Text;if(e){const r=e.get("trace.server","off");return"string"==typeof r?t=u.Trace.fromString(r):(t=u.Trace.fromString(e.get("trace.server.verbosity","off")),n=u.TraceFormat.fromString(e.get("trace.server.format","text"))),{trace:t,traceFormat:n}}return super.getTraceConfig()}}t.AIClient=g;class _{constructor(e,t){this.name=e,this._outputChannel=t,this.disposeOutputChannel=void 0===t}get outputChannel(){return this._outputChannel||(this._outputChannel=c.window.createOutputChannel(this.name)),this._outputChannel}append(e){this.outputChannel.append(e)}appendLine(e){this.outputChannel.appendLine(e)}dispose(){void 0!==this._outputChannel&&this.disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}}class m{showMessage(e,t){switch(e){case a.MessageType.Error:c.window.showErrorMessage(t);break;case a.MessageType.Warning:c.window.showWarningMessage(t);break;case a.MessageType.Info:default:c.window.showInformationMessage(t)}}}},3872:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.createConverter=function(){const e=e=>e.toString();function t(t){return{uri:e(t.uri)}}function n(t){return{uri:e(t)}}function r(t){return{uri:e(t.uri),languageId:t.languageId,version:t.version,text:t.getText()}}function i(e){switch(e){case a.TextDocumentSaveReason.Manual:return c.TextDocumentSaveReason.Manual;case a.TextDocumentSaveReason.AfterDelay:return c.TextDocumentSaveReason.AfterDelay;case a.TextDocumentSaveReason.FocusOut:return c.TextDocumentSaveReason.FocusOut}return c.TextDocumentSaveReason.Manual}return{asUri:function(t){return e(t)},asTextDocumentIdentifier:t,asTextDocumentItem:r,asOpenTextDocumentParams:function(e){return{textDocument:r(e)}},asChangeTextDocumentParams:function(t,n,r){if(function(e){const t=e;return!!t.uri&&!!t.version}(t))return{textDocument:{uri:e(t.uri),version:t.version},contentChanges:[{text:t.getText()}]};if(function(e){const t=e;return!!t.document&&!!t.contentChanges}(t)){const i=r;return{textDocument:{uri:e(n),version:i},contentChanges:t.contentChanges.map((e=>{const t=e.range;return{range:{start:{line:t.start.line,character:t.start.character},end:{line:t.end.line,character:t.end.character}},rangeLength:e.rangeLength,text:e.text}}))}}throw Error("Unsupported text document change parameter")},asCloseTextDocumentParams:function(e){return{textDocument:t(e)}},asSaveTextDocumentParams:function(e,n=!1){let r={textDocument:t(e)};return n&&(r.text=e.getText()),r},asWillSaveTextDocumentParams:function(e){return{textDocument:t(e.document),reason:i(e.reason)}},asDeleteTextDocumentParams:function(e){return{textDocument:n(e)}},asCreateTextDocumentParams:function(e){return{textDocument:n(e)}},asAccessTextDocumentParams:function(e){return{textDocument:n(e)}}}};const a=s(n(1398)),c=s(n(6727))},5819:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.createConnection=function(e,t,n,r,i){let o=new l,s=(0,a.createProtocolConnection)(e,t,o,i);return s.onError((e=>{n(e[0],e[1],e[2])})),s.onClose(r),{listen:()=>s.listen(),sendRequest:s.sendRequest,onRequest:s.onRequest,hasPendingResponse:s.hasPendingResponse,sendNotification:s.sendNotification,onNotification:s.onNotification,onProgress:s.onProgress,sendProgress:s.sendProgress,trace:(e,t,n)=>{const r={sendNotification:!1,traceFormat:c.TraceFormat.Text};return void 0===n?s.trace(e,t,r):(u.boolean(n),s.trace(e,t,n))},initialize:e=>s.sendRequest(a.InitializeRequest.type,e),shutdown:()=>s.sendRequest(a.ShutdownRequest.type,void 0),exit:()=>s.sendNotification(a.ExitNotification.type),end:()=>s.end(),dispose:()=>s.dispose()}};const a=n(6727),c=n(3717),u=s(n(2187));class l{error(e){(0,c.RAL)().console.error(e)}warn(e){(0,c.RAL)().console.warn(e)}info(e){(0,c.RAL)().console.info(e)}log(e){(0,c.RAL)().console.log(e)}}},408:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4711:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),n(7331),i(n(2224),t),i(n(3117),t),i(n(5819),t),i(n(408),t),i(n(2187),t),i(n(41),t),i(n(5023),t),i(n(5261),t)},2187:(e,t)=>{"use strict";function n(e){return"string"==typeof e||e instanceof String}function r(e){return"function"==typeof e}function i(e){return Array.isArray(e)}function o(e){return e&&r(e.then)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=n,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=r,t.array=i,t.stringArray=function(e){return i(e)&&e.every((e=>n(e)))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.thenable=o,t.asPromise=function(e){return e instanceof Promise?e:o(e)?new Promise(((t,n)=>{e.then((e=>t(e)),(e=>n(e)))})):Promise.resolve(e)}},5023:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logger=t.LogHelper=void 0;const r=n(7933),i=n(41),o=n(2196);class s{constructor(e){this.level=e}get channel(){return this._output}setOutputChannel(e){this._output=e}setLevel(e){this.level=e}error(e){this._log(r.LogLevel.Error,e)}warn(e){this._log(r.LogLevel.Warning,e)}info(e){this._log(r.LogLevel.Info,e)}log(e){this._log(r.LogLevel.Log,e)}_log(e,t){this.level>=e&&this._output?.appendLine(t)}}var a;!function(e){const t=new s(r.LogLevel.Info),n=i.slardarReporter,a=new o.MultiLoggerImpl([t,n]);e.setup=function(e,r){t.level=e,n.level=e,a.level=e,r&&t.setOutputChannel(r)},e.getLogger=function(e="all"){switch(e){case"output":return t;case"slardar":return n;default:return a}},e.outputChannel=function(){return t.channel}}(a||(t.LogHelper=a={})),t.logger={error:function(e,t="all",n="",...i){a.getLogger(t).error((0,r.formatMessage)(r.LogLevel.Error,"client",n,e))},warn:function(e,t="all",n="",...i){a.getLogger(t).warn((0,r.formatMessage)(r.LogLevel.Warning,"client",n,e))},info:function(e,t="all",n="",...i){a.getLogger(t).info((0,r.formatMessage)(r.LogLevel.Info,"client",n,e))},log:function(e,t="all",n="",...i){a.getLogger(t).log((0,r.formatMessage)(r.LogLevel.Log,"client",n,e))}}},4675:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.createConverter=function(){return{asDocumentSelector:function(e){const t=[];for(const n of e)"string"==typeof n?t.push(n):a.DocumentFilter.is(n)&&t.push({language:n.language,scheme:n.scheme,pattern:n.pattern});return t}}};s(n(1398));const a=s(n(6727))},4847:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RPCTraceUtil=void 0;const r=n(6727),i=n(5023),o=n(41);var s;!function(e){let t=!1;const n="trigger_timestamp";e.setEnable=function(e){t=e},e.enable=function(){return t},e.traceRPC=function(e,s,a){if(t)try{const t="string"==typeof s?s:s.method;if("sendRequest"===e||"sendNotification"===e)Array.isArray(a)?a.length>0&&(void 0===a[0]&&(a[0]={}),a[0][n]=Date.now()):a[n]=Date.now();else if("onRequest"===e||"onNotification"===e){let s;if(s=Array.isArray(a)?a[0]:a,n in s&&"number"==typeof s[n]){const a=Date.now()-s[n],c=`[${r.MessageDirection.serverToClient}]-[${e}]-[${t}] took ${a}ms`;i.logger.info(c,"slardar","RPCTrace"),o.slardarReporter.report({ev_type:"performance",payload:{name:"aiserver-rpc-duration",value:a,type:"perf",extra:{type:e,method:t,message_direction:r.MessageDirection.serverToClient}}})}}}catch(t){const n=`[${r.MessageDirection.serverToClient}]-[${e}]-[${s}] traceRPC error}`;i.logger.info(n,"slardar","RPCTrace")}}}(s||(t.RPCTraceUtil=s={}))},41:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.slardarReporter=void 0;const r=n(7933);t.slardarReporter=new r.BrowserSlardarReporter},5261:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lspTaskTrace=void 0;const r=n(5023),i=n(41);t.lspTaskTrace=new class{constructor(e){this._enableReport=!1,this._TraceName=e,this._tasks=new Set}setReportEnable(e){this._enableReport=e}start(e,t){const n={taskName:e,startTime:Date.now(),tag:t};return this._tasks.add(n),n}end(e,t=!0){if(this._tasks.has(e)&&(this._tasks.delete(e),this._enableReport&&t)){const t=Date.now()-e.startTime,n=`[${this._TraceName}]-[${e.taskName}]-[${e.tag}] took ${t}ms`;r.logger.info(n,"slardar","TaskTrace"),i.slardarReporter.report({ev_type:"performance",payload:{name:`${this._TraceName}`,value:t,type:"perf",extra:{task:e.taskName,tag:e.tag??""}}})}}clear(e){this.end(e,!1)}}("vscode-lsp-duration")},1074:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DidDeleteTextDocumentFeature=t.DidCreateTextDocumentFeature=t.DidSaveTextDocumentFeature=t.WillSaveTextDocumentFeature=t.DidChangeTextDocumentFeature=t.DidCloseTextDocumentFeature=t.DidOpenTextDocumentFeature=void 0;const r=n(6727),i=n(6001),o=n(1398),s=n(5023),a=n(41);class c{constructor(e){this._client=e}}class u extends c{static async textDocumentFilter(e,t){for(const n of e)if(o.languages.match(n,t)>0)return!0;return!1}static async uriFilter(e,t){const n=await o.workspace.openTextDocument(t);for(const t of e)if(o.languages.match(t,n)>0)return!0;return!1}constructor(e,t,n,r,i){super(e),this._event=t,this._type=n,this._createParams=r,this._selectorFilter=i,this._selectors=new Map}initialize(e,t){t&&this.register({id:(0,i.v4)(),registerOptions:{documentSelector:t}})}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=this._event((e=>{s.logger.log(`Sending document notification ${this._type.method}`),this.callback(e).catch((e=>{this._client.error(`Sending document notification ${this._type.method} failed.`,e),a.slardarReporter.captureException(e)}))}))),this._selectors.set(e.id,e.registerOptions.documentSelector))}async callback(e){if(await this.matches(e)){const t=this._createParams(e);await this._client.sendNotification(this._type,t),this.notificationSent(await this.getTextDocument(e),this._type,t)}}async matches(e){return!this._selectorFilter||this._selectorFilter(this._selectors.values(),e)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}}t.DidOpenTextDocumentFeature=class extends u{constructor(e,t){super(e,o.workspace.onDidOpenTextDocument,r.DidOpenTextDocumentNotification.type,(t=>e.code2ProtocolConverter.asOpenTextDocumentParams(t)),u.textDocumentFilter),this._syncedDocuments=t}register(e){if(super.register(e),!e.registerOptions.documentSelector)return;const t=this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector);o.workspace.textDocuments.forEach((e=>{const n=e.uri.toString();this._syncedDocuments.has(n)||o.languages.match(t,e)>0&&(this._client.sendNotification(this._type,this._createParams(e)).catch((e=>{this._client.error(`Sending document notification ${this._type.method} failed`,e),a.slardarReporter.captureException(e)})),this._syncedDocuments.set(n,e))}))}getTextDocument(e){return Promise.resolve(e)}notificationSent(e,t,n){this._syncedDocuments.set(e.uri.toString(),e)}};t.DidCloseTextDocumentFeature=class extends u{constructor(e,t){super(e,o.workspace.onDidCloseTextDocument,r.DidCloseTextDocumentNotification.type,(t=>e.code2ProtocolConverter.asCloseTextDocumentParams(t)),u.textDocumentFilter),this._syncedDocuments=t}getTextDocument(e){return Promise.resolve(e)}notificationSent(e,t,n){this._syncedDocuments.delete(e.uri.toString())}};t.DidChangeTextDocumentFeature=class extends c{constructor(e){super(e),this._changeData=new Map}initialize(e,t){t&&this.register({id:(0,i.v4)(),registerOptions:{documentSelector:t,syncKind:r.TextDocumentSyncKind.Incremental}})}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=o.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(e.id,{syncKind:e.registerOptions.syncKind,documentSelector:this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)}))}async callback(e){if(0===e.contentChanges.length)return;if(!((t=e.document.languageId)&&t.toLowerCase().indexOf("log")<0&&t.toLowerCase().indexOf("plaintext")<0&&t.toLowerCase().indexOf("output")<0))return;var t;const n=e.document.uri,i=e.document.version,s=[];for(const t of this._changeData.values())if(o.languages.match(t.documentSelector,e.document)>0)if(t.syncKind===r.TextDocumentSyncKind.Incremental){const t=async e=>{const t=this._client.code2ProtocolConverter.asChangeTextDocumentParams(e,n,i);await this._client.sendNotification(r.DidChangeTextDocumentNotification.type,t),this.notificationSent(e.document,r.DidChangeTextDocumentNotification.type,t)};s.push(t(e))}else t.syncKind,r.TextDocumentSyncKind.Full;return Promise.all(s).then(void 0,(e=>{throw this._client.error(`Sending document notification ${r.DidChangeTextDocumentNotification.type.method} failed`,e),e}))}notificationSent(e,t,n){}dispose(){this._changeData.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}};t.WillSaveTextDocumentFeature=class extends u{constructor(e){super(e,o.workspace.onWillSaveTextDocument,r.WillSaveTextDocumentNotification.type,(t=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(t)),((e,t)=>u.textDocumentFilter(e,t.document)))}getTextDocument(e){return Promise.resolve(e.document)}notificationSent(e,t,n){}};t.DidSaveTextDocumentFeature=class extends u{constructor(e){super(e,o.workspace.onDidSaveTextDocument,r.DidSaveTextDocumentNotification.type,(t=>e.code2ProtocolConverter.asSaveTextDocumentParams(t)),u.textDocumentFilter)}notificationSent(e,t,n){}getTextDocument(e){return Promise.resolve(e)}};t.DidCreateTextDocumentFeature=class extends c{constructor(e){super(e),this._selectors=new Map}initialize(e,t){t&&this.register({id:(0,i.v4)(),registerOptions:{documentSelector:t}})}register(e){e.registerOptions.documentSelector&&(this._selectors.set(e.id,e.registerOptions.documentSelector),this._listener||(this._listener=o.workspace.onDidCreateFiles(this.callback,this)))}async callback(e){e.files.forEach((async e=>{try{const t=await o.workspace.openTextDocument(e),n=async()=>{const n=this._client.code2ProtocolConverter.asCreateTextDocumentParams(e);await this._client.sendNotification(r.DidCreateTextDocumentNotification.type,n),this.notificationSent(t,r.DidCreateTextDocumentNotification.type,n)};for(const e of this._selectors.values())if(o.languages.match(e,t)>0)return n()}catch(t){s.logger.info(`DidCreateTextDocumentFeature: cannot open uri: ${e.toString()}, err = ${t}`)}}))}notificationSent(e,t,n){s.logger.info(`DidCreateTextDocumentFeature: textDocument.uri: ${e?.uri.toString()}`)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}};t.DidDeleteTextDocumentFeature=class extends c{constructor(e){super(e),this._selectors=new Map}initialize(e,t){t&&this.register({id:(0,i.v4)(),registerOptions:{documentSelector:t}})}register(e){e.registerOptions.documentSelector&&(this._selectors.set(e.id,e.registerOptions.documentSelector),this._listener||(this._listener=o.workspace.onDidDeleteFiles(this.callback,this)))}async callback(e){e.files.forEach((async e=>{try{return(async()=>{const t=this._client.code2ProtocolConverter.asDeleteTextDocumentParams(e);await this._client.sendNotification(r.DidDeleteTextDocumentNotification.type,t),this.notificationSent(e,r.DidDeleteTextDocumentNotification.type,t)})()}catch(t){s.logger.info(`DidDeleteTextDocumentFeature: cannot open uri: ${e.toString()}, err = ${t}`)}}))}notificationSent(e,t,n){s.logger.info(`DidDeleteTextDocumentFeature: uri: ${e.toString()}`)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}}},3610:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceFolderFeature=void 0;const r=n(6727),i=n(6001),o=n(1398),s=n(41);function a(e,t){return e.filter((e=>t.indexOf(e)<0))}t.WorkspaceFolderFeature=class{constructor(e){this._client=e,this._listeners=new Map}initialize(e,t){this._initialFolders=o.workspace.workspaceFolders,this.register({id:(0,i.v4)(),registerOptions:void 0})}sendInitialEvent(e){let t;if(this._initialFolders&&e){const n=a(this._initialFolders,e),r=a(e,this._initialFolders);(r.length>0||n.length>0)&&(t=this.doSendEvent(r,n))}else this._initialFolders?t=this.doSendEvent([],this._initialFolders):e&&(t=this.doSendEvent(e,[]));void 0!==t&&t.catch((e=>{this._client.error(`Sending notification ${r.DidChangeWorkspaceFoldersNotification.type.method} failed`,e),s.slardarReporter.captureException(e)}))}doSendEvent(e,t){let n={event:{added:e.map((e=>this.asProtocol(e))),removed:t.map((e=>this.asProtocol(e)))}};return this._client.sendNotification(r.DidChangeWorkspaceFoldersNotification.type,n)}register(e){let t=e.id,n=o.workspace.onDidChangeWorkspaceFolders((e=>{(e=>this.doSendEvent(e.added,e.removed))(e).catch((e=>{this._client.error(`Sending notification ${r.DidChangeWorkspaceFoldersNotification.type.method} failed`,e),s.slardarReporter.captureException(e)}))}));this._listeners.set(t,n),this.sendInitialEvent(o.workspace.workspaceFolders)}asProtocol(e){return e&&void 0!==e?{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}:null}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}}},8628:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(4711),t)},1387:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbsBaseFeatureGate=t.FeatureName=void 0,function(e){e.ENABLE_APM_VSCODE_RPC_DURATION_TRACE="enable_apm_vscode_rpc_duration_trace",e.ENABLE_APM_VSCODE_EVENT_DELAY_TRACE="enable_apm_vscode_event_delay_trace",e.ENABLE_APM_VSCODE_CPU_TRACE="enable_apm_vscode_cpu_trace",e.ENABLE_APM_VSCODE_MEM_TRACE="enable_apm_vscode_mem_trace",e.FEATURE_ENABLE_INLINE_CHAT="feature_enable_inline_chat"}(t.FeatureName||(t.FeatureName={}));t.AbsBaseFeatureGate=class{initFeatureGate(e,t,n,r,i){}isAsyncFeatureEnable(e,t){t()}isFeatureEnable(e){return!0}isFeatureEnableDefaultTrue(e){return!0}runTaskWhenFeatureEnable(e,t,n){}getInstanceWhenFeatureEnable(e,t,n){return n}}},1408:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseExtensionAIClient=void 0;const s=o(n(1398)),a=n(8492),c=n(742),u=n(4968),l=n(4594),d=n(9836);t.BaseExtensionAIClient=class{constructor(){this.client=void 0,this.clientInfo=void 0,this.deviceInfo=void 0}getInstance(){return this.client}isAIClientActivated(){return!!this.client}async getClientInfo(e){if(this.clientInfo)return this.clientInfo;const t=s.extensions.getExtension(e.extension.id)?.packageJSON,n=await(0,u.getIdeEnv)(),r=await(0,u.isProdEnv)();return this.clientInfo={channel:"vscode",envId:n,isProd:r,ideVersion:s.version,extensionVersion:t.version,versionCode:t.versionCode,isSSHRemote:(0,u.isSSHRemote)(),disableRemoteLog:(0,c.isTrae)(),sessionID:l.PluginSession.id(),xAppId:"a4c6c500-6846-45b6-94f6-1b231eb53742",ideProductName:"vscode",header:this.getHttpHeader(),enableHttpProxy:this.getOverrideProxy()},a.logger.logInfo(`getClientInfo: ${JSON.stringify(this.clientInfo)}`),this.clientInfo}getProxySettings(){let e=this.getWorkspaceConfiguration("proxyMode");e||(e="system");const t=this.getWorkspaceConfiguration("proxyUrl")??"";return{system:s.workspace.getConfiguration().get("http.proxy")??"",mode:e,manual:t}}async getDeviceInfo(){if(this.deviceInfo)return this.deviceInfo;try{this.deviceInfo=await this.buildDeviceInfo()}catch(e){a.logger.logError(`buildDeviceInfo error: ${e}`)}return this.deviceInfo}async buildDeviceInfo(){let e={cpuModel:"",osName:"",osVersion:"",cpuArch:"",nodeVersion:""};try{const t=await(this.client?.sendRequest(d.GetDeviceInfoRequest.type));t&&(e={...t})}catch(e){}return e}async deactivate(){await(this.client?.stop()),this.client=void 0}getHttpHeader(){const e=this.getWorkspaceConfiguration("debugOverrideXEnv"),t=this.getWorkspaceConfiguration("debugOverrideXPPE");if(e&&t)return{"x-tt-env":e,"x-use-ppe":t}}getOverrideProxy(){return!0===this.getWorkspaceConfiguration("debugOverrideProxy")}getWorkspaceConfiguration(e){const t=s.workspace.getConfiguration((0,c.getBrand)()+".advanced");if(void 0!==t&&void 0!==t[e])return t[e]}}},7056:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Region=void 0,function(e){e.CN="cn",e.US="us",e.SG="sg"}(t.Region||(t.Region={}))},1700:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OnSecurityAccessCallback=void 0;t.OnSecurityAccessCallback=class{}},8903:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.vscodeExecuteService=t.VSCodeExecuteService=void 0;const i=r(n(1398));class o{async getDefinitions(e,t){return i.default.commands.executeCommand("vscode.executeDefinitionProvider",e,t)}async getImplementations(e,t){return i.default.commands.executeCommand("vscode.executeImplementationProvider",e,t)}async getReferences(e,t){return i.default.commands.executeCommand("vscode.executeReferenceProvider",e,t)}async getWorkspaceSymbols(e){return i.default.commands.executeCommand("vscode.executeWorkspaceSymbolProvider",e)}async getHoverInfos(e,t){return i.default.commands.executeCommand("vscode.executeHoverProvider",e,t)}async getCallHierarchy(e,t){return i.default.commands.executeCommand("vscode.prepareCallHierarchy",e,t)}async getIncomingCall(e){return i.default.commands.executeCommand("vscode.provideIncomingCalls",e)}}t.VSCodeExecuteService=o,t.vscodeExecuteService=new o},8176:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLanguageId=t.SUPPORTED_LANGUAGES=void 0,t.SUPPORTED_LANGUAGES={python:"python",javascript:"javascript",javascriptreact:"javascript",jsx:"javascript",typescript:"typescript",typescriptreact:"typescript",tsx:"tsx",go:"go",ruby:"ruby",csharp:"csharp",cpp:"cpp",java:"java",c:"c"},t.getLanguageId=function(e){if(e in t.SUPPORTED_LANGUAGES)return t.SUPPORTED_LANGUAGES[e];throw new Error(`Unrecognized language: ${e}`)}},6871:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.queryDefinitions=t.queryTypeDeclarations=t.queryTypeReferences=t.queryClassDeclarations=t.isExpressionStatement=t.isStructuralElement=t.queryNewExpressions=t.queryExpressionStatement=t.queryCallExpressions=t.queryFunctionDefinitions=t.executeTreeSitterQueries=t.parse=void 0;const r=n(8176),i=n(6845),o=n(8492),s=n(7933);function a(e,t){if(!e)return[];const n=[];for(const r of e){if(!r[1]){const e=t.tree.getLanguage();r[1]=e.query(r[0])}n.push(...r[1].matches(t))}return n}t.parse=async function(e,t){try{return s.TreeSitter.INSTANCE.parseSyntaxTree((0,r.getLanguageId)(e),t)}catch(t){return void o.logger.logInfo(`Failed to parse ${e}, ${t}`)}},t.executeTreeSitterQueries=a,t.queryFunctionDefinitions=function(e,t){return a(i.FUNC_DEF[(0,r.getLanguageId)(e)],t)},t.queryCallExpressions=function(e,t){return a(i.CALL_EXPR[(0,r.getLanguageId)(e)],t)},t.queryExpressionStatement=function(e,t){return a(i.EXPR_STATEMENT_QUERY[(0,r.getLanguageId)(e)],t)},t.queryNewExpressions=function(e,t){return a(i.NEW_EXPR[(0,r.getLanguageId)(e)],t)},t.isStructuralElement=function(e,t){return i.STRUCTURES[(0,r.getLanguageId)(e)].includes(t.type)||i.COND_STATEMENT[(0,r.getLanguageId)(e)].includes(t.type)},t.isExpressionStatement=function(e,t){return i.EXPR_STATEMENT[(0,r.getLanguageId)(e)].includes(t.type)},t.queryClassDeclarations=function(e,t){return a(i.CLASS_DECL[(0,r.getLanguageId)(e)],t)},t.queryTypeReferences=function(e,t){return a(i.TYPE_ID[(0,r.getLanguageId)(e)],t)},t.queryTypeDeclarations=function(e,t){return a(i.INTERFACE_DECL[(0,r.getLanguageId)(e)],t)},t.queryDefinitions=function(e,t){return a(i.DEFINITION[(0,r.getLanguageId)(e)],t)}},6845:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFINITIONS=t.DEFINITION=t.EXPR_STATEMENT_QUERY=t.FUNC_DECL=t.EXPR_STATEMENT=t.COND_STATEMENT=t.STRUCTURES=t.COMMENT=t.FUNC_DEF=t.NEW_EXPR=t.TYPE_ID=t.INTERFACE_DECL=t.CLASS_DECL=t.CALL_EXPR=void 0;const r=n(8176);function i(e,t){return Object.fromEntries(e.map((e=>[e,t])))}function o(e){return`[\n      ${t.FUNC_DECL[(0,r.getLanguageId)(e)].map((e=>`(${e})`)).join("\n  ")}\n    ] @definition`}function s(e){return`[\n      ${t.EXPR_STATEMENT[(0,r.getLanguageId)(e)].map((e=>`(${e})`)).join("\n  ")}\n    ] @expression_statement`}t.CALL_EXPR={...i(["javascript","typescript","tsx"],[["[\n      (call_expression\n        function: (identifier) @identifier)\n      (call_expression\n        function: (member_expression\n          (property_identifier) @identifier))\n    ] @call_expression"]]),python:[["[\n      (call\n        function: (identifier) @identifier)\n      (call\n        function: (attribute\n          attribute: (identifier) @identifier))\n    ] @call_expression"]],csharp:[["[\n      (invocation_expression\n        function: (identifier) @identifier)\n      (invocation_expression\n        function: (member_access_expression\n          name: (identifier) @identifier))\n      ] @call_expression"]],go:[["[\n      (call_expression\n        ((selector_expression\n          (field_identifier) @identifier)))\n      (call_expression\n        (identifier) @identifier)\n    ] @call_expression"]],java:[["[\n      (method_invocation\n        name: (identifier) @identifier)\n    ] @call_expression"]],ruby:[['[\n      (call (identifier) @identifier\n        (#not-match? @identifier "new|send|public_send|method"))\n      (call\n        receiver: (identifier)\n        method: (identifier) @method\n        (#match? @method "^(send|public_send|method)")\n        arguments: (argument_list\n          (simple_symbol) @symbol))\n    ] @call_expression']],cpp:[["[\n      (call_expression (identifier) @identifier)\n      (call_expression\n        (field_expression\n          field: (field_identifier) @identifier))\n      (call_expression\n        (call_expression\n          (primitive_type)\n          (argument_list\n            (pointer_expression\n            (identifier) @identifier))))\n    ] @call_expression"]]},t.CLASS_DECL={...i(["javascript","typescript","tsx"],[["(class_declaration) @class_declaration"]]),java:[["(class_declaration) @class_declaration"]],csharp:[["(class_declaration) @class_declaration"]],python:[["(class_definition) @class_declaration"]],cpp:[["(class_specifier) @class_declaration"]],ruby:[["(class) @class_declaration"]],go:[["(type_declaration\n\t\t\t\t(type_spec\n\t\t\t\t\t(type_identifier) @type_identifier)) @class_declaration"]]},t.INTERFACE_DECL={typescript:[["[\n\t\t\t\t(interface_declaration)\n\t\t\t\t(type_alias_declaration)\n\t\t\t] @type_declaration"]],csharp:[["(interface_declaration\n\t\t\t\t(identifier) @type_identifier) @type_declaration"]],cpp:[["[\n\t\t\t\t(struct_specifier\n\t\t\t\t\t(type_identifier) @type_identifier)\n\t\t\t\t(union_specifier\n\t\t\t\t\t(type_identifier) @type_identifier)\n\t\t\t\t(enum_specifier\n\t\t\t\t\t(type_identifier) @type_identifier)\n\t\t\t] @type_declaration"]],java:[["(interface_declaration\n\t\t\t\t(identifier) @type_identifier) @type_declaration"]],go:[["(type_declaration\n\t\t\t\t(type_spec\n\t\t\t\t\t(type_identifier) @type_identifier)) @type_declaration"]],ruby:[["(module (constant) @type_identifier)"]],python:[["(class_definition\n\t\t\t\t(identifier) @type_identifier) @class_declaration"]]},t.TYPE_ID={typescript:[["(type_identifier) @type_identifier"]],go:[["(type_identifier) @type_identifier"]],ruby:[["(type_identifier) @type_identifier"]],csharp:[["[\n\t\t\t\t(base_list\n\t\t\t\t\t(identifier) @type_identifier)\n\t\t\t\t(variable_declaration\n\t\t\t\t\t(identifier) @type_identifier)\n\t\t\t]"]],cpp:[["(type_identifier) @type_identifier"]],java:[["(type_identifier) @type_identifier"]],python:[["[\n\t\t\t\t(type (identifier) @type_identifier)\n\t\t\t\t(argument_list\n\t\t\t\t\t(identifier) @type_identifier)\n\t\t\t]"]]},t.NEW_EXPR={...i(["javascript","typescript","tsx"],[["(new_expression\n\t\t\t\tconstructor: (identifier) @new_expression)"]]),python:[["(call\n\t\t\t\tfunction: (identifier) @new_expression)"]],csharp:[["(object_creation_expression\n\t\t\t\t(identifier) @new_expression)"]],java:[["(object_creation_expression\n\t\t\t\t(type_identifier) @new_expression)"]],cpp:[["(declaration\n\t\t\t\t(type_identifier) @new_expression)"]],go:[["(composite_literal (type_identifier) @new_expression)"]],ruby:[['((call\n\t\t\t\treceiver: ((constant) @new_expression)\n\t\t\t\tmethod: (identifier) @method)\n\t\t\t\t\t(#eq? @method "new"))']]},t.FUNC_DEF={python:[["[\n\t\t\t\t(function_definition\n\t\t\t\t\tname: (identifier) @identifier\n\t\t\t\t\tbody: (block\n\t\t\t\t\t\t\t(expression_statement (string))? @docstring) @body)\n\t\t\t\t(assignment\n\t\t\t\t\tleft: (identifier) @identifier\n\t\t\t\t\tright: (lambda) @body)\n\t\t\t] @function"],['(ERROR ("def" (identifier) (parameters))) @function']],...i(["javascript","typescript","tsx"],[["[\n\t\t\t\t(function\n\t\t\t\t\tname: (identifier)? @identifier\n\t\t\t\t\tbody: (statement_block) @body)\n\t\t\t\t(function_declaration\n\t\t\t\t\tname: (identifier)? @identifier\n\t\t\t\t\tbody: (statement_block) @body)\n\t\t\t\t(generator_function\n\t\t\t\t\tname: (identifier)? @identifier\n\t\t\t\t\tbody: (statement_block) @body)\n\t\t\t\t(generator_function_declaration\n\t\t\t\t\tname: (identifier)? @identifier\n\t\t\t\t\tbody: (statement_block) @body)\n\t\t\t\t(method_definition\n\t\t\t\t\tname: (property_identifier)? @identifier\n\t\t\t\t\tbody: (statement_block) @body)\n\t\t\t\t(arrow_function\n\t\t\t\t\tbody: (statement_block) @body)\n\t\t\t] @function"]]),go:[["[\n\t\t\t\t(function_declaration\n\t\t\t\t\tname: (identifier) @identifier\n\t\t\t\t\tbody: (block) @body)\n\t\t\t\t(method_declaration\n\t\t\t\t\tname: (field_identifier) @identifier\n\t\t\t\t\tbody: (block) @body)\n\t\t\t] @function"]],ruby:[['[\n\t\t\t\t(method\n\t\t\t\t\tname: (_) @identifier\n\t\t\t\t\tparameters: (method_parameters)? @params\n\t\t\t\t\t[(_)+ "end"] @body)\n\t\t\t\t(singleton_method\n\t\t\t\t\tname: (_) @identifier\n\t\t\t\t\tparameters: (method_parameters)? @params\n\t\t\t\t\t[(_)+ "end"] @body)\n\t\t\t] @function']],csharp:[["[\n\t\t\t\t(constructor_declaration\n\t\t\t\t\t(identifier) @identifier\n\t\t\t\t\t(block) @body)\n\t\t\t\t(destructor_declaration\n\t\t\t\t\t(identifier) @identifier\n\t\t\t\t\t(block) @body)\n\t\t\t\t(operator_declaration\n\t\t\t\t\t(block) @body)\n\t\t\t\t(method_declaration\n\t\t\t\t\t(identifier) @identifier\n\t\t\t\t\t(block) @body)\n\t\t\t\t(local_function_statement\n\t\t\t\t\t(identifier) @identifier\n\t\t\t\t\t(block) @body)\n\t\t\t] @function"]],cpp:[["(function_definition\n\t\t\t\t\t(_\n\t\t\t\t\t(identifier) @identifier)\n\t\t\t\t(compound_statement) @body) @function"]],java:[["[\n\t\t\t\t(constructor_declaration\n\t\t\t\t\tname: (identifier) @identifier\n\t\t\t\t\tbody: (constructor_body) @body)\n\t\t\t\t(method_declaration\n\t\t\t\t\tname: (_) @identifier\n\t\t\t\t\tbody: (block) @body)\n\t\t\t\t(lambda_expression\n\t\t\t\t\tbody: (block) @body)\n\t\t\t] @function"]]},t.COMMENT={...i(["javascript","typescript","tsx"],[['((comment) @comment\n\t\t\t(#match? @comment "^\\\\/\\\\*\\\\*")) @docComment']]),java:[['((block_comment) @block_comment\n\t\t\t(#match? @block_comment "^\\\\/\\\\*\\\\*")) @docComment']],cpp:[['((comment) @comment\n\t\t\t(#match? @comment "^\\\\/\\\\*\\\\*")) @docComment']],csharp:[['(\n\t\t\t((comment) @c\n\t\t\t\t(#match? @c "^\\\\/\\\\/\\\\/"))+\n\t\t) @docComment']],python:[["(expression_statement\n\t\t\t(string) @docComment)"]],go:[["((comment)+) @docComment"]],ruby:[["((comment)+) @docComment"]]},t.STRUCTURES={...i(["typescript","tsx"],["program","interface_declaration","class_declaration","function_declaration","function","type_alias_declaration","method_definition"]),javascript:["program","class_declaration","function_declaration","function","method_definition"],java:["program","class_declaration","interface_declaration","method_declaration"],cpp:["translation_unit","class_declaration","function_definition"],csharp:["compilation_unit","class_declaration","interface_declaration","method_declaration"],python:["module","class_definition","function_definition"],go:["source_file","type_declaration","function_declaration","method_declaration"],ruby:["program","method","class","method"]},t.COND_STATEMENT={...i(["typescript","tsx","javascript"],["for_in_statement","for_statement","if_statement","while_statement","do_statement","try_statement","switch_statement"]),java:["for_statement","enhanced_for_statement","if_statement","while_statement","do_statement","try_statement","switch_expression"],cpp:["for_statement","for_range_loop","if_statement","while_statement","do_statement","try_statement","switch_statement"],csharp:["for_statement","for_each_statement","if_statement","while_statement","do_statement","try_statement","switch_expression"],python:["for_statement","if_statement","while_statement","try_statement"],go:["for_statement","if_statement","type_switch_statement"],ruby:["while","for","if","case"]},t.EXPR_STATEMENT={...i(["typescript","tsx"],["lexical_declaration","expression_statement","public_field_definition"]),javascript:["call_expression","expression_statement","variable_declaration","public_field_definition"],java:["expression_statement","local_variable_declaration","field_declaration"],cpp:["field_declaration","expression_statement","declaration"],csharp:["field_declaration","expression_statement"],python:["expression_statement"],go:["short_var_declaration","call_expression"],ruby:["call","assignment"]},t.FUNC_DECL={...i(["typescript","tsx"],["class_declaration","function_declaration","generator_function_declaration","interface_declaration","internal_module","method_definition"]),javascript:["class_declaration","function_declaration","generator_function_declaration","method_definition"],java:["class_declaration","constructor_declaration","enum_declaration","interface_declaration","method_declaration","module_declaration"],cpp:["class_specifier","function_definition","namespace_definition","struct_specifier"],csharp:["class_declaration","constructor_declaration","destructor_declaration","enum_declaration","interface_declaration","method_declaration","namespace_declaration","struct_declaration"],python:["function_definition","class_definition"],go:["function_declaration","method_declaration"],ruby:[]},t.EXPR_STATEMENT_QUERY={typescript:[[s("typescript")]],tsx:[[s("tsx")]],javascript:[[s("javascript")]],java:[[s("java")]],cpp:[[s("cpp")]],csharp:[[s("csharp")]],python:[[s("python")]],go:[[s("go")]],ruby:[]},t.DEFINITION={typescript:[[o("typescript")]],tsx:[[o("tsx")]],javascript:[[o("javascript")]],java:[[o("java")]],cpp:[[o("cpp")]],csharp:[[o("csharp")]],python:[[o("python")]],go:[[o("go")]],ruby:[]},t.DEFINITIONS={typescript:[[o("typescript")]],tsx:[[o("tsx")]],javascript:[[o("javascript")]],java:[[o("java")]],cpp:[[o("cpp")]],csharp:[[o("csharp")]],python:[[o("python")]],go:[[o("go")]],ruby:[[o("ruby")]]}},1426:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SemanticChunkTree=void 0;const r=n(236);t.SemanticChunkTree=class{constructor(e,t){this.syntaxTreeRoot=t,this.roots=[],this.formTree(e)}formTree(e){e.sort(((e,t)=>e.mainBlock.startIndex-t.mainBlock.startIndex||e.mainBlock.endIndex-t.mainBlock.endIndex));const t=[],n=()=>t[t.length-1];for(const s of e){const e={info:s,children:[]};let a=n();if(a){if(i=a.info,o=s,i.mainBlock.startIndex!==o.mainBlock.startIndex||i.mainBlock.endIndex!==o.mainBlock.endIndex){for(;a&&!r.TreeSitterOffsetRange.doesContain(a.info.mainBlock,s.mainBlock);)t.pop(),a=n();a?a.children.push(e):(this.roots.push(e),t.push(e))}}else this.roots.push(e),t.push(e)}var i,o}}},236:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findNode=t.getCoarseParentScope=t.getFixSelectionOfInterest=t.getNodeToDocument=t.getTypeDeclarations=t.getTypeReferences=t.getClassDeclarations=t.getSemanticChunkTreeByLanguage=t.getSemanticChunkTree=t.getNewExpressions=t.extractDoc=t.getFunctionDefinitions=t.getCallExpressions=t.getFunctionBodies=t.getExpressionStatement=t.getFunctionPositions=t.TreeSitterOffsetRange=void 0;const r=n(8176),i=n(6871),o=n(6845),s=n(3910),a=n(1426);t.TreeSitterOffsetRange={doesContain:(e,t)=>e.startIndex<=t.startIndex&&t.endIndex<=e.endIndex,ofSyntaxNode:e=>({startIndex:e.startIndex,endIndex:e.endIndex}),compare:(e,t)=>e.startIndex-t.startIndex||t.endIndex-e.endIndex,doIntersect:(e,t)=>Math.max(e.startIndex,t.startIndex)<Math.min(e.endIndex,t.endIndex),len:e=>e.endIndex-e.startIndex,intersectionSize:(e,t)=>{const n=Math.max(e.startIndex,t.startIndex),r=Math.min(e.endIndex,t.endIndex);return Math.max(r-n,0)},isTreeSitterOffsetRange:e=>"number"==typeof e.startIndex&&"number"==typeof e.endIndex,toTreeSitterOffsetRange:(e,t)=>({startIndex:t.offsetAt(e.start),endIndex:t.offsetAt(e.end)})};const c={isEqual:(e,t)=>e.row===t.row&&e.column===t.column,isBefore:(e,t)=>e.row<t.row||e.row===t.row&&e.column<t.column,isAfter:(e,t)=>c.isBefore(t,e),isBeforeOrEqual(e,t){let n=c.isBefore(e,t),r=c.isEqual(e,t);return!(!n&&!r)},equals:(e,t)=>e.column===t.column&&e.row===t.row,isAfterOrEqual:(e,t)=>c.isBeforeOrEqual(t,e),ofPoint:e=>({row:e.row,column:e.column})},u=(e,t)=>c.isBeforeOrEqual(e.startPosition,t.startPosition)&&c.isAfterOrEqual(e.endPosition,t.endPosition),l=(e,t)=>c.equals(e.startPosition,t.startPosition)&&c.equals(e.endPosition,t.endPosition),d=e=>({startPosition:e.startPosition,endPosition:e.endPosition}),f=e=>({type:e.type,startIndex:e.startIndex,endIndex:e.endIndex}),h=e=>({range:d(e),startIndex:e.startIndex,text:e.text,endIndex:e.endIndex});function p(e,t,n){const i=(0,r.getLanguageId)(e);let o;return o="python"===i?function(e){let t=new Map;return e.forEach((e=>{const n=e.captures.find((e=>"definition"===e.name))?.node,r=n?.childForFieldName("body");if(n&&r){const e=(0,s.getFirstStatementNodeForPython)(r),i=(0,s.getDecorator)(n);t.set(n.id,{mainBlock:h(n),detailBlocks:{docstring:e?h(e):void 0,decorator:i?h(i):void 0,body:h(r)}})}else;})),Array.from(t.values())}(t):function(e,t){let n=new Map;return e.forEach((e=>{const r=e.captures.find((e=>"definition"===e.name))?.node,i=r?.childForFieldName("body");if(r&&i){let e;switch(t){case"typescript":case"javascript":e=(0,s.getJavascriptCommentNodes)(r);break;case"java":e=(0,s.getJavaCommentNodes)(r);break;default:e=(0,s.getSiblingNodes)(r)}n.get(r.id)||n.set(r.id,{mainBlock:h(r),detailBlocks:{comments:e.map((e=>h(e))),body:h(i)}})}})),Array.from(n.values())}(t,i),new a.SemanticChunkTree(o,h(n))}function g(e,t){switch(t){case"python":case"csharp":return e.children.find((e=>e.type.match(/identifier/)))?.text;case"golang":{let t=e.children.find((e=>e.type.match(/identifier/)));return t?t.text:e.children.find((e=>e.type.match(/spec/)))?.children.find((e=>e.type.match(/identifier/)))?.text}case"javascript":case"javascriptreact":case"typescript":case"typescriptreact":case"cpp":case"java":{let t=e.children.find((e=>e.type.match(/identifier/)));return t?t.text:e.children.find((e=>e.type.match(/declarator/)))?.children.find((e=>e.type.match(/identifier/)))?.text}case"ruby":return e.children.find((e=>e.type.match(/constant|identifier/)))?.text;default:return e.children.find((e=>e.type.match(/identifier/)))?.text}}function _(e,t){switch(t){case"typescript":case"typescriptreact":case"javascript":case"javascriptreact":return e.type.match(/definition|declaration|declarator|export_statement/);case"golang":return e.type.match(/definition|declaration|declarator|var_spec/);case"cpp":return e.type.match(/definition|declaration|declarator|class_specifier/);case"ruby":return e.type.match(/module|class|method|assignment/);default:return e.type.match(/definition|declaration|declarator/)}}function m(e,t,n,r,o){const s=t.children;if(t.endPosition.row-t.startPosition.row+1<=n){const a=(0,i.isStructuralElement)(e,t)?{startPosition:t.startPosition,endPosition:t.endPosition}:y(e,s,n,r,o),c=t.parent;return c?m(e,c,n,a,!1):a}return y(e,s,n,r,o)}function v(e,t){const n=t.parent,r={startPosition:t.startPosition,endPosition:t.endPosition};if((0,i.isStructuralElement)(e,t)||!n)return r;const{filteredRanges:o,indexOfInterest:s}=b(e,n.children,r,!1);if(s-1>=0&&s+1<=o.length-1){const e=o[s-1],t=o[s+1];return{startPosition:e.startPosition,endPosition:t.endPosition}}return v(e,n)}function y(e,t,n,r,i){if(0===t.length)return r;const{filteredRanges:o,indexOfInterest:s}=b(e,t,r,i);let a=0,c=o.length-1,u=o[a],l=o[c];for(;E(u,l)>n&&a!==c;)s-a<c-s?(c--,l=o[c]):(a++,u=o[a]);return E(u,l)<=n?{startPosition:u.startPosition,endPosition:l.endPosition}:r}function b(e,t,n,r){let o,s;if(r?(o=t.filter((t=>(0,i.isStructuralElement)(e,t)||(0,i.isExpressionStatement)(e,t))),s=function(e,t,n){let r=0,i=e.length;for(;r<i;){const o=r+i>>>1;n(e[o],t)?r=o+1:i=o}return r}(o,n,((e,t)=>c.isBefore(e.startPosition,t.startPosition))),o.splice(s,0,n)):(o=t.filter((t=>u(t,n)||(0,i.isStructuralElement)(e,t)||(0,i.isExpressionStatement)(e,t))),s=o.findIndex((e=>u(e,n)))),-1===s)throw new Error("Valid index not found");return{filteredRanges:o,indexOfInterest:s}}function E(e,t){return t.endPosition.row-e.startPosition.row+1}t.getFunctionPositions=async function(e,t){const n=await(0,i.parse)(e,t);return n?(0,i.queryFunctionDefinitions)(e,n.rootNode).map((e=>{const t=e.captures.find((e=>"function"===e.name))?.node;return{identifier:e.captures.find((e=>"identifier"===e.name))?.node.text,text:t?.text,startIndex:t?.startIndex||0,endIndex:t?.endIndex||0}})):[]},t.getExpressionStatement=async function(e,t){const n=await(0,i.parse)(e,t);return n?(await(0,i.queryExpressionStatement)(e,n.rootNode)).filter((e=>{const t=e.captures[0]?.node?.firstNamedChild;return"variable_declarator"===t?.type})).map((e=>{const t=e.captures[0]?.node?.firstNamedChild?.firstChild;return{type:t?.type,text:t?.text,startIndex:t?.startIndex||0,endIndex:t?.endIndex||0}})):[]},t.getFunctionBodies=async function(e,t){const n=await(0,i.parse)(e,t);return n?(0,i.queryFunctionDefinitions)(e,n.rootNode).map((e=>{let t=e.captures.find((e=>"body"===e.name))?.node;return{startIndex:t?.startIndex||0,endIndex:t?.endIndex||0}})):[]},t.getCallExpressions=async function(e,n,r){const o=await(0,i.parse)(e,n);return o?(0,i.queryCallExpressions)(e,o.rootNode).reduce(((n,i)=>{let o=i.captures.find((e=>"call_expression"===e.name))?.node;if(o&&(null==r||o&&t.TreeSitterOffsetRange.doIntersect(r,o))){let t,r,s;"ruby"===e&&(t=i.captures.find((e=>"symbol"===e.name))?.node,s=t?.text?.slice(1)),r=t||i.captures.find((e=>"identifier"===e.name))?.node,s=s||r?.text,n.push({identifier:s??"",text:o.text,startIndex:(r??o).startIndex,endIndex:(r??o).endIndex})}return n}),[]):[]},t.getFunctionDefinitions=async function(e,t){const n=await(0,i.parse)(e,t);return n?(0,i.queryFunctionDefinitions)(e,n.rootNode).map((e=>{const t=e.captures.find((e=>"function"===e.name))?.node;return{identifier:e.captures.find((e=>"identifier"===e.name))?.node.text??"",text:t?.text,startIndex:t?.startIndex||0,endIndex:t?.endIndex||0}})):[]},t.extractDoc=async function(e,t){if(!(e in r.SUPPORTED_LANGUAGES))return;let n=await(0,i.parse)(e,t);if(!n)return;let s=r.SUPPORTED_LANGUAGES[e];const a=o.COMMENT[s],c=function(e){let t=[];for(let n=0;n<e.length;++n){let r=[e[n].node.text];for(;n+1<e.length&&e[n].node.endPosition.row+1===e[n+1].node.startPosition.row;)++n,r.push(e[n].node.text);t.push(r.join("\n"))}return t}((0,i.executeTreeSitterQueries)(a,n.rootNode).flatMap((e=>e.captures.filter((e=>"docComment"===e.name||"comment"===e.name)))));return 1===c.length?c[0]:void 0},t.getNewExpressions=async function(e,n,r){const o=await(0,i.parse)(e,n);return o?(0,i.queryNewExpressions)(e,o.rootNode).reduce(((e,n)=>{const i=n.captures.find((e=>"new_expression"===e.name))?.node;return i?(t.TreeSitterOffsetRange.doIntersect(r,i)&&e.push({...f(i),identifier:i.text,text:i.text}),e):e}),[]):[]},t.getSemanticChunkTree=async function(e,t){const n=await(0,i.parse)(e,t);if(!n){return new a.SemanticChunkTree([],{range:{startPosition:{row:0,column:0},endPosition:{row:0,column:0}},startIndex:0,text:"",endIndex:0})}return p(e,(0,i.queryDefinitions)(e,n.rootNode),n.rootNode)},t.getSemanticChunkTreeByLanguage=p,t.getClassDeclarations=async function(e,t){const n=await(0,i.parse)(e,t);return n?(0,i.queryClassDeclarations)(e,n.rootNode).map((e=>{const t=e.captures.find((e=>"class_declaration"===e.name)).node;return{...f(t),identifier:t?.children.find((e=>["type_identifier","identifier","constant"].includes(e.type)))?.text??"",text:t.text}})):[]},t.getTypeReferences=async function(e,n,r){const o=await(0,i.parse)(e,n);return o?(0,i.queryTypeReferences)(e,o.rootNode).reduce(((e,n)=>{const i=n.captures.find((e=>"type_identifier"===e.name))?.node;return i?(t.TreeSitterOffsetRange.doIntersect(r,i)&&e.push({...f(i),identifier:i.text,text:i.text}),e):e}),[]):[]},t.getTypeDeclarations=async function(e,t){const n=await(0,i.parse)(e,t);return n?(0,i.queryTypeDeclarations)(e,n.rootNode).map((e=>{const t=e.captures.find((e=>"type_declaration"===e.name)).node;let n=e.captures.find((e=>"type_identifier"===e.name))?.node.text;return n||(n=t?.children.find((e=>"type_identifier"===e.type))?.text),{...f(t),identifier:n??"",text:t.text}})):[]},t.getNodeToDocument=async function(e,n,o){if(!(e in r.SUPPORTED_LANGUAGES))return;const s=await(0,i.parse)(e,n);if(o.startIndex===o.endIndex)return;if(!s)return;const a=function(e,n,r){let i=[e.rootNode],o=new Array;for(;;){let e=i.map((e=>[e,t.TreeSitterOffsetRange.intersectionSize(e,n)])).filter((([e,t])=>!e.type.includes("_statement")&&t>0)).sort((([e,t],[n,r])=>r-t));if(0===e.length){if(0===o.length)return;return o}let s=e.map((([e,r])=>{let i=t.TreeSitterOffsetRange.len(e);return[e,(r-Math.abs(t.TreeSitterOffsetRange.len(n)-r))/i]}));const a=s.filter((([e,t])=>_(e,r)));o.push(...a),i=[],i.push(...s.flatMap((([e,t])=>e.children)))}}(s,o,e);if(a){let t=a?.length>1;a.forEach((e=>{"function_definition"!==e[0].type&&(t=!1)}));const n=function(e,t){if(0===e.length)return;let n=e[0];for(let r=1;r<e.length;r++)t(e[r],n)>0&&(n=e[r]);return n}(a,(([e,t],[n,r])=>t-r))[0];return{nodeIdentifier:g(n,e),nodeToDocument:f(n),nodeSelectionBy:"matchingSelection",isBothFunction:t}}let c=s.rootNode.descendantForIndex(o.startIndex,o.endIndex);for(let t=0;!_(c,e)&&null!==c.parent;++t)c=c.parent;return{nodeIdentifier:g(c,e),nodeToDocument:f(c),nodeSelectionBy:"expanding"}},t.getFixSelectionOfInterest=async function(e,t,n,r){const o=await(0,i.parse)(e,t);if(!o)return null;const s=o.rootNode.descendantForPosition(n.startPosition,n.endPosition),a={startPosition:s.startPosition,endPosition:s.endPosition},c=m(e,s,r,n,!0);return l(a,c)?v(e,s):c},t.getCoarseParentScope=async function(e,t,n){const r=await(0,i.parse)(e,t);if(!r)return;const o=(0,s.queryFunctions)(e,r.rootNode);let a;for(const e of o){const t=e.captures[0].node,r=d(t);if(u(r,n)&&(a=t)){c.isBefore(n.endPosition,r.startPosition);break}}return a?d(a):void 0},t.findNode=function e(t,n){const r=[];for(let i=0;i<t.childCount;i++){const o=t.child(i);if(!o)continue;let s=!1;try{s=n(o)}catch(e){}s&&r.push(o),r.push(...e(o,n))}return r}},3910:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.generateRangeFromBlock=t.generatePositionFromPoint=t.getSemanticChunkTreePromiseChain=t.getJavaCommentNodes=t.getJavascriptCommentNodes=t.getSiblingNodes=t.getDecorator=t.getFirstStatementNodeForPython=t.queryFunctions=t.languageIdToWasmLanguage=t.isSupportedLanguageId=t.WASMLanguage=void 0;const i=r(n(1398)),o=n(236);var s;!function(e){e.Python="python",e.Javascript="javascript",e.Typescript="typescript",e.TSX="tsx",e.Go="go",e.Ruby="ruby",e.Java="java"}(s=t.WASMLanguage||(t.WASMLanguage={}));const a={python:s.Python,javascript:s.Javascript,javascriptreact:s.Javascript,jsx:s.Javascript,typescript:s.Typescript,typescriptreact:s.Typescript,go:s.Go,ruby:s.Ruby};function c(e){if(!(e in u))throw new Error(`Unrecognized language: ${e}`);return u[e]}t.isSupportedLanguageId=function(e){return e in a},t.languageIdToWasmLanguage=c;const u={python:s.Python,javascript:s.Javascript,javascriptreact:s.Javascript,jsx:s.Javascript,typescript:s.Typescript,typescriptreact:s.TSX,go:s.Go,ruby:s.Ruby},l="[\n  (function body: (statement_block) @body)\n  (function_declaration body: (statement_block) @body)\n  (generator_function body: (statement_block) @body)\n  (generator_function_declaration body: (statement_block) @body)\n  (method_definition body: (statement_block) @body)\n  (arrow_function body: (statement_block) @body)\n] @function";t.queryFunctions=function(e,t){return function(e,t){const n=[];for(const r of e){if(!r[1]){const e=t.tree.getLanguage();r[1]=e.query(r[0])}n.push(...r[1].matches(t))}return n}(d[c(e)],t)};const d={python:[["(function_definition body: (block\n           (expression_statement (string))? @docstring) @body) @function"],['(ERROR ("def" (identifier) (parameters))) @function']],javascript:[[l]],typescript:[[l]],tsx:[[l]],go:[["[\n          (function_declaration body: (block) @body)\n          (method_declaration body: (block) @body)\n        ] @function"]],ruby:[['[\n          (method name: (_) parameters: (method_parameters)? @params [(_)+ "end"] @body)\n          (singleton_method name: (_) parameters: (method_parameters)? @params [(_)+ "end"] @body)\n        ] @function']],java:[]};function f(e,t=["comment"]){const n=[];let r=e.previousNamedSibling;for(;r&&t.some((e=>e===r?.type));)n.push(r),r=r.previousNamedSibling;return n.reverse()}let h;function p(e){return new i.default.Position(e.row,e.column)}t.getFirstStatementNodeForPython=function(e){let t=e.firstChild;if(!t||"expression_statement"!==t.type)return;let n=t.firstChild;return"string"===n?.type?n:void 0},t.getDecorator=function(e){let t=e.previousNamedSibling;return"decorator"===t?.type?t:void 0},t.getSiblingNodes=f,t.getJavascriptCommentNodes=function(e){let t=e.parent;return f("export_statement"===t?.type?t:e)},t.getJavaCommentNodes=function(e){return f(e,["block_comment","line_comment"])},t.getSemanticChunkTreePromiseChain=async function(e,t){return h=h?h.then((()=>(0,o.getSemanticChunkTree)(t,e))):(0,o.getSemanticChunkTree)(t,e),h},t.generatePositionFromPoint=p,t.generateRangeFromBlock=function(e){return new i.default.Range(p(e.range.startPosition),p(e.range.endPosition))}},6683:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.EditClient=void 0;const s=o(n(1398)),a=n(1398),c=n(9307),u=n(6594),l=n(508),d=n(1408),f=n(964),h=n(4121),p=n(7127),g=n(8492),_=n(3631),m=n(4687),v=n(7933),y=n(4509),b=n(7961),E=n(7800),w=n(2469),S=n(742),T=n(9345),C=n(855),O=n(6682),A=n(8628),I=n(4594);class R extends s.Disposable{constructor(){super((()=>this.dispose())),this.editHistorySession=new E.EditHistorySession,this.openDocumentSession=new b.OpenDocumentSession,this.cacheSingleCursorChangeEvent=new u.Queue(10),this.cacheSuccessShowEvent=new u.Queue(10),this._disposables=[],this.brand=_.MultiEdit.pluginName(),this.recommendTracker=new O.RecommendTracker;const e=async e=>{if(!_.MultiEdit.isSupportedLanguageId(e?.document?.languageId))return;const t=(await(0,m.getCachedRegions)()).toLowerCase();g.logger.logInfo(`current region: ${t}`),e&&(this.openDocumentSession.updateDocument(e.document.uri.toString()),this.editHistorySession.receiveActiveTextEditorChange(e))};g.logger.logInfo(`${this.brand}.buildEditRequest command register`),this._disposables.push(s.commands.registerTextEditorCommand(`${this.brand}.buildEditRequest`,(async e=>{g.logger.logInfo(`execute ${this.brand}.buildEditRequest command`),_.MultiEdit.isSupportedLanguageId(e.document.languageId)&&(w.TipWithDecoration.hideTips(e),this.tryCallEditRecommendForActive(e))}),this),s.window.onDidChangeActiveTextEditor(e,this),s.workspace.onDidChangeTextDocument((async e=>{_.MultiEdit.isSupportedLanguageId(e.document?.languageId)&&this.editHistorySession.receiveEdit(e)}),this),s.window.onDidChangeTextEditorSelection((async e=>{_.MultiEdit.isSupportedLanguageId(e.textEditor?.document?.languageId)&&(w.TipWithDecoration.hideTips(e.textEditor),this.editHistorySession.receiveSelectionChange(e),this.tryCallEditRecommendForCursor(e))}),this),s.commands.registerTextEditorCommand(`${this.brand}.acceptAllEdits`,(async e=>{const t=this.recommendTracker.getShowingEditApplier(e);if(t&&t.tryMoveCursorPositionBeforeAccept())return this.lastPositionByMoveCursorPositionBeforeAccept=e.selection.start,void g.logger.logInfo("[++]acceptAllEdits: isInterruptedByMoveCursorPositionBeforeAccept!");if(g.logger.logInfo(`[++]acceptAllEdits, currentEditApplier:${t}}`),t){const e=await t.accept();e&&(this.lastInfoAfterAccept={cursorPositionAfterAccept:e,triggerType:t.triggerType})}}),this),s.commands.registerTextEditorCommand(`${this.brand}.clearRecommendedEdits`,(async()=>{this.recommendTracker.getShowingEditApplierHandler()?.clear("clearRecommendedEdits")}),this)),_.MultiEdit.isToB()||this._disposables.push(s.commands.registerTextEditorCommand("codeverse.lab.testMultiEditDisplay",(async e=>{s.window.showInputBox({value:'{"edit_after": "content to display\\n",  "edit_area_range": {"start": 1, "end": 1 } }'}).then((t=>{if(void 0!==t)try{const n=JSON.parse(t);this.recommendTracker.dispose(),new y.EditApplier("fake_id_for_local_display_test",e,"stay",e.selection.active,[n],this.recommendTracker),g.logger.logInfo("[++]show success for test.")}catch(e){g.logger.logError(`[++]show failed for test: ${e}`)}}))}))),e(s.window.activeTextEditor),this.fetchConfig()}async tryShowUseTips(e,t,n,r){if((null==t||t instanceof s.InlineCompletionList&&0===t.items.length||t instanceof Array&&0===t.length)&&void 0===r.selectedCompletionInfo&&_.MultiEdit.codeCompletionEnable()&&_.MultiEdit.isSupportedLanguageId(e.languageId)&&await(0,S.isLogin)()){const t=_.MultiEdit.getShowTipAtEditPositionTimes();void 0!==t&&t<3&&setTimeout((()=>{const r=s.window.activeTextEditor;if(r&&r.document.uri.toString()===e.uri.toString()){const e=1===r.selections.length&&r.selections[0].isEmpty,i=r.selections[0].active,o=r.document.lineAt(i.line);e&&n.isEqual(i)&&!o.isEmptyOrWhitespace&&("Idle"!==_.MultiEdit.getState()||C.inlineCompletionStateTracker.isLoading()||C.inlineCompletionStateTracker.isVisible(r.document.uri.toString())||(_.MultiEdit.updateShowTipAtTopEditPositionTimes(t+1),w.TipWithDecoration.showTips(r,n)))}}),3e3)}}fetchConfig(){const e=async()=>{this.promptConfig=await(l.globalContext.get(d.BaseExtensionAIClient).getInstance()?.getConfigWithLanguage()),g.logger.logInfo(`[++]getPromptConfig: enable:${this.promptConfig?.should_enable_multi_edit_cursor}, cursorStayDelay:${this.promptConfig?.multi_edit_fetch_internal}, max_enable_count:${this.promptConfig?.max_enable_count} `)};e(),setTimeout((async()=>{await e(),_.MultiEdit.tryConfigEnable(this.promptConfig)}),1e4),this.fetchConfigInterval=setInterval((async()=>{await e()}),3e5)}async tryCallEditRecommendForActive(e){const t=e.selection.start,{documentDiagnostics:n,matchedDiagnostic:r}=this.getDiagnostics(e,t,"gap",0);r&&g.logger.logInfo(`[++]tryCallEditRecommendForActive matchedDiagnostic:${JSON.stringify(r)}`),await this.callEditRecommend(e,t,n,r?"activeLint":"active",void 0,!0,void 0)}async tryCallEditRecommendForCursor(e){if(!(1===e.selections.length&&e.selections[0].isEmpty))return;const t=e.textEditor,n=t.document.uri.toString(),r=e.selections[0].active,i=e.textEditor.document.lineAt(r.line),o=this.editHistorySession.lastEditEventMap.get(n),s=this.lastPositionByMoveCursorPositionBeforeAccept;if(this.lastPositionByMoveCursorPositionBeforeAccept=void 0,s&&s.isEqual(r))return void g.logger.logInfo("[++]tryCallEditRecommendForCursor cancel by currentCursorPos==lastPositionByMoveCursorPositionBeforeAccept");const a=this.lastInfoAfterAccept;this.lastInfoAfterAccept=void 0;const c=void 0!==a&&a.cursorPositionAfterAccept.isEqual(r),u=c&&("lint"===a.triggerType||"activeLint"===a.triggerType||"autoDetectAfterAcceptLint"===a.triggerType),l=void 0!==o&&Math.abs(Date.now()-o.editTime)<20,d=e.textEditor.document.uri.toString()===this.cacheSingleCursorChangeEvent.peekLast()?.uri,f=r.line===this.cacheSingleCursorChangeEvent.peekLast()?.position.line,h=i.text===this.cacheSingleCursorChangeEvent.peekLast()?.textAtCursorLine,p=i.text===this.cacheSuccessShowEvent.peekLast()?.textAtCursorLine,m=`sameEditorAsLastCursorPosition:${d}, sameLineAsLastCursorPosition:${f}, sameLineTextAsLastCursorPosition:${h}, sameLineTextAsLastShowPosition:${p}}`;d&&f&&!p&&this.recommendTracker.getShowingEditApplierHandler()?.clear(m);const{documentDiagnostics:v,matchedDiagnostic:y}=this.getDiagnostics(t,r,u?"below":"gap"),b={position:r,textAtCursorLine:i.text,uri:e.textEditor.document.uri.toString(),time:Date.now()};if(this.cacheSingleCursorChangeEvent.push(b),i.isEmptyOrWhitespace)g.logger.logInfo("[++]tryCallEditRecommendForCursor cancel by line isEmptyOrWhitespace");else if(y&&g.logger.logInfo(`[++]tryCallEditRecommendForCursor matchedDiagnostic:${JSON.stringify(y)}`),u)y&&await this.callEditRecommend(t,y.range.start,v,"autoDetectAfterAcceptLint",void 0,!1,void 0);else{if(!_.MultiEdit.codeCompletionEnable())return;if(!(_.MultiEdit.multiEditEnableFromConfig()&&this.promptConfig&&this.promptConfig.should_enable_multi_edit_cursor))return;if(c)return void g.logger.logInfo("[++]tryCallEditRecommendForCursor cancel by cursorChangedByAccept");if(!this.isEditorEdited(n))return void g.logger.logInfo("[++]tryCallEditRecommendForCursor cancel by !currentEditorEdited");if(void 0!==this.cursorChangedByEditTriggerTask&&(g.logger.logInfo("[++]tryCallEditRecommendForCursor cursorChangedByEditTriggerTask cancel."),clearTimeout(this.cursorChangedByEditTriggerTask),this.cursorChangedByEditTriggerTask=void 0,f&&h&&!l))return void await this.callEditRecommend(t,r,v,"editCursorStay",void 0,!1,void 0,!0);l?(g.logger.logInfo("[++]tryCallEditRecommendForCursor cursorChangedByEditTriggerTask start."),this.cursorChangedByEditTriggerTask=setTimeout((async()=>{clearTimeout(this.cursorChangedByEditTriggerTask),this.cursorChangedByEditTriggerTask=void 0,await this.callEditRecommend(t,r,v,"editCursorStay",void 0,!1,void 0,!0)}),1e3)):f?_.MultiEdit.isToB()||(void 0!==o&&Date.now()-o.editTime<12e4?await this.callEditRecommend(t,r,v,"stayAtSameLine",void 0,!1,this.getCursorStayDelayTime(),!0):g.logger.logInfo("[++]tryCallEditRecommendForCursor(sameLineAsLastCursorPosition) cancel by Date.now-editTime >= 2min")):void 0!==y?await this.callEditRecommend(t,y.range.start,v,"lint",void 0,!1,void 0,!0):void 0!==o&&Date.now()-o.editTime<12e4?await this.callEditRecommend(t,r,v,"stay",void 0,!1,this.getCursorStayDelayTime(),!0):g.logger.logInfo("[++]tryCallEditRecommendForCursor(!sameLineAsLastCursorPosition) cancel by Date.now-editTime >= 2min")}}isEditorEdited(e){return this.editHistorySession.lastEditEventMap.has(e)}getCursorStayDelayTime(){let e=_.DEFAULT_CODE_SUGGESTION_PRO_CURSOR_STAY_DELAY;this.promptConfig&&this.promptConfig.multi_edit_fetch_internal>=0&&(e=this.promptConfig.multi_edit_fetch_internal,g.logger.logInfo(`[++]getCursorStayDelayTime: set from remoteConfig: ${e}ms`));const t=_.MultiEdit.getMultiEditCursorStayDelayFormAdvanceConfig();return t&&(e=t,g.logger.logInfo(`[++]getCursorStayDelayTime: set from localConfig: ${t}ms`)),e=Math.max(e,0),g.logger.logInfo(`[++]getCursorStayDelayTime: final:${e}ms`),e}getDiagnostics(e,t,n,r=1){const i=s.languages.getDiagnostics(e.document.uri);let o=[];i.forEach((i=>{if("below"===n){const n=e.visibleRanges.some((e=>e.contains(i.range))),r=i.range.start.isAfter(t),s=i.range.start.line===t.line;n&&r&&!s&&o.push(i)}else"gap"===n&&i.severity===s.DiagnosticSeverity.Error&&Math.abs(t.line-i.range.start.line)<=r&&o.push(i)})),o.sort(((e,n)=>Math.abs(e.range.start.line-t.line)-Math.abs(n.range.start.line-t.line)));return{documentDiagnostics:i,matchedDiagnostic:o.length>0?o[0]:void 0}}async callEditRecommend(e,t,n,r,i,o,a,c=!1){if("active"!==r&&"activeLint"!==r&&C.inlineCompletionStateTracker.isVisible(e.document.uri.toString()))return void g.logger.logInfo("[++]callEditRecommend: cancel by InlineCompletion.isVisible");if(C.inlineCompletionStateTracker.isLoading())return void g.logger.logInfo("[++]callEditRecommend: cancel by InlineCompletion.isLoading");if(c&&"Requesting"===_.MultiEdit.getState())return void g.logger.logInfo("[++]callEditRecommend:interruptByRequesting");g.logger.logInfo(`[++]callEditRecommend: triggerType:${r}, showLoading:${o}, debounceTime:${a}`);const u=Date.now(),b={triggerType:r,language:e.document.languageId,documentUri:e.document.uri.toString(),position:t};_.MultiEdit.reportActionsCallback&&_.MultiEdit.reportActionsCallback(f.MultiEditAction.Trigger,b),l.globalContext.get(d.BaseExtensionAIClient).getInstance()?.telemetryAction(f.MultiEditAction.Trigger,b);let E=!1;const w={name:v.SlardarEventName.MultiEditExecute,status:v.SlardarEventStatus.Success,costTime:Date.now()};let S=!0;try{if(_.MultiEdit.refreshState("Loading"),o&&h.ProgressWithDecoration.showLoading(e),void 0!==a){g.logger.logInfo(`[++]callEditRecommend:debounce(${a}ms): start`);try{await(0,p.debounce)(a)}catch(e){throw S=!1,e}g.logger.logInfo(`[++]callEditRecommend:debounce(${a}ms): end`)}if(i?.isCancellationRequested)return void g.logger.logInfo("[++]callEditRecommend: cancel by token");_.MultiEdit.refreshState("Requesting");const c=await this.constructEditRecommendRequest(e,t,n,r),b=Date.now(),O=l.globalContext.get(d.BaseExtensionAIClient).getInstance()?.getMultiPointCompletion(c,i);let R;if(O){const e=await(0,T.timeout)(O,1e4);"success"===e.type?R=e.value:"timeout"===e.type&&g.logger.logError("[++]callEditRecommend:getMultiPointCompletion:request:timeout:10s")}const D=Date.now()-b;if(R){if(g.logger.logInfo(`[++]callEditRecommend:res.logId: ${R.logId}, is_edit:${R.is_edit}, message:${R.message}, recommends.size:${R.edit_recommends?.length}`),i?.isCancellationRequested)return void g.logger.logInfo("[++]callEditRecommend:afterRequest: cancel by token");if(C.inlineCompletionStateTracker.isVisible(e.document.uri.toString()))return void g.logger.logInfo("[++]callEditRecommend:afterRequest: cancel by InlineCompletionTracker.isVisible()");if(C.inlineCompletionStateTracker.isLoading())return void g.logger.logInfo("[++]callEditRecommend:afterRequest: cancel by InlineCompletionTracker.isLoading()");const n=this.recommendTracker.getShowingEditApplier(e);if(void 0!==n&&("active"===n.triggerType||"activeLint"===n.triggerType))return void g.logger.logInfo("[++]callEditRecommend:afterRequest: cancel by showing.triggerType === 'active' || 'activeLint'");if(R.is_edit&&R.edit_recommends&&R.edit_recommends.length>0){if("lint"!==r&&"autoDetectAfterAcceptLint"!==r&&e.selection.start.line!==t.line)return void g.logger.logInfo("[++]show failed with currentCursorPos.line !== triggerPosition.line");const n=this.recommendTracker.getShowingEditApplier(e);if(n){const e=n.readonlyRecommends.length>0?n.readonlyRecommends[0].edit_after:"";if(e===(R.edit_recommends.length>0?R.edit_recommends[0].edit_after:""))return void g.logger.logInfo("[++]show failed with showingText === resText")}try{this.recommendTracker.dispose(),new y.EditApplier(R.logId,e,r,t,R.edit_recommends,this.recommendTracker),E=!0,g.logger.logInfo("[++]show success.")}catch(e){g.logger.logInfo("[++]show failed.}"),(0,m.getCachedRegions)().then((e=>{A.slardarReporter.sendEvent(v.ReportEvent.newCompletionFailEvent(I.PluginSession.id(),e,"[++]show failed."))}))}}}if(E){const n={position:t,textAtCursorLine:e.document.lineAt(t.line).text,uri:e.document.uri.toString(),time:Date.now()};this.cacheSuccessShowEvent.push(n),w.costTime=Date.now()-w.costTime,s.commands.executeCommand("icube.event.aiSlardarReport",w)}else this.recommendTracker.getShowingEditApplierHandler()?.clear("!successShow");const x=Date.now()-u;g.logger.logInfo(`[++]callEditRecommend trace: successShow:${E}, triggerType:${r}, e2eDurationMs:${x}, requestDuration:${D}`);const M={triggerType:r,language:e.document.languageId,requestDurationMs:D,e2eDurationMs:x,respId:R?.logId??"",documentUri:e.document.uri.toString(),position:t};_.MultiEdit.reportActionsCallback&&_.MultiEdit.reportActionsCallback(f.MultiEditAction.Trace,M),l.globalContext.get(d.BaseExtensionAIClient).getInstance()?.telemetryAction(f.MultiEditAction.Trace,M)}catch(e){if(S){const t=`[++]callEditRecommend error: ${e}`;g.logger.logError(t),(0,m.getCachedRegions)().then((e=>{A.slardarReporter.sendEvent(v.ReportEvent.newCompletionFailEvent(I.PluginSession.id(),e,t))})),w.status=v.SlardarEventStatus.Failed,w.errorMsg=t,s.commands.executeCommand("icube.event.aiSlardarReport",w)}}finally{o&&h.ProgressWithDecoration.hideLoading(e),_.MultiEdit.refreshState("Idle"),E||"active"!==r&&"activeLint"!==r||s.window.showInformationMessage("No suggestion from Model")}}async constructEditRecommendRequest(e,t,n,r){const i=e.document.uri,o=this.editHistorySession.getHistoryEdits(),u=this.openDocumentSession.getRecentDocuments(),l=await s.commands.executeCommand("vscode.executeHoverProvider",i,t);let d;const f=this.editHistorySession.getActiveEditingLine(e.document,t.line);f&&(d={edit_before:f.editBefore,edit_after:f.editAfter});const h={path:s.workspace.asRelativePath(i),edit_maximum_line:3,cursor_line_content:(0,c.getDocumentLinesText)(e.document,t.line,t.line+1),cursor_line_hover:l instanceof Array?l?.[0]?.contents?.[0]?.value??"":"",cursor_line:t.line,cursor_index:e.selection.start.line===t.line?e.selection.start.character.toString():"",prefix:(0,c.getDocumentLinesText)(e.document,t.line-300,t.line),suffix:(0,c.getDocumentLinesText)(e.document,t.line+1,t.line+300),last_edit_hit_cursor_line_content:d??{},trigger_time:Date.now()};return{uri:i.toString(),target_language:e.document.languageId,model:_.MultiEdit.isToB()?"CodeZEdit":"CodeEdit",trigger_mode:"autoDetectAfterAcceptLint"===r?"lint":r,history_edit:o.map((e=>({path:s.workspace.asRelativePath(a.Uri.parse(e.documentUri)),edit_before:e.before.join(""),edit_after:e.after.join(""),prefix_outside_edit:e.prefix,suffix_outside_edit:e.suffix,edit_time:e.editTime,edit_area_range:{start:e.beforeStartLine,end:e.beforeStartLine+e.numBeforeLines}}))),cursor_edit:h,browsed_files:u.map((([e,t])=>({path:s.workspace.asRelativePath(a.Uri.parse(e)),content:t.slice(0,5e3)}))),linter_data:n.filter((e=>e.range.start.line>=t.line-10&&e.range.start.line<=t.line+10)).map((e=>({hit_line:e.range.start.line,lint_msg:e.message,type:e.severity===s.DiagnosticSeverity.Error?"E":e.severity===s.DiagnosticSeverity.Warning?"W":"C"})))}}dispose(){this._disposables.map((e=>e.dispose())),this.fetchConfigInterval&&clearInterval(this.fetchConfigInterval)}}t.EditClient=R},7127:(e,t)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=void 0,t.debounce=async function(e){return n&&(clearTimeout(n.timer),n.reject(`debounce failed: another call was made within the debounce timeout(${e}ms)`),n=void 0),new Promise(((t,r)=>{n={timer:setTimeout((()=>t()),e),reject:r}}))}},3392:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.LinesDiffDecorationDisplay=t.editorBackgroundColor=t.hintCodeTextColor=t.tipsTextColor=void 0;const s=o(n(1398)),a=o(n(2853)),c=n(9307),u=n(8628),l=n(3631);function d(e){return new s.ThemeColor("editor.background")}function f(e){return e.kind===s.ColorThemeKind.Dark||e.kind===s.ColorThemeKind.HighContrast?"#9D9D9D99":"#88888899"}function h(e){return e.kind===s.ColorThemeKind.Dark||e.kind===s.ColorThemeKind.HighContrast?"#9D9D9D":"#888888"}t.tipsTextColor=h(s.window.activeColorTheme),t.hintCodeTextColor=f(s.window.activeColorTheme),t.editorBackgroundColor=d(s.window.activeColorTheme),s.window.onDidChangeActiveColorTheme((e=>{t.hintCodeTextColor=f(e),t.editorBackgroundColor=d(),t.tipsTextColor=h(e)}));t.LinesDiffDecorationDisplay=class{constructor(e,t,n,r,i,o,a,u){this.editor=e,this.triggerType=t,this.triggerPosition=n,this.beforeStartLineNum=r,this.beforeEndLineNum=i,this.afterText=o,this.needMoveCursorPositionBeforeAccept=a,this.diffBlock=u,this.bgOriginalCode=new s.ThemeColor("editor.wordHighlightBackground"),this.bgNewDiffCode="rgba(50, 126, 54, 0.3)",this.newCodeBlockAddVerticalLine=!1,this.showTipAtTopLineMaxTimes=5,this.onlyAddedAndLengthLimit=5,this.decorationBuffer=[],this.doc=this.editor.document,this.isOnlyInsert=this.beforeStartLineNum===this.beforeEndLineNum,this.beforeLineTexts=(0,c.range)(this.beforeStartLineNum,this.beforeEndLineNum).map((e=>this.doc.lineAt(e).text)),this.afterLineTexts=(0,c.splitLines)(this.afterText),this.beforeStartLineNumFixed=this.fixStartLineNum(),this.beforeLineNumbers=(0,c.range)(this.beforeStartLineNumFixed,this.beforeEndLineNum),this.beforeText=(0,c.getDocumentLinesText)(this.doc,this.beforeStartLineNumFixed,this.beforeEndLineNum)}show(){if(this.beforeStartLineNum>this.beforeEndLineNum||this.beforeStartLineNum>=this.doc.lineCount)return new Map;if(this.createMultiLineBlock()&&l.MultiEdit.showLinesDiffCallback)return l.MultiEdit.showLinesDiffCallback([this.diffBlock],this.needMoveCursorPositionBeforeAccept),this.flushDecorationBuffer();if(("active"===this.triggerType||"activeLint"===this.triggerType)&&!this.decorationBuffer.some((e=>e.lineNumber===this.triggerPosition.line)))throw new Error("[++]triggerType: active/activeLint, no trigger position decoration");return this.flushDecorationBuffer(this.editor)}fixStartLineNum(){let e=this.beforeStartLineNum,t=this.afterLineTexts.findIndex(((e,t)=>t<this.beforeLineTexts.length&&(0,c.removeEndingLineBreaks)(e)!==this.beforeLineTexts[t]));return t<0&&(t=Math.min(this.beforeEndLineNum-this.beforeStartLineNum,this.afterLineTexts.length)),t>0&&(e+=t,this.afterLineTexts.splice(0,t)),0===this.afterLineTexts.length&&this.afterLineTexts.push(...Array(this.beforeEndLineNum-e).fill("")),e}tryShowAllAfterTextWithInlineDecoration(){if(this.beforeEndLineNum-this.beforeStartLineNumFixed===this.afterLineTexts.length){if(!a.diffChars(this.beforeText,this.afterText).some((e=>e.removed))){const e=[];let t=!0;for(let n=0;n<this.beforeLineNumbers.length;++n){const r=this.beforeLineNumbers[n],i=this.doc.lineAt(this.beforeLineNumbers[n]).text,o=(0,c.removeEndingLineBreaks)(this.afterLineTexts[n]);let u=a.diffChars(i,o),l=0;for(const n of u){const i=n.value.length;if(void 0!==i)if(n.added){t=t&&i>this.onlyAddedAndLengthLimit;const o=new s.Position(r,l);e.push([o,this.newDefaultInlineDecoration(o,(0,c.replaceSpacesWithNbSp)(n.value))])}else l+=i}}if(t){for(const t of e)this.addDecoration(t[0].line,t[1]);return!0}}}return!1}getDisplayRange(){const e=l.MultiEdit.getShowTipAtTopLineTimes(),t=void 0!==e&&e<this.showTipAtTopLineMaxTimes,n=t||this.needMoveCursorPositionBeforeAccept;u.logger.info(`[++]display:getDisplayRange: beforeStartLineNumFixed:${this.beforeStartLineNumFixed}, beforeEndLineNum:${this.beforeEndLineNum}, beforeLineNumbers:${this.beforeLineNumbers.toString()}, afterLineTexts.len:${this.afterLineTexts.length}, doc.lineCount:${this.doc.lineCount}`),u.logger.info(`[++]display:getDisplayRange: showTipAtTopLineTimes:${e}, needShowTipAtTopLine:${n}`);const r=n?1:0;let i=this.beforeStartLineNumFixed-r,o=i+r+Math.max(1,this.afterLineTexts.length,this.beforeLineNumbers.length);if(u.logger.info(`[++]display: displayStartLine:${i}, displayEndLine:${o}`),i<0){const e=0-i;i=0,o+=e,u.logger.info(`[++]display: shift down: displayStartLine:${i}, displayEndLine:${o}`)}if(o>this.doc.lineCount){i-=o-this.doc.lineCount,o=this.doc.lineCount,u.logger.info(`[++]display: shift upper: displayStartLine:${i}, displayEndLine:${o}`)}if(i<0)throw u.logger.error(`[++]display: (displayStartLine < 0): displayStartLine:${i}, displayEndLine:${o}, isOverflowing!!!`),new Error("display failed: displayStartLine < 0");return t&&l.MultiEdit.updateShowTipAtTopLineTimes(e+1),{displayStartLine:i,displayEndLine:o,tipAtLine:n?i:void 0}}createMultiLineBlock(){if(this.tryShowAllAfterTextWithInlineDecoration())return!1;if(!this.isOnlyInsert&&this.beforeLineNumbers.length>0){const e=(0,c.getRightMostCodeEndPosition)(this.doc,this.beforeLineNumbers).character,t=(0,c.getLeftMostCodePosition)(this.doc,this.beforeLineNumbers).character;for(let n=0;n<this.beforeLineNumbers.length;++n){const r=this.doc.lineAt(this.beforeLineNumbers[n]).range.start.with({character:t}),i=this.doc.lineAt(this.beforeLineNumbers[n]).range.end.with({character:e});this.addDefaultBeforeDecoration(this.beforeLineNumbers[n],new s.Range(r,i))}}const{displayStartLine:e,displayEndLine:n,tipAtLine:r}=this.getDisplayRange(),i=(0,c.range)(e,n),o=(0,c.getEndColPositions)(this.doc,i),d=(0,c.getRightMostCodeEndPosition)(this.doc,i).character;u.logger.info(`[++]display: tipAtLine:${r}, needMoveCursorPositionBeforeAccept:${this.needMoveCursorPositionBeforeAccept}, isInsert:${this.isOnlyInsert}`),u.logger.info(`[++]display: displayLines:${i.toString()}, endColPositions:${JSON.stringify(o)}, maxDisplayCodeEndCharacter:${d}`);for(let n=0;n<i.length;++n){const f=i[n],h=this.doc.lineAt(f).range.end,p=new s.Range(h,h);if(u.logger.info(`[++]displayLine: displayLine:${f}, endPos.character:${h.character}, endColPositions.character:${o[n].character}`),d>o[n].character&&this.addDefaultAfterDecoration(f,p," ".repeat(d-o[n].character),{backgroundColor:"unset"},t.hintCodeTextColor),this.addDefaultAfterDecoration(f,p," ".repeat(5),void 0,t.hintCodeTextColor),void 0!==r&&f===r)this.addDefaultAfterDecoration(f,p,`${l.MultiEdit.isToB()?"MarsCode":"Codeverse++"}: ${this.needMoveCursorPositionBeforeAccept?"[Tab] to continue":"[Tab] to accept | [Esc] to cancel"}`,{color:t.tipsTextColor},t.hintCodeTextColor);else{const i=void 0===r?f===e:f===r+1;this.addDefaultAfterDecoration(f,p,i?(this.isOnlyInsert?"↳":"→")+"  ":" ".repeat(3),void 0,t.hintCodeTextColor);const o=void 0===r?n:n-1,s=o>=this.afterLineTexts.length?"":(0,c.removeEndingLineBreaks)(this.afterLineTexts[o]),u={border:"solid; border-width: 0 0 0 1px",borderColor:t.hintCodeTextColor};if(o>=this.beforeLineNumbers.length)this.addDefaultAfterDecoration(f,p,(0,c.replaceSpacesWithNbSp)(s),{fontStyle:"italic",...this.newCodeBlockAddVerticalLine&&s.match(/^\s/)?u:{}});else{const e=this.doc.lineAt(this.beforeLineNumbers[o]).text;if(0===s.trim().length)this.addDeleteBeforeDecoration(f,p,(0,c.replaceSpacesWithNbSp)(e),{fontStyle:"italic",...this.newCodeBlockAddVerticalLine&&s.match(/^\s/)?u:{}});else{let t=a.diffWordsWithSpace(e,s),n=this.newCodeBlockAddVerticalLine;for(const e of t){if(void 0!==e.value.length)if(e.added){const t=(0,c.replaceSpacesWithNbSp)(e.value);n=!1,this.addDefaultAfterDecoration(f,p,t,{fontWeight:"bold",fontStyle:"italic",backgroundColor:this.bgNewDiffCode,...n&&t.match(/^\s/)?u:{}})}else if(e.removed);else{const t=(0,c.replaceSpacesWithNbSp)(e.value);n=!1,this.addDefaultAfterDecoration(f,p,t,{fontStyle:"italic",...n&&t.match(/^\s/)?u:{}})}}}}}}return!0}addDecoration(e,t,n={}){this.decorationBuffer.push({lineNumber:e,decorationOptions:t,decorationRenderOptions:n})}addDefaultBeforeDecoration(e,t,n={backgroundColor:this.bgOriginalCode}){const r={range:t};this.addDecoration(e,r,n)}addDeleteBeforeDecoration(e,n,r,i,o=t.hintCodeTextColor){const s={range:n,renderOptions:{after:{contentText:r,color:o,textDecoration:"line-through "+t.hintCodeTextColor,backgroundColor:t.editorBackgroundColor,height:"100%",...i}}};this.addDecoration(e,s)}addDefaultAfterDecoration(e,n,r,i,o=t.hintCodeTextColor){const s={range:n,renderOptions:{before:{contentText:r,color:o,backgroundColor:t.editorBackgroundColor,height:"100%",...i}}};this.addDecoration(e,s)}newDefaultInlineDecoration(e,n){return{range:new s.Range(e,e),renderOptions:{after:{contentText:n,height:"100%",color:t.hintCodeTextColor,fontStyle:"italic"}}}}flushDecorationBuffer(e){const t=new Map;let n=!0;for(const{lineNumber:r,decorationOptions:i,decorationRenderOptions:o}of this.decorationBuffer){let a=s.window.createTextEditorDecorationType(o);if(n){const e=a.key.match(/[0-9]+$/g),t=e=>Math.ceil(Math.log10(e));if(e){const n=Number(e[0]),r=n+this.decorationBuffer.length;if(n&&t(n)!==t(r)){const e=Math.pow(10,t(r));for(let t=n;t<e;++t)a=s.window.createTextEditorDecorationType(o)}}n=!1}e?.setDecorations(a,[i]),t.has(r)||t.set(r,[]),t.get(r)?.push(a)}return t}}},4509:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.EditApplier=void 0;const i=r(n(1398)),o=n(8628),s=n(3631),a=n(9307),c=n(3392);t.EditApplier=class{constructor(e,t,n,r,i,s){this.logID=e,this.editor=t,this.triggerType=n,this.triggerPosition=r,this.readonlyRecommends=i,this.editApplierListener=s,this.currentRecommends=[],this.lineDecorations=new Map,this.currentRecommends.push(...i),this.needMoveCursorPositionBeforeAccept="autoDetectAfterAcceptLint"===n,this.refreshDiffPrompts(),this.showStartTime=Date.now();const a=this.readonlyRecommends.length>0?this.readonlyRecommends[0].edit_after:"";this.editApplierListener.onShow(this,a),o.logger.info(`[++]start show recommend, showStartTime:${this.showStartTime}`)}async accept(){this._clear(!0,"accept");const e=this.editor.selection.start,t=this.readonlyRecommends.length>0?this.readonlyRecommends[0].edit_after:"",n=await this.applyBlocksEdit(this.readonlyRecommends);return this.editApplierListener.onAccept(this,n?.start??e,t),Promise.resolve(n?.end??this.editor.selection.start)}tryMoveCursorPositionBeforeAccept(){if(this.needMoveCursorPositionBeforeAccept){this.needMoveCursorPositionBeforeAccept=!1,this.refreshDiffPrompts();const e=this.editor.document.lineAt(this.readonlyRecommends[0].edit_area_range.start).range.start;this.editor.selection=new i.default.Selection(e,e);const t=this.readonlyRecommends.length>0?this.readonlyRecommends[0].edit_after:"";return this.editApplierListener.onMoveCursorPositionBeforeAccept(this,e,t),!0}return!1}clear(e){this._clear(!1,e)}_clear(e=!1,t){if(this.currentRecommends.length>0){const n=this.readonlyRecommends.length>0?this.readonlyRecommends[0].edit_after:"";o.logger.info(`[++] editApplier:clear: reason:${t}`);const r=[...this.lineDecorations.keys()];this.currentRecommends=[],this.refreshDiffPrompts(),this.editApplierListener.onHide(this,r,e,n)}}clearDiffPrompts(){s.MultiEdit.hideLinesDiffCallback&&s.MultiEdit.hideLinesDiffCallback();for(const e of this.lineDecorations.values())for(const t of e)this.editor.setDecorations(t,[]);this.lineDecorations.clear()}refreshDiffPrompts(){this.clearDiffPrompts();try{for(const e of this.currentRecommends){const t=new c.LinesDiffDecorationDisplay(this.editor,this.triggerType,this.triggerPosition,e.edit_area_range.start,e.edit_area_range.end,e.edit_after,this.needMoveCursorPositionBeforeAccept,e).show();for(const[e,n]of t){const t=this.lineDecorations.get(e);t?this.lineDecorations.set(e,t.concat(n)):this.lineDecorations.set(e,n)}}}catch(e){throw o.logger.info("[++]showLinesDiff error"),"message"in e&&o.logger.info(`[++]showLinesDiff error: ${e.message}`),"stack"in e&&o.logger.info(`[++]showLinesDiff error: ${e.stack}`),this.clear("refreshDiffPrompts:error"),e}finally{o.logger.info("[++]refreshHasRecommend:recommends.len:"+this.currentRecommends.length),s.MultiEdit.refreshHasRecommend(this.currentRecommends.length>0)}}async applyBlocksEdit(e){let t,n=this.editor.document.lineCount;for(const n of e){const e=n.edit_area_range.start,r=n.edit_area_range.end;if(e>r)return;const i=(0,a.getDocumentLinesRange)(this.editor.document,e,r),o=e=>{e.replace(i,n.edit_after)};await this.editor.edit(o),t=i}if(e.length>0){const r=e[e.length-1],o=r.edit_area_range;let s=o.start+(0,a.countLines)(r.edit_after);o.end<n&&(s-=1),n=this.editor.document.lineCount,s=Math.max(o.start,Math.min(s,n-1));const c=this.editor.document.lineAt(s).range.end;return this.editor.selection=new i.default.Selection(c,c),Promise.resolve(t?.with(void 0,c))}}}},7800:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.EditHistorySession=void 0;const a=n(6594),c=s(n(1398)),u=n(9307),l=n(8492),d=o(n(2853));t.EditHistorySession=class{constructor(){this.diffBlockCount=6,this.maxDocCacheCount=10,this.maxDocSnapshotCacheCount=20,this.historyPrefixLineCount=10,this.historySuffixLineCount=10,this.cacheDocSnapshots=new Map,this.lastSingleCursorLineNumber=new Map,this._lastEditEventMap=new Map}get lastEditEventMap(){return this._lastEditEventMap}getLastEditEvent(){if(0!==this._lastEditEventMap.size)return[...this._lastEditEventMap.values()].sort(((e,t)=>t.editTime-e.editTime))[0]}receiveSelectionChange(e){1===e.selections.length&&e.selections[0].isEmpty&&this.receiveSingleCursorChange(e.textEditor,e.selections[0].active.line)}receiveEdit(e){const t=e.document,n=e.contentChanges;if(0!==n.length){if(1===n.length&&this.isNeedRecordDocSnapshot(this.getLastEditEvent(),t,n[0])){const e=this.getPreviousText(t,n[0]),r=t.uri.toString();this.recordDocSnapshot(r,e,"isNeedRecordDocSnapshot")}this.lastEditEventMap.set(t.uri.toString(),{documentUri:t.uri.toString(),changeEvents:n,editTime:Date.now()})}}receiveActiveTextEditorChange(e){const t=e.document,n=t.uri.toString(),r=c.default.workspace.textDocuments.find((e=>e.uri.toString()!==n&&e.uri.toString()===this.getLastEditEvent()?.documentUri));void 0!==r&&this.recordDocSnapshot(r.uri.toString(),r.getText(),"receiveActiveTextEditorChange:lastEditDocument"),this.recordDocSnapshot(n,t.getText(),"receiveActiveTextEditorChange");1===e.selections.length&&e.selections[0].isEmpty&&this.receiveSingleCursorChange(e,e.selections[0].active.line)}getHistoryEdits(e=6){let t=[];const n=[...this.cacheDocSnapshots.values()].map((e=>e.toArray())).flat().sort(((e,t)=>t.saveTime-e.saveTime));for(const e of n){const n=e.documentUri,r=this.cacheDocSnapshots.get(n)?.peekLast();if(void 0===r||r===e)continue;const i=d.structuredPatch(n,n,e.text,r.text),o=this.parseDiffToEditBlocks(n,i);if(o.length>0){t.find((e=>e.block.documentUri===n))&&(t=t.filter((e=>e.block.documentUri!==n)));const r=o.map((t=>({lastSnapshotText:e.text,block:t})));if(t.push(...r),t.length>=this.diffBlockCount)break}}return t.slice(0,e).map((e=>Object.assign(e.block,{prefix:(0,u.getSubLinesText)(e.lastSnapshotText,e.block.afterStartLine-this.historyPrefixLineCount,e.block.afterStartLine),suffix:(0,u.getSubLinesText)(e.lastSnapshotText,e.block.afterStartLine+e.block.numAfterLines,e.block.afterStartLine+e.block.numAfterLines+this.historySuffixLineCount),editTime:0})))??[]}getActiveEditingLine(e,t){const n=e.uri.toString(),r=this.cacheDocSnapshots.get(n)?.peekLast(),i=(0,u.splitLines)(e.getText())[t];let o="";if(void 0!==r){const e=(0,u.splitLines)(r.text);e.length>t&&(o=e[t])}if(l.logger.logInfo(`[++]getActiveEditingLine: editBefore:${o}, editAfter:${i}`),o!==i)return{editBefore:o,editAfter:i}}receiveSingleCursorChange(e,t){const n=e.document,r=n.uri.toString();t!==this.lastSingleCursorLineNumber.get(r)&&(this.lastSingleCursorLineNumber.set(r,t),this.recordDocSnapshot(r,n.getText(),"receiveSingleCursorChange"))}isNeedRecordDocSnapshot(e,t,n){const r=t.uri.toString();if("insert"===this.getTextDocumentChangeType(n)){if(void 0===e||r!==e.documentUri)return l.logger.logInfo("[++]needRecordDocSnapshot: first edit"),!0;if(1!==e.changeEvents.length)return l.logger.logInfo("[++]needRecordDocSnapshot: last change is multi-cursor"),!0;if(e.changeEvents[0].range.start.line!==n.range.start.line)return l.logger.logInfo("[++]needRecordDocSnapshot: edit line changed."),!0;if((0,u.countLineBreaks)(n.text)>0)return l.logger.logInfo("[++]needRecordDocSnapshot: line breaks count > 0"),!0}return!1}recordDocSnapshot(e,t,n){let r=this.cacheDocSnapshots.get(e);void 0===r&&(r=new a.Queue(this.maxDocSnapshotCacheCount),this.cacheDocSnapshots.set(e,r));const i=r.peekLast();if(void 0!==i&&i.text===t)l.logger.logInfo(`[++]recordDocSnapshot:onlyUpdateSaveTime, reason:${n}`),i.saveTime=Date.now();else if(l.logger.logInfo(`[++]recordDocSnapshot, reason:${n}`),r.push({documentUri:e,text:t,saveTime:Date.now()}),this.cacheDocSnapshots.size>this.maxDocCacheCount){let e,t=Date.now();[...this.cacheDocSnapshots.keys()].forEach((n=>{const r=this.cacheDocSnapshots.get(n)?.peekLast()?.saveTime;r&&r<t&&(t=r,e=n)})),void 0!==e&&this.cacheDocSnapshots.delete(e)}}getPreviousText(e,t){const n=t.rangeOffset,r=t.text;return e.getText().substring(0,n)+e.getText().substring(n+r.length)}getTextDocumentChangeType(e){const t=e.rangeLength,n=e.text.length;let r="none";return 0===t&&n>0?r="insert":t>0&&0===n?r="delete":t>0&&n>0&&(r="replace"),r}parseDiffToEditBlocks(e,t){const n=[];return t.hunks.forEach((t=>{let r=null,i=t.oldStart-1,o=t.newStart-1;t.lines.forEach((t=>{const s=t+"\n",a=s.startsWith("+"),c=s.startsWith("-");if(a||c){r||(r={documentUri:e,before:[],after:[],numBeforeLines:0,numAfterLines:0,beforeStartLine:i,afterStartLine:o});const t=s.substring(1);c?(r.before.push(t),r.numBeforeLines++,i++):(r.after.push(t),r.numAfterLines++,o++)}else r&&(n.push(r),r=null),i++,o++})),r&&n.push(r)})),n}}},4121:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressWithDecoration=void 0;const s=o(n(1398)),a=n(8492);!function(e){let t,n;function r(e){n&&(clearInterval(n),n=void 0),t&&(a.logger.logInfo("[++]ProgressWithDecoration: hideLoading"),e.setDecorations(t,[]),t.dispose(),t=void 0)}e.showLoading=function(e){a.logger.logInfo("[++]ProgressWithDecoration: showLoading"),r(e),t=s.window.createTextEditorDecorationType({after:{width:"3ch",contentText:" ".repeat(3),color:new s.ThemeColor("editorHint.foreground")}});let i=0;const o=e.selection.active;function c(){if(!t)return;if(!e.selection.active.isEqual(o))return void r(e);const n={range:new s.Range(o,o),renderOptions:{after:{contentText:".".repeat(i)+" ".repeat(3-i)}}};e.setDecorations(t,[n]),i=(i+1)%4}c(),n=setInterval(c,200)},e.hideLoading=r}(t.ProgressWithDecoration||(t.ProgressWithDecoration={}))},3631:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.MultiEdit=t.DEFAULT_CODE_SUGGESTION_PRO_CURSOR_STAY_DELAY=void 0;const s=o(n(1398)),a=n(6683),c=n(8492),u=n(508),l=n(1408),d=n(964),f=n(7224),h=n(1227);t.DEFAULT_CODE_SUGGESTION_PRO_CURSOR_STAY_DELAY=100;const p=e=>`${e}.needShowTipAtTopLine`,g=e=>`${e}.needShowTipAtTopEditPosition`;!function(e){let t,n,r,i,o,_="codeverse.experiments.codeverse++",m="Idle";function v(){return n}function y(e){return"marscode"}e.isSupportedLanguageId=function(e){return e&&e.toLowerCase().indexOf("log")<0&&e.toLowerCase().indexOf("plaintext")<0&&e.toLowerCase().indexOf("output")<0},e.client=function(){return t},e.isToB=v,e.getState=function(){return m},e.refreshState=function(e){m!==e&&(m=e,c.logger.logInfo(`[++] refreshState -> ${e}`))},e.multiEditEnableFromConfig=function(){return r},e.codeCompletionEnable=function(){return!o||"true"===o.workspaceState.get(f.CODEVERSER_COMPLETION_SWITCHED,"true")},e.getMultiEditCursorStayDelayFormAdvanceConfig=function(){return i},e.getShowTipAtTopLineTimes=function(){if(o)return o.globalState.get(p(v()),0)},e.updateShowTipAtTopLineTimes=function(e){o&&o.globalState.update(p(v()),e)},e.getShowTipAtEditPositionTimes=function(){if(o)return o.globalState.get(g(v()),0)},e.updateShowTipAtTopEditPositionTimes=function(e){o&&o.globalState.update(g(v()),e)},e.tryConfigEnable=async function(e){if(!o||n||!e)return;if(r)return void c.logger.logInfo("[++]tryConfigEnable: already enable from localConfig");const t="configEnableFromRemoteConfig";if(o.globalState.get(t,!1))return void c.logger.logInfo("[++]tryConfigEnable: already config from remoteConfig");const i=await h.RemoteEnableConfig.fetchCurrentEnableCount(),a=e.max_enable_count;if(c.logger.logInfo(`[++]tryConfigEnable: currentEnableCount:${i}, maxEnableCount:${a}`),void 0!==i&&i<a){if(Math.random()<.33){c.logger.logInfo("[++]tryConfigEnable: enable from remoteConfig: match random");const e=b(n);s.workspace.getConfiguration().update(e,!0,s.ConfigurationTarget.Global),o.globalState.update(t,!0),await h.RemoteEnableConfig.updateCurrentEnableCount(i+1)}else c.logger.logInfo("[++]tryConfigEnable: not enable from remoteConfig: not match random")}},e.pluginName=y;const b=e=>e?"marscode.codeCompletionPro":_,E=e=>e?"marscode.advanced":"codeverse.advanced",w=e=>{const t=b(e);if(e){const e=s.workspace.getConfiguration().get(t);return void 0!==e&&void 0!==e.enableCodeCompletionPro&&e.enableCodeCompletionPro}return!0===s.workspace.getConfiguration().get(t)},S=e=>{const t=s.workspace.getConfiguration().get(E(e));if(void 0!==t){let e=t.codeSuggestionProCursorStayDelay;if(void 0!==e)return e=Math.max(0,e),e=Math.min(5e3,e),e}};e.activate=function(f,h,p,g,m,v){c.logger.logInfo("[++]activate"),n=h,o=f,m&&(_=m),r=w(h),i=S(h);const y=s.workspace.onDidChangeConfiguration((t=>{t.affectsConfiguration(b(h))&&(r=w(h),e.reportActionsCallback&&e.reportActionsCallback(d.MultiEditAction.ConfigEnableAction,{enable:`${r}`}),u.globalContext.get(l.BaseExtensionAIClient).getInstance()?.telemetryAction(d.MultiEditAction.ConfigEnableAction,{enable:`${r}`})),t.affectsConfiguration(E(h))&&(i=S(h))}));t=new a.EditClient,f.subscriptions.push(y,t),e.showLinesDiffCallback=p,e.hideLinesDiffCallback=g,e.reportActionsCallback=v},e.refreshHasRecommend=function(e){c.logger.logInfo(`[++]refreshHasRecommend:${e}`),s.commands.executeCommand("setContext","marscode.hasEditOfCurrentEditor",e)},e.updateIsTob=function(e){n=e}}(t.MultiEdit||(t.MultiEdit={}))},7961:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpenDocumentSession=void 0;const r=n(9307);t.OpenDocumentSession=class{constructor(){this.maxCount=10,this.disposables=[],this.timestampForDocumentUris=[]}updateDocument(e){const t=Date.now(),n=this.timestampForDocumentUris.find((([t,n])=>t===e));n?n[1]=t:this.timestampForDocumentUris.length<this.maxCount?this.timestampForDocumentUris.push([e,t]):(this.timestampForDocumentUris.sort(((e,t)=>e[1]-t[1])),this.timestampForDocumentUris[0]=[e,t])}getRecentDocuments(e=5){const t=[],n=[];this.timestampForDocumentUris.sort(((e,t)=>t[1]-e[1]));for(const e of this.timestampForDocumentUris){const[i,o]=e;try{const o=(0,r.readLiveDocument)(i);t.push(e),n.push([i,o])}catch(e){}}return this.timestampForDocumentUris=t,n.slice(0,e)}dispose(){for(const e of this.disposables)e.dispose()}}},6682:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RecommendTracker=void 0;const i=n(508),o=n(1408),s=n(964),a=r(n(1398)),c=n(8628),u=n(3631),l=n(1989),d=n(6594);class f extends a.default.Disposable{constructor(){super((()=>this.dispose())),this.trackRecommendExactEventWithEditDisposables=[],this.trackRecommendHideEventWithUnFocusDisposables=[],this.autoClearCheckInvalidTimes=0,this.offsetTracker=new l.OffsetTracker}isRecommendShowing(e){return void 0!==this.getShowingEditApplier(e)}getShowingEditApplier(e){return void 0!==e&&(e.document.uri.toString(),this._showingEditApplier?.editor?.document?.uri?.toString()),this._showingEditApplier}getShowingEditApplierHandler(e){return this.getShowingEditApplier(e)}dispose(){this.getShowingEditApplierHandler()?.clear("recommendTracker.dispose"),this.disposeAutoClearCheck(),this.disposeTrackRecommendHideEventWithUnFocus(),this.disposeTrackRecommendExactEventWithEdit(),this._showingEditApplier=void 0}disposeTrackRecommendExactEventWithEdit(){this.trackRecommendExactEventWithEditDisposables.forEach((e=>e.dispose())),this.trackRecommendExactEventWithEditDisposables=[]}disposeTrackRecommendHideEventWithUnFocus(){this.trackRecommendHideEventWithUnFocusDisposables.forEach((e=>e.dispose())),this.trackRecommendHideEventWithUnFocusDisposables=[]}onShow(e,t){this._showingEditApplier=e;const{line:n,character:r}=e.triggerPosition,a={respId:e.logID,triggerType:e.triggerType,language:e.editor.document.languageId,showText:t,documentUri:e.editor.document.uri.toString(),position:{line:n,character:r}};u.MultiEdit.reportActionsCallback&&u.MultiEdit.reportActionsCallback(s.MultiEditAction.Show,a),i.globalContext.get(o.BaseExtensionAIClient).getInstance()?.telemetryAction(s.MultiEditAction.Show,a),i.globalContext.get(o.BaseExtensionAIClient).getInstance()?.telemetryAction(s.MultiEditAction.Recommend,a),this.trackRecommendHideEventWithUnFocus(e,[...e.lineDecorations.keys()]),this.trackGroundTruthEvent(e,e.triggerPosition)}onAccept(e,t,n){const r={respId:e.logID,triggerType:e.triggerType,language:e.editor.document.languageId,documentUri:e.editor.document.uri.toString(),position:{line:t.line,character:t.character},acceptText:n};u.MultiEdit.reportActionsCallback&&u.MultiEdit.reportActionsCallback(s.MultiEditAction.Accept,r),i.globalContext.get(o.BaseExtensionAIClient).getInstance()?.telemetryAction(s.MultiEditAction.Accept,r),this.reportRecommendExactEvent(e,e.triggerPosition,n)}onMoveCursorPositionBeforeAccept(e,t,n){this.reportRecommendExactEvent(e,t,n)}onHide(e,t,n,r){this.disposeAutoClearCheck();const a=Date.now()-e.showStartTime;c.logger.info(`[++]clearAll, showDuration:${a}ms ,showStartTime:${e.showStartTime}`);const l={triggerType:e.triggerType,language:e.editor.document.languageId,showDuration:a,documentUri:e.editor.document.uri.toString(),position:{line:e.triggerPosition.line,character:e.triggerPosition.character},respId:e.logID,showText:r};u.MultiEdit.reportActionsCallback&&u.MultiEdit.reportActionsCallback(s.MultiEditAction.Hide,l),i.globalContext.get(o.BaseExtensionAIClient).getInstance()?.telemetryAction(s.MultiEditAction.Hide,l),n||"autoDetectAfterAcceptLint"===e.triggerType||this.trackRecommendExactEventWithEdit(e,t,r),this._showingEditApplier=void 0}trackRecommendHideEventWithUnFocus(e,t){this.disposeAutoClearCheck();const n=(e,t,n)=>{const r=a.default.window.activeTextEditor?.document?.uri!==e.editor.document.uri,i=!e.editor.visibleRanges.some((t=>t.contains(e.editor.selection.active)));r||i?(c.logger.info(`[++]autoClearCheck: clear by editorChanged:${r}, invisible:${i}`),this.autoClearCheckInvalidTimes++,this.autoClearCheckInvalidTimes>=2&&(e.clear("recommendTracker.autoClearCheck"),this.autoClearCheckInvalidTimes=0)):this.autoClearCheckInvalidTimes=0,Date.now()-t>n&&(c.logger.info(`[++]autoClearCheck: clear by autoClearCheckInvalidDuration:${n}`),e.clear("recommendTracker.autoClearCheck"))};this.autoClearCheckInterval=setInterval((()=>{n(e,e.showStartTime,e.lineDecorations.size<=2?15e3:3e4)}),500),this.trackRecommendHideEventWithUnFocusDisposables.push(a.default.window.onDidChangeActiveTerminal((async e=>{this.getShowingEditApplierHandler()?.clear("recommendTracker.onDidChangeActiveTerminal"),this.disposeTrackRecommendHideEventWithUnFocus()}),this),a.default.debug.onDidChangeActiveDebugSession((async e=>{this.getShowingEditApplierHandler()?.clear("recommendTracker.onDidChangeActiveDebugSession"),this.disposeTrackRecommendHideEventWithUnFocus()}),this),a.default.debug.onDidChangeBreakpoints((async e=>{this.getShowingEditApplierHandler()?.clear("recommendTracker.onDidChangeBreakpoints"),this.disposeTrackRecommendHideEventWithUnFocus()}),this))}disposeAutoClearCheck(){this.autoClearCheckInterval&&(c.logger.info("[++]disposeAutoClearCheck..."),clearInterval(this.autoClearCheckInterval),this.autoClearCheckInterval=void 0)}trackRecommendExactEventWithEdit(e,t,n){this.disposeTrackRecommendExactEventWithEdit();const r=e.editor.document.lineAt(t[0]).range.with(void 0,e.editor.document.lineAt(t[t.length-1]).range.end);this.trackRecommendExactEventWithEditDisposables.push(a.default.workspace.onDidChangeTextDocument((async t=>{u.MultiEdit.isSupportedLanguageId(t.document.languageId)&&(t.document.uri.toString()===e.editor.document.uri.toString()&&t.contentChanges.some((e=>void 0!==e.range.intersection(r)))&&this.reportRecommendExactEvent(e,e.triggerPosition,n),this.disposeTrackRecommendExactEventWithEdit())}),this),a.default.window.onDidChangeTextEditorSelection((async e=>{u.MultiEdit.isSupportedLanguageId(e.textEditor.document.languageId)&&void 0===e.textEditor.selection.intersection(r)&&this.disposeTrackRecommendExactEventWithEdit()}),this))}reportRecommendExactEvent(e,t,n){const r={triggerType:e.triggerType,language:e.editor.document.languageId,respId:e.logID,documentUri:e.editor.document.uri.toString(),position:{line:t.line,character:t.character},showText:n};i.globalContext.get(o.BaseExtensionAIClient).getInstance()?.telemetryAction(s.MultiEditAction.RecommendExact,r)}trackGroundTruthEvent(e,t){if(!u.MultiEdit.isToB()&&e.editor.document.lineCount<8e3){const n=[30,60,300],r=this.offsetTracker.add(e.editor.document.uri.toString(),e.editor.document.offsetAt(t),t);n.map(((a,u)=>{setTimeout((async()=>{const l=this.offsetTracker.get(r);if(l){u===n.length-1&&this.offsetTracker.delete(r);const f=await(0,d.getFileContent)(e.editor.document.uri.toString());try{i.globalContext.get(o.BaseExtensionAIClient).getInstance()?.telemetryAction(s.MultiEditAction.GroundTruth,{respId:e.logID,offset:l.offset,documentText:f,documentUri:e.editor.document.uri.toString(),position:{line:t.line,character:t.character},triggerType:e.triggerType,language:e.editor.document.languageId}),c.logger.info(`[${e.logID}] capture multi-edit GroundTruth success: delay:${a}`)}catch(t){c.logger.error(`[${e.logID}] capture multi-edit GroundTruth error: ${t}`)}}}),1e3*a)}))}}}t.RecommendTracker=f},1227:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteEnableConfig=t.BaseRemoteEnableConfig=void 0;class n{async updateCurrentEnableCount(e){}async fetchCurrentEnableCount(){return 0}}t.BaseRemoteEnableConfig=n,function(e){let t=new n;e.setRemoteEnableConfigImpl=function(e){t=e},e.updateCurrentEnableCount=async function(e){return t.updateCurrentEnableCount(e)},e.fetchCurrentEnableCount=async function(){return t.fetchCurrentEnableCount()}}(t.RemoteEnableConfig||(t.RemoteEnableConfig={}))},9307:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getEndColPositions=t.getRightMostCodeEndPosition=t.getLeftMostCodePosition=t.range=t.getTextEditorLines=t.getSubLinesText=t.getDocumentLinesText=t.getDocumentLineRange=t.getDocumentLinesRange=t.readLiveDocument=t.getWorkspaceBasePath=t.replaceFirstNbSpWithVerticalLine=t.replaceSpacesWithNbSp=t.removeEndingLineBreaks=t.countLineBreaks=t.countLines=t.splitLines=void 0;const s=o(n(1398)),a=n(1699).getTabSize;function c(e){return e.match(/.*(\n|\r\n?)|.+$/g)??[]}function u(e,t,n){const r=e.lineCount-1;function i(t){return t>r?e.lineAt(r).range.end:t<0?e.lineAt(0).range.start:e.lineAt(t).range.start}return t=Math.min(Math.max(0,t),r+1),n=Math.min(Math.max(0,n),r+1),new s.Range(i(t),i(n))}function l(e,t,n){return e.getText(u(e,t,n))}function d(e,t){return t.map((t=>{let n=e.lineAt(t).text;n=n.replace(/\t/g," ".repeat(a()));const r=n.search(/\S\s*$/)+1;return new s.Position(t,r)}))}t.splitLines=c,t.countLines=function(e){return e.match(/\n|\r\n?|(?:.+)$/g)?.length??0},t.countLineBreaks=function(e){return e.match(/\n|\r\n?/g)?.length??0},t.removeEndingLineBreaks=function(e){return e.replace(/[\r\n]+$/,"")},t.replaceSpacesWithNbSp=function(e){return e.replace(/^\s+|\s+$/g,(e=>e.replace(/ /g," ").replace(/\t/g," ".repeat(a()))))},t.replaceFirstNbSpWithVerticalLine=function(e){return e.startsWith(" ")?e.replace(" ","│"):e},t.getWorkspaceBasePath=function(){return s.workspace.workspaceFolders?.[0].uri.fsPath},t.readLiveDocument=function(e){const t=s.workspace.textDocuments.filter((t=>t.uri.toString()===e));return t?t[0].getText():""},t.getDocumentLinesRange=u,t.getDocumentLineRange=function(e,t){const n=e.lineCount-1,r=e.lineAt(t).range.start;return new s.Range(r,t+1>n?e.lineAt(n).range.end:e.lineAt(t+1).range.start)},t.getDocumentLinesText=l,t.getSubLinesText=function(e,t,n){const r=c(e),i=Math.max(0,Math.min(t,r.length-1)),o=Math.max(-1,Math.min(n-1,r.length-1));let s="";for(let e=i;e<=o;e++)s+=r[e];return s},t.getTextEditorLines=function(e,t,n=!1){const r=e.document;return n?t.map((e=>l(r,e,e+1))):t.map((e=>r.lineAt(e).text))},t.range=function(e,t,n=1){return t-=1,[...Array(Math.floor((t-e)/n)+1)].map(((t,r)=>e+r*n))},t.getLeftMostCodePosition=function(e,t){let n=1/0,r=0;return t.forEach((t=>{const i=e.lineAt(t).text.search(/\S/);-1!==i&&i<n&&(n=i,r=t)})),n===1/0&&(n=0,r=t[0]),new s.Position(r,n)},t.getRightMostCodeEndPosition=function(e,t){if(0===t.length)return new s.Position(0,0);const n=d(e,t);let r=n[0];return n.forEach((e=>{e.character>r.character&&(r=e)})),r},t.getEndColPositions=d},9345:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timeout=void 0,t.timeout=async function(e,t){return 0===t?e.then((e=>({type:"success",value:e}))):new Promise(((n,r)=>{const i=setTimeout((()=>n({type:"timeout"})),t);e.then((e=>{clearTimeout(i),n({type:"success",value:e})})).catch((e=>{clearTimeout(i),r(e)}))}))}},2469:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.TipWithDecoration=void 0;const s=o(n(1398)),a=n(8492),c=n(3392),u=n(3631),l=n(3765);!function(e){let t;function n(e){void 0!==t&&(a.logger.logInfo("[++]TipWithDecoration: hideTips"),e.setDecorations(t,[]),t.dispose(),t=void 0)}e.showTips=function(e,r){if(a.logger.logInfo("[++]TipWithDecoration: showTips"),n(e),t=s.window.createTextEditorDecorationType({after:{color:c.hintCodeTextColor}}),!t)return;const i=e.document.lineAt(r.line).range.end,o={range:new s.Range(i,i),renderOptions:{after:{contentText:"  ✨ "+(0,l.l10nProxy)(u.MultiEdit.isToB()?"Try Ctrl+Shift+Enter to trigger Code Completion Pro":"Try Ctrl+Shift+Enter to trigger 'Codeverse' Suggestion Pro")}}};e.setDecorations(t,[o])},e.hideTips=n}(t.TipWithDecoration||(t.TipWithDecoration={}))},3765:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.l10nProxy=void 0;const s=o(n(1398)),a=n(8492);t.l10nProxy=function(e){try{return s.l10n.t(e)}catch(e){a.logger.logInfo("vscode l10n t error:"+e)}return e}},9926:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.registerEscCommand=void 0;const s=o(n(1398)),a=n(742),c=n(2909),u=n(855);function l(e){s.commands.executeCommand("editor.action.inlineSuggest.hide"),c.HintDecorationManager.INSTANCE.disposeHintDecoration("esc"),u.InlineCompletionStateTrackerImpl.getInstance().tryHandleInvisible("esc")}t.registerEscCommand=function(e){e.subscriptions.push(s.commands.registerCommand((0,a.getBrand)()+".esc",l,e))}},742:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTrae=t.getBrand=t.getUserName=t.isLogin=void 0;const r=n(8492),i=n(1408),o=n(7650),s=n(508),a=n(6727),c=n(3155);let u;function l(){return"trae"}t.isLogin=async function(){return await s.globalContext.get(o.BaseLogin).isLogin()&&async function(){try{const e=await c.secretStoreManager.getConfig("isActivated");r.logger.logInfo("isActivated: "+e),"true"!==e&&(s.globalContext.get(i.BaseExtensionAIClient).getInstance()?.telemetryAction(a.CommonAction.PluginCommonAction,{module_id:"trae.vs.plugin.activate"}),c.secretStoreManager.storeConfig("isActivated","true"))}catch(e){}}(),s.globalContext.get(o.BaseLogin).isLogin()},t.getUserName=function(){return u?.username??""},t.getBrand=l,t.isTrae=function(){return!0}},6931:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ModelManager=t.initModelManager=void 0;const s=o(n(1398)),a=n(8492),c=n(1408),u=n(508),l=n(742),d="default",f="codeverse.workspace.selectedmodel";t.initModelManager=function(e){const t=h.INSTANCE;return t.init(e),t};class h{constructor(){this.currentModel=d,this.supportedModelList=[],this.extensionContext=void 0,this.stop=!1,this.disposables=new Set}init(e){this.extensionContext=e;let t=this.extensionContext.globalState.get(f);t&&(this.currentModel=t),(0,l.isTrae)()||e.subscriptions.push(s.commands.registerCommand("codeverse.lab.selcetmdoel",(()=>{this.isSelectable&&this.selectModel()})))}dispose(){this.updateToken&&clearInterval(this.updateToken);for(let e of this.disposables)e.dispose()}async selectModel(){let e=this.supportedModelList;try{e=await(u.globalContext.get(c.BaseExtensionAIClient).getInstance()?.getModelNames())??[],e.sort(((e,t)=>t.localeCompare(e)))}catch(e){a.logger.logInfo(`fetch model list failed, error: ${JSON.stringify(e)}`)}let t=[d].concat(e).map((e=>{let t=e===this.current;return{label:e,description:t?"recently used":"",picked:t}})),n=s.window.createQuickPick();n.items=t,n.activeItems=t.filter((e=>e.picked)),n.onDidChangeSelection((e=>{e&&e.length>0&&n.hide()})),n.onDidHide((()=>{let e=n.selectedItems;!e||e.length<=0||(this.extensionContext&&this.extensionContext.globalState.update(f,e[0].label),this.currentModel=e[0].label,n.dispose())})),n.show()}get current(){return this.isSelectable?this.currentModel:d}get isSelectable(){return!0}}t.ModelManager=h,h.INSTANCE=new h},1699:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTabSize=void 0;const r=n(1398);t.getTabSize=function(){const e=r.window.activeTextEditor?.options.tabSize;return"number"!=typeof e?4:e}},2549:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(1408),t),i(n(1387),t),i(n(7224),t),i(n(8052),t),i(n(8937),t),i(n(8492),t),i(n(6931),t),i(n(742),t),i(n(9926),t),i(n(322),t),i(n(5891),t),i(n(6028),t),i(n(6594),t),i(n(2097),t),i(n(4606),t),i(n(8680),t),i(n(4968),t),i(n(508),t),i(n(4594),t),i(n(9954),t),i(n(9058),t),i(n(9836),t),i(n(1700),t),i(n(7056),t),i(n(7650),t)},7650:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseLogin=void 0;t.BaseLogin=class{setfreshToken(e){}async login(e){}}},322:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.NeighborFileManager=t.Constant=t.NeighborSnippetType=void 0;const a=s(n(1398)),c=o(n(8324)),u=n(6727),l=n(3263),d=n(5590);!function(e){e.FIX_WINDOW="fixWindow",e.FUNCTION="function",e.INDENTATION="indentation"}(t.NeighborSnippetType||(t.NeighborSnippetType={}));class f{}t.Constant=f,f.DEFAULT_FILE_MAX_SIZE=2e5,f.DEFAULT_FILE_MAX_LENGTH=20,f.CURSOR_STACK_MAX_LENGTH=1e3,f.MAX_CURSOR_RECENT_TIME=18e4,f.DEFAULT_WINDOW_SIZE=20,f.DEFAULT_SNIPPET_SIZE=5,f.DEFAULT_INDENTATION_MIN_LENGTH=5,f.DEFAULT_INDENTATION_MAX_LENGTH=10,f.LANGUAGE_EXTENSION_MAP={python:["py"],go:["go"],javascript:["js","mjs","jsx"],typescript:["ts"],typescriptreact:["tsx"],ruby:["rb","rake"]},f.EXCLUDE_FOLDER=["node_modules","dist","site-packages"];class h{constructor(){this.accessFileMap=new Map,this.cursorStack=[],this.workspaceFileCache=new Map}init(){a.default.window.onDidChangeActiveTextEditor((e=>{e&&["python","cpp","typescript","typescriptreact","javascript","javascriptreact","go","java"].includes(e.document.languageId)&&this.accessFileMap.set(e.document.uri.toString(),Date.now())})),a.default.window.onDidChangeTextEditorSelection((e=>{if(e.selections.length>0){let t=e.selections[0];t.active.line===t.anchor.line&&t.active.character===t.anchor.character&&this.cursorStack.push({document:e.textEditor.document,timestamp:Date.now()})}this.cursorStack.length>f.CURSOR_STACK_MAX_LENGTH&&this.cursorStack.shift()}))}getRecentAccessFiles(){return[...this.accessFileMap.keys()]}pathDistance(e,t){let n=c.relative(e,t).split(c.sep).length;return{distance:n,lca:(e.split(c.sep).length+t.split(c.sep).length-n)/2}}getNeighborFiles(e){let{fileType:t,fileMaxLength:n,fileMaxSize:r}=e,i=a.default.window.activeTextEditor?.document;if(void 0===i)return[];let o=0,s=i.languageId,c=[];t===u.NeighborFileType.OpenTabs?c=this.getFileByOpenTab():t===u.NeighborFileType.WorkspaceSharingSameFolder||t===u.NeighborFileType.WorkspaceSmallestPathDist?(c=this.workspaceFileCache.get(s)??[],c.length>0?this.workspaceFileCache.delete(s):c=this.getFileByOpenTab()):t===u.NeighborFileType.CursorMostCount?c=l.CursorHistoryManager.INSTANCE.sortedDocsByClickCount():t===u.NeighborFileType.CursorMostRecent?c=l.CursorHistoryManager.INSTANCE.sortedDocsByClickTime():t===u.NeighborFileType.OpenTabsAndCocommitted&&(c=this.getFileByCursorStack(i,t));let d=new Set;for(let e of c){if(d.size>=n||o>r)break;e.languageId!==s||e.fileName===i.fileName||d.has(e.uri.toString())||(d.add(e.uri.toString()),o+=e.getText().length)}return[...d]}getFileByOpenTab(){return[...a.default.workspace.textDocuments].sort(((e,t)=>(this.accessFileMap.get(t.uri.toString())??0)-(this.accessFileMap.get(e.uri.toString())??0)))}getFileByCursorStack(e,t){if(t===u.NeighborFileType.CursorMostRecent)return this.cursorStack.reverse().map((e=>e.document));if(t===u.NeighborFileType.CursorBeforeCurrentFile)return this.cursorStack.filter(((t,n,r)=>t.document!==e&&n<r.length&&r[n+1].document===e)).map((e=>e.document));if(t===u.NeighborFileType.CursorMostCount){let e=new Map,t=Date.now(),n=this.cursorStack.reverse();for(let r of n){if(t-r.timestamp>f.MAX_CURSOR_RECENT_TIME)break;let n=e.get(r.document)??0;e.set(r.document,n+1)}return[...e.keys()].sort(((t,n)=>(e.get(n)??0)-(e.get(t)??0)))}return[]}async getFileByWorkspace(e){let t=`**/{${f.EXCLUDE_FOLDER.join(",")},.*}/**`,n=`**/*.{${f.LANGUAGE_EXTENSION_MAP[e.languageId].join(",")}}`,r=a.default.workspace.getWorkspaceFolder(e.uri);if(void 0!==r){let t=c.relative(r.uri.fsPath,c.dirname(e.uri.fsPath));t.length>0&&(n=t+"/"+n)}let i=(await a.default.workspace.findFiles(n,t)).sort(((t,n)=>{let r=this.pathDistance(t.path,e.uri.fsPath),i=this.pathDistance(n.path,e.uri.fsPath);return r.distance!==i.distance?r.distance-i.distance:i.lca-r.lca})),o=[];for(let e of i)o.push(await(0,d.openTextDocument)(e));return o}}t.NeighborFileManager=h,h.INSTANCE=new h},5891:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getSymbolContext=void 0;const i=r(n(1398)),o=n(8903),s=n(236),a=n(8492),c=n(7933),u=n(5590);t.getSymbolContext=async function(e){let t;try{const n=i.default.Uri.parse(e.uri),r=new i.default.Position(e.position.line,e.position.character),a=await o.vscodeExecuteService.getDefinitions(n,r);if(!a||0===a.length)return;for(const r of a){if("targetUri"in r){const t=await(0,u.openTextDocument)(r.targetUri);return{symbol:e.text,text:t.getText(r.targetRange),uri:t.uri.toString()}}{const o=await(0,u.openTextDocument)(r.uri),a=o.getText(r.range),l=o.offsetAt(r.range.start),d=await i.default.commands.executeCommand("vscode.executeDocumentSymbolProvider",o.uri),f=d?.filter((e=>e.location.range.contains(r.range)))[0];if(!f||f.location.uri.fsPath===n.fsPath)continue;const h=o.getText(f.location.range);t=c.TreeSitter.INSTANCE.parseSyntaxTree(o.languageId,h);const p=t?.rootNode;if(!p)continue;const g=(0,s.findNode)(p,(e=>e.text===a&&e.startIndex+o.offsetAt(f.location.range.start)===l))[0];if(g&&g.parent)return{symbol:e.text,text:g.parent.text,uri:o.uri.toString()}}}}catch(e){a.logger.logInfo("getSymbolDefinition error: "+e)}finally{t?.delete()}}},855:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.inlineCompletionStateTracker=t.InlineCompletionStateTrackerImpl=void 0;const i=r(n(1398)),o=n(8492);class s{static getInstance(){return void 0===this.instance&&(this.instance=new s),this.instance}constructor(){this.inlineCompletionVisibleStateChangeEvent=new i.default.EventEmitter,i.default.workspace.onDidChangeTextDocument((e=>{e.document.uri.toString()===this.visibleInlineCompletionInfo?.documentUri&&this.tryHandleInvisible("onDidChangeTextDocument")})),i.default.window.onDidChangeTextEditorSelection((e=>{e.textEditor.document.uri.toString()===this.visibleInlineCompletionInfo?.documentUri&&this.tryHandleInvisible("onDidChangeTextEditorSelection")})),i.default.window.onDidChangeActiveTextEditor((e=>{this.tryHandleInvisible("onDidChangeActiveTextEditor")}))}isVisible(e){return void 0!==this.visibleInlineCompletionInfo&&this.visibleInlineCompletionInfo.documentUri===e}isLoading(){return void 0!==this.loadInlineCompletionInfo}get onVisibleStateChange(){return this.inlineCompletionVisibleStateChangeEvent.event}handleVisible(e){o.logger.logInfo("InlineCompletionTracker:handleVisible"),this.visibleInlineCompletionInfo={documentUri:e,visibleTime:Date.now()},this.inlineCompletionVisibleStateChangeEvent.fire("visible")}tryHandleInvisible(e){void 0!==this.visibleInlineCompletionInfo&&(o.logger.logInfo(`InlineCompletionTracker:handleInvisible, reason:${e}, showDuration:${Date.now()-this.visibleInlineCompletionInfo.visibleTime}ms`),this.visibleInlineCompletionInfo=void 0,this.inlineCompletionVisibleStateChangeEvent.fire("invisible"))}handleLoadingStart(){o.logger.logInfo("InlineCompletionTracker:handleLoadingStart"),this.loadInlineCompletionInfo={loadTime:Date.now()}}handleLoadingEnd(){o.logger.logInfo("InlineCompletionTracker:handleLoadingEnd"),this.loadInlineCompletionInfo=void 0}}t.InlineCompletionStateTrackerImpl=s,t.inlineCompletionStateTracker=s.getInstance()},7224:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseInlineCompletionItemProvider=t.CODEVERSER_COMPLETION_SWITCHED=void 0;const s=n(6727),a=o(n(1398)),c=n(1398),u=n(1408),l=n(8492),d=n(1989),f=n(3263),h=n(6028),p=n(6594),g=n(8680),_=n(508),m=n(1700),v=n(742),y=n(2909),b=n(4606),E=n(855),w=n(7933);t.CODEVERSER_COMPLETION_SWITCHED="codeverse.completion.switched";t.BaseInlineCompletionItemProvider=class{constructor(e){this.offsetTracker=new d.OffsetTracker,this.shownStateSet=new Map,this.currentCompletions=[],this.currentCompletionTime=-1,this.currentEditorPrefix="",this.currentEditorSuffix="",this.acceptCommandHandler=async(e,t,...n)=>{let r=n[0];const i=n[1],o=n[2];let{url:s,isCache:c,language:l,completionText:d,respId:f,position:p,model:m}=r;await(_.globalContext.get(u.BaseExtensionAIClient).getInstance()?.codeAcceptCompletion({language:l,url:s,isCache:c,completionText:d,respId:f,position:p,model:m})),this.handleTelemetryAccepted(r);const v=e.document.offsetAt(new a.Position(r.range.start.line,r.range.start.character)),y=e.document.offsetAt(new a.Position(r.range.end.line,r.range.end.character));this.offsetTracker.resetUpdate(e.document.uri.toString(),v,y),this.lastUri&&this.postCompletionCodeTasks(this.lastOffsetKey,this.lastUri.toString(),r.respId),this.rangeTracker?.registerRange(e.document.uri.toString(),(0,g.calRangeModify)(new a.Range(new a.Position(p.line,p.character),new a.Position(p.line,p.character)),d),d),h.EditorTracker.INSTANCE.acceptCompletion(r,i,o,this.currentCompletionTime),this.currentCompletions=[],this.currentEditorPrefix="",this.currentEditorSuffix=""},this.context=e.context,this.modelManager=e.modelManager,this.commandPrefix=e.commandPrefix||"",this.showDecoration=e.showDecoration,this.workspaceState=e.context.workspaceState,b.gitTracker.onDidCommitEvent((e=>{e.isBranchChange||e.isMerge||(l.logger.logInfo("gitTracker.onDidCommitEvent..."),_.globalContext.get(u.BaseExtensionAIClient).getInstance()?.telemetryAction(s.GitAction.Commit,{rootUri:e.repo.rootUri.toString(),commitHash:e.commitHash,isCommitChange:e.isCommitChange,isRevert:e.isRevert,isRebase:e.isRebase,isCherryPick:e.isCherryPick}))}))}getCompletionSwitched(){return"true"===this.context.workspaceState.get(t.CODEVERSER_COMPLETION_SWITCHED,"true")}async provideInlineCompletionItems(e,t,n,r){E.InlineCompletionStateTrackerImpl.getInstance().handleLoadingStart();const i={name:w.SlardarEventName.CompletionExecute,status:w.SlardarEventStatus.Success,costTime:Date.now()};let o=!1;try{this.showDecoration&&y.HintDecorationManager.INSTANCE.disposeHintDecoration("provideInlineCompletionItems"),l.logger.logInfo("provideInlineCompletionItems start.");const i=Date.now();if(!await(0,v.isLogin)()||!this.getCompletionSwitched())return;let a=this.modelManager?.current??"default",c=await(_.globalContext.get(u.BaseExtensionAIClient).getInstance()?.codeGetCompletion({language:e.languageId,textDocument:{uri:e.uri.toString()},position:{line:t.line,character:t.character},modelName:a,editHistories:h.EditorTracker.INSTANCE.getEditHistoryAndFormatString(e.uri.toString(),t),cursorHistory:f.CursorHistoryManager.INSTANCE.getCursorHistories(),traceId:Date.now(),triggerTs:Date.now(),selectedCompletionInfo:void 0!==n.selectedCompletionInfo},r)),d=c?.completionItems;if(this.processErrorCode(c),void 0===d||0===d.length)return;if(this.lastPosition&&this.lastUri&&(!this.lastPosition.isEqual(t)||this.lastUri!==e.uri)&&this.currentCompletions.length>0&&d[0].resultType!==s.CompletionResultType.TypingAsSuggested&&(h.EditorTracker.INSTANCE.rejectCompletion(this.currentCompletions[0],this.currentEditorPrefix,this.currentEditorSuffix,this.currentCompletionTime),this.handleTelemetryRejected(this.currentCompletions[0]),this.postCompletionCodeTasks(this.lastOffsetKey,this.lastUri.toString(),this.currentCompletions[0].respId)),this.lastPosition=t,this.lastUri=e.uri,this.currentCompletions=[],r.isCancellationRequested)return;this.handleTelemetrySuccess(d[0]),this.currentCompletions=d,e.lineCount<8e3&&d[0].resultType!==s.CompletionResultType.TypingAsSuggested&&(this.lastOffsetKey=this.offsetTracker.add(e.uri.toString(),e.offsetAt(t),t)),[this.currentEditorPrefix,this.currentEditorSuffix]=(0,p.getPrefixAndSuffix)(e,t);const g=this.getVSCodeCompletionList(d,this.currentEditorPrefix,this.currentEditorSuffix);return l.logger.logInfo(`get completion cost ${Date.now()-i}ms`),this.showDecoration&&d[0]?.displayText.includes("\n")&&y.HintDecorationManager.INSTANCE.setHintDecoration(t),E.InlineCompletionStateTrackerImpl.getInstance().handleVisible(e.uri.toString()),o=!0,g}catch(e){o=!0;const t=`provideInlineCompletionItems error: ${e}`;l.logger.logError(t),i.status=w.SlardarEventStatus.Failed,i.errorMsg=t}finally{E.InlineCompletionStateTrackerImpl.getInstance().handleLoadingEnd(),o&&a.commands.executeCommand("icube.event.aiSlardarReport",i)}}processErrorCode(e){if(e){const t=e.errorCode;if(t===s.ErrorCode.ErrAccessReject)l.logger.logError("get completion access reject"),_.globalContext.get(m.OnSecurityAccessCallback).onRejectAccess(this.getAIRejectMessage());else if(t===s.ErrorCode.ErrLogOut)l.logger.logError("get completion error logout"),_.globalContext.get(m.OnSecurityAccessCallback).onLogout();else if(4013===t){l.logger.logError("get completion service unavailable");const e=this.getAIServiceUnavailableMessage();_.globalContext.get(m.OnSecurityAccessCallback).onServiceUnavailable(e)}}}getAIRejectMessage(){const e="Today's AI code completion usage has reached its limits",t="今日 AI 代码补全用量已达上限",n=a.workspace.getConfiguration().get("AI.chatLanguage")??"Auto",r=a.env.language;return"Auto"===n?"en"===r?e:t:"English"===n?e:"简体中文"===n?t:e}getAIServiceUnavailableMessage(){const e="AI code completion is not available in the current region now.",t="当前地区暂不支持 AI 代码补全功能。",n=a.workspace.getConfiguration().get("AI.chatLanguage")??"Auto",r=a.env.language;return"Auto"===n?"en"===r?e:t:"English"===n?e:"简体中文"===n?t:e}convertToVSCodeCompletion(e,t,n){let r={arguments:[e,t,n],command:`${this.commandPrefix}-accept`,title:"accept completion"},i=new a.Range(new a.Position(e.range.start.line,e.range.start.character),new a.Position(e.range.end.line,e.range.end.character));return l.logger.logInfo("range:"+e.range.start.line+" "+e.range.start.character+" "+e.range.end.line+" "+e.range.end.character),new a.InlineCompletionItem(e.displayText,i,r)}handleTelemetrySuccess(e){_.globalContext.get(u.BaseExtensionAIClient).getInstance()?.telemetryAction(s.CompletionAction.Success,{language:e?.language,resultType:this.getResultTypeName(e?.resultType),respId:e?.respId,model:e?.model})}handleSuggestionShown(e){const t=Date.now();this.currentCompletionTime=t,this.handleTelemetryShown(e),this.updateShownState(e)}handleTelemetryShown(e){let t;if(e instanceof c.InlineCompletionItem){const n=e.command?.arguments;n&&(t=n[0])}else t=e;void 0!==t&&_.globalContext.get(u.BaseExtensionAIClient).getInstance()?.telemetryAction(s.CompletionAction.Shown,{isCache:t.isCache,isFirstShown:!this.getShownState(t.respId),language:t.language,resultType:this.getResultTypeName(t.resultType),contentId:t.contentId,respId:t.respId,displayContent:t.completionText,model:t.model,isOutOfScope:t.isOutOfScope})}getResultTypeName(e){return s.CompletionResultType[e??s.CompletionResultType.Network]}handleTelemetryAccepted(e){const{url:t,isCache:n,language:r,completionText:i,respId:o,position:a,resultType:c,contentId:l}=e,d=this.getShownTimeStamp(o),f=Date.now()-d;_.globalContext.get(u.BaseExtensionAIClient).getInstance()?.telemetryAction(s.CompletionAction.Accept,{url:t,isCache:n,language:r,suggestionSnippet:i,position:a,suggestionVisibleDuration:f,resultType:this.getResultTypeName(c),respId:o,contentId:l,model:e.model,isFirstShown:e.isFirstShown,isOutOfScope:e.isOutOfScope})}updateShownState(e){let t="";if(e instanceof c.InlineCompletionItem){const n=e.command?.arguments;let r;n&&(r=n[0],t=r.respId,r.isFirstShown=!this.getShownState(t))}else t=e.respId,e.isFirstShown=!this.getShownState(t);this.shownStateSet.set(t,Date.now())}getShownState(e){return this.shownStateSet.has(e??"")}getShownTimeStamp(e){return this.shownStateSet.get(e)??0}handleTelemetryRejected(e){}async postCompletionCodeTasks(e,t,n){if(!e)return;const r=[30,60,300];r.map(((i,o)=>{setTimeout((async()=>{const i=this.offsetTracker.get(e);if(i){o===r.length-1&&this.offsetTracker.delete(e);const a=await(0,p.getFileContent)(t);try{_.globalContext.get(u.BaseExtensionAIClient).getInstance()?.telemetryAction(s.CompletionAction.GroundTruth,{respId:n,position:i.offset,code:a})}catch(e){l.logger.logError(`[${n}] capture completion code error: ${e}`)}}}),1e3*i)}))}}},8052:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CloudInlineCompletionProvider=void 0;const i=r(n(1398)),o=n(7224);class s extends o.BaseInlineCompletionItemProvider{handleDidShowCompletionItem(e,t){this.handleSuggestionShown(e)}async provideInlineCompletionItems(e,t,n,r){return await super.provideInlineCompletionItems(e,t,n,r)}handleTelemetryAccepted(e){super.handleTelemetryAccepted(e)}getVSCodeCompletionList(e,t,n){return new i.default.InlineCompletionList(e.map((e=>this.convertToVSCodeCompletion(e,t,n))))}}t.CloudInlineCompletionProvider=s},2909:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.HintDecorationManager=void 0;const s=o(n(1398)),a=n(8492),c=n(2703);class u{constructor(){this._decoration=void 0,this._displayCount=0,s.workspace.onDidChangeTextDocument((e=>{e.document.uri===s.window.activeTextEditor?.document.uri&&this.disposeHintDecoration("onDidChangeTextDocument")})),s.window.onDidChangeTextEditorSelection((e=>{this.disposeHintDecoration("onDidChangeTextEditorSelection")})),s.window.onDidChangeActiveTextEditor((e=>{this.disposeHintDecoration("onDidChangeActiveTextEditor")}))}disposeHintDecoration(e){this._decoration&&this._decoration.dispose()}setHintDecoration(e){if((0,c.compareVscodeVersion)([1,78,0])>0)return;if(this._displayCount>0)return;a.logger.logInfo("setHintDecoration: start");const t=s.window.activeTextEditor;if(!t)return void(this._decoration=void 0);let n=t.document.lineAt(e.line),r=new s.Position(e.line,n.text.length),i=s.window.activeColorTheme,o=i.kind===s.ColorThemeKind.Dark||i.kind===s.ColorThemeKind.HighContrast?"#9D9D9D99":"#88888899";const u=s.window.createTextEditorDecorationType({before:{contentText:" ".repeat(5)+"✨ Shift + Tab 逐行采纳",color:o,height:"100%"}}),l=new s.Range(r,r);t.setDecorations(u,[l]),a.logger.logInfo(`setHintDecoration: ${r.line} ${r.character}`),this._decoration=u,this._displayCount++}}t.HintDecorationManager=u,u.INSTANCE=new u},8937:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.registerInlineCompletion=void 0;const s=o(n(1398)),a=n(742),c=n(8052),u=n(9370),l="icube";t.registerInlineCompletion=async function(e,t){const n=await async function(e,t){return"desktop"===s.env.appHost?new u.LocalInlineCompletionItemProvider({context:e,modelManager:t,showDecoration:!0}):new c.CloudInlineCompletionProvider({context:e,commandPrefix:l,showDecoration:!0})}(e,t);return e.subscriptions.push(s.languages.registerInlineCompletionItemProvider({pattern:"**"},n)),e.subscriptions.push(s.commands.registerTextEditorCommand(`${(0,a.getBrand)()}-accept`,n.acceptCommandHandler)),n}},9370:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.LocalInlineCompletionItemProvider=void 0;const s=o(n(1398)),a=n(7224),c=n(8492),u=n(3631);class l extends a.BaseInlineCompletionItemProvider{getVSCodeCompletionList(e,t,n){return e&&e.length>0?this.handleSuggestionShown(e[0]):c.logger.logInfo("completions is empty for shown"),new s.InlineCompletionList(e.map((e=>this.convertToVSCodeCompletion(e,t,n))))}async provideInlineCompletionItems(e,t,n,r){const i=await super.provideInlineCompletionItems(e,t,n,r);return u.MultiEdit.client()?.tryShowUseTips(e,i,t,n),i}}t.LocalInlineCompletionItemProvider=l},9058:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9836:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetDeviceInfoRequest=t.ProcessExecRequest=void 0;const r=n(6727);!function(e){e.method="process/exec",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolRequestType(e.method)}(t.ProcessExecRequest||(t.ProcessExecRequest={})),function(e){e.method="os/device_info",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolRequestType0(e.method)}(t.GetDeviceInfoRequest||(t.GetDeviceInfoRequest={}))},9954:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseRegion=void 0;t.BaseRegion=class{}},4657:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCacheMap=void 0;class n{constructor(e=10){this.valueMap=new Map,this.lruKeys=[],this.sizeLimit=e}set(e,t){let n;return this.valueMap.has(e)?n=e:this.lruKeys.length>=this.sizeLimit&&(n=this.lruKeys[0]),void 0!==n&&this.delete(n),this.valueMap.set(e,t),this.touchKeyInLRU(e),this}get(e){if(this.valueMap.has(e)){const t=this.valueMap.get(e);return this.touchKeyInLRU(e),t}}delete(e){if(this.has(e)){this.removeKeyFromLRU(e);return void 0!==this.valueMap.get(e)&&this.valueMap.delete(e),!0}return!1}clear(){this.valueMap.clear(),this.lruKeys=[]}get size(){return this.valueMap.size}keys(){return this.lruKeys.slice().values()}values(){return new Map(this.valueMap).values()}entries(){return new Map(this.valueMap).entries()}[Symbol.iterator](){return this.entries()}has(e){return this.valueMap.has(e)}forEach(e,t){new Map(this.valueMap).forEach(e,t)}get[Symbol.toStringTag](){return"LRUCacheMap"}peek(e){return this.valueMap.get(e)}removeKeyFromLRU(e){const t=this.lruKeys.indexOf(e);-1!==t&&this.lruKeys.splice(t,1)}touchKeyInLRU(e){this.removeKeyFromLRU(e),this.lruKeys.push(e)}}t.LRUCacheMap=n},508:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.globalContext=t.Context=void 0;class n{constructor(e){this.baseContext=e,this.constructionStack=[],this.instances=new Map;const t=(new Error).stack?.split("\n");t&&this.constructionStack.push(...t.slice(1))}get(e){const t=this.tryGet(e);if(t)return t;throw new Error(`No instance of ${e.name} has been registered.\n${this}`)}tryGet(e){const t=this.instances.get(e);return t||(this.baseContext?this.baseContext.tryGet(e):void 0)}set(e,t){if(this.tryGet(e))throw new Error(`An instance of ${e.name} has already been registered. Use forceSet() if you're sure it's a good idea.`);this.assertIsInstance(e,t),this.instances.set(e,t)}forceSet(e,t){this.assertIsInstance(e,t),this.instances.set(e,t)}assertIsInstance(e,t){}toString(){let e="    Context created at:\n";for(const t of this.constructionStack||[])e+=`    ${t}\n`;return e+=this.baseContext?.toString()??"",e}get debug(){const e={};for(const[t,n]of this.instances)e[t.name]=n;return e}}t.Context=n,t.globalContext=new n},5590:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.openTextDocument=void 0;const s=o(n(1398));t.openTextDocument=async function(e){const t=s.workspace.textDocuments.find((t=>t.uri.fsPath===e.fsPath));return t||await s.workspace.openTextDocument(e)}},3881:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getChatverseHostByRegion=t.CHAT_VERSE_I18N_PROD_URL=t.CHAT_VERSE_US_PROD_URL=t.CHAT_VERSE_I18N_URL=t.CHAT_VERSE_US_URL=t.CHAT_VERSE_CN_URL=void 0;const r=n(7056),i=n(4687),o=n(4968);t.CHAT_VERSE_CN_URL="https://chatverse.bytedance.net",t.CHAT_VERSE_US_URL="https://chatverse-us.byteintl.net",t.CHAT_VERSE_I18N_URL="https://chatverse.byteintl.net",t.CHAT_VERSE_US_PROD_URL="https://chatverse-us-prod.byteintl.net",t.CHAT_VERSE_I18N_PROD_URL="https://chatverse-prod.byteintl.net";let s,a=0;t.getChatverseHostByRegion=async function(){const e=Date.now();if(void 0===s||e-a>=6e5){const n=await(0,o.isProdEnv)();a=e;const c=await(0,i.getRegions)();s=c===r.Region.CN?t.CHAT_VERSE_CN_URL:c===r.Region.US?n?t.CHAT_VERSE_US_PROD_URL:t.CHAT_VERSE_US_URL:n?t.CHAT_VERSE_I18N_PROD_URL:t.CHAT_VERSE_I18N_URL}return s}},4968:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.isWSL=t.isSSHRemote=t.isProdEnv=t.isCommandRegistered=t.isICubeIDEExternalEnv=t.getIdeEnv=t.isICubeIDEEnv=t.IDE_ENV=void 0;const s=o(n(1398)),a=n(1398),c=n(8492);var u;function l(){return"desktop"===s.env.appHost}function d(){return!l()}async function f(){try{const e="icube.cloudide.getPlatform";if(await h(e)){const t=Date.now(),n=await a.commands.executeCommand(e);return c.logger.logInfo("getCloudIDEExEnv executeCommand cost:",Date.now()-t),"a0"===n||"MassCode"===n}}catch(e){c.logger.logError("getCloudIDEExEnv error:",e)}return!1}async function h(e){return(await a.commands.getCommands(!0)).includes(e)}!function(e){e.MERLIN_ENV="merlin",e.CLOUD_IDE_ENV="cloud_ide",e.LOCAL_IDE_ENV="local",e.CLOUD_IDE_EX_ENV="cloud_ide_ex",e.MARSCODE_DESKTOP="trae_desktop"}(u=t.IDE_ENV||(t.IDE_ENV={})),t.isICubeIDEEnv=d,t.getIdeEnv=async function(){return await f()?u.CLOUD_IDE_EX_ENV:d()?u.CLOUD_IDE_ENV:l()?u.MARSCODE_DESKTOP:u.LOCAL_IDE_ENV},t.isICubeIDEExternalEnv=f,t.isCommandRegistered=h,t.isProdEnv=async function(){return!0},t.isSSHRemote=function(){return s.env.remoteName?.startsWith("ssh")??!1},t.isWSL=function(){return s.env.remoteName?.startsWith("wsl")??!1}},2703:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.compareVscodeVersion=t.getVscodeVersion=void 0;const s=o(n(1398));function a(){return s.version.split(".").map((e=>parseInt(e)))}t.getVscodeVersion=a,t.compareVscodeVersion=function([e,t,n]){const[r,i,o]=a();return e>r?1:e<r?-1:t>i?1:t<i?-1:n>o?1:n<o?-1:0}},3489:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.language=void 0,function(e){const t={Ada:[".adb",".ads"],Agda:[".agda",".lagda"],Alloy:[".als"],ANTLR:[".g",".g4"],AppleScript:[".applescript",".scpt",".scptd"],Assembly:[".asm",".s",".inc",".wla"],AWK:[".awk"],Batchfile:[".bat",".cmd",".btm"],Bluespec:[".bsv"],C:[".c",".h"],Cpp:[".cpp",".hpp",".cc",".hh",".cxx",".hxx",".c++",".h++"],"C#":[".cs"],Clojure:[".clj",".cljs",".cljc"],CMake:[".cmake","CMakeLists.txt"],CoffeeScript:[".coffee"],"Common Lisp":[".lisp",".lsp",".cl",".l"],CSS:[".css",".less",".scss"],CUDA:[".cu",".cuh"],Dart:[".dart"],Dockerfile:["Dockerfile","dockerfile"],Elixir:[".ex",".exs"],Elm:[".elm"],"Emacs Lisp":[".el"],Erlang:[".erl",".hrl"],"F#":[".fs",".fsx",".fsi"],Fortran:[".f",".f90",".f95",".f03",".f08"],GLSL:[".glsl",".vert",".frag",".geom",".tesc",".tese",".comp"],Go:[".go"],Groovy:[".groovy"],Haskell:[".hs",".lhs"],HTML:[".html",".htm"],Idris:[".idr",".lidr"],Isabelle:[".thy"],Java:[".java"],"Java Server Pages":[".jsp"],JavaScript:[".js",".mjs"],Julia:[".jl"],Kotlin:[".kt",".kts"],Lean:[".lean"],"Literate CoffeeScript":[".litcoffee"],Lua:[".lua"],Makefile:["Makefile","makefile","GNUmakefile"],Maple:[".mpl",".maple"],Markdown:[".md",".markdown"],Mathematica:[".nb",".cdf",".m"],"Objective-C++":[".mm"],"Objective-C":[".m",".h"],OCaml:[".ml",".mli"],Pascal:[".pas",".p"],Perl:[".pl",".pm"],PHP:[".php",".php3",".php4",".php5",".php7",".phtml"],PowerShell:[".ps1",".psm1",".psd1"],"Protocol Buffer":[".proto"],Python:[".py",".pyw"],R:[".r",".R"],Racket:[".rkt",".rktl"],reStructuredText:[".rst"],RMarkdown:[".Rmd"],Ruby:[".rb"],Rust:[".rs"],SAS:[".sas"],Scala:[".scala"],Scheme:[".scm",".ss"],Shell:[".sh",".bash",".zsh"],Smalltalk:[".st"],Solidity:[".sol"],SPARQL:[".rq",".sparql"],SQL:[".sql"],Stan:[".stan"],"Standard ML":[".sml",".sig",".fun"],Stata:[".do",".ado"],Swift:[".swift"],SystemVerilog:[".sv",".svh"],Tcl:[".tcl"],Tcsh:[".tcsh",".csh"],TeX:[".tex",".sty",".cls",".bib"],Thrift:[".thrift"],TypeScript:[".ts",".tax"],TypeScriptX:[".tsx"],Verilog:[".v",".vh"],VHDL:[".vhd",".vhdl"],"Visual Basic":[".vb",".bas",".frm",".frx",".vbp",".vbw",".vbs"],XSLT:[".xsl",".xslt"],Yacc:[".y"],Zig:[".zig"],Yaml:[".yaml"]};e.getLanguage=function(e){switch(e.substring(e.lastIndexOf("."))){case".go":return"go";case".py":return"python";case".java":return"java";case".js":case".jsx":return"javascript";case".ts":case".tsx":return"typescript";case".cpp":case".cc":case".cxx":case".hpp":case".h":case".c++":case"hh":case".h++":return"cpp";case".m":return"objc";case".swift":return"swift";case".rs":return"rust";case".sql":return"sql";case".json":return"json";case".yml":case".yaml":return"yaml";case".md":case".markdown":case".mkd":case".mkdn":case".mkdown":case".ron":return"markdown";default:return""}},e.supportLanguage=function(e){for(let n in t){let r=t[n];for(let t of r)if(e.endsWith(t))return!0}return!1}}(t.language||(t.language={}))},8492:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.logger=void 0;const s=o(n(1398)),a=n(8851),c=n(4711);!function(e){let t=!1;e.init=function(e,n){function r(e){const t=function(){let e=s.workspace.getConfiguration("codeverse").get("loglevel");if("info"===e)return a.LogLevel.Info;if("error"===e)return a.LogLevel.Error;if("warn"===e)return a.LogLevel.Warning;if("verbose"===e)return a.LogLevel.Log;return a.LogLevel.Info}();c.LogHelper.setup(t,e)}t||(t=!0,s.workspace.onDidChangeConfiguration((()=>r())),r(n))},e.logFile=function(e){let t=function(e,t){const n=s.workspace.getConfiguration(e+".advanced");if(void 0!==n&&void 0!==n[t])return n[t]}(e,"logFile");return void 0!==t&&!0===t},e.outputChannel=function(){return c.LogHelper.outputChannel()},e.logInfo=function(e,...t){c.logger.info(e,"output",void 0,t)},e.logError=function(e,...t){c.logger.error(e,"output",void 0,t)}}(t.logger||(t.logger={}))},4594:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PluginSession=void 0;const r=n(6001),i=n(1408),o=n(8492),s=n(508),a=n(9954),c=n(4711);!function(e){let t;function n(){return t}e.id=n,e.refresh=async function(e,u,l){t=(0,r.v4)();const d=await s.globalContext.get(i.BaseExtensionAIClient).getClientInfo(e),f=await s.globalContext.get(i.BaseExtensionAIClient).getDeviceInfo(),h=await s.globalContext.get(a.BaseRegion).getRegions();c.slardarReporter.init("guest",d.channel,d.extensionVersion??"unknown",d.envId,d.isProd,u,h,d.sessionID??n(),d.ideVersion,f,l),o.logger.logInfo(`PluginSession.refresh: pluginSessionId:${t}, region:${h}`)},e.refreshUserInfo=async function(e,t,r,u,l){const d=await s.globalContext.get(i.BaseExtensionAIClient).getClientInfo(t);o.logger.logInfo(`PluginSession.refreshUserInfo: ${e.id}`),s.globalContext.get(i.BaseExtensionAIClient).getInstance()?.refreshUserInfo(e,l);const f=await s.globalContext.get(a.BaseRegion).getRegions(),h=await s.globalContext.get(i.BaseExtensionAIClient).getDeviceInfo();c.slardarReporter.init(e.id,d.channel,d.extensionVersion??"unknown",d.envId,d.isProd,r,f,d.sessionID??n(),d.ideVersion,h,u)}}(t.PluginSession||(t.PluginSession={}))},4687:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRegions=t.getCachedRegions=void 0;const r=n(7933),i=n(9954),o=n(508),s=n(8492);t.getCachedRegions=async function(){return o.globalContext.get(i.BaseRegion).getCachedRegions()},t.getRegions=async function(){const e=o.globalContext.get(i.BaseRegion);return void 0!==e?e.getRegions():(s.logger.logInfo("Can't get region without registerRegionProxy"),r.Region.cn)}},3155:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.secretStoreManager=void 0;t.secretStoreManager=new class{init(e){this.context=e}async getConfig(e){return this.context?.secrets.get(e)}storeConfig(e,t){this.context?.secrets.store(e,t)}}},1989:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.OffsetTracker=void 0;const s=o(n(1398)),a=n(8492);t.OffsetTracker=class{constructor(){this.offsetMap=new Map,s.workspace.onDidChangeTextDocument((async e=>{try{for(let[t,n]of this.offsetMap.entries()){const r=e.document,i=n.offset,o=n.position;if(e.document.uri.toString()===n.uri){for(const t of e.contentChanges)if(t.rangeOffset+t.rangeLength<=n.offset){const e=t.text.length-t.rangeLength;n.offset=n.offset+e}n.originOffset=i,n.originPosition=o;const s=r.positionAt(n.offset);n.position=s,this.offsetMap.set(t,n)}}}catch(e){a.logger.logInfo(`OffsetTracker error: ${e}`)}}))}add(e,t,n){const r=(new Date).getTime(),i=`${e}-${t}-${n.line}-${n.character}-${r}`;return this.offsetMap.set(i,{uri:e,originOffset:t,offset:t,originPosition:n,position:n}),i}get(e){return this.offsetMap.get(e)}delete(e){return this.offsetMap.delete(e)}resetUpdate(e,t,n){for(let[r,i]of this.offsetMap.entries())e===i.uri&&t<=i.originOffset&&i.originOffset<=n&&(i.offset=i.originOffset,i.position=i.originPosition,this.offsetMap.set(r,i))}}},2097:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.CodeContributionTracker=t.FILE_PATH_PATTERN=t.FILE_CONTENT_PATTERN=void 0;const s=o(n(1398)),a=n(4687),c=n(4606),u=n(6594),l=n(8680),d=n(6931),f=n(1408),h=n(6727),p=n(8492),g=n(508),_=n(742);t.FILE_CONTENT_PATTERN=["(DO NOT EDIT|do not modify|do not edit)","(G|g)enerated by","Free Software Foundation","This is a generated file\\.","# Autogenerated by Thrift Compiler","// Copyright \\(c\\) Microsoft Corporation\\. All rights reserved\\. Licensed under the MIT license\\.","// Type definitions for React"],t.FILE_PATH_PATTERN=["(Cargo\\.lock|(^|\\/)flake\\.lock$|Godeps\\/|npm-shrinkwrap\\.json|package-lock\\.json|(^Pods|\\/Pods)\\/)","^[Dd]ependencies/","(^|/)dist/","^deps/","(^|/)configure$","(^|/)config\\.guess$","(^|/)config\\.sub$","(^|/)aclocal\\.m4","(^|/)libtool\\.m4","(^|/)ltoptions\\.m4","(^|/)ltsugar\\.m4","(^|/)ltversion\\.m4","(^|/)lt~obsolete\\.m4","(^|/)dotnet-install\\.(ps1|sh)$","(^|/)cpplint\\.py","(^|/)node_modules/","(^|/)\\.yarn/releases/","(^|/)\\.yarn/plugins/","(^|/)\\.yarn/sdks/","(^|/)\\.yarn/versions/","(^|/)\\.yarn/unplugged/","(^|/)_esy$","(^|/)bower_components/","^rebar$","(^|/)erlang\\.mk","(^|/)Godeps/_workspace/","(^|/)testdata/","(^|/)\\.indent\\.pro","(\\.|-)min\\.(js|css)$","([^\\s]*)import\\.(css|less|scss|styl)$","(^|/)bootstrap([^/.]*)(\\..*)?\\.(js|css|less|scss|styl)$","(^|/)custom\\.bootstrap([^\\s]*)(js|css|less|scss|styl)$","(^|/)font-?awesome\\.(css|less|scss|styl)$","(^|/)font-?awesome/.*\\.(css|less|scss|styl)$","(^|/)foundation\\.(css|less|scss|styl)$","(^|/)normalize\\.(css|less|scss|styl)$","(^|/)skeleton\\.(css|less|scss|styl)$","(^|/)[Bb]ourbon/.*\\.(css|less|scss|styl)$","(^|/)animate\\.(css|less|scss|styl)$","(^|/)materialize\\.(css|less|scss|styl|js)$","(^|/)select2/.*\\.(css|scss|js)$","(^|/)bulma\\.(css|sass|scss)$","(^|/)vendors?/","(^|/)[Ee]xtern(als?)?/","(^|/)[Vv]+endor/","^debian/","(^|/)run\\.n$","(^|/)bootstrap-datepicker/","(^|/)jquery([^.]*)\\.js$","(^|/)jquery\\-\\d\\.\\d+(\\.\\d+)?\\.js$","(^|/)jquery\\-ui(\\-\\d\\.\\d+(\\.\\d+)?)?(\\.\\w+)?\\.(js|css)$","(^|/)jquery\\.(ui|effects)\\.([^.]*)\\.(js|css)$","(^|/)jquery.fn\\.gantt\\.js","(^|/)jquery\\.fancybox\\.(js|css)","(^|/)fuelux\\.js","(^|/)jquery\\.fileupload(-\\w+)?\\.js$","(^|/)jquery\\.dataTables\\.js","(^|/)bootbox\\.js","(^|/)pdf\\.worker\\.js","(^|/)slick\\.\\w+.js$","(^|/)Leaflet\\.Coordinates-\\d+\\.\\d+\\.\\d+\\.src\\.js$","(^|/)leaflet\\.draw-src\\.js","(^|/)leaflet\\.draw\\.css","(^|/)Control\\.FullScreen\\.css","(^|/)Control\\.FullScreen\\.js","(^|/)leaflet\\.spin\\.js","(^|/)wicket-leaflet\\.js","(^|/)\\.sublime-project","(^|/)\\.sublime-workspace","(^|/)\\.vscode/","(^|/)prototype(.*)\\.js$","(^|/)effects\\.js$","(^|/)controls\\.js$","(^|/)dragdrop\\.js$","(.*?)\\.d\\.ts$","(^|/)mootools([^.]*)\\d+\\.\\d+.\\d+([^.]*)\\.js$","(^|/)dojo\\.js$","(^|/)MochiKit\\.js$","(^|/)yahoo-([^.]*)\\.js$","(^|/)yui([^.]*)\\.js$","(^|/)ckeditor\\.js$","(^|/)tiny_mce([^.]*)\\.js$","(^|/)tiny_mce/(langs|plugins|themes|utils)","(^|/)ace-builds/","(^|/)fontello(.*?)\\.css$","(^|/)MathJax/","(^|/)Chart\\.js$","(^|/)[Cc]ode[Mm]irror/(\\d+\\.\\d+/)?(lib|mode|theme|addon|keymap|demo)","(^|/)shBrush([^.]*)\\.js$","(^|/)shCore\\.js$","(^|/)shLegacy\\.js$","(^|/)angular([^.]*)\\.js$","(^|\\/)d3(\\.v\\d+)?([^.]*)\\.js$","(^|/)react(-[^.]*)?\\.js$","(^|/)flow-typed/.*\\.js$","(^|/)modernizr\\-\\d\\.\\d+(\\.\\d+)?\\.js$","(^|/)modernizr\\.custom\\.\\d+\\.js$","(^|/)knockout-(\\d+\\.){3}(debug\\.)?js$","(^|/)docs?/_?(build|themes?|templates?|static)/","(^|/)admin_media/","(^|/)env/","(^|/)fabfile\\.py$","(^|/)waf$","(^|/)\\.osx$","\\.xctemplate/","\\.imageset/","(^|/)Carthage/","(^|/)Sparkle/","(^|/)Crashlytics\\.framework/","(^|/)Fabric\\.framework/","(^|/)BuddyBuildSDK\\.framework/","(^|/)Realm\\.framework","(^|/)RealmSwift\\.framework","(^|/)\\.gitattributes$","(^|/)\\.gitignore$","(^|/)\\.gitmodules$","(^|/)gradlew$","(^|/)gradlew\\.bat$","(^|/)gradle/wrapper/","(^|/)mvnw$","(^|/)mvnw\\.cmd$","(^|/)\\.mvn/wrapper/","-vsdoc\\.js$","\\.intellisense\\.js$","(^|/)jquery([^.]*)\\.validate(\\.unobtrusive)?\\.js$","(^|/)jquery([^.]*)\\.unobtrusive\\-ajax\\.js$","(^|/)[Mm]icrosoft([Mm]vc)?([Aa]jax|[Vv]alidation)(\\.debug)?\\.js$","(^|/)[Pp]ackages\\/.+\\.\\d+\\/","(^|/)extjs/.*?\\.js$","(^|/)extjs/.*?\\.xml$","(^|/)extjs/.*?\\.txt$","(^|/)extjs/.*?\\.html$","(^|/)extjs/.*?\\.properties$","(^|/)extjs/\\.sencha/","(^|/)extjs/docs/","(^|/)extjs/builds/","(^|/)extjs/cmd/","(^|/)extjs/examples/","(^|/)extjs/locale/","(^|/)extjs/packages/","(^|/)extjs/plugins/","(^|/)extjs/resources/","(^|/)extjs/src/","(^|/)extjs/welcome/","(^|/)html5shiv\\.js$","(^|/)[Tt]ests?/fixtures/","(^|/)[Ss]pecs?/fixtures/","(^|/)cordova([^.]*)\\.js$","(^|/)cordova\\-\\d\\.\\d(\\.\\d)?\\.js$","(^|/)foundation(\\..*)?\\.js$","(^|/)Vagrantfile$","(^|/)\\.[Dd][Ss]_[Ss]tore$","(^|/)inst/extdata/","(^|/)octicons\\.css","(^|/)sprockets-octicons\\.scss","(^|/)activator$","(^|/)activator\\.bat$","(^|/)proguard\\.pro$","(^|/)proguard-rules\\.pro$","(^|/)puphpet/","(^|/)\\.google_apis/","(^|/)Jenkinsfile$","(^|/)\\.gitpod\\.Dockerfile$","(^|/)\\.github/","(^|/)\\.obsidian/","(^|/)\\.teamcity/","(^|/)vendor/","(^|/)thrift_gen/","(^|/)node_modules/","(^|/)output/","(^|/)kitex_gen/","(^|/)\\.idea/","(^|/)deps/","(^|/)thrift-spi-repository/","(^|/)build/","(^|/)assets/","(^|/)dist/","(^|/)\\.","(^|/)_tobedeleted/","(^|/).*biz/rpc/.*((clients)|(rpc)|(thrift_gen))/","(^|/).*_context/infrastructure/rpc/.*((clients)|(rpc)|(thrift_gen))/","(^|/)package-lock\\.json$","(^|/)npm-shrinkwrap\\.json$","(^|/)yarn\\.lock$","(^|/)go\\.sum$","(^|/)go\\.mod$","(^|/)router_gen\\.go$","(^|/).*_smart_unit_test\\.go$","(^|/).*_tobedeleted$","(^|/)facade\\.go$","(^|/)idls\\.go$","(^|/)kite\\.go$",".*\\.json$",".*\\.prefab$",".*\\.asset$",".*\\.meta$",".*\\.unity$",".*\\.csv$",".*\\.dat$",".*\\.txt$",".*\\.rtf$",".*\\.log$",".*\\.onnx$",".*\\.pb$",".*\\.pbtxt$",".*\\.h5$",".*\\.keras$",".*\\.model$",".*\\.pt$",".*\\.pth$",".*\\.xml$",".*\\.pb\\.go$",".*\\.pb\\.cc$",".*\\.pb\\.h$",".*\\.anim$",".*\\.fbx$",".*\\.FBX$",".*\\.mat$",".*\\.playable$",".*\\.png$",".*\\.spriteatlas$",".*\\.asmdef$",".*\\.jpg$",".*\\.mp4$",".*\\.renderTexture$",".*\\.bundle$",".*\\.ttf$",".*\\.md$",".*\\.shadervariants$",".*\\.controller$",".*\\.signal$",".*\\.lighting$",".*\\.mesh$",".*\\.mine$",".*\\.wwu$",".*\\.wproj$","(^|/)GloryPacketCapture/","(^|/)third_deps/","(^|/)pnpm-lock\\.yaml/","(^|/)package-lock\\.json/","(^|/)yarn-lock\\.json/",".*\\.lock$",".*\\.toml$",".*\\.svg$",".*\\.npmignore$",".*\\.pyc$",".*\\.gen\\.go$",".*\\.lst$",".*\\.jar$",".*\\.gradle$",".*\\.pro$","(^|/)LICENSE$"];t.CodeContributionTracker=class{constructor(e){this.rangeTracker=new l.RangeTracker(e),c.gitTracker.onDidCommitEvent((e=>{if(!e.isBranchChange&&!e.isMerge){const t=this.getCommitState(e.isRevert,e.isRebase,e.isCommitChange);this.calculateCommitCodeContribution(e.repo,e.commitHash,t)}}))}getCommitState(e,t,n){return e?1:t?2:n?0:3}registerRange(e,t,n){this.rangeTracker.registerRange(e,t,n,!1)}async calculateCommitCodeContribution(e,t,n){const r=await(0,u.gitDiff)(e.rootUri.toString(),"HEAD^ HEAD",!0),i=e.state.workingTreeChanges.map((e=>e.originalUri.toString())),o=new Map;r.diffs.forEach((e=>{const t=(0,u.getLanguage)(e.fileUri);o.has(t)||o.set(t,[]),o.get(t)?.push(e)})),o.forEach((async(e,r)=>{let o=0,s=0,c=0,u=0,l=0,m=0,v=0,y=0;const b=e.map((async e=>{if(!i.includes(e.fileUri)&&this.hasGLFileExtension(e.fileUri)&&!await this.filterFileContent(e.fileUri)&&!this.filterFilePath(e.fileUri)){const[t,n,r,i]=this.rangeTracker.getLineCount(e.fileUri);let a=0,d=0,f=0;e.diffs.forEach((e=>{a+=e.newAddLines.length,d+=e.newAddTrimLines.length;const t=e.newContent;t&&(p.logger.logInfo("CodeCommit:"+t+","+e.oldContent),f+=t.length)})),u+=t,m+=n,l+=i,v+=r,y+=f,o+=a,s+=d,(t>0||n>0)&&(c+=a),this.rangeTracker.finishTacker(e.fileUri)}}));if(await Promise.all(b),o>0){const e={region:await(0,a.getCachedRegions)(),commit_lines:o,commit_lines_has_trim:s,commit_lines_has_accepted:c,origin_accept_lines_has_trim:l,accept_lines:m,origin_accept_lines:u,language_id:r,model:d.ModelManager.INSTANCE.current,all_commit_char_length:y,all_origin_char_length:v,commit_hash:t,commit_state:n,modified_fraction_line_count:0,modified_fraction_line_count_has_trim:0,modified_fraction_char_length:0,metrics_duration:0};await(0,_.isLogin)()&&g.globalContext.get(f.BaseExtensionAIClient).getInstance()?.telemetryAction(h.CompletionAction.CommitCode,e)}}))}hasGLFileExtension(e){for(const t of u.CommitFileFilter)if(e.endsWith(t))return!0;return!1}filterFilePath(e){for(const n of t.FILE_PATH_PATTERN)if(new RegExp(n).test(e))return!0;return!1}async filterFileContent(e){const n=await async function(e){let t,n;const r=new Promise(((e,r)=>{t=e,n=r}));return s.workspace.fs.readFile(s.Uri.parse(e)).then((e=>{let n="";const r=(new TextDecoder).decode(e),i=r.split(/\r?\n/),o=i.length<10?i.length:10;for(let e=0;e<o;e++)n+=i[e];t(r)})).then((e=>{n(e)})),r}(e);for(const e of t.FILE_CONTENT_PATTERN)if(new RegExp(e).test(n))return!0;return!1}}},3263:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CursorHistoryManager=void 0;const r=n(4657),i=n(8492);class o{constructor(){this.lineCursorHistory=new r.LRUCacheMap(100),this.fileCursorHistory=new r.LRUCacheMap(100)}add(e,t,n){const r=e.uri.toString(),i=this.lineCursorHistory.get(r)??new Map;let o=i.get(t)??{line:t,clickCount:0,timestamp:Date.now()};o.clickCount++,o.timestamp=Date.now(),i.set(t,o),this.lineCursorHistory.set(r,i),this.fileCursorHistory.set(r,{uri:r,doc:e,clickCount:(this.fileCursorHistory.get(r)?.clickCount??0)+1,lastClickTime:n})}getDocs(){const e=[];for(const t of this.fileCursorHistory.keys()){const n=this.fileCursorHistory.get(t);void 0!==n&&e.push(n)}return e}sortedDocsByClickTime(){return this.getDocs().sort(((e,t)=>t.lastClickTime-e.lastClickTime)).map((e=>e.doc))}sortedDocsByClickCount(){return this.getDocs().sort(((e,t)=>t.clickCount===e.clickCount?t.lastClickTime-e.lastClickTime:t.clickCount-e.clickCount)).map((e=>e.doc))}getCursorHistories(){const e=[];for(const[t,n]of this.lineCursorHistory.entries())e.push({uri:t,lineHistory:[...n.values()]});return i.logger.logInfo(`getCursorHistories: ${JSON.stringify(e)}`),e}}t.CursorHistoryManager=o,o.INSTANCE=new o},6028:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.EditorTracker=void 0;const s=n(6727),a=o(n(1398)),c=n(4657),u=n(3881),l=n(3489),d=n(3263),f=n(4606),h=n(6594),p=n(8680),g=n(1347),_=n(742),m=n(8492);class v{constructor(){this.preLineRanges=[],this.codingActionMap=new Map,this.repoMap=new Map,this.editFileHistory=new c.LRUCacheMap(20)}init(){this.rangeTracker=new p.RangeTracker(void 0),this.gitDiffTracker=new f.GitDiffTracker,g.gitExtensionManager.executeTask((e=>{"initialized"===e?.state?this.initRepos(e):e?.onDidChangeState((t=>{"initialized"===t&&this.initRepos(e)}))}));for(const e of a.window.visibleTextEditors){const t=e.document,n=t.uri.toString();"unknown"!==(0,h.getLanguage)(n)&&this.openFile(t)}a.workspace.onDidOpenTextDocument((e=>{const t=e.uri.toString();"unknown"!==(0,h.getLanguage)(t)&&this.openFile(e)})),a.workspace.onDidCloseTextDocument((e=>{const t=e.uri.toString();"unknown"!==(0,h.getLanguage)(t)&&this.closeFile(e)})),a.window.onDidChangeTextEditorSelection((e=>{const t=e.textEditor.selection.active,n=e.textEditor.selection,r=e.kind,i=e.textEditor.document,o=i.uri.toString(),s=(0,h.getLanguage)(o);if(!t||!i||"unknown"===s)return;if(e&&e.selections)for(const t of e.selections)d.CursorHistoryManager.INSTANCE.add(e.textEditor.document,t.anchor.line,Date.now()),d.CursorHistoryManager.INSTANCE.add(e.textEditor.document,t.active.line,Date.now());const a=this.preSelection?.active;if((0,h.isSelect)(this.preSelection)?(0,h.isSelectionChange)(n,this.preSelection):(0,h.isNewLine)(t,a)){let e=!1;this.preLineRanges.forEach((t=>{const n=this.rangeTracker?.unregisterRange(o,t);if(n){const s=t.start.line;if(s<i.lineCount){const t=i.lineAt(s).range,a=i.getText(t);e=this.saveCodingAction(i,o,n),this.saveSelectAction(i,o,s,a,r)}}})),this.preLineRanges=[];const t=n.start.line,s=n.end.line;for(let n=t;n<=s;n++){const t=i.lineAt(n).range,r=i.getText(t);this.preLineRanges.push(t),this.rangeTracker?.registerLine(i.uri.toString(),t,r,e)}}this.preSelection=n}))}initGitDiffTracker(e){setInterval((()=>{if(e){function t(e,n=6e4,r=10){if(r>0){e()||setTimeout((()=>{t(e,n,r-1)}),n)}}t((()=>this.reportGitDiff(e)))}}),18e5),e&&this.reportGitDiff(e)}initRepos(e){if(this.repoMap.size>0)return;this.initGitDiffTracker(e);e.repositories.forEach((e=>{const t=e.state;if(t.remotes&&t.remotes.length>0){const n=t.remotes[0];this.repoMap.set(e.rootUri.toString(),{url:n.pushUrl,commitId:t.HEAD.commit,path:e.rootUri.toString()})}}))}acceptCompletion(e,t,n,r){const i={file:e.url,line:e.position.line,resp_id:e.respId,show_timestamp:r,recommend_code:e.completionText.split("\n"),line_prefix:t,line_suffix:n};this.addCodingAction({timestamp:Date.now(),type:s.ActionTypeEnum.Accept,data:i,language:e.language})}rejectCompletion(e,t,n,r){const i={file:e.url,line:e.position.line,resp_id:e.respId,show_timestamp:r,recommend_code:e.completionText.split("\n"),line_prefix:t,line_suffix:n};this.addCodingAction({timestamp:Date.now(),type:s.ActionTypeEnum.Reject,data:i,language:e.language})}saveSelectAction(e,t,n,r,i){const o=r;i&&i!==a.TextEditorSelectionChangeKind.Mouse||(0,h.isEmptyLine)(o)||this.addCursorAction(t,n,o,(0,h.getLanguage)(t))}saveCodingAction(e,t,n){let r=!1;if(n.action===p.RangeAction.None)return r;if(n.action===p.RangeAction.Modify||n.action===p.RangeAction.Create){const i=e.getText(n.modifyRange).split("\n"),o=i.length;for(let s=0;s<o;s++){i[s];if(0===s){const r=n.originRange.start.line,i=e.lineAt(r).range,o=n.originText,s=e.getText(i);n.action===p.RangeAction.Create||(0,h.isEmptyLine)(o)?this.addNewLineAction(t,r,s,(0,h.getLanguage)(t)):n.action===p.RangeAction.Modify&&o!==s&&this.addModifyAction(t,r,o,s,(0,h.getLanguage)(t))}else if(s>0&&s<o-1){const r=n.originRange.start.line+s;try{const n=e.lineAt(r).range;this.addNewLineAction(t,r,e.getText(n),(0,h.getLanguage)(t))}catch(e){}}else s===o-1&&(r=!0)}}else n.action===p.RangeAction.Delete&&this.addDeleteAction(t,n,(0,h.getLanguage)(t));return r}addDeleteAction(e,t,n){const r={file:e,line:t.originRange.start.line,code:t.originText};this.addCodingAction({timestamp:Date.now(),type:s.ActionTypeEnum.DeleteLine,data:r,language:n})}addModifyAction(e,t,n,r,i){const o={file:e,line:t,code_before_modify:n,code_after_modify:r};n!==r&&this.addCodingAction({timestamp:Date.now(),type:s.ActionTypeEnum.ModifyLine,data:o,language:i})}addNewLineAction(e,t,n,r){const i={file:e,line:t,code:n};this.addCodingAction({timestamp:Date.now(),type:s.ActionTypeEnum.NewLine,data:i,language:r})}addCursorAction(e,t,n,r){const i={file:e,line:t,code:n};this.addCodingAction({timestamp:Date.now(),type:s.ActionTypeEnum.Cursor,data:i,language:r})}openFile(e){const t={file:e.uri.toString()};this.addCodingAction({timestamp:Date.now(),type:s.ActionTypeEnum.OpenFile,data:t,language:(0,h.getLanguage)(e.uri.toString())})}closeFile(e){const t={file:e.uri.toString()};this.addCodingAction({timestamp:Date.now(),type:s.ActionTypeEnum.CloseFile,data:t,language:(0,h.getLanguage)(e.uri.toString())})}reportGitDiff(e){if(this.hasDirtyDocument()||!this.gitDiffTracker)return m.logger.logInfo("editTracker","hasDirtyDocument: cancel reportGitDiff"),!1;m.logger.logInfo("editTracker reportGitDiff");return e.repositories.forEach((async e=>{const t=e.state;if(t.remotes&&t.remotes.length>0){const n=t.remotes[0],r=Date.now(),i=await(this.gitDiffTracker?.generateGitDiffs(e.rootUri.toString(),r))??"",o=4*i.length<3670016;if(n&&n.fetchUrl&&t.HEAD&&t.HEAD.commit){(0,_.getUserName)(),n.fetchUrl,t.HEAD.commit,await(0,u.getChatverseHostByRegion)()}}})),!0}hasDirtyDocument(){for(const e of a.window.visibleTextEditors){if(e.document.isDirty)return!0}return!1}addCodingAction(e){const t=this.findRepo(e);if(e.type===s.ActionTypeEnum.NewLine||e.type===s.ActionTypeEnum.ModifyLine||e.type===s.ActionTypeEnum.DeleteLine){const t=e.data;this.editFileHistory.set(t.file,t.file)}if(t){const n=this.codingActionMap.get(t.url);n?n.push(e):this.codingActionMap.set(t.url,[e])}}findRepo(e){let t;return this.repoMap.forEach(((n,r)=>{const i=e.data;if(void 0!==i.file&&i.file.includes(r))return t=n,void(i.file=i.file.replace(r,""))})),t}getEditHistoryAndFormatString(e,t){const n=new Array,r=this.gitDiffTracker?.getGitDiffs()??new Map;function i(r){if(!l.language.supportLanguage(r.fileUri))return;const i=new Array,o=-1!==e.indexOf(r.fileUri)?t.line:-1;i.push(`file: ${r.fileUri}`),r.diffs.forEach((e=>{const t=e.newAddLines,n=e.newContent.split("\n"),r=e.newAddLines;for(let e=0;e<t.length;e++){const t=n[e],s=r[e];!(0,h.isEmptyLine)(t)&&s>o&&i.push(`line ${s} + ${n[e]}`)}})),i.length>1&&n.push(...i)}let o=new Array,s=new Array;return this.editFileHistory.forEach(((e,t)=>{const n=function(e){let t;if(r.forEach(((n,r)=>{const i=r,o=n.find((t=>t.fileUri===i+e));o&&(t=o)})),t)return{fileUri:e,diffs:t.diffs}}(t);n&&o.push(n)})),r.forEach(((e,t)=>{const n=t;e.forEach((e=>{const t=e.fileUri,r=o.find((e=>n+e.fileUri===t));r||s.push({fileUri:t.replace(n.toString(),""),diffs:e.diffs})}))})),s=s.reverse(),s.forEach((e=>{i(e)})),o.forEach((e=>{i(e)})),n}}t.EditorTracker=v,v.INSTANCE=new v},1347:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.gitExtensionManager=t.GitExtensionManager=void 0;const i=r(n(1398)),o=n(8492);class s{constructor(){this.initTasks=[],this.count=0,this.isInitialized=!1}init(){const e=setInterval((()=>{(this.tryInit()||++this.count>5)&&(this.isInitialized=!0,o.logger.logInfo("init git extension "+(this.count>5?"failed":"success")),clearInterval(e))}),2e3)}tryInit(){try{const e=i.default.extensions.getExtension("vscode.git")?.exports;if(!e)return!1;this.api=e?.getAPI(1);for(const e of this.initTasks)e(this.api);return!0}catch(e){o.logger.logInfo(`init git extension error: ${e}`)}return!1}executeTask(e){this.isInitialized?e(this.api):this.initTasks.push(e)}}t.GitExtensionManager=s,t.gitExtensionManager=new s},4606:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.gitTracker=t.GitDiffTracker=t.GitTracker=t.gitExtensionManager=void 0;const s=o(n(1398)),a=n(6594),c=n(1398),u=n(1149),l=n(1347),d=n(8492);var f=n(1347);Object.defineProperty(t,"gitExtensionManager",{enumerable:!0,get:function(){return f.gitExtensionManager}});class h{constructor(){function e(e,t){e?.onDidOpenRepository((e=>{d.logger.logInfo("gitExtension onDidOpenRepository","initialized"),e.state.onDidChange((()=>{t.fire(e)}))})),e.repositories.forEach((e=>{d.logger.logInfo("gitExtension repo: "+e.rootUri,"initialized"),t.fire(e),e.state.onDidChange((()=>{t.fire(e)}))})),e.registerPostCommitCommandsProvider}this.repositoryStateEventEmitter=new s.EventEmitter,this._onRepositoryStateChange=this.repositoryStateEventEmitter.event,this.onDidCommitEventEmitter=new s.EventEmitter,this._onDidCommitEvent=this.onDidCommitEventEmitter.event,this.repoStates=new Map,this._onRepositoryStateChange((async e=>{const t=this.repoStates.get(e.rootUri.toString()),n=e.state.HEAD,r=e.state.workingTreeChanges.length;if(this.repoStates.set(e.rootUri.toString(),[n.name,n.commit,r]),!t)return;const i=t[1]!==n.commit,o=t[0]!==n.name,s=t[2]!==e.state.workingTreeChanges.length;if(i){const n=await e.getCommit(e.state.HEAD.commit);let r=!0;t[1]&&n.parents.length>0&&(r=n.parents[0]===t[1],t[1]||d.logger.logInfo("recheckCommitChange: lastState is empty, "+n.parents[0]));let i=n.message.startsWith("Merge")||e.state.mergeChanges.length>0,c=/^Revert\s"[\s\S]*"\s*\n\s*This reverts commit \w+./.test(n.message),u=void 0!==e.state.rebaseCommit,l=!1;const f=await(0,a.gitRelog)(e.rootUri.fsPath,"-1");f.reflog.includes("(merge)")&&(i=!0),f.reflog.includes("revert:")&&(c=!0),f.reflog.includes("rebase")&&(u=!0),r&&!s&&f.reflog?.includes("(cherry-pick)")&&(l=!0);const h={repo:e,commitHash:n.hash,isBranchChange:o,isMerge:i,isWorkTreeChange:s,isCommitChange:r,isRevert:c,isRebase:u,isCherryPick:l};d.logger.logInfo("_onRepositoryStateChange: "+n.hash+","+n.parents[0]),this.onDidCommitEventEmitter.fire(h)}})),l.gitExtensionManager.executeTask((t=>{"initialized"===t?.state?(d.logger.logInfo("gitExtension executeTask","initialized"),e(t,this.repositoryStateEventEmitter)):t?.onDidChangeState((n=>{"initialized"===n?(d.logger.logInfo("gitExtension executeTask onDidChangeState","initialized"),e(t,this.repositoryStateEventEmitter)):d.logger.logInfo("gitExtension uninitialized","uninitialized")}))}))}get onDidCommitEvent(){return this._onDidCommitEvent}get onRepositoryStateChange(){return this._onRepositoryStateChange}}t.GitTracker=h;t.GitDiffTracker=class{constructor(){this.diffCache=new Map,this.diffSnapshot=new Map,this.snapshotMap=new Map,this.modifiedFiles=new Set,this.diffMatchPatch=new u.DiffMatchPatch,c.workspace.onDidChangeTextDocument((e=>{e.contentChanges.forEach((t=>{this.modifiedFiles.add(e.document.uri.toString())}))})),l.gitExtensionManager.executeTask((e=>{"initialized"===e?.state?this.scheduleDiff(e):e?.onDidChangeState((t=>{"initialized"===t&&this.scheduleDiff(e)}))}))}async scheduleDiff(e){setInterval((async()=>{const t=e.repositories.map((async e=>this.refreshGitDiff(e.rootUri.toString())));await Promise.all(t)}),1e4)}async refreshGitDiff(e){const t=await(0,a.gitDiff)(e,"HEAD",!1);return this.diffCache.set(e,t.diffs),t}getGitDiffs(){return new Map(this.diffCache)}getSnapshotType(e){return this.snapshotMap.get(e)?.type??"git"}getSnapshotTimestamp(e){return this.snapshotMap.get(e)?.time??-1}async generateGitDiffs(e,t){const n=await(0,a.gitDiff)(e,"HEAD",!0),r=new Array;return n.diffs.forEach((e=>{let t,n;const i=new Promise(((e,r)=>{t=e,n=r}));r.push(i),s.workspace.fs.readFile(c.Uri.parse(e.fileUri)).then((n=>{const r=(new TextDecoder).decode(n);this.diffSnapshot.set(e.fileUri,r),t()})).then((e=>{n(e)}))})),await Promise.all(r),this.modifiedFiles.clear(),this.snapshotMap.set(e,{type:"git",time:t}),n.diffContent}async generateFileDiff(e){let t="";const n=new Map,r=new Array;for(const e of this.modifiedFiles)try{const i=(0,a.findRepository)(e);if(i){let o="";try{o=await this.getFileSnapshot(e)}catch(e){}const s=await this.getFileContent(e),c=this.diffMatchPatch.patch_make(o,s),u=this.diffMatchPatch.patch_toText(c);if(!(0,a.isEmptyLine)(u)){const n="diff "+e.replace(i.rootUri.toString(),"")+"\n"+u;t=""===t?n:t+"\n"+n}n.set(e,s),r.push(i.rootUri.toString())}}catch(e){}return this.diffSnapshot=new Map([...this.diffSnapshot,...n]),r.forEach((t=>{this.snapshotMap.set(t,{type:"snapshot",time:e})})),this.modifiedFiles.clear(),t}async getFileSnapshot(e){const t=this.diffSnapshot.get(e);if(t)return t;const n=(0,a.findRepository)(e);return n?(0,a.gitShowByHEAD)(n,e.replace(n.rootUri.toString(),"")):Promise.reject(new Error("Couldn't find repository"))}getFileContent(e){for(const t of s.window.visibleTextEditors){const n=t.document;if(n.uri.toString()===e)return Promise.resolve(n.getText())}let t,n;const r=new Promise(((e,r)=>{t=e,n=r}));return s.workspace.fs.readFile(c.Uri.parse(e)).then((e=>{const n=(new TextDecoder).decode(e);t(n)}),(e=>{n(e)})),r}},t.gitTracker=new h},6594:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.gitRelog=t.gitDiff=t.getFileContent=t.getDiffFiles=t.gitShowByHEAD=t.findRepository=t.escapeSpecialChars=t.getPrefixAndSuffix=t.getLanguage=t.isSelect=t.isSelectionChange=t.isNewLine=t.isEmptyLine=t.CommitFileFilter=t.Queue=void 0;const s=o(n(1398)),a=n(322),c=n(1347),u=n(508),l=n(1408),d=n(9836);function f(){return a.NeighborFileManager.INSTANCE.getRecentAccessFiles().map((e=>s.workspace.asRelativePath(s.Uri.parse(e)).toString()))}t.Queue=class{constructor(e){this.elements=new Array,this._size=e}push(e){return null!==e&&(void 0===this._size||isNaN(this._size)||this.elements.length===this._size&&this.pop(),this.elements.unshift(e),!0)}pop(){return this.elements.pop()}peekLast(){return this.elements.length>0?this.elements[0]:void 0}peekFirst(){return this.elements.length>0?this.elements[this.elements.length-1]:void 0}size(){return this.elements.length}empty(){return 0===this.size()}clear(){this.elements=[]}toArray(){return this.elements.slice()}filter(e){this.elements=this.elements.filter(e)}},t.CommitFileFilter=[".ts",".js",".go",".py",".java",".kt",".kts",".cpp",".c",".swift",".m",".mm",".rs",".scala","sql",".html",".cs",".groovy",".tsx",".jsx",".vue",".css",".less",".scss"],t.isEmptyLine=function(e){return/^[\s\t]*$/.test(e)},t.isNewLine=function(e,t){return e.line!==t?.line},t.isSelectionChange=function(e,t){return e.start!==t?.start||e.end!==t.end},t.isSelect=function(e){return!!e&&!e.isEmpty},t.getLanguage=function(e){switch(e.substring(e.lastIndexOf("."))){case".go":return"go";case".py":return"python";case".java":return"java";case".kt":case".kts":return"kotlin";case".js":return"javascript";case".jsx":return"javascriptreact";case".ts":return"typescript";case".tsx":return"typescriptreact";case".cpp":case".cc":case".cxx":case".hpp":case".h":case".c++":case"hh":case".h++":return"cpp";case".m":return"objc";case".swift":return"swift";case".rs":return"rust";case".sql":return"sql";case".json":return"json";case".yml":case".yaml":return"yaml";case".md":case".markdown":case".mkd":case".mkdn":case".mkdown":case".ron":return"markdown";default:return"unknown"}},t.getPrefixAndSuffix=function(e,t){const n=e.lineAt(t.line);return[n.text.substring(0,t.character),n.text.substring(t.character)]},t.escapeSpecialChars=function(e){return e.replace(/[\\"'\n\r\t]/g,(e=>{switch(e){case"\\":return"\\\\";case'"':return'\\"';case"'":return"\\'";case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t";default:return e}}))},t.findRepository=function(e){c.gitExtensionManager.executeTask((t=>t?.repositories.find((t=>-1!==e.indexOf(t.rootUri.toString())))))},t.gitShowByHEAD=async function(e,t){return e.show("HEAD",t)},t.getDiffFiles=f,t.getFileContent=async function(e){for(const t of s.window.visibleTextEditors){const n=t.document;if(n.uri.toString()===e)return Promise.resolve(n.getText())}let t,n;const r=new Promise(((e,r)=>{t=e,n=r}));return s.workspace.fs.readFile(s.Uri.parse(e)).then((e=>{const n=(new TextDecoder).decode(e);t(n)}),(e=>{n(e)})),r},t.gitDiff=function(e,t,n){return new Promise(((r,i)=>{const o=[],s=e.startsWith("file://"),a=s?e.replace("file://",""):e;let c;if(n)c=`git diff ${t}`;else{c=0===f().length?`git diff ${t}`:`git diff -- ${f().join(" ")} ${t}`}const h=c.split(" "),p={command:h[0],cwd:a,arguments:h.slice(1)};u.globalContext.get(l.BaseExtensionAIClient).getInstance()?.sendRequest(d.ProcessExecRequest.type,p).then((e=>{const{stdout:t,stderr:n,error:c}=e;if(c&&n)return void i(new Error(`exec git diff error: ${n}`));const u=t.split("\n");let l="",d="",f="",h=-1,p=[],g=-1,_=[],m=[],v=-1,y=[];function b(){if(-1!==h){const e={oldContent:d,newContent:f,startLine:h,oldDeleteLines:p,newAddLines:_,newAddTrimLines:m};y.push(e)}d="",f="",p=[],_=[],m=[]}for(let e=0;e<u.length;e++){const t=u[e];if(t.startsWith("diff --git")){""!==l&&(b(),o.push({diffs:y,fileUri:(s?"file://":"")+a+"/"+l}));l=t.split(" ")[2].replace("a/",""),y=[]}else if(t.startsWith("+++"));else if(t.startsWith("---"));else if(t.startsWith("index"));else if(t.startsWith("@@ ")){b();const e=t.split(" ");h=Number(e[1].split(",")[0].replace("-","")),g=h,v=h}else if(t.startsWith("-"))d=d+t.substring(1)+"\n",g++,p.push(g);else if(t.startsWith("+")){const e=t.substring(1);f=f+e+"\n",v++,_.push(v),e.trim().length>0&&m.push(v)}else g++,v++}if(-1!==h){const e={oldContent:d,newContent:f,startLine:h,oldDeleteLines:p,newAddLines:_,newAddTrimLines:m};y.push(e)}""!==l&&o.push({diffs:y,fileUri:(s?"file://":"")+a+"/"+l}),r({diffs:o,diffContent:t})}))}))},t.gitRelog=function(e,t){return new Promise(((n,r)=>{const i=e.replace("file://",""),o=`git reflog ${t}`.split(" "),s={command:o[0],cwd:i,arguments:o.slice(1)};u.globalContext.get(l.BaseExtensionAIClient).getInstance()?.sendRequest(d.ProcessExecRequest.type,s).then((e=>{const{stdout:t,stderr:i,error:o}=e;o?r(o):n({reflog:t.trim()})}))}))}},8680:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RangeColorizer=t.findNewlineSizeAndOffset=t.calRangeModify=t.calRangeEndOffset=t.rangesUnder=t.lineModify=t.rangesModify=t.lineDelete=t.rangesDelete=t.rangesIntersect=t.RangeCache=t.RangeAction=t.RangeTracker=void 0;const r=n(1398),i=n(6594);var o;t.RangeTracker=class{constructor(e){this.rangeCache=new s(e),r.workspace.onDidChangeTextDocument((e=>{e.contentChanges.forEach((t=>{this.updateRange(e.document.uri.toString(),t.range,t.rangeOffset,t.rangeLength,t.text)}))})),this.rangeCache.decorationColor()}registerRange(e,t,n,r){const s=n.length,a=(0,i.escapeSpecialChars)(n);this.rangeCache.addRange(e,t,a,n,s,!1,r?o.Create:o.None)}registerLine(e,t,n,r){const s=n.length,a=(0,i.escapeSpecialChars)(n);this.rangeCache.addRange(e,t,a,n,s,!0,r?o.Create:o.None)}unregisterRange(e,t){return this.rangeCache.removeRange(e,t)}updateRange(e,t,n,r,i){const s=this.rangeCache.getRanges(e);if(s){for(let a=0;a<s.length;a++){const h=s[a];try{h.action!==o.Delete&&((h.isLine?u(h.modifyRange,t,i):c(h.modifyRange,t,i))?(this.rangeCache.deleteRange(e,t,h),h.action=o.Delete):(h.isLine?d(h.modifyRange,t):l(h.modifyRange,t))?(this.rangeCache.modifyRangeContent(e,t,h,n,r,i),h.action!==o.Create&&(h.action=o.Modify)):f(h.modifyRange,t)&&(this.rangeCache.offsetRange(h,t,i),h.action=o.Move))}catch(e){}}this.rangeCache.setCache(e,s)}if(i.length>1){const n=p(t,i);this.rangeCache.pasteRangeForRange(e,n)}this.rangeCache.decorationColor()}finishTacker(e){this.rangeCache.clear(e)}getLineCount(e){const t=this.rangeCache.getRanges(e);let n=0,r=0,i=0,s=0;t?.forEach((e=>{if(e.action!==o.Delete){const t=e.originRange,o=e.modifyRange,a=t.end.line-t.start.line+1,c=o.end.line-o.start.line+1;n+=a,i+=c;const u=e.originText,l=e.originAcceptText;u&&(s+=e.originTextLength,r+=this.getLineCountWithTrimEmptyLine(l))}}));const a=this.rangeCache.getDeleteRanges(e);return a?.forEach((e=>{const t=e.originRange,r=t.end.line-t.start.line+1;n+=r})),[n,i,s,r]}trimEmptyLines(e){let t=e.split(/\r?\n/);return t=t.filter((e=>e.trim().length>0)),t}getLineCountWithTrimEmptyLine(e){const t=this.trimEmptyLines(e);return t&&t.length>0?t.length:0}clearRanges(e){this.rangeCache.clear(e)}},function(e){e.None="None",e.Modify="Modify",e.Move="Move",e.ModifyMove="ModifyMove",e.Delete="Delete",e.Create="Create",e.Paste="Paste"}(o=t.RangeAction||(t.RangeAction={}));class s{constructor(e){this.workspaceState=e,this.ranges=new Map,this.deletedRanges=new Map,this.rangeColorizer=new _,this.getAllCache().then((e=>{this.ranges=e,this.decorationColor()})).catch((e=>{})),this.getAllDeletedRanges().then((e=>{this.deletedRanges=e})).catch((e=>{}))}addRange(e,t,n,r,i,s,a){let c=this.ranges.get(e);c||(c=[]),c.push({originRange:t,modifyRange:t,action:a||o.None,isLine:s,originText:n,originAcceptText:r,originTextLength:i}),this.setCache(e,c)}removeRange(e,t){const n=this.ranges.get(e);if(!n)return;let r;for(let e=0;e<n.length;e++){n[e].originRange.isEqual(t)&&(r=n.splice(e,1))}return this.setCache(e,n),r?r[0]:r}setCache(e,t){this.ranges.set(e,t);const n=JSON.stringify(t);this.workspaceState?.update(this.rangeCacheKey(e),n)}setDeletedRanges(e,t){this.deletedRanges.set(e,t);const n=JSON.stringify(t);this.workspaceState?.update(this.deleteRangeCacheKey(e),n)}rangeCacheKey(e){return"range-cache-"+e}deleteRangeCacheKey(e){return"delete-range-cache-"+e}getAllCache(){return new Promise(((e,t)=>{const n=new Map;this.workspaceState?.keys()?.forEach((e=>{if(e.startsWith("range-cache-")){const t=e.replace("range-cache-",""),i=JSON.parse(this.workspaceState?.get(e))?.map((e=>({originRange:new r.Range(e.originRange[0].line,e.originRange[0].character,e.originRange[1].line,e.originRange[1].character),modifyRange:new r.Range(e.modifyRange[0].line,e.modifyRange[0].character,e.modifyRange[1].line,e.modifyRange[1].character),action:e.action})));n.set(t,i)}})),e(n)}))}getAllDeletedRanges(){return new Promise(((e,t)=>{const n=new Map;this.workspaceState?.keys()?.forEach((e=>{if(e.startsWith("delete-range-cache-")){const t=e.replace("delete-range-cache-",""),i=JSON.parse(this.workspaceState?.get(e))?.map((e=>({originRange:new r.Range(e.originRange[0].line,e.originRange[0].character,e.originRange[1].line,e.originRange[1].character),modifyRange:new r.Range(e.modifyRange[0].line,e.modifyRange[0].character,e.modifyRange[1].line,e.modifyRange[1].character),action:e.action,lineOffset:e.lineOffset,textOffset:e.textOffset,deleteRange:new r.Range(e.deleteRange[0].line,e.deleteRange[0].character,e.deleteRange[1].line,e.deleteRange[1].character)})));n.set(t,i)}})),e(n)}))}deleteCache(e){return this.ranges.delete(e),new Promise(((t,n)=>{this.workspaceState?.update(this.rangeCacheKey(e),null),t()}))}deleteDeletedCache(e){return this.deletedRanges.delete(e),new Promise(((t,n)=>{this.workspaceState?.update(this.deleteRangeCacheKey(e),null),t()}))}getRanges(e){return this.ranges.get(e)}getDeleteRanges(e){return this.deletedRanges.get(e)}clear(e){this.deleteCache(e),this.deleteDeletedCache(e)}findIntersectingRanges(e,t){const n=this.getRanges(e);if(!n)return[];const r=[];for(const e of n)a(e.modifyRange,t)&&r.push(e);return r}pasteRangeForRange(e,t){const n=t.end.line-t.start.line,i=0===n?t.end.character-t.start.character:t.end.character,s=this.deletedRanges.get(e);let a;if(s){for(let e=0;e<s.length;e++){const t=s[e],r=t.deleteRange.end.line-t.deleteRange.start.line,o=0===r?t.deleteRange.end.character-t.deleteRange.start.character:t.deleteRange.end.character;if(n===r&&i===o){a=t,s.splice(e,1);break}}this.setDeletedRanges(e,s)}if(a){const n=a.modifyRange.end.line-a.modifyRange.start.line,i=a.modifyRange.end.character-a.modifyRange.start.character,s=t.start.line+a.lineOffset;let c=0;const u=a.originText;u&&(c=u.length),this.addRange(e,new r.Range(new r.Position(s,t.start.character+a.textOffset),new r.Position(s+n,0===n?t.start.character+a.textOffset+i:a.modifyRange.end.character)),u,u,c,a.isLine,o.Paste)}return a}deleteRange(e,t,n){const r=this.deletedRanges.get(e)??[],i=n.modifyRange.start.line-t.start.line,o=0===i?n.modifyRange.start.character-t.start.character:0,s=n.originText;let a=0;s&&(a=s.length),r.push({originRange:n.originRange,modifyRange:n.modifyRange,action:n.action,isLine:n.isLine,lineOffset:i,textOffset:o,deleteRange:t,originText:s,originAcceptText:s,originTextLength:a})}modifyRangeContent(e,t,n,i,o,s){const a=t.end.line-t.start.line,c=h(t),[u,l]=g(s);let d,f;const p=u-a<0?t.start.character:0,_=l-c-(u-a>0?t.end.character:0)+p,m=u-a;n.modifyRange.start.isBeforeOrEqual(t.start)&&n.modifyRange.end.isAfterOrEqual(t.end)?(d=n.modifyRange.start.translate(0,0),f=n.modifyRange.end.line===t.end.line?n.modifyRange.end.translate(m,_):n.modifyRange.end.translate(m,0)):t.start.isBefore(n.modifyRange.start)?(d=t.start.translate(0,0),f=n.modifyRange.end.line===t.end.line?n.modifyRange.end.translate(m,_):n.modifyRange.end.translate(m,0)):(d=n.modifyRange.start.translate(0,0),f=t.end.translate(m,_));const v=new r.Range(d,f);n.modifyRange=v}offsetRange(e,t,n){const i=t.end.line-t.start.line,o=t.end.character,[s,a]=g(n);let c,u;const l=0-o+(s-i>0?a:0)+(s-i<0?a+t.start.character:0),d=s-i;e.modifyRange.end.line===t.end.line?(c=e.modifyRange.start.translate(d,l),u=e.modifyRange.isSingleLine?e.modifyRange.end.translate(d,l):e.modifyRange.end.translate(d,0)):(c=e.modifyRange.start.translate(d,0),u=e.modifyRange.end.translate(d,0)),e.modifyRange=new r.Range(c,u)}decorationColor(){}}function a(e,t){return e.start.isBeforeOrEqual(t.end)&&t.start.isBeforeOrEqual(e.end)||t.start.isBeforeOrEqual(e.end)&&e.start.isBeforeOrEqual(t.end)}function c(e,t,n){return e.start.isAfterOrEqual(t.start)&&e.end.isBeforeOrEqual(t.end)}function u(e,t,n){return e.start.isAfter(t.start)&&e.end.isBeforeOrEqual(t.end)}function l(e,t){return e.start.isBefore(t.start)&&e.end.isAfter(t.start)||e.start.isBefore(t.end)&&e.end.isAfter(t.end)}function d(e,t){return e.start.isBeforeOrEqual(t.start)&&e.end.isAfterOrEqual(t.start)||e.start.isBeforeOrEqual(t.end)&&e.end.isAfterOrEqual(t.end)}function f(e,t){return t.end.isBeforeOrEqual(e.start)}function h(e){return e.start.line===e.end.line?e.end.character-e.start.character:e.end.character}function p(e,t){const[n,i]=g(t);let o,s=e.start;return o=0===n?e.end.translate(0,i):new r.Position(e.end.line+n,i),new r.Range(s,o)}function g(e){const t=e.split(/[\r\n]+/);return[t.length-1,t[t.length-1].length]}t.RangeCache=s,t.rangesIntersect=a,t.rangesDelete=c,t.lineDelete=u,t.rangesModify=l,t.lineModify=d,t.rangesUnder=f,t.calRangeEndOffset=h,t.calRangeModify=p,t.findNewlineSizeAndOffset=g;class _{constructor(){this._decorationType=r.window.createTextEditorDecorationType({backgroundColor:"yellow"})}updateColors(e){const t=r.window.visibleTextEditors;for(const n of t){const t=e.getRanges(n.document.uri.toString());if(t){const e=t.map((e=>({range:e.modifyRange,hoverMessage:"Hover message"})));n.setDecorations(this._decorationType,e)}else n.setDecorations(this._decorationType,[])}}dispose(){this._decorationType.dispose()}}t.RangeColorizer=_},4843:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createProtocolConnection=function(e,t,n,i){r.ConnectionStrategy.is(i)&&(i={connectionStrategy:i});return(0,r.createMessageConnection)(e,t,n,i)};const r=n(3717)},5413:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.AISPErrorCodes=void 0,function(e){e.RequestCancelled=-32800,e.RequestFailed=-32801}(n||(t.AISPErrorCodes=n={}))},6727:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(4843),t),i(n(757),t),i(n(4086),t),i(n(2364),t),i(n(6806),t),i(n(5413),t)},6974:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthResult=t.IsLoginRequest=t.AuthorizeRequest=void 0;const r=n(757);var i,o;!function(e){e.method="authorize/getJWTToken",e.messageDirection=r.MessageDirection.serverToClient,e.type=new r.ProtocolRequestType(e.method)}(i||(t.AuthorizeRequest=i={})),function(e){e.method="authorize/getIsLogin",e.messageDirection=r.MessageDirection.serverToClient,e.type=new r.ProtocolRequestType(e.method)}(o||(t.IsLoginRequest=o={}));t.AuthResult=class{}},2760:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromptConfig=t.GetConfigRequest=void 0;const r=n(757);var i;!function(e){e.method="code/get_config",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolRequestType0(e.method)}(i||(t.GetConfigRequest=i={}));t.PromptConfig=class{constructor(){this.multi_edit_fetch_internal=500,this.should_enable_multi_edit_cursor=!0,this.max_enable_count=100}}},5065:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DidChangeConfigurationNotification=void 0;const r=n(757);var i;!function(e){e.method="workspace/didChangeConfiguration",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolNotificationType(e.method)}(i||(t.DidChangeConfigurationNotification=i={}))},1222:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpenDocumentRequest=void 0;const r=n(757);var i;!function(e){e.method="code/open_document",e.messageDirection=r.MessageDirection.serverToClient,e.type=new r.ProtocolRequestType(e.method)}(i||(t.OpenDocumentRequest=i={}))},6765:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PingSuccessResult=t.PingRequest=void 0;const r=n(757);var i;!function(e){e.method="ping",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolRequestType0(e.method)}(i||(t.PingRequest=i={})),t.PingSuccessResult=1},4568:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.DidDeleteTextDocumentNotification=t.DidCreateTextDocumentNotification=t.DidAccessTextDocumentNotification=t.DidSaveTextDocumentNotification=t.WillSaveTextDocumentNotification=t.TextDocumentSaveReason=t.DidCloseTextDocumentNotification=t.DidChangeTextDocumentNotification=t.DidOpenTextDocumentNotification=t.TextDocumentRegistrationOptions=t.TextDocumentSyncKind=t.DocumentSelector=t.DocumentFilter=void 0;const s=n(757),a=o(n(8092));var c,u,l,d,f,h,p,g,_,m,v,y,b;!function(e){e.is=function(e){const t=e;return a.string(t)||a.string(t.language)||a.string(t.scheme)||a.string(t.pattern)}}(c||(t.DocumentFilter=c={})),function(e){e.is=function(e){if(!Array.isArray(e))return!1;for(let t of e)if(!a.string(t)&&!c.is(t))return!1;return!0}}(u||(t.DocumentSelector=u={})),function(e){e.None=0,e.Full=1,e.Incremental=2}(l||(t.TextDocumentSyncKind=l={})),function(e){e.is=function(e){const t=e;return t&&(null===t.documentSelector||u.is(t.documentSelector))}}(d||(t.TextDocumentRegistrationOptions=d={})),function(e){e.method="textDocument/didOpen",e.messageDirection=s.MessageDirection.clientToServer,e.type=new s.ProtocolNotificationType(e.method)}(f||(t.DidOpenTextDocumentNotification=f={})),function(e){e.method="textDocument/didChange",e.messageDirection=s.MessageDirection.clientToServer,e.type=new s.ProtocolNotificationType(e.method)}(h||(t.DidChangeTextDocumentNotification=h={})),function(e){e.method="textDocument/didClose",e.messageDirection=s.MessageDirection.clientToServer,e.type=new s.ProtocolNotificationType(e.method)}(p||(t.DidCloseTextDocumentNotification=p={})),function(e){e.Manual=1,e.AfterDelay=2,e.FocusOut=3}(g||(t.TextDocumentSaveReason=g={})),function(e){e.method="textDocument/willSave",e.messageDirection=s.MessageDirection.clientToServer,e.type=new s.ProtocolNotificationType(e.method)}(_||(t.WillSaveTextDocumentNotification=_={})),function(e){e.method="textDocument/didSave",e.messageDirection=s.MessageDirection.clientToServer,e.type=new s.ProtocolNotificationType(e.method)}(m||(t.DidSaveTextDocumentNotification=m={})),function(e){e.method="textDocument/didAccess",e.messageDirection=s.MessageDirection.clientToServer,e.type=new s.ProtocolNotificationType(e.method)}(v||(t.DidAccessTextDocumentNotification=v={})),function(e){e.method="textDocument/didCreate",e.messageDirection=s.MessageDirection.clientToServer,e.type=new s.ProtocolNotificationType(e.method)}(y||(t.DidCreateTextDocumentNotification=y={})),function(e){e.method="textDocument/didDelete",e.messageDirection=s.MessageDirection.clientToServer,e.type=new s.ProtocolNotificationType(e.method)}(b||(t.DidDeleteTextDocumentNotification=b={}))},5797:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DidChangeWorkspaceFoldersNotification=void 0;const r=n(757);var i;!function(e){e.method="workspace/didChangeWorkspaceFolders",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolNotificationType(e.method)}(i||(t.DidChangeWorkspaceFoldersNotification=i={}))},6899:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EMPTY_DOCUMENT_CONTEXT=t.EndpointID=t.ChatResultCode=t.ConversationOptions=t.SceneLocation=t.SwitchConversationNotification=t.ClearChatHistoryNotification=t.DeleteChatHistoryNotification=t.InlineChatCompletionRequest=t.ChatCompletionRequest=void 0;const r=n(757);var i,o,s,a,c,u,l,d;!function(e){e.method="code/chatCompletion",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolRequestType(e.method)}(i||(t.ChatCompletionRequest=i={})),function(e){e.method="code/inlineChatCompletion",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolRequestType(e.method)}(o||(t.InlineChatCompletionRequest=o={})),function(e){e.method="code/deleteChatHistory",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolNotificationType(e.method)}(s||(t.DeleteChatHistoryNotification=s={})),function(e){e.method="code/clearChatHistory",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolNotificationType(e.method)}(a||(t.ClearChatHistoryNotification=a={})),function(e){e.method="code/switchConversation",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolNotificationType(e.method)}(c||(t.SwitchConversationNotification=c={})),function(e){e[e.InlineChat=1]="InlineChat",e[e.Chatview=2]="Chatview"}(u||(t.SceneLocation=u={}));t.ConversationOptions=class{constructor(){this.temperature=.1,this.topP=1,this.rejectionMessage="Sorry, but I can only assist with programming related questions."}},function(e){e[e.SUCCESS=0]="SUCCESS",e[e.ERROR=-1]="ERROR",e[e.LENGTH=-2]="LENGTH",e[e.SENSITIVE_CONTENT=-3]="SENSITIVE_CONTENT",e[e.ErrLogOut=4010]="ErrLogOut",e[e.ErrAccessReject=4011]="ErrAccessReject",e[e.ErrTrafficReject=3004]="ErrTrafficReject"}(l||(t.ChatResultCode=l={})),function(e){e.GPT3_5="ide-gpt3.5",e.GPT4="ide-gpt4",e.INTERNAL="ide-internal"}(d||(t.EndpointID=d={})),t.EMPTY_DOCUMENT_CONTEXT={document:{uri:""},fileName:"",language:{languageId:""},selectedCode:"",selection:{start:{line:0,character:0},end:{line:0,character:0}},selections:[{start:{line:0,character:0},end:{line:0,character:0}}],wholeRange:{start:{line:0,character:0},end:{line:0,character:0}}}},3518:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ckgErrorCode=void 0,function(e){e[e.Success=0]="Success",e[e.ErrCKGUnexpected=1001]="ErrCKGUnexpected",e[e.ErrCKGOsNotCompatible=1002]="ErrCKGOsNotCompatible"}(n||(t.ckgErrorCode=n={}))},2318:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeAcceptCompletionRequest=void 0;const r=n(757);var i;!function(e){e.method="code/accept_completion",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolRequestType(e.method)}(i||(t.CodeAcceptCompletionRequest=i={}))},9314:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompletionResultType=t.CodeGetCompletionRequest=void 0,t.cursorHistoryToJsonString=function(e){try{if(e){let t=new Map;for(const[n,r]of e)t.set(n,JSON.stringify([...r]));return JSON.stringify([...t])}}catch(e){}return""},t.jsonStringToCursorHistory=function(e){try{if(e){let t=new Map,n=new Map(JSON.parse(e));for(const[e,r]of n)t.set(e,new Map(JSON.parse(r)));return t}}catch(e){}return};const r=n(757);var i,o;!function(e){e.method="code/get_completion",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolRequestType(e.method)}(i||(t.CodeGetCompletionRequest=i={})),function(e){e.Network="Network",e.Cache="Cache",e.TypingAsSuggested="TypingAsSuggested",e.Cycling="Cycling"}(o||(t.CompletionResultType=o={}))},2208:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeReviewRequest=void 0;const r=n(757);var i;!function(e){e.method="code/review",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolRequestType(e.method)}(i||(t.CodeReviewRequest=i={}))},6006:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5850:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FunctionDocIntent_ID=t.ChatTurnReference=t.CONTEXT_SET_FOR_MODEL_TO_SELECT=t.DEFAULT_REQUIRED_CONTEXTS=t.PromptContextKind=t.RegisterContextResolverRequest=void 0;const r=n(757);var i,o;!function(e){e.method="context/register",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolRequestType(e.method)}(i||(t.RegisterContextResolverRequest=i={})),function(e){e.CurrentEditor="current-editor",e.CurrentSelection="current-selection",e.CurrentSelectionClassDecl="current-selection-class-declarations",e.CurrentSelectionFunctionImpl="current-selection-function-implementations",e.CurrentSelectionTypeDecl="current-selection-type-declarations",e.DebugConsoleOutput="debug-console-output",e.Diagnostics="diagnostics",e.DocSelection="doc-selection",e.FixSelection="fix-selection",e.InlineChatSelection="inline-chat-selection",e.ProjectLabels="project-labels",e.TerminalSelection="terminal-selection",e.TerminalLastCommand="terminal-last-command",e.Workspace="workspace",e.GitMetadata="git-metadata",e.UnitTestTarget="unittest-target",e.ActiveSelection="active-selection",e.RepoMetadataFromServer="repo_metadata_server",e.KeyFilesContentFromServer="key_files_content_server",e.SimilarCodeFromServer="similar_code_server",e.RelatedSymbolsFromServer="related_symbols_server",e.LintErrorFixSelection="lint-error-fix-selection",e.LintErrorFormatConstraint="lint-error-format-constraint",e.LintErrorFixDiagnostics="lint-error-fix-diagnostics",e.WebSearch="web_search",e.NoContext="no_context"}(o||(t.PromptContextKind=o={})),t.DEFAULT_REQUIRED_CONTEXTS=[o.InlineChatSelection,o.CurrentSelectionClassDecl,o.CurrentSelectionFunctionImpl,o.CurrentSelectionTypeDecl,o.CurrentSelection,o.ProjectLabels],t.CONTEXT_SET_FOR_MODEL_TO_SELECT=new Set([o.DebugConsoleOutput,o.Workspace]);t.ChatTurnReference=class{constructor(e,t){this.anchor=e,this.languageId=t}},t.FunctionDocIntent_ID="doc"},8782:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResolveContextRequest=void 0;const r=n(757);var i;!function(e){e.method="context/resolve",e.messageDirection=r.MessageDirection.serverToClient,e.type=new r.ProtocolRequestType(e.method)}(i||(t.ResolveContextRequest=i={}))},9529:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorCode=void 0,function(e){e[e.Success=0]="Success",e[e.ErrNoAuth=1001]="ErrNoAuth",e[e.ErrCheckAuth=1002]="ErrCheckAuth",e[e.ErrInternal=2001]="ErrInternal",e[e.ErrModelReqFail=3003]="ErrModelReqFail",e[e.ErrParamInvalid=4001]="ErrParamInvalid",e[e.ErrContentTooLong=4006]="ErrContentTooLong",e[e.ErrRateLimitExceeded=4007]="ErrRateLimitExceeded",e[e.ErrLogOut=4010]="ErrLogOut",e[e.ErrAccessReject=4011]="ErrAccessReject"}(n||(t.ErrorCode=n={}))},3419:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExplainCodeRequest=void 0;const r=n(757);var i;!function(e){e.method="code/explain",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolRequestType(e.method)}(i||(t.ExplainCodeRequest=i={}))},7366:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AIFeature=t.GetAIFeaturesRequest=void 0;const r=n(757);var i,o;!function(e){e.method="code/features",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolRequestType(e.method)}(i||(t.GetAIFeaturesRequest=i={})),function(e){e[e.HashWorkspace=0]="HashWorkspace"}(o||(t.AIFeature=o={}))},9174:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetAppVersionRequest=void 0;const r=n(757);var i;!function(e){e.method="code/get_app_version",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolRequestType0(e.method)}(i||(t.GetAppVersionRequest=i={}))},1958:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetChatViewBannerInfoRequest=void 0;const r=n(757);var i;!function(e){e.method="code/chat_view_banner",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolRequestType(e.method)}(i||(t.GetChatViewBannerInfoRequest=i={}))},6694:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetDefinitionsRequest=void 0;const r=n(757);var i;!function(e){e.method="code/get_definitions",e.messageDirection=r.MessageDirection.serverToClient,e.type=new r.ProtocolRequestType(e.method)}(i||(t.GetDefinitionsRequest=i={}))},2163:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetDiagnosticsRequest=void 0;const r=n(757);var i;!function(e){e.method="code/get_diagnostics",e.messageDirection=r.MessageDirection.serverToClient,e.type=new r.ProtocolRequestType(e.method)}(i||(t.GetDiagnosticsRequest=i={}))},5731:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetImplementationRequest=void 0;const r=n(757);var i;!function(e){e.method="code/get_implementation",e.messageDirection=r.MessageDirection.serverToClient,e.type=new r.ProtocolRequestType(e.method)}(i||(t.GetImplementationRequest=i={}))},8268:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetModelNamesRequest=void 0;const r=n(757);var i;!function(e){e.method="code/get_model_names",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolRequestType0(e.method)}(i||(t.GetModelNamesRequest=i={}))},8913:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NeighborFileType=t.GetNeighborFileRequest=void 0;const r=n(757);var i,o;!function(e){e.method="code/get_neighbor_file",e.messageDirection=r.MessageDirection.serverToClient,e.type=new r.ProtocolRequestType(e.method)}(i||(t.GetNeighborFileRequest=i={})),function(e){e.None="none",e.OpenTabs="opentabs",e.CursorMostRecent="cursormostrecent",e.CursorMostCount="cursormostcount",e.CursorBeforeCurrentFile="cursorbeforecurrentfile",e.WorkspaceSharingSameFolder="workspacesharingsamefolder",e.WorkspaceSmallestPathDist="workspacesmallestpathdist",e.OpenTabsAndCocommitted="opentabsandcocommitted"}(o||(t.NeighborFileType=o={}))},2597:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetRepositoriesRequest=void 0;const r=n(757);var i;!function(e){e.method="code/get_repositories",e.messageDirection=r.MessageDirection.serverToClient,e.type=new r.ProtocolRequestType(e.method)}(i||(t.GetRepositoriesRequest=i={}))},2542:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetSymbolContextRequest=void 0;const r=n(757);var i;!function(e){e.method="code/get_symbol_context",e.messageDirection=r.MessageDirection.serverToClient,e.type=new r.ProtocolRequestType(e.method)}(i||(t.GetSymbolContextRequest=i={}))},272:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetUnitTestContext=void 0;const r=n(757);var i;!function(e){e.method="code/get_unittest_context",e.messageDirection=r.MessageDirection.serverToClient,e.type=new r.ProtocolRequestType(e.method)}(i||(t.GetUnitTestContext=i={}))},6782:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiPointCompletionRequest=void 0;const r=n(757);var i;!function(e){e.method="code/multi_point",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolRequestType(e.method)}(i||(t.MultiPointCompletionRequest=i={}))},1193:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UIFeatureNotification=void 0;const r=n(757);var i;!function(e){e.method="ui/feature",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolNotificationType(e.method)}(i||(t.UIFeatureNotification=i={}))},7052:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExitNotification=void 0;const r=n(757);var i;!function(e){e.method="exit",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolNotificationType0(e.method)}(i||(t.ExitNotification=i={}))},9936:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InitializeRequest=void 0;const r=n(757);var i;!function(e){e.method="initialize",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolRequestType(e.method)}(i||(t.InitializeRequest=i={}))},8894:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InitializedNotification=void 0;const r=n(757);var i;!function(e){e.method="initialized",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolNotificationType(e.method)}(i||(t.InitializedNotification=i={}))},5437:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogMessageNotification=void 0;const r=n(757);var i;!function(e){e.method="window/logMessage",e.messageDirection=r.MessageDirection.serverToClient,e.type=new r.ProtocolNotificationType(e.method)}(i||(t.LogMessageNotification=i={}))},9389:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReportMessageNotification=void 0;const r=n(757);var i;!function(e){e.method="workspace/reportMessage",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolNotificationType(e.method)}(i||(t.ReportMessageNotification=i={}))},4052:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShowMessageNotification=void 0;const r=n(757);var i;!function(e){e.method="window/showMessage",e.messageDirection=r.MessageDirection.serverToClient,e.type=new r.ProtocolNotificationType(e.method)}(i||(t.ShowMessageNotification=i={}))},8244:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShutdownRequest=void 0;const r=n(757);var i;!function(e){e.method="shutdown",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolRequestType0(e.method)}(i||(t.ShutdownRequest=i={}))},5455:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserInfoNotification=void 0;const r=n(757);var i;!function(e){e.method="userInfoChanged",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolNotificationType(e.method)}(i||(t.UserInfoNotification=i={}))},6806:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(9128),t),i(n(9936),t),i(n(8894),t),i(n(8244),t),i(n(7052),t),i(n(5437),t),i(n(9389),t),i(n(4052),t),i(n(5455),t),i(n(5065),t),i(n(4568),t),i(n(5797),t),i(n(2760),t),i(n(6974),t),i(n(1222),t),i(n(6765),t),i(n(9314),t),i(n(2318),t),i(n(2208),t),i(n(6782),t),i(n(3419),t),i(n(9174),t),i(n(8913),t),i(n(2542),t),i(n(6694),t),i(n(5731),t),i(n(2163),t),i(n(2597),t),i(n(6006),t),i(n(5850),t),i(n(8782),t),i(n(6899),t),i(n(8268),t),i(n(9529),t),i(n(3518),t),i(n(272),t),i(n(7366),t),i(n(1958),t),i(n(1193),t),i(n(6398),t),i(n(7924),t),i(n(6710),t),i(n(9376),t),i(n(3895),t),i(n(6099),t),i(n(3150),t),i(n(9609),t),i(n(4544),t)},3150:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChatEvent=t.InlineChatOpenSource=t.SideChatOpenSource=t.ChatEventType=void 0;const r=n(7924);var i,o,s,a;!function(e){e.use_chat="use_chat",e.create_new_chat="create_new_chat",e.chat_retry="chat_retry",e.chat_delete="chat_delete",e.chat_stop="chat_stop",e.inline_explain="inline_explain",e.inline_doc="inline_doc",e.inline_test="inline_test",e.quick_explain="quick_explain",e.quick_doc="quick_doc",e.quick_test="quick_test",e.clear_history="clear_history",e.select_hisotry="select_history",e.delete_history="delete_history",e.open_side_chat="open_side_chat",e.open_inline_chat="open_inline_chat",e.inline_chat_retry="inline_chat_retry",e.inline_chat_stop="inline_chat_stop",e.inline_chat_followup="inline_chat_followup",e.inline_chat_show_diff="inline_chat_show_diff"}(i||(t.ChatEventType=i={})),function(e){e.Click="click",e.ShortCut="short_cut",e.Command="command",e.Menu="menu",e.CodeLens="code_lens",e.QuickFix="quick_fix"}(o||(t.SideChatOpenSource=o={})),function(e){e.CodeLens="codelens",e.ShortCut="short_cut"}(s||(t.InlineChatOpenSource=s={})),function(e){e.chat=new r.TelemetryActionType("chat_action")}(a||(t.ChatEvent=a={}))},3895:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CommonAction=void 0;const r=n(7924);var i;!function(e){e.Switch=new r.TelemetryActionType("plugin_switch"),e.Install=new r.TelemetryActionType("plugin_install"),e.LoginTrace=new r.TelemetryActionType("common_action"),e.PluginCommonAction=new r.TelemetryActionType("plugin_common_action")}(i||(t.CommonAction=i={}))},6710:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompletionAction=void 0;const r=n(7924);var i;!function(e){e.Accept=new r.TelemetryActionType("completion_accept"),e.Shown=new r.TelemetryActionType("completion_show"),e.Success=new r.TelemetryActionType("completion_success"),e.Reject=new r.TelemetryActionType("completion_reject"),e.CommitCode=new r.TelemetryActionType("code_commit"),e.GroundTruth=new r.TelemetryActionType("completion_reject")}(i||(t.CompletionAction=i={}))},9376:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComprehensionAction=void 0;const r=n(7924);var i;!function(e){let t,n,i;e.CopyCode=new r.TelemetryActionType("comprehension_copy_code"),e.CopySelectionCode=new r.TelemetryActionType("comprehension_copy_selection_code"),e.InsertCode=new r.TelemetryActionType("comprehension_insert_code"),e.InsertCodeToNewFile=new r.TelemetryActionType("comprehension_insert_code_to_new_file"),e.Feedback=new r.TelemetryActionType("comprehension_feedback"),e.Trigger=new r.TelemetryActionType("comprehension_trigger"),e.ParseCode=new r.TelemetryActionType("comprehension_parse_code"),e.Accept=new r.TelemetryActionType("comprehension_accept"),e.Reject=new r.TelemetryActionType("comprehension_reject"),e.ShowHashReference=new r.TelemetryActionType("comprehension_show_reference"),function(e){e.GenerateUnitTest="generate_unittests",e.ExplainCode="explain_code",e.QuickFix="quick_fix",e.Doc="doc"}(t=e.Scene||(e.Scene={})),function(e){e.Default="default",e.Dislike="dislike",e.Like="like"}(n=e.FeedbackState||(e.FeedbackState={})),function(e){e.NatualLanguage="natual_language",e.ManualCommand="manual_slash_command",e.CommandWithNL="slash_command_with_nl",e.MenuExplain="menu_explain",e.MenuTest="menu_test",e.MenuDoc="menu_doc",e.CodelensExplain="codelens_explain",e.CodelensDoc="codelens_doc",e.CodelensTest="codelens_test",e.CommandExplain="command_explain",e.CommandDoc="command_doc",e.CommandTest="command_test",e.CommandFix="command_fix",e.QuickFixFix="quick_fix_fix"}(i=e.TriggerAction||(e.TriggerAction={}))}(i||(t.ComprehensionAction=i={}))},4544:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GitAction=void 0;const r=n(7924);var i;!function(e){e.Commit=new r.TelemetryActionType("git_commit")}(i||(t.GitAction=i={}))},6099:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoginAction=void 0;const r=n(7924);var i;!function(e){e.login=new r.TelemetryActionType("login_action")}(i||(t.LoginAction=i={}))},964:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiEditAction=void 0;const r=n(7924);var i;!function(e){e.Trigger=new r.TelemetryActionType("multiEdit_action_trigger"),e.Recommend=new r.TelemetryActionType("multiEdit_action_recommend"),e.RecommendExact=new r.TelemetryActionType("multiEdit_action_recommend_exact"),e.Show=new r.TelemetryActionType("multiEdit_action_show"),e.Hide=new r.TelemetryActionType("multiEdit_action_hide"),e.Accept=new r.TelemetryActionType("multiEdit_action_accept"),e.ConfigEnableAction=new r.TelemetryActionType("multiEdit_action_config_enable"),e.Trace=new r.TelemetryActionType("multiEdit_trace"),e.GroundTruth=new r.TelemetryActionType("multi_edit_ground_truth")}(i||(t.MultiEditAction=i={}))},9609:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PerfAction=void 0;const r=n(7924);var i;!function(e){e.startup=new r.TelemetryActionType("perf_action")}(i||(t.PerfAction=i={}))},7924:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryActionType=void 0;const r=n(757);class i extends r.ProtocolNotificationType{constructor(e){super("telemetry/action_"+e),this.name=e}}t.TelemetryActionType=i},6398:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ActionTypeEnum=void 0,function(e){e.CodeDiff="codeDiff",e.Cursor="cursor",e.Select="select",e.NewLine="newLine",e.DeleteLine="deleteLine",e.ModifyLine="modifyLine",e.Delete="delete",e.Paste="paste",e.Accept="accept",e.Reject="reject",e.OpenFile="openFile",e.CloseFile="closeFile"}(n||(t.ActionTypeEnum=n={}))},8092:(e,t)=>{"use strict";function n(e){return"string"==typeof e||e instanceof String}function r(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=n,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=r,t.stringArray=function(e){return r(e)&&e.every((e=>n(e)))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.objectLiteral=function(e){return null!==e&&"object"==typeof e}},4086:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageType=void 0,function(e){e.Error=1,e.Warning=2,e.Info=3,e.Log=4,e.NEVER=5}(n||(t.MessageType=n={}))},757:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProtocolNotificationType=t.ProtocolNotificationType0=t.ProtocolRequestType=t.ProtocolRequestType0=t.RegistrationType=t.MessageDirection=void 0;const r=n(3717);var i;!function(e){e.clientToServer="clientToServer",e.serverToClient="serverToClient",e.both="both"}(i||(t.MessageDirection=i={}));t.RegistrationType=class{constructor(e){this.method=e}};class o extends r.RequestType0{constructor(e){super(e)}}t.ProtocolRequestType0=o;class s extends r.RequestType{constructor(e){super(e,r.ParameterStructures.byName)}}t.ProtocolRequestType=s;class a extends r.NotificationType0{constructor(e){super(e)}}t.ProtocolNotificationType0=a;class c extends r.NotificationType{constructor(e){super(e,r.ParameterStructures.byName)}}t.ProtocolNotificationType=c},2364:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4681:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>T});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};var i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)};function o(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}function s(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}var a=function(e){function t(t,n,r){var i=e.call(this,n)||this;return i.code=t,i.message=n,i.originError=r,i.name="StarlingError",i.code=t,i.message=n,i.originError=r,Error.captureStackTrace&&Error.captureStackTrace(i,i.constructor),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t}(Error),c={ERROR_CODE:101,ERROR_MESSAGE:"Request for loadText failed!"},u={ERROR_CODE:103,ERROR_MESSAGE:"Request failed, confirm your apiKey and namespace is correct"},l={ERROR_CODE:110,ERROR_MESSAGE:"Check your params, parameter apiKey, namespace and zoneHost is required!"},d={ERROR_CODE:111,ERROR_MESSAGE:"Check your params, parameter request and store is required!"},f={ERROR_CODE:112,ERROR_MESSAGE:"Cache error!"},h={ERROR_CODE:120,ERROR_MESSAGE:"Version is not found, please check your param [version]!"},p={zone:"CN",locale:"zh",timeout:15e3,test:!1,mode:"normal",format:"merged",lazyUpdate:!1,fallbackLang:["zh"],tracker:function(){},cache:!0,cdn:""};var g=function(){function e(e){this.options=e,this.options=e}return e.prototype.getText=function(e,t){return o(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return[4,this._request(e,t)];case 1:return[2,n.sent()]}}))}))},e.prototype.getTexts=function(e){var t=this;return Promise.all(e.map((function(e){var n=e[0],r=e[1];return t.getText(n,r)})))},e.prototype._request=function(e,t){return o(this,void 0,void 0,(function(){var n,r,i,o,l,d,f,p,g,_,m,v,y,b,E,w,S,T,C,O,A,I,R,D,x,M,P,N,k,L,j,z,F;return s(this,(function(s){switch(s.label){case 0:if(n=this.options,r=n.getReleaseVersion,i=n.cdn,o=n.fallbackLang,l=n.locale,d=r(e),e&&d&&t)return[2,{}];if(f=this.getUrl(e,t),p=this.options,g=p.request,_=p.timeout,!i)return[3,7];v=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}([l],o),y=[],E=(b=c).ERROR_CODE,w=b.ERROR_MESSAGE,S=0,T=v,s.label=1;case 1:if(!(S<T.length))return[3,6];C=T[S],s.label=2;case 2:return s.trys.push([2,4,,5]),[4,g(this.getUrl(e,t,C),{timeout:_})];case 3:if(O=s.sent(),A=O.data,I=A.status,R=A.message,200==+I)return[2,this._mapResponse(R)];throw new a(E,w);case 4:return D=s.sent(),y.push(D),y.length===v.length?[2,this._mapResponse({data:{},updated:!1})]:[3,5];case 5:return S++,[3,1];case 6:return[3,9];case 7:return[4,g(f,{timeout:_})];case 8:m=s.sent(),s.label=9;case 9:if(x=m.data,M=x.status,P=x.message,200==+M)return[2,this._mapResponse(P)];if(1001==+M)throw k=(N=h).ERROR_CODE,L=N.ERROR_MESSAGE,new a(k,L);throw z=(j=u).ERROR_CODE,F=j.ERROR_MESSAGE,new a(z,F)}}))}))},e.prototype.getUrl=function(e,t,n){var r=this.options,i=r.apiKey,o=r.locale,s=r.fallbackLang,a=r.zoneHost,c=r.mode,u=r.getReleaseVersion,l=r.cdn,d=[o].concat(s),f=a+"/check_and_get_text/"+i+"/"+c+"/"+e+"?lang="+d,h=u(e);return h&&(f=a+"/text_by_release_version/"+i+"/"+c+"/"+e+"/"+h+"?lang="+d),"string"==typeof t&&(f+="&version="+t),l&&(f=l+"/"+i+"/"+c+"/"+e+"/"+(n||o)+".json"),f},e.prototype._mapResponse=function(e){return e?Object.keys(e).reduce((function(t,n){return t[n.toLowerCase()]=e[n],t}),{}):{}},e}(),_=function(){function e(e){this.options=e,this.options=e}return e.prototype._setCache=function(e,t,n){if(!this.options.cdn)try{return this.options.store.set(e,t)}catch(e){var r=f.ERROR_CODE;return this.options.tracker("cache_error",{code:r,message:e.message,stack:e.stack}),void(n&&n())}},e.prototype._getCache=function(e){var t=this.options,n=t.store,r=t.cache,i=t.cdn;try{if(i)return;return r&&n.get(e)}catch(e){var o=f.ERROR_CODE;return void this.options.tracker("cache_error",{code:o,message:e.message,stack:e.stack})}},e.prototype.getVersion=function(e){var t=this.options,n="version."+t.apiKey+"."+e+"."+t.locale,r=(0,t.getReleaseVersion)(e);r&&(n+="."+r);var i=this.getText(e);return i&&"object"==typeof i?"object"==typeof i&&i.then?this._getCache(n):"object"==typeof i&&0===Object.keys(i||{}).length?null:this._getCache(n):null},e.prototype.getVersions=function(e){var t=this;return Promise.all(e.map((function(e){return t.getVersion(e)})))},e.prototype.getText=function(e){var t=this.options,n="text."+t.apiKey+"."+e+"."+t.locale,r=(0,t.getReleaseVersion)(e);return r&&(n+="."+r),this._getCache(n)},e.prototype.getTexts=function(e){var t=this;return Promise.all(e.map((function(e){return t.getText(e)})))},e.prototype.refresh=function(e,t,n,r){return o(this,void 0,void 0,(function(){var i,o,a,c,u,l=this;return s(this,(function(s){switch(s.label){case 0:return i=this.options,o=i.apiKey,a=i.getReleaseVersion,c=i.cache,u=[],t.forEach((function(i,s){var d="text."+o+"."+e[s]+"."+r[s],f="version."+o+"."+e[s]+"."+r[s],h=a(e[s]);h&&(d+="."+h,f+="."+h),c&&(u.push(l._setCache(d,t[s],(function(){l.options.store.set(d,{})}))),u.push(l._setCache(f,n[s])))})),[4,Promise.all(u)];case 1:return s.sent(),[2,t.reduce((function(e,t){return Object.assign(e,t)}),{})]}}))}))},e}();var m=function(){function e(e){void 0===e&&(e=[]),this._list=[],this._list=e}return Object.defineProperty(e.prototype,"length",{get:function(){return this._list.length},enumerable:!1,configurable:!0}),e.prototype.getList=function(){return this._list},e.prototype.getNamespaces=function(){return this._list.map((function(e){return e.namespace}))},e.prototype.addNamespace=function(e){this._list.push(e)},e.prototype.insertTexts=function(e){this._list.forEach((function(t,n){t.texts=e[n]}))},e.prototype.sortByPrior=function(){return this._list.sort((function(e,t){return e.prior-t.prior})),this._list},e.prototype.concat=function(t){return new e(this._list.concat(t.getList()))},e}(),v=function(){function e(e,t,n){this._promiseRefresh=Promise.resolve(null),this.remote=e,this.local=t,this.options=n}return e.prototype._checkVersions=function(e){return o(this,void 0,void 0,(function(){var t,n,r,i,o,a;return s(this,(function(s){switch(s.label){case 0:return t=this.options.locale,[4,this.local.getVersions(e)];case 1:return n=s.sent(),r=e.map((function(e,t){return[e,n[t]]})),[4,this.remote.getTexts(r)];case 2:return i=s.sent(),o=new m,a=new m,e.forEach((function(e,r){var s=i[r],c=s.updated,u=s.version,l=s.data,d=s.lang;c?a.addNamespace({namespace:e,prior:r,version:u,texts:l,lang:d}):o.addNamespace({namespace:e,prior:r,version:n[r],lang:t})})),[2,{equalNs:o,diffNs:a}]}}))}))},e.prototype.waitForRefresh=function(){return this._promiseRefresh},e.prototype._refresh=function(e){var t=e.getList(),n=[],r=[],i=[],o=[];return t.forEach((function(e){n.push(e.namespace),r.push(e.version),i.push(e.texts),o.push(e.lang)})),this.local.refresh(n,i,r,o)},e.prototype._getLocalTexts=function(e){return o(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return[4,this.local.getTexts(e.getNamespaces())];case 1:return t=n.sent(),e.insertTexts(t),[2,t]}}))}))},e.prototype.load=function(e){return o(this,void 0,void 0,(function(){var t,n,r,i,o;return s(this,(function(s){switch(s.label){case 0:return t=this.options.format,[4,this._checkVersions(e)];case 1:return n=s.sent(),r=n.equalNs,i=n.diffNs,r.length?[4,this._getLocalTexts(r)]:[3,3];case 2:return s.sent(),[3,4];case 3:s.label=4;case 4:return o=this._formatTexts(t,i.concat(r)),i.length?[4,this._refresh(i)]:[3,6];case 5:s.sent(),s.label=6;case 6:return[2,{texts:o,diffNs:i.getNamespaces(),equalNs:r.getNamespaces()}]}}))}))},e.prototype._getCacheText=function(e){return o(this,void 0,void 0,(function(){var t,n,r,i,o,a,c;return s(this,(function(s){switch(s.label){case 0:return t=this.options,n=t.locale,r=t.format,[4,this.local.getTexts(e)];case 1:return i=s.sent(),[4,this.local.getVersions(e)];case 2:return o=s.sent(),a=i.map((function(t,r){if(t)return{namespace:e[r],version:o[r],lang:n,texts:t}})).filter((function(e){return!!e})),c=new m(a),[2,{texts:this._formatTexts(r,c),cacheAllLoaded:a.length===i.length}]}}))}))},e.prototype.lazyLoad=function(e){return o(this,void 0,void 0,(function(){var t,n,r,i,o;return s(this,(function(s){switch(s.label){case 0:return[4,this._getCacheText(e)];case 1:return t=s.sent(),n=t.texts,r=t.cacheAllLoaded,i=0===Object.keys(n).length||!r,this._promiseRefresh=this.load(e),i?[4,this._promiseRefresh]:[3,3];case 2:o=s.sent(),n=o.texts,s.label=3;case 3:return[2,{texts:n,diffNs:i?o&&o.diffNs:[],equalNs:i?o&&o.equalNs:e}]}}))}))},e.prototype._formatTexts=function(e,t){if("splitted"===e)return t.getList().reduce((function(e,t){var n=t.namespace,r=t.lang,i=t.texts,o=t.version;return e[n]={lang:r,texts:i,version:o},e}),{});var n,r,i=t.sortByPrior().map((function(e){return e.texts}));return n=i,(r?n.concat(r):n).reduce((function(e,t){return Object.assign(e,t)}),{})},e}();"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},writable:!0,configurable:!0});var y,b="client_exception",E="client_load",w="client_cache",S="client_load_time";!function(e){e.AfterLoad="afterLoad"}(y||(y={}));var T=function(){function e(e){this.afterLoadPlugins=[],this.setConfig(e)}return e.prototype._init=function(e){var t=this;this.options=function(e){var t=(e=Object.assign({},p,e)).namespace,n=e.apiKey,r=e.request,i=e.store,o=e.zoneHost,s=e.test,c=e.cdn;if(s&&(e.mode="test"),e.namespace=t=t?Array.isArray(t)?t:[t]:[],e.apiKey=n=n||e.api_key,!r||!c&&!i){var u=d,f=u.ERROR_CODE,h=u.ERROR_MESSAGE;throw new a(f,h,null)}if(!n||!t.length||!c&&!o){var g=l;throw f=g.ERROR_CODE,h=g.ERROR_MESSAGE,new a(f,h,null)}return e}(e);var n=this.options,r=n.apiKey,o=n.locale,s=n.zoneHost,c=n.request,u=n.timeout,f=n.fallbackLang,h=n.store,m=n.lazyUpdate,y=n.test,b=n.mode,E=n.format,w=n.cache,S=n.cdn,T={mode:m?"lazy":y?"test":"prod",zone:s,cdn:S,locale:o,apiKey:r};this._tracker=function(e,n){try{t.options.tracker(e,i(i({},T),n))}catch(e){}};var C=this._getReleaseVersionByNamespace.bind(this),O=new g({request:c,timeout:u,apiKey:r,locale:o,zoneHost:s,fallbackLang:f,mode:b,getReleaseVersion:C,cdn:S}),A=new _({apiKey:r,locale:o,store:h,tracker:this._tracker,getReleaseVersion:C,cache:w,cdn:S});this._textManager=new v(O,A,{locale:o,format:E}),this.initPlugin()},e.prototype.initPlugin=function(){var e=this,t=this.options.plugins||[];Array.isArray(t)&&t.every((function(e){return"object"==typeof e}))&&t.forEach((function(t){t.type===y.AfterLoad&&e.afterLoadPlugins.push(t)}))},e.prototype._getReleaseVersionByNamespace=function(e){var t=this.options.namespace,n=this.options.version,r=null;Array.isArray(n)?r=n[t.findIndex((function(t){return t===e}))]:n&&"object"==typeof n?r=n[e]:"string"==typeof n&&(r=n);return r},e.prototype.setConfig=function(e){var t=Object.assign({},this.options,e);this._init(t)},e.prototype.waitForRefresh=function(){return o(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return[4,this._textManager.waitForRefresh()];case 1:return[2,(e=t.sent())?e.texts:null]}}))}))},e.prototype._load=function(){return o(this,void 0,void 0,(function(){var e,t,n,r,i;return s(this,(function(o){switch(o.label){case 0:return e=this.options,t=e.namespace,n=e.lazyUpdate,r=t,n?[4,this._textManager.lazyLoad(r)]:[3,2];case 1:return i=o.sent(),[3,4];case 2:return[4,this._textManager.load(r)];case 3:i=o.sent(),o.label=4;case 4:return[2,i]}}))}))},e.prototype.load=function(e,t){return o(this,void 0,void 0,(function(){var n,r,i,o,a,c,u,l,d,f,h,p,g,_,m=this;return s(this,(function(s){switch(s.label){case 0:n=Date.now(),r=this.options.namespace,s.label=1;case 1:return s.trys.push([1,5,,10]),this._tracker(E,{state:"start",version:"0.5.16"}),[4,this._load()];case 2:return i=s.sent(),o=i.diffNs,a=i.equalNs,c=i.texts,u=this.afterLoadPlugins,Array.isArray(u)&&u.length?[4,u.reduce((function(e,t){return e.then((function(e){return"function"==typeof t.process?t.process(e||c,m.options):e}))}),Promise.resolve(c))]:[3,4];case 3:l=s.sent(),c=l||c,s.label=4;case 4:return e&&e(c),this._tracker(S,{time:Date.now()-n}),this._tracker(E,{state:"success",version:"0.5.16"}),d=o.length,f=a.length,h=r.length,p=(f/h).toFixed(2),this._tracker(w,{diffLen:d,diff:o.join(","),equalLen:f,equal:a.join(","),namespaces:a.join(","),namespacesLen:h,ratio:p}),[2,c];case 5:g=s.sent(),this._tracker(E,{state:"fail"}),this._tracker(b,{code:g.code,message:g.message,stack:g.stack}),s.label=6;case 6:return s.trys.push([6,8,,9]),[4,this._textManager._getCacheText(r)];case 7:return _=s.sent().texts,g.response=_&&"object"==typeof _?{data:_}:{data:{}},[3,9];case 8:return s.sent(),[3,9];case 9:return t?(t(g),[3,10]):[2,Promise.reject(g)];case 10:return[2]}}))}))},e}()},8884:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function o(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach((function(t){o(e,t,n[t])}))}return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function u(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}n.r(t),n.d(t,{I18n:()=>Kt,I18nConstructor:()=>Jt,I18nCore:()=>Ft,Intl:()=>Wt,IntlMessageFormat:()=>ht,default:()=>Yt});var g={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]}},_=new(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,e),this.init(t,n)}return u(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||g,this.options=t,this.debug=t.debug}},{key:"setDebug",value:function(e){this.debug=e}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,n,r){return r&&!this.debug?null:("string"==typeof e[0]&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}},{key:"create",value:function(t){return new e(this.logger,s({},{prefix:"".concat(this.prefix,":").concat(t,":")},this.options))}}]),e}()),m=function(){function e(){a(this,e),this.observers={}}return u(e,[{key:"on",value:function(e,t){var n=this;return e.split(" ").forEach((function(e){n.observers[e]=n.observers[e]||[],n.observers[e].push(t)})),this}},{key:"off",value:function(e,t){this.observers[e]&&(t?this.observers[e]=this.observers[e].filter((function(e){return e!==t})):delete this.observers[e])}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.observers[e]&&[].concat(this.observers[e]).forEach((function(e){e.apply(void 0,n)}));this.observers["*"]&&[].concat(this.observers["*"]).forEach((function(t){t.apply(t,[e].concat(n))}))}}]),e}();function v(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n}function y(e){return null==e?"":""+e}function b(e,t,n){function r(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function i(){return!e||"string"==typeof e}for(var o="string"!=typeof t?[].concat(t):t.split(".");o.length>1;){if(i())return{};var s=r(o.shift());!e[s]&&n&&(e[s]=new n),e=Object.prototype.hasOwnProperty.call(e,s)?e[s]:{}}return i()?{}:{obj:e,k:r(o.shift())}}function E(e,t,n){var r=b(e,t,Object);r.obj[r.k]=n}function w(e,t){var n=b(e,t),r=n.obj,i=n.k;if(r)return r[i]}function S(e,t,n){var r=w(e,n);return void 0!==r?r:w(t,n)}function T(e,t,n){for(var r in t)"__proto__"!==r&&"constructor"!==r&&(r in e?"string"==typeof e[r]||e[r]instanceof String||"string"==typeof t[r]||t[r]instanceof String?n&&(e[r]=t[r]):T(e[r],t[r],n):e[r]=t[r]);return e}function C(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var O={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function A(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,(function(e){return O[e]})):e}var I="undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,R=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return a(this,t),n=d(this,f(t).call(this)),I&&m.call(l(n)),n.data=e||{},n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n}return p(t,e),u(t,[{key:"addNamespaces",value:function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,o=[e,t];return n&&"string"!=typeof n&&(o=o.concat(n)),n&&"string"==typeof n&&(o=o.concat(i?n.split(i):n)),e.indexOf(".")>-1&&(o=e.split(".")),w(this.data,o)}},{key:"addResource",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},o=this.options.keySeparator;void 0===o&&(o=".");var s=[e,t];n&&(s=s.concat(o?n.split(o):n)),e.indexOf(".")>-1&&(r=t,t=(s=e.split("."))[1]),this.addNamespaces(t),E(this.data,s,r),i.silent||this.emit("added",e,t,n,r)}},{key:"addResources",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var i in n)"string"!=typeof n[i]&&"[object Array]"!==Object.prototype.toString.apply(n[i])||this.addResource(e,t,i,n[i],{silent:!0});r.silent||this.emit("added",e,t,n)}},{key:"addResourceBundle",value:function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},a=[e,t];e.indexOf(".")>-1&&(r=n,n=t,t=(a=e.split("."))[1]),this.addNamespaces(t);var c=w(this.data,a)||{};r?T(c,n,i):c=s({},c,n),E(this.data,a,c),o.silent||this.emit("added",e,t,n)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?s({},{},this.getResource(e,t)):this.getResource(e,t)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"toJSON",value:function(){return this.data}}]),t}(m),D={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,r,i){var o=this;return e.forEach((function(e){o.processors[e]&&(t=o.processors[e].process(t,n,r,i))})),t}},x={},M=function(e){function t(e){var n,r,i,o,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a(this,t),n=d(this,f(t).call(this)),I&&m.call(l(n)),r=["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],i=e,o=l(n),r.forEach((function(e){i[e]&&(o[e]=i[e])})),n.options=s,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n.logger=_.create("translator"),n}return p(t,e),u(t,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},n=this.resolve(e,t);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(e,t){var n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,i=t.ns||this.options.defaultNS;if(n&&e.indexOf(n)>-1){var o=e.match(this.interpolator.nestingRegexp);if(o&&o.length>0)return{key:e,namespaces:i};var s=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(s[0])>-1)&&(i=s.shift()),e=s.join(r)}return"string"==typeof i&&(i=[i]),{key:e,namespaces:i}}},{key:"translate",value:function(e,n,i){var o=this;if("object"!==r(n)&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),n||(n={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);var a=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,c=this.extractFromKey(e[e.length-1],n),u=c.key,l=c.namespaces,d=l[l.length-1],f=n.lng||this.language,h=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(f&&"cimode"===f.toLowerCase()){if(h){var p=n.nsSeparator||this.options.nsSeparator;return d+p+u}return u}var g=this.resolve(e,n),_=g&&g.res,m=g&&g.usedKey||u,v=g&&g.exactUsedKey||u,y=Object.prototype.toString.apply(_),b=void 0!==n.joinArrays?n.joinArrays:this.options.joinArrays,E=!this.i18nFormat||this.i18nFormat.handleAsObject;if(E&&_&&("string"!=typeof _&&"boolean"!=typeof _&&"number"!=typeof _)&&["[object Number]","[object Function]","[object RegExp]"].indexOf(y)<0&&("string"!=typeof b||"[object Array]"!==y)){if(!n.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(m,_,n):"key '".concat(u," (").concat(this.language,")' returned an object instead of string.");if(a){var w="[object Array]"===y,S=w?[]:{},T=w?v:m;for(var C in _)if(Object.prototype.hasOwnProperty.call(_,C)){var O="".concat(T).concat(a).concat(C);S[C]=this.translate(O,s({},n,{joinArrays:!1,ns:l})),S[C]===O&&(S[C]=_[C])}_=S}}else if(E&&"string"==typeof b&&"[object Array]"===y)(_=_.join(b))&&(_=this.extendTranslation(_,e,n,i));else{var A=!1,I=!1,R=void 0!==n.count&&"string"!=typeof n.count,D=t.hasDefaultValue(n),x=R?this.pluralResolver.getSuffix(f,n.count):"",M=n["defaultValue".concat(x)]||n.defaultValue;!this.isValidLookup(_)&&D&&(A=!0,_=M),this.isValidLookup(_)||(I=!0,_=u);var P=D&&M!==_&&this.options.updateMissing;if(I||A||P){if(this.logger.log(P?"updateKey":"missingKey",f,d,u,P?M:_),a){var N=this.resolve(u,s({},n,{keySeparator:!1}));N&&N.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var k=[],L=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if("fallback"===this.options.saveMissingTo&&L&&L[0])for(var j=0;j<L.length;j++)k.push(L[j]);else"all"===this.options.saveMissingTo?k=this.languageUtils.toResolveHierarchy(n.lng||this.language):k.push(n.lng||this.language);var z=function(e,t,r){o.options.missingKeyHandler?o.options.missingKeyHandler(e,d,t,P?r:_,P,n):o.backendConnector&&o.backendConnector.saveMissing&&o.backendConnector.saveMissing(e,d,t,P?r:_,P,n),o.emit("missingKey",e,d,t,_)};this.options.saveMissing&&(this.options.saveMissingPlurals&&R?k.forEach((function(e){o.pluralResolver.getSuffixes(e).forEach((function(t){z([e],u+t,n["defaultValue".concat(t)]||M)}))})):z(k,u,M))}_=this.extendTranslation(_,e,n,g,i),I&&_===u&&this.options.appendNamespaceToMissingKey&&(_="".concat(d,":").concat(u)),I&&this.options.parseMissingKeyHandler&&(_=this.options.parseMissingKeyHandler(_))}return _}},{key:"extendTranslation",value:function(e,t,n,r,i){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,n,r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(s({},n,{interpolation:s({},this.options.interpolation,n.interpolation)}));var a,c=n.interpolation&&n.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;if(c){var u=e.match(this.interpolator.nestingRegexp);a=u&&u.length}var l=n.replace&&"string"!=typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(l=s({},this.options.interpolation.defaultVariables,l)),e=this.interpolator.interpolate(e,l,n.lng||this.language,n),c){var d=e.match(this.interpolator.nestingRegexp);a<(d&&d.length)&&(n.nest=!1)}!1!==n.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return i&&i[0]===r[0]&&!n.context?(o.logger.warn("It seems you are nesting recursively key: ".concat(r[0]," in key: ").concat(t[0])),null):o.translate.apply(o,r.concat([t]))}),n)),n.interpolation&&this.interpolator.reset()}var f=n.postProcess||this.options.postProcess,h="string"==typeof f?[f]:f;return null!=e&&h&&h.length&&!1!==n.applyPostProcessor&&(e=D.handle(h,e,t,this.options&&this.options.postProcessPassResolved?s({i18nResolved:r},n):n,this)),e}},{key:"resolve",value:function(e){var t,n,r,i,o,s=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.forEach((function(e){if(!s.isValidLookup(t)){var c=s.extractFromKey(e,a),u=c.key;n=u;var l=c.namespaces;s.options.fallbackNS&&(l=l.concat(s.options.fallbackNS));var d=void 0!==a.count&&"string"!=typeof a.count,f=void 0!==a.context&&"string"==typeof a.context&&""!==a.context,h=a.lngs?a.lngs:s.languageUtils.toResolveHierarchy(a.lng||s.language,a.fallbackLng);l.forEach((function(e){s.isValidLookup(t)||(o=e,!x["".concat(h[0],"-").concat(e)]&&s.utils&&s.utils.hasLoadedNamespace&&!s.utils.hasLoadedNamespace(o)&&(x["".concat(h[0],"-").concat(e)]=!0,s.logger.warn('key "'.concat(n,'" for languages "').concat(h.join(", "),'" won\'t get resolved as namespace "').concat(o,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),h.forEach((function(n){if(!s.isValidLookup(t)){i=n;var o,c,l=u,h=[l];if(s.i18nFormat&&s.i18nFormat.addLookupKeys)s.i18nFormat.addLookupKeys(h,u,n,e,a);else d&&(o=s.pluralResolver.getSuffix(n,a.count)),d&&f&&h.push(l+o),f&&h.push(l+="".concat(s.options.contextSeparator).concat(a.context)),d&&h.push(l+=o);for(;c=h.pop();)s.isValidLookup(t)||(r=c,t=s.getResource(n,e,c,a))}})))}))}})),{res:t,usedKey:n,exactUsedKey:r,usedLng:i,usedNS:o}}},{key:"isValidLookup",value:function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}}],[{key:"hasDefaultValue",value:function(e){var t="defaultValue";for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,12)&&void 0!==e[n])return!0;return!1}}]),t}(m);function P(e){return e.charAt(0).toUpperCase()+e.slice(1)}var N=function(){function e(t){a(this,e),this.options=t,this.whitelist=this.options.supportedLngs||!1,this.supportedLngs=this.options.supportedLngs||!1,this.logger=_.create("languageUtils")}return u(e,[{key:"getScriptPartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}},{key:"getLanguagePartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])}},{key:"formatLanguageCode",value:function(e){if("string"==typeof e&&e.indexOf("-")>-1){var t=["hans","hant","latn","cyrl","cans","mong","arab"],n=e.split("-");return this.options.lowerCaseLng?n=n.map((function(e){return e.toLowerCase()})):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=P(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=P(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=P(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isWhitelisted",value:function(e){return this.logger.deprecate("languageUtils.isWhitelisted",'function "isWhitelisted" will be renamed to "isSupportedCode" in the next major - please make sure to rename it\'s usage asap.'),this.isSupportedCode(e)}},{key:"isSupportedCode",value:function(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}},{key:"getBestMatchFromCodes",value:function(e){var t,n=this;return e?(e.forEach((function(e){if(!t){var r=n.formatLanguageCode(e);n.options.supportedLngs&&!n.isSupportedCode(r)||(t=r)}})),!t&&this.options.supportedLngs&&e.forEach((function(e){if(!t){var r=n.getLanguagePartFromCode(e);if(n.isSupportedCode(r))return t=r;t=n.options.supportedLngs.find((function(e){if(0===e.indexOf(r))return e}))}})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t):null}},{key:"getFallbackCodes",value:function(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),"string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}},{key:"toResolveHierarchy",value:function(e,t){var n=this,r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),i=[],o=function(e){e&&(n.isSupportedCode(e)?i.push(e):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return"string"==typeof e&&e.indexOf("-")>-1?("languageOnly"!==this.options.load&&o(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&o(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&o(this.getLanguagePartFromCode(e))):"string"==typeof e&&o(this.formatLanguageCode(e)),r.forEach((function(e){i.indexOf(e)<0&&o(n.formatLanguageCode(e))})),i}}]),e}(),k=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],L={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)}};var j=function(){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,e),this.languageUtils=t,this.options=r,this.logger=_.create("pluralResolver"),this.rules=(n={},k.forEach((function(e){e.lngs.forEach((function(t){n[t]={numbers:e.nr,plurals:L[e.fc]}}))})),n)}return u(e,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e){return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var t=this.getRule(e);return t&&t.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(e,t){return this.getSuffixes(e).map((function(e){return t+e}))}},{key:"getSuffixes",value:function(e){var t=this,n=this.getRule(e);return n?n.numbers.map((function(n){return t.getSuffix(e,n)})):[]}},{key:"getSuffix",value:function(e,t){var n=this,r=this.getRule(e);if(r){var i=r.noAbs?r.plurals(t):r.plurals(Math.abs(t)),o=r.numbers[i];this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]&&(2===o?o="plural":1===o&&(o=""));var s=function(){return n.options.prepend&&o.toString()?n.options.prepend+o.toString():o.toString()};return"v1"===this.options.compatibilityJSON?1===o?"":"number"==typeof o?"_plural_".concat(o.toString()):s():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]?s():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}return this.logger.warn("no plural rule found for: ".concat(e)),""}}]),e}(),z=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.logger=_.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(e){return e},this.init(t)}return u(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});var t=e.interpolation;this.escape=void 0!==t.escape?t.escape:A,this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.useRawValueToEscape=void 0!==t.useRawValueToEscape&&t.useRawValueToEscape,this.prefix=t.prefix?C(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?C(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?C(t.nestingPrefix):t.nestingPrefixEscaped||C("$t("),this.nestingSuffix=t.nestingSuffix?C(t.nestingSuffix):t.nestingSuffixEscaped||C(")"),this.nestingOptionsSeparator=t.nestingOptionsSeparator?t.nestingOptionsSeparator:t.nestingOptionsSeparator||",",this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=void 0!==t.alwaysFormat&&t.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(e,t,n,r){var i,o,s,a=this,c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function u(e){return e.replace(/\$/g,"$$$$")}var l=function(e){if(e.indexOf(a.formatSeparator)<0){var i=S(t,c,e);return a.alwaysFormat?a.format(i,void 0,n):i}var o=e.split(a.formatSeparator),s=o.shift().trim(),u=o.join(a.formatSeparator).trim();return a.format(S(t,c,s),u,n,r)};this.resetRegExp();var d=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,f=r&&r.interpolation&&r.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(e){return u(e)}},{regex:this.regexp,safeValue:function(e){return a.escapeValue?u(a.escape(e)):u(e)}}].forEach((function(t){for(s=0;i=t.regex.exec(e);){if(void 0===(o=l(i[1].trim())))if("function"==typeof d){var n=d(e,i,r);o="string"==typeof n?n:""}else{if(f){o=i[0];continue}a.logger.warn("missed to pass in variable ".concat(i[1]," for interpolating ").concat(e)),o=""}else"string"==typeof o||a.useRawValueToEscape||(o=y(o));if(e=e.replace(i[0],t.safeValue(o)),t.regex.lastIndex=0,++s>=a.maxReplaces)break}})),e}},{key:"nest",value:function(e,t){var n,r,i=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=s({},o);function c(e,t){var n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;var r=e.split(new RegExp("".concat(n,"[ ]*{"))),i="{".concat(r[1]);e=r[0],i=(i=this.interpolate(i,a)).replace(/'/g,'"');try{a=JSON.parse(i),t&&(a=s({},t,a))}catch(t){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),t),"".concat(e).concat(n).concat(i)}return delete a.defaultValue,e}for(a.applyPostProcessor=!1,delete a.defaultValue;n=this.nestingRegexp.exec(e);){var u=[],l=!1;if(n[0].includes(this.formatSeparator)&&!/{.*}/.test(n[1])){var d=n[1].split(this.formatSeparator).map((function(e){return e.trim()}));n[1]=d.shift(),u=d,l=!0}if((r=t(c.call(this,n[1].trim(),a),a))&&n[0]===e&&"string"!=typeof r)return r;"string"!=typeof r&&(r=y(r)),r||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),r=""),l&&(r=u.reduce((function(e,t){return i.format(e,t,o.lng,o)}),r.trim())),e=e.replace(n[0],r),this.regexp.lastIndex=0}return e}}]),e}();var F=function(e){function t(e,n,r){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return a(this,t),i=d(this,f(t).call(this)),I&&m.call(l(i)),i.backend=e,i.store=n,i.services=r,i.languageUtils=r.languageUtils,i.options=o,i.logger=_.create("backendConnector"),i.state={},i.queue=[],i.backend&&i.backend.init&&i.backend.init(r,o.backend,o),i}return p(t,e),u(t,[{key:"queueLoad",value:function(e,t,n,r){var i=this,o=[],s=[],a=[],c=[];return e.forEach((function(e){var r=!0;t.forEach((function(t){var a="".concat(e,"|").concat(t);!n.reload&&i.store.hasResourceBundle(e,t)?i.state[a]=2:i.state[a]<0||(1===i.state[a]?s.indexOf(a)<0&&s.push(a):(i.state[a]=1,r=!1,s.indexOf(a)<0&&s.push(a),o.indexOf(a)<0&&o.push(a),c.indexOf(t)<0&&c.push(t)))})),r||a.push(e)})),(o.length||s.length)&&this.queue.push({pending:s,loaded:{},errors:[],callback:r}),{toLoad:o,pending:s,toLoadLanguages:a,toLoadNamespaces:c}}},{key:"loaded",value:function(e,t,n){var r=e.split("|"),i=r[0],o=r[1];t&&this.emit("failedLoading",i,o,t),n&&this.store.addResourceBundle(i,o,n),this.state[e]=t?-1:2;var s={};this.queue.forEach((function(n){var r,a,c,u,l,d;r=n.loaded,a=o,u=b(r,[i],Object),l=u.obj,d=u.k,l[d]=l[d]||[],c&&(l[d]=l[d].concat(a)),c||l[d].push(a),function(e,t){for(var n=e.indexOf(t);-1!==n;)e.splice(n,1),n=e.indexOf(t)}(n.pending,e),t&&n.errors.push(t),0!==n.pending.length||n.done||(Object.keys(n.loaded).forEach((function(e){s[e]||(s[e]=[]),n.loaded[e].length&&n.loaded[e].forEach((function(t){s[e].indexOf(t)<0&&s[e].push(t)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",s),this.queue=this.queue.filter((function(e){return!e.done}))}},{key:"read",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:350,s=arguments.length>5?arguments[5]:void 0;return e.length?this.backend[n](e,t,(function(a,c){a&&c&&i<5?setTimeout((function(){r.read.call(r,e,t,n,i+1,2*o,s)}),o):s(a,c)})):s(null,{})}},{key:"prepareLoading",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);var o=this.queueLoad(e,t,r,i);if(!o.toLoad.length)return o.pending.length||i(),null;o.toLoad.forEach((function(e){n.loadOne(e)}))}},{key:"load",value:function(e,t,n){this.prepareLoading(e,t,{},n)}},{key:"reload",value:function(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}},{key:"loadOne",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=e.split("|"),i=r[0],o=r[1];this.read(i,o,"read",void 0,void 0,(function(r,s){r&&t.logger.warn("".concat(n,"loading namespace ").concat(o," for language ").concat(i," failed"),r),!r&&s&&t.logger.log("".concat(n,"loaded namespace ").concat(o," for language ").concat(i),s),t.loaded(e,r,s)}))}},{key:"saveMissing",value:function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)?this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=n&&""!==n&&(this.backend&&this.backend.create&&this.backend.create(e,t,n,r,null,s({},o,{isUpdate:i})),e&&e[0]&&this.store.addResource(e[0],t,n,r))}}]),t}(m);function B(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.whitelist&&(e.whitelist&&e.whitelist.indexOf("cimode")<0&&(e.whitelist=e.whitelist.concat(["cimode"])),e.supportedLngs=e.whitelist),e.nonExplicitWhitelist&&(e.nonExplicitSupportedLngs=e.nonExplicitWhitelist),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function U(){}const G=new(function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(a(this,t),e=d(this,f(t).call(this)),I&&m.call(l(e)),e.options=B(n),e.services={},e.logger=_,e.modules={external:[]},r&&!e.isInitialized&&!n.isClone){if(!e.options.initImmediate)return e.init(n,r),d(e,l(e));setTimeout((function(){e.init(n,r)}),0)}return e}return p(t,e),u(t,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;function i(e){return e?"function"==typeof e?new e:e:null}if("function"==typeof t&&(n=t,t={}),t.whitelist&&!t.supportedLngs&&this.logger.deprecate("whitelist",'option "whitelist" will be renamed to "supportedLngs" in the next major - please make sure to rename this option asap.'),t.nonExplicitWhitelist&&!t.nonExplicitSupportedLngs&&this.logger.deprecate("whitelist",'options "nonExplicitWhitelist" will be renamed to "nonExplicitSupportedLngs" in the next major - please make sure to rename this option asap.'),this.options=s({},{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if("object"===r(e[1])&&(t=e[1]),"string"==typeof e[1]&&(t.defaultValue=e[1]),"string"==typeof e[2]&&(t.tDescription=e[2]),"object"===r(e[2])||"object"===r(e[3])){var n=e[3]||e[2];Object.keys(n).forEach((function(e){t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:function(e,t,n,r){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!1}},this.options,B(t)),this.format=this.options.interpolation.format,n||(n=U),!this.options.isClone){this.modules.logger?_.init(i(this.modules.logger),this.options):_.init(null,this.options);var o=new N(this.options);this.store=new R(this.options.resources,this.options);var a=this.services;a.logger=_,a.resourceStore=this.store,a.languageUtils=o,a.pluralResolver=new j(o,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),a.interpolator=new z(this.options),a.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},a.backendConnector=new F(i(this.modules.backend),a.resourceStore,a,this.options),a.backendConnector.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit.apply(e,[t].concat(r))})),this.modules.languageDetector&&(a.languageDetector=i(this.modules.languageDetector),a.languageDetector.init(a,this.options.detection,this.options)),this.modules.i18nFormat&&(a.i18nFormat=i(this.modules.i18nFormat),a.i18nFormat.init&&a.i18nFormat.init(this)),this.translator=new M(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit.apply(e,[t].concat(r))})),this.modules.external.forEach((function(t){t.init&&t.init(e)}))}if(this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.length>0&&"dev"!==c[0]&&(this.options.lng=c[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments)}}));["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments),e}}));var u=v(),l=function(){var t=function(t,r){e.isInitialized&&e.logger.warn("init: i18next is already initialized. You should call init just once!"),e.isInitialized=!0,e.options.isClone||e.logger.log("initialized",e.options),e.emit("initialized",e.options),u.resolve(r),n(t,r)};if(e.languages&&"v1"!==e.options.compatibilityAPI&&!e.isInitialized)return t(null,e.t.bind(e));e.changeLanguage(e.options.lng,t)};return this.options.resources||!this.options.initImmediate?l():setTimeout(l,0),u}},{key:"loadResources",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U,r="string"==typeof e?e:this.language;if("function"==typeof e&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(r&&"cimode"===r.toLowerCase())return n();var i=[],o=function(e){e&&t.services.languageUtils.toResolveHierarchy(e).forEach((function(e){i.indexOf(e)<0&&i.push(e)}))};if(r)o(r);else this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach((function(e){return o(e)}));this.options.preload&&this.options.preload.forEach((function(e){return o(e)})),this.services.backendConnector.load(i,this.options.ns,n)}else n(null)}},{key:"reloadResources",value:function(e,t,n){var r=v();return e||(e=this.languages),t||(t=this.options.ns),n||(n=U),this.services.backendConnector.reload(e,t,(function(e){r.resolve(),n(e)})),r}},{key:"use",value:function(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&D.addPostProcessor(e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"changeLanguage",value:function(e,t){var n=this;this.isLanguageChangingTo=e;var r=v();this.emit("languageChanging",e);var i=function(e){var i="string"==typeof e?e:n.services.languageUtils.getBestMatchFromCodes(e);i&&(n.language||(n.language=i,n.languages=n.services.languageUtils.toResolveHierarchy(i)),n.translator.language||n.translator.changeLanguage(i),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(i)),n.loadResources(i,(function(e){!function(e,i){i?(n.language=i,n.languages=n.services.languageUtils.toResolveHierarchy(i),n.translator.changeLanguage(i),n.isLanguageChangingTo=void 0,n.emit("languageChanged",i),n.logger.log("languageChanged",i)):n.isLanguageChangingTo=void 0,r.resolve((function(){return n.t.apply(n,arguments)})),t&&t(e,(function(){return n.t.apply(n,arguments)}))}(e,i)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(i):i(e):i(this.services.languageDetector.detect()),r}},{key:"getFixedT",value:function(e,t){var n=this,i=function e(t,i){var o;if("object"!==r(i)){for(var a=arguments.length,c=new Array(a>2?a-2:0),u=2;u<a;u++)c[u-2]=arguments[u];o=n.options.overloadTranslationOptionHandler([t,i].concat(c))}else o=s({},i);return o.lng=o.lng||e.lng,o.lngs=o.lngs||e.lngs,o.ns=o.ns||e.ns,n.t(t,o)};return"string"==typeof e?i.lng=e:i.lngs=e,i.ns=t,i}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"hasLoadedNamespace",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var r=this.languages[0],i=!!this.options&&this.options.fallbackLng,o=this.languages[this.languages.length-1];if("cimode"===r.toLowerCase())return!0;var s=function(e,n){var r=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===r||2===r};if(n.precheck){var a=n.precheck(this,s);if(void 0!==a)return a}return!!this.hasResourceBundle(r,e)||(!this.services.backendConnector.backend||!(!s(r,e)||i&&!s(o,e)))}},{key:"loadNamespaces",value:function(e,t){var n=this,r=v();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach((function(e){n.options.ns.indexOf(e)<0&&n.options.ns.push(e)})),this.loadResources((function(e){r.resolve(),t&&t(e)})),r):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(e,t){var n=v();"string"==typeof e&&(e=[e]);var r=this.options.preload||[],i=e.filter((function(e){return r.indexOf(e)<0}));return i.length?(this.options.preload=r.concat(i),this.loadResources((function(e){n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}},{key:"dir",value:function(e){if(e||(e=this.languages&&this.languages.length>0?this.languages[0]:this.language),!e)return"rtl";return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(e))>=0?"rtl":"ltr"}},{key:"createInstance",value:function(){return new t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}},{key:"cloneInstance",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U,i=s({},this.options,n,{isClone:!0}),o=new t(i);return["store","services","language"].forEach((function(t){o[t]=e[t]})),o.services=s({},this.services),o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o.translator=new M(o.services,o.options),o.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];o.emit.apply(o,[e].concat(n))})),o.init(i,r),o.translator.options=o.options,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}}]),t}(m));var q=function(e,t){return q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},q(e,t)};function V(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}q(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var $=function(){return $=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},$.apply(this,arguments)};Object.create;function H(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;"function"==typeof SuppressedError&&SuppressedError;var W,K,J;function Y(e){return e.type===K.literal}function X(e){return e.type===K.argument}function Z(e){return e.type===K.number}function Q(e){return e.type===K.date}function ee(e){return e.type===K.time}function te(e){return e.type===K.select}function ne(e){return e.type===K.plural}function re(e){return e.type===K.pound}function ie(e){return e.type===K.tag}function oe(e){return!(!e||"object"!=typeof e||e.type!==J.number)}function se(e){return!(!e||"object"!=typeof e||e.type!==J.dateTime)}!function(e){e[e.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",e[e.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",e[e.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",e[e.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",e[e.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",e[e.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",e[e.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",e[e.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",e[e.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",e[e.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",e[e.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",e[e.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",e[e.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",e[e.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",e[e.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",e[e.INVALID_TAG=23]="INVALID_TAG",e[e.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",e[e.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",e[e.UNCLOSED_TAG=27]="UNCLOSED_TAG"}(W||(W={})),function(e){e[e.literal=0]="literal",e[e.argument=1]="argument",e[e.number=2]="number",e[e.date=3]="date",e[e.time=4]="time",e[e.select=5]="select",e[e.plural=6]="plural",e[e.pound=7]="pound",e[e.tag=8]="tag"}(K||(K={})),function(e){e[e.number=0]="number",e[e.dateTime=1]="dateTime"}(J||(J={}));var ae=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,ce=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function ue(e){var t={};return e.replace(ce,(function(e){var n=e.length;switch(e[0]){case"G":t.era=4===n?"long":5===n?"narrow":"short";break;case"y":t.year=2===n?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":t.month=["numeric","2-digit","short","long","narrow"][n-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":t.day=["numeric","2-digit"][n-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":t.weekday=4===n?"short":5===n?"narrow":"short";break;case"e":if(n<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][n-4];break;case"c":if(n<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][n-4];break;case"a":t.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":t.hourCycle="h12",t.hour=["numeric","2-digit"][n-1];break;case"H":t.hourCycle="h23",t.hour=["numeric","2-digit"][n-1];break;case"K":t.hourCycle="h11",t.hour=["numeric","2-digit"][n-1];break;case"k":t.hourCycle="h24",t.hour=["numeric","2-digit"][n-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":t.minute=["numeric","2-digit"][n-1];break;case"s":t.second=["numeric","2-digit"][n-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":t.timeZoneName=n<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""})),t}var le=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;var de,fe=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,he=/^(@+)?(\+|#+)?$/g,pe=/(\*)(0+)|(#+)(0+)|(0+)/g,ge=/^(0+)$/;function _e(e){var t={};return e.replace(he,(function(e,n,r){return"string"!=typeof r?(t.minimumSignificantDigits=n.length,t.maximumSignificantDigits=n.length):"+"===r?t.minimumSignificantDigits=n.length:"#"===n[0]?t.maximumSignificantDigits=n.length:(t.minimumSignificantDigits=n.length,t.maximumSignificantDigits=n.length+("string"==typeof r?r.length:0)),""})),t}function me(e){switch(e){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function ve(e){var t;if("E"===e[0]&&"E"===e[1]?(t={notation:"engineering"},e=e.slice(2)):"E"===e[0]&&(t={notation:"scientific"},e=e.slice(1)),t){var n=e.slice(0,2);if("+!"===n?(t.signDisplay="always",e=e.slice(2)):"+?"===n&&(t.signDisplay="exceptZero",e=e.slice(2)),!ge.test(e))throw new Error("Malformed concise eng/scientific notation");t.minimumIntegerDigits=e.length}return t}function ye(e){var t=me(e);return t||{}}function be(e){for(var t={},n=0,r=e;n<r.length;n++){var i=r[n];switch(i.stem){case"percent":case"%":t.style="percent";continue;case"%x100":t.style="percent",t.scale=100;continue;case"currency":t.style="currency",t.currency=i.options[0];continue;case"group-off":case",_":t.useGrouping=!1;continue;case"precision-integer":case".":t.maximumFractionDigits=0;continue;case"measure-unit":case"unit":t.style="unit",t.unit=i.options[0].replace(/^(.*?)-/,"");continue;case"compact-short":case"K":t.notation="compact",t.compactDisplay="short";continue;case"compact-long":case"KK":t.notation="compact",t.compactDisplay="long";continue;case"scientific":t=$($($({},t),{notation:"scientific"}),i.options.reduce((function(e,t){return $($({},e),ye(t))}),{}));continue;case"engineering":t=$($($({},t),{notation:"engineering"}),i.options.reduce((function(e,t){return $($({},e),ye(t))}),{}));continue;case"notation-simple":t.notation="standard";continue;case"unit-width-narrow":t.currencyDisplay="narrowSymbol",t.unitDisplay="narrow";continue;case"unit-width-short":t.currencyDisplay="code",t.unitDisplay="short";continue;case"unit-width-full-name":t.currencyDisplay="name",t.unitDisplay="long";continue;case"unit-width-iso-code":t.currencyDisplay="symbol";continue;case"scale":t.scale=parseFloat(i.options[0]);continue;case"integer-width":if(i.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");i.options[0].replace(pe,(function(e,n,r,i,o,s){if(n)t.minimumIntegerDigits=r.length;else{if(i&&o)throw new Error("We currently do not support maximum integer digits");if(s)throw new Error("We currently do not support exact integer digits")}return""}));continue}if(ge.test(i.stem))t.minimumIntegerDigits=i.stem.length;else if(fe.test(i.stem)){if(i.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");i.stem.replace(fe,(function(e,n,r,i,o,s){return"*"===r?t.minimumFractionDigits=n.length:i&&"#"===i[0]?t.maximumFractionDigits=i.length:o&&s?(t.minimumFractionDigits=o.length,t.maximumFractionDigits=o.length+s.length):(t.minimumFractionDigits=n.length,t.maximumFractionDigits=n.length),""})),i.options.length&&(t=$($({},t),_e(i.options[0])))}else if(he.test(i.stem))t=$($({},t),_e(i.stem));else{var o=me(i.stem);o&&(t=$($({},t),o));var s=ve(i.stem);s&&(t=$($({},t),s))}}return t}var Ee=new RegExp("^"+ae.source+"*"),we=new RegExp(ae.source+"*$");function Se(e,t){return{start:e,end:t}}var Te=!!String.prototype.startsWith,Ce=!!String.fromCodePoint,Oe=!!Object.fromEntries,Ae=!!String.prototype.codePointAt,Ie=!!String.prototype.trimStart,Re=!!String.prototype.trimEnd,De=!!Number.isSafeInteger?Number.isSafeInteger:function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e&&Math.abs(e)<=9007199254740991},xe=!0;try{xe="a"===(null===(de=Fe("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu").exec("a"))||void 0===de?void 0:de[0])}catch(e){xe=!1}var Me,Pe=Te?function(e,t,n){return e.startsWith(t,n)}:function(e,t,n){return e.slice(n,n+t.length)===t},Ne=Ce?String.fromCodePoint:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n,r="",i=e.length,o=0;i>o;){if((n=e[o++])>1114111)throw RangeError(n+" is not a valid code point");r+=n<65536?String.fromCharCode(n):String.fromCharCode(55296+((n-=65536)>>10),n%1024+56320)}return r},ke=Oe?Object.fromEntries:function(e){for(var t={},n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],s=i[1];t[o]=s}return t},Le=Ae?function(e,t){return e.codePointAt(t)}:function(e,t){var n=e.length;if(!(t<0||t>=n)){var r,i=e.charCodeAt(t);return i<55296||i>56319||t+1===n||(r=e.charCodeAt(t+1))<56320||r>57343?i:r-56320+(i-55296<<10)+65536}},je=Ie?function(e){return e.trimStart()}:function(e){return e.replace(Ee,"")},ze=Re?function(e){return e.trimEnd()}:function(e){return e.replace(we,"")};function Fe(e,t){return new RegExp(e,t)}if(xe){var Be=Fe("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");Me=function(e,t){var n;return Be.lastIndex=t,null!==(n=Be.exec(e)[1])&&void 0!==n?n:""}}else Me=function(e,t){for(var n=[];;){var r=Le(e,t);if(void 0===r||qe(r)||Ve(r))break;n.push(r),t+=r>=65536?2:1}return Ne.apply(void 0,n)};var Ue=function(){function e(e,t){void 0===t&&(t={}),this.message=e,this.position={offset:0,line:1,column:1},this.ignoreTag=!!t.ignoreTag,this.requiresOtherClause=!!t.requiresOtherClause,this.shouldParseSkeletons=!!t.shouldParseSkeletons}return e.prototype.parse=function(){if(0!==this.offset())throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},e.prototype.parseMessage=function(e,t,n){for(var r=[];!this.isEOF();){var i=this.char();if(123===i){if((o=this.parseArgument(e,n)).err)return o;r.push(o.val)}else{if(125===i&&e>0)break;if(35!==i||"plural"!==t&&"selectordinal"!==t){if(60===i&&!this.ignoreTag&&47===this.peek()){if(n)break;return this.error(W.UNMATCHED_CLOSING_TAG,Se(this.clonePosition(),this.clonePosition()))}if(60===i&&!this.ignoreTag&&Ge(this.peek()||0)){if((o=this.parseTag(e,t)).err)return o;r.push(o.val)}else{var o;if((o=this.parseLiteral(e,t)).err)return o;r.push(o.val)}}else{var s=this.clonePosition();this.bump(),r.push({type:K.pound,location:Se(s,this.clonePosition())})}}}return{val:r,err:null}},e.prototype.parseTag=function(e,t){var n=this.clonePosition();this.bump();var r=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:K.literal,value:"<"+r+"/>",location:Se(n,this.clonePosition())},err:null};if(this.bumpIf(">")){var i=this.parseMessage(e+1,t,!0);if(i.err)return i;var o=i.val,s=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!Ge(this.char()))return this.error(W.INVALID_TAG,Se(s,this.clonePosition()));var a=this.clonePosition();return r!==this.parseTagName()?this.error(W.UNMATCHED_CLOSING_TAG,Se(a,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:K.tag,value:r,children:o,location:Se(n,this.clonePosition())},err:null}:this.error(W.INVALID_TAG,Se(s,this.clonePosition())))}return this.error(W.UNCLOSED_TAG,Se(n,this.clonePosition()))}return this.error(W.INVALID_TAG,Se(n,this.clonePosition()))},e.prototype.parseTagName=function(){var e,t=this.offset();for(this.bump();!this.isEOF()&&(45===(e=this.char())||46===e||e>=48&&e<=57||95===e||e>=97&&e<=122||e>=65&&e<=90||183==e||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=893||e>=895&&e<=8191||e>=8204&&e<=8205||e>=8255&&e<=8256||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039);)this.bump();return this.message.slice(t,this.offset())},e.prototype.parseLiteral=function(e,t){for(var n=this.clonePosition(),r="";;){var i=this.tryParseQuote(t);if(i)r+=i;else{var o=this.tryParseUnquoted(e,t);if(o)r+=o;else{var s=this.tryParseLeftAngleBracket();if(!s)break;r+=s}}}var a=Se(n,this.clonePosition());return{val:{type:K.literal,value:r,location:a},err:null}},e.prototype.tryParseLeftAngleBracket=function(){return this.isEOF()||60!==this.char()||!this.ignoreTag&&(Ge(e=this.peek()||0)||47===e)?null:(this.bump(),"<");var e},e.prototype.tryParseQuote=function(e){if(this.isEOF()||39!==this.char())return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if("plural"===e||"selectordinal"===e)break;return null;default:return null}this.bump();var t=[this.char()];for(this.bump();!this.isEOF();){var n=this.char();if(39===n){if(39!==this.peek()){this.bump();break}t.push(39),this.bump()}else t.push(n);this.bump()}return Ne.apply(void 0,t)},e.prototype.tryParseUnquoted=function(e,t){if(this.isEOF())return null;var n=this.char();return 60===n||123===n||35===n&&("plural"===t||"selectordinal"===t)||125===n&&e>0?null:(this.bump(),Ne(n))},e.prototype.parseArgument=function(e,t){var n=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(W.EXPECT_ARGUMENT_CLOSING_BRACE,Se(n,this.clonePosition()));if(125===this.char())return this.bump(),this.error(W.EMPTY_ARGUMENT,Se(n,this.clonePosition()));var r=this.parseIdentifierIfPossible().value;if(!r)return this.error(W.MALFORMED_ARGUMENT,Se(n,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(W.EXPECT_ARGUMENT_CLOSING_BRACE,Se(n,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:K.argument,value:r,location:Se(n,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(W.EXPECT_ARGUMENT_CLOSING_BRACE,Se(n,this.clonePosition())):this.parseArgumentOptions(e,t,r,n);default:return this.error(W.MALFORMED_ARGUMENT,Se(n,this.clonePosition()))}},e.prototype.parseIdentifierIfPossible=function(){var e=this.clonePosition(),t=this.offset(),n=Me(this.message,t),r=t+n.length;return this.bumpTo(r),{value:n,location:Se(e,this.clonePosition())}},e.prototype.parseArgumentOptions=function(e,t,n,r){var i,o=this.clonePosition(),s=this.parseIdentifierIfPossible().value,a=this.clonePosition();switch(s){case"":return this.error(W.EXPECT_ARGUMENT_TYPE,Se(o,a));case"number":case"date":case"time":this.bumpSpace();var c=null;if(this.bumpIf(",")){this.bumpSpace();var u=this.clonePosition();if((_=this.parseSimpleArgStyleIfPossible()).err)return _;if(0===(f=ze(_.val)).length)return this.error(W.EXPECT_ARGUMENT_STYLE,Se(this.clonePosition(),this.clonePosition()));c={style:f,styleLocation:Se(u,this.clonePosition())}}if((m=this.tryParseArgumentClose(r)).err)return m;var l=Se(r,this.clonePosition());if(c&&Pe(null==c?void 0:c.style,"::",0)){var d=je(c.style.slice(2));if("number"===s)return(_=this.parseNumberSkeletonFromString(d,c.styleLocation)).err?_:{val:{type:K.number,value:n,location:l,style:_.val},err:null};if(0===d.length)return this.error(W.EXPECT_DATE_TIME_SKELETON,l);var f={type:J.dateTime,pattern:d,location:c.styleLocation,parsedOptions:this.shouldParseSkeletons?ue(d):{}};return{val:{type:"date"===s?K.date:K.time,value:n,location:l,style:f},err:null}}return{val:{type:"number"===s?K.number:"date"===s?K.date:K.time,value:n,location:l,style:null!==(i=null==c?void 0:c.style)&&void 0!==i?i:null},err:null};case"plural":case"selectordinal":case"select":var h=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(W.EXPECT_SELECT_ARGUMENT_OPTIONS,Se(h,$({},h)));this.bumpSpace();var p=this.parseIdentifierIfPossible(),g=0;if("select"!==s&&"offset"===p.value){if(!this.bumpIf(":"))return this.error(W.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,Se(this.clonePosition(),this.clonePosition()));var _;if(this.bumpSpace(),(_=this.tryParseDecimalInteger(W.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,W.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE)).err)return _;this.bumpSpace(),p=this.parseIdentifierIfPossible(),g=_.val}var m,v=this.tryParsePluralOrSelectOptions(e,s,t,p);if(v.err)return v;if((m=this.tryParseArgumentClose(r)).err)return m;var y=Se(r,this.clonePosition());return"select"===s?{val:{type:K.select,value:n,options:ke(v.val),location:y},err:null}:{val:{type:K.plural,value:n,options:ke(v.val),offset:g,pluralType:"plural"===s?"cardinal":"ordinal",location:y},err:null};default:return this.error(W.INVALID_ARGUMENT_TYPE,Se(o,a))}},e.prototype.tryParseArgumentClose=function(e){return this.isEOF()||125!==this.char()?this.error(W.EXPECT_ARGUMENT_CLOSING_BRACE,Se(e,this.clonePosition())):(this.bump(),{val:!0,err:null})},e.prototype.parseSimpleArgStyleIfPossible=function(){for(var e=0,t=this.clonePosition();!this.isEOF();){switch(this.char()){case 39:this.bump();var n=this.clonePosition();if(!this.bumpUntil("'"))return this.error(W.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,Se(n,this.clonePosition()));this.bump();break;case 123:e+=1,this.bump();break;case 125:if(!(e>0))return{val:this.message.slice(t.offset,this.offset()),err:null};e-=1;break;default:this.bump()}}return{val:this.message.slice(t.offset,this.offset()),err:null}},e.prototype.parseNumberSkeletonFromString=function(e,t){var n=[];try{n=function(e){if(0===e.length)throw new Error("Number skeleton cannot be empty");for(var t=[],n=0,r=e.split(le).filter((function(e){return e.length>0}));n<r.length;n++){var i=r[n].split("/");if(0===i.length)throw new Error("Invalid number skeleton");for(var o=i[0],s=i.slice(1),a=0,c=s;a<c.length;a++)if(0===c[a].length)throw new Error("Invalid number skeleton");t.push({stem:o,options:s})}return t}(e)}catch(e){return this.error(W.INVALID_NUMBER_SKELETON,t)}return{val:{type:J.number,tokens:n,location:t,parsedOptions:this.shouldParseSkeletons?be(n):{}},err:null}},e.prototype.tryParsePluralOrSelectOptions=function(e,t,n,r){for(var i,o=!1,s=[],a=new Set,c=r.value,u=r.location;;){if(0===c.length){var l=this.clonePosition();if("select"===t||!this.bumpIf("="))break;var d=this.tryParseDecimalInteger(W.EXPECT_PLURAL_ARGUMENT_SELECTOR,W.INVALID_PLURAL_ARGUMENT_SELECTOR);if(d.err)return d;u=Se(l,this.clonePosition()),c=this.message.slice(l.offset,this.offset())}if(a.has(c))return this.error("select"===t?W.DUPLICATE_SELECT_ARGUMENT_SELECTOR:W.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,u);"other"===c&&(o=!0),this.bumpSpace();var f=this.clonePosition();if(!this.bumpIf("{"))return this.error("select"===t?W.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:W.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,Se(this.clonePosition(),this.clonePosition()));var h=this.parseMessage(e+1,t,n);if(h.err)return h;var p=this.tryParseArgumentClose(f);if(p.err)return p;s.push([c,{value:h.val,location:Se(f,this.clonePosition())}]),a.add(c),this.bumpSpace(),c=(i=this.parseIdentifierIfPossible()).value,u=i.location}return 0===s.length?this.error("select"===t?W.EXPECT_SELECT_ARGUMENT_SELECTOR:W.EXPECT_PLURAL_ARGUMENT_SELECTOR,Se(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!o?this.error(W.MISSING_OTHER_CLAUSE,Se(this.clonePosition(),this.clonePosition())):{val:s,err:null}},e.prototype.tryParseDecimalInteger=function(e,t){var n=1,r=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(n=-1);for(var i=!1,o=0;!this.isEOF();){var s=this.char();if(!(s>=48&&s<=57))break;i=!0,o=10*o+(s-48),this.bump()}var a=Se(r,this.clonePosition());return i?De(o*=n)?{val:o,err:null}:this.error(t,a):this.error(e,a)},e.prototype.offset=function(){return this.position.offset},e.prototype.isEOF=function(){return this.offset()===this.message.length},e.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},e.prototype.char=function(){var e=this.position.offset;if(e>=this.message.length)throw Error("out of bound");var t=Le(this.message,e);if(void 0===t)throw Error("Offset "+e+" is at invalid UTF-16 code unit boundary");return t},e.prototype.error=function(e,t){return{val:null,err:{kind:e,message:this.message,location:t}}},e.prototype.bump=function(){if(!this.isEOF()){var e=this.char();10===e?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=e<65536?1:2)}},e.prototype.bumpIf=function(e){if(Pe(this.message,e,this.offset())){for(var t=0;t<e.length;t++)this.bump();return!0}return!1},e.prototype.bumpUntil=function(e){var t=this.offset(),n=this.message.indexOf(e,t);return n>=0?(this.bumpTo(n),!0):(this.bumpTo(this.message.length),!1)},e.prototype.bumpTo=function(e){if(this.offset()>e)throw Error("targetOffset "+e+" must be greater than or equal to the current offset "+this.offset());for(e=Math.min(e,this.message.length);;){var t=this.offset();if(t===e)break;if(t>e)throw Error("targetOffset "+e+" is at invalid UTF-16 code unit boundary");if(this.bump(),this.isEOF())break}},e.prototype.bumpSpace=function(){for(;!this.isEOF()&&qe(this.char());)this.bump()},e.prototype.peek=function(){if(this.isEOF())return null;var e=this.char(),t=this.offset(),n=this.message.charCodeAt(t+(e>=65536?2:1));return null!=n?n:null},e}();function Ge(e){return e>=97&&e<=122||e>=65&&e<=90}function qe(e){return e>=9&&e<=13||32===e||133===e||e>=8206&&e<=8207||8232===e||8233===e}function Ve(e){return e>=33&&e<=35||36===e||e>=37&&e<=39||40===e||41===e||42===e||43===e||44===e||45===e||e>=46&&e<=47||e>=58&&e<=59||e>=60&&e<=62||e>=63&&e<=64||91===e||92===e||93===e||94===e||96===e||123===e||124===e||125===e||126===e||161===e||e>=162&&e<=165||166===e||167===e||169===e||171===e||172===e||174===e||176===e||177===e||182===e||187===e||191===e||215===e||247===e||e>=8208&&e<=8213||e>=8214&&e<=8215||8216===e||8217===e||8218===e||e>=8219&&e<=8220||8221===e||8222===e||8223===e||e>=8224&&e<=8231||e>=8240&&e<=8248||8249===e||8250===e||e>=8251&&e<=8254||e>=8257&&e<=8259||8260===e||8261===e||8262===e||e>=8263&&e<=8273||8274===e||8275===e||e>=8277&&e<=8286||e>=8592&&e<=8596||e>=8597&&e<=8601||e>=8602&&e<=8603||e>=8604&&e<=8607||8608===e||e>=8609&&e<=8610||8611===e||e>=8612&&e<=8613||8614===e||e>=8615&&e<=8621||8622===e||e>=8623&&e<=8653||e>=8654&&e<=8655||e>=8656&&e<=8657||8658===e||8659===e||8660===e||e>=8661&&e<=8691||e>=8692&&e<=8959||e>=8960&&e<=8967||8968===e||8969===e||8970===e||8971===e||e>=8972&&e<=8991||e>=8992&&e<=8993||e>=8994&&e<=9e3||9001===e||9002===e||e>=9003&&e<=9083||9084===e||e>=9085&&e<=9114||e>=9115&&e<=9139||e>=9140&&e<=9179||e>=9180&&e<=9185||e>=9186&&e<=9254||e>=9255&&e<=9279||e>=9280&&e<=9290||e>=9291&&e<=9311||e>=9472&&e<=9654||9655===e||e>=9656&&e<=9664||9665===e||e>=9666&&e<=9719||e>=9720&&e<=9727||e>=9728&&e<=9838||9839===e||e>=9840&&e<=10087||10088===e||10089===e||10090===e||10091===e||10092===e||10093===e||10094===e||10095===e||10096===e||10097===e||10098===e||10099===e||10100===e||10101===e||e>=10132&&e<=10175||e>=10176&&e<=10180||10181===e||10182===e||e>=10183&&e<=10213||10214===e||10215===e||10216===e||10217===e||10218===e||10219===e||10220===e||10221===e||10222===e||10223===e||e>=10224&&e<=10239||e>=10240&&e<=10495||e>=10496&&e<=10626||10627===e||10628===e||10629===e||10630===e||10631===e||10632===e||10633===e||10634===e||10635===e||10636===e||10637===e||10638===e||10639===e||10640===e||10641===e||10642===e||10643===e||10644===e||10645===e||10646===e||10647===e||10648===e||e>=10649&&e<=10711||10712===e||10713===e||10714===e||10715===e||e>=10716&&e<=10747||10748===e||10749===e||e>=10750&&e<=11007||e>=11008&&e<=11055||e>=11056&&e<=11076||e>=11077&&e<=11078||e>=11079&&e<=11084||e>=11085&&e<=11123||e>=11124&&e<=11125||e>=11126&&e<=11157||11158===e||e>=11159&&e<=11263||e>=11776&&e<=11777||11778===e||11779===e||11780===e||11781===e||e>=11782&&e<=11784||11785===e||11786===e||11787===e||11788===e||11789===e||e>=11790&&e<=11798||11799===e||e>=11800&&e<=11801||11802===e||11803===e||11804===e||11805===e||e>=11806&&e<=11807||11808===e||11809===e||11810===e||11811===e||11812===e||11813===e||11814===e||11815===e||11816===e||11817===e||e>=11818&&e<=11822||11823===e||e>=11824&&e<=11833||e>=11834&&e<=11835||e>=11836&&e<=11839||11840===e||11841===e||11842===e||e>=11843&&e<=11855||e>=11856&&e<=11857||11858===e||e>=11859&&e<=11903||e>=12289&&e<=12291||12296===e||12297===e||12298===e||12299===e||12300===e||12301===e||12302===e||12303===e||12304===e||12305===e||e>=12306&&e<=12307||12308===e||12309===e||12310===e||12311===e||12312===e||12313===e||12314===e||12315===e||12316===e||12317===e||e>=12318&&e<=12319||12320===e||12336===e||64830===e||64831===e||e>=65093&&e<=65094}function $e(e){e.forEach((function(e){if(delete e.location,te(e)||ne(e))for(var t in e.options)delete e.options[t].location,$e(e.options[t].value);else Z(e)&&oe(e.style)||(Q(e)||ee(e))&&se(e.style)?delete e.style.location:ie(e)&&$e(e.children)}))}function He(e,t){void 0===t&&(t={}),t=$({shouldParseSkeletons:!0,requiresOtherClause:!0},t);var n=new Ue(e,t).parse();if(n.err){var r=SyntaxError(W[n.err.kind]);throw r.location=n.err.location,r.originalMessage=n.err.message,r}return(null==t?void 0:t.captureLocation)||$e(n.val),n.val}function We(e,t){var n=t&&t.cache?t.cache:tt,r=t&&t.serializer?t.serializer:Ze;return(t&&t.strategy?t.strategy:Xe)(e,{cache:n,serializer:r})}function Ke(e,t,n,r){var i,o=null==(i=r)||"number"==typeof i||"boolean"==typeof i?r:n(r),s=t.get(o);return void 0===s&&(s=e.call(this,r),t.set(o,s)),s}function Je(e,t,n){var r=Array.prototype.slice.call(arguments,3),i=n(r),o=t.get(i);return void 0===o&&(o=e.apply(this,r),t.set(i,o)),o}function Ye(e,t,n,r,i){return n.bind(t,e,r,i)}function Xe(e,t){return Ye(e,this,1===e.length?Ke:Je,t.cache.create(),t.serializer)}var Ze=function(){return JSON.stringify(arguments)};function Qe(){this.cache=Object.create(null)}Qe.prototype.has=function(e){return e in this.cache},Qe.prototype.get=function(e){return this.cache[e]},Qe.prototype.set=function(e,t){this.cache[e]=t};var et,tt={create:function(){return new Qe}},nt={variadic:function(e,t){return Ye(e,this,Je,t.cache.create(),t.serializer)},monadic:function(e,t){return Ye(e,this,Ke,t.cache.create(),t.serializer)}};!function(e){e.MISSING_VALUE="MISSING_VALUE",e.INVALID_VALUE="INVALID_VALUE",e.MISSING_INTL_API="MISSING_INTL_API"}(et||(et={}));var rt,it=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.code=n,i.originalMessage=r,i}return V(t,e),t.prototype.toString=function(){return"[formatjs Error: "+this.code+"] "+this.message},t}(Error),ot=function(e){function t(t,n,r,i){return e.call(this,'Invalid values for "'+t+'": "'+n+'". Options are "'+Object.keys(r).join('", "')+'"',et.INVALID_VALUE,i)||this}return V(t,e),t}(it),st=function(e){function t(t,n,r){return e.call(this,'Value for "'+t+'" must be of type '+n,et.INVALID_VALUE,r)||this}return V(t,e),t}(it),at=function(e){function t(t,n){return e.call(this,'The intl string context variable "'+t+'" was not provided to the string "'+n+'"',et.MISSING_VALUE,n)||this}return V(t,e),t}(it);function ct(e){return"function"==typeof e}function ut(e,t,n,r,i,o,s){if(1===e.length&&Y(e[0]))return[{type:rt.literal,value:e[0].value}];for(var a=[],c=0,u=e;c<u.length;c++){var l=u[c];if(Y(l))a.push({type:rt.literal,value:l.value});else if(re(l))"number"==typeof o&&a.push({type:rt.literal,value:n.getNumberFormat(t).format(o)});else{var d=l.value;if(!i||!(d in i))throw new at(d,s);var f=i[d];if(X(l))f&&"string"!=typeof f&&"number"!=typeof f||(f="string"==typeof f||"number"==typeof f?String(f):""),a.push({type:"string"==typeof f?rt.literal:rt.object,value:f});else if(Q(l)){var h="string"==typeof l.style?r.date[l.style]:se(l.style)?l.style.parsedOptions:void 0;a.push({type:rt.literal,value:n.getDateTimeFormat(t,h).format(f)})}else if(ee(l)){h="string"==typeof l.style?r.time[l.style]:se(l.style)?l.style.parsedOptions:void 0;a.push({type:rt.literal,value:n.getDateTimeFormat(t,h).format(f)})}else if(Z(l)){(h="string"==typeof l.style?r.number[l.style]:oe(l.style)?l.style.parsedOptions:void 0)&&h.scale&&(f*=h.scale||1),a.push({type:rt.literal,value:n.getNumberFormat(t,h).format(f)})}else{if(ie(l)){var p=l.children,g=l.value,_=i[g];if(!ct(_))throw new st(g,"function",s);var m=_(ut(p,t,n,r,i,o).map((function(e){return e.value})));Array.isArray(m)||(m=[m]),a.push.apply(a,m.map((function(e){return{type:"string"==typeof e?rt.literal:rt.object,value:e}})))}if(te(l)){if(!(v=l.options[f]||l.options.other))throw new ot(l.value,f,Object.keys(l.options),s);a.push.apply(a,ut(v.value,t,n,r,i))}else if(ne(l)){var v;if(!(v=l.options["="+f])){if(!Intl.PluralRules)throw new it('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n',et.MISSING_INTL_API,s);var y=n.getPluralRules(t,{type:l.pluralType}).select(f-(l.offset||0));v=l.options[y]||l.options.other}if(!v)throw new ot(l.value,f,Object.keys(l.options),s);a.push.apply(a,ut(v.value,t,n,r,i,f-(l.offset||0)))}else;}}}return function(e){return e.length<2?e:e.reduce((function(e,t){var n=e[e.length-1];return n&&n.type===rt.literal&&t.type===rt.literal?n.value+=t.value:e.push(t),e}),[])}(a)}function lt(e,t){return t?Object.keys(e).reduce((function(n,r){var i,o;return n[r]=(i=e[r],(o=t[r])?$($($({},i||{}),o||{}),Object.keys(i).reduce((function(e,t){return e[t]=$($({},i[t]),o[t]||{}),e}),{})):i),n}),$({},e)):e}function dt(e){return{create:function(){return{has:function(t){return t in e},get:function(t){return e[t]},set:function(t,n){e[t]=n}}}}}!function(e){e[e.literal=0]="literal",e[e.object=1]="object"}(rt||(rt={}));var ft=function(){function e(t,n,r,i){var o,s=this;if(void 0===n&&(n=e.defaultLocale),this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(e){var t=s.formatToParts(e);if(1===t.length)return t[0].value;var n=t.reduce((function(e,t){return e.length&&t.type===rt.literal&&"string"==typeof e[e.length-1]?e[e.length-1]+=t.value:e.push(t.value),e}),[]);return n.length<=1?n[0]||"":n},this.formatToParts=function(e){return ut(s.ast,s.locales,s.formatters,s.formats,e,void 0,s.message)},this.resolvedOptions=function(){return{locale:Intl.NumberFormat.supportedLocalesOf(s.locales)[0]}},this.getAst=function(){return s.ast},"string"==typeof t){if(this.message=t,!e.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");this.ast=e.__parse(t,{ignoreTag:null==i?void 0:i.ignoreTag})}else this.ast=t;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=lt(e.formats,r),this.locales=n,this.formatters=i&&i.formatters||(void 0===(o=this.formatterCache)&&(o={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:We((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.NumberFormat).bind.apply(e,H([void 0],t)))}),{cache:dt(o.number),strategy:nt.variadic}),getDateTimeFormat:We((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.DateTimeFormat).bind.apply(e,H([void 0],t)))}),{cache:dt(o.dateTime),strategy:nt.variadic}),getPluralRules:We((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.PluralRules).bind.apply(e,H([void 0],t)))}),{cache:dt(o.pluralRules),strategy:nt.variadic})})}return Object.defineProperty(e,"defaultLocale",{get:function(){return e.memoizedDefaultLocale||(e.memoizedDefaultLocale=(new Intl.NumberFormat).resolvedOptions().locale),e.memoizedDefaultLocale},enumerable:!1,configurable:!0}),e.memoizedDefaultLocale=null,e.__parse=He,e.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},e}();const ht=ft;var pt,gt=function(){return gt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},gt.apply(this,arguments)};function _t(e,t,n){function r(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function i(){return!e||"string"==typeof e}void 0===n&&(n=null);for(var o="string"!=typeof t?[].concat(t):t.split(".");o.length>1;){if(i())return{};var s=r(o.shift());!e[s]&&n&&(e[s]=new n),e=e[s]}return i()?{}:{obj:e,k:r(o.shift())}}!function(e){e.keepRaw="keepRaw",e.replaceAnyway="replaceAnyway"}(pt||(pt={}));pt.replaceAnyway;var mt={memoize:!1,memoizeFallback:!1,bindI18n:!1,bindI18nStore:!1,onParseError:pt.replaceAnyway},vt=function(){function e(){this.mem={}}return e.staticInit=function(t){e._i18nextInstance=t},e.prototype.init=function(t,n){var r=this;void 0===t&&(t=e._i18nextInstance);var i={};if((null==t?void 0:t.options)&&(t.options.i18nFormat&&(i=t.options.i18nFormat),i.onParseError=t.options.onParseError,i.missingInterpolationHandler=t.options.missingInterpolationHandler,i.icuConfig=t.options.icuConfig,i.ignoreWarning=!!t.options.ignoreWarning),this.options=Object.assign(mt,n,i),this.formats=this.options.formats,t){var o=this.options,s=o.bindI18n,a=o.bindI18nStore,c=o.memoize;t.IntlMessageFormat=ht,this.IntlMessageFormat=ht,t.ICU=this,c&&(s&&t.on(s,(function(){return r.clearCache()})),a&&t.store.on(a,(function(){return r.clearCache()})))}this.options.localeData&&("[object Array]"===Object.prototype.toString.apply(this.options.localeData)?this.options.localeData.forEach((function(e){return r.addLocaleData(e)})):this.addLocaleData(this.options.localeData))},e.prototype.addLocaleData=function(e){("[object Array]"===Object.prototype.toString.apply(e)?e:[e]).forEach((function(e){e&&e.locale&&ht.__addLocaleData(e)}))},e.prototype.addUserDefinedFormats=function(e){this.formats=this.formats?gt(gt({},this.formats),e):e},e.prototype.checkMissingInterpolation=function(e,t,n,r,i){if(!1===(this.options.icuConfig||{}).strict)return n;for(var o={},s=0,a=e;s<a.length;s++){var c=a[s];if(1===c.type){var u=c.value;if(null===n[u]||void 0===n[u]){if("function"==typeof this.options.missingInterpolationHandler){var l=this.options.missingInterpolationHandler({key:i,text:t,locale:r,interpolation:{key:u,val:n[u]}});if("string"==typeof l){o[u]=l;continue}}switch(this.options.onParseError){case pt.keepRaw:throw new Error;case pt.replaceAnyway:o[u]="{"+u+"}";continue}if("function"==typeof this.options.onParseError){var d=this.options.onParseError(t,u,r,this.IntlMessageFormat);if(!0===d)throw new Error;o[u]="string"==typeof d?d:"{"+u+"}"}else this.options.ignoreWarning,o[u]="{"+u+"}"}}}return Object.assign({},n,o)},e.prototype.parse=function(e,t,n,r,i,o){var s,a=o&&o.resolved&&o.resolved.res,c=this.options.memoize&&n+"."+r+"."+i.replace(/\./g,"###");!a&&t.thirdParamFallback&&t.fallbackText&&(e=t.fallbackText),this.options.memoize&&(s=function(e,t){var n=_t(e,t),r=n.obj,i=n.k;if(r)return r[i]}(this.mem,c));try{return s||(s=new this.IntlMessageFormat(e,n,this.formats,(this.options.icuConfig||{}).formatOptions),this.options.memoize&&(this.options.memoizeFallback||!o||a)&&function(e,t,n){var r=_t(e,t,Object);r.obj[r.k]=n}(this.mem,c,s)),s.format(this.checkMissingInterpolation(s.getAst(),e,t||{},n,i))}catch(t){return e}},e.prototype.addLookupKeys=function(e,t,n,r,i){return e},e.prototype.clearCache=function(){this.mem={}},e.type="i18nFormat",e._i18nextInstance=null,e}(),yt=(vt.name,function(){return yt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},yt.apply(this,arguments)}),bt=/^\s*\[\[__starling_(\d+)_(.*)__\]\]\s*$/;"undefined"!=typeof window&&(window.__STARLING_INCONTEXT_GLOBAL__HOOK__=yt({},window.__STARLING_INCONTEXT_GLOBAL__HOOK__||{payload:{}}));var Et={name:"inContext",type:"postProcessor",process:function(e,t,n,r){if(window&&document.getElementById("INCONTEXT-KEY-MATCH")&&!n.__STARLING_INCONTEXT_FLAG__){window.__STARLING_INCONTEXT_GLOBAL_I18N__||(window.__STARLING_INCONTEXT_GLOBAL_I18N__=r),delete n.keySeparator,delete n.lngs;var i=0;if(t=t.toString(),bt.test(t))(o=t.match(bt))[0],i=o[1],t=o[2];if(bt.test(e)){var o;(o=e.match(bt))[0];o[1];e=o[2]}return window.__STARLING_INCONTEXT_GLOBAL__HOOK__.payload[t]?i=window.__STARLING_INCONTEXT_GLOBAL__HOOK__.payload[t].push({options:n,default:e})-1:(window.__STARLING_INCONTEXT_GLOBAL__HOOK__.payload[t]=[{options:n,default:e}],i=0),"[[__starling_"+i+"_"+t+"__]]"}return e}};function wt(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function St(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wt(r.key),r)}}function Ct(e,t,n){return t&&Tt(e.prototype,t),n&&Tt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ot(e){return function(e){if(Array.isArray(e))return It(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||At(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function At(e,t){if(e){if("string"==typeof e)return It(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?It(e,t):void 0}}function It(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}for(var Rt=["AFN","EUR","ALL","DZD","USD","AOA","XCD","ARS","AMD","AWG","AUD","AZN","BSD","BHD","BDT","BBD","BYN","BZD","XOF","BMD","INR","BTN","BOB","BOV","BAM","BWP","NOK","BRL","BND","BGN","BIF","CVE","KHR","XAF","CAD","KYD","CLP","CLF","CNY","COP","COU","KMF","CDF","NZD","CRC","HRK","CUP","CUC","ANG","CZK","DKK","DJF","DOP","EGP","SVC","ERN","ETB","FKP","FJD","XPF","GMD","GEL","GHS","GIP","GTQ","GBP","GNF","GYD","HTG","HNL","HKD","HUF","ISK","IDR","XDR","IRR","IQD","ILS","JMD","JPY","JOD","KZT","KES","KPW","KRW","KWD","KGS","LAK","LBP","LSL","ZAR","LRD","LYD","CHF","MOP","MKD","MGA","MWK","MYR","MVR","MRO","MUR","XUA","MXN","MXV","MDL","MNT","MAD","MZN","MMK","NAD","NPR","NIO","NGN","OMR","PKR","PAB","PGK","PYG","PEN","PHP","PLN","QAR","RON","RUB","RWF","SHP","WST","STD","SAR","RSD","SCR","SLL","SGD","XSU","SBD","SOS","SSP","LKR","SDG","SRD","SZL","SEK","CHE","CHW","SYP","TWD","TJS","TZS","THB","TOP","TTD","TND","TRY","TMT","UGX","UAH","AED","USN","UYU","UYI","UZS","VUV","VEF","VND","YER","ZMW","ZWL","XBA","XBB","XBC","XBD","XTS","XXX","XAU","XPD","XPT","XAG"],Dt={},xt=0;xt<Rt.length;xt++)Dt[Rt[xt]]={style:"currency",currency:Rt[xt]};var Mt={number:Dt},Pt="languageTransformer";function Nt(e){return function(t){return t.type===e}}function kt(e,t){var n=e;return(t||[]).map((function(t){n=t.process(e)||n})),n}var Lt,jt={lng:"zh-CN",fallbackLng:["en-US"],inContext:!0},zt=[vt,Et],Ft=function(){function e(t,n){St(this,e),this._waitingToAddResourceBundle=[],null!=t&&t.copiedI18nextInstance?this.instance=t.copiedI18nextInstance:(this._handlePlugins(n),this._handleConfigs(t),this.instance=G.createInstance(),this.instance.isInitialized=!1)}return Ct(e,[{key:"_handlePlugins",value:function(e){var t,n;!1===(null===(t=this.config)||void 0===t||null===(n=t.icuConfig)||void 0===n?void 0:n.open)&&zt.shift(),this.plugins=Array.isArray(e)?e.concat(zt):zt}},{key:"_handleConfigs",value:function(e){this.userLng=(null==e?void 0:e.lng)||null,this.config=Object.assign({},jt,e||{})}},{key:"language",get:function(){return(this.instance||{}).language}},{key:"createInstance",value:function(){var e=this;return new Promise((function(t,n){"undefined"!=typeof window&&!window.CocosEngine&&e.config.inContext&&(e.config.postProcess=[].concat(["inContext"],e.config.postProcess||[]),window.__STARLING_DEVTOOLS_I18N=e.instance),e.plugins.map((function(t){"IES_INTL_ICU_PLUGIN"===t.name&&t.staticInit(e.instance),e.instance.use(t)}));var r=e.config;e.config.formats=Object.assign({},e.config.formats,Mt);var i=kt(r.lng,e.plugins.filter(Nt(Pt)));e.instance.init(Object.assign({},r,{lng:i,i18nFormat:{formats:e.config.formats}}),(function(r,i){try{var o,s=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=At(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}(e._waitingToAddResourceBundle);try{for(s.s();!(o=s.n()).done;){var a,c=o.value;(a=e.instance).addResourceBundle.apply(a,Ot(c))}}catch(r){s.e(r)}finally{s.f()}e._waitingToAddResourceBundle=[]}catch(r){}r||(e._updateLanguages(),t({t:i,err:r})),e.init=!0,n({t:i,err:r})}))}))}},{key:"_updateLanguages",value:function(){this.languages=this.instance?Array.from(new Set([this.instance.language].concat(Ot(this.instance.languages)))):null}},{key:"getLanguages",value:function(){return this.languages}},{key:"changeLanguage",value:function(e,t){var n=this;this.config.lng=e,this.instance.changeLanguage(e,(function(e,r){e||n._updateLanguages(),t&&t(e,r)}))}},{key:"changeLanguageWithPromise",value:function(e){var t=this;return new Promise((function(n,r){t.config.lng=e,t.instance.changeLanguage(e,(function(e,i){e&&r({err:e,t:i}),t._updateLanguages(),n({err:e,t:i})}))}))}},{key:"getDir",value:function(e){return this.instance.dir(e)}},{key:"t",value:function(e,t,n){var r=Array.isArray(e)?Array.from(e).map((function(){return" "})).join(""):Array(e.length).fill(" "),i=Object.assign({keySeparator:r,nsSeparator:r},t);return"thirdParamFallback"in this.config&&this.config.thirdParamFallback&&(i.thirdParamFallback=!0),this.instance.t(e,n,i)}},{key:"addResourceBundle",value:function(e,t,n,r,i){return this.instance.isInitialized?this.instance.addResourceBundle(e,t,n,r,i):(this._waitingToAddResourceBundle.push([e,t,n,!!r,!!i]),this.instance)}},{key:"cloneInstance",value:function(t,n){var r=this.instance.cloneInstance(t,n),i=new e({copiedI18nextInstance:r});return i.t=this.t.bind(i),i.config=this.config,i.plugins=this.plugins,i.languages=this.languages,i.init=r.isInitialized||Boolean(this.init),i.userLng=this.userLng,r.on("initialized",(function(){i.init=!0})),i}}]),e}(),Bt="Starling_intl:",Ut=function(){for(var e,t="".concat(Bt," [WARNING]"),n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];(e=console).warn.apply(e,[t].concat(r))},Gt=function(){for(var e,t="".concat(Bt," [ERROR]"),n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];(e=console).error.apply(e,[t].concat(r))};function qt(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function Vt(){}function $t(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}!function(e){e.intl3rdParty="intl3rdParty",e.backend="backend",e.logger="logger",e.languageDetector="languageDetector",e.postProcessor="postProcessor",e.i18nFormat="i18nFormat",e["3rdParty"]="3rdParty"}(Lt||(Lt={}));var Ht=null,Wt=function(){function e(t){var n;St(this,e),this.plugins=[],this.i18nInstance=null!==(n=null==t?void 0:t.i18nInstance)&&void 0!==n?n:new Ft}return Ct(e,[{key:"use",value:function(e){return this.plugins.includes(e)?(Ut("Plugin: ".concat(e.name," has beeninit installed.")),this):(this.plugins.push(e),this)}},{key:"init",value:function(e,t){try{var n=this;return n.ignoreWarning=e.ignoreWarning,n.i18nInstance._handleConfigs(e),n.i18nInstance._handlePlugins(n.plugins),qt(function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}((function(){return qt(n.i18nInstance.createInstance(),(function(e){var r,i=e.err,o=e.t,s=n.plugins.filter((function(e){return e.type===Lt.intl3rdParty}));return qt((r=s.map($t((function(e){if(e&&"function"==typeof e.init)return function(e,t){if(!t)return e&&e.then?e.then(Vt):Promise.resolve()}((e.init instanceof Promise?e.init:$t((function(t){return Promise.resolve(e.init(t))})))(n))}))),new Promise((function(e,t){if(Array.isArray(r)||(r=Array.from(r)),r.length<=0)return e([]);var n=[];r=r.map((function(i,o){return function(){("function"==typeof i?new Promise(i):Promise.resolve(i)).then((function(t){n[o]=t,o===r.length-1?e(n):r[o+1]()}),t)}})),r[0]()}))),(function(){return"function"==typeof t&&t(i,o),{err:i,t:o}}))}))}),(function(e){return Gt("The instance init error: ".concat(e)),{err:e,t:function(e){return e}}})))}catch(e){return Promise.reject(e)}}},{key:"language",get:function(){return(this.i18nInstance||{}).language}},{key:"setLang",value:function(e,t){var n=kt(e,this.plugins.filter(Nt(Pt)));this.i18nInstance.changeLanguage(n,t)}},{key:"getLanguages",value:function(){return this.i18nInstance.getLanguages()}},{key:"setLangWithPromise",value:function(e){var t=kt(e,this.plugins.filter(Nt(Pt)));return this.i18nInstance.changeLanguageWithPromise(t)}},{key:"dir",value:function(e){return this.i18nInstance.getDir(e)}},{key:"t",value:function(e,t,n){var r=null;return(r=void 0===this?Ht:this).ignoreWarning||r.i18nInstance&&r.i18nInstance.init?!e||"string"==typeof e&&!e.trim()?"":r.i18nInstance.t(e,t,n):(Gt("The instance has not been initialized: i18n.t('".concat(e,"'").concat(t?","+JSON.stringify(t):"",");")),null!=n?n:Array.isArray(e)?e[0]:e)}},{key:"addResourceBundle",value:function(e,t,n,r,i){return this.i18nInstance.addResourceBundle(e,t,n,r,i)}},{key:"cloneInstance",value:function(t){var n=this.i18nInstance.cloneInstance(t),r=new e({i18nInstance:n});return r.t=this.t.bind(r),r.plugins=this.plugins,r.ignoreWarning=this.ignoreWarning,r}}]),e}(),Kt=Ht=new Wt;Kt.t=Kt.t.bind(Kt);var Jt=Wt;const Yt=Kt},1149:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DiffMatchPatch:()=>p,DiffOperation:()=>u,PatchObject:()=>h});var r={};n.r(r),n.d(r,{max:()=>d,min:()=>l});const i=/[^a-zA-Z0-9]/,o=/\s/,s=/[\r\n]/,a=/\n\r?\n$/,c=/^\r?\n\r?\n/;var u;function l(e,t){return e<t?e:t}function d(e,t){return e>t?e:t}!function(e){e[e.DIFF_DELETE=-1]="DIFF_DELETE",e[e.DIFF_INSERT=1]="DIFF_INSERT",e[e.DIFF_EQUAL=0]="DIFF_EQUAL"}(u||(u={}));const f=r;class h{diffs=[];start1=0;start2=0;length1=0;length2=0;toString(){let e,t;e=0===this.length1?this.start1+",0":1===this.length1?this.start1+1:this.start1+1+","+this.length1,t=0===this.length2?this.start2+",0":1===this.length2?this.start2+1:this.start2+1+","+this.length2;const n=["@@ -"+e+" +"+t+" @@\n"];let r;for(let e=0;e<this.diffs.length;e++){switch(this.diffs[e][0]){case u.DIFF_INSERT:r="+";break;case u.DIFF_DELETE:r="-";break;case u.DIFF_EQUAL:r=" "}n[e+1]=r+encodeURI(this.diffs[e][1])+"\n"}return n.join("").replace(/%20/g," ")}}class p{diffTimeout=1;diffEditCost=4;matchThreshold=.5;matchDistance=1e3;patchDeleteThreshold=.5;patchMargin=4;matchMaxBits=32;diff_main(e,t,n,r){void 0===r&&(r=this.diffTimeout<=0?Number.MAX_VALUE:Date.now()+1e3*this.diffTimeout);const i=r;if(null==e||null==t)throw new Error("Null input. (diff_main)");if(e===t)return e?[[u.DIFF_EQUAL,e]]:[];void 0===n&&(n=!0);const o=n;let s=this.diff_commonPrefix(e,t);const a=e.substring(0,s);e=e.substring(s),t=t.substring(s),s=this.diff_commonSuffix(e,t);const c=e.substring(e.length-s);e=e.substring(0,e.length-s),t=t.substring(0,t.length-s);const l=this.diff_compute_(e,t,o,i);return a&&l.unshift([u.DIFF_EQUAL,a]),c&&l.push([u.DIFF_EQUAL,c]),this.diff_cleanupMerge(l),l}diff_commonPrefix(e,t){if(!e||!t||e.charAt(0)!==t.charAt(0))return 0;let n=0,r=f.min(e.length,t.length),i=r,o=0;for(;n<i;)e.substring(o,i)===t.substring(o,i)?(n=i,o=n):r=i,i=Math.floor((r-n)/2+n);return i}diff_commonSuffix(e,t){if(!e||!t||e.charAt(e.length-1)!==t.charAt(t.length-1))return 0;let n=0,r=f.min(e.length,t.length),i=r,o=0;for(;n<i;)e.substring(e.length-i,e.length-o)===t.substring(t.length-i,t.length-o)?(n=i,o=n):r=i,i=Math.floor((r-n)/2+n);return i}diff_cleanupSemantic(e){let t=!1;const n=[];let r=0,i=null,o=0,s=0,a=0,c=0,l=0;for(;o<e.length;)e[o][0]===u.DIFF_EQUAL?(n[r++]=o,s=c,a=l,c=0,l=0,i=e[o][1]):(e[o][0]===u.DIFF_INSERT?c+=e[o][1].length:l+=e[o][1].length,i&&i.length<=f.max(s,a)&&i.length<=f.max(c,l)&&(e.splice(n[r-1],0,[u.DIFF_DELETE,i]),e[n[r-1]+1][0]=u.DIFF_INSERT,r--,r--,o=r>0?n[r-1]:-1,s=0,a=0,c=0,l=0,i=null,t=!0)),o++;for(t&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),o=1;o<e.length;){if(e[o-1][0]===u.DIFF_DELETE&&e[o][0]===u.DIFF_INSERT){const t=e[o-1][1],n=e[o][1],r=this.diff_commonOverlap_(t,n),i=this.diff_commonOverlap_(n,t);r>=i?(r>=t.length/2||r>=n.length/2)&&(e.splice(o,0,[u.DIFF_EQUAL,n.substring(0,r)]),e[o-1][1]=t.substring(0,t.length-r),e[o+1][1]=n.substring(r),o++):(i>=t.length/2||i>=n.length/2)&&(e.splice(o,0,[u.DIFF_EQUAL,t.substring(0,i)]),e[o-1][0]=u.DIFF_INSERT,e[o-1][1]=n.substring(0,n.length-i),e[o+1][0]=u.DIFF_DELETE,e[o+1][1]=t.substring(i),o++),o++}o++}}diff_cleanupSemanticLossless(e){let t=1;for(;t<e.length-1;){if(e[t-1][0]===u.DIFF_EQUAL&&e[t+1][0]===u.DIFF_EQUAL){let n=e[t-1][1],r=e[t][1],i=e[t+1][1];const o=this.diff_commonSuffix(n,r);if(o){const e=r.substring(r.length-o);n=n.substring(0,n.length-o),r=e+r.substring(0,r.length-o),i=e+i}let s=n,a=r,c=i,u=this.diff_cleanupSemanticScore_(n,r)+this.diff_cleanupSemanticScore_(r,i);for(;r.charAt(0)===i.charAt(0);){n+=r.charAt(0),r=r.substring(1)+i.charAt(0),i=i.substring(1);const e=this.diff_cleanupSemanticScore_(n,r)+this.diff_cleanupSemanticScore_(r,i);e>=u&&(u=e,s=n,a=r,c=i)}e[t-1][1]!==s&&(s?e[t-1][1]=s:(e.splice(t-1,1),t--),e[t][1]=a,c?e[t+1][1]=c:(e.splice(t+1,1),t--))}t++}}diff_cleanupEfficiency(e){let t=!1;const n=[];let r=0,i=null,o=0,s=!1,a=!1,c=!1,l=!1;for(;o<e.length;)e[o][0]===u.DIFF_EQUAL?(e[o][1].length<this.diffEditCost&&(c||l)?(n[r++]=o,s=c,a=l,i=e[o][1]):(r=0,i=null),c=l=!1):(e[o][0]===u.DIFF_DELETE?l=!0:c=!0,i&&(s&&a&&c&&l||i.length<this.diffEditCost/2&&Number(s)+Number(a)+Number(c)+Number(l)===3)&&(e.splice(n[r-1],0,[u.DIFF_DELETE,i]),e[n[r-1]+1][0]=u.DIFF_INSERT,r--,i=null,s&&a?(c=l=!0,r=0):(r--,o=r>0?n[r-1]:-1,c=l=!1),t=!0)),o++;t&&this.diff_cleanupMerge(e)}diff_cleanupMerge(e){e.push([u.DIFF_EQUAL,""]);let t,n=0,r=0,i=0,o="",s="";for(;n<e.length;)switch(e[n][0]){case u.DIFF_INSERT:i++,s+=e[n][1],n++;break;case u.DIFF_DELETE:r++,o+=e[n][1],n++;break;case u.DIFF_EQUAL:r+i>1?(0!==r&&0!==i&&(t=this.diff_commonPrefix(s,o),0!==t&&(n-r-i>0&&e[n-r-i-1][0]===u.DIFF_EQUAL?e[n-r-i-1][1]+=s.substring(0,t):(e.splice(0,0,[u.DIFF_EQUAL,s.substring(0,t)]),n++),s=s.substring(t),o=o.substring(t)),t=this.diff_commonSuffix(s,o),0!==t&&(e[n][1]=s.substring(s.length-t)+e[n][1],s=s.substring(0,s.length-t),o=o.substring(0,o.length-t))),n-=r+i,e.splice(n,r+i),o.length&&(e.splice(n,0,[u.DIFF_DELETE,o]),n++),s.length&&(e.splice(n,0,[u.DIFF_INSERT,s]),n++),n++):0!==n&&e[n-1][0]===u.DIFF_EQUAL?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,i=0,r=0,o="",s=""}""===e[e.length-1][1]&&e.pop();let a=!1;for(n=1;n<e.length-1;)e[n-1][0]===u.DIFF_EQUAL&&e[n+1][0]===u.DIFF_EQUAL&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)===e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),a=!0):e[n][1].substring(0,e[n+1][1].length)===e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),a=!0)),n++;a&&this.diff_cleanupMerge(e)}diff_xIndex(e,t){let n,r=0,i=0,o=0,s=0;for(n=0;n<e.length&&(e[n][0]!==u.DIFF_INSERT&&(r+=e[n][1].length),e[n][0]!==u.DIFF_DELETE&&(i+=e[n][1].length),!(r>t));n++)o=r,s=i;return e.length!==n&&e[n][0]===u.DIFF_DELETE?s:s+(t-o)}diff_prettyHtml(e){const t=[],n=/&/g,r=/</g,i=/>/g,o=/\n/g;for(let s=0;s<e.length;s++){const a=e[s][0],c=e[s][1].replace(n,"&amp;").replace(r,"&lt;").replace(i,"&gt;").replace(o,"&para;<br>");switch(a){case u.DIFF_INSERT:t[s]='<ins style="background:#e6ffe6;">'+c+"</ins>";break;case u.DIFF_DELETE:t[s]='<del style="background:#ffe6e6;">'+c+"</del>";break;case u.DIFF_EQUAL:t[s]="<span>"+c+"</span>"}}return t.join("")}diff_text1(e){const t=[];for(let n=0;n<e.length;n++)e[n][0]!==u.DIFF_INSERT&&(t[n]=e[n][1]);return t.join("")}diff_text2(e){const t=[];for(let n=0;n<e.length;n++)e[n][0]!==u.DIFF_DELETE&&(t[n]=e[n][1]);return t.join("")}diff_levenshtein(e){let t=0,n=0,r=0;for(let i=0;i<e.length;i++){const o=e[i][0],s=e[i][1];switch(o){case u.DIFF_INSERT:n+=s.length;break;case u.DIFF_DELETE:r+=s.length;break;case u.DIFF_EQUAL:t+=f.max(n,r),n=0,r=0}}return t+=f.max(n,r),t}diff_toDelta(e){const t=[];for(let n=0;n<e.length;n++)switch(e[n][0]){case u.DIFF_INSERT:t[n]="+"+encodeURI(e[n][1]);break;case u.DIFF_DELETE:t[n]="-"+e[n][1].length;break;case u.DIFF_EQUAL:t[n]="="+e[n][1].length}return t.join("\t").replace(/%20/g," ")}diff_fromDelta(e,t){const n=[];let r=0,i=0;const o=t.split(/\t/g);for(let t=0;t<o.length;t++){const s=o[t].substring(1);switch(o[t].charAt(0)){case"+":try{n[r++]=[u.DIFF_INSERT,decodeURI(s)]}catch{throw new Error("Illegal escape in diff_fromDelta: "+s)}break;case"-":case"=":const a=parseInt(s,10);if(isNaN(a)||a<0)throw new Error("Invalid number in diff_fromDelta: "+s);const c=e.substring(i,i+=a);"="===o[t].charAt(0)?n[r++]=[u.DIFF_EQUAL,c]:n[r++]=[u.DIFF_DELETE,c];break;default:if(o[t])throw new Error("Invalid diff operation in diff_fromDelta: "+o[t])}}if(i!==e.length)throw new Error("Delta length ("+i+") does not equal source text length ("+e.length+")");return n}diff_linesToChars(e,t){const n=[],r={};n[0]="";return{chars1:this.diff_linesToCharsMunge_(e,n,r,4e4),chars2:this.diff_linesToCharsMunge_(t,n,r,65535),lineArray:n}}diff_charsToLines(e,t){for(let n=0;n<e.length;n++){const r=e[n][1],i=[];for(let e=0;e<r.length;e++)i[e]=t[r.charCodeAt(e)];e[n][1]=i.join("")}}match_main(e,t,n){if(null==e||null==t||null==n)throw new Error("Null input. (match_main)");return n=f.max(0,f.min(n,e.length)),e===t?0:e.length?e.substring(n,n+t.length)===t?n:this.match_bitap_(e,t,n):-1}patch_make(e,t,n){let r,i;if("string"==typeof e&&"string"==typeof t&&void 0===n)r=e,i=this.diff_main(r,t,!0),i.length>2&&(this.diff_cleanupSemantic(i),this.diff_cleanupEfficiency(i));else if(e&&"object"==typeof e&&void 0===t&&void 0===n)i=e,r=this.diff_text1(i);else if("string"==typeof e&&t&&"object"==typeof t&&void 0===n)r=e,i=t;else{if("string"!=typeof e||"string"!=typeof t||!n||"object"!=typeof n)throw new Error("Unknown call format to patch_make");r=e,i=n}if(0===i.length)return[];const o=[];let s=new h,a=0,c=0,l=0,d=r,f=r;for(let e=0;e<i.length;e++){const t=i[e][0],n=i[e][1];switch(a||t===u.DIFF_EQUAL||(s.start1=c,s.start2=l),t){case u.DIFF_INSERT:s.diffs[a++]=i[e],s.length2+=n.length,f=f.substring(0,l)+n+f.substring(l);break;case u.DIFF_DELETE:s.length1+=n.length,s.diffs[a++]=i[e],f=f.substring(0,l)+f.substring(l+n.length);break;case u.DIFF_EQUAL:n.length<=2*this.patchMargin&&a&&i.length!==e+1?(s.diffs[a++]=i[e],s.length1+=n.length,s.length2+=n.length):n.length>=2*this.patchMargin&&a&&(this.patch_addContext_(s,d),o.push(s),s=new h,a=0,d=f,c=l)}t!==u.DIFF_INSERT&&(c+=n.length),t!==u.DIFF_DELETE&&(l+=n.length)}return a&&(this.patch_addContext_(s,d),o.push(s)),o}patch_deepCopy(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n],i=new h;for(let e=0;e<r.diffs.length;e++)i.diffs[e]=[r.diffs[e][0],r.diffs[e][1]];i.start1=r.start1,i.start2=r.start2,i.length1=r.length1,i.length2=r.length2,t[n]=i}return t}patch_apply(e,t){if(0===e.length)return[t,[]];e=this.patch_deepCopy(e);const n=this.patch_addPadding(e);t=n+t+n,this.patch_splitMax(e);let r=0;const i=[];for(let n=0;n<e.length;n++){const o=e[n].start2+r,s=this.diff_text1(e[n].diffs);let a,c=-1;if(s.length>this.matchMaxBits?(a=this.match_main(t,s.substring(0,this.matchMaxBits),o),-1!==a&&(c=this.match_main(t,s.substring(s.length-this.matchMaxBits),o+s.length-this.matchMaxBits),(-1===c||a>=c)&&(a=-1))):a=this.match_main(t,s,o),-1===a)i[n]=!1,r-=e[n].length2-e[n].length1;else{let l;if(i[n]=!0,r=a-o,l=-1===c?t.substring(a,a+s.length):t.substring(a,c+this.matchMaxBits),s===l)t=t.substring(0,a)+this.diff_text2(e[n].diffs)+t.substring(a+s.length);else{const r=this.diff_main(s,l,!1);if(s.length>this.matchMaxBits&&this.diff_levenshtein(r)/s.length>this.patchDeleteThreshold)i[n]=!1;else{this.diff_cleanupSemanticLossless(r);let i=0,o=0;for(let s=0;s<e[n].diffs.length;s++){const c=e[n].diffs[s];c[0]!==u.DIFF_EQUAL&&(o=this.diff_xIndex(r,i)),c[0]===u.DIFF_INSERT?t=t.substring(0,a+o)+c[1]+t.substring(a+o):c[0]===u.DIFF_DELETE&&(t=t.substring(0,a+o)+t.substring(a+this.diff_xIndex(r,i+c[1].length))),c[0]!==u.DIFF_DELETE&&(i+=c[1].length)}}}}}return[t=t.substring(n.length,t.length-n.length),i]}patch_addPadding(e){const t=this.patchMargin;let n="";for(let e=1;e<=t;e++)n+=String.fromCharCode(e);for(let n=0;n<e.length;n++)e[n].start1+=t,e[n].start2+=t;let r=e[0],i=r.diffs;if(0===i.length||i[0][0]!==u.DIFF_EQUAL)i.unshift([u.DIFF_EQUAL,n]),r.start1-=t,r.start2-=t,r.length1+=t,r.length2+=t;else if(t>i[0][1].length){const e=t-i[0][1].length;i[0][1]=n.substring(i[0][1].length)+i[0][1],r.start1-=e,r.start2-=e,r.length1+=e,r.length2+=e}if(r=e[e.length-1],i=r.diffs,0===i.length||i[i.length-1][0]!==u.DIFF_EQUAL)i.push([u.DIFF_EQUAL,n]),r.length1+=t,r.length2+=t;else if(t>i[i.length-1][1].length){const e=t-i[i.length-1][1].length;i[i.length-1][1]+=n.substring(0,e),r.length1+=e,r.length2+=e}return n}patch_splitMax(e){const t=this.matchMaxBits;for(let n=0;n<e.length;n++){if(e[n].length1<=t)continue;const r=e[n];e.splice(n--,1);let i=r.start1,o=r.start2,s="";for(;0!==r.diffs.length;){const a=new h;let c=!0;for(a.start1=i-s.length,a.start2=o-s.length,""!==s&&(a.length1=a.length2=s.length,a.diffs.push([u.DIFF_EQUAL,s]));0!==r.diffs.length&&a.length1<t-this.patchMargin;){const e=r.diffs[0][0];let n=r.diffs[0][1];e===u.DIFF_INSERT?(a.length2+=n.length,o+=n.length,a.diffs.push(r.diffs.shift()),c=!1):e===u.DIFF_DELETE&&1===a.diffs.length&&a.diffs[0][0]===u.DIFF_EQUAL&&n.length>2*t?(a.length1+=n.length,i+=n.length,c=!1,a.diffs.push([e,n]),r.diffs.shift()):(n=n.substring(0,t-a.length1-this.patchMargin),a.length1+=n.length,i+=n.length,e===u.DIFF_EQUAL?(a.length2+=n.length,o+=n.length):c=!1,a.diffs.push([e,n]),n===r.diffs[0][1]?r.diffs.shift():r.diffs[0][1]=r.diffs[0][1].substring(n.length))}s=this.diff_text2(a.diffs),s=s.substring(s.length-this.patchMargin);const l=this.diff_text1(r.diffs).substring(0,this.patchMargin);""!==l&&(a.length1+=l.length,a.length2+=l.length,0!==a.diffs.length&&a.diffs[a.diffs.length-1][0]===u.DIFF_EQUAL?a.diffs[a.diffs.length-1][1]+=l:a.diffs.push([u.DIFF_EQUAL,l])),c||e.splice(++n,0,a)}}}patch_toText(e){const t=[];for(let n=0;n<e.length;n++)t[n]=e[n];return t.join("")}patch_fromText(e){const t=[];if(!e)return t;const n=e.split("\n");let r=0;const i=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;for(;r<n.length;){const e=n[r].match(i);if(!e)throw new Error("Invalid patch string: "+n[r]);const o=new h;let s,a,c;for(t.push(o),o.start1=parseInt(e[1],10),""===e[2]?(o.start1--,o.length1=1):"0"===e[2]?o.length1=0:(o.start1--,o.length1=parseInt(e[2],10)),o.start2=parseInt(e[3],10),""===e[4]?(o.start2--,o.length2=1):"0"===e[4]?o.length2=0:(o.start2--,o.length2=parseInt(e[4],10)),r++;r<n.length;){s=n[r].charAt(0),c=n[r].substring(1);try{a=decodeURI(c)}catch{throw new Error("Illegal escape in patch_fromText: "+c)}if("-"===s)o.diffs.push([u.DIFF_DELETE,a]);else if("+"===s)o.diffs.push([u.DIFF_INSERT,a]);else if(" "===s)o.diffs.push([u.DIFF_EQUAL,a]);else{if("@"===s)break;if(""!==s)throw new Error('Invalid patch mode "'+s+'" in: '+a)}r++}}return t}diff_compute_(e,t,n,r){let i;if(!e)return[[u.DIFF_INSERT,t]];if(!t)return[[u.DIFF_DELETE,e]];const o=e.length>t.length?e:t,s=e.length>t.length?t:e,a=o.indexOf(s);if(-1!==a)return i=[[u.DIFF_INSERT,o.substring(0,a)],[u.DIFF_EQUAL,s],[u.DIFF_INSERT,o.substring(a+s.length)]],e.length>t.length&&(i[0][0]=u.DIFF_DELETE,i[2][0]=u.DIFF_DELETE),i;if(1===s.length)return[[u.DIFF_DELETE,e],[u.DIFF_INSERT,t]];const c=this.diff_halfMatch_(e,t);if(c){const e=c[0],t=c[1],i=c[2],o=c[3],s=c[4],a=this.diff_main(e,i,n,r),l=this.diff_main(t,o,n,r);return a.concat([[u.DIFF_EQUAL,s]],l)}return n&&e.length>100&&t.length>100?this.diff_lineMode_(e,t,r):this.diff_bisect_(e,t,r)}diff_lineMode_(e,t,n){const r=this.diff_linesToChars(e,t);e=r.chars1,t=r.chars2;const i=r.lineArray,o=this.diff_main(e,t,!1,n);this.diff_charsToLines(o,i),this.diff_cleanupSemantic(o),o.push([u.DIFF_EQUAL,""]);let s=0,a=0,c=0,l="",d="";for(;s<o.length;){switch(o[s][0]){case u.DIFF_INSERT:c++,d+=o[s][1];break;case u.DIFF_DELETE:a++,l+=o[s][1];break;case u.DIFF_EQUAL:if(a>=1&&c>=1){o.splice(s-a-c,a+c),s=s-a-c;const e=this.diff_main(l,d,!1,n);for(let t=e.length-1;t>=0;t--)o.splice(s,0,e[t]);s+=e.length}c=0,a=0,l="",d=""}s++}return o.pop(),o}diff_bisect_(e,t,n){const r=e.length,i=t.length,o=Math.ceil((r+i)/2),s=o,a=2*o,c=new Array(a),l=new Array(a);for(let e=0;e<a;e++)c[e]=-1,l[e]=-1;c[s+1]=0,l[s+1]=0;const d=r-i,f=d%2!=0;let h=0,p=0,g=0,_=0;for(let u=0;u<o&&!(Date.now()>n);u++){for(let o=-u+h;o<=u-p;o+=2){const g=s+o;let _;_=o===-u||o!==u&&c[g-1]<c[g+1]?c[g+1]:c[g-1]+1;let m=_-o;for(;_<r&&m<i&&e.charAt(_)===t.charAt(m);)_++,m++;if(c[g]=_,_>r)p+=2;else if(m>i)h+=2;else if(f){const i=s+d-o;if(i>=0&&i<a&&-1!==l[i]){if(_>=r-l[i])return this.diff_bisectSplit_(e,t,_,m,n)}}}for(let o=-u+g;o<=u-_;o+=2){const h=s+o;let p;p=o===-u||o!==u&&l[h-1]<l[h+1]?l[h+1]:l[h-1]+1;let m=p-o;for(;p<r&&m<i&&e.charAt(r-p-1)===t.charAt(i-m-1);)p++,m++;if(l[h]=p,p>r)_+=2;else if(m>i)g+=2;else if(!f){const i=s+d-o;if(i>=0&&i<a&&-1!==c[i]){const o=c[i],a=s+o-i;if(p=r-p,o>=p)return this.diff_bisectSplit_(e,t,o,a,n)}}}}return[[u.DIFF_DELETE,e],[u.DIFF_INSERT,t]]}diff_bisectSplit_(e,t,n,r,i){const o=e.substring(0,n),s=t.substring(0,r),a=e.substring(n),c=t.substring(r),u=this.diff_main(o,s,!1,i),l=this.diff_main(a,c,!1,i);return u.concat(l)}diff_linesToCharsMunge_(e,t,n,r){let i="",o=0,s=-1,a=t.length;for(;s<e.length-1;){s=e.indexOf("\n",o),-1===s&&(s=e.length-1);let c=e.substring(o,s+1);(n.hasOwnProperty?n.hasOwnProperty(c):void 0!==n[c])?i+=String.fromCharCode(n[c]):(a===r&&(c=e.substring(o),s=e.length),i+=String.fromCharCode(a),n[c]=a,t[a++]=c),o=s+1}return i}diff_commonOverlap_(e,t){const n=e.length,r=t.length;if(0===n||0===r)return 0;n>r?e=e.substring(n-r):n<r&&(t=t.substring(0,n));const i=f.min(n,r);if(e===t)return i;let o=0,s=1;for(;;){const n=e.substring(i-s),r=t.indexOf(n);if(-1===r)return o;s+=r,0!==r&&e.substring(i-s)!==t.substring(0,s)||(o=s,s++)}}diff_halfMatch_(e,t){if(this.diffTimeout<=0)return null;const n=e.length>t.length?e:t,r=e.length>t.length?t:e;if(n.length<4||2*r.length<n.length)return null;const i=this.diff_halfMatchI_(n,r,Math.ceil(n.length/4)),o=this.diff_halfMatchI_(n,r,Math.ceil(n.length/2));let s,a,c,u,l;if(!i&&!o)return null;s=o?i&&i[4].length>o[4].length?i:o:i;const d=s[4];return e.length>t.length?(a=s[0],c=s[1],u=s[2],l=s[3]):(u=s[0],l=s[1],a=s[2],c=s[3]),[a,c,u,l,d]}diff_halfMatchI_(e,t,n){const r=e.substring(n,n+Math.floor(e.length/4));let i,o,s,a,c="",u=t.indexOf(r,0);for(;-1!==u;){const l=this.diff_commonPrefix(e.substring(n),t.substring(u)),d=this.diff_commonSuffix(e.substring(0,n),t.substring(0,u));c.length<d+l&&(c=t.substring(u-d,u)+t.substring(u,u+l),i=e.substring(0,n-d),o=e.substring(n+l),s=t.substring(0,u-d),a=t.substring(u+l)),u=t.indexOf(r,u+1)}return 2*c.length>=e.length?[i,o,s,a,c]:null}diff_cleanupSemanticScore_(e,t){if(!e||!t)return 6;const n=e.charAt(e.length-1),r=t.charAt(0),u=n.match(i),l=r.match(i),d=u&&n.match(o),f=l&&r.match(o),h=d&&n.match(s),p=f&&r.match(s),g=h&&e.match(a),_=p&&t.match(c);return g||_?5:h||p?4:u&&!d&&f?3:d||f?2:u||l?1:0}match_bitap_(e,t,n){if(t.length>this.matchMaxBits)throw new Error("Pattern too long for this browser");const r=this.match_alphabet_(t);let i=this.matchThreshold,o=e.indexOf(t,n);-1!==o&&(i=f.min(this.match_bitapScore_(0,o,t,n),i),o=e.lastIndexOf(t,n+t.length),-1!==o&&(i=f.min(this.match_bitapScore_(0,o,t,n),i)));const s=1<<t.length-1;let a,c;o=-1;let u,l=t.length+e.length;for(let d=0;d<t.length;d++){for(a=0,c=l;a<c;)this.match_bitapScore_(d,n+c,t,n)<=i?a=c:l=c,c=Math.floor((l-a)/2+a);l=c;let h=f.max(1,n-c+1);const p=f.min(n+c,e.length)+t.length,g=Array(p+2);g[p+1]=(1<<d)-1;for(let a=p;a>=h;a--){const c=r[e.charAt(a-1)];if(g[a]=0===d?(g[a+1]<<1|1)&c:(g[a+1]<<1|1)&c|(u[a+1]|u[a])<<1|1|u[a+1],g[a]&s){const e=this.match_bitapScore_(d,a-1,t,n);if(e<=i){if(i=e,o=a-1,!(o>n))break;h=f.max(1,2*n-o)}}}if(this.match_bitapScore_(d+1,n,t,n)>i)break;u=g}return o}match_bitapScore_(e,t,n,r){const i=e/n.length,o=Math.abs(r-t);return this.matchDistance?i+o/this.matchDistance:o?1:i}match_alphabet_(e){const t={};for(let n=0;n<e.length;n++)t[e.charAt(n)]=0;for(let n=0;n<e.length;n++)t[e.charAt(n)]|=1<<e.length-n-1;return t}patch_addContext_(e,t){if(0===t.length)return;if(null==e.start2)throw Error("patch not initialized");let n=t.substring(e.start2,e.start2+e.length1),r=0;for(;t.indexOf(n)!==t.lastIndexOf(n)&&n.length<this.matchMaxBits-this.patchMargin-this.patchMargin;)r+=this.patchMargin,n=t.substring(e.start2-r,e.start2+e.length1+r);r+=this.patchMargin;const i=t.substring(e.start2-r,e.start2);i&&e.diffs.unshift([u.DIFF_EQUAL,i]);const o=t.substring(e.start2+e.length1,e.start2+e.length1+r);o&&e.diffs.push([u.DIFF_EQUAL,o]),e.start1-=i.length,e.start2-=i.length,e.length1+=i.length+o.length,e.length2+=i.length+o.length}}},16:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertChangesToDMP=function(e){for(var t,n,r=[],i=0;i<e.length;i++)n=(t=e[i]).added?1:t.removed?-1:0,r.push([n,t.value]);return r}},8136:(e,t)=>{"use strict";function n(e){var t=e;return t=(t=(t=(t=t.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/"/g,"&quot;")}Object.defineProperty(t,"__esModule",{value:!0}),t.convertChangesToXML=function(e){for(var t=[],r=0;r<e.length;r++){var i=e[r];i.added?t.push("<ins>"):i.removed&&t.push("<del>"),t.push(n(i.value)),i.added?t.push("</ins>"):i.removed&&t.push("</del>")}return t.join("")}},9580:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.diffArrays=function(e,t,n){return i.diff(e,t,n)},t.arrayDiff=void 0;var i=new(((r=n(1216))&&r.__esModule?r:{default:r}).default);t.arrayDiff=i,i.tokenize=function(e){return e.slice()},i.join=i.removeEmpty=function(e){return e}},1216:(e,t)=>{"use strict";function n(){}function r(e,t,n,r,i){for(var o,s=[];t;)s.push(t),o=t.previousComponent,delete t.previousComponent,t=o;s.reverse();for(var a=0,c=s.length,u=0,l=0;a<c;a++){var d=s[a];if(d.removed){if(d.value=e.join(r.slice(l,l+d.count)),l+=d.count,a&&s[a-1].added){var f=s[a-1];s[a-1]=s[a],s[a]=f}}else{if(!d.added&&i){var h=n.slice(u,u+d.count);h=h.map((function(e,t){var n=r[l+t];return n.length>e.length?n:e})),d.value=e.join(h)}else d.value=e.join(n.slice(u,u+d.count));u+=d.count,d.added||(l+=d.count)}}var p=s[c-1];return c>1&&"string"==typeof p.value&&(p.added||p.removed)&&e.equals("",p.value)&&(s[c-2].value+=p.value,s.pop()),s}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,n.prototype={diff:function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.callback;"function"==typeof i&&(o=i,i={}),this.options=i;var s=this;function a(e){return o?(setTimeout((function(){o(void 0,e)}),0),!0):e}e=this.castInput(e),t=this.castInput(t),e=this.removeEmpty(this.tokenize(e));var c=(t=this.removeEmpty(this.tokenize(t))).length,u=e.length,l=1,d=c+u;i.maxEditLength&&(d=Math.min(d,i.maxEditLength));var f=null!==(n=i.timeout)&&void 0!==n?n:1/0,h=Date.now()+f,p=[{oldPos:-1,lastComponent:void 0}],g=this.extractCommon(p[0],t,e,0);if(p[0].oldPos+1>=u&&g+1>=c)return a([{value:this.join(t),count:t.length}]);var _=-1/0,m=1/0;function v(){for(var n=Math.max(_,-l);n<=Math.min(m,l);n+=2){var i=void 0,o=p[n-1],d=p[n+1];o&&(p[n-1]=void 0);var f=!1;if(d){var h=d.oldPos-n;f=d&&0<=h&&h<c}var v=o&&o.oldPos+1<u;if(f||v){if(i=!v||f&&o.oldPos+1<d.oldPos?s.addToPath(d,!0,void 0,0):s.addToPath(o,void 0,!0,1),g=s.extractCommon(i,t,e,n),i.oldPos+1>=u&&g+1>=c)return a(r(s,i.lastComponent,t,e,s.useLongestToken));p[n]=i,i.oldPos+1>=u&&(m=Math.min(m,n-1)),g+1>=c&&(_=Math.max(_,n+1))}else p[n]=void 0}l++}if(o)!function e(){setTimeout((function(){if(l>d||Date.now()>h)return o();v()||e()}),0)}();else for(;l<=d&&Date.now()<=h;){var y=v();if(y)return y}},addToPath:function(e,t,n,r){var i=e.lastComponent;return i&&i.added===t&&i.removed===n?{oldPos:e.oldPos+r,lastComponent:{count:i.count+1,added:t,removed:n,previousComponent:i.previousComponent}}:{oldPos:e.oldPos+r,lastComponent:{count:1,added:t,removed:n,previousComponent:i}}},extractCommon:function(e,t,n,r){for(var i=t.length,o=n.length,s=e.oldPos,a=s-r,c=0;a+1<i&&s+1<o&&this.equals(t[a+1],n[s+1]);)a++,s++,c++;return c&&(e.lastComponent={count:c,previousComponent:e.lastComponent}),e.oldPos=s,a},equals:function(e,t){return this.options.comparator?this.options.comparator(e,t):e===t||this.options.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty:function(e){for(var t=[],n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}}},1146:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.diffChars=function(e,t,n){return i.diff(e,t,n)},t.characterDiff=void 0;var i=new(((r=n(1216))&&r.__esModule?r:{default:r}).default);t.characterDiff=i},8902:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.diffCss=function(e,t,n){return i.diff(e,t,n)},t.cssDiff=void 0;var i=new(((r=n(1216))&&r.__esModule?r:{default:r}).default);t.cssDiff=i,i.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)}},7079:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.diffJson=function(e,t,n){return c.diff(e,t,n)},t.canonicalize=u,t.jsonDiff=void 0;var r,i=(r=n(1216))&&r.__esModule?r:{default:r},o=n(5811);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}var a=Object.prototype.toString,c=new i.default;function u(e,t,n,r,i){var o,c;for(t=t||[],n=n||[],r&&(e=r(i,e)),o=0;o<t.length;o+=1)if(t[o]===e)return n[o];if("[object Array]"===a.call(e)){for(t.push(e),c=new Array(e.length),n.push(c),o=0;o<e.length;o+=1)c[o]=u(e[o],t,n,r,i);return t.pop(),n.pop(),c}if(e&&e.toJSON&&(e=e.toJSON()),"object"===s(e)&&null!==e){t.push(e),c={},n.push(c);var l,d=[];for(l in e)e.hasOwnProperty(l)&&d.push(l);for(d.sort(),o=0;o<d.length;o+=1)c[l=d[o]]=u(e[l],t,n,r,l);t.pop(),n.pop()}else c=e;return c}t.jsonDiff=c,c.useLongestToken=!0,c.tokenize=o.lineDiff.tokenize,c.castInput=function(e){var t=this.options,n=t.undefinedReplacement,r=t.stringifyReplacer,i=void 0===r?function(e,t){return void 0===t?n:t}:r;return"string"==typeof e?e:JSON.stringify(u(e,null,null,i),i,"  ")},c.equals=function(e,t){return i.default.prototype.equals.call(c,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))}},5811:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.diffLines=function(e,t,n){return s.diff(e,t,n)},t.diffTrimmedLines=function(e,t,n){var r=(0,o.generateOptions)(n,{ignoreWhitespace:!0});return s.diff(e,t,r)},t.lineDiff=void 0;var r,i=(r=n(1216))&&r.__esModule?r:{default:r},o=n(8174);var s=new i.default;t.lineDiff=s,s.tokenize=function(e){this.options.stripTrailingCr&&(e=e.replace(/\r\n/g,"\n"));var t=[],n=e.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var r=0;r<n.length;r++){var i=n[r];r%2&&!this.options.newlineIsToken?t[t.length-1]+=i:(this.options.ignoreWhitespace&&(i=i.trim()),t.push(i))}return t}},7696:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.diffSentences=function(e,t,n){return i.diff(e,t,n)},t.sentenceDiff=void 0;var i=new(((r=n(1216))&&r.__esModule?r:{default:r}).default);t.sentenceDiff=i,i.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)}},4517:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.diffWords=function(e,t,n){return n=(0,o.generateOptions)(n,{ignoreWhitespace:!0}),c.diff(e,t,n)},t.diffWordsWithSpace=function(e,t,n){return c.diff(e,t,n)},t.wordDiff=void 0;var r,i=(r=n(1216))&&r.__esModule?r:{default:r},o=n(8174);var s=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,a=/\S/,c=new i.default;t.wordDiff=c,c.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!a.test(e)&&!a.test(t)},c.tokenize=function(e){for(var t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<t.length-1;n++)!t[n+1]&&t[n+2]&&s.test(t[n])&&s.test(t[n+2])&&(t[n]+=t[n+2],t.splice(n+1,2),n--);return t}},2853:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Diff",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"diffChars",{enumerable:!0,get:function(){return o.diffChars}}),Object.defineProperty(t,"diffWords",{enumerable:!0,get:function(){return s.diffWords}}),Object.defineProperty(t,"diffWordsWithSpace",{enumerable:!0,get:function(){return s.diffWordsWithSpace}}),Object.defineProperty(t,"diffLines",{enumerable:!0,get:function(){return a.diffLines}}),Object.defineProperty(t,"diffTrimmedLines",{enumerable:!0,get:function(){return a.diffTrimmedLines}}),Object.defineProperty(t,"diffSentences",{enumerable:!0,get:function(){return c.diffSentences}}),Object.defineProperty(t,"diffCss",{enumerable:!0,get:function(){return u.diffCss}}),Object.defineProperty(t,"diffJson",{enumerable:!0,get:function(){return l.diffJson}}),Object.defineProperty(t,"canonicalize",{enumerable:!0,get:function(){return l.canonicalize}}),Object.defineProperty(t,"diffArrays",{enumerable:!0,get:function(){return d.diffArrays}}),Object.defineProperty(t,"applyPatch",{enumerable:!0,get:function(){return f.applyPatch}}),Object.defineProperty(t,"applyPatches",{enumerable:!0,get:function(){return f.applyPatches}}),Object.defineProperty(t,"parsePatch",{enumerable:!0,get:function(){return h.parsePatch}}),Object.defineProperty(t,"merge",{enumerable:!0,get:function(){return p.merge}}),Object.defineProperty(t,"reversePatch",{enumerable:!0,get:function(){return g.reversePatch}}),Object.defineProperty(t,"structuredPatch",{enumerable:!0,get:function(){return _.structuredPatch}}),Object.defineProperty(t,"createTwoFilesPatch",{enumerable:!0,get:function(){return _.createTwoFilesPatch}}),Object.defineProperty(t,"createPatch",{enumerable:!0,get:function(){return _.createPatch}}),Object.defineProperty(t,"formatPatch",{enumerable:!0,get:function(){return _.formatPatch}}),Object.defineProperty(t,"convertChangesToDMP",{enumerable:!0,get:function(){return m.convertChangesToDMP}}),Object.defineProperty(t,"convertChangesToXML",{enumerable:!0,get:function(){return v.convertChangesToXML}});var r,i=(r=n(1216))&&r.__esModule?r:{default:r},o=n(1146),s=n(4517),a=n(5811),c=n(7696),u=n(8902),l=n(7079),d=n(9580),f=n(4324),h=n(5079),p=n(4648),g=n(9866),_=n(5762),m=n(16),v=n(8136)},4324:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyPatch=s,t.applyPatches=function(e,t){"string"==typeof e&&(e=(0,i.parsePatch)(e));var n=0;!function r(){var i=e[n++];if(!i)return t.complete();t.loadFile(i,(function(e,n){if(e)return t.complete(e);var o=s(n,i,t);t.patched(i,o,(function(e){if(e)return t.complete(e);r()}))}))}()};var r,i=n(5079),o=(r=n(5582))&&r.__esModule?r:{default:r};function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"==typeof t&&(t=(0,i.parsePatch)(t)),Array.isArray(t)){if(t.length>1)throw new Error("applyPatch only works with a single input.");t=t[0]}var r,s,a=e.split(/\r\n|[\n\v\f\r\x85]/),c=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],u=t.hunks,l=n.compareLine||function(e,t,n,r){return t===r},d=0,f=n.fuzzFactor||0,h=0,p=0;function g(e,t){for(var n=0;n<e.lines.length;n++){var r=e.lines[n],i=r.length>0?r[0]:" ",o=r.length>0?r.substr(1):r;if(" "===i||"-"===i){if(!l(t+1,a[t],i,o)&&++d>f)return!1;t++}}return!0}for(var _=0;_<u.length;_++){for(var m=u[_],v=a.length-m.oldLines,y=0,b=p+m.oldStart-1,E=(0,o.default)(b,h,v);void 0!==y;y=E())if(g(m,b+y)){m.offset=p+=y;break}if(void 0===y)return!1;h=m.offset+m.oldStart+m.oldLines}for(var w=0,S=0;S<u.length;S++){var T=u[S],C=T.oldStart+T.offset+w-1;w+=T.newLines-T.oldLines;for(var O=0;O<T.lines.length;O++){var A=T.lines[O],I=A.length>0?A[0]:" ",R=A.length>0?A.substr(1):A,D=T.linedelimiters&&T.linedelimiters[O]||"\n";if(" "===I)C++;else if("-"===I)a.splice(C,1),c.splice(C,1);else if("+"===I)a.splice(C,0,R),c.splice(C,0,D),C++;else if("\\"===I){var x=T.lines[O-1]?T.lines[O-1][0]:null;"+"===x?r=!0:"-"===x&&(s=!0)}}}if(r)for(;!a[a.length-1];)a.pop(),c.pop();else s&&(a.push(""),c.push("\n"));for(var M=0;M<a.length-1;M++)a[M]=a[M]+c[M];return a.join("")}},5762:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.structuredPatch=s,t.formatPatch=a,t.createTwoFilesPatch=c,t.createPatch=function(e,t,n,r,i,o){return c(e,e,t,n,r,i,o)};var r=n(5811);function i(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t,n,o,s,a,c){c||(c={}),void 0===c.context&&(c.context=4);var u=(0,r.diffLines)(n,o,c);if(u){u.push({value:"",lines:[]});for(var l=[],d=0,f=0,h=[],p=1,g=1,_=function(e){var t=u[e],r=t.lines||t.value.replace(/\n$/,"").split("\n");if(t.lines=r,t.added||t.removed){var s;if(!d){var a=u[e-1];d=p,f=g,a&&(h=c.context>0?v(a.lines.slice(-c.context)):[],d-=h.length,f-=h.length)}(s=h).push.apply(s,i(r.map((function(e){return(t.added?"+":"-")+e})))),t.added?g+=r.length:p+=r.length}else{if(d)if(r.length<=2*c.context&&e<u.length-2){var _;(_=h).push.apply(_,i(v(r)))}else{var m,y=Math.min(r.length,c.context);(m=h).push.apply(m,i(v(r.slice(0,y))));var b={oldStart:d,oldLines:p-d+y,newStart:f,newLines:g-f+y,lines:h};if(e>=u.length-2&&r.length<=c.context){var E=/\n$/.test(n),w=/\n$/.test(o),S=0==r.length&&h.length>b.oldLines;!E&&S&&n.length>0&&h.splice(b.oldLines,0,"\\ No newline at end of file"),(E||S)&&w||h.push("\\ No newline at end of file")}l.push(b),d=0,f=0,h=[]}p+=r.length,g+=r.length}},m=0;m<u.length;m++)_(m);return{oldFileName:e,newFileName:t,oldHeader:s,newHeader:a,hunks:l}}function v(e){return e.map((function(e){return" "+e}))}}function a(e){if(Array.isArray(e))return e.map(a).join("\n");var t=[];e.oldFileName==e.newFileName&&t.push("Index: "+e.oldFileName),t.push("==================================================================="),t.push("--- "+e.oldFileName+(void 0===e.oldHeader?"":"\t"+e.oldHeader)),t.push("+++ "+e.newFileName+(void 0===e.newHeader?"":"\t"+e.newHeader));for(var n=0;n<e.hunks.length;n++){var r=e.hunks[n];0===r.oldLines&&(r.oldStart-=1),0===r.newLines&&(r.newStart-=1),t.push("@@ -"+r.oldStart+","+r.oldLines+" +"+r.newStart+","+r.newLines+" @@"),t.push.apply(t,r.lines)}return t.join("\n")+"\n"}function c(e,t,n,r,i,o,c){return a(s(e,t,n,r,i,o,c))}},4648:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calcLineCount=c,t.merge=function(e,t,n){e=u(e,n),t=u(t,n);var r={};(e.index||t.index)&&(r.index=e.index||t.index);(e.newFileName||t.newFileName)&&(l(e)?l(t)?(r.oldFileName=d(r,e.oldFileName,t.oldFileName),r.newFileName=d(r,e.newFileName,t.newFileName),r.oldHeader=d(r,e.oldHeader,t.oldHeader),r.newHeader=d(r,e.newHeader,t.newHeader)):(r.oldFileName=e.oldFileName,r.newFileName=e.newFileName,r.oldHeader=e.oldHeader,r.newHeader=e.newHeader):(r.oldFileName=t.oldFileName||e.oldFileName,r.newFileName=t.newFileName||e.newFileName,r.oldHeader=t.oldHeader||e.oldHeader,r.newHeader=t.newHeader||e.newHeader));r.hunks=[];var i=0,o=0,s=0,a=0;for(;i<e.hunks.length||o<t.hunks.length;){var c=e.hunks[i]||{oldStart:1/0},g=t.hunks[o]||{oldStart:1/0};if(f(c,g))r.hunks.push(h(c,s)),i++,a+=c.newLines-c.oldLines;else if(f(g,c))r.hunks.push(h(g,a)),o++,s+=g.newLines-g.oldLines;else{var _={oldStart:Math.min(c.oldStart,g.oldStart),oldLines:0,newStart:Math.min(c.newStart+s,g.oldStart+a),newLines:0,lines:[]};p(_,c.oldStart,c.lines,g.oldStart,g.lines),o++,i++,r.hunks.push(_)}}return r};var r=n(5762),i=n(5079),o=n(4467);function s(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e){var t=S(e.lines),n=t.oldLines,r=t.newLines;void 0!==n?e.oldLines=n:delete e.oldLines,void 0!==r?e.newLines=r:delete e.newLines}function u(e,t){if("string"==typeof e){if(/^@@/m.test(e)||/^Index:/m.test(e))return(0,i.parsePatch)(e)[0];if(!t)throw new Error("Must provide a base reference or pass in a patch");return(0,r.structuredPatch)(void 0,void 0,t,e)}return e}function l(e){return e.newFileName&&e.newFileName!==e.oldFileName}function d(e,t,n){return t===n?t:(e.conflict=!0,{mine:t,theirs:n})}function f(e,t){return e.oldStart<t.oldStart&&e.oldStart+e.oldLines<t.oldStart}function h(e,t){return{oldStart:e.oldStart,oldLines:e.oldLines,newStart:e.newStart+t,newLines:e.newLines,lines:e.lines}}function p(e,t,n,r,i){var o={offset:t,lines:n,index:0},a={offset:r,lines:i,index:0};for(v(e,o,a),v(e,a,o);o.index<o.lines.length&&a.index<a.lines.length;){var u=o.lines[o.index],l=a.lines[a.index];if("-"!==u[0]&&"+"!==u[0]||"-"!==l[0]&&"+"!==l[0])if("+"===u[0]&&" "===l[0]){var d;(d=e.lines).push.apply(d,s(b(o)))}else if("+"===l[0]&&" "===u[0]){var f;(f=e.lines).push.apply(f,s(b(a)))}else"-"===u[0]&&" "===l[0]?_(e,o,a):"-"===l[0]&&" "===u[0]?_(e,a,o,!0):u===l?(e.lines.push(u),o.index++,a.index++):m(e,b(o),b(a));else g(e,o,a)}y(e,o),y(e,a),c(e)}function g(e,t,n){var r=b(t),i=b(n);if(E(r)&&E(i)){var a,c;if((0,o.arrayStartsWith)(r,i)&&w(n,r,r.length-i.length))return void(a=e.lines).push.apply(a,s(r));if((0,o.arrayStartsWith)(i,r)&&w(t,i,i.length-r.length))return void(c=e.lines).push.apply(c,s(i))}else if((0,o.arrayEqual)(r,i)){var u;return void(u=e.lines).push.apply(u,s(r))}m(e,r,i)}function _(e,t,n,r){var i,o=b(t),a=function(e,t){var n=[],r=[],i=0,o=!1,s=!1;for(;i<t.length&&e.index<e.lines.length;){var a=e.lines[e.index],c=t[i];if("+"===c[0])break;if(o=o||" "!==a[0],r.push(c),i++,"+"===a[0])for(s=!0;"+"===a[0];)n.push(a),a=e.lines[++e.index];c.substr(1)===a.substr(1)?(n.push(a),e.index++):s=!0}"+"===(t[i]||"")[0]&&o&&(s=!0);if(s)return n;for(;i<t.length;)r.push(t[i++]);return{merged:r,changes:n}}(n,o);a.merged?(i=e.lines).push.apply(i,s(a.merged)):m(e,r?a:o,r?o:a)}function m(e,t,n){e.conflict=!0,e.lines.push({conflict:!0,mine:t,theirs:n})}function v(e,t,n){for(;t.offset<n.offset&&t.index<t.lines.length;){var r=t.lines[t.index++];e.lines.push(r),t.offset++}}function y(e,t){for(;t.index<t.lines.length;){var n=t.lines[t.index++];e.lines.push(n)}}function b(e){for(var t=[],n=e.lines[e.index][0];e.index<e.lines.length;){var r=e.lines[e.index];if("-"===n&&"+"===r[0]&&(n="+"),n!==r[0])break;t.push(r),e.index++}return t}function E(e){return e.reduce((function(e,t){return e&&"-"===t[0]}),!0)}function w(e,t,n){for(var r=0;r<n;r++){var i=t[t.length-n+r].substr(1);if(e.lines[e.index+r]!==" "+i)return!1}return e.index+=n,!0}function S(e){var t=0,n=0;return e.forEach((function(e){if("string"!=typeof e){var r=S(e.mine),i=S(e.theirs);void 0!==t&&(r.oldLines===i.oldLines?t+=r.oldLines:t=void 0),void 0!==n&&(r.newLines===i.newLines?n+=r.newLines:n=void 0)}else void 0===n||"+"!==e[0]&&" "!==e[0]||n++,void 0===t||"-"!==e[0]&&" "!==e[0]||t++})),{oldLines:t,newLines:n}}},5079:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePatch=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.split(/\r\n|[\n\v\f\r\x85]/),r=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],i=[],o=0;function s(){var e={};for(i.push(e);o<n.length;){var r=n[o];if(/^(\-\-\-|\+\+\+|@@)\s/.test(r))break;var s=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(r);s&&(e.index=s[1]),o++}for(a(e),a(e),e.hunks=[];o<n.length;){var u=n[o];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(u))break;if(/^@@/.test(u))e.hunks.push(c());else{if(u&&t.strict)throw new Error("Unknown line "+(o+1)+" "+JSON.stringify(u));o++}}}function a(e){var t=/^(---|\+\+\+)\s+(.*)$/.exec(n[o]);if(t){var r="---"===t[1]?"old":"new",i=t[2].split("\t",2),s=i[0].replace(/\\\\/g,"\\");/^".*"$/.test(s)&&(s=s.substr(1,s.length-2)),e[r+"FileName"]=s,e[r+"Header"]=(i[1]||"").trim(),o++}}function c(){var e=o,i=n[o++].split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),s={oldStart:+i[1],oldLines:void 0===i[2]?1:+i[2],newStart:+i[3],newLines:void 0===i[4]?1:+i[4],lines:[],linedelimiters:[]};0===s.oldLines&&(s.oldStart+=1),0===s.newLines&&(s.newStart+=1);for(var a=0,c=0;o<n.length&&!(0===n[o].indexOf("--- ")&&o+2<n.length&&0===n[o+1].indexOf("+++ ")&&0===n[o+2].indexOf("@@"));o++){var u=0==n[o].length&&o!=n.length-1?" ":n[o][0];if("+"!==u&&"-"!==u&&" "!==u&&"\\"!==u)break;s.lines.push(n[o]),s.linedelimiters.push(r[o]||"\n"),"+"===u?a++:"-"===u?c++:" "===u&&(a++,c++)}if(a||1!==s.newLines||(s.newLines=0),c||1!==s.oldLines||(s.oldLines=0),t.strict){if(a!==s.newLines)throw new Error("Added line count did not match for hunk at line "+(e+1));if(c!==s.oldLines)throw new Error("Removed line count did not match for hunk at line "+(e+1))}return s}for(;o<n.length;)s();return i}},9866:(e,t)=>{"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.reversePatch=function e(t){if(Array.isArray(t))return t.map(e).reverse();return r(r({},t),{},{oldFileName:t.newFileName,oldHeader:t.newHeader,newFileName:t.oldFileName,newHeader:t.oldHeader,hunks:t.hunks.map((function(e){return{oldLines:e.newLines,oldStart:e.newStart,newLines:e.oldLines,newStart:e.oldStart,linedelimiters:e.linedelimiters,lines:e.lines.map((function(e){return e.startsWith("-")?"+".concat(e.slice(1)):e.startsWith("+")?"-".concat(e.slice(1)):e}))}}))})}},4467:(e,t)=>{"use strict";function n(e,t){if(t.length>e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.arrayEqual=function(e,t){if(e.length!==t.length)return!1;return n(e,t)},t.arrayStartsWith=n},5582:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=!0,i=!1,o=!1,s=1;return function a(){if(r&&!o){if(i?s++:r=!1,e+s<=n)return s;o=!0}if(!i)return o||(r=!0),t<=e-s?-s++:(i=!0,a())}}},8174:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateOptions=function(e,t){if("function"==typeof e)t.callback=e;else if(e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}},8324:e=>{"use strict";function t(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function n(e,t){for(var n,r="",i=0,o=-1,s=0,a=0;a<=e.length;++a){if(a<e.length)n=e.charCodeAt(a);else{if(47===n)break;n=47}if(47===n){if(o===a-1||1===s);else if(o!==a-1&&2===s){if(r.length<2||2!==i||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){var c=r.lastIndexOf("/");if(c!==r.length-1){-1===c?(r="",i=0):i=(r=r.slice(0,c)).length-1-r.lastIndexOf("/"),o=a,s=0;continue}}else if(2===r.length||1===r.length){r="",i=0,o=a,s=0;continue}t&&(r.length>0?r+="/..":r="..",i=2)}else r.length>0?r+="/"+e.slice(o+1,a):r=e.slice(o+1,a),i=a-o-1;o=a,s=0}else 46===n&&-1!==s?++s:s=-1}return r}var r={resolve:function(){for(var e,r="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var s;o>=0?s=arguments[o]:(void 0===e&&(e=process.cwd()),s=e),t(s),0!==s.length&&(r=s+"/"+r,i=47===s.charCodeAt(0))}return r=n(r,!i),i?r.length>0?"/"+r:"/":r.length>0?r:"."},normalize:function(e){if(t(e),0===e.length)return".";var r=47===e.charCodeAt(0),i=47===e.charCodeAt(e.length-1);return 0!==(e=n(e,!r)).length||r||(e="."),e.length>0&&i&&(e+="/"),r?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,n=0;n<arguments.length;++n){var i=arguments[n];t(i),i.length>0&&(void 0===e?e=i:e+="/"+i)}return void 0===e?".":r.normalize(e)},relative:function(e,n){if(t(e),t(n),e===n)return"";if((e=r.resolve(e))===(n=r.resolve(n)))return"";for(var i=1;i<e.length&&47===e.charCodeAt(i);++i);for(var o=e.length,s=o-i,a=1;a<n.length&&47===n.charCodeAt(a);++a);for(var c=n.length-a,u=s<c?s:c,l=-1,d=0;d<=u;++d){if(d===u){if(c>u){if(47===n.charCodeAt(a+d))return n.slice(a+d+1);if(0===d)return n.slice(a+d)}else s>u&&(47===e.charCodeAt(i+d)?l=d:0===d&&(l=0));break}var f=e.charCodeAt(i+d);if(f!==n.charCodeAt(a+d))break;47===f&&(l=d)}var h="";for(d=i+l+1;d<=o;++d)d!==o&&47!==e.charCodeAt(d)||(0===h.length?h+="..":h+="/..");return h.length>0?h+n.slice(a+l):(a+=l,47===n.charCodeAt(a)&&++a,n.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var n=e.charCodeAt(0),r=47===n,i=-1,o=!0,s=e.length-1;s>=1;--s)if(47===(n=e.charCodeAt(s))){if(!o){i=s;break}}else o=!1;return-1===i?r?"/":".":r&&1===i?"//":e.slice(0,i)},basename:function(e,n){if(void 0!==n&&"string"!=typeof n)throw new TypeError('"ext" argument must be a string');t(e);var r,i=0,o=-1,s=!0;if(void 0!==n&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var a=n.length-1,c=-1;for(r=e.length-1;r>=0;--r){var u=e.charCodeAt(r);if(47===u){if(!s){i=r+1;break}}else-1===c&&(s=!1,c=r+1),a>=0&&(u===n.charCodeAt(a)?-1==--a&&(o=r):(a=-1,o=c))}return i===o?o=c:-1===o&&(o=e.length),e.slice(i,o)}for(r=e.length-1;r>=0;--r)if(47===e.charCodeAt(r)){if(!s){i=r+1;break}}else-1===o&&(s=!1,o=r+1);return-1===o?"":e.slice(i,o)},extname:function(e){t(e);for(var n=-1,r=0,i=-1,o=!0,s=0,a=e.length-1;a>=0;--a){var c=e.charCodeAt(a);if(47!==c)-1===i&&(o=!1,i=a+1),46===c?-1===n?n=a:1!==s&&(s=1):-1!==n&&(s=-1);else if(!o){r=a+1;break}}return-1===n||-1===i||0===s||1===s&&n===i-1&&n===r+1?"":e.slice(n,i)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var n=t.dir||t.root,r=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+r:n+e+r:r}("/",e)},parse:function(e){t(e);var n={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return n;var r,i=e.charCodeAt(0),o=47===i;o?(n.root="/",r=1):r=0;for(var s=-1,a=0,c=-1,u=!0,l=e.length-1,d=0;l>=r;--l)if(47!==(i=e.charCodeAt(l)))-1===c&&(u=!1,c=l+1),46===i?-1===s?s=l:1!==d&&(d=1):-1!==s&&(d=-1);else if(!u){a=l+1;break}return-1===s||-1===c||0===d||1===d&&s===c-1&&s===a+1?-1!==c&&(n.base=n.name=0===a&&o?e.slice(1,c):e.slice(a,c)):(0===a&&o?(n.name=e.slice(1,s),n.base=e.slice(1,c)):(n.name=e.slice(a,s),n.base=e.slice(a,c)),n.ext=e.slice(s,c)),a>0?n.dir=e.slice(0,a-1):o&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};r.posix=r,e.exports=r},7331:(e,t,n)=>{var r;!function(e){!function(){var t="object"==typeof n.g?n.g:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),r=i(e);function i(e,t){return function(n,r){"function"!=typeof e[n]&&Object.defineProperty(e,n,{configurable:!0,writable:!0,value:r}),t&&t(n,r)}}void 0===t.Reflect?t.Reflect=e:r=i(t.Reflect,r),function(e){var t=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,r=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",i=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",o="function"==typeof Object.create,s={__proto__:[]}instanceof Array,a=!o&&!s,c={create:o?function(){return re(Object.create(null))}:s?function(){return re({__proto__:null})}:function(){return re({})},has:a?function(e,n){return t.call(e,n)}:function(e,t){return t in e},get:a?function(e,n){return t.call(e,n)?e[n]:void 0}:function(e,t){return e[t]}},u=Object.getPrototypeOf(Function),l="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,d=l||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?ee():Map,f=l||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?te():Set,h=new(l||"function"!=typeof WeakMap?ne():WeakMap);function p(e,t,n,r){if(k(n)){if(!V(e))throw new TypeError;if(!H(t))throw new TypeError;return T(e,t)}if(!V(e))throw new TypeError;if(!z(t))throw new TypeError;if(!z(r)&&!k(r)&&!L(r))throw new TypeError;return L(r)&&(r=void 0),C(e,t,n=q(n),r)}function g(e,t){function n(n,r){if(!z(n))throw new TypeError;if(!k(r)&&!W(r))throw new TypeError;x(e,t,n,r)}return n}function _(e,t,n,r){if(!z(n))throw new TypeError;return k(r)||(r=q(r)),x(e,t,n,r)}function m(e,t,n){if(!z(t))throw new TypeError;return k(n)||(n=q(n)),A(e,t,n)}function v(e,t,n){if(!z(t))throw new TypeError;return k(n)||(n=q(n)),I(e,t,n)}function y(e,t,n){if(!z(t))throw new TypeError;return k(n)||(n=q(n)),R(e,t,n)}function b(e,t,n){if(!z(t))throw new TypeError;return k(n)||(n=q(n)),D(e,t,n)}function E(e,t){if(!z(e))throw new TypeError;return k(t)||(t=q(t)),M(e,t)}function w(e,t){if(!z(e))throw new TypeError;return k(t)||(t=q(t)),P(e,t)}function S(e,t,n){if(!z(t))throw new TypeError;k(n)||(n=q(n));var r=O(t,n,!1);if(k(r))return!1;if(!r.delete(e))return!1;if(r.size>0)return!0;var i=h.get(t);return i.delete(n),i.size>0||h.delete(t),!0}function T(e,t){for(var n=e.length-1;n>=0;--n){var r=(0,e[n])(t);if(!k(r)&&!L(r)){if(!H(r))throw new TypeError;t=r}}return t}function C(e,t,n,r){for(var i=e.length-1;i>=0;--i){var o=(0,e[i])(t,n,r);if(!k(o)&&!L(o)){if(!z(o))throw new TypeError;r=o}}return r}function O(e,t,n){var r=h.get(e);if(k(r)){if(!n)return;r=new d,h.set(e,r)}var i=r.get(t);if(k(i)){if(!n)return;i=new d,r.set(t,i)}return i}function A(e,t,n){if(I(e,t,n))return!0;var r=Q(t);return!L(r)&&A(e,r,n)}function I(e,t,n){var r=O(t,n,!1);return!k(r)&&U(r.has(e))}function R(e,t,n){if(I(e,t,n))return D(e,t,n);var r=Q(t);return L(r)?void 0:R(e,r,n)}function D(e,t,n){var r=O(t,n,!1);if(!k(r))return r.get(e)}function x(e,t,n,r){O(n,r,!0).set(e,t)}function M(e,t){var n=P(e,t),r=Q(e);if(null===r)return n;var i=M(r,t);if(i.length<=0)return n;if(n.length<=0)return i;for(var o=new f,s=[],a=0,c=n;a<c.length;a++){var u=c[a];o.has(u)||(o.add(u),s.push(u))}for(var l=0,d=i;l<d.length;l++){u=d[l];o.has(u)||(o.add(u),s.push(u))}return s}function P(e,t){var n=[],r=O(e,t,!1);if(k(r))return n;for(var i=J(r.keys()),o=0;;){var s=X(i);if(!s)return n.length=o,n;var a=Y(s);try{n[o]=a}catch(e){try{Z(i)}finally{throw e}}o++}}function N(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function k(e){return void 0===e}function L(e){return null===e}function j(e){return"symbol"==typeof e}function z(e){return"object"==typeof e?null!==e:"function"==typeof e}function F(e,t){switch(N(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var n=3===t?"string":5===t?"number":"default",i=K(e,r);if(void 0!==i){var o=i.call(e,n);if(z(o))throw new TypeError;return o}return B(e,"default"===n?"number":n)}function B(e,t){if("string"===t){var n=e.toString;if($(n))if(!z(i=n.call(e)))return i;if($(r=e.valueOf))if(!z(i=r.call(e)))return i}else{var r;if($(r=e.valueOf))if(!z(i=r.call(e)))return i;var i,o=e.toString;if($(o))if(!z(i=o.call(e)))return i}throw new TypeError}function U(e){return!!e}function G(e){return""+e}function q(e){var t=F(e,3);return j(t)?t:G(t)}function V(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function $(e){return"function"==typeof e}function H(e){return"function"==typeof e}function W(e){switch(N(e)){case 3:case 4:return!0;default:return!1}}function K(e,t){var n=e[t];if(null!=n){if(!$(n))throw new TypeError;return n}}function J(e){var t=K(e,i);if(!$(t))throw new TypeError;var n=t.call(e);if(!z(n))throw new TypeError;return n}function Y(e){return e.value}function X(e){var t=e.next();return!t.done&&t}function Z(e){var t=e.return;t&&t.call(e)}function Q(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===u)return t;if(t!==u)return t;var n=e.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return t;var i=r.constructor;return"function"!=typeof i||i===e?t:i}function ee(){var e={},t=[],n=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[i]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var n=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},t.prototype.delete=function(t){var n=this._find(t,!1);if(n>=0){for(var r=this._keys.length,i=n+1;i<r;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new n(this._keys,this._values,r)},t.prototype.values=function(){return new n(this._keys,this._values,o)},t.prototype.entries=function(){return new n(this._keys,this._values,s)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[i]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function r(e,t){return e}function o(e,t){return t}function s(e,t){return[e,t]}}function te(){return function(){function e(){this._map=new d}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[i]=function(){return this.keys()},e}()}function ne(){var e=16,n=c.create(),r=i();return function(){function e(){this._key=i()}return e.prototype.has=function(e){var t=o(e,!1);return void 0!==t&&c.has(t,this._key)},e.prototype.get=function(e){var t=o(e,!1);return void 0!==t?c.get(t,this._key):void 0},e.prototype.set=function(e,t){return o(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=o(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=i()},e}();function i(){var e;do{e="@@WeakMap@@"+u()}while(c.has(n,e));return n[e]=!0,e}function o(e,n){if(!t.call(e,r)){if(!n)return;Object.defineProperty(e,r,{value:c.create()})}return e[r]}function s(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function a(e){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):s(new Uint8Array(e),e):s(new Array(e),e)}function u(){var t=a(e);t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var n="",r=0;r<e;++r){var i=t[r];4!==r&&6!==r&&8!==r||(n+="-"),i<16&&(n+="0"),n+=i.toString(16).toLowerCase()}return n}}function re(e){return e.__=void 0,delete e.__,e}e("decorate",p),e("metadata",g),e("defineMetadata",_),e("hasMetadata",m),e("hasOwnMetadata",v),e("getMetadata",y),e("getOwnMetadata",b),e("getMetadataKeys",E),e("getOwnMetadataKeys",w),e("deleteMetadata",S)}(r)}()}(r||(r={}))},6800:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.activate=async function(e){o.gitExtensionManager.init(),(0,i.activateInlineCompletion)(e)},n(7331);const i=n(5497),o=n(2549),s=r(n(1133));void 0===globalThis.window&&(globalThis.window=globalThis.window||{env:{},navigator:{userAgent:s.default.isDesktop()?"Electron":""},addEventListener:()=>{}})},1909:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AICompletionClient=void 0;const c=s(n(1398)),u=n(6727),l=n(2549),d=n(7277),f=n(4711),h=n(7913),p=a(n(1133)),g=n(5820),_=n(7933),m=n(3631),v=["typescript","typescriptreact","javascript","go","python","java","kotlin","cpp","c","swift","objective-c","objective-cpp","rust","scala","sql","html","csharp","groovy","json","javascriptreact","php","vue","xml","yaml","markdown","css","dockerfile","less","lua","perl","scss","sass","xsl","cuda-cpp"];class y extends l.BaseExtensionAIClient{async activate(e,t,n,r){const i="ai-completion";l.logger.init(i,h.outputChannel),l.logger.logInfo("client activate");let o=g.UriParse.getEndpoint(),s=4,a=!1;const u={name:_.SlardarEventName.AICompletionExtensionActive,status:_.SlardarEventStatus.Success,costTime:Date.now()};for(;s>0&&!a;)try{if(s--,!o){const e=await c.commands.executeCommand("icube.cloudide.getAgentUrl");o=c.Uri.joinPath(c.Uri.parse(e.replace(/^http/,"ws")),"/module/aicompletion/0").toString();let t="renderer";try{t=await c.commands.executeCommand("icube.cloudide.getClientId")}catch(e){}g.UriParse.init(o,t)}const u=b(e,o),l=v.map((e=>({language:e}))),d=t.UserID??t.username;this.client=new f.AIClient(i,i,"trae",{userId:d,documentSelector:l,clientInfo:await this.getClientInfo(e),workspaceFolders:Array.from(c.workspace.workspaceFolders??[]),outputChannel:h.outputChannel},u),await this.client.start();this.client.initializeResult;await this.initAfterClientStart(this.client,{context:e,user:t,region:n,jwtToken:r}),a=!0}catch(e){if(this.client=void 0,h.outputChannel.appendLine((0,_.formatMessage)(void 0,"error","client",`AI Client init error: ${e}${s>0?`, will retry, Count: ${s}`:""}}`)),s<=0)throw u.status=_.SlardarEventStatus.Failed,u.errorMsg=`AI Client init error: ${e}`,e}finally{u.costTime=Date.now()-u.costTime,c.commands.executeCommand("icube.event.aiSlardarReport",u)}}async initAfterClientStart(e,t){const{context:n,user:r,region:i,jwtToken:o}=t;e.onServerError((e=>{l.logger.logError(`AI Client onServerError: ${e}`)})),e.onRequest(u.GetNeighborFileRequest.type.method,(e=>{if(p.default.isDesktop())return l.NeighborFileManager.INSTANCE.getNeighborFiles(e);const t=g.UriParse.parseUri(e.document);return l.NeighborFileManager.INSTANCE.getNeighborFiles({...e,document:t.toString()})})),e.onRequest(u.GetSymbolContextRequest.type.method,(async e=>{if(p.default.isDesktop())return await(0,l.getSymbolContext)(e);const t=g.UriParse.parseUri(e.uri);return await(0,l.getSymbolContext)({...e,uri:t.toString()})})),e.onRequest(u.AuthorizeRequest.type.method,(async()=>({jwtToken:await p.default.getToken()}))),e.onRequest("authorize/getIsLogin",(async()=>!!await p.default.getToken())),e.onNotification("$/exit",(async()=>{l.logger.logInfo("get notification: $/exit from worker"),await e.stop(),this.activate(n,r,i,o)}));const s=r.UserID??r.username;l.logger.logInfo(`refresh username: ${s}`),l.PluginSession.refreshUserInfo({id:s,name:s,jwtToken:o,region:i},n,!1,p.default.isDesktop(),{authType:await p.default.getTokenType()})}getSelectedEnvName(){if("ppe"===c.workspace.getConfiguration().get("ai_assistant.request.env")){return c.workspace.getConfiguration().get("ai_assistant.request.ppe")||""}}async getClientInfo(e){if(this.clientInfo)return this.clientInfo;const t={},n=this.getSelectedEnvName();n&&(t["x-tt-env"]=n,t["x-use-ppe"]="1");const r=await p.default.getRegion(),i=c.extensions.getExtension(e.extension.id)?.packageJSON;const o=await p.default.isIDEExternal();let s;if(p.default.isDesktop()){let e;try{e=await c.commands.executeCommand("icube.event.getCommonParams")}catch(e){}const t=e?.biz_user_id,n=e?.device_id;s={teaAppID:{sg:677332,us:677332,cn:647416},customTeaParams:e,userParams:{user_unique_id:n,device_id:n,user_is_login:t!==n,user_id:t}}}m.MultiEdit.updateIsTob(o);const a=await(0,l.getIdeEnv)();return this.clientInfo={channel:"icube-ai",envId:`${a}${o?"":"_bytedance"}`,isProd:!0,ideVersion:c.version,extensionVersion:i.version,isSSHRemote:(0,l.isSSHRemote)(),sessionID:l.PluginSession.id(),xAppId:"",domain:await(0,d.getDomain)(d.Server.copilot),isIDEExternal:o,header:t,disableRemoteLog:!1,region:r,teaConfig:s},this.clientInfo}stopAIClient(){this.client&&this.client.stop().catch((e=>{f.slardarReporter.captureException(e)}))}}function b(e,t){const n=c.Uri.joinPath(e.extensionUri,"dist/worker.js"),r=new Worker(n.toString(!0)),i={endpoint:t,trace:!1};return r.postMessage(i),r}t.AICompletionClient=y},5497:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.activateInlineCompletion=void 0,t.activate=p;const c=s(n(1398)),u=n(2549),l=n(8479),d=a(n(1133)),f=n(7931),h="trae.aicompletion";async function p(e,t,n,r){const i=u.globalContext.get(u.BaseExtensionAIClient);u.PluginSession.refresh(e,!0,d.default.isDesktop()),r&&i&&"activate"in i&&"function"==typeof i.activate&&await i.activate(e,t,n,r),u.NeighborFileManager.INSTANCE.init(),function(e){const t=new u.CloudInlineCompletionProvider({context:e,commandPrefix:h,showDecoration:!1});e.subscriptions.push(c.languages.registerInlineCompletionItemProvider({pattern:"**"},t)),e.subscriptions.push(c.commands.registerTextEditorCommand(`${h}-accept`,t.acceptCommandHandler))}(e),(0,u.registerEscCommand)(e);const o=await d.default.isIDEExternal();d.default.isDesktop()&&(0,f.activateMultiEdit)(e,o),c.icube.onDidChangeUserInfo((async t=>{if(t){if(i.isAIClientActivated())return;if(i&&"activate"in i&&"function"==typeof i.activate){const t=await d.default.getUser()||{username:"guest"},n=await u.globalContext.get(u.BaseLogin).getJwtToken(),r=await d.default.getRegion()||"cn";i.activate(e,t,r,n?.jwtToken||"")}}else i.deactivate()}))}t.activateInlineCompletion=async e=>{(0,l.initGlobalContext)(),d.default.addClearTokenIfLogoutListener();const t=await d.default.getUser()||{username:"guest"},n=await u.globalContext.get(u.BaseLogin).getJwtToken();p(e,t,await d.default.getRegion()||"cn",n?.jwtToken||"")}},8479:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.IDESecurityCallback=t.IDECodeverseRegion=t.IDECodeverseLogin=void 0,t.initGlobalContext=function(){if(c.AICompletionClient){const e=new c.AICompletionClient;o.globalContext.set(o.BaseExtensionAIClient,e)}o.globalContext.set(o.BaseRegion,new l),o.globalContext.set(o.BaseLogin,new u),o.globalContext.set(o.OnSecurityAccessCallback,new d)};const i=r(n(1398)),o=n(2549),s=r(n(1133)),a=n(7913),c=n(1909);class u extends o.BaseLogin{async isLogin(){return!!await s.default.getToken()}async getUserInfo(){return await s.default.getUser()}async getJwtToken(){return{jwtToken:await s.default.getToken(),authTraceLog:""}}}t.IDECodeverseLogin=u;class l extends o.BaseRegion{async getCachedRegions(){return await s.default.getRegion()}async getRegions(){return await s.default.getRegion()}}t.IDECodeverseRegion=l;class d extends o.OnSecurityAccessCallback{constructor(){super(...arguments),this._shownWarning=!1,this._shownLogout=!1,this._showUnavailable=!1}onLogout(){this._shownLogout||(a.outputChannel.appendLine("trae logout!"),this._shownLogout=!0)}onRejectAccess(e){this._shownWarning||(a.outputChannel.appendLine("trae access reject!"),i.default.window.showWarningMessage(e,{forceShow:!0}),this._shownWarning=!0)}onServiceUnavailable(e){this._showUnavailable||(a.outputChannel.appendLine("trae service unavailable!"),i.default.window.showErrorMessage(e),this._showUnavailable=!0)}}t.IDESecurityCallback=d},7913:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.outputChannel=void 0;const a=s(n(1398));t.outputChannel=a.window.createOutputChannel("Trae: AI Code Completion")},7931:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.activateMultiEdit=async function(e,t=!0){if(f)return;c.MultiEdit.activate(e,t,((e,t)=>{u.logger.info("MultiEdit: ","output","multiedit",JSON.stringify(e),t),a.icubeInteractive.showMultiEditResult({diffBlocks:e,tabToContinue:!0===t})}),(()=>{a.icubeInteractive.hideMultiEditResult()}),"AI.codeCompletionPro",((e,t)=>{u.logger.info("MultiEdit reportAction: ","output","multiedit",e.name,JSON.stringify(t))})),e.subscriptions.push(a.icubeInteractive.onDidChangeLastSyncTime((()=>{if(d)return;const e=a.workspace.getConfiguration().get("AI.hasShownMultiEditTip",!0);d=e,e||(d=!0,a.workspace.getConfiguration().update("AI.hasShownMultiEditTip",!0,a.ConfigurationTarget.Global),a.window.showInformationMessage(l,"Code Completion Pro Introduction").then((e=>{"Code Completion Pro Introduction"===e&&a.env.openExternal(a.Uri.parse("https://bytedance.larkoffice.com/docx/V8uQdqwOSoxtRwxeVmLcfw2JnZe"))})))})),a.window.onDidChangeActiveTextEditor((e=>{a.icubeInteractive.hideMultiEditResult()})))};const a=s(n(1398)),c=n(3631),u=n(8628),l="Trae AI has engaged new features of code completion, try ctrl+shift+Enter to active it. Currently Go, Python, C#,C++, Java, JS,TS are supported. For more details, please check Code Completion Pro Introduction.";let d;const f=!0},1133:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(1398)),o=n(2549);var s;!function(e){var t;let n,r,s,a,c,u,l;!function(e){e.USEast="US-East",e.SG="Singapore-Central",e.BOEI18N="US-BOE",e.BOE="China-BOE",e.CN="China-North"}(n||(n={})),function(e){e.CN="CN",e.SG="SG",e.US="US",e.BOE="BOE",e.BOEI18N="BOEI18N"}(r=e.AppRegion||(e.AppRegion={})),function(e){e.CloudIDEJWT="Cloud-IDE-JWT",e.ByteCloudJWT="Byte-Cloud-JWT",e.GDPRJWT="GDPR-JWT"}(s||(s={}));class d{static parseToken(e){try{const t=e.split(".")[1],n=t&&t.replace(/-/g,"+").replace(/_/g,"/");return n?JSON.parse(decodeURIComponent(escape(atob(n)))):null}catch(e){return null}}}async function f(){switch(await e.getUserRegion()){case n.BOE:return o.Region.CN;case n.BOEI18N:return o.Region.US;case n.CN:return o.Region.CN;case n.SG:return o.Region.SG;case n.USEast:return o.Region.US;default:return o.Region.CN}}async function h(){switch(await e.getAppRegion()){case r.BOE:return o.Region.CN;case r.BOEI18N:return o.Region.US;case r.CN:return o.Region.CN;case r.SG:return o.Region.SG;case r.US:return o.Region.US;default:return o.Region.CN}}async function p(){return e.region||(u||(u=v()?h():f()),e.region=await u),e.region}async function g(){if(e.user)return e.user;l||(l=i.default.commands.executeCommand("icube.cloudide.getUser"));const t=await l;return e.user=t||{username:"unknown"},e.user.username?.includes("__")&&(e.user.username=e.user.username.replace(/__+.*/g,"")),e.user}async function _(){try{const e=await i.default.commands.executeCommand("icube.common.runtimeConfig");return!!e?.isInternet}catch(e){return!0}}async function m(){try{return await i.default.commands.executeCommand("icube.common.getUserRegion")}catch{return n.BOE}}function v(){return"desktop"===i.default.env.appHost}t=d,d.token=async e=>{let n=Date.now()+3e5;if(t._token&&t._expTime&&t._expTime>n)return t._token;const r=await i.default.commands.executeCommand("icube.cloudide.getByteCloudToken");if(!r)return"";let o=t.parseToken(r).exp;return t._expTime=1e3*o,t._token=r,e&&e(),r},e.init=async function(e){a=e,await g(),await p()},e.getDevspace=async function(){return e.devspace||(c||(c=i.default.commands.executeCommand("icube.cloudide.getDevspace")),e.devspace=await c),e.devspace},e.getAIRegion=f,e.getDesktopAIRegion=h,e.getRegion=p,e.getUser=g,e.getToken=async function(e){return await d.token(e)},e.addClearTokenIfLogoutListener=function(){i.default.icube.onDidChangeUserInfo((t=>{t||(d._token=void 0,e.user=void 0,l=void 0)}))},e.isProd=async function(){try{if((await m()).includes("-BOE"))return!1}catch(e){}return!0},e.isOversea=async function(){try{return await p()!==o.Region.CN}catch(e){}return!1},e.isIDEExternal=_,e.getUserRegion=m,e.getAppRegion=async function(){try{return await i.default.commands.executeCommand("icube.common.getAppRegion")}catch{return r.CN}},e.isDesktop=v,e.getTokenType=async function(){if(v())return s.CloudIDEJWT;try{return await _()?s.CloudIDEJWT:s.ByteCloudJWT}catch{return s.CloudIDEJWT}}}(s||(s={})),t.default=s},7277:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getDomain=t.Server=t.defaultDomainID=t.supportedDomains=t.copilotDomains=t.DomainID=t.currentSelection=void 0,t.getSelectedEnv=o;const i=r(n(1133));function o(){return t.currentSelection}var s;!function(e){e.cn="cn",e.us="us",e.usog="us-og",e.sg="sg",e.sgog="sg-og",e.boe="boe",e.ppe="ppe",e.usex="us-ex",e.cnex="cn-ex"}(s||(t.DomainID=s={})),t.copilotDomains={[s.cn]:"https://copilot.byted.org",[s.us]:"https://copilot.byteintl.net",[s.usog]:"https://copilot-og.byteintl.net",[s.sg]:"https://copilot-sg.byteintl.net",[s.sgog]:"https://copilot-sg-og.byteintl.net",[s.boe]:"https://copilot-test.byted.org",[s.ppe]:"https://copilot.byted.org",[s.usex]:"https://a0ai-api.byteintlapi.com",[s.cnex]:"https://a0ai-api.zijieapi.com"};const a={[s.cn]:"https://devgpt.byted.org",[s.us]:"https://devgpt.byted.org",[s.usog]:"https://devgpt.byted.org",[s.sg]:"https://devgpt.byted.org",[s.sgog]:"https://devgpt.byted.org",[s.boe]:"https://devgpt.byted.org",[s.ppe]:"https://devgpt.byted.org",[s.usex]:"https://devgpt.byted.org",[s.cnex]:"https://devgpt.byted.org"};t.supportedDomains=Object.values(s);t.defaultDomainID=async()=>await i.default.isOversea()?s.usex:s.cnex;var c;!function(e){e.copilot="copilot",e.devgpt="devgpt"}(c||(t.Server=c={}));const u={[c.copilot]:t.copilotDomains,[c.devgpt]:a};t.getDomain=async e=>{const n=u[e]||u[c.copilot];let r=await(async()=>o()||await(0,t.defaultDomainID)())();const a=await i.default.isOversea();return r=await i.default.isIDEExternal()?a?s.usex:s.cnex:a?s.us:s.cn,n[r]??n[await(0,t.defaultDomainID)()]}},6001:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return c.default}});var r=f(n(860)),i=f(n(3478)),o=f(n(2007)),s=f(n(2288)),a=f(n(3538)),c=f(n(97)),u=f(n(1547)),l=f(n(6712)),d=f(n(6502));function f(e){return e&&e.__esModule?e:{default:e}}},4973:(e,t)=>{"use strict";function n(e){return 14+(e+64>>>9<<4)+1}function r(e,t){const n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function i(e,t,n,i,o,s){return r((a=r(r(t,e),r(i,s)))<<(c=o)|a>>>32-c,n);var a,c}function o(e,t,n,r,o,s,a){return i(t&n|~t&r,e,t,o,s,a)}function s(e,t,n,r,o,s,a){return i(t&r|n&~r,e,t,o,s,a)}function a(e,t,n,r,o,s,a){return i(t^n^r,e,t,o,s,a)}function c(e,t,n,r,o,s,a){return i(n^(t|~r),e,t,o,s,a)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){const t=[],n=32*e.length,r="0123456789abcdef";for(let i=0;i<n;i+=8){const n=e[i>>5]>>>i%32&255,o=parseInt(r.charAt(n>>>4&15)+r.charAt(15&n),16);t.push(o)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[n(t)-1]=t;let i=1732584193,u=-271733879,l=-1732584194,d=271733878;for(let t=0;t<e.length;t+=16){const n=i,f=u,h=l,p=d;i=o(i,u,l,d,e[t],7,-680876936),d=o(d,i,u,l,e[t+1],12,-389564586),l=o(l,d,i,u,e[t+2],17,606105819),u=o(u,l,d,i,e[t+3],22,-1044525330),i=o(i,u,l,d,e[t+4],7,-176418897),d=o(d,i,u,l,e[t+5],12,1200080426),l=o(l,d,i,u,e[t+6],17,-1473231341),u=o(u,l,d,i,e[t+7],22,-45705983),i=o(i,u,l,d,e[t+8],7,1770035416),d=o(d,i,u,l,e[t+9],12,-1958414417),l=o(l,d,i,u,e[t+10],17,-42063),u=o(u,l,d,i,e[t+11],22,-1990404162),i=o(i,u,l,d,e[t+12],7,1804603682),d=o(d,i,u,l,e[t+13],12,-40341101),l=o(l,d,i,u,e[t+14],17,-1502002290),u=o(u,l,d,i,e[t+15],22,1236535329),i=s(i,u,l,d,e[t+1],5,-165796510),d=s(d,i,u,l,e[t+6],9,-1069501632),l=s(l,d,i,u,e[t+11],14,643717713),u=s(u,l,d,i,e[t],20,-373897302),i=s(i,u,l,d,e[t+5],5,-701558691),d=s(d,i,u,l,e[t+10],9,38016083),l=s(l,d,i,u,e[t+15],14,-660478335),u=s(u,l,d,i,e[t+4],20,-405537848),i=s(i,u,l,d,e[t+9],5,568446438),d=s(d,i,u,l,e[t+14],9,-1019803690),l=s(l,d,i,u,e[t+3],14,-187363961),u=s(u,l,d,i,e[t+8],20,1163531501),i=s(i,u,l,d,e[t+13],5,-1444681467),d=s(d,i,u,l,e[t+2],9,-51403784),l=s(l,d,i,u,e[t+7],14,1735328473),u=s(u,l,d,i,e[t+12],20,-1926607734),i=a(i,u,l,d,e[t+5],4,-378558),d=a(d,i,u,l,e[t+8],11,-2022574463),l=a(l,d,i,u,e[t+11],16,1839030562),u=a(u,l,d,i,e[t+14],23,-35309556),i=a(i,u,l,d,e[t+1],4,-1530992060),d=a(d,i,u,l,e[t+4],11,1272893353),l=a(l,d,i,u,e[t+7],16,-155497632),u=a(u,l,d,i,e[t+10],23,-1094730640),i=a(i,u,l,d,e[t+13],4,681279174),d=a(d,i,u,l,e[t],11,-358537222),l=a(l,d,i,u,e[t+3],16,-722521979),u=a(u,l,d,i,e[t+6],23,76029189),i=a(i,u,l,d,e[t+9],4,-640364487),d=a(d,i,u,l,e[t+12],11,-421815835),l=a(l,d,i,u,e[t+15],16,530742520),u=a(u,l,d,i,e[t+2],23,-995338651),i=c(i,u,l,d,e[t],6,-198630844),d=c(d,i,u,l,e[t+7],10,1126891415),l=c(l,d,i,u,e[t+14],15,-1416354905),u=c(u,l,d,i,e[t+5],21,-57434055),i=c(i,u,l,d,e[t+12],6,1700485571),d=c(d,i,u,l,e[t+3],10,-1894986606),l=c(l,d,i,u,e[t+10],15,-1051523),u=c(u,l,d,i,e[t+1],21,-2054922799),i=c(i,u,l,d,e[t+8],6,1873313359),d=c(d,i,u,l,e[t+15],10,-30611744),l=c(l,d,i,u,e[t+6],15,-1560198380),u=c(u,l,d,i,e[t+13],21,1309151649),i=c(i,u,l,d,e[t+4],6,-145523070),d=c(d,i,u,l,e[t+11],10,-1120210379),l=c(l,d,i,u,e[t+2],15,718787259),u=c(u,l,d,i,e[t+9],21,-343485551),i=r(i,n),u=r(u,f),l=r(l,h),d=r(d,p)}return[i,u,l,d]}(function(e){if(0===e.length)return[];const t=8*e.length,r=new Uint32Array(n(t));for(let n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))};t.default=u},5806:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};t.default=n},3538:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default="00000000-0000-0000-0000-000000000000"},6502:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(1547))&&r.__esModule?r:{default:r};var o=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");let t;const n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n};t.default=o},6078:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},8588:(e,t)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if(!n&&(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(r)};const r=new Uint8Array(16)},536:(e,t)=>{"use strict";function n(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:case 3:return t^n^r;case 2:return t&n^t&r^n&r}}function r(e,t){return e<<t|e>>>32-t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){const t=[1518500249,1859775393,2400959708,3395469782],i=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const o=e.length/4+2,s=Math.ceil(o/16),a=new Array(s);for(let t=0;t<s;++t){const n=new Uint32Array(16);for(let r=0;r<16;++r)n[r]=e[64*t+4*r]<<24|e[64*t+4*r+1]<<16|e[64*t+4*r+2]<<8|e[64*t+4*r+3];a[t]=n}a[s-1][14]=8*(e.length-1)/Math.pow(2,32),a[s-1][14]=Math.floor(a[s-1][14]),a[s-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<s;++e){const o=new Uint32Array(80);for(let t=0;t<16;++t)o[t]=a[e][t];for(let e=16;e<80;++e)o[e]=r(o[e-3]^o[e-8]^o[e-14]^o[e-16],1);let s=i[0],c=i[1],u=i[2],l=i[3],d=i[4];for(let e=0;e<80;++e){const i=Math.floor(e/20),a=r(s,5)+n(i,c,u,l)+d+t[i]+o[e]>>>0;d=l,l=u,u=r(c,30)>>>0,c=s,s=a}i[0]=i[0]+s>>>0,i[1]=i[1]+c>>>0,i[2]=i[2]+u>>>0,i[3]=i[3]+l>>>0,i[4]=i[4]+d>>>0}return[i[0]>>24&255,i[0]>>16&255,i[0]>>8&255,255&i[0],i[1]>>24&255,i[1]>>16&255,i[1]>>8&255,255&i[1],i[2]>>24&255,i[2]>>16&255,i[2]>>8&255,255&i[2],i[3]>>24&255,i[3]>>16&255,i[3]>>8&255,255&i[3],i[4]>>24&255,i[4]>>16&255,i[4]>>8&255,255&i[4]]};t.default=i},6712:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.unsafeStringify=s;var r,i=(r=n(1547))&&r.__esModule?r:{default:r};const o=[];for(let e=0;e<256;++e)o.push((e+256).toString(16).slice(1));function s(e,t=0){return o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]}var a=function(e,t=0){const n=s(e,t);if(!(0,i.default)(n))throw TypeError("Stringified UUID is invalid");return n};t.default=a},860:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(8588))&&r.__esModule?r:{default:r},o=n(6712);let s,a,c=0,u=0;var l=function(e,t,n){let r=t&&n||0;const l=t||new Array(16);let d=(e=e||{}).node||s,f=void 0!==e.clockseq?e.clockseq:a;if(null==d||null==f){const t=e.random||(e.rng||i.default)();null==d&&(d=s=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==f&&(f=a=16383&(t[6]<<8|t[7]))}let h=void 0!==e.msecs?e.msecs:Date.now(),p=void 0!==e.nsecs?e.nsecs:u+1;const g=h-c+(p-u)/1e4;if(g<0&&void 0===e.clockseq&&(f=f+1&16383),(g<0||h>c)&&void 0===e.nsecs&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=h,u=p,a=f,h+=122192928e5;const _=(1e4*(268435455&h)+p)%4294967296;l[r++]=_>>>24&255,l[r++]=_>>>16&255,l[r++]=_>>>8&255,l[r++]=255&_;const m=h/4294967296*1e4&268435455;l[r++]=m>>>8&255,l[r++]=255&m,l[r++]=m>>>24&15|16,l[r++]=m>>>16&255,l[r++]=f>>>8|128,l[r++]=255&f;for(let e=0;e<6;++e)l[r+e]=d[e];return t||(0,o.unsafeStringify)(l)};t.default=l},3478:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(751)),i=o(n(4973));function o(e){return e&&e.__esModule?e:{default:e}}var s=(0,r.default)("v3",48,i.default);t.default=s},751:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=void 0,t.default=function(e,t,n){function r(e,r,s,a){var c;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof r&&(r=(0,o.default)(r)),16!==(null===(c=r)||void 0===c?void 0:c.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+e.length);if(u.set(r),u.set(e,r.length),u=n(u),u[6]=15&u[6]|t,u[8]=63&u[8]|128,s){a=a||0;for(let e=0;e<16;++e)s[a+e]=u[e];return s}return(0,i.unsafeStringify)(u)}try{r.name=e}catch(e){}return r.DNS=s,r.URL=a,r};var r,i=n(6712),o=(r=n(6502))&&r.__esModule?r:{default:r};const s="6ba7b810-9dad-11d1-80b4-00c04fd430c8";t.DNS=s;const a="6ba7b811-9dad-11d1-80b4-00c04fd430c8";t.URL=a},2007:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(5806)),i=s(n(8588)),o=n(6712);function s(e){return e&&e.__esModule?e:{default:e}}var a=function(e,t,n){if(r.default.randomUUID&&!t&&!e)return r.default.randomUUID();const s=(e=e||{}).random||(e.rng||i.default)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=s[e];return t}return(0,o.unsafeStringify)(s)};t.default=a},2288:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(751)),i=o(n(536));function o(e){return e&&e.__esModule?e:{default:e}}var s=(0,r.default)("v5",80,i.default);t.default=s},1547:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(6078))&&r.__esModule?r:{default:r};var o=function(e){return"string"==typeof e&&i.default.test(e)};t.default=o},97:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(1547))&&r.__esModule?r:{default:r};var o=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)};t.default=o},2433:(e,t,n)=>{"use strict";e.exports=n(3717)},3717:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.createMessageConnection=t.BrowserMessageWriter=t.BrowserMessageReader=void 0;n(4977).default.install();const o=n(7683);i(n(7683),t);class s extends o.AbstractMessageReader{constructor(e){super(),this._onData=new o.Emitter,this._messageListener=e=>{this._onData.fire(e.data)},e.addEventListener("error",(e=>this.fireError(e))),e.onmessage=this._messageListener}listen(e){return this._onData.event(e)}}t.BrowserMessageReader=s;class a extends o.AbstractMessageWriter{constructor(e){super(),this.port=e,this.errorCount=0,e.addEventListener("error",(e=>this.fireError(e)))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}}t.BrowserMessageWriter=a,t.createMessageConnection=function(e,t,n,r){return void 0===n&&(n=o.NullLogger),o.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,o.createMessageConnection)(e,t,n,r)}},4977:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7683);class i extends r.AbstractMessageBuffer{constructor(e="utf-8"){super(e),this.asciiDecoder=new TextDecoder("ascii")}emptyBuffer(){return i.emptyBuffer}fromString(e,t){return(new TextEncoder).encode(e)}toString(e,t){return"ascii"===t?this.asciiDecoder.decode(e):new TextDecoder(t).decode(e)}asNative(e,t){return void 0===t?e:e.slice(0,t)}allocNative(e){return new Uint8Array(e)}}i.emptyBuffer=new Uint8Array(0);class o{constructor(e){this.socket=e,this._onData=new r.Emitter,this._messageListener=e=>{e.data.arrayBuffer().then((e=>{this._onData.fire(new Uint8Array(e))}),(()=>{(0,r.RAL)().console.error("Converting blob to array buffer failed.")}))},this.socket.addEventListener("message",this._messageListener)}onClose(e){return this.socket.addEventListener("close",e),r.Disposable.create((()=>this.socket.removeEventListener("close",e)))}onError(e){return this.socket.addEventListener("error",e),r.Disposable.create((()=>this.socket.removeEventListener("error",e)))}onEnd(e){return this.socket.addEventListener("end",e),r.Disposable.create((()=>this.socket.removeEventListener("end",e)))}onData(e){return this._onData.event(e)}}class s{constructor(e){this.socket=e}onClose(e){return this.socket.addEventListener("close",e),r.Disposable.create((()=>this.socket.removeEventListener("close",e)))}onError(e){return this.socket.addEventListener("error",e),r.Disposable.create((()=>this.socket.removeEventListener("error",e)))}onEnd(e){return this.socket.addEventListener("end",e),r.Disposable.create((()=>this.socket.removeEventListener("end",e)))}write(e,t){if("string"==typeof e){if(void 0!==t&&"utf-8"!==t)throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${t}`);this.socket.send(e)}else this.socket.send(e);return Promise.resolve()}end(){this.socket.close()}}const a=new TextEncoder,c=Object.freeze({messageBuffer:Object.freeze({create:e=>new i(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>{if("utf-8"!==t.charset)throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${t.charset}`);return Promise.resolve(a.encode(JSON.stringify(e,void 0,0)))}}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>{if(!(e instanceof Uint8Array))throw new Error("In a Browser environments only Uint8Arrays are supported.");return Promise.resolve(JSON.parse(new TextDecoder(t.charset).decode(e)))}})}),stream:Object.freeze({asReadableStream:e=>new o(e),asWritableStream:e=>new s(e)}),console,timer:Object.freeze({setTimeout(e,t,...n){const r=setTimeout(e,t,...n);return{dispose:()=>clearTimeout(r)}},setImmediate(e,...t){const n=setTimeout(e,0,...t);return{dispose:()=>clearTimeout(n)}},setInterval(e,t,...n){const r=setInterval(e,t,...n);return{dispose:()=>clearInterval(r)}}})});function u(){return c}!function(e){e.install=function(){r.RAL.install(c)}}(u||(u={})),t.default=u},7683:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressType=t.ProgressToken=t.createMessageConnection=t.NullLogger=t.ConnectionOptions=t.ConnectionStrategy=t.AbstractMessageBuffer=t.WriteableStreamMessageWriter=t.AbstractMessageWriter=t.MessageWriter=t.ReadableStreamMessageReader=t.AbstractMessageReader=t.MessageReader=t.SharedArrayReceiverStrategy=t.SharedArraySenderStrategy=t.CancellationToken=t.CancellationTokenSource=t.Emitter=t.Event=t.Disposable=t.LRUCache=t.Touch=t.LinkedMap=t.ParameterStructures=t.NotificationType9=t.NotificationType8=t.NotificationType7=t.NotificationType6=t.NotificationType5=t.NotificationType4=t.NotificationType3=t.NotificationType2=t.NotificationType1=t.NotificationType0=t.NotificationType=t.ErrorCodes=t.ResponseError=t.RequestType9=t.RequestType8=t.RequestType7=t.RequestType6=t.RequestType5=t.RequestType4=t.RequestType3=t.RequestType2=t.RequestType1=t.RequestType0=t.RequestType=t.Message=t.RAL=void 0,t.MessageStrategy=t.CancellationStrategy=t.CancellationSenderStrategy=t.CancellationReceiverStrategy=t.ConnectionError=t.ConnectionErrors=t.LogTraceNotification=t.SetTraceNotification=t.TraceFormat=t.TraceValues=t.Trace=void 0;const r=n(3239);Object.defineProperty(t,"Message",{enumerable:!0,get:function(){return r.Message}}),Object.defineProperty(t,"RequestType",{enumerable:!0,get:function(){return r.RequestType}}),Object.defineProperty(t,"RequestType0",{enumerable:!0,get:function(){return r.RequestType0}}),Object.defineProperty(t,"RequestType1",{enumerable:!0,get:function(){return r.RequestType1}}),Object.defineProperty(t,"RequestType2",{enumerable:!0,get:function(){return r.RequestType2}}),Object.defineProperty(t,"RequestType3",{enumerable:!0,get:function(){return r.RequestType3}}),Object.defineProperty(t,"RequestType4",{enumerable:!0,get:function(){return r.RequestType4}}),Object.defineProperty(t,"RequestType5",{enumerable:!0,get:function(){return r.RequestType5}}),Object.defineProperty(t,"RequestType6",{enumerable:!0,get:function(){return r.RequestType6}}),Object.defineProperty(t,"RequestType7",{enumerable:!0,get:function(){return r.RequestType7}}),Object.defineProperty(t,"RequestType8",{enumerable:!0,get:function(){return r.RequestType8}}),Object.defineProperty(t,"RequestType9",{enumerable:!0,get:function(){return r.RequestType9}}),Object.defineProperty(t,"ResponseError",{enumerable:!0,get:function(){return r.ResponseError}}),Object.defineProperty(t,"ErrorCodes",{enumerable:!0,get:function(){return r.ErrorCodes}}),Object.defineProperty(t,"NotificationType",{enumerable:!0,get:function(){return r.NotificationType}}),Object.defineProperty(t,"NotificationType0",{enumerable:!0,get:function(){return r.NotificationType0}}),Object.defineProperty(t,"NotificationType1",{enumerable:!0,get:function(){return r.NotificationType1}}),Object.defineProperty(t,"NotificationType2",{enumerable:!0,get:function(){return r.NotificationType2}}),Object.defineProperty(t,"NotificationType3",{enumerable:!0,get:function(){return r.NotificationType3}}),Object.defineProperty(t,"NotificationType4",{enumerable:!0,get:function(){return r.NotificationType4}}),Object.defineProperty(t,"NotificationType5",{enumerable:!0,get:function(){return r.NotificationType5}}),Object.defineProperty(t,"NotificationType6",{enumerable:!0,get:function(){return r.NotificationType6}}),Object.defineProperty(t,"NotificationType7",{enumerable:!0,get:function(){return r.NotificationType7}}),Object.defineProperty(t,"NotificationType8",{enumerable:!0,get:function(){return r.NotificationType8}}),Object.defineProperty(t,"NotificationType9",{enumerable:!0,get:function(){return r.NotificationType9}}),Object.defineProperty(t,"ParameterStructures",{enumerable:!0,get:function(){return r.ParameterStructures}});const i=n(8386);Object.defineProperty(t,"LinkedMap",{enumerable:!0,get:function(){return i.LinkedMap}}),Object.defineProperty(t,"LRUCache",{enumerable:!0,get:function(){return i.LRUCache}}),Object.defineProperty(t,"Touch",{enumerable:!0,get:function(){return i.Touch}});const o=n(4649);Object.defineProperty(t,"Disposable",{enumerable:!0,get:function(){return o.Disposable}});const s=n(7966);Object.defineProperty(t,"Event",{enumerable:!0,get:function(){return s.Event}}),Object.defineProperty(t,"Emitter",{enumerable:!0,get:function(){return s.Emitter}});const a=n(6412);Object.defineProperty(t,"CancellationTokenSource",{enumerable:!0,get:function(){return a.CancellationTokenSource}}),Object.defineProperty(t,"CancellationToken",{enumerable:!0,get:function(){return a.CancellationToken}});const c=n(5498);Object.defineProperty(t,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return c.SharedArraySenderStrategy}}),Object.defineProperty(t,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return c.SharedArrayReceiverStrategy}});const u=n(7691);Object.defineProperty(t,"MessageReader",{enumerable:!0,get:function(){return u.MessageReader}}),Object.defineProperty(t,"AbstractMessageReader",{enumerable:!0,get:function(){return u.AbstractMessageReader}}),Object.defineProperty(t,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return u.ReadableStreamMessageReader}});const l=n(939);Object.defineProperty(t,"MessageWriter",{enumerable:!0,get:function(){return l.MessageWriter}}),Object.defineProperty(t,"AbstractMessageWriter",{enumerable:!0,get:function(){return l.AbstractMessageWriter}}),Object.defineProperty(t,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return l.WriteableStreamMessageWriter}});const d=n(1458);Object.defineProperty(t,"AbstractMessageBuffer",{enumerable:!0,get:function(){return d.AbstractMessageBuffer}});const f=n(7947);Object.defineProperty(t,"ConnectionStrategy",{enumerable:!0,get:function(){return f.ConnectionStrategy}}),Object.defineProperty(t,"ConnectionOptions",{enumerable:!0,get:function(){return f.ConnectionOptions}}),Object.defineProperty(t,"NullLogger",{enumerable:!0,get:function(){return f.NullLogger}}),Object.defineProperty(t,"createMessageConnection",{enumerable:!0,get:function(){return f.createMessageConnection}}),Object.defineProperty(t,"ProgressToken",{enumerable:!0,get:function(){return f.ProgressToken}}),Object.defineProperty(t,"ProgressType",{enumerable:!0,get:function(){return f.ProgressType}}),Object.defineProperty(t,"Trace",{enumerable:!0,get:function(){return f.Trace}}),Object.defineProperty(t,"TraceValues",{enumerable:!0,get:function(){return f.TraceValues}}),Object.defineProperty(t,"TraceFormat",{enumerable:!0,get:function(){return f.TraceFormat}}),Object.defineProperty(t,"SetTraceNotification",{enumerable:!0,get:function(){return f.SetTraceNotification}}),Object.defineProperty(t,"LogTraceNotification",{enumerable:!0,get:function(){return f.LogTraceNotification}}),Object.defineProperty(t,"ConnectionErrors",{enumerable:!0,get:function(){return f.ConnectionErrors}}),Object.defineProperty(t,"ConnectionError",{enumerable:!0,get:function(){return f.ConnectionError}}),Object.defineProperty(t,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return f.CancellationReceiverStrategy}}),Object.defineProperty(t,"CancellationSenderStrategy",{enumerable:!0,get:function(){return f.CancellationSenderStrategy}}),Object.defineProperty(t,"CancellationStrategy",{enumerable:!0,get:function(){return f.CancellationStrategy}}),Object.defineProperty(t,"MessageStrategy",{enumerable:!0,get:function(){return f.MessageStrategy}});const h=n(8996);t.RAL=h.default},6412:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationTokenSource=t.CancellationToken=void 0;const r=n(8996),i=n(9387),o=n(7966);var s;!function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:o.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:o.Event.None}),e.is=function(t){const n=t;return n&&(n===e.None||n===e.Cancelled||i.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}}(s||(t.CancellationToken=s={}));const a=Object.freeze((function(e,t){const n=(0,r.default)().timer.setTimeout(e.bind(t),0);return{dispose(){n.dispose()}}}));class c{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?a:(this._emitter||(this._emitter=new o.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}t.CancellationTokenSource=class{get token(){return this._token||(this._token=new c),this._token}cancel(){this._token?this._token.cancel():this._token=s.Cancelled}dispose(){this._token?this._token instanceof c&&this._token.dispose():this._token=s.None}}},7947:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMessageConnection=t.ConnectionOptions=t.MessageStrategy=t.CancellationStrategy=t.CancellationSenderStrategy=t.CancellationReceiverStrategy=t.RequestCancellationReceiverStrategy=t.IdCancellationReceiverStrategy=t.ConnectionStrategy=t.ConnectionError=t.ConnectionErrors=t.LogTraceNotification=t.SetTraceNotification=t.TraceFormat=t.TraceValues=t.Trace=t.NullLogger=t.ProgressType=t.ProgressToken=void 0;const r=n(8996),i=n(9387),o=n(3239),s=n(8386),a=n(7966),c=n(6412);var u,l,d,f,h,p,g,_,m,v,y,b,E,w,S,T,C,O,A;!function(e){e.type=new o.NotificationType("$/cancelRequest")}(u||(u={})),function(e){e.is=function(e){return"string"==typeof e||"number"==typeof e}}(l||(t.ProgressToken=l={})),function(e){e.type=new o.NotificationType("$/progress")}(d||(d={}));t.ProgressType=class{constructor(){}},function(e){e.is=function(e){return i.func(e)}}(f||(f={})),t.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}}),function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Compact=2]="Compact",e[e.Verbose=3]="Verbose"}(h||(t.Trace=h={})),function(e){e.Off="off",e.Messages="messages",e.Compact="compact",e.Verbose="verbose"}(p||(t.TraceValues=p={})),function(e){e.fromString=function(t){if(!i.string(t))return e.Off;switch(t=t.toLowerCase()){case"off":default:return e.Off;case"messages":return e.Messages;case"compact":return e.Compact;case"verbose":return e.Verbose}},e.toString=function(t){switch(t){case e.Off:return"off";case e.Messages:return"messages";case e.Compact:return"compact";case e.Verbose:return"verbose";default:return"off"}}}(h||(t.Trace=h={})),function(e){e.Text="text",e.JSON="json"}(g||(t.TraceFormat=g={})),function(e){e.fromString=function(t){return i.string(t)&&"json"===(t=t.toLowerCase())?e.JSON:e.Text}}(g||(t.TraceFormat=g={})),function(e){e.type=new o.NotificationType("$/setTrace")}(_||(t.SetTraceNotification=_={})),function(e){e.type=new o.NotificationType("$/logTrace")}(m||(t.LogTraceNotification=m={})),function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"}(v||(t.ConnectionErrors=v={}));class I extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,I.prototype)}}t.ConnectionError=I,function(e){e.is=function(e){const t=e;return t&&i.func(t.cancelUndispatched)}}(y||(t.ConnectionStrategy=y={})),function(e){e.is=function(e){const t=e;return t&&(void 0===t.kind||"id"===t.kind)&&i.func(t.createCancellationTokenSource)&&(void 0===t.dispose||i.func(t.dispose))}}(b||(t.IdCancellationReceiverStrategy=b={})),function(e){e.is=function(e){const t=e;return t&&"request"===t.kind&&i.func(t.createCancellationTokenSource)&&(void 0===t.dispose||i.func(t.dispose))}}(E||(t.RequestCancellationReceiverStrategy=E={})),function(e){e.Message=Object.freeze({createCancellationTokenSource:e=>new c.CancellationTokenSource}),e.is=function(e){return b.is(e)||E.is(e)}}(w||(t.CancellationReceiverStrategy=w={})),function(e){e.Message=Object.freeze({sendCancellation:(e,t)=>e.sendNotification(u.type,{id:t}),cleanup(e){}}),e.is=function(e){const t=e;return t&&i.func(t.sendCancellation)&&i.func(t.cleanup)}}(S||(t.CancellationSenderStrategy=S={})),function(e){e.Message=Object.freeze({receiver:w.Message,sender:S.Message}),e.is=function(e){const t=e;return t&&w.is(t.receiver)&&S.is(t.sender)}}(T||(t.CancellationStrategy=T={})),function(e){e.is=function(e){const t=e;return t&&i.func(t.handleMessage)}}(C||(t.MessageStrategy=C={})),function(e){e.is=function(e){const t=e;return t&&(T.is(t.cancellationStrategy)||y.is(t.connectionStrategy)||C.is(t.messageStrategy))}}(O||(t.ConnectionOptions=O={})),function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"}(A||(A={})),t.createMessageConnection=function(e,n,p,y){const E=void 0!==p?p:t.NullLogger;let w=0,S=0,O=0;const R="2.0";let D;const x=new Map;let M;const P=new Map,N=new Map;let k,L,j=new s.LinkedMap,z=new Map,F=new Set,B=new Map,U=h.Off,G=g.Text,q=A.New;const V=new a.Emitter,$=new a.Emitter,H=new a.Emitter,W=new a.Emitter,K=new a.Emitter,J=y&&y.cancellationStrategy?y.cancellationStrategy:T.Message;function Y(e){if(null===e)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+e.toString()}function X(e,t){var n;o.Message.isRequest(t)?e.set(Y(t.id),t):o.Message.isResponse(t)?e.set(null===(n=t.id)?"res-unknown-"+(++O).toString():"res-"+n.toString(),t):e.set("not-"+(++S).toString(),t)}function Z(e){}function Q(){return q===A.Listening}function ee(){return q===A.Closed}function te(){return q===A.Disposed}function ne(){q!==A.New&&q!==A.Listening||(q=A.Closed,$.fire(void 0))}function re(){k||0===j.size||(k=(0,r.default)().timer.setImmediate((()=>{k=void 0,function(){if(0===j.size)return;const e=j.shift();try{const t=y?.messageStrategy;C.is(t)?t.handleMessage(e,ie):ie(e)}finally{re()}}()})))}function ie(e){o.Message.isRequest(e)?function(e){if(te())return;function t(t,r,i){const s={jsonrpc:R,id:e.id};t instanceof o.ResponseError?s.error=t.toJson():s.result=void 0===t?null:t,ae(s,r,i),n.write(s).catch((()=>E.error("Sending response failed.")))}function r(t,r,i){const o={jsonrpc:R,id:e.id,error:t.toJson()};ae(o,r,i),n.write(o).catch((()=>E.error("Sending response failed.")))}function s(t,r,i){void 0===t&&(t=null);const o={jsonrpc:R,id:e.id,result:t};ae(o,r,i),n.write(o).catch((()=>E.error("Sending response failed.")))}!function(e){if(U===h.Off||!L)return;if(G===g.Text){let t;U!==h.Verbose&&U!==h.Compact||!e.params||(t=`Params: ${se(e.params)}\n\n`),L.log(`Received request '${e.method} - (${e.id})'.`,t)}else ue("receive-request",e)}(e);const a=x.get(e.method);let c,u;a&&(c=a.type,u=a.handler);const l=Date.now();if(u||D){const n=e.id??String(Date.now()),a=b.is(J.receiver)?J.receiver.createCancellationTokenSource(n):J.receiver.createCancellationTokenSource(e);null!==e.id&&F.has(e.id)&&a.cancel(),null!==e.id&&B.set(n,a);try{let d;if(u)if(void 0===e.params){if(void 0!==c&&0!==c.numberOfParams)return void r(new o.ResponseError(o.ErrorCodes.InvalidParams,`Request ${e.method} defines ${c.numberOfParams} params but received none.`),e.method,l);d=u(a.token)}else if(Array.isArray(e.params)){if(void 0!==c&&c.parameterStructures===o.ParameterStructures.byName)return void r(new o.ResponseError(o.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by name but received parameters by position`),e.method,l);d=u(...e.params,a.token)}else{if(void 0!==c&&c.parameterStructures===o.ParameterStructures.byPosition)return void r(new o.ResponseError(o.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by position but received parameters by name`),e.method,l);d=u(e.params,a.token)}else D&&(d=D(e.method,e.params,a.token));const f=d;d?f.then?f.then((r=>{B.delete(n),t(r,e.method,l)}),(t=>{B.delete(n),t instanceof o.ResponseError?r(t,e.method,l):t&&i.string(t.message)?r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,l):r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,l)})):(B.delete(n),t(d,e.method,l)):(B.delete(n),s(d,e.method,l))}catch(s){B.delete(n),s instanceof o.ResponseError?t(s,e.method,l):s&&i.string(s.message)?r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${s.message}`),e.method,l):r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,l)}}else r(new o.ResponseError(o.ErrorCodes.MethodNotFound,`Unhandled method ${e.method}`),e.method,l)}(e):o.Message.isNotification(e)?function(e){if(te())return;let t,n;if(e.method===u.type.method){const t=e.params.id;return F.delete(t),void ce(e)}{const r=P.get(e.method);r&&(n=r.handler,t=r.type)}if(n||M)try{if(ce(e),n)if(void 0===e.params)void 0!==t&&0!==t.numberOfParams&&t.parameterStructures!==o.ParameterStructures.byName&&E.error(`Notification ${e.method} defines ${t.numberOfParams} params but received none.`),n();else if(Array.isArray(e.params)){const r=e.params;e.method===d.type.method&&2===r.length&&l.is(r[0])?n({token:r[0],value:r[1]}):(void 0!==t&&(t.parameterStructures===o.ParameterStructures.byName&&E.error(`Notification ${e.method} defines parameters by name but received parameters by position`),t.numberOfParams!==e.params.length&&E.error(`Notification ${e.method} defines ${t.numberOfParams} params but received ${r.length} arguments`)),n(...r))}else void 0!==t&&t.parameterStructures===o.ParameterStructures.byPosition&&E.error(`Notification ${e.method} defines parameters by position but received parameters by name`),n(e.params);else M&&M(e.method,e.params)}catch(t){t.message?E.error(`Notification handler '${e.method}' failed with message: ${t.message}`):E.error(`Notification handler '${e.method}' failed unexpectedly.`)}else H.fire(e)}(e):o.Message.isResponse(e)?function(e){if(te())return;if(null===e.id)e.error?E.error(`Received response message without id: Error is: \n${JSON.stringify(e.error,void 0,4)}`):E.error("Received response message without id. No further error information provided.");else{const t=e.id,n=z.get(t);if(function(e,t){if(U===h.Off||!L)return;if(G===g.Text){let n;if(U!==h.Verbose&&U!==h.Compact||(e.error&&e.error.data?n=`Error data: ${se(e.error.data)}\n\n`:e.result?n=`Result: ${se(e.result)}\n\n`:void 0===e.error&&(n="No result returned.\n\n")),t){const r=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:"";L.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${r}`,n)}else L.log(`Received response ${e.id} without active response promise.`,n)}else ue("receive-response",e)}(e,n),void 0!==n){z.delete(t);try{if(e.error){const t=e.error;n.reject(new o.ResponseError(t.code,t.message,t.data))}else{if(void 0===e.result)throw new Error("Should never happen.");n.resolve(e.result)}}catch(e){e.message?E.error(`Response handler '${n.method}' failed with message: ${e.message}`):E.error(`Response handler '${n.method}' failed unexpectedly.`)}}}}(e):function(e){if(!e)return void E.error("Received empty message.");E.error(`Received message which is neither a response nor a notification message:\n${JSON.stringify(e,null,4)}`);const t=e;if(i.string(t.id)||i.number(t.id)){const e=t.id,n=z.get(e);n&&n.reject(new Error("The received response has neither a result nor an error property."))}}(e)}e.onClose(ne),e.onError((function(e){V.fire([e,void 0,void 0])})),n.onClose(ne),n.onError((function(e){V.fire(e)}));const oe=e=>{try{if(o.Message.isNotification(e)&&e.method===u.type.method){const t=e.params.id,r=Y(t),i=j.get(r);if(o.Message.isRequest(i)){const o=y?.connectionStrategy,s=o&&o.cancelUndispatched?o.cancelUndispatched(i,Z):void 0;if(s&&(void 0!==s.error||void 0!==s.result))return j.delete(r),B.delete(t),s.id=i.id,ae(s,e.method,Date.now()),void n.write(s).catch((()=>E.error("Sending response for canceled message failed.")))}const s=B.get(t);if(void 0!==s)return s.cancel(),void ce(e);F.add(t)}X(j,e)}finally{re()}};function se(e){if(null!=e)switch(U){case h.Verbose:return JSON.stringify(e,null,4);case h.Compact:return JSON.stringify(e);default:return}}function ae(e,t,n){if(U!==h.Off&&L)if(G===g.Text){let r;U!==h.Verbose&&U!==h.Compact||(e.error&&e.error.data?r=`Error data: ${se(e.error.data)}\n\n`:e.result?r=`Result: ${se(e.result)}\n\n`:void 0===e.error&&(r="No result returned.\n\n")),L.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-n}ms`,r)}else ue("send-response",e)}function ce(e){if(U!==h.Off&&L&&e.method!==m.type.method)if(G===g.Text){let t;U!==h.Verbose&&U!==h.Compact||(t=e.params?`Params: ${se(e.params)}\n\n`:"No parameters provided.\n\n"),L.log(`Received notification '${e.method}'.`,t)}else ue("receive-notification",e)}function ue(e,t){if(!L||U===h.Off)return;const n={isLSPMessage:!0,type:e,message:t,timestamp:Date.now()};L.log(n)}function le(){if(ee())throw new I(v.Closed,"Connection is closed.");if(te())throw new I(v.Disposed,"Connection is disposed.")}function de(e){return void 0===e?null:e}function fe(e){return null===e?void 0:e}function he(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}function pe(e,t){switch(e){case o.ParameterStructures.auto:return he(t)?fe(t):[de(t)];case o.ParameterStructures.byName:if(!he(t))throw new Error("Received parameters by name but param is not an object literal.");return fe(t);case o.ParameterStructures.byPosition:return[de(t)];default:throw new Error(`Unknown parameter structure ${e.toString()}`)}}function ge(e,t){let n;const r=e.numberOfParams;switch(r){case 0:n=void 0;break;case 1:n=pe(e.parameterStructures,t[0]);break;default:n=[];for(let e=0;e<t.length&&e<r;e++)n.push(de(t[e]));if(t.length<r)for(let e=t.length;e<r;e++)n.push(null)}return n}const _e={sendNotification:(e,...t)=>{let r,s;if(le(),i.string(e)){r=e;const n=t[0];let i=0,a=o.ParameterStructures.auto;o.ParameterStructures.is(n)&&(i=1,a=n);let c=t.length;const u=c-i;switch(u){case 0:s=void 0;break;case 1:s=pe(a,t[i]);break;default:if(a===o.ParameterStructures.byName)throw new Error(`Received ${u} parameters for 'by Name' notification parameter structure.`);s=t.slice(i,c).map((e=>de(e)))}}else{const n=t;r=e.method,s=ge(e,n)}const a={jsonrpc:R,method:r,params:s};return function(e){if(U!==h.Off&&L)if(G===g.Text){let t;U!==h.Verbose&&U!==h.Compact||(t=e.params?`Params: ${se(e.params)}\n\n`:"No parameters provided.\n\n"),L.log(`Sending notification '${e.method}'.`,t)}else ue("send-notification",e)}(a),n.write(a).catch((e=>{throw E.error("Sending notification failed."),e}))},onNotification:(e,t)=>{let n;return le(),i.func(e)?M=e:t&&(i.string(e)?(n=e,P.set(e,{type:void 0,handler:t})):(n=e.method,P.set(e.method,{type:e,handler:t}))),{dispose:()=>{void 0!==n?P.delete(n):M=void 0}}},onProgress:(e,t,n)=>{if(N.has(t))throw new Error(`Progress handler for token ${t} already registered`);return N.set(t,n),{dispose:()=>{N.delete(t)}}},sendProgress:(e,t,n)=>_e.sendNotification(d.type,{token:t,value:n}),onUnhandledProgress:W.event,sendRequest:(e,...t)=>{let r,s,a;if(le(),function(){if(!Q())throw new Error("Call listen() first.")}(),i.string(e)){r=e;const n=t[0],i=t[t.length-1];let u=0,l=o.ParameterStructures.auto;o.ParameterStructures.is(n)&&(u=1,l=n);let d=t.length;c.CancellationToken.is(i)&&(d-=1,a=i);const f=d-u;switch(f){case 0:s=void 0;break;case 1:s=pe(l,t[u]);break;default:if(l===o.ParameterStructures.byName)throw new Error(`Received ${f} parameters for 'by Name' request parameter structure.`);s=t.slice(u,d).map((e=>de(e)))}}else{const n=t;r=e.method,s=ge(e,n);const i=e.numberOfParams;a=c.CancellationToken.is(n[i])?n[i]:void 0}const u=w++;let l;a&&(l=a.onCancellationRequested((()=>{const e=J.sender.sendCancellation(_e,u);return void 0===e?(E.log(`Received no promise from cancellation strategy when cancelling id ${u}`),Promise.resolve()):e.catch((()=>{E.log(`Sending cancellation messages for id ${u} failed`)}))})));const d={jsonrpc:R,id:u,method:r,params:s};return function(e){if(U!==h.Off&&L)if(G===g.Text){let t;U!==h.Verbose&&U!==h.Compact||!e.params||(t=`Params: ${se(e.params)}\n\n`),L.log(`Sending request '${e.method} - (${e.id})'.`,t)}else ue("send-request",e)}(d),"function"==typeof J.sender.enableCancellation&&J.sender.enableCancellation(d),new Promise((async(e,t)=>{const i={method:r,timerStart:Date.now(),resolve:t=>{e(t),J.sender.cleanup(u),l?.dispose()},reject:e=>{t(e),J.sender.cleanup(u),l?.dispose()}};try{z.set(u,i),await n.write(d)}catch(e){throw z.delete(u),i.reject(new o.ResponseError(o.ErrorCodes.MessageWriteError,e.message?e.message:"Unknown reason")),E.error("Sending request failed."),e}}))},onRequest:(e,t)=>{le();let n=null;return f.is(e)?(n=void 0,D=e):i.string(e)?(n=null,void 0!==t&&(n=e,x.set(e,{handler:t,type:void 0}))):void 0!==t&&(n=e.method,x.set(e.method,{type:e,handler:t})),{dispose:()=>{null!==n&&(void 0!==n?x.delete(n):D=void 0)}}},hasPendingResponse:()=>z.size>0,trace:async(e,t,n)=>{let r=!1,o=g.Text;void 0!==n&&(i.boolean(n)?r=n:(r=n.sendNotification||!1,o=n.traceFormat||g.Text)),U=e,G=o,L=U===h.Off?void 0:t,!r||ee()||te()||await _e.sendNotification(_.type,{value:h.toString(e)})},onError:V.event,onClose:$.event,onUnhandledNotification:H.event,onDispose:K.event,end:()=>{n.end()},dispose:()=>{if(te())return;q=A.Disposed,K.fire(void 0);const t=new o.ResponseError(o.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(const e of z.values())e.reject(t);z=new Map,B=new Map,F=new Set,j=new s.LinkedMap,i.func(n.dispose)&&n.dispose(),i.func(e.dispose)&&e.dispose()},listen:()=>{le(),function(){if(Q())throw new I(v.AlreadyListening,"Connection is already listening")}(),q=A.Listening,e.listen(oe)},inspect:()=>{(0,r.default)().console.log("inspect")}};return _e.onNotification(m.type,(e=>{if(U===h.Off||!L)return;const t=U===h.Verbose||U===h.Compact;L.log(e.message,t?e.verbose:void 0)})),_e.onNotification(d.type,(e=>{const t=N.get(e.token);t?t(e.value):W.fire(e)})),_e}},4649:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Disposable=void 0,function(e){e.create=function(e){return{dispose:e}}}(n||(t.Disposable=n={}))},7966:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Emitter=t.Event=void 0;const r=n(8996);var i;!function(e){const t={dispose(){}};e.None=function(){return t}}(i||(t.Event=i={}));class o{add(e,t=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks)return;let n=!1;for(let r=0,i=this._callbacks.length;r<i;r++)if(this._callbacks[r]===e){if(this._contexts[r]===t)return this._callbacks.splice(r,1),void this._contexts.splice(r,1);n=!0}if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];const t=[],n=this._callbacks.slice(0),i=this._contexts.slice(0);for(let o=0,s=n.length;o<s;o++)try{t.push(n[o].apply(i[o],e))}catch(e){(0,r.default)().console.error(e)}return t}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class s{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,n)=>{this._callbacks||(this._callbacks=new o),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t);const r={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,t),r.dispose=s._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(n)&&n.push(r),r}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}t.Emitter=s,s._noop=function(){}},9387:(e,t)=>{"use strict";function n(e){return"string"==typeof e||e instanceof String}function r(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.stringArray=t.array=t.func=t.error=t.number=t.string=t.boolean=void 0,t.boolean=function(e){return!0===e||!1===e},t.string=n,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=r,t.stringArray=function(e){return r(e)&&e.every((e=>n(e)))}},8386:(e,t)=>{"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCache=t.LinkedMap=t.Touch=void 0,function(e){e.None=0,e.First=1,e.AsOld=e.First,e.Last=2,e.AsNew=e.Last}(r||(t.Touch=r={}));class i{constructor(){this[n]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,t=r.None){const n=this._map.get(e);if(n)return t!==r.None&&this.touch(n,t),n.value}set(e,t,n=r.None){let i=this._map.get(e);if(i)i.value=t,n!==r.None&&this.touch(i,n);else{switch(i={key:e,value:t,next:void 0,previous:void 0},n){case r.None:this.addItemLast(i);break;case r.First:this.addItemFirst(i);break;case r.Last:default:this.addItemLast(i)}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const n=this._state;let r=this._head;for(;r;){if(t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");r=r.next}}keys(){const e=this._state;let t=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){const e={value:t.key,done:!1};return t=t.next,e}return{value:void 0,done:!0}}};return n}values(){const e=this._state;let t=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){const e={value:t.value,done:!1};return t=t.next,e}return{value:void 0,done:!0}}};return n}entries(){const e=this._state;let t=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){const e={value:[t.key,t.value],done:!1};return t=t.next,e}return{value:void 0,done:!0}}};return n}[(n=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(0===e)return void this.clear();let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e,this._state++}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(t===r.First||t===r.Last)if(t===r.First){if(e===this._head)return;const t=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(t.previous=n,n.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===r.Last){if(e===this._tail)return;const t=e.next,n=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=n,n.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}toJSON(){const e=[];return this.forEach(((t,n)=>{e.push([n,t])})),e}fromJSON(e){this.clear();for(const[t,n]of e)this.set(t,n)}}t.LinkedMap=i;t.LRUCache=class extends i{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=r.AsNew){return super.get(e,t)}peek(e){return super.get(e,r.None)}set(e,t){return super.set(e,t,r.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}},1458:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractMessageBuffer=void 0;t.AbstractMessageBuffer=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){const t="string"==typeof e?this.fromString(e,this._encoding):e;this._chunks.push(t),this._totalLength+=t.byteLength}tryReadHeaders(e=!1){if(0===this._chunks.length)return;let t=0,n=0,r=0,i=0;e:for(;n<this._chunks.length;){const e=this._chunks[n];for(r=0;r<e.length;){switch(e[r]){case 13:switch(t){case 0:t=1;break;case 2:t=3;break;default:t=0}break;case 10:switch(t){case 1:t=2;break;case 3:t=4,r++;break e;default:t=0}break;default:t=0}r++}i+=e.byteLength,n++}if(4!==t)return;const o=this._read(i+r),s=new Map,a=this.toString(o,"ascii").split("\r\n");if(a.length<2)return s;for(let t=0;t<a.length-2;t++){const n=a[t],r=n.indexOf(":");if(-1===r)throw new Error(`Message header must separate key and value using ':'\n${n}`);const i=n.substr(0,r),o=n.substr(r+1).trim();s.set(e?i.toLowerCase():i,o)}return s}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(0===e)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){const t=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(t)}if(this._chunks[0].byteLength>e){const t=this._chunks[0],n=this.asNative(t,e);return this._chunks[0]=t.slice(e),this._totalLength-=e,n}const t=this.allocNative(e);let n=0;for(;e>0;){const r=this._chunks[0];if(r.byteLength>e){const i=r.slice(0,e);t.set(i,n),n+=e,this._chunks[0]=r.slice(e),this._totalLength-=e,e-=e}else t.set(r,n),n+=r.byteLength,this._chunks.shift(),this._totalLength-=r.byteLength,e-=r.byteLength}return t}}},7691:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReadableStreamMessageReader=t.AbstractMessageReader=t.MessageReader=void 0;const r=n(8996),i=n(9387),o=n(7966),s=n(9697);var a,c;!function(e){e.is=function(e){let t=e;return t&&i.func(t.listen)&&i.func(t.dispose)&&i.func(t.onError)&&i.func(t.onClose)&&i.func(t.onPartialMessage)}}(a||(t.MessageReader=a={}));class u{constructor(){this.errorEmitter=new o.Emitter,this.closeEmitter=new o.Emitter,this.partialMessageEmitter=new o.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${i.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageReader=u,function(e){e.fromOptions=function(e){let t,n;const i=new Map;let o;const s=new Map;if(void 0===e||"string"==typeof e)t=e??"utf-8";else{if(t=e.charset??"utf-8",void 0!==e.contentDecoder&&(n=e.contentDecoder,i.set(n.name,n)),void 0!==e.contentDecoders)for(const t of e.contentDecoders)i.set(t.name,t);if(void 0!==e.contentTypeDecoder&&(o=e.contentTypeDecoder,s.set(o.name,o)),void 0!==e.contentTypeDecoders)for(const t of e.contentTypeDecoders)s.set(t.name,t)}return void 0===o&&(o=(0,r.default)().applicationJson.decoder,s.set(o.name,o)),{charset:t,contentDecoder:n,contentDecoders:i,contentTypeDecoder:o,contentTypeDecoders:s}}}(c||(c={}));t.ReadableStreamMessageReader=class extends u{constructor(e,t){super(),this.readable=e,this.options=c.fromOptions(t),this.buffer=(0,r.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new s.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;const t=this.readable.onData((e=>{this.onData(e)}));return this.readable.onError((e=>this.fireError(e))),this.readable.onClose((()=>this.fireClose())),t}onData(e){try{for(this.buffer.append(e);;){if(-1===this.nextMessageLength){const e=this.buffer.tryReadHeaders(!0);if(!e)return;const t=e.get("content-length");if(!t)return void this.fireError(new Error(`Header must provide a Content-Length property.\n${JSON.stringify(Object.fromEntries(e))}`));const n=parseInt(t);if(isNaN(n))return void this.fireError(new Error(`Content-Length value must be a number. Got ${t}`));this.nextMessageLength=n}const e=this.buffer.tryReadBody(this.nextMessageLength);if(void 0===e)return void this.setPartialMessageTimer();this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock((async()=>{const t=void 0!==this.options.contentDecoder?await this.options.contentDecoder.decode(e):e,n=await this.options.contentTypeDecoder.decode(t,this.options);this.callback(n)})).catch((e=>{this.fireError(e)}))}}catch(e){this.fireError(e)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=(0,r.default)().timer.setTimeout(((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())}),this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}},939:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WriteableStreamMessageWriter=t.AbstractMessageWriter=t.MessageWriter=void 0;const r=n(8996),i=n(9387),o=n(9697),s=n(7966);var a,c;!function(e){e.is=function(e){let t=e;return t&&i.func(t.dispose)&&i.func(t.onClose)&&i.func(t.onError)&&i.func(t.write)}}(a||(t.MessageWriter=a={}));class u{constructor(){this.errorEmitter=new s.Emitter,this.closeEmitter=new s.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,n){this.errorEmitter.fire([this.asError(e),t,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${i.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageWriter=u,function(e){e.fromOptions=function(e){return void 0===e||"string"==typeof e?{charset:e??"utf-8",contentTypeEncoder:(0,r.default)().applicationJson.encoder}:{charset:e.charset??"utf-8",contentEncoder:e.contentEncoder,contentTypeEncoder:e.contentTypeEncoder??(0,r.default)().applicationJson.encoder}}}(c||(c={}));t.WriteableStreamMessageWriter=class extends u{constructor(e,t){super(),this.writable=e,this.options=c.fromOptions(t),this.errorCount=0,this.writeSemaphore=new o.Semaphore(1),this.writable.onError((e=>this.fireError(e))),this.writable.onClose((()=>this.fireClose()))}async write(e){return this.writeSemaphore.lock((async()=>this.options.contentTypeEncoder.encode(e,this.options).then((e=>void 0!==this.options.contentEncoder?this.options.contentEncoder.encode(e):e)).then((t=>{const n=[];return n.push("Content-Length: ",t.byteLength.toString(),"\r\n"),n.push("\r\n"),this.doWrite(e,n,t)}),(e=>{throw this.fireError(e),e}))))}async doWrite(e,t,n){try{return await this.writable.write(t.join(""),"ascii"),this.writable.write(n)}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){this.writable.end()}}},3239:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Message=t.NotificationType9=t.NotificationType8=t.NotificationType7=t.NotificationType6=t.NotificationType5=t.NotificationType4=t.NotificationType3=t.NotificationType2=t.NotificationType1=t.NotificationType0=t.NotificationType=t.RequestType9=t.RequestType8=t.RequestType7=t.RequestType6=t.RequestType5=t.RequestType4=t.RequestType3=t.RequestType2=t.RequestType1=t.RequestType=t.RequestType0=t.AbstractMessageSignature=t.ParameterStructures=t.ResponseError=t.ErrorCodes=void 0;const r=n(9387);var i,o;!function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.jsonrpcReservedErrorRangeStart=-32099,e.serverErrorStart=-32099,e.MessageWriteError=-32099,e.MessageReadError=-32098,e.PendingResponseRejected=-32097,e.ConnectionInactive=-32096,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.jsonrpcReservedErrorRangeEnd=-32e3,e.serverErrorEnd=-32e3}(i||(t.ErrorCodes=i={}));class s extends Error{constructor(e,t,n){super(t),this.code=r.number(e)?e:i.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,s.prototype)}toJson(){const e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data),e}}t.ResponseError=s;class a{constructor(e){this.kind=e}static is(e){return e===a.auto||e===a.byName||e===a.byPosition}toString(){return this.kind}}t.ParameterStructures=a,a.auto=new a("auto"),a.byPosition=new a("byPosition"),a.byName=new a("byName");class c{constructor(e,t){this.method=e,this.numberOfParams=t}get parameterStructures(){return a.auto}}t.AbstractMessageSignature=c;t.RequestType0=class extends c{constructor(e){super(e,0)}};t.RequestType=class extends c{constructor(e,t=a.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};t.RequestType1=class extends c{constructor(e,t=a.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};t.RequestType2=class extends c{constructor(e){super(e,2)}};t.RequestType3=class extends c{constructor(e){super(e,3)}};t.RequestType4=class extends c{constructor(e){super(e,4)}};t.RequestType5=class extends c{constructor(e){super(e,5)}};t.RequestType6=class extends c{constructor(e){super(e,6)}};t.RequestType7=class extends c{constructor(e){super(e,7)}};t.RequestType8=class extends c{constructor(e){super(e,8)}};t.RequestType9=class extends c{constructor(e){super(e,9)}};t.NotificationType=class extends c{constructor(e,t=a.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};t.NotificationType0=class extends c{constructor(e){super(e,0)}};t.NotificationType1=class extends c{constructor(e,t=a.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};t.NotificationType2=class extends c{constructor(e){super(e,2)}};t.NotificationType3=class extends c{constructor(e){super(e,3)}};t.NotificationType4=class extends c{constructor(e){super(e,4)}};t.NotificationType5=class extends c{constructor(e){super(e,5)}};t.NotificationType6=class extends c{constructor(e){super(e,6)}};t.NotificationType7=class extends c{constructor(e){super(e,7)}};t.NotificationType8=class extends c{constructor(e){super(e,8)}};t.NotificationType9=class extends c{constructor(e){super(e,9)}},function(e){e.isRequest=function(e){const t=e;return t&&r.string(t.method)&&(r.string(t.id)||r.number(t.id))},e.isNotification=function(e){const t=e;return t&&r.string(t.method)&&void 0===e.id},e.isResponse=function(e){const t=e;return t&&(void 0!==t.result||!!t.error)&&(r.string(t.id)||r.number(t.id)||null===t.id)}}(o||(t.Message=o={}))},8996:(e,t)=>{"use strict";let n;function r(){if(void 0===n)throw new Error("No runtime abstraction layer installed");return n}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.install=function(e){if(void 0===e)throw new Error("No runtime abstraction layer provided");n=e}}(r||(r={})),t.default=r},9697:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Semaphore=void 0;const r=n(8996);t.Semaphore=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise(((t,n)=>{this._waiting.push({thunk:e,resolve:t,reject:n}),this.runNext()}))}get active(){return this._active}runNext(){0!==this._waiting.length&&this._active!==this._capacity&&(0,r.default)().timer.setImmediate((()=>this.doRunNext()))}doRunNext(){if(0===this._waiting.length||this._active===this._capacity)return;const e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{const t=e.thunk();t instanceof Promise?t.then((t=>{this._active--,e.resolve(t),this.runNext()}),(t=>{this._active--,e.reject(t),this.runNext()})):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}}},5498:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharedArrayReceiverStrategy=t.SharedArraySenderStrategy=void 0;const r=n(6412);var i;!function(e){e.Continue=0,e.Cancelled=1}(i||(i={}));t.SharedArraySenderStrategy=class{constructor(){this.buffers=new Map}enableCancellation(e){if(null===e.id)return;const t=new SharedArrayBuffer(4);new Int32Array(t,0,1)[0]=i.Continue,this.buffers.set(e.id,t),e.$cancellationData=t}async sendCancellation(e,t){const n=this.buffers.get(t);if(void 0===n)return;const r=new Int32Array(n,0,1);Atomics.store(r,0,i.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};class o{constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===i.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}}class s{constructor(e){this.token=new o(e)}cancel(){}dispose(){}}t.SharedArrayReceiverStrategy=class{constructor(){this.kind="request"}createCancellationTokenSource(e){const t=e.$cancellationData;return void 0===t?new r.CancellationTokenSource:new s(t)}}},8154:(module,__unused_webpack_exports,__webpack_require__)=>{var __dirname="/",Module=void 0!==Module?Module:{},TreeSitter=function(){var initPromise,document="object"==typeof window?{currentScript:window.document.currentScript}:null;class Parser{constructor(){this.initialize()}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise((resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=(e,t)=>{throw t},ENVIRONMENT_IS_WEB="object"==typeof window,ENVIRONMENT_IS_WORKER="function"==typeof importScripts,ENVIRONMENT_IS_NODE="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,scriptDirectory="",read_,readAsync,readBinary,setWindowTitle;function locateFile(e){return Module.locateFile?Module.locateFile(e,scriptDirectory):scriptDirectory+e}function logExceptionOnExit(e){e instanceof ExitStatus||err("exiting due to exception: "+e)}if(ENVIRONMENT_IS_NODE){var fs=__webpack_require__(4383),nodePath=__webpack_require__(8324);scriptDirectory=ENVIRONMENT_IS_WORKER?nodePath.dirname(scriptDirectory)+"/":__dirname+"/",read_=(e,t)=>(e=isFileURI(e)?new URL(e):nodePath.normalize(e),fs.readFileSync(e,t?void 0:"utf8")),readBinary=e=>{var t=read_(e,!0);return t.buffer||(t=new Uint8Array(t)),t},readAsync=(e,t,n)=>{e=isFileURI(e)?new URL(e):nodePath.normalize(e),fs.readFile(e,(function(e,r){e?n(e):t(r.buffer)}))},process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),module.exports=Module,quit_=(e,t)=>{if(keepRuntimeAlive())throw process.exitCode=e,t;logExceptionOnExit(t),process.exit(e)},Module.inspect=function(){return"[Emscripten Module object]"}}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:void 0!==document&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=0!==scriptDirectory.indexOf("blob:")?scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1):"",read_=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},ENVIRONMENT_IS_WORKER&&(readBinary=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),readAsync=(e,t,n)=>{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)},setWindowTitle=e=>document.title=e);var out=Module.print||function(){}.bind(),err=Module.printErr||function(){}.bind();Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var STACK_ALIGN=16,dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var noExitRuntime=Module.noExitRuntime||!0,wasmMemory;"object"!=typeof WebAssembly&&abort("no native wasm support detected");var ABORT=!1,EXITSTATUS,UTF8Decoder="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function UTF8ArrayToString(e,t,n){for(var r=t+n,i=t;e[i]&&!(i>=r);)++i;if(i-t>16&&e.buffer&&UTF8Decoder)return UTF8Decoder.decode(e.subarray(t,i));for(var o="";t<i;){var s=e[t++];if(128&s){var a=63&e[t++];if(192!=(224&s)){var c=63&e[t++];if((s=224==(240&s)?(15&s)<<12|a<<6|c:(7&s)<<18|a<<12|c<<6|63&e[t++])<65536)o+=String.fromCharCode(s);else{var u=s-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else o+=String.fromCharCode((31&s)<<6|a)}else o+=String.fromCharCode(s)}return o}function UTF8ToString(e,t){return e?UTF8ArrayToString(HEAPU8,e,t):""}function stringToUTF8Array(e,t,n,r){if(!(r>0))return 0;for(var i=n,o=n+r-1,s=0;s<e.length;++s){var a=e.charCodeAt(s);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++s)),a<=127){if(n>=o)break;t[n++]=a}else if(a<=2047){if(n+1>=o)break;t[n++]=192|a>>6,t[n++]=128|63&a}else if(a<=65535){if(n+2>=o)break;t[n++]=224|a>>12,t[n++]=128|a>>6&63,t[n++]=128|63&a}else{if(n+3>=o)break;t[n++]=240|a>>18,t[n++]=128|a>>12&63,t[n++]=128|a>>6&63,t[n++]=128|63&a}}return t[n]=0,n-i}function stringToUTF8(e,t,n){return stringToUTF8Array(e,HEAPU8,t,n)}function lengthBytesUTF8(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r<=127?t++:r<=2047?t+=2:r>=55296&&r<=57343?(t+=4,++n):t+=3}return t}function updateGlobalBufferAndViews(e){buffer=e,Module.HEAP8=HEAP8=new Int8Array(e),Module.HEAP16=HEAP16=new Int16Array(e),Module.HEAP32=HEAP32=new Int32Array(e),Module.HEAPU8=HEAPU8=new Uint8Array(e),Module.HEAPU16=HEAPU16=new Uint16Array(e),Module.HEAPU32=HEAPU32=new Uint32Array(e),Module.HEAPF32=HEAPF32=new Float32Array(e),Module.HEAPF64=HEAPF64=new Float64Array(e)}var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=Module.wasmMemory?Module.wasmMemory:new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:32768}),wasmMemory&&(buffer=wasmMemory.buffer),INITIAL_MEMORY=buffer.byteLength,updateGlobalBufferAndViews(buffer);var wasmTable=new WebAssembly.Table({initial:20,element:"anyfunc"}),__ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function keepRuntimeAlive(){return noExitRuntime}function preRun(){if(Module.preRun)for("function"==typeof Module.preRun&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__)}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function postRun(){if(Module.postRun)for("function"==typeof Module.postRun&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(e){__ATPRERUN__.unshift(e)}function addOnInit(e){__ATINIT__.unshift(e)}function addOnPostRun(e){__ATPOSTRUN__.unshift(e)}var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function addRunDependency(e){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}function removeRunDependency(e){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),0==runDependencies&&(null!==runDependencyWatcher&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var t=dependenciesFulfilled;dependenciesFulfilled=null,t()}}function abort(e){throw Module.onAbort&&Module.onAbort(e),err(e="Aborted("+e+")"),ABORT=!0,EXITSTATUS=1,e+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(e)}var dataURIPrefix="data:application/octet-stream;base64,",wasmBinaryFile,tempDouble,tempI64;function isDataURI(e){return e.startsWith(dataURIPrefix)}function isFileURI(e){return e.startsWith("file://")}function getBinary(e){try{if(e==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(e);throw"both async and sync fetching of the wasm failed"}catch(e){abort(e)}}function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if("function"==typeof fetch&&!isFileURI(wasmBinaryFile))return fetch(wasmBinaryFile,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+wasmBinaryFile+"'";return e.arrayBuffer()})).catch((function(){return getBinary(wasmBinaryFile)}));if(readAsync)return new Promise((function(e,t){readAsync(wasmBinaryFile,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return getBinary(wasmBinaryFile)}))}function createWasm(){var e={env:asmLibraryArg,wasi_snapshot_preview1:asmLibraryArg,"GOT.mem":new Proxy(asmLibraryArg,GOTHandler),"GOT.func":new Proxy(asmLibraryArg,GOTHandler)};function t(e,t){var n=e.exports;n=relocateExports(n,1024);var r=getDylinkMetadata(t);r.neededDynlibs&&(dynamicLibraries=r.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(n,"main"),Module.asm=n,addOnInit(Module.asm.__wasm_call_ctors),__RELOC_FUNCS__.push(Module.asm.__wasm_apply_data_relocs),removeRunDependency("wasm-instantiate")}function n(e){t(e.instance,e.module)}function r(t){return getBinaryPromise().then((function(t){return WebAssembly.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){err("failed to asynchronously prepare wasm: "+e),abort(e)}))}if(addRunDependency("wasm-instantiate"),Module.instantiateWasm)try{return Module.instantiateWasm(e,t)}catch(e){return err("Module.instantiateWasm callback failed with error: "+e),!1}return wasmBinary||"function"!=typeof WebAssembly.instantiateStreaming||isDataURI(wasmBinaryFile)||isFileURI(wasmBinaryFile)||ENVIRONMENT_IS_NODE||"function"!=typeof fetch?r(n):fetch(wasmBinaryFile,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(n,(function(e){return err("wasm streaming compile failed: "+e),err("falling back to ArrayBuffer instantiation"),r(n)}))})),{}}wasmBinaryFile="tree-sitter.wasm",isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile));var ASM_CONSTS={};function ExitStatus(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}var GOT={},CurrentModuleWeakSymbols=new Set([]),GOTHandler={get:function(e,t){var n=GOT[t];return n||(n=GOT[t]=new WebAssembly.Global({value:"i32",mutable:!0})),CurrentModuleWeakSymbols.has(t)||(n.required=!0),n}};function callRuntimeCallbacks(e){for(;e.length>0;)e.shift()(Module)}function getDylinkMetadata(e){var t=0,n=0;function r(){for(var n=0,r=1;;){var i=e[t++];if(n+=(127&i)*r,r*=128,!(128&i))break}return n}function i(){var n=r();return UTF8ArrayToString(e,(t+=n)-n,n)}function o(e,t){if(e)throw new Error(t)}var s="dylink.0";if(e instanceof WebAssembly.Module){var a=WebAssembly.Module.customSections(e,s);0===a.length&&(s="dylink",a=WebAssembly.Module.customSections(e,s)),o(0===a.length,"need dylink section"),n=(e=new Uint8Array(a[0])).length}else{o(!(1836278016==new Uint32Array(new Uint8Array(e.subarray(0,24)).buffer)[0]),"need to see wasm magic number"),o(0!==e[8],"need the dylink section to be first"),t=9;var c=r();n=t+c,s=i()}var u={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if("dylink"==s){u.memorySize=r(),u.memoryAlign=r(),u.tableSize=r(),u.tableAlign=r();for(var l=r(),d=0;d<l;++d){var f=i();u.neededDynlibs.push(f)}}else for(o("dylink.0"!==s);t<n;){var h=e[t++],p=r();if(1===h)u.memorySize=r(),u.memoryAlign=r(),u.tableSize=r(),u.tableAlign=r();else if(2===h)for(l=r(),d=0;d<l;++d)f=i(),u.neededDynlibs.push(f);else if(3===h)for(var g=r();g--;){var _=i();256&r()&&u.tlsExports.add(_)}else if(4===h)for(g=r();g--;)i(),_=i(),1==(3&r())&&u.weakImports.add(_);else t+=p}return u}function getValue(e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":case"i8":return HEAP8[e|0];case"i16":return HEAP16[e>>1];case"i32":case"i64":return HEAP32[e>>2];case"float":return HEAPF32[e>>2];case"double":return HEAPF64[e>>3];case"*":return HEAPU32[e>>2];default:abort("invalid type for getValue: "+t)}return null}function asmjsMangle(e){return 0==e.indexOf("dynCall_")||["stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0"].includes(e)?e:"_"+e}function mergeLibSymbols(e,t){for(var n in e)if(e.hasOwnProperty(n)){asmLibraryArg.hasOwnProperty(n)||(asmLibraryArg[n]=e[n]);var r=asmjsMangle(n);Module.hasOwnProperty(r)||(Module[r]=e[n]),"__main_argc_argv"==n&&(Module._main=e[n])}}var LDSO={loadedLibsByName:{},loadedLibsByHandle:{}};function dynCallLegacy(e,t,n){var r=Module["dynCall_"+e];return n&&n.length?r.apply(null,[t].concat(n)):r.call(null,t)}var wasmTableMirror=[];function getWasmTableEntry(e){var t=wasmTableMirror[e];return t||(e>=wasmTableMirror.length&&(wasmTableMirror.length=e+1),wasmTableMirror[e]=t=wasmTable.get(e)),t}function dynCall(e,t,n){return e.includes("j")?dynCallLegacy(e,t,n):getWasmTableEntry(t).apply(null,n)}function createInvokeFunction(e){return function(){var t=stackSave();try{return dynCall(e,arguments[0],Array.prototype.slice.call(arguments,1))}catch(e){if(stackRestore(t),e!==e+0)throw e;_setThrew(1,0)}}}var ___heap_base=78144;function zeroMemory(e,t){return HEAPU8.fill(0,e,e+t),e}function getMemory(e){if(runtimeInitialized)return zeroMemory(_malloc(e),e);var t=___heap_base,n=t+e+15&-16;return ___heap_base=n,GOT.__heap_base.value=n,t}function isInternalSym(e){return["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm"].includes(e)}function uleb128Encode(e,t){e<128?t.push(e):t.push(e%128|128,e>>7)}function sigToWasmTypes(e){for(var t={i:"i32",j:"i32",f:"f32",d:"f64",p:"i32"},n={parameters:[],results:"v"==e[0]?[]:[t[e[0]]]},r=1;r<e.length;++r)n.parameters.push(t[e[r]]),"j"===e[r]&&n.parameters.push("i32");return n}function generateFuncType(e,t){var n=e.slice(0,1),r=e.slice(1),i={i:127,p:127,j:126,f:125,d:124};t.push(96),uleb128Encode(r.length,t);for(var o=0;o<r.length;++o)t.push(i[r[o]]);"v"==n?t.push(0):t.push(1,i[n])}function convertJsFunctionToWasm(e,t){if("function"==typeof WebAssembly.Function)return new WebAssembly.Function(sigToWasmTypes(t),e);var n=[1];generateFuncType(t,n);var r=[0,97,115,109,1,0,0,0,1];uleb128Encode(n.length,r),r.push.apply(r,n),r.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var i=new WebAssembly.Module(new Uint8Array(r));return new WebAssembly.Instance(i,{e:{f:e}}).exports.f}function updateTableMap(e,t){if(functionsInTableMap)for(var n=e;n<e+t;n++){var r=getWasmTableEntry(n);r&&functionsInTableMap.set(r,n)}}var functionsInTableMap=void 0,freeTableIndexes=[];function getEmptyTableSlot(){if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(e){if(!(e instanceof RangeError))throw e;throw"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH."}return wasmTable.length-1}function setWasmTableEntry(e,t){wasmTable.set(e,t),wasmTableMirror[e]=wasmTable.get(e)}function addFunction(e,t){if(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.has(e))return functionsInTableMap.get(e);var n=getEmptyTableSlot();try{setWasmTableEntry(n,e)}catch(r){if(!(r instanceof TypeError))throw r;setWasmTableEntry(n,convertJsFunctionToWasm(e,t))}return functionsInTableMap.set(e,n),n}function updateGOT(e,t){for(var n in e)if(!isInternalSym(n)){var r=e[n];n.startsWith("orig$")&&(n=n.split("$")[1],t=!0),GOT[n]||(GOT[n]=new WebAssembly.Global({value:"i32",mutable:!0})),(t||0==GOT[n].value)&&("function"==typeof r?GOT[n].value=addFunction(r):"number"==typeof r?GOT[n].value=r:err("unhandled export type for `"+n+"`: "+typeof r))}}function relocateExports(e,t,n){var r={};for(var i in e){var o=e[i];"object"==typeof o&&(o=o.value),"number"==typeof o&&(o+=t),r[i]=o}return updateGOT(r,n),r}function resolveGlobalSymbol(e,t){var n;return t&&(n=asmLibraryArg["orig$"+e]),n||(n=asmLibraryArg[e])&&n.stub&&(n=void 0),n||(n=Module[asmjsMangle(e)]),!n&&e.startsWith("invoke_")&&(n=createInvokeFunction(e.split("_")[1])),n}function alignMemory(e,t){return Math.ceil(e/t)*t}function loadWebAssemblyModule(binary,flags,handle){var metadata=getDylinkMetadata(binary);function loadModule(){var firstLoad=!handle||!HEAP8[handle+12|0];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign);memAlign=Math.max(memAlign,STACK_ALIGN);var memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+12|0]=1,HEAPU32[handle+16>>2]=memoryBase,HEAP32[handle+20>>2]=metadata.memorySize,HEAPU32[handle+24>>2]=tableBase,HEAP32[handle+28>>2]=metadata.tableSize)}else memoryBase=HEAPU32[handle+16>>2],tableBase=HEAPU32[handle+24>>2];var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length,moduleExports;function resolveSymbol(e){var t=resolveGlobalSymbol(e,!1);return t||(t=moduleExports[e]),t}tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var proxyHandler={get:function(e,t){switch(t){case"__memory_base":return memoryBase;case"__table_base":return tableBase}return t in asmLibraryArg?asmLibraryArg[t]:(t in e||(e[t]=function(){return n||(n=resolveSymbol(t)),n.apply(null,arguments)}),e[t]);var n}},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(instance){function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&-1!=body.indexOf("$"+arity);arity++)args.push("$"+arity);args=args.join(",");var func="("+args+" ) => { "+body+"};";ASM_CONSTS[start]=eval(func)}if(updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols(),"__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(instance))}return WebAssembly.instantiate(binary,info).then((function(e){return postInstantiation(e.instance)}))}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(instance)}return CurrentModuleWeakSymbols=metadata.weakImports,flags.loadAsync?metadata.neededDynlibs.reduce((function(e,t){return e.then((function(){return loadDynamicLibrary(t,flags)}))}),Promise.resolve()).then((function(){return loadModule()})):(metadata.neededDynlibs.forEach((function(e){loadDynamicLibrary(e,flags)})),loadModule())}function loadDynamicLibrary(e,t,n){t=t||{global:!0,nodelete:!0};var r=LDSO.loadedLibsByName[e];if(r)return t.global&&!r.global&&(r.global=!0,"loading"!==r.module&&mergeLibSymbols(r.module,e)),t.nodelete&&r.refcount!==1/0&&(r.refcount=1/0),r.refcount++,n&&(LDSO.loadedLibsByHandle[n]=r),!t.loadAsync||Promise.resolve(!0);function i(e){if(t.fs&&t.fs.findObject(e)){var n=t.fs.readFile(e,{encoding:"binary"});return n instanceof Uint8Array||(n=new Uint8Array(n)),t.loadAsync?Promise.resolve(n):n}if(e=locateFile(e),t.loadAsync)return new Promise((function(t,n){readAsync(e,(e=>t(new Uint8Array(e))),n)}));if(!readBinary)throw new Error(e+": file not found, and synchronous loading of external files is not available");return readBinary(e)}function o(){if("undefined"!=typeof preloadedWasm&&preloadedWasm[e]){var r=preloadedWasm[e];return t.loadAsync?Promise.resolve(r):r}return t.loadAsync?i(e).then((function(e){return loadWebAssemblyModule(e,t,n)})):loadWebAssemblyModule(i(e),t,n)}function s(t){r.global&&mergeLibSymbols(t,e),r.module=t}return r={refcount:t.nodelete?1/0:1,name:e,module:"loading",global:t.global},LDSO.loadedLibsByName[e]=r,n&&(LDSO.loadedLibsByHandle[n]=r),t.loadAsync?o().then((function(e){return s(e),!0})):(s(o()),!0)}function reportUndefinedSymbols(){for(var e in GOT)if(0==GOT[e].value){var t=resolveGlobalSymbol(e,!0);if(!t&&!GOT[e].required)continue;if("function"==typeof t)GOT[e].value=addFunction(t,t.sig);else{if("number"!=typeof t)throw new Error("bad export type for `"+e+"`: "+typeof t);GOT[e].value=t}}}function preloadDylibs(){dynamicLibraries.length?(addRunDependency("preloadDylibs"),dynamicLibraries.reduce((function(e,t){return e.then((function(){return loadDynamicLibrary(t,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})}))}),Promise.resolve()).then((function(){reportUndefinedSymbols(),removeRunDependency("preloadDylibs")}))):reportUndefinedSymbols()}function setValue(e,t,n="i8"){switch(n.endsWith("*")&&(n="*"),n){case"i1":case"i8":HEAP8[e|0]=t;break;case"i16":HEAP16[e>>1]=t;break;case"i32":HEAP32[e>>2]=t;break;case"i64":tempI64=[t>>>0,(tempDouble=t,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[e>>2]=tempI64[0],HEAP32[e+4>>2]=tempI64[1];break;case"float":HEAPF32[e>>2]=t;break;case"double":HEAPF64[e>>3]=t;break;case"*":HEAPU32[e>>2]=t;break;default:abort("invalid type for setValue: "+n)}}var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78144),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),nowIsMonotonic=!0,_emscripten_get_now;function __emscripten_get_now_is_monotonic(){return nowIsMonotonic}function _abort(){abort("")}function _emscripten_date_now(){return Date.now()}function _emscripten_memcpy_big(e,t,n){HEAPU8.copyWithin(e,t,t+n)}function getHeapMax(){return 2147483648}function emscripten_realloc_buffer(e){try{return wasmMemory.grow(e-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch(e){}}function _emscripten_resize_heap(e){var t=HEAPU8.length;e>>>=0;var n,r=getHeapMax();if(e>r)return!1;for(var i=1;i<=4;i*=2){var o=t*(1+.2/i);if(o=Math.min(o,e+100663296),emscripten_realloc_buffer(Math.min(r,(n=Math.max(e,o))+(65536-n%65536)%65536)))return!0}return!1}__emscripten_get_now_is_monotonic.sig="i",Module._abort=_abort,_abort.sig="v",_emscripten_date_now.sig="d",_emscripten_get_now=ENVIRONMENT_IS_NODE?()=>{var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:()=>performance.now(),_emscripten_get_now.sig="d",_emscripten_memcpy_big.sig="vppp",_emscripten_resize_heap.sig="ip";var SYSCALLS={DEFAULT_POLLMASK:5,calculateAt:function(e,t,n){if(PATH.isAbs(t))return t;var r;if(r=-100===e?FS.cwd():SYSCALLS.getStreamFromFD(e).path,0==t.length){if(!n)throw new FS.ErrnoError(44);return r}return PATH.join2(r,t)},doStat:function(e,t,n){try{var r=e(t)}catch(e){if(e&&e.node&&PATH.normalize(t)!==PATH.normalize(FS.getPath(e.node)))return-54;throw e}HEAP32[n>>2]=r.dev,HEAP32[n+8>>2]=r.ino,HEAP32[n+12>>2]=r.mode,HEAPU32[n+16>>2]=r.nlink,HEAP32[n+20>>2]=r.uid,HEAP32[n+24>>2]=r.gid,HEAP32[n+28>>2]=r.rdev,tempI64=[r.size>>>0,(tempDouble=r.size,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+40>>2]=tempI64[0],HEAP32[n+44>>2]=tempI64[1],HEAP32[n+48>>2]=4096,HEAP32[n+52>>2]=r.blocks;var i=r.atime.getTime(),o=r.mtime.getTime(),s=r.ctime.getTime();return tempI64=[Math.floor(i/1e3)>>>0,(tempDouble=Math.floor(i/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+56>>2]=tempI64[0],HEAP32[n+60>>2]=tempI64[1],HEAPU32[n+64>>2]=i%1e3*1e3,tempI64=[Math.floor(o/1e3)>>>0,(tempDouble=Math.floor(o/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+72>>2]=tempI64[0],HEAP32[n+76>>2]=tempI64[1],HEAPU32[n+80>>2]=o%1e3*1e3,tempI64=[Math.floor(s/1e3)>>>0,(tempDouble=Math.floor(s/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+88>>2]=tempI64[0],HEAP32[n+92>>2]=tempI64[1],HEAPU32[n+96>>2]=s%1e3*1e3,tempI64=[r.ino>>>0,(tempDouble=r.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+104>>2]=tempI64[0],HEAP32[n+108>>2]=tempI64[1],0},doMsync:function(e,t,n,r,i){if(!FS.isFile(t.node.mode))throw new FS.ErrnoError(43);if(2&r)return 0;var o=HEAPU8.slice(e,e+n);FS.msync(t,o,i,n,r)},varargs:void 0,get:function(){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},getStr:function(e){return UTF8ToString(e)},getStreamFromFD:function(e){var t=FS.getStream(e);if(!t)throw new FS.ErrnoError(8);return t}};function _proc_exit(e){EXITSTATUS=e,keepRuntimeAlive()||(Module.onExit&&Module.onExit(e),ABORT=!0),quit_(e,new ExitStatus(e))}function exitJS(e,t){EXITSTATUS=e,_proc_exit(e)}_proc_exit.sig="vi";var _exit=exitJS;function _fd_close(e){try{var t=SYSCALLS.getStreamFromFD(e);return FS.close(t),0}catch(e){if("undefined"==typeof FS||!(e instanceof FS.ErrnoError))throw e;return e.errno}}function convertI32PairToI53Checked(e,t){return t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN}function _fd_seek(e,t,n,r,i){try{var o=convertI32PairToI53Checked(t,n);if(isNaN(o))return 61;var s=SYSCALLS.getStreamFromFD(e);return FS.llseek(s,o,r),tempI64=[s.position>>>0,(tempDouble=s.position,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[i>>2]=tempI64[0],HEAP32[i+4>>2]=tempI64[1],s.getdents&&0===o&&0===r&&(s.getdents=null),0}catch(e){if("undefined"==typeof FS||!(e instanceof FS.ErrnoError))throw e;return e.errno}}function doWritev(e,t,n,r){for(var i=0,o=0;o<n;o++){var s=HEAPU32[t>>2],a=HEAPU32[t+4>>2];t+=8;var c=FS.write(e,HEAP8,s,a,r);if(c<0)return-1;i+=c,void 0!==r&&(r+=c)}return i}function _fd_write(e,t,n,r){try{var i=doWritev(SYSCALLS.getStreamFromFD(e),t,n);return HEAPU32[r>>2]=i,0}catch(e){if("undefined"==typeof FS||!(e instanceof FS.ErrnoError))throw e;return e.errno}}function _tree_sitter_log_callback(e,t){if(currentLogCallback){const n=UTF8ToString(t);currentLogCallback(n,0!==e)}}function _tree_sitter_parse_callback(e,t,n,r,i){var o=currentParseCallback(t,{row:n,column:r});"string"==typeof o?(setValue(i,o.length,"i32"),stringToUTF16(o,e,10240)):setValue(i,0,"i32")}function handleException(e){if(e instanceof ExitStatus||"unwind"==e)return EXITSTATUS;quit_(1,e)}function allocateUTF8OnStack(e){var t=lengthBytesUTF8(e)+1,n=stackAlloc(t);return stringToUTF8Array(e,HEAP8,n,t),n}function stringToUTF16(e,t,n){if(void 0===n&&(n=2147483647),n<2)return 0;for(var r=t,i=(n-=2)<2*e.length?n/2:e.length,o=0;o<i;++o){var s=e.charCodeAt(o);HEAP16[t>>1]=s,t+=2}return HEAP16[t>>1]=0,t-r}function AsciiToString(e){for(var t="";;){var n=HEAPU8[e++|0];if(!n)return t;t+=String.fromCharCode(n)}}_exit.sig="vi",_fd_close.sig="ii",_fd_seek.sig="iijip",_fd_write.sig="iippp";var asmLibraryArg={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,abort:_abort,emscripten_get_now:_emscripten_get_now,emscripten_memcpy_big:_emscripten_memcpy_big,emscripten_resize_heap:_emscripten_resize_heap,exit:_exit,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback},asm=createWasm(),___wasm_call_ctors=Module.___wasm_call_ctors=function(){return(___wasm_call_ctors=Module.___wasm_call_ctors=Module.asm.__wasm_call_ctors).apply(null,arguments)},___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=function(){return(___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=Module.asm.__wasm_apply_data_relocs).apply(null,arguments)},_malloc=Module._malloc=function(){return(_malloc=Module._malloc=Module.asm.malloc).apply(null,arguments)},_calloc=Module._calloc=function(){return(_calloc=Module._calloc=Module.asm.calloc).apply(null,arguments)},_realloc=Module._realloc=function(){return(_realloc=Module._realloc=Module.asm.realloc).apply(null,arguments)},_free=Module._free=function(){return(_free=Module._free=Module.asm.free).apply(null,arguments)},_ts_language_symbol_count=Module._ts_language_symbol_count=function(){return(_ts_language_symbol_count=Module._ts_language_symbol_count=Module.asm.ts_language_symbol_count).apply(null,arguments)},_ts_language_version=Module._ts_language_version=function(){return(_ts_language_version=Module._ts_language_version=Module.asm.ts_language_version).apply(null,arguments)},_ts_language_field_count=Module._ts_language_field_count=function(){return(_ts_language_field_count=Module._ts_language_field_count=Module.asm.ts_language_field_count).apply(null,arguments)},_ts_language_symbol_name=Module._ts_language_symbol_name=function(){return(_ts_language_symbol_name=Module._ts_language_symbol_name=Module.asm.ts_language_symbol_name).apply(null,arguments)},_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=function(){return(_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=Module.asm.ts_language_symbol_for_name).apply(null,arguments)},_ts_language_symbol_type=Module._ts_language_symbol_type=function(){return(_ts_language_symbol_type=Module._ts_language_symbol_type=Module.asm.ts_language_symbol_type).apply(null,arguments)},_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=function(){return(_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=Module.asm.ts_language_field_name_for_id).apply(null,arguments)},_memset=Module._memset=function(){return(_memset=Module._memset=Module.asm.memset).apply(null,arguments)},_memcpy=Module._memcpy=function(){return(_memcpy=Module._memcpy=Module.asm.memcpy).apply(null,arguments)},_ts_parser_delete=Module._ts_parser_delete=function(){return(_ts_parser_delete=Module._ts_parser_delete=Module.asm.ts_parser_delete).apply(null,arguments)},_ts_parser_reset=Module._ts_parser_reset=function(){return(_ts_parser_reset=Module._ts_parser_reset=Module.asm.ts_parser_reset).apply(null,arguments)},_ts_parser_set_language=Module._ts_parser_set_language=function(){return(_ts_parser_set_language=Module._ts_parser_set_language=Module.asm.ts_parser_set_language).apply(null,arguments)},_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=function(){return(_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=Module.asm.ts_parser_timeout_micros).apply(null,arguments)},_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=function(){return(_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=Module.asm.ts_parser_set_timeout_micros).apply(null,arguments)},_memmove=Module._memmove=function(){return(_memmove=Module._memmove=Module.asm.memmove).apply(null,arguments)},_memcmp=Module._memcmp=function(){return(_memcmp=Module._memcmp=Module.asm.memcmp).apply(null,arguments)},_ts_query_new=Module._ts_query_new=function(){return(_ts_query_new=Module._ts_query_new=Module.asm.ts_query_new).apply(null,arguments)},_ts_query_delete=Module._ts_query_delete=function(){return(_ts_query_delete=Module._ts_query_delete=Module.asm.ts_query_delete).apply(null,arguments)},_iswspace=Module._iswspace=function(){return(_iswspace=Module._iswspace=Module.asm.iswspace).apply(null,arguments)},_iswalnum=Module._iswalnum=function(){return(_iswalnum=Module._iswalnum=Module.asm.iswalnum).apply(null,arguments)},_ts_query_pattern_count=Module._ts_query_pattern_count=function(){return(_ts_query_pattern_count=Module._ts_query_pattern_count=Module.asm.ts_query_pattern_count).apply(null,arguments)},_ts_query_capture_count=Module._ts_query_capture_count=function(){return(_ts_query_capture_count=Module._ts_query_capture_count=Module.asm.ts_query_capture_count).apply(null,arguments)},_ts_query_string_count=Module._ts_query_string_count=function(){return(_ts_query_string_count=Module._ts_query_string_count=Module.asm.ts_query_string_count).apply(null,arguments)},_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=function(){return(_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=Module.asm.ts_query_capture_name_for_id).apply(null,arguments)},_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=function(){return(_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=Module.asm.ts_query_string_value_for_id).apply(null,arguments)},_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=function(){return(_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=Module.asm.ts_query_predicates_for_pattern).apply(null,arguments)},_ts_tree_copy=Module._ts_tree_copy=function(){return(_ts_tree_copy=Module._ts_tree_copy=Module.asm.ts_tree_copy).apply(null,arguments)},_ts_tree_delete=Module._ts_tree_delete=function(){return(_ts_tree_delete=Module._ts_tree_delete=Module.asm.ts_tree_delete).apply(null,arguments)},_ts_init=Module._ts_init=function(){return(_ts_init=Module._ts_init=Module.asm.ts_init).apply(null,arguments)},_ts_parser_new_wasm=Module._ts_parser_new_wasm=function(){return(_ts_parser_new_wasm=Module._ts_parser_new_wasm=Module.asm.ts_parser_new_wasm).apply(null,arguments)},_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=function(){return(_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=Module.asm.ts_parser_enable_logger_wasm).apply(null,arguments)},_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=function(){return(_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=Module.asm.ts_parser_parse_wasm).apply(null,arguments)},_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=function(){return(_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=Module.asm.ts_language_type_is_named_wasm).apply(null,arguments)},_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=function(){return(_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=Module.asm.ts_language_type_is_visible_wasm).apply(null,arguments)},_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=function(){return(_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=Module.asm.ts_tree_root_node_wasm).apply(null,arguments)},_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=function(){return(_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=Module.asm.ts_tree_edit_wasm).apply(null,arguments)},_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=function(){return(_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=Module.asm.ts_tree_get_changed_ranges_wasm).apply(null,arguments)},_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=function(){return(_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=Module.asm.ts_tree_cursor_new_wasm).apply(null,arguments)},_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=function(){return(_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=Module.asm.ts_tree_cursor_delete_wasm).apply(null,arguments)},_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=function(){return(_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=Module.asm.ts_tree_cursor_reset_wasm).apply(null,arguments)},_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=function(){return(_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=Module.asm.ts_tree_cursor_goto_first_child_wasm).apply(null,arguments)},_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=function(){return(_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=Module.asm.ts_tree_cursor_goto_next_sibling_wasm).apply(null,arguments)},_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=function(){return(_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=Module.asm.ts_tree_cursor_goto_parent_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=function(){return(_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=Module.asm.ts_tree_cursor_current_node_type_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=function(){return(_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=Module.asm.ts_tree_cursor_current_node_is_named_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=function(){return(_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=Module.asm.ts_tree_cursor_current_node_is_missing_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=function(){return(_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=Module.asm.ts_tree_cursor_current_node_id_wasm).apply(null,arguments)},_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=function(){return(_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=Module.asm.ts_tree_cursor_start_position_wasm).apply(null,arguments)},_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=function(){return(_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=Module.asm.ts_tree_cursor_end_position_wasm).apply(null,arguments)},_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=function(){return(_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=Module.asm.ts_tree_cursor_start_index_wasm).apply(null,arguments)},_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=function(){return(_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=Module.asm.ts_tree_cursor_end_index_wasm).apply(null,arguments)},_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=function(){return(_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=Module.asm.ts_tree_cursor_current_field_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=function(){return(_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=Module.asm.ts_tree_cursor_current_node_wasm).apply(null,arguments)},_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=function(){return(_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=Module.asm.ts_node_symbol_wasm).apply(null,arguments)},_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=function(){return(_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=Module.asm.ts_node_child_count_wasm).apply(null,arguments)},_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=function(){return(_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=Module.asm.ts_node_named_child_count_wasm).apply(null,arguments)},_ts_node_child_wasm=Module._ts_node_child_wasm=function(){return(_ts_node_child_wasm=Module._ts_node_child_wasm=Module.asm.ts_node_child_wasm).apply(null,arguments)},_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=function(){return(_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=Module.asm.ts_node_named_child_wasm).apply(null,arguments)},_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=function(){return(_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=Module.asm.ts_node_child_by_field_id_wasm).apply(null,arguments)},_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=function(){return(_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=Module.asm.ts_node_next_sibling_wasm).apply(null,arguments)},_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=function(){return(_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=Module.asm.ts_node_prev_sibling_wasm).apply(null,arguments)},_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=function(){return(_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=Module.asm.ts_node_next_named_sibling_wasm).apply(null,arguments)},_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=function(){return(_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=Module.asm.ts_node_prev_named_sibling_wasm).apply(null,arguments)},_ts_node_parent_wasm=Module._ts_node_parent_wasm=function(){return(_ts_node_parent_wasm=Module._ts_node_parent_wasm=Module.asm.ts_node_parent_wasm).apply(null,arguments)},_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=function(){return(_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=Module.asm.ts_node_descendant_for_index_wasm).apply(null,arguments)},_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=function(){return(_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=Module.asm.ts_node_named_descendant_for_index_wasm).apply(null,arguments)},_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=function(){return(_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=Module.asm.ts_node_descendant_for_position_wasm).apply(null,arguments)},_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=function(){return(_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=Module.asm.ts_node_named_descendant_for_position_wasm).apply(null,arguments)},_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=function(){return(_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=Module.asm.ts_node_start_point_wasm).apply(null,arguments)},_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=function(){return(_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=Module.asm.ts_node_end_point_wasm).apply(null,arguments)},_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=function(){return(_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=Module.asm.ts_node_start_index_wasm).apply(null,arguments)},_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=function(){return(_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=Module.asm.ts_node_end_index_wasm).apply(null,arguments)},_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=function(){return(_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=Module.asm.ts_node_to_string_wasm).apply(null,arguments)},_ts_node_children_wasm=Module._ts_node_children_wasm=function(){return(_ts_node_children_wasm=Module._ts_node_children_wasm=Module.asm.ts_node_children_wasm).apply(null,arguments)},_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=function(){return(_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=Module.asm.ts_node_named_children_wasm).apply(null,arguments)},_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=function(){return(_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=Module.asm.ts_node_descendants_of_type_wasm).apply(null,arguments)},_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=function(){return(_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=Module.asm.ts_node_is_named_wasm).apply(null,arguments)},_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=function(){return(_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=Module.asm.ts_node_has_changes_wasm).apply(null,arguments)},_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=function(){return(_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=Module.asm.ts_node_has_error_wasm).apply(null,arguments)},_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=function(){return(_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=Module.asm.ts_node_is_missing_wasm).apply(null,arguments)},_ts_query_matches_wasm=Module._ts_query_matches_wasm=function(){return(_ts_query_matches_wasm=Module._ts_query_matches_wasm=Module.asm.ts_query_matches_wasm).apply(null,arguments)},_ts_query_captures_wasm=Module._ts_query_captures_wasm=function(){return(_ts_query_captures_wasm=Module._ts_query_captures_wasm=Module.asm.ts_query_captures_wasm).apply(null,arguments)},___cxa_atexit=Module.___cxa_atexit=function(){return(___cxa_atexit=Module.___cxa_atexit=Module.asm.__cxa_atexit).apply(null,arguments)},_iswdigit=Module._iswdigit=function(){return(_iswdigit=Module._iswdigit=Module.asm.iswdigit).apply(null,arguments)},_iswalpha=Module._iswalpha=function(){return(_iswalpha=Module._iswalpha=Module.asm.iswalpha).apply(null,arguments)},_iswlower=Module._iswlower=function(){return(_iswlower=Module._iswlower=Module.asm.iswlower).apply(null,arguments)},_memchr=Module._memchr=function(){return(_memchr=Module._memchr=Module.asm.memchr).apply(null,arguments)},_strlen=Module._strlen=function(){return(_strlen=Module._strlen=Module.asm.strlen).apply(null,arguments)},_towupper=Module._towupper=function(){return(_towupper=Module._towupper=Module.asm.towupper).apply(null,arguments)},_setThrew=Module._setThrew=function(){return(_setThrew=Module._setThrew=Module.asm.setThrew).apply(null,arguments)},stackSave=Module.stackSave=function(){return(stackSave=Module.stackSave=Module.asm.stackSave).apply(null,arguments)},stackRestore=Module.stackRestore=function(){return(stackRestore=Module.stackRestore=Module.asm.stackRestore).apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return(stackAlloc=Module.stackAlloc=Module.asm.stackAlloc).apply(null,arguments)},__Znwm=Module.__Znwm=function(){return(__Znwm=Module.__Znwm=Module.asm._Znwm).apply(null,arguments)},__ZdlPv=Module.__ZdlPv=function(){return(__ZdlPv=Module.__ZdlPv=Module.asm._ZdlPv).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm).apply(null,arguments)},__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=function(){return(__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.asm._ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw).apply(null,arguments)},dynCall_jiji=Module.dynCall_jiji=function(){return(dynCall_jiji=Module.dynCall_jiji=Module.asm.dynCall_jiji).apply(null,arguments)},_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=function(){return(_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=Module.asm.orig$ts_parser_timeout_micros).apply(null,arguments)},_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=function(){return(_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=Module.asm.orig$ts_parser_set_timeout_micros).apply(null,arguments)},calledRun;function callMain(e){var t=Module._main;if(t){(e=e||[]).unshift(thisProgram);var n=e.length,r=stackAlloc(4*(n+1)),i=r>>2;e.forEach((e=>{HEAP32[i++]=allocateUTF8OnStack(e)})),HEAP32[i]=0;try{var o=t(n,r);return exitJS(o,!0),o}catch(e){return handleException(e)}}}Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16,dependenciesFulfilled=function e(){calledRun||run(),calledRun||(dependenciesFulfilled=e)};var dylibsLoaded=!1;function run(e){function t(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(e),postRun()))}e=e||arguments_,runDependencies>0||!dylibsLoaded&&(preloadDylibs(),dylibsLoaded=!0,runDependencies>0)||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout((function(){setTimeout((function(){Module.setStatus("")}),1),t()}),1)):t()))}if(Module.preInit)for("function"==typeof Module.preInit&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();const C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/;var VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;class ParserImpl{static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0}setLanguage(e){let t;if(e){if(e.constructor!==Language)throw new Error("Argument must be a Language");{t=e[0];const n=C._ts_language_version(t);if(n<MIN_COMPATIBLE_VERSION||VERSION<n)throw new Error(`Incompatible language version ${n}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}}else t=0,e=null;return this.language=e,C._ts_parser_set_language(this[0],t),this}getLanguage(){return this.language}parse(e,t,n){if("string"==typeof e)currentParseCallback=(t,n,r)=>e.slice(t,r);else{if("function"!=typeof e)throw new Error("Argument must be a string or a function");currentParseCallback=e}this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let r=0,i=0;if(n&&n.includedRanges){r=n.includedRanges.length,i=C._calloc(r,SIZE_OF_RANGE);let e=i;for(let t=0;t<r;t++)marshalRange(e,n.includedRanges[t]),e+=SIZE_OF_RANGE}const o=C._ts_parser_parse_wasm(this[0],this[1],t?t[0]:0,i,r);if(!o)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");const s=new Tree(INTERNAL,o,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,s}reset(){C._ts_parser_reset(this[0])}setTimeoutMicros(e){C._ts_parser_set_timeout_micros(this[0],e)}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setLogger(e){if(e){if("function"!=typeof e)throw new Error("Logger callback must be a function")}else e=null;return this.logCallback=e,this}getLogger(){return this.logCallback}}class Tree{constructor(e,t,n,r){assertInternal(e),this[0]=t,this.language=n,this.textCallback=r}copy(){const e=C._ts_tree_copy(this[0]);return new Tree(INTERNAL,e,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0}edit(e){marshalEdit(e),C._ts_tree_edit_wasm(this[0])}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(e){if(e.constructor!==Tree)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],e[0]);const t=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),r=new Array(t);if(t>0){let e=n;for(let n=0;n<t;n++)r[n]=unmarshalRange(e),e+=SIZE_OF_RANGE;C._free(n)}return r}}class Node{constructor(e,t){assertInternal(e),this.tree=t}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}isNamed(){return marshalNode(this),1===C._ts_node_is_named_wasm(this.tree[0])}hasError(){return marshalNode(this),1===C._ts_node_has_error_wasm(this.tree[0])}hasChanges(){return marshalNode(this),1===C._ts_node_has_changes_wasm(this.tree[0])}isMissing(){return marshalNode(this),1===C._ts_node_is_missing_wasm(this.tree[0])}equals(e){return this.id===e.id}child(e){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}namedChild(e){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldId(e){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldName(e){const t=this.tree.language.fields.indexOf(e);if(-1!==t)return this.childForFieldId(t)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);const e=getValue(TRANSFER_BUFFER,"i32"),t=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(e),e>0){let n=t;for(let t=0;t<e;t++)this._children[t]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(t)}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);const e=getValue(TRANSFER_BUFFER,"i32"),t=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(e),e>0){let n=t;for(let t=0;t<e;t++)this._namedChildren[t]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(t)}}return this._namedChildren}descendantsOfType(e,t,n){Array.isArray(e)||(e=[e]),t||(t=ZERO_POINT),n||(n=ZERO_POINT);const r=[],i=this.tree.language.types;for(let t=0,n=i.length;t<n;t++)e.includes(i[t])&&r.push(t);const o=C._malloc(SIZE_OF_INT*r.length);for(let e=0,t=r.length;e<t;e++)setValue(o+e*SIZE_OF_INT,r[e],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],o,r.length,t.row,t.column,n.row,n.column);const s=getValue(TRANSFER_BUFFER,"i32"),a=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),c=new Array(s);if(s>0){let e=a;for(let t=0;t<s;t++)c[t]=unmarshalNode(this.tree,e),e+=SIZE_OF_NODE}return C._free(a),C._free(o),c}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(e,t=e){if("number"!=typeof e||"number"!=typeof t)throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,t,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(e,t=e){if("number"!=typeof e||"number"!=typeof t)throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,t,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(e,t=e){if(!isPoint(e)||!isPoint(t))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,t),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(e,t=e){if(!isPoint(e)||!isPoint(t))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,t),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);const e=C._ts_node_to_string_wasm(this.tree[0]),t=AsciiToString(e);return C._free(e),t}}class TreeCursor{constructor(e,t){assertInternal(e),this.tree=t,unmarshalTreeCursor(this)}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}reset(e){marshalNode(e),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this)}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),1===C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])}get nodeIsMissing(){return marshalTreeCursor(this),1===C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])}get nodeText(){marshalTreeCursor(this);const e=C._ts_tree_cursor_start_index_wasm(this.tree[0]),t=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,e,t)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}currentFieldName(){return this.tree.language.fields[this.currentFieldId()]}gotoFirstChild(){marshalTreeCursor(this);const e=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),1===e}gotoNextSibling(){marshalTreeCursor(this);const e=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),1===e}gotoParent(){marshalTreeCursor(this);const e=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),1===e}}class Language{constructor(e,t){assertInternal(e),this[0]=t,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let e=0,t=this.types.length;e<t;e++)C._ts_language_symbol_type(this[0],e)<2&&(this.types[e]=UTF8ToString(C._ts_language_symbol_name(this[0],e)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let e=0,t=this.fields.length;e<t;e++){const t=C._ts_language_field_name_for_id(this[0],e);this.fields[e]=0!==t?UTF8ToString(t):null}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}fieldIdForName(e){const t=this.fields.indexOf(e);return-1!==t?t:null}fieldNameForId(e){return this.fields[e]||null}idForNodeType(e,t){const n=lengthBytesUTF8(e),r=C._malloc(n+1);stringToUTF8(e,r,n+1);const i=C._ts_language_symbol_for_name(this[0],r,n,t);return C._free(r),i||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(e){const t=C._ts_language_symbol_name(this[0],e);return t?UTF8ToString(t):null}nodeTypeIsNamed(e){return!!C._ts_language_type_is_named_wasm(this[0],e)}nodeTypeIsVisible(e){return!!C._ts_language_type_is_visible_wasm(this[0],e)}query(e){const t=lengthBytesUTF8(e),n=C._malloc(t+1);stringToUTF8(e,n,t+1);const r=C._ts_query_new(this[0],n,t,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!r){const t=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),r=UTF8ToString(n,getValue(TRANSFER_BUFFER,"i32")).length,i=e.substr(r,100).split("\n")[0];let o,s=i.match(QUERY_WORD_REGEX)[0];switch(t){case 2:o=new RangeError(`Bad node name '${s}'`);break;case 3:o=new RangeError(`Bad field name '${s}'`);break;case 4:o=new RangeError(`Bad capture name @${s}`);break;case 5:o=new TypeError(`Bad pattern structure at offset ${r}: '${i}'...`),s="";break;default:o=new SyntaxError(`Bad syntax at offset ${r}: '${i}'...`),s=""}throw o.index=r,o.length=s.length,C._free(n),o}const i=C._ts_query_string_count(r),o=C._ts_query_capture_count(r),s=C._ts_query_pattern_count(r),a=new Array(o),c=new Array(i);for(let e=0;e<o;e++){const t=C._ts_query_capture_name_for_id(r,e,TRANSFER_BUFFER),n=getValue(TRANSFER_BUFFER,"i32");a[e]=UTF8ToString(t,n)}for(let e=0;e<i;e++){const t=C._ts_query_string_value_for_id(r,e,TRANSFER_BUFFER),n=getValue(TRANSFER_BUFFER,"i32");c[e]=UTF8ToString(t,n)}const u=new Array(s),l=new Array(s),d=new Array(s),f=new Array(s),h=new Array(s);for(let e=0;e<s;e++){const t=C._ts_query_predicates_for_pattern(r,e,TRANSFER_BUFFER),n=getValue(TRANSFER_BUFFER,"i32");f[e]=[],h[e]=[];const i=[];let o=t;for(let t=0;t<n;t++){const t=getValue(o,"i32");o+=SIZE_OF_INT;const n=getValue(o,"i32");if(o+=SIZE_OF_INT,t===PREDICATE_STEP_TYPE_CAPTURE)i.push({type:"capture",name:a[n]});else if(t===PREDICATE_STEP_TYPE_STRING)i.push({type:"string",value:c[n]});else if(i.length>0){if("string"!==i[0].type)throw new Error("Predicates must begin with a literal value");const t=i[0].value;let n=!0;switch(t){case"not-eq?":n=!1;case"eq?":if(3!==i.length)throw new Error("Wrong number of arguments to `#eq?` predicate. Expected 2, got "+(i.length-1));if("capture"!==i[1].type)throw new Error(`First argument of \`#eq?\` predicate must be a capture. Got "${i[1].value}"`);if("capture"===i[2].type){const t=i[1].name,r=i[2].name;h[e].push((function(e){let i,o;for(const n of e)n.name===t&&(i=n.node),n.name===r&&(o=n.node);return void 0===i||void 0===o||i.text===o.text===n}))}else{const t=i[1].name,r=i[2].value;h[e].push((function(e){for(const i of e)if(i.name===t)return i.node.text===r===n;return!0}))}break;case"not-match?":n=!1;case"match?":if(3!==i.length)throw new Error(`Wrong number of arguments to \`#match?\` predicate. Expected 2, got ${i.length-1}.`);if("capture"!==i[1].type)throw new Error(`First argument of \`#match?\` predicate must be a capture. Got "${i[1].value}".`);if("string"!==i[2].type)throw new Error(`Second argument of \`#match?\` predicate must be a string. Got @${i[2].value}.`);const r=i[1].name,o=new RegExp(i[2].value);h[e].push((function(e){for(const t of e)if(t.name===r)return o.test(t.node.text)===n;return!0}));break;case"set!":if(i.length<2||i.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${i.length-1}.`);if(i.some((e=>"string"!==e.type)))throw new Error('Arguments to `#set!` predicate must be a strings.".');u[e]||(u[e]={}),u[e][i[1].value]=i[2]?i[2].value:null;break;case"is?":case"is-not?":if(i.length<2||i.length>3)throw new Error(`Wrong number of arguments to \`#${t}\` predicate. Expected 1 or 2. Got ${i.length-1}.`);if(i.some((e=>"string"!==e.type)))throw new Error(`Arguments to \`#${t}\` predicate must be a strings.".`);const s="is?"===t?l:d;s[e]||(s[e]={}),s[e][i[1].value]=i[2]?i[2].value:null;break;default:f[e].push({operator:t,operands:i.slice(1)})}i.length=0}}Object.freeze(u[e]),Object.freeze(l[e]),Object.freeze(d[e])}return C._free(n),new Query(INTERNAL,r,a,h,f,Object.freeze(u),Object.freeze(l),Object.freeze(d))}static load(e){let t;if(e instanceof Uint8Array)t=Promise.resolve(e);else{const n=e;if("undefined"!=typeof process&&process.versions&&process.versions.node){const e=__webpack_require__(4383);t=Promise.resolve(e.readFileSync(n))}else t=fetch(n).then((e=>e.arrayBuffer().then((t=>{if(e.ok)return new Uint8Array(t);{const n=new TextDecoder("utf-8").decode(t);throw new Error(`Language.load failed with status ${e.status}.\n\n${n}`)}}))))}const n="function"==typeof loadSideModule?loadSideModule:loadWebAssemblyModule;return t.then((e=>n(e,{loadAsync:!0}))).then((e=>{const t=Object.keys(e).find((e=>LANGUAGE_FUNCTION_REGEX.test(e)&&!e.includes("external_scanner_"))),n=e[t]();return new Language(INTERNAL,n)}))}}class Query{constructor(e,t,n,r,i,o,s,a){assertInternal(e),this[0]=t,this.captureNames=n,this.textPredicates=r,this.predicates=i,this.setProperties=o,this.assertedProperties=s,this.refutedProperties=a,this.exceededMatchLimit=!1}delete(){C._ts_query_delete(this[0]),this[0]=0}matches(e,t,n,r){t||(t=ZERO_POINT),n||(n=ZERO_POINT),r||(r={});let i=r.matchLimit;if(void 0===i)i=0;else if("number"!=typeof i)throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_matches_wasm(this[0],e.tree[0],t.row,t.column,n.row,n.column,i);const o=getValue(TRANSFER_BUFFER,"i32"),s=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),a=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),c=new Array(o);this.exceededMatchLimit=!!a;let u=0,l=s;for(let t=0;t<o;t++){const n=getValue(l,"i32");l+=SIZE_OF_INT;const r=getValue(l,"i32");l+=SIZE_OF_INT;const i=new Array(r);if(l=unmarshalCaptures(this,e.tree,l,i),this.textPredicates[n].every((e=>e(i)))){c[u++]={pattern:n,captures:i};const e=this.setProperties[n];e&&(c[t].setProperties=e);const r=this.assertedProperties[n];r&&(c[t].assertedProperties=r);const o=this.refutedProperties[n];o&&(c[t].refutedProperties=o)}}return c.length=u,C._free(s),c}captures(e,t,n,r){t||(t=ZERO_POINT),n||(n=ZERO_POINT),r||(r={});let i=r.matchLimit;if(void 0===i)i=0;else if("number"!=typeof i)throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_captures_wasm(this[0],e.tree[0],t.row,t.column,n.row,n.column,i);const o=getValue(TRANSFER_BUFFER,"i32"),s=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),a=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),c=[];this.exceededMatchLimit=!!a;const u=[];let l=s;for(let t=0;t<o;t++){const t=getValue(l,"i32");l+=SIZE_OF_INT;const n=getValue(l,"i32");l+=SIZE_OF_INT;const r=getValue(l,"i32");if(l+=SIZE_OF_INT,u.length=n,l=unmarshalCaptures(this,e.tree,l,u),this.textPredicates[t].every((e=>e(u)))){const e=u[r],n=this.setProperties[t];n&&(e.setProperties=n);const i=this.assertedProperties[t];i&&(e.assertedProperties=i);const o=this.refutedProperties[t];o&&(e.refutedProperties=o),c.push(e)}}return C._free(s),c}predicatesForPattern(e){return this.predicates[e]}didExceedMatchLimit(){return this.exceededMatchLimit}}function getText(e,t,n){const r=n-t;let i=e.textCallback(t,null,n);for(t+=i.length;t<n;){const r=e.textCallback(t,null,n);if(!(r&&r.length>0))break;t+=r.length,i+=r}return t>n&&(i=i.slice(0,r)),i}function unmarshalCaptures(e,t,n,r){for(let i=0,o=r.length;i<o;i++){const o=getValue(n,"i32"),s=unmarshalNode(t,n+=SIZE_OF_INT);n+=SIZE_OF_NODE,r[i]={name:e.captureNames[o],node:s}}return n}function assertInternal(e){if(e!==INTERNAL)throw new Error("Illegal constructor")}function isPoint(e){return e&&"number"==typeof e.row&&"number"==typeof e.column}function marshalNode(e){let t=TRANSFER_BUFFER;setValue(t,e.id,"i32"),t+=SIZE_OF_INT,setValue(t,e.startIndex,"i32"),t+=SIZE_OF_INT,setValue(t,e.startPosition.row,"i32"),t+=SIZE_OF_INT,setValue(t,e.startPosition.column,"i32"),t+=SIZE_OF_INT,setValue(t,e[0],"i32")}function unmarshalNode(e,t=TRANSFER_BUFFER){const n=getValue(t,"i32");if(0===n)return null;const r=getValue(t+=SIZE_OF_INT,"i32"),i=getValue(t+=SIZE_OF_INT,"i32"),o=getValue(t+=SIZE_OF_INT,"i32"),s=getValue(t+=SIZE_OF_INT,"i32"),a=new Node(INTERNAL,e);return a.id=n,a.startIndex=r,a.startPosition={row:i,column:o},a[0]=s,a}function marshalTreeCursor(e,t=TRANSFER_BUFFER){setValue(t+0*SIZE_OF_INT,e[0],"i32"),setValue(t+1*SIZE_OF_INT,e[1],"i32"),setValue(t+2*SIZE_OF_INT,e[2],"i32")}function unmarshalTreeCursor(e){e[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),e[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),e[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32")}function marshalPoint(e,t){setValue(e,t.row,"i32"),setValue(e+SIZE_OF_INT,t.column,"i32")}function unmarshalPoint(e){return{row:getValue(e,"i32"),column:getValue(e+SIZE_OF_INT,"i32")}}function marshalRange(e,t){marshalPoint(e,t.startPosition),marshalPoint(e+=SIZE_OF_POINT,t.endPosition),setValue(e+=SIZE_OF_POINT,t.startIndex,"i32"),setValue(e+=SIZE_OF_INT,t.endIndex,"i32"),e+=SIZE_OF_INT}function unmarshalRange(e){const t={};return t.startPosition=unmarshalPoint(e),e+=SIZE_OF_POINT,t.endPosition=unmarshalPoint(e),e+=SIZE_OF_POINT,t.startIndex=getValue(e,"i32"),e+=SIZE_OF_INT,t.endIndex=getValue(e,"i32"),t}function marshalEdit(e){let t=TRANSFER_BUFFER;marshalPoint(t,e.startPosition),t+=SIZE_OF_POINT,marshalPoint(t,e.oldEndPosition),t+=SIZE_OF_POINT,marshalPoint(t,e.newEndPosition),t+=SIZE_OF_POINT,setValue(t,e.startIndex,"i32"),t+=SIZE_OF_INT,setValue(t,e.oldEndIndex,"i32"),t+=SIZE_OF_INT,setValue(t,e.newEndIndex,"i32"),t+=SIZE_OF_INT}for(const e of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(Parser.prototype,e,{value:ParserImpl.prototype[e],enumerable:!1,writable:!1});Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise()}})))}}return Parser}();module.exports=TreeSitter},5820:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(4017),t)},4017:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(7973),t),i(n(3404),t)},3404:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0;class n{constructor(e){this.enabled=!1,this.output=e}static initialize(e){n.instance||(n.instance=new n(e))}static getInstance(){if(!n.instance)throw new Error("Logger is not initialized. Call Logger.initialize(channel) first.");return n.instance}setEnabled(e){n.instance&&(n.instance.enabled=e)}enable(){n.instance&&(n.instance.enabled=!0)}disable(){n.instance&&(n.instance.enabled=!1)}debug(...e){this.enabled&&this.write("DEBUG",...e)}info(...e){this.write("INFO",...e)}warn(...e){this.write("WARN",...e)}error(...e){this.write("ERROR",...e),this.output.show(!0)}write(e,...t){const n=t.map(this.stringify).join(" "),r=(new Date).toLocaleString();this.output.appendLine(`${e} [${r}]: ${n}`)}stringify(e){return"string"==typeof e?e:JSON.stringify(e,void 0,2)}getChannel(){return this.output}}t.Logger=n,n.instance=null},7973:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UriParse=void 0;const r=n(1398);class i{static init(e,t){i.endpoint=e,i.clientId=t}static getEndpoint(){return i.endpoint}static getClientId(){return i.clientId}static parseUri(e,t="vscode-remote",n="icube+icube"){if(!i.endpoint)return r.Uri.parse(e).with({scheme:t,authority:n});const o=new RegExp(`.*${i.clientId}\\/file`),s=e.replace(o,"file:");return r.Uri.parse(s).with({scheme:t,authority:n})}}t.UriParse=i,i.endpoint=""},1768:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(5641),t)},5641:(e,t)=>{"use strict";function n(e){for(;e.length;){const t=e.pop();t?.dispose()}}Object.defineProperty(t,"__esModule",{value:!0}),t.toDisposable=t.Disposable=t.disposeAll=void 0,t.disposeAll=n;class r{_isDisposed=!1;_disposables=[];dispose(){this._isDisposed||(this._isDisposed=!0,n(this._disposables))}_register(e){return this._isDisposed?e.dispose():this._disposables.push(e),e}get isDisposed(){return this._isDisposed}}t.Disposable=r,t.toDisposable=function(e){return new class extends r{dispose(){super.dispose(),e()}}}},2646:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDocsDomain=t.getRegion=void 0;const r=n(9754);t.getRegion=function(e){const{CLOUDIDE_PROVIDER_REGION:t="",IDE_REGION:n=""}=e;switch(t){case"sg":return r.Region.SG;case"us":return r.Region.US;case"cn":return r.Region.CN}switch(n){case"sg":return r.Region.SG;case"us":return r.Region.US;default:return r.Region.CN}};t.getDocsDomain=e=>{const{CLOUDIDE_CONTROL_PLANE:t="",CLOUDIDE_PROVIDER_REGION:n=""}=e;switch(t){case"i18n":case"boei18n":return"docs.marscode.com";case"sg":default:return["docs","marscode","com"].join(".");case"cn":case"boe":return["docs","marscode","cn"].join(".")}}},8806:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTenant=void 0;const r=n(9754);t.getTenant=function(e={}){const{CLOUDIDE_TENANT_NAME:t}=e;return"bytedance"===t?r.Tenant.BYTEDANCE:r.Tenant.PUBLIC}},7569:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTeaConfig=t.getSlardarBid=t.getDefaultRegion=t.getEnviromentVariables=void 0;const r=n(2646),i=n(8806),o=n(9754),s=n(5938);function a(){return"undefined"!=typeof process?process.env||{}:"undefined"!=typeof window&&window.env||{}}function c(){const e=a();return(0,r.getRegion)(e)}t.getEnviromentVariables=a,t.getDefaultRegion=c,t.getSlardarBid=function(e={}){const t=a(),n=e.region||c(),r=(e.tenant||(0,i.getTenant)(t))===o.Tenant.BYTEDANCE;return s.DEFAULT_SLARDAR_BID_MAP[n][r?"inner":"outer"]},t.getTeaConfig=function(e={}){const t=a(),n=e?.region||c(),r=(e?.tenant||(0,i.getTenant)(t))===o.Tenant.BYTEDANCE?"inner":"outer";return{appId:s.TEA_APP_ID_MAP[n][r],channel:s.TEA_CHANNEL_MAP[n][r],channelDomain:s.TEA_AB_CHANNEL_DOMAIN_MAP[n][r],serviceOrigin:s.TEA_AB_SERVICE_ORIGIN_MAP[n][r]}}},5938:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AUTH_BASE_URL_MAP=t.DEFAULT_ELECTRON_OVERSEA_SLARDAR_BID=t.DEFAULT_ELECTRON_SLARDAR_BID=t.DEFAULT_SLARDAR_BID_MAP=t.TEA_AB_CHANNEL_DOMAIN_MAP=t.TEA_AB_SERVICE_ORIGIN_MAP=t.TEA_CHANNEL_MAP=t.TEA_OVERSEA_ELECTRON_APP_ID=t.TEA_ELECTRON_APP_ID=t.TEA_APP_ID_MAP=t.DEFAULT_REGION=t.DEFAULT_STARLING_FALLBACK_LANG=t.DEFAULT_STARLING_LANG=t.DEFAULT_STARLING_NAMESPACE=t.DEFAULT_STARLING_APP_KEY=void 0;const r=n(9754);t.DEFAULT_STARLING_APP_KEY="4b68ec50ae9d11ee9b92612267a029f0",t.DEFAULT_STARLING_NAMESPACE="devtools",t.DEFAULT_STARLING_LANG="en",t.DEFAULT_STARLING_FALLBACK_LANG=["en","zh"],t.DEFAULT_REGION=r.Region.CN,t.TEA_APP_ID_MAP={[r.Region.CN]:{inner:379586,outer:576092},[r.Region.BOE]:{inner:379586,outer:576092},[r.Region.US]:{inner:379586,outer:573425},[r.Region.SG]:{inner:379586,outer:573425},[r.Region.BOEI18N]:{inner:379586,outer:573425}},t.TEA_ELECTRON_APP_ID=647416,t.TEA_OVERSEA_ELECTRON_APP_ID=677332,t.TEA_CHANNEL_MAP={[r.Region.CN]:{inner:"cn",outer:"cn"},[r.Region.BOE]:{inner:"cn",outer:"cn"},[r.Region.US]:{inner:"cn",outer:"va"},[r.Region.SG]:{inner:"cn",outer:"sg"},[r.Region.BOEI18N]:{inner:"cn",outer:"sg"}},t.TEA_AB_SERVICE_ORIGIN_MAP={[r.Region.CN]:{inner:"https://abtestvm.bytedance.com",outer:"https://abtestvm.bytedance.com"},[r.Region.BOE]:{inner:"https://abtestvm.bytedance.com",outer:"https://abtestvm.bytedance.com"},[r.Region.US]:{inner:"https://abtestvm.bytedance.com",outer:"https://libraweb-va.tiktok.com"},[r.Region.SG]:{inner:"https://abtestvm.bytedance.com",outer:"https://libraweb-sg.tiktok.com"},[r.Region.BOEI18N]:{inner:"https://abtestvm.bytedance.com",outer:"https://libraweb-sg.tiktok.com"}},t.TEA_AB_CHANNEL_DOMAIN_MAP={[r.Region.CN]:{inner:"https://abtestvm.bytedance.com",outer:"https://abtestvm.bytedance.com"},[r.Region.BOE]:{inner:"https://abtestvm.bytedance.com",outer:"https://abtestvm.bytedance.com"},[r.Region.US]:{inner:"https://abtestvm.bytedance.com",outer:"https://libraweb-va.tiktok.com"},[r.Region.SG]:{inner:"https://abtestvm.bytedance.com",outer:"https://libraweb-sg.tiktok.com"},[r.Region.BOEI18N]:{inner:"https://abtestvm.bytedance.com",outer:"https://libraweb-sg.tiktok.com"}},t.DEFAULT_SLARDAR_BID_MAP={[r.Region.CN]:{inner:"icube_web",outer:"stable_ide_cn"},[r.Region.BOE]:{inner:"icube_web",outer:"stable_ide_cn"},[r.Region.US]:{inner:"cloud_ide_us",outer:"stable_ide_us"},[r.Region.SG]:{inner:"cloud_ide_us",outer:"stable_ide_us"},[r.Region.BOEI18N]:{inner:"cloud_ide_us",outer:"stable_ide_us"}},t.DEFAULT_ELECTRON_SLARDAR_BID="marscode_native_ide_cn",t.DEFAULT_ELECTRON_OVERSEA_SLARDAR_BID="marscode_native_ide_us",t.AUTH_BASE_URL_MAP={[r.Region.CN]:"",[r.Region.BOE]:"",[r.Region.US]:"",[r.Region.SG]:"",[r.Region.BOEI18N]:""}},3899:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStorageStorage=t.fetchLocaleDatas=void 0;const o=n(5938),s=n(7482);i(n(7482),t),t.fetchLocaleDatas=async function(e){const{lang:t,i18n:n,namespace:r=o.DEFAULT_STARLING_NAMESPACE,starlingZoneHost:i}=e;n.setLang(t);const c=new s.StarlingClient({api_key:o.DEFAULT_STARLING_APP_KEY,namespace:r,locale:t,zoneHost:i||STARLING_ZONE_HOST,store:new a}),u=await c.load();return n.addResourceBundle(t,"translation",u,!0,!0),n};class a{get(e,t){if(!window.localStorage||!window.localStorage.getItem)return;const n=window.localStorage.getItem(e);return n&&function(e){if("string"!=typeof e)return;try{return JSON.parse(e)}catch(t){return e||void 0}}(n)||t}set(e,t){var n;if(window.localStorage&&window.localStorage.setItem)return window.localStorage.setItem(e,(n=t,JSON.stringify(n)))}}t.LocalStorageStorage=a},7482:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createI18nTranslator=t.request=t.Storage=t.StarlingClient=void 0;const i=n(8884),o=r(n(4681)),s=n(7441),a=n(6584),c=n(5938);class u extends o.default{constructor(e){e.store||(e.store=new l),e.request||(e.request=d),super(e)}}t.StarlingClient=u;class l{_cahce=new a.LRUCache({max:500});get(e,t){return this._cahce.get(e)||t}set(e,t){return this._cahce.set(e,t)}}async function d(e,t){const n=(0,s.createRequestInstance)();return await n.request({url:e,method:"get",...t})}t.Storage=l,t.request=d,t.createI18nTranslator=function(e){const t=new i.I18nConstructor;return t.init({fallbackLng:c.DEFAULT_STARLING_FALLBACK_LANG,lng:c.DEFAULT_STARLING_LANG,...e}),t}},8474:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.initBaseClient=void 0;const o=n(1768),s=n(3899),a=n(5303),c=n(1194),u=n(7010),l=n(2786),d=n(4131),f=n(4499),h=n(3644),p=n(2646),g=n(2650);i(n(2972),t),i(n(5303),t),i(n(1194),t),i(n(7010),t),i(n(4499),t),i(n(3899),t),i(n(9754),t),i(n(2646),t),i(n(4131),t),t.initBaseClient=function(e){const{name:t,pageId:n,slardarBid:r,i18nOptions:i,globalTags:_={},getContext:m}=e,v=(0,p.getRegion)(window.env||{}),y={pid:n};r&&(y.bid=r);const b=(0,u.createDefaultSlardarClient)({...y,plugins:{pageview:!1}},{..._,session_id:window.env?.SESSION_ID||"",runtime:"web"},v),E=(0,a.createLogger)({name:t,slardar:b,context:{sessionId:window.env?.SESSION_ID||"",runtime:"web"}}),w=(0,f.createDefaultTeaClient)({region:v,event_verify_url:window.env.TEA_EVENT_VERIFY_HOST?window.env.TEA_EVENT_VERIFY_HOST:void 0}),S=(0,l.createDefaultRequestInstance)({}),T=(0,u.getDefaultContext)();function C(e){const{user_id:t}=e;w.config({user:{user_unique_id:t},custom:{...T,..._,...e}});for(const[t,n]of Object.entries(e))b.context?.set(t,n)}window.navigator.userAgent.includes("Electron")?window.env?.COMMON_PARAMS&&"object"==typeof window.env?.COMMON_PARAMS&&C(window.env?.COMMON_PARAMS):w.config({custom:{...T,..._}}),window.addEventListener("icube-devtools:common-params-change",(e=>{C(e)})),(0,h.initGlobalContext)({tea:w,slardar:b,getContext:m});const O=(0,g.getIsDev)(window.env||{}),A=new d.Reporter(b,O,n),I=(0,s.createI18nTranslator)(i||{});if(window.addEventListener("error",(e=>{const{error:t,filename:n,lineno:r,colno:i,message:o}=e;t instanceof Error?A.captureException(t):A.captureException(new Error(`uncaughtException: ${JSON.stringify({error:t,filename:n,lineno:r,colno:i,message:o})}`))})),window.addEventListener("unhandledrejection",(e=>{e?.reason instanceof Error&&A.captureException(e?.reason)})),b.on("beforeSend",(function(e){return"performance"===e.ev_type&&E.getLogger(c.LoggerType.Slardar).info("[perfermance]",e.payload.name,": ",e.payload.value,"ms"),e})),window.performance){window.performance.getEntriesByType("resource").forEach((e=>{E.getLogger(c.LoggerType.Slardar).info("[perfermance]","load script",": ",e.duration,"ms")}))}window.__icube_devtool_logger__=E;const R=(0,o.toDisposable)((()=>{A.dispose()}));return{request:S,reporter:A,logger:E,tea:w,slardar:b,i18n:I,disposable:R}}},3644:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.injectNativeEnv=t.initGlobalContext=void 0;const r=n(9754);t.initGlobalContext=async function(e){const{getContext:t,tea:n,slardar:r}=e;if(t){const e=await t();for(const[t,i]of Object.entries(e))r.context?.set(t,i),n.config({custom:{[t]:i}})}},t.injectNativeEnv=function(){process.env.VSCODE_RUN_IN_ELECTRON&&(process.env.CLOUDIDE_PROVIDER_REGION=r.RegionMap[process.env.APP_REGION||r.Region.CN],process.env.CLOUDIDE_APISERVER_BASE_URL=r.ApiServerMap[process.env.APP_REGION||r.Region.CN])}},8692:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseLogger=void 0;const r=n(1194);t.BaseLogger=class{_level=r.LogLevel.Info;ctx;constructor(e={}){this.ctx=e}generateMsg(e){let t=e||"";return this.ctx.sessionId&&(t=`[${this.ctx.sessionId}]${t}`),this.ctx.runtime&&(t=`[${this.ctx.runtime}]${t}`),e instanceof Error?(e.message=t,e):t}info(e,...t){this._level<r.LogLevel.Info||this._log(r.LogLevel.Info,this.generateMsg(e),...t)}debug(e,...t){this._level<r.LogLevel.Debug||this._log(r.LogLevel.Debug,this.generateMsg(e),...t)}trace(e,...t){this._level<r.LogLevel.Trace||this._log(r.LogLevel.Trace,this.generateMsg(e),...t)}warn(e,...t){this._level<r.LogLevel.Warn||this._log(r.LogLevel.Warn,this.generateMsg(e),...t)}error(e,...t){this._level<r.LogLevel.Error||this._log(r.LogLevel.Error,this.generateMsg(e),...t)}setLevel(e){this._level=e}getLevel(){return this._level}log(e,t,...n){this._log(e,t,...n)}getLogger(e){return this}}},920:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleLogger=void 0;const r=n(8692),i=n(1194);class o extends r.BaseLogger{type=i.LoggerType.Console;_log(e,t,...n){switch(e){case i.LogLevel.Info:case i.LogLevel.Debug:case i.LogLevel.Trace:case i.LogLevel.Warn:case i.LogLevel.Error:}}withContext(e){return new o({...this.ctx,...e})}}t.ConsoleLogger=o},1194:(e,t)=>{"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.LoggerType=t.LogLevel=void 0,function(e){e[e.Error=0]="Error",e[e.Warn=1]="Warn",e[e.Debug=2]="Debug",e[e.Info=3]="Info",e[e.Trace=4]="Trace"}(n||(t.LogLevel=n={})),function(e){e[e.Console=0]="Console",e[e.Slardar=1]="Slardar",e[e.Output=2]="Output",e[e.Base=3]="Base",e[e.Mutiple=4]="Mutiple"}(r||(t.LoggerType=r={}))},6801:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MutipleLogger=void 0;const r=n(8692),i=n(1194);class o extends r.BaseLogger{_loggers;type=i.LoggerType.Mutiple;constructor(e,t){super(e),this._loggers=t}_log(e,t,...n){this._loggers.forEach((r=>r.log(e,t,...n)))}withContext(e){return new o({...this.ctx,...e},this._loggers.map((t=>t.withContext(e))))}getLogger(e){switch(e){case i.LoggerType.Console:return new o(this.ctx,this._loggers.filter((e=>e.type===i.LoggerType.Console)));case i.LoggerType.Slardar:return new o(this.ctx,this._loggers.filter((e=>e.type===i.LoggerType.Slardar)));case i.LoggerType.Output:return new o(this.ctx,this._loggers.filter((e=>e.type===i.LoggerType.Output)));default:return this}}setSlardarContext(e){this._loggers.filter((e=>e.type===i.LoggerType.Slardar)).forEach((t=>t.setContext(e)))}}t.MutipleLogger=o},9658:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SlardarLogger=void 0;const r=n(8692),i=n(1194),o=n(4131);class s extends r.BaseLogger{_name;_slardarClient;_reporter;type=i.LoggerType.Slardar;constructor(e,t,n){super(e),this._name=t,this._slardarClient=n,this._reporter=new o.Reporter(n)}withContext(e){return new s({...this.ctx,...e},this._name,this._slardarClient)}_log(e,t,...n){t instanceof Error&&(this._reporter.captureException(t,{name:this._name,...this.ctx}),t=t.stack||t.message),this._slardarClient.sendLog?.({content:`${t} ${n.join(" ")}`,level:this._getSlardarLevel(e),extra:this.ctx})}_getSlardarLevel(e){switch(e){case i.LogLevel.Error:return"error";case i.LogLevel.Warn:return"warn";case i.LogLevel.Debug:return"debug";case i.LogLevel.Info:return"info";case i.LogLevel.Trace:return"trace"}}setContext(e){this._slardarClient.context?.merge(e)}}t.SlardarLogger=s},5303:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createLogger=void 0;const r=n(7010),i=n(920),o=n(6801),s=n(9658);t.createLogger=function(e){const{name:t,slardar:n=(0,r.createDefaultSlardarClient)(),context:a={}}=e,c=new i.ConsoleLogger(a),u=new s.SlardarLogger(a,t,n);return new o.MutipleLogger(a,[c,u])}},7441:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createRequestInstance=t.defaultAxiosConfig=void 0;const i=r(n(8583));t.defaultAxiosConfig={proxy:!1},t.createRequestInstance=function(e){const{axiosConfig:n,interceptors:r}=e||{},o=i.default.create({...t.defaultAxiosConfig,...n});return r?.request&&r?.request.length>0&&r.request.forEach((e=>e.onRejected?o.interceptors.request.use(e.onFullfilled,e.onRejected):o.interceptors.request.use(e.onFullfilled))),r?.response&&r?.response.length>0&&r.response.forEach((e=>e.onRejected?o.interceptors.response.use(e.onFullfilled,e.onRejected):o.interceptors.response.use(e.onFullfilled))),o}},2972:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDefaultRequestInstance=void 0;const r=n(7441),i=n(5980);t.createDefaultRequestInstance=function(e){return(0,r.createRequestInstance)({interceptors:{request:[{onFullfilled:i.authInterceptor},...e?.interceptors?.request||[]],response:[...e?.interceptors?.response||[]]},...e})}},2786:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDefaultRequestInstance=void 0;const r=n(7441),i=n(4354);t.createDefaultRequestInstance=function(e){return(0,r.createRequestInstance)({interceptors:{request:[{onFullfilled:i.authInterceptor},...e?.interceptors?.request||[]],response:[...e?.interceptors?.response||[]]},...e})}},5980:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authInterceptor=void 0,t.authInterceptor=async function(e){return e}},4354:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authInterceptor=void 0,t.authInterceptor=async function(e){return e}},7512:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionEvent=t.HeatmapEvent=t.BlankEvent=t.SriEvent=t.ResourceEvent=t.ResourceErrorEvent=t.PerformanceTimingEvent=t.PerformanceLongTaskEvent=t.PerformanceEvent=t.ActionEvent=t.PageviewEvent=t.PageviewEventSource=t.JSErrorEvent=t.HttpEvent=t.CustomEvent=t.BaseEvent=void 0;class n{extra;overrides;constructor(e){this.extra=e?.extra,this.overrides=e?.overrides}}t.BaseEvent=n;t.CustomEvent=class extends n{ev_type="custom";payload;constructor(e,t){super(t),this.payload=e}};t.HttpEvent=class extends n{ev_type="http";payload;constructor(e,t){super(t),this.payload=e}};var r;t.JSErrorEvent=class extends n{ev_type="js_error";payload;constructor(e,t){super(t),this.payload=e}},function(e){e.Init="init",e.PathChange="path-change",e.HashChange="hash-change",e.HistoryStateChange="history-state-change",e.UserSet="user-set"}(r||(t.PageviewEventSource=r={}));t.PageviewEvent=class extends n{ev_type="pageview";payload;constructor(e,t){super(t),this.payload=e}};t.ActionEvent=class extends n{ev_type="action";payload;constructor(e,t){super(t),this.payload=e}};t.PerformanceEvent=class extends n{ev_type="performance";payload;constructor(e,t){super(t),this.payload=e}};t.PerformanceLongTaskEvent=class extends n{ev_type="performance_longtask";payload;constructor(e,t){super(t),this.payload=e}};t.PerformanceTimingEvent=class extends n{ev_type="performance_timing";payload;constructor(e,t){super(t),this.payload=e}};t.ResourceErrorEvent=class extends n{ev_type="resource_error";payload;constructor(e,t){super(t),this.payload=e}};t.ResourceEvent=class extends n{ev_type="resource";payload;constructor(e,t){super(t),this.payload=e}};t.SriEvent=class extends n{ev_type="sri";payload;constructor(e,t){super(t),this.payload=e}};t.BlankEvent=class extends n{ev_type="blank_screen";payload;constructor(e,t){super(t),this.payload=e}};t.HeatmapEvent=class extends n{ev_type="heatmap";payload;constructor(e,t){super(t),this.payload=e}};t.SessionEvent=class extends n{ev_type="session";payload;constructor(e,t){super(t),this.payload=e}}},7010:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSlardarClient=t.getDefaultContext=t.createDefaultSlardarClient=void 0;const r=n(9848);Object.defineProperty(t,"createSlardarClient",{enumerable:!0,get:function(){return r.createSlardarClient}});const i=n(2650);t.createDefaultSlardarClient=function(e,t,n){const{extension_version:i}=t||{};return(0,r.createDefaultSlardarClient)({release:i,...e},{...t},n)},t.getDefaultContext=function(){return{...(0,i.getDefaultContext)(),ide_environment_type:"webview"}}},4131:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Reporter=void 0;const r=n(7512),i=n(1768);class o extends i.Disposable{_client;_isDev;_pageId;constructor(e,t=!1,n){super(),this._client=e,this._pageId=n,this._isDev=t}report(e){this._client.report(e)}sendEvent(e){this._client.sendEvent?.(e)}captureException(e,t){this._isDev||(this._pageId&&this.sendPageview(this._pageId,r.PageviewEventSource.PathChange),this._client.report(new r.JSErrorEvent({error:{message:e.message,stack:e.stack,name:e.name},extra:t,breadcrumbs:[]})))}sendPageview(e,t){this._client.report(new r.PageviewEvent({pid:e,source:t??r.PageviewEventSource.UserSet}))}emitStore(e,t,n={}){this._client.sendEvent?.({name:e,metrics:{value:t},categories:n})}emitTimer(e,t,n={}){this._client.sendEvent?.({name:e,metrics:{value:t},categories:n})}emitCounter(e,t={}){this._client.sendEvent?.({name:e,metrics:{value:1},categories:t})}flush(){this._client.getSender()?.flush()}dispose(){this.flush(),super.dispose()}}t.Reporter=o},4499:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTeaClient=t.createDefaultTeaClient=void 0;const r=n(535);Object.defineProperty(t,"createTeaClient",{enumerable:!0,get:function(){return r.createTeaClient}});const i=n(2650),o=n(7569);t.createDefaultTeaClient=function(e){const t=(0,r.createDefaultTeaClient)(e);return window.env?t.config({user:{user_unique_id:(0,i.getUserId)(window.env||{}),user_is_login:!0},header:{app_id:t.getAppID(),region:(0,i.getVRegion)(window.env||{})},custom:{env:(0,i.getEnv)(window.env||{}),user_id:(0,i.getUserId)(window.env||{}),isA0:(0,i.getIsA0)(window.env||{})}}):t.config({header:{app_id:t.getAppID(),region:(0,i.getVRegionByRegion)(e?.region||(0,o.getDefaultRegion)())}}),t}},9754:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tenant=t.ApiServerMap=t.RegionMap=t.Region=void 0;var r=n(2650);Object.defineProperty(t,"Region",{enumerable:!0,get:function(){return r.Region}}),Object.defineProperty(t,"RegionMap",{enumerable:!0,get:function(){return r.RegionMap}}),Object.defineProperty(t,"ApiServerMap",{enumerable:!0,get:function(){return r.ApiServerMap}}),Object.defineProperty(t,"Tenant",{enumerable:!0,get:function(){return r.Tenant}})},2650:(e,t)=>{"use strict";var n;t.Region=void 0,(n=t.Region||(t.Region={})).CN="CN",n.BOE="BOE",n.SG="SG",n.US="US",n.BOEI18N="BOEI18N";const r={[t.Region.CN]:"cn",[t.Region.BOE]:"cn",[t.Region.SG]:"sg",[t.Region.US]:"us",[t.Region.BOEI18N]:"sg"};var i;t.VRegion=void 0,(i=t.VRegion||(t.VRegion={})).USEast="US-East",i.SG="Singapore-Central",i.BOEI18N="US-BOE",i.BOE="China-BOE",i.CN="China-North";const o={[t.Region.US]:t.VRegion.USEast,[t.Region.SG]:t.VRegion.SG,[t.Region.BOEI18N]:t.VRegion.BOEI18N,[t.Region.BOE]:t.VRegion.BOE,[t.Region.CN]:t.VRegion.CN},s={[t.Region.CN]:"https://api.marscode.cn",[t.Region.BOE]:"https://bytesec.bytedance.com",[t.Region.SG]:"https://api-sg-central.marscode.com",[t.Region.US]:"https://api-sg-central.marscode.com",[t.Region.BOEI18N]:"https://bytesec.byteintlapi.com"};var a,c;function u(e){const{CLOUDIDE_PROVIDER_REGION:n="",IDE_REGION:r=""}=e;switch(n){case"sg":return t.Region.SG;case"us":return t.Region.US;case"cn":return t.Region.CN}switch(r){case"sg":return t.Region.SG;case"us":return t.Region.US;default:return t.Region.CN}}function l(){return"undefined"!=typeof process?process.env||{}:"undefined"!=typeof window&&window.env||{}}function d(e){const{CLOUDIDE_WORKSPACE_ID:t="",IDE_ENVIRONMENT_NAME:n="",CLOUDIDE_CONFIG_RUNTIME:r="",IDE_LANG:i="",CLOUDIDE_USERID:o="",IDE_OWNER:s="",CLOUDIDE_RUNTIME_DEBUG_PORT:a="",VSCODE_CWD:c="",CLOUDIDE_PROVIDER_REGION:u="",CLOUDIDE_TENANT_NAME:l="",CLOUDIDE_IDE_SERVER_TYPE:d="",CLOUDIDE_ENABLE_DOUBLE_CONTAINER:f="",CLOUDIDE_CONTROL_PLANE:h="",CLOUDIDE_FEATURE_ENV:p="",CLOUDIDE_CONFIG_LANGUAGE:g="",CLOUDIDE_PROJECT_TEMPLATE_SLUG:_="",CLOUDIDE_PROJECT_REPO_SPECIFIED:m=""}=e;return{workspace_id:t,ide_workspace_id:t,ide_project_template_slug:_,ide_project_repo_specified:`${m}`||"false",ide_environment_name:n,ide_config_runtime:r,ide_lang:i,ide_template_language:g,ide_user_id:o,ide_owner:s,ide_runtime_debug_port:a,ide_icube_version:c.split("@")[1]||"",ide_provider_region:u,ide_tenant_name:l,ide_server_type:d,ide_enable_double_container:f,ide_control_plane:h,x_env:p||"prod",ide_env:p}}function f(e){const{CLOUDIDE_CONTROL_PLANE:n="",CLOUDIDE_PROVIDER_REGION:r="",IDE_REGION:i="",CLOUDIDE_APISERVER_BASE_URL:o=""}=e;switch(n){case"i18n":return"us"===r?t.VRegion.USEast:t.VRegion.SG;case"boei18n":return t.VRegion.BOEI18N;case"boe":return t.VRegion.BOE;case"cn":return t.VRegion.CN;case"sg":return t.VRegion.SG}switch(i){case"sg":return t.VRegion.SG;case"us":return t.VRegion.USEast;default:return o?.includes("boe")?t.VRegion.BOE:t.VRegion.CN}}function h(e){const{CLOUDIDE_IDE_SERVER_TYPE:t=""}=e;return`${"icube_a0"===t}`}t.Tenant=void 0,(a=t.Tenant||(t.Tenant={})).BYTEDANCE="bytedance",a.PUBLIC="public",t.Client=void 0,(c=t.Client||(t.Client={})).Native="native",c.Cloud="cloud",t.ApiServerMap=s,t.RegionMap=r,t.VRegionMap=o,t.getClient=function(){return"undefined"==typeof window?process.versions.electron?t.Client.Native:t.Client.Cloud:window.navigator.userAgent.includes("Electron")?t.Client.Native:t.Client.Cloud},t.getDefaultContext=function(){const e=l();return{...d(e),ide_environment_type:"extension",region:f(e),isA0:h(e)}},t.getDefaultContextFromEnv=d,t.getDefaultRegion=function(){return u(l())},t.getEnv=function(e){const{CLOUDIDE_FEATURE_ENV:t="prod"}=e;return t},t.getEnviromentVariables=l,t.getIsA0=h,t.getIsDev=function(e){const{NODE_ENV:t=""}=e;return"development"===t},t.getRegion=u,t.getTenant=function(e={}){const{CLOUDIDE_TENANT_NAME:n}=e;return"bytedance"===n?t.Tenant.BYTEDANCE:t.Tenant.PUBLIC},t.getUserId=function(e){const{CLOUDIDE_USERID:t=""}=e;return t},t.getVRegion=f,t.getVRegionByRegion=function(e){return o[e]}},2640:(e,t)=>{"use strict";var n,r={},i=(n||(n=1,function(e){var t;e.Region=void 0,(t=e.Region||(e.Region={})).CN="CN",t.BOE="BOE",t.SG="SG",t.US="US",t.BOEI18N="BOEI18N";const n={[e.Region.CN]:"cn",[e.Region.BOE]:"cn",[e.Region.SG]:"sg",[e.Region.US]:"us",[e.Region.BOEI18N]:"sg"};var r;e.VRegion=void 0,(r=e.VRegion||(e.VRegion={})).USEast="US-East",r.SG="Singapore-Central",r.BOEI18N="US-BOE",r.BOE="China-BOE",r.CN="China-North";const i={[e.Region.US]:e.VRegion.USEast,[e.Region.SG]:e.VRegion.SG,[e.Region.BOEI18N]:e.VRegion.BOEI18N,[e.Region.BOE]:e.VRegion.BOE,[e.Region.CN]:e.VRegion.CN},o={[e.Region.CN]:"https://api.marscode.cn",[e.Region.BOE]:"https://bytesec.bytedance.com",[e.Region.SG]:"https://api-sg-central.marscode.com",[e.Region.US]:"https://api-sg-central.marscode.com",[e.Region.BOEI18N]:"https://bytesec.byteintlapi.com"};var s,a;function c(t){const{CLOUDIDE_PROVIDER_REGION:n="",IDE_REGION:r=""}=t;switch(n){case"sg":return e.Region.SG;case"us":return e.Region.US;case"cn":return e.Region.CN}switch(r){case"sg":return e.Region.SG;case"us":return e.Region.US;default:return e.Region.CN}}function u(){return"undefined"!=typeof process?process.env||{}:"undefined"!=typeof window&&window.env||{}}function l(e){const{CLOUDIDE_WORKSPACE_ID:t="",IDE_ENVIRONMENT_NAME:n="",CLOUDIDE_CONFIG_RUNTIME:r="",IDE_LANG:i="",CLOUDIDE_USERID:o="",IDE_OWNER:s="",CLOUDIDE_RUNTIME_DEBUG_PORT:a="",VSCODE_CWD:c="",CLOUDIDE_PROVIDER_REGION:u="",CLOUDIDE_TENANT_NAME:l="",CLOUDIDE_IDE_SERVER_TYPE:d="",CLOUDIDE_ENABLE_DOUBLE_CONTAINER:f="",CLOUDIDE_CONTROL_PLANE:h="",CLOUDIDE_FEATURE_ENV:p="",CLOUDIDE_CONFIG_LANGUAGE:g="",CLOUDIDE_PROJECT_TEMPLATE_SLUG:_="",CLOUDIDE_PROJECT_REPO_SPECIFIED:m=""}=e;return{workspace_id:t,ide_workspace_id:t,ide_project_template_slug:_,ide_project_repo_specified:`${m}`||"false",ide_environment_name:n,ide_config_runtime:r,ide_lang:i,ide_template_language:g,ide_user_id:o,ide_owner:s,ide_runtime_debug_port:a,ide_icube_version:c.split("@")[1]||"",ide_provider_region:u,ide_tenant_name:l,ide_server_type:d,ide_enable_double_container:f,ide_control_plane:h,x_env:p||"prod",ide_env:p}}function d(t){const{CLOUDIDE_CONTROL_PLANE:n="",CLOUDIDE_PROVIDER_REGION:r="",IDE_REGION:i="",CLOUDIDE_APISERVER_BASE_URL:o=""}=t;switch(n){case"i18n":return"us"===r?e.VRegion.USEast:e.VRegion.SG;case"boei18n":return e.VRegion.BOEI18N;case"boe":return e.VRegion.BOE;case"cn":return e.VRegion.CN;case"sg":return e.VRegion.SG}switch(i){case"sg":return e.VRegion.SG;case"us":return e.VRegion.USEast;default:return o?.includes("boe")?e.VRegion.BOE:e.VRegion.CN}}function f(e){const{CLOUDIDE_IDE_SERVER_TYPE:t=""}=e;return`${"icube_a0"===t}`}e.Tenant=void 0,(s=e.Tenant||(e.Tenant={})).BYTEDANCE="bytedance",s.PUBLIC="public",e.Client=void 0,(a=e.Client||(e.Client={})).Native="native",a.Cloud="cloud",e.ApiServerMap=o,e.RegionMap=n,e.VRegionMap=i,e.getClient=function(){return"undefined"==typeof window?process.versions.electron?e.Client.Native:e.Client.Cloud:window.navigator.userAgent.includes("Electron")?e.Client.Native:e.Client.Cloud},e.getDefaultContext=function(){const e=u();return{...l(e),ide_environment_type:"extension",region:d(e),isA0:f(e)}},e.getDefaultContextFromEnv=l,e.getDefaultRegion=function(){return c(u())},e.getEnv=function(e){const{CLOUDIDE_FEATURE_ENV:t="prod"}=e;return t},e.getEnviromentVariables=u,e.getIsA0=f,e.getIsDev=function(e){const{NODE_ENV:t=""}=e;return"development"===t},e.getRegion=c,e.getTenant=function(t={}){const{CLOUDIDE_TENANT_NAME:n}=t;return"bytedance"===n?e.Tenant.BYTEDANCE:e.Tenant.PUBLIC},e.getUserId=function(e){const{CLOUDIDE_USERID:t=""}=e;return t},e.getVRegion=d,e.getVRegionByRegion=function(e){return i[e]}}(r)),r);const o={[i.Region.CN]:"marscode_native_ide_cn",[i.Region.SG]:"marscode_nativeide_us",[i.Region.US]:"marscode_nativeide_us",[i.Region.BOE]:"marscode_native_ide_cn",[i.Region.BOEI18N]:"marscode_nativeide_us"},s={[i.Region.CN]:"stable_ide_cn",[i.Region.SG]:"stable_ide_us",[i.Region.US]:"stable_ide_us",[i.Region.BOE]:"stable_ide_cn",[i.Region.BOEI18N]:"stable_ide_us"},a={[i.Client.Native]:o,[i.Client.Cloud]:s};t.distExports=i,t.getEnv=function(e){const{CLOUDIDE_FEATURE_ENV:t}=e;return t||"prod"},t.getSlardarBid=function(e={}){const t=e?.region||i.getDefaultRegion(),n=i.getClient();return{bid:a?.[n]?.[t]||"marscode_native_ide_cn"}},t.getUserId=function(e){const{CLOUDIDE_USERID:t=""}=e;return t||"unknown"}},9848:(e,t,n)=>{"use strict";var r=n(2640),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)};function o(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function s(e,t,n){if(2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var a=function(e){return JSON.stringify({ev_type:"batch",list:e})},c=["init","start","config","beforeDestroy","provide","beforeReport","report","beforeBuild","build","beforeSend","send","beforeConfig"],u=function(){return{}};function l(e){return e}function d(e){return"object"==typeof e&&null!==e}var f=Object.prototype;function h(e){if(d(e)){if("function"==typeof Object.getPrototypeOf){var t=Object.getPrototypeOf(e);return t===f||null===t}return"[object Object]"===f.toString.call(e)}return!1}function p(e){return"[object Array]"===f.toString.call(e)}function g(e){return"function"==typeof e}function _(e){return"number"==typeof e}function m(e){return"string"==typeof e}function v(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function y(e,t){var n=i({},e);for(var r in t)v(t,r)&&void 0!==t[r]&&(d(t[r])&&h(t[r])?n[r]=y(d(e[r])?e[r]:{},t[r]):p(t[r])&&p(e[r])?n[r]=b(e[r],t[r]):n[r]=t[r]);return n}function b(e,t){var n=p(e)?e:[],r=p(t)?t:[];return Array.prototype.concat.call(n,r).map((function(e){return e instanceof RegExp?e:d(e)&&h(e)?y({},e):p(e)?b([],e):e}))}function E(e,t){if(!p(e))return!1;if(0===e.length)return!1;for(var n=0;n<e.length;){if(e[n]===t)return!0;n++}return!1}var w=function(e,t){if(!p(e))return e;var n=e.indexOf(t);if(n>=0){var r=e.slice();return r.splice(n,1),r}return e},S=function(e,t,n){for(var r,i=o(t.split(".")),s=i[0],a=i.slice(1);e&&a.length>0;)e=e[s],s=(r=o(a))[0],a=r.slice(1);if(e)return n(e,s)};var T=function(e,t){var n=function(e){return p(e)&&e.length?function(e){for(var t=[],n=e.length,r=0;r<n;r++){var i=e[r];m(i)?t.push(i.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")):i&&i.source&&t.push(i.source)}return new RegExp(t.join("|"),"i")}(e):null}(e||[]);return!!n&&n.test(t)};function C(e){try{return m(e)?e:JSON.stringify(e)}catch(e){return"[FAILED_TO_STRINGIFY]:"+String(e)}}var O=function(e,t,n,r){return void 0===r&&(r=!0),function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];if(!e)return u;var c=e[t],l=n.apply(void 0,s([c],o(i),!1)),d=l;return g(d)&&r&&(d=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return l.apply(this,e)}catch(t){return g(c)&&c.apply(this,e)}}),e[t]=d,function(n){n||(d===e[t]?e[t]=c:l=c)}}},A=function(e,t,n){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(!e)return u;var a=e[t],c=n.apply(void 0,s([a],o(r),!1)),l=c;return g(l)&&(l=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return c.apply(this,e)}),e[t]=l,function(){l===e[t]?e[t]=a:c=a}}},I=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},R=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},D=function(e){return Math.random()<Number(e)},x=function(e,t){return e<Number(t)},M=function(e){return function(t){for(var n=t,r=0;r<e.length&&n;r++)try{n=e[r](n)}catch(e){I(e)}return n}};function P(){var e=function(){for(var e=new Array(16),t=0,n=0;n<16;n++)3&n||(t=4294967296*Math.random()),e[n]=t>>>((3&n)<<3)&255;return e}();return e[6]=15&e[6]|64,e[8]=63&e[8]|128,function(e){for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);var r=0,i=t;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}(e)}var N=function(e,t){var n=[];try{n=t.reduce((function(t,n){try{var r=n(e);"function"==typeof r&&t.push(r)}catch(e){}return t}),[])}catch(e){}return function(e){return N(e,n)}},k=function(e,t,n){var r=function(e){void 0===e&&(e=3e5);var t,n=[],r=[],i=!1,o=function(e,t,n){var r=0;return-1===n?u:function(){if(e())return r&&clearTimeout(r),void(r=0);0===r&&(r=setTimeout(t,n))}}((function(){return!!n.length}),(function(){i=!0,t&&t[0](),r.forEach((function(e){return e()})),r.length=0,t=void 0}),e),s=function(e){n=w(n,e),!i&&o()};return{next:function(e){return N(e,n)},complete:function(e){r.push(e)},attach:function(e,n){t=[e,n]},subscribe:function(e){if(i)throw new Error("Observer is closed");return n.push(e),t&&t[1]&&t[1](e),o(),function(){return s(e)}},unsubscribe:s}}(n);try{e(r.next,r.attach),t&&r.complete(t)}catch(e){}return[r.subscribe,r.unsubscribe]},L=function(e,t){var n=o(e,1)[0];return function(e,r){var i=n((function(n){var r;return(r=t,function(e){for(var t=!0,n=0;n<r.length&&t;n++)try{t=r[n](e)}catch(e){I(e)}return t})(n)?e(n):u}));r((function(){i()}))}},j=function(e,t,n,r){return e.destroyAgent.set(t,n,r)};function z(e){var t,n,r=e.builder,i=e.createSender,a=e.createDefaultConfig,u=e.createConfigManager,l=e.userConfigNormalizer,f=e.initConfigNormalizer,h=e.validateInitConfig,p={};c.forEach((function(e){return p[e]=[]}));var g=!1,_=!1,m=!1,v=[],y=[],b=function(){var e=!1,t={},n=function(e){e.length&&e.forEach((function(e){try{e()}catch(e){}})),e.length=0},r=function(e){t[e]&&t[e].forEach((function(e){n(e[1])})),t[e]=void 0};return{set:function(r,i,o){t[r]?t[r].push([i,o]):t[r]=[[i,o]],e&&n(o)},has:function(e){return!!t[e]},remove:r,removeByEvType:function(e){Object.keys(t).forEach((function(r){t[r]&&t[r].forEach((function(t){t[0]===e&&n(t[1])}))}))},clear:function(){e=!0,Object.keys(t).forEach((function(e){r(e)}))}}}(),S={getBuilder:function(){return r},getSender:function(){return t},getPreStartQueue:function(){return v},init:function(e){if(g)R("already inited");else{if(!(e&&d(e)&&h(e)))throw new Error("invalid InitConfig, init failed");var r=a(e);if(!r)throw new Error("defaultConfig missing");var o=f(e);if((n=u(r)).setConfig(o),n.onChange((function(){T("config")})),!(t=i(n.getConfig())))throw new Error("sender missing");g=!0,T("init",!0)}},set:function(e){g&&e&&d(e)&&(T("beforeConfig",!1,e),null==n||n.setConfig(e))},config:function(e){if(g)return e&&d(e)&&(T("beforeConfig",!1,e),null==n||n.setConfig(l(e))),null==n?void 0:n.getConfig()},provide:function(e,t){E(y,e)?R("cannot provide "+e+", reserved"):(S[e]=t,T("provide",!1,e))},start:function(){var e=this;g&&(_||null==n||n.onReady((function(){_=!0,T("start",!0),v.forEach((function(t){return e.build(t)})),v.length=0})))},report:function(e){if(e){var t=M(p.beforeReport)(e);if(t){var n=M(p.report)(t);n&&(_?this.build(n):v.push(n))}}},build:function(e){if(_){var t=M(p.beforeBuild)(e);if(t){var n=r.build(t);if(n){var i=M(p.build)(n);i&&this.send(i)}}}},send:function(e){if(_){var n=M(p.beforeSend)(e);n&&(t.send(n),T("send",!1,n))}},destroy:function(){b.clear(),m=!0,v.length=0,T("beforeDestroy",!0)},on:function(e,t){if("init"===e&&g||"start"===e&&_||"beforeDestroy"===e&&m)try{t()}catch(e){}else p[e]&&p[e].push(t)},off:function(e,t){p[e]&&(p[e]=w(p[e],t))},destroyAgent:b};return y=Object.keys(S),S;function T(e,t){void 0===t&&(t=!1);for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];p[e].forEach((function(e){try{e.apply(void 0,s([],o(n),!1))}catch(e){}})),t&&(p[e].length=0)}}var F=function(e,t,n){var r={},i=function(){for(var n,a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var u=a[0];if(u){var l=u.split(".")[0];if(!(l in i)){var d=r[l]||[],f=null!==(n=null==t?void 0:t(e))&&void 0!==n?n:{};return d.push(s([f],o(a),!1)),void(r[l]=d)}return function(e,t,n){return S(e,t,(function(e,t){if(e&&t in e&&g(e[t]))try{return e[t].apply(e,n)}catch(e){return}}))}(i,u,[].slice.call(a,1))}};for(var a in O(e,"provide",(function(t){return function(n,r){i[n]=r,t.call(e,n,r)}}))(),e)Object.prototype.hasOwnProperty.call(e,a)&&(i[a]=e[a]);return e.on("provide",(function(t){r[t]&&(r[t].forEach((function(t){var r=o(t),i=r[0],s=r.slice(1);null==n||n(e,i,s)})),r[t]=null)})),i};function B(e,t){return e.initSubject(t)}function U(e,t,n){var r=o(t,2),i=r[0],s=r[1],a=e.privateSubject||{};return a[i]||(a[i]=k(s,(function(){a[i]=void 0}),n)),a[i]}var G=function(){return Date.now()};function q(){if("object"==typeof window&&d(window))return window}function V(){if("object"==typeof document&&d(document))return document}function $(){return q()&&window.location}function H(e){var t=V();if(!t||!e)return"";var n=t.createElement("a");return n.href=e,n.href}function W(e){var t=V();if(!t||!e)return{url:e,protocol:"",domain:"",query:"",path:"",hash:""};var n=t.createElement("a");n.href=e;var r=n.pathname||"/";return"/"!==r[0]&&(r="/"+r),{url:n.href,protocol:n.protocol.slice(0,-1),domain:n.hostname,query:n.search.substring(1),path:r,hash:n.hash}}function K(){var e=q()&&$();return e?e.href:""}var J=function(e){var t,n={pid:(t=e.config()).pid,view_id:t.viewId,url:K()};return n.context=e.context?e.context.toString():{},n},Y=function(e,t){var n=J(e);return n.timestamp=G(),function(t){e.report(i(i({},t),{overrides:n}))}},X=function(e){return function(t,n){var r=J(e);n(u,(function(e){r&&e(r)}))}},Z=function(e){if(e)return e.__SLARDAR_REGISTRY__||(e.__SLARDAR_REGISTRY__={Slardar:{plugins:[],errors:[],subject:{}}}),e.__SLARDAR_REGISTRY__.Slardar},Q=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Z(q());n&&(n.errors||(n.errors=[]),n.errors.push(e))},ee=function(e){var t={url:K(),timestamp:G()},n=e.config();return(null==n?void 0:n.pid)&&(t.pid=n.pid),(null==e?void 0:e.context)&&(t.context=e.context.toString()),t},te=function(e,t){return function(n){var r=function(e){return e.overrides=t,e};e.on("report",r),n(),e.off("report",r)}},ne=function(e,t,n,r){return void 0===r&&(r=!1),e.addEventListener(t,n,r),function(){e.removeEventListener(t,n,r)}},re=function(e,t,n,r){return e.addEventListener(t,n,r),function(){e.removeEventListener(t,n,r)}},ie=function(e){var t=!1;return[function(n){t||(t=!0,e&&e(n))}]},oe=function(e,t){var n,r=V();if(r){var i=r.createElement("script");i.src=e,i.crossOrigin="anonymous",i.onload=t,null===(n=r.head)||void 0===n||n.appendChild(i)}},se=function(e,t){return d(e)?i(i({},t),e):!!e&&t},ae=function(){return!!btoa&&!!atob},ce=function(e,t,n){var r;if(!(n<=0))try{localStorage.setItem(e,(r=JSON.stringify(i(i({},t),{expires:G()+n})),ae()?btoa(encodeURI(r)):r))}catch(e){}},ue=function(e){return!1===e?0:!0!==e&&void 0!==e&&_(e)?e:7776e6},le=function(){var e=new RegExp("\\/monitor_web\\/collect|\\/monitor_browser\\/collect\\/batch","i");return function(t){return e.test(t)}},de=function(e){return function(){for(var t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t=o(n,2),this._method=t[0],this._url=t[1],e.apply(this,n)}},fe=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._reqHeaders=this._reqHeaders||{};var r=o(t,2),i=r[0],s=r[1];return this._reqHeaders[i]=s,e&&e.apply(this,t)}},he=function(e,t){var n=le();return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return this._start=G(),this._data=null==r?void 0:r[0],n(this._url)||function(e,t){return A(e,"onreadystatechange",(function(n){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return 4===this.readyState&&t(e),n&&n.apply(this,r)}}))}(this,t([this._method,this._url,this._start,this]))(),e.apply(this,r)}},pe=function(e){return function(t,n){if(e){var r=[];r.push(A(e,"open",de)()),r.push(A(e,"setRequestHeader",fe)()),r.push(A(e,"send",he)(t)),n((function(){r.forEach((function(e){return e()}))}))}}},ge=function(e,t){return function(n,r){void 0===r&&(r={});var i=t([n,r]),o=e(n,r);return o.then((function(e){i(e)}),(function(){i(void 0)})),o}},_e=["fetch_0",function(e,t){var n=q();if(n&&fetch){var r=[];r.push(A(n,"fetch",ge)(e)),t((function(){r.forEach((function(e){return e()}))}))}}],me=["resource"],ve=["resource_0",function(e,t){var n=function(){if(q()&&g(window.PerformanceObserver))return window.PerformanceObserver}();if(n){var r=le();t(function(e,t,n){var r=o(function(e,t,n){var r=e&&new e((function(e,n){e.getEntries&&e.getEntries().forEach((function(e,r,i){return t(e,r,i,n)}))}));return[function(t){if(!e||!r)return n;try{r.observe({entryTypes:t})}catch(e){return n}},function(t,i){if(!e||!r)return n;try{var o={type:t,buffered:!0};void 0!==i&&(o.durationThreshold=i),r.observe(o)}catch(e){return n}r.observe({type:t,buffered:!1})},function(){return r&&r.disconnect()}]}(e,t),3),i=r[0],s=r[2];return i(n),s}(n,(function(t){!r(t.name)&&e(t)}),me))}}],ye="pageview",be="session",Ee="js_error",we="http",Se="custom",Te="action",Ce={sampleRate:1,origins:[]},Oe=function(){var e=window&&(window.crypto||window.msCrypto);if(void 0!==e&&e.getRandomValues){var t=new Uint16Array(8);e.getRandomValues(t);var n=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t};return n(t[0])+n(t[1])+n(t[2])+n(t[3])+n(t[4])+n(t[5])+n(t[6])+n(t[7])}return"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".replace(/[x]/g,(function(){return(16*Math.random()|0).toString(16)}))},Ae=function(e){var t=se(e,Ce);if(t&&D(t.sampleRate))return function(e,n){var r=t.origins;r.length&&T(r,e)&&n("traceparent","03-"+Oe()+"-"+Oe().substring(16)+"-01")}},Ie=new RegExp("(cookie|auth|jwt|token|key|ticket|secret|credential|session|password)","i"),Re=new RegExp("(bearer|session)","i"),De=function(e,t){return!e||!t||Ie.test(e)||Re.test(t)},xe=function(e,t){try{if(t){var n=e.request.url;e.request.url=t(n),e.extra=i(i({},e.extra),{original_url:n})}}catch(e){}},Me=function(e,t,n){var r=o(t,2),i=r[0],s=r[1],a=n.setTraceHeader,c=n.ignoreUrls,l=n.setContextAtReq,d=n.extractUrl;e.push(i[0]((function(e){var t=o(e,4);t[0];var r=t[1];t[2];var i=t[3];if(!r)return u;var f=H(r);if(T(c,f))return u;a&&a(f,(function(e,t){return i.setRequestHeader(e,t)}));var h=l(),p=void 0,g=s()[0]((function(e){f===e.name&&!p&&(p=e)}));return function(e){var t=Pe(e,n);setTimeout((function(){p&&(t.response.timing=p),xe(t,d),h&&h({ev_type:we,payload:t}),g()}),100)}})))},Pe=function(e,t){var n,r=e._method,i=e._reqHeaders,s=e._url,a=e._start,c=e._data,u={api:"xhr",request:{url:H(s),method:(r||"").toLowerCase(),headers:i&&(n=i,Object.keys(n).reduce((function(e,t){return!De(t,n[t])&&(e[t.toLowerCase()]=n[t]),e}),{})),timestamp:a},response:{status:e.status||0,is_custom_error:!1,timestamp:G()},duration:G()-a};"function"==typeof e.getAllResponseHeaders&&(u.response.headers=function(e){return m(e)&&e?e.split("\r\n").reduce((function(e,t){if(m(t)){var n=o(t.split(": "),2),r=n[0],i=n[1];!De(r,i)&&(e[r.toLowerCase()]=i)}return e}),{}):{}}(e.getAllResponseHeaders()));var l=u.response.status,d=t.collectBodyOnError,f=t.extraExtractor;try{var h=null==f?void 0:f(e.response,u,c);h&&(u.extra=h),h&&(u.response.is_custom_error=!0),d&&(h||l>=400)&&(u.request.body=c?""+c:void 0,u.response.body=e.response?""+e.response:void 0)}catch(e){}return u},Ne="ajax",ke={autoWrap:!0,setContextAtReq:function(){return l},ignoreUrls:[],collectBodyOnError:!1},Le=function(e,t,n){var r=o(t,2),i=r[0],s=r[1],a=n.setTraceHeader,c=n.ignoreUrls,l=n.setContextAtReq,d=n.extractUrl,f=window.Headers,h=window.Request;h&&f&&e.push(i[0]((function(e){var t=o(e,2),r=t[0],i=t[1],p=H(r instanceof h?r.url:r);if(!je(p)||T(c,p))return u;a&&a(p,(function(e,t){return Fe(e,t,r,i,h,f)}));var g=l(),_=G(),m=void 0,v=s()[0]((function(e){p===e.name&&!m&&(m=e)}));return function(e){var t,o,s=qe(r,i,e,h,f,n,_),a=(t=function(e){m&&(e.response.timing=m),xe(e,d),g&&g({ev_type:we,payload:e}),v()},o=!1,function(e){o||(o=!0,t(e))});setTimeout((function(){a(s)}),1e3)}})))},je=function(e){if(!m(e))return!1;var t=o(e.split(":"),2),n=t[0];return!t[1]||"http"===n||"https"===n},ze=function(e,t){return e instanceof t},Fe=function(e,t,n,r,o,s){var a;ze(n,o)?n.headers.set(e,t):r.headers instanceof s?r.headers.set(e,t):r.headers=i(i({},r.headers),((a={})[e]=t,a))},Be=function(e,t,n){var r=t&&t.method||"get";return ze(e,n)&&(r=e.method||r),r.toLowerCase()},Ue=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];try{return t.reduce((function(t,n){return new e(n||{}).forEach((function(e,n){return!De(n,e)&&(t[n]=e)})),t}),{})}catch(e){return{}}},Ge=function(e,t,n){return ze(e,n)?e.body:null==t?void 0:t.body},qe=function(e,t,n,r,i,o,s){var a={api:"fetch",request:{method:Be(e,t,r),timestamp:s,url:H(e instanceof r?e.url:e),headers:Ue(i,e.headers,t.headers)},response:{status:n&&n.status||0,is_custom_error:!1,timestamp:G()},duration:G()-s},c=o.collectBodyOnError,l=o.extraExtractor,d=function(){var n;c&&(a.request.body=null===(n=Ge(e,t,r))||void 0===n?void 0:n.toString())};if(n)try{var f=Ue(i,n.headers);a.response.headers=f;try{-1!==(f["content-type"]||"").indexOf("application/json")&&l&&n.clone().json().then((function(n){var i,o=l(n,a,null===(i=Ge(e,t,r))||void 0===i?void 0:i.toString());o&&(a.extra=o,a.response.is_custom_error=!0,d())})).catch(u)}catch(e){}n.status>=400&&d()}catch(e){}else d();return a},Ve="fetch",$e={autoWrap:!0,setContextAtReq:function(){return l},ignoreUrls:[],collectBodyOnError:!1},He=["name","message","stack","filename","lineno","colno"],We=function(e){var t,n,r;return function(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMError]":case"[object DOMException]":return!0;default:return e instanceof Error}}(e)?(r=He,t=(n=e)&&d(n)?r.reduce((function(e,t){return e[t]=n[t],e}),{}):n):(h(e)||"undefined"!=typeof Event&&function(e,t){try{return e instanceof t}catch(e){return!1}}(e,Event)||m(e))&&(t={message:C(e)}),t},Ke=function(e){return t=e,"[object ErrorEvent]"===Object.prototype.toString.call(t)?function(e){var t=We(e.error);if(!t)return t;var n=e.colno,r=e.lineno,i=e.filename;return n&&!t.colno&&(t.colno=String(n)),r&&!t.lineno&&(t.lineno=String(r)),i&&!t.filename&&(t.filename=i),t}(e):function(e){return"[object PromiseRejectionEvent]"===Object.prototype.toString.call(e)}(e)?function(e){var t;try{var n=void 0;if("reason"in e?n=e.reason:"detail"in e&&"reason"in e.detail&&(n=e.detail.reason),n){var r=We(n);return i(i({},r),{name:null!==(t=r&&r.name)&&void 0!==t?t:"UnhandledRejection"})}}catch(e){}}(e):We(e);var t},Je="jsError",Ye=function(e){return"hidden"===e.visibilityState},Xe=["hidden_3",function(e,t){var n=V(),r=q();if(n&&r){var i=function(t){e("pagehide"===t.type||Ye(n))},o=re(n,"visibilitychange",i,!0),s=ne(r,"pagehide",i,!0);t((function(){o(),s()}),(function(e){e(Ye(n))}))}}],Ze=["unload_0",function(e,t){var n=q();if(n){var r=o(ie(e),1)[0],i=function(){r()},s=[];["unload","beforeunload","pagehide"].forEach((function(e){s.push(ne(n,e,i,!1))})),t((function(){s.forEach((function(e){return e()}))}))}}],Qe=["hash_0",function(e,t){var n=q();if(n){var r=ne(n,"hashchange",(function(){return e(location.href)}),!0);t((function(){r()}))}}],et=["history_0",function(e,t){var n=q()&&window.history,r=q();if(n&&r){var i=[],o=function(){return e(location.href)},s=function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];try{e.apply(n,t)}finally{o()}}};i.push(O(n,"pushState",s)(),O(n,"replaceState",s)()),i.push(ne(r,"popstate",o,!0)),t((function(){i.forEach((function(e){return e()}))}))}}],tt=function(e){return nt(e,G())},nt=function(e,t){return e+"_"+t},rt=function(e){return"manual"===e},it="error_weight",ot="duration_apdex",st="perf_apdex",at=function(e,t){var n=e[0]+e[1]+e[2],r=e[0]/n;return e[2]/n>t.frustrating_threshold?2:r>t.satisfying_threshold||0===n?0:1},ct=function(e,t){return function(n,r){var i=n.payload;switch(n.ev_type){case"performance":var o=i.name;i.isSupport&&e(r[st],o,i.value);break;case Te:e(r[st],"action",i.duration||0);break;case Ee:t(r[it],0);break;case we:if(i.response.is_custom_error||i.response.status>=400)t(r[it],1);else{var s=i.response.timing;s&&e(r[ot],0,s.duration)}break;case"resource_error":t(r[it],2);break;case"blank_screen":t(r[it],3);break;case"resource":e(r[ot],1,i.duration);break;case"performance_longtask":i.longtasks.forEach((function(t){e(r[ot],2,t.duration)}))}}},ut=function(){var e,t,n=function(){e=[0,0,0],t=function(){var e;return(e={error_count:[0,0,0,0],duration_count:[0,0,0]})[st]={},e}()};return n(),[function(n,r,i){var o=n&&n[r];if(o&&!(i<=0)){var s=i<(o[0].threshold||0)?0:i>(o[1].threshold||0)?2:1;if(e[s]+=o[s].weight,"string"==typeof r){var a=nt(r,s),c=t[st][a];t[st][a]=(c||0)+1}else 2===s&&(t.duration_count[r]+=1)}},function(n,r){n&&(e[2]+=n[r],t.error_count[r]+=1)},function(){return[e,t]},n]},lt=function(e,t,n,r){var i,s,a=r.sendInit,c=r.initPid,u=r.routeMode,l=r.extractPid,d=r.onPidUpdate,f=rt(u)?function(){return""}:function(e){return function(t){var n;return"hash"===e?(null===(n=W(t).hash)||void 0===n?void 0:n.replace(/^#/,""))||"/":W(t).path}}(u),h=l||function(){},p=o(function(e,t,n,r){var i=n,o=t;return r&&r(t),[function(t,n,s){"user_set"!==t&&n!==i?(i=n,o=null!=s?s:i,r&&r(o),e(t,o)):"user_set"===t&&n!==o&&(o=n,r&&r(o),e(t,o))},function(){t&&e("init",t)}]}(function(e){return function(t,n){e(function(e,t){return{ev_type:ye,payload:{pid:t,source:e}}}(t,n))}}(e),c||function(e){var t;return null!==(t=h(e))&&void 0!==t?t:f(e)}(location.href),f(location.href),d),2),g=p[0],_=p[1];if(!rt(u)){var m=o((i=function(e,t){return g(e,f(t),h(t))},s="",[function(e,t){t!==s&&i(e,s=t)}]),1)[0];n.length&&n.forEach((function(e){return t.push(e[0]((function(e){return m(u,e)})))}))}return a&&_(),[g.bind(null,"user_set")]},dt="pageview",ft={sendInit:!0,routeMode:"history",apdex:2};function ht(e){return(null==e?void 0:e.effectiveType)||(null==e?void 0:e.type)||""}var pt=function(e,t){var n=e.common||{};return n.sample_rate=t,e.common=n,e},gt=function(e,t,n,r,i){return e?(o=i(r,t),function(){return o}):function(){return n(t)};var o},_t=function(e,t){try{return"rule"===t.type?function(e,t,n,r){var i=S(e,t,(function(e,t){return e[t]}));return void 0!==i&&function(e,t,n){switch(n){case"eq":return E(t,e);case"neq":return!E(t,e);case"gt":return e>t[0];case"gte":return e>=t[0];case"lt":return e<t[0];case"lte":return e<=t[0];case"regex":return Boolean(e.match(new RegExp(t.join("|"))));case"not_regex":return!e.match(new RegExp(t.join("|")));default:return!1}}(i,function(e,t){return e.map((function(e){switch(t){case"number":return Number(e);case"boolean":return"1"===e;default:return String(e)}}))}(r,"boolean"==typeof i?"bool":_(i)?"number":"string"),n)}(e,t.field,t.op,t.values):"and"===t.type?t.children.every((function(t){return _t(e,t)})):t.children.some((function(t){return _t(e,t)}))}catch(e){return Q(e),!1}},mt=function(e,t,n){var r=t.url,i=t.data,o=t.success,s=void 0===o?u:o,a=t.fail,c=void 0===a?u:a,l=t.getResponseText,d=void 0===l?u:l,f=t.withCredentials,h=void 0!==f&&f,p=new n;p.withCredentials=h,p.open(e,r,!0),p.setRequestHeader("Content-Type","application/json"),p.onload=function(){null==d||d(this.responseText);try{if(this.status>=400)c(new Error(this.responseText||this.statusText));else if(this.responseText){var e=JSON.parse(this.responseText);s(e)}else s({})}catch(e){c(e)}},p.onerror=function(){c(new Error("Network request failed"))},p.onabort=function(){c(new Error("Network request aborted"))},p.send(i)},vt=function(){var e=function(){if("function"==typeof XMLHttpRequest&&g(XMLHttpRequest))return XMLHttpRequest}();return e?{useBeacon:!0,get:function(t){mt("GET",t,e)},post:function(t){mt("POST",t,e)}}:{get:u,post:u}};function yt(e){var t=function(e){var t,n=e.transport,r=e.endpoint,i=e.size,o=void 0===i?10:i,s=e.wait,c=void 0===s?1e3:s,u=[],l=0;function d(){if(u.length){var e=this.getBatchData();n.post({url:r,data:e,fail:function(n){t&&t(n,e)}}),u=[]}}return{getSize:function(){return o},getWait:function(){return c},setSize:function(e){o=e},setWait:function(e){c=e},getEndpoint:function(){return r},setEndpoint:function(e){r=e},send:function(e){u.push(e),u.length>=o&&d.call(this),clearTimeout(l),l=setTimeout(d.bind(this),c)},flush:function(){clearTimeout(l),d.call(this)},getBatchData:function(){return u.length?a(u):""},clear:function(){clearTimeout(l),u=[]},fail:function(e){t=e}}}(e),n=t.send;return function(e){var t=q();if(t){var n=o(ie(e),1)[0];["unload","beforeunload","pagehide"].forEach((function(e){ne(t,e,n,!1)}))}}((function(){if(e.transport.useBeacon){var r=function(){var e=q();return e&&e.navigator.sendBeacon?{get:function(){},post:function(t,n){e.navigator.sendBeacon(t,n)}}:{get:u,post:u}}(),i=t.getBatchData();i&&(r.post(t.getEndpoint(),i),t.clear()),t.send=function(e){r.post(t.getEndpoint(),a([e]))},function(e){var t=V(),n=q();if(t&&n){var r=u;r=re(t,"visibilitychange",(function(){"visible"===t.visibilityState&&(e(),r())}),!0)}}((function(){t.send=n}))}else t.flush()})),t}var bt="1.14.1",Et="/monitor_web/settings/browser-settings",wt="/monitor_browser/collect/batch/",St=["/log/sentry/",wt,Et],Tt="session",Ct=["blankScreen","action"],Ot={sample_rate:1,include_users:[],sample_granularity:Tt,rules:{}};var At=function(e,t,n,r){void 0===r&&(r=xt);var i=t.config(),o=i.plugins,s=i.pluginBundle,a=e.filter((function(e){return o[e]&&!t.destroyAgent.has(e)})),c=function(){return a.forEach((function(e){return Mt(t,e,n)}))};a.every((function(e){return Nt(e,n)}))?c():r(t,{name:s.name},c)},It=function(e,t,n,r){void 0===r&&(r=xt);var i=t.config().plugins;e.filter((function(e){return i[e]&&!t.destroyAgent.has(e)})).forEach((function(e){Nt(e,n)?Mt(t,e,n):r(t,{name:e,config:i[e]},(function(){return Mt(t,e,n)}))}))},Rt=function(e){return function(t,n){var r,o=e.config().pluginBundle;e.destroyAgent.has(t)&&e.destroyAgent.remove(t),void 0!==n&&e.set({plugins:i(i({},e.config().plugins),(r={},r[t]=n,r))}),o&&~o.plugins.indexOf(t)?At([t],e):It([t],e)}};function Dt(e,t,n){void 0===n&&(n=xt);var r=e.config().pluginBundle,i=r?r.plugins:[];At(i,e,t,n),It(Ct,e,t,n),e.provide("reloadPlugin",Rt(e))}function xt(e,t,n,r){var i=t.name,o=t.config;void 0===r&&(r=oe);var s=function(e,t,n){var r;return null!==(r=null==n?void 0:n.path)&&void 0!==r?r:e.config().pluginPathPrefix+"/"+(t.replace(/([a-z])([A-Z])/g,(function(e,t,n){return t+"-"+n.toLowerCase()}))+".")+bt+".js"}(e,i,o);r(s,(function(){n()}))}function Mt(e,t,n){if(void 0===n&&(n=Z(q())),n){var r=Pt(n,t);if(r)try{if(e.destroyAgent.has(t))return;r.apply(e)}catch(e){Q(e),R("[loader].applyPlugin failed",t,e)}else R("[loader].applyPlugin not found",t)}}function Pt(e,t){return e.plugins.filter((function(e){return e.name===t&&e.version===bt}))[0]}function Nt(e,t){return void 0===t&&(t=Z(q())),!(!t||!t.plugins||!Pt(t,e))}function kt(e,t,n){void 0===n&&(n=Z(q())),n&&n.plugins&&(Pt(n,e)||n.plugins.push({name:e,version:bt,apply:t}))}function Lt(e){var t,n;try{for(var r=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(["userId","deviceId","sessionId","env"]),i=r.next();!i.done;i=r.next()){var o=i.value;e[o]||delete e[o]}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e}function jt(e){var t=e.plugins||{};for(var n in t)t[n]&&!d(t[n])&&(t[n]={});return Lt(i(i({},e),{plugins:t}))}function zt(e){return d(e)&&"bid"in e}function Ft(e){return Lt(i({},e))}var Bt=function(e,t){return void 0===t&&(t=Et),(e&&e.indexOf("//")>=0?"":"https://")+e+t},Ut=function(e){return"SLARDAR"+e},Gt=function(e,t){void 0===e&&(e="");var n={userId:P(),deviceId:P()};if(t<=0)return n;var r=Ut(e);!function(e,t){try{var n=localStorage.getItem(e);if(!n||!ae()||"{"!==n[0])return;ce(e,JSON.parse(n),t)}catch(e){}}(r,t);var i=function(e){try{var t=localStorage.getItem(e),n=t;t&&"string"==typeof t&&(n=JSON.parse((s=t,ae()?decodeURI(atob(s)):s)));var r=n,i=r.expires,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(r,["expires"]);return i>=G()?o:void 0}catch(e){return}var s}(r);return{userId:(null==i?void 0:i.userId)||n.userId,deviceId:(null==i?void 0:i.deviceId)||n.deviceId}},qt={get:function(){return this.__SLARDAR__REPALCE__HOLDER__}},Vt=function(e){var t,n,r=e,o={},s=qt.get(),a=u,c=u;return{getConfig:function(){return r},setConfig:function(e){var c,u,f,h;return o=i(i({},o),e||{}),l(),t||(t=e,r.useLocalConfig||!r.bid?(n={},a()):s?d():(c=r.transport,u=r.domain,f=r.bid,h=function(e){s=e,d()},c.get({withCredentials:!0,url:Bt(u)+"?bid="+f+"&store=1",success:function(e){h(e.data||{})},fail:function(){h({sample:{sample_rate:.001}})}}))),r},onChange:function(e){c=e},onReady:function(e){a=function(){!function(e){var t=e.bid,n=e.userId,r=e.deviceId,i=e.storageExpires,o=Ut(t);ce(o,{userId:n,deviceId:r},ue(i))}(r),e()},n&&a()}};function l(){var t=i(i(i({},e),n||{}),o);t.plugins=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n={},r=0;r<e.length;)n=y(n,e[r++]);return n}(e.plugins,(null==n?void 0:n.plugins)||{},o.plugins||{}),t.sample=$t($t(e.sample,null==n?void 0:n.sample),o.sample),r=t,c()}function d(){n=function(e){var t;if(!e)return{};var n=e.sample,r=e.plugins,i=e.timestamp,o=e.quota_rate,s=void 0===o?1:o,a=e.apdex;if(!n)return{};var c=n.sample_rate,u=n.sample_granularity,l=void 0===u?Tt:u,d=n.include_users,f=n.rules;return{sample:{include_users:d,sample_rate:c*s,sample_granularity:l,rules:(void 0===f?[]:f).reduce((function(e,t){var n=t.name,r=t.enable,i=t.sample_rate,o=t.conditional_sample_rules;return e[n]={enable:r,sample_rate:i,conditional_sample_rules:o},e}),{})},plugins:{heatmap:null!==(t=null==r?void 0:r.heatmap)&&void 0!==t&&t},apdex:a,serverTimestamp:i}}(s),l(),a()}};function $t(e,t){if(!e||!t)return e||t;var n=i(i({},e),t);return n.include_users=s(s([],o(e.include_users||[]),!1),o(t.include_users||[]),!1),n.rules=s(s([],o(Object.keys(e.rules||{})),!1),o(Object.keys(t.rules||{})),!1).reduce((function(n,r){var a,c;return r in n||(r in(e.rules||{})&&r in(t.rules||{})?(n[r]=i(i({},e.rules[r]),t.rules[r]),n[r].conditional_sample_rules=s(s([],o(e.rules[r].conditional_sample_rules||[]),!1),o(t.rules[r].conditional_sample_rules||[]),!1)):n[r]=(null===(a=e.rules)||void 0===a?void 0:a[r])||(null===(c=t.rules)||void 0===c?void 0:c[r])),n}),{}),n}var Ht,Wt={build:function(e){return{ev_type:e.ev_type,payload:e.payload,common:i(i({},e.extra||{}),e.overrides||{})}}},Kt={sri:"reportSri",st:"reportResourceError",err:"captureException",reject:"captureException"},Jt=function(e,t){return"err"===t?!1!==S(e,"plugins."+Je+".onerror",(function(e,t){return e[t]})):"reject"!==t||!1!==S(e,"plugins."+Je+".onunhandledrejection",(function(e,t){return e[t]}))},Yt=function(e,t){var n;void 0===t&&(t=Kt);var r,s=function(e){return Object.keys(e).reduce((function(e,t){return e[t]=[],e}),{})}(t),a=(r=t,Object.keys(r).reduce((function(e,t){return e[r[t]]?e[r[t]].push(t):e[r[t]]=[t],e}),{})),c=function(e,t,n){return function(r,o,s,a){var c;void 0===s&&(s=G()),void 0===a&&(a=location.href);var u=i(i({},ee(e)),{url:a,timestamp:s});t[r]&&(e[n[r]]?te(e,u)((function(){e[n[r]](o)})):null===(c=t[r])||void 0===c||c.push([o,u]))}}(e,s,t);(null===(n=e.p)||void 0===n?void 0:n.a)&&"observe"in e.p.a&&e.p.a.observe((function(t){var n=o(t,5);n[0];var r=n[1],i=n[2],s=n[3],a=n[4],u=e.config();Jt(u,r)&&c(r,i,s,a)})),e.on("init",(function(){var t,n=e.config();null===(t=e.p)||void 0===t||t.a.forEach((function(e){var t=o(e,5);t[0];var r=t[1],i=t[2],s=t[3],a=t[4];Jt(n,r)&&c(r,i,s,a)})),e.p&&e.p.a&&(e.p.a.length=0),e.provide("precollect",(function(e,t,r,i){void 0===r&&(r=G()),void 0===i&&(i=location.href),Jt(n,e)&&c(e,t,r,i)}))})),e.on("provide",function(e,t,n){return function(r){r in n&&n[r].forEach((function(n){var i;null===(i=t[n])||void 0===i||i.forEach((function(t){var n=o(t,2),i=n[0],s=n[1];te(e,s)((function(){e[r](i)}))})),t[n]=null}))}}(e,s,a))},Xt=function(e){var t=o(e,2),n=t[0],r=t[1];return{ev_type:Ee,payload:{error:Ke(n),breadcrumbs:[],extra:r||{}},extra:{bid:"slardar_sdk"}}},Zt=function(e){var t=ue(e.storageExpires),n=Gt(e.bid,t);return{bid:"",pid:"",viewId:tt("_"),userId:n.userId,deviceId:n.deviceId,storageExpires:t,sessionId:P(),domain:"mon.zijieapi.com",pluginBundle:{name:"commonMonitors",plugins:["breadcrumb","jsError","performance","resourceError","resource"]},pluginPathPrefix:"https://lf3-short.ibytedapm.com/slardar/fe/sdk-web/plugins",plugins:{ajax:{ignoreUrls:St},fetch:{ignoreUrls:St},breadcrumb:{},pageview:{},jsError:{},resource:{},resourceError:{},performance:{},tti:{},fmp:{},blankScreen:!1,heatmap:!1},release:"",env:"production",sample:Ot,transport:vt()}},Qt=function(e){var t=void 0===e?{}:e,n=t.createSender,r=void 0===n?function(e){return yt({size:20,endpoint:(t=e.domain,void 0===n&&(n=wt),(t&&t.indexOf("//")>=0?"":"https://")+t+n),transport:e.transport});var t,n}:n,a=t.builder,c=void 0===a?Wt:a,u=t.createDefaultConfig,l=z({validateInitConfig:zt,initConfigNormalizer:jt,userConfigNormalizer:Ft,createSender:r,builder:c,createDefaultConfig:void 0===u?Zt:u,createConfigManager:Vt});(function(e,t){void 0===t&&(t=.001);var n,r,i=Z(q());i&&(i.errors||(i.errors=[]),"observe"in i.errors||D(t)&&(i.errors=(n=i.errors,r=[],n.observe=function(e){r.push(e)},n.push=function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return t.forEach((function(e){r.forEach((function(t){return t(e)}))})),(e=[].push).call.apply(e,s([n],o(t),!1))},n),i.errors.forEach((function(t){e.report(Xt(t))})),i.errors.observe((function(t){e.report(Xt(t))}))))})(l),function(e){var t=function(){var e={},t={},n={set:function(r,i){return e[r]=i,t[r]=C(i),n},merge:function(r){return e=i(i({},e),r),Object.keys(r).forEach((function(e){t[e]=C(r[e])})),n},delete:function(r){return delete e[r],delete t[r],n},clear:function(){return e={},t={},n},get:function(e){return t[e]},toString:function(){return i({},t)}};return n}();e.provide("context",t),e.on("report",(function(e){return e.extra||(e.extra={}),e.extra.context=t.toString(),e}))}(l);var d=Z(q());!function(e,t){var n=t||{},r={};e.provide("setFilter",(function(e,t){r[e]||(r[e]=[]),r[e].push(t)})),e.provide("initSubject",(function(t){var i=o(t,2),s=i[0],a=i[1],c=function(e){return e.split("_")[0]}(s),u=!!c&&r[c];return n[s]||(n[s]=k(a,(function(){n[s]=void 0}))),u?U(e,[s,L(n[s],u)]):n[s]})),e.provide("getSubject",(function(e){return n[e]})),e.provide("privateSubject",{})}(l,d&&d.subject),function(e){var t,n=!1;e.on("init",(function(){t=(new Date).getTime(),e.on("config",(function(){var r,o=null===(r=e.config())||void 0===r?void 0:r.serverTimestamp;if(!(isNaN(o)||Number(o)<=0||n)){n=!0;var s=(new Date).getTime();if(s-t<700&&o){var a=o-(s+t)/2;!isNaN(a)&&(a>0||a<-6e5)&&e.on("beforeBuild",(function(e){var t;return i(i({},e),{extra:i(i({},null!==(t=e.extra)&&void 0!==t?t:{}),{sdk_offset:null!=a?a:0})})}))}}}))}))}(l),function(e){e.on("beforeBuild",(function(t){return function(e,t){var n={};return n.bid=t.bid,n.user_id=t.userId,n.device_id=t.deviceId,n.session_id=t.sessionId,n.release=t.release,n.env=t.env,i(i({},e),{extra:i(i({},n),e.extra||{})})}(t,e.config())}))}(l),function(e){e.on("report",(function(t){return function(e,t){var n=t||{},r=n.pid,o=void 0===r?"":r,s=n.viewId,a=void 0===s?"":s,c={url:K(),timestamp:G(),sdk_version:bt,sdk_name:"SDK_SLARDAR_WEB",pid:o,view_id:a};return i(i({},e),{extra:i(i({},c),e.extra||{})})}(t,e.config())}))}(l),function(e){var t=function(){var e=function(){if(q()&&"navigator"in window)return window.navigator}();if(e)return e.connection||e.mozConnection||e.webkitConnection}(),n=ht(t);t&&(t.onchange=function(){n=ht(t)}),e.on("report",(function(e){return i(i({},e),{extra:i(i({},e.extra||{}),{network_type:n})})}))}(l),function(e){e.on("start",(function(){var t=e.config().bid,n=e.getSender();n.setEndpoint(n.getEndpoint()+"?biz_id="+t)}))}(l);var f=F(l,ee,(function(e,t,n){return te(e,t)((function(){var e=o(n),t=e[0],r=e.slice(1);l[t].apply(l,s([],o(r),!1))}))}));return function(e,t){e.on("init",(function(){var n=[],r=function(r){r.forEach((function(r){var i=r.name;E(n,i)||(n.push(i),r.setup(e),t(i,r.setup),e.destroyAgent.set(i,i,[function(){n=w(n,i),r.tearDown&&r.tearDown()}]))}))};e.provide("applyIntegrations",r);var i=e.config();i&&i.integrations&&r(i.integrations)}))}(f,kt),f},en=((Ht={})[dt]=function(e){e.on("init",(function(){var t,n=null===(t=e.config())||void 0===t?void 0:t.plugins[dt];!function(e,t){var n,r=se(t,ft);if(r&&$()){var s=r.routeMode,a=r.apdex,c=e.report.bind(e),l=u;if(a){var d=[],f=o(function(e,t,n,r){var i,s,a,c=o(n,2),u=c[0],l=c[1],d=2===r.apdex,f=void 0,h=void 0,p=void 0,g=!1,_=o(ut(),4),m=_[0],v=_[1],y=_[2],b=_[3],E=o(ut(),4),w=E[0],S=E[1],T=E[2],C=E[3],O=o((i={start:G(),end:0,time_spent:0,is_bounced:!1,entry:"",exit:"",p_count:0,a_count:0},[function(e,t){var n=o(e,3),r=n[0],s=n[1],a=n[2];i.end=G(),i.time_spent+=t&&t.time_spent||0,i.last_page=t,i.p_count+=1,i.rank=r,i.apdex=s,i.apdex_detail=a;var c=V();c&&(i.is_bounced=!function(e){return"complete"===e.readyState}(c))},function(e,t){i.time_spent+=e.time_spent,i.p_count+=1,i.exit=t},function(){i.a_count+=1},function(e){i.entry=e,i.exit=e},function(){return i}]),5),A=O[0],I=O[1],R=O[2],D=O[3],x=O[4],M=o((s=0,a=void 0,[function(e){if(e){if(!a)return;s+=G()-a,a=void 0}else a=G()},function(){a&&(s+=G()-a);var e=s;return s=0,a=G(),e}]),2),P=M[0],N=M[1];t.push(u[0](P)),!d&&t.push(l[0]((function(){if(g){var t=o(T(),2),n=t[0],r=t[1],i=at(n,p);A([i,n,r],j()),e({ev_type:be,payload:x()}),C()}})));var k=ct(m,v),L=ct(w,S),j=function(){var e=o(y(),2),t=e[0],n=e[1];return{start:f[0],pid:f[1],view_id:f[2],end:G(),time_spent:N(),apdex:t,rank:at(t,p),detail:n}};return t.push((function(){g=!1})),[function(e,t){if(!f)return f=[G(),e,t],D(e),void(g=!(!p||!f));g&&(h=j(),I(h,e)),f=[G(),e,t],b()},function(e){g&&(d||(L(e,p),e.ev_type===Te&&R()),e.common.pid===f[1]&&k(e,p))},function(t){g&&(t.payload.last=h),e(t)},function(e){if(!e)return t.forEach((function(e){return e()})),void(t.length=0);g=!(!(p=e)||!f)}]}(e.report.bind(e),d,[B(e,Xe),B(e,Ze)],r),4),h=f[0],p=f[1],g=f[2],_=f[3];c=g,l=h,e.on("send",p),d.push((function(){return e.off("send",p)})),e.on("start",(function(){_(e.config().apdex)})),j(e,dt,be,d)}var m=[],v=o(lt(c,m,rt(s)?[]:[e.initSubject(Qe),e.initSubject(et)],i(i({},r),{initPid:null===(n=e.config())||void 0===n?void 0:n.pid,onPidUpdate:function(t){var n=tt(t);l(t,n),e.set({pid:t,viewId:n,actionId:void 0})}})),1)[0];U(e,["f_view_0",X(e)],-1);var y=function(){v(e.config().pid)};e.on("config",y),m.push((function(){return e.off("config",y)})),j(e,dt,ye,m),e.provide("sendPageview",v)}}(e,n)}))},Ht[Ne]=function(e){e.on("init",(function(){var t,n=null===(t=e.config())||void 0===t?void 0:t.plugins[Ne];!function(e,t){var n=se(t,ke);if(n){var r=[],o=i(i({},n),{setContextAtReq:function(){return Y(e)},setTraceHeader:Ae(n.trace)}),s=function(){return B(e,ve)};o.autoWrap&&Me(r,[B(e,["xhr_0",pe(XMLHttpRequest&&XMLHttpRequest.prototype)]),s],o),j(e,Ne,we,r),e.provide("wrapXhr",(function(e){function t(){var t=new e;return Me(r,[k(pe(t)),s],o),t}return t.prototype=new e,["DONE","HEADERS_RECIEVED","LOADING","OPENED","UNSENT"].forEach((function(n){t[n]=e[n]})),t}))}}(e,n)}))},Ht[Ve]=function(e){e.on("init",(function(){var t,n=null===(t=e.config())||void 0===t?void 0:t.plugins[Ve];!function(e,t){var n=se(t,$e);if(n){var r=[],o=i(i({},n),{setContextAtReq:function(){return Y(e)},setTraceHeader:Ae(n.trace)}),s=function(){return B(e,ve)};o.autoWrap&&Le(r,[B(e,_e),s],o),j(e,Ve,we,r),e.provide("wrapFetch",(function(e){var t=void 0;return Le(r,[k((function(n){t=ge(e,n)})),s],o),t}))}}(e,n)}))},Ht),tn=function(e){void 0===e&&(e={});var t=Qt(e);return function(e){e.on("start",(function(){var t=e.config(),n=function(e,t,n,r,i){if(!t)return l;var o=t.sample_rate,s=t.include_users,a=t.sample_granularity,c=t.rules,u=t.r,d=void 0===u?Math.random():u;if(E(s,e))return function(e){return pt(e,1)};var f="session"===a,h=gt(f,o,n,d,r),p=function(e,t,n,r,i,o){var s={};return Object.keys(e).forEach((function(a){var c=e[a],u=c.enable,l=c.sample_rate,d=c.conditional_sample_rules;u?(s[a]={enable:u,sample_rate:l,effectiveSampleRate:l*n,hit:gt(t,l,r,i,o)},d&&(s[a].conditional_hit_rules=d.map((function(e){var s=e.sample_rate,a=e.filter;return{sample_rate:s,hit:gt(t,s,r,i,o),effectiveSampleRate:s*n,filter:a}})))):s[a]={enable:u,hit:function(){return!1},sample_rate:0,effectiveSampleRate:0}})),s}(c,f,o,n,d,r);return function(e){var t;if(!h())return f&&i[0](),!1;if(!(e.ev_type in p))return pt(e,o);if(!p[e.ev_type].enable)return f&&i[1](e.ev_type),!1;if(null===(t=e.common)||void 0===t?void 0:t.sample_rate)return e;var n=p[e.ev_type],r=n.conditional_hit_rules;if(r)for(var s=0;s<r.length;s++)if(_t(e,r[s].filter))return!!r[s].hit()&&pt(e,r[s].effectiveSampleRate);return n.hit()?pt(e,n.effectiveSampleRate):((!r||!r.length)&&f&&i[1](e.ev_type),!1)}}(t.userId,t.sample,D,x,[function(){e.destroy()},function(t){e.destroyAgent.removeByEvType(t)}]);e.on("build",n)}))}(t),Yt(t),function(e){e.provide("sendEvent",(function(t){var n=function(e){if(e&&d(e)&&e.name&&m(e.name)){var t={name:e.name,type:"event"};if("metrics"in e&&d(e.metrics)){var n=e.metrics,r={};for(var i in n)_(n[i])&&(r[i]=n[i]);t.metrics=r}if("categories"in e&&d(e.categories)){var o=e.categories,s={};for(var i in o)s[i]=C(o[i]);t.categories=s}return"attached_log"in e&&m(e.attached_log)&&(t.attached_log=e.attached_log),t}}(t);n&&e.report({ev_type:Se,payload:n,extra:{timestamp:G()}})})),e.provide("sendLog",(function(t){var n=function(e){if(e&&d(e)&&e.content&&m(e.content)){var t={content:C(e.content),type:"log",level:"info"};if("level"in e&&(t.level=e.level),"extra"in e&&d(e.extra)){var n=e.extra,r={},i={};for(var o in n)_(n[o])?r[o]=n[o]:i[o]=C(n[o]);t.metrics=r,t.categories=i}return"attached_log"in e&&m(e.attached_log)&&(t.attached_log=e.attached_log),t}}(t);n&&e.report({ev_type:Se,payload:n,extra:{timestamp:G()}})}))}(t),Object.keys(en).forEach((function(e){kt(e,en[e]),en[e](t)})),function(e,t,n){void 0===n&&(n=Dt),function(e){var t=q(),n=V();t&&n&&("complete"!==n.readyState?ne(t,"load",(function(){setTimeout((function(){e()}),0)}),!1):e())}((function(){e.on("init",(function(){n(e,t)}))}))}(t),t.provide("create",tn),t},nn="precollect",rn=3e5,on=tn(),sn=q();sn&&function(e,t){if("addEventListener"in e){t.pcErr=function(n){var r=(n=n||e.event).target||n.srcElement||{};r instanceof Element||r instanceof HTMLElement?t(nn,"st",{tagName:r.tagName,url:r.getAttribute("href")||r.getAttribute("src")}):t(nn,"err",n.error)},t.pcRej=function(n){n=n||e.event,t(nn,"reject",n.reason||n.detail&&n.detail.reason)};var n=[];n.push(ne(e,"error",t.pcErr,!0)),n.push(ne(e,"unhandledrejection",t.pcRej,!0)),setTimeout((function(){n.forEach((function(e){return e()}))}),rn)}"PerformanceObserver"in e&&"PerformanceLongTaskTiming"in e&&(t.pp={entries:[]},t.pp.observer=new PerformanceObserver((function(e){t.pp.entries=t.pp.entries.concat(e.getEntries())})),t.pp.observer.observe({entryTypes:["longtask"]}),setTimeout((function(){t.pp.observer.disconnect()}),rn))}(sn,on);var an,cn,un={},ln=(an||(an=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)};function n(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function r(e,t,n){if(2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var i=function(e){return JSON.stringify({ev_type:"batch",list:e})},o=["init","start","config","beforeDestroy","provide","beforeReport","report","beforeBuild","build","beforeSend","send","beforeConfig"],s=function(){return{}};function a(e){return e}function c(e){return"object"==typeof e&&null!==e}var u=Object.prototype;function l(e){if(c(e)){if("function"==typeof Object.getPrototypeOf){var t=Object.getPrototypeOf(e);return t===u||null===t}return"[object Object]"===u.toString.call(e)}return!1}function d(e){return"[object Array]"===u.toString.call(e)}function f(e){return"function"==typeof e}function h(e){return"number"==typeof e}function p(e){return"string"==typeof e}function g(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function _(e,n){var r=t({},e);for(var i in n)g(n,i)&&void 0!==n[i]&&(c(n[i])&&l(n[i])?r[i]=_(c(e[i])?e[i]:{},n[i]):d(n[i])&&d(e[i])?r[i]=m(e[i],n[i]):r[i]=n[i]);return r}function m(e,t){var n=d(e)?e:[],r=d(t)?t:[];return Array.prototype.concat.call(n,r).map((function(e){return e instanceof RegExp?e:c(e)&&l(e)?_({},e):d(e)?m([],e):e}))}function v(e,t){if(!d(e))return!1;if(0===e.length)return!1;for(var n=0;n<e.length;){if(e[n]===t)return!0;n++}return!1}var y=function(e,t){if(!d(e))return e;var n=e.indexOf(t);if(n>=0){var r=e.slice();return r.splice(n,1),r}return e},b=function(e,t,r){for(var i,o=n(t.split(".")),s=o[0],a=o.slice(1);e&&a.length>0;)e=e[s],s=(i=n(a))[0],a=i.slice(1);if(e)return r(e,s)};var E=function(e,t){var n=function(e){return d(e)&&e.length?function(e){for(var t=[],n=e.length,r=0;r<n;r++){var i=e[r];p(i)?t.push(i.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")):i&&i.source&&t.push(i.source)}return new RegExp(t.join("|"),"i")}(e):null}(e||[]);return!!n&&n.test(t)};function w(e){try{return p(e)?e:JSON.stringify(e)}catch(e){return"[FAILED_TO_STRINGIFY]:"+String(e)}}var S=function(e,t,i,o){return void 0===o&&(o=!0),function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];if(!e)return s;var u=e[t],l=i.apply(void 0,r([u],n(a),!1)),d=l;return f(d)&&o&&(d=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return l.apply(this,e)}catch(t){return f(u)&&u.apply(this,e)}}),e[t]=d,function(n){n||(d===e[t]?e[t]=u:l=u)}}},T=function(e,t,i){return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];if(!e)return s;var c=e[t],u=i.apply(void 0,r([c],n(o),!1)),l=u;return f(l)&&(l=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return u.apply(this,e)}),e[t]=l,function(){l===e[t]?e[t]=c:u=c}}},C=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},O=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},A=function(e){return Math.random()<Number(e)},I=function(e,t){return e<Number(t)},R=function(e){return function(t){for(var n=t,r=0;r<e.length&&n;r++)try{n=e[r](n)}catch(e){C(e)}return n}};function D(){var e=function(){for(var e=new Array(16),t=0,n=0;n<16;n++)3&n||(t=4294967296*Math.random()),e[n]=t>>>((3&n)<<3)&255;return e}();return e[6]=15&e[6]|64,e[8]=63&e[8]|128,function(e){for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);var r=0,i=t;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}(e)}var x=function(e,t){var n=[];try{n=t.reduce((function(t,n){try{var r=n(e);"function"==typeof r&&t.push(r)}catch(e){}return t}),[])}catch(e){}return function(e){return x(e,n)}},M=function(e,t,n){var r=function(e){void 0===e&&(e=3e5);var t,n=[],r=[],i=!1,o=function(e,t,n){var r=0;return-1===n?s:function(){if(e())return r&&clearTimeout(r),void(r=0);0===r&&(r=setTimeout(t,n))}}((function(){return!!n.length}),(function(){i=!0,t&&t[0](),r.forEach((function(e){return e()})),r.length=0,t=void 0}),e),a=function(e){n=y(n,e),!i&&o()};return{next:function(e){return x(e,n)},complete:function(e){r.push(e)},attach:function(e,n){t=[e,n]},subscribe:function(e){if(i)throw new Error("Observer is closed");return n.push(e),t&&t[1]&&t[1](e),o(),function(){return a(e)}},unsubscribe:a}}(n);try{e(r.next,r.attach),t&&r.complete(t)}catch(e){}return[r.subscribe,r.unsubscribe]},P=function(e,t){var r=n(e,1)[0];return function(e,n){var i=r((function(n){var r;return(r=t,function(e){for(var t=!0,n=0;n<r.length&&t;n++)try{t=r[n](e)}catch(e){C(e)}return t})(n)?e(n):s}));n((function(){i()}))}},N=function(e,t,n,r){return e.destroyAgent.set(t,n,r)};function k(e){var t,i,s=e.builder,a=e.createSender,u=e.createDefaultConfig,l=e.createConfigManager,d=e.userConfigNormalizer,f=e.initConfigNormalizer,h=e.validateInitConfig,p={};o.forEach((function(e){return p[e]=[]}));var g=!1,_=!1,m=!1,b=[],E=[],w=function(){var e=!1,t={},n=function(e){e.length&&e.forEach((function(e){try{e()}catch(e){}})),e.length=0},r=function(e){t[e]&&t[e].forEach((function(e){n(e[1])})),t[e]=void 0};return{set:function(r,i,o){t[r]?t[r].push([i,o]):t[r]=[[i,o]],e&&n(o)},has:function(e){return!!t[e]},remove:r,removeByEvType:function(e){Object.keys(t).forEach((function(r){t[r]&&t[r].forEach((function(t){t[0]===e&&n(t[1])}))}))},clear:function(){e=!0,Object.keys(t).forEach((function(e){r(e)}))}}}(),S={getBuilder:function(){return s},getSender:function(){return t},getPreStartQueue:function(){return b},init:function(e){if(g)O("already inited");else{if(!(e&&c(e)&&h(e)))throw new Error("invalid InitConfig, init failed");var n=u(e);if(!n)throw new Error("defaultConfig missing");var r=f(e);if((i=l(n)).setConfig(r),i.onChange((function(){T("config")})),!(t=a(i.getConfig())))throw new Error("sender missing");g=!0,T("init",!0)}},set:function(e){g&&e&&c(e)&&(T("beforeConfig",!1,e),null==i||i.setConfig(e))},config:function(e){if(g)return e&&c(e)&&(T("beforeConfig",!1,e),null==i||i.setConfig(d(e))),null==i?void 0:i.getConfig()},provide:function(e,t){v(E,e)?O("cannot provide "+e+", reserved"):(S[e]=t,T("provide",!1,e))},start:function(){var e=this;g&&(_||null==i||i.onReady((function(){_=!0,T("start",!0),b.forEach((function(t){return e.build(t)})),b.length=0})))},report:function(e){if(e){var t=R(p.beforeReport)(e);if(t){var n=R(p.report)(t);n&&(_?this.build(n):b.push(n))}}},build:function(e){if(_){var t=R(p.beforeBuild)(e);if(t){var n=s.build(t);if(n){var r=R(p.build)(n);r&&this.send(r)}}}},send:function(e){if(_){var n=R(p.beforeSend)(e);n&&(t.send(n),T("send",!1,n))}},destroy:function(){w.clear(),m=!0,b.length=0,T("beforeDestroy",!0)},on:function(e,t){if("init"===e&&g||"start"===e&&_||"beforeDestroy"===e&&m)try{t()}catch(e){}else p[e]&&p[e].push(t)},off:function(e,t){p[e]&&(p[e]=y(p[e],t))},destroyAgent:w};return E=Object.keys(S),S;function T(e,t){void 0===t&&(t=!1);for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];p[e].forEach((function(e){try{e.apply(void 0,r([],n(i),!1))}catch(e){}})),t&&(p[e].length=0)}}var L=function(e,t,i){var o={},s=function(){for(var i,a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var u=a[0];if(u){var l=u.split(".")[0];if(!(l in s)){var d=o[l]||[],h=null!==(i=null==t?void 0:t(e))&&void 0!==i?i:{};return d.push(r([h],n(a),!1)),void(o[l]=d)}return function(e,t,n){return b(e,t,(function(e,t){if(e&&t in e&&f(e[t]))try{return e[t].apply(e,n)}catch(e){return}}))}(s,u,[].slice.call(a,1))}};for(var a in S(e,"provide",(function(t){return function(n,r){s[n]=r,t.call(e,n,r)}}))(),e)Object.prototype.hasOwnProperty.call(e,a)&&(s[a]=e[a]);return e.on("provide",(function(t){o[t]&&(o[t].forEach((function(t){var r=n(t),o=r[0],s=r.slice(1);null==i||i(e,o,s)})),o[t]=null)})),s};function j(e,t){return e.initSubject(t)}function z(e,t,r){var i=n(t,2),o=i[0],s=i[1],a=e.privateSubject||{};return a[o]||(a[o]=M(s,(function(){a[o]=void 0}),r)),a[o]}var F=function(){return Date.now()};function B(){if("object"==typeof window&&c(window))return window}function U(){if("object"==typeof document&&c(document))return document}function G(){return B()&&window.location}function q(e){var t=U();if(!t||!e)return"";var n=t.createElement("a");return n.href=e,n.href}function V(e){var t=U();if(!t||!e)return{url:e,protocol:"",domain:"",query:"",path:"",hash:""};var n=t.createElement("a");n.href=e;var r=n.pathname||"/";return"/"!==r[0]&&(r="/"+r),{url:n.href,protocol:n.protocol.slice(0,-1),domain:n.hostname,query:n.search.substring(1),path:r,hash:n.hash}}function $(){var e=B()&&G();return e?e.href:""}var H=function(e){var t,n={pid:(t=e.config()).pid,view_id:t.viewId,url:$()};return n.context=e.context?e.context.toString():{},n},W=function(e,n){var r=H(e);return r.timestamp=F(),function(n){e.report(t(t({},n),{overrides:r}))}},K=function(e){return function(t,n){var r=H(e);n(s,(function(e){r&&e(r)}))}},J=function(e){if(e)return e.__SLARDAR_REGISTRY__||(e.__SLARDAR_REGISTRY__={Slardar:{plugins:[],errors:[],subject:{}}}),e.__SLARDAR_REGISTRY__.Slardar},Y=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=J(B());n&&(n.errors||(n.errors=[]),n.errors.push(e))},X=function(e){var t={url:$(),timestamp:F()},n=e.config();return(null==n?void 0:n.pid)&&(t.pid=n.pid),(null==e?void 0:e.context)&&(t.context=e.context.toString()),t},Z=function(e,t){return function(n){var r=function(e){return e.overrides=t,e};e.on("report",r),n(),e.off("report",r)}},Q=function(e,t,n,r){return void 0===r&&(r=!1),e.addEventListener(t,n,r),function(){e.removeEventListener(t,n,r)}},ee=function(e,t,n,r){return e.addEventListener(t,n,r),function(){e.removeEventListener(t,n,r)}},te=function(e){var t=!1;return[function(n){t||(t=!0,e&&e(n))}]},ne=function(e,t){var n,r=U();if(r){var i=r.createElement("script");i.src=e,i.crossOrigin="anonymous",i.onload=t,null===(n=r.head)||void 0===n||n.appendChild(i)}},re=function(e,n){return c(e)?t(t({},n),e):!!e&&n},ie=function(){return!!btoa&&!!atob},oe=function(e){try{var t=localStorage.getItem(e),n=t;t&&"string"==typeof t&&(n=JSON.parse((s=t,ie()?decodeURI(atob(s)):s)));var r=n,i=r.expires,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(r,["expires"]);return i>=F()?o:void 0}catch(e){return}var s},se=function(e,n,r){var i;if(!(r<=0))try{localStorage.setItem(e,(i=JSON.stringify(t(t({},n),{expires:F()+r})),ie()?btoa(encodeURI(i)):i))}catch(e){}},ae=function(e){return!1===e?0:!0!==e&&void 0!==e&&h(e)?e:7776e6},ce=function(){var e=new RegExp("\\/monitor_web\\/collect|\\/monitor_browser\\/collect\\/batch","i");return function(t){return e.test(t)}},ue=function(e){return function(){for(var t,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return t=n(r,2),this._method=t[0],this._url=t[1],e.apply(this,r)}},le=function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._reqHeaders=this._reqHeaders||{};var i=n(t,2),o=i[0],s=i[1];return this._reqHeaders[o]=s,e&&e.apply(this,t)}},de=function(e,t){var n=ce();return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return this._start=F(),this._data=null==r?void 0:r[0],n(this._url)||function(e,t){return T(e,"onreadystatechange",(function(n){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return 4===this.readyState&&t(e),n&&n.apply(this,r)}}))}(this,t([this._method,this._url,this._start,this]))(),e.apply(this,r)}},fe=function(e){return function(t,n){if(e){var r=[];r.push(T(e,"open",ue)()),r.push(T(e,"setRequestHeader",le)()),r.push(T(e,"send",de)(t)),n((function(){r.forEach((function(e){return e()}))}))}}},he=function(e,t){return function(n,r){void 0===r&&(r={});var i=t([n,r]),o=e(n,r);return o.then((function(e){i(e)}),(function(){i(void 0)})),o}},pe=["fetch_0",function(e,t){var n=B();if(n&&fetch){var r=[];r.push(T(n,"fetch",he)(e)),t((function(){r.forEach((function(e){return e()}))}))}}],ge=["resource"],_e=["resource_0",function(e,t){var r=function(){if(B()&&f(window.PerformanceObserver))return window.PerformanceObserver}();if(r){var i=ce();t(function(e,t,r){var i=n(function(e,t,n){var r=e&&new e((function(e,n){e.getEntries&&e.getEntries().forEach((function(e,r,i){return t(e,r,i,n)}))}));return[function(t){if(!e||!r)return n;try{r.observe({entryTypes:t})}catch(e){return n}},function(t,i){if(!e||!r)return n;try{var o={type:t,buffered:!0};void 0!==i&&(o.durationThreshold=i),r.observe(o)}catch(e){return n}r.observe({type:t,buffered:!1})},function(){return r&&r.disconnect()}]}(e,t),3),o=i[0],s=i[2];return o(r),s}(r,(function(t){!i(t.name)&&e(t)}),ge))}}],me="pageview",ve="session",ye="js_error",be="http",Ee="custom",we="action",Se={sampleRate:1,origins:[]},Te=function(){var e=window&&(window.crypto||window.msCrypto);if(void 0!==e&&e.getRandomValues){var t=new Uint16Array(8);e.getRandomValues(t);var n=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t};return n(t[0])+n(t[1])+n(t[2])+n(t[3])+n(t[4])+n(t[5])+n(t[6])+n(t[7])}return"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".replace(/[x]/g,(function(){return(16*Math.random()|0).toString(16)}))},Ce=function(e){var t=re(e,Se);if(t&&A(t.sampleRate))return function(e,n){var r=t.origins;r.length&&E(r,e)&&n("traceparent","03-"+Te()+"-"+Te().substring(16)+"-01")}},Oe=new RegExp("(cookie|auth|jwt|token|key|ticket|secret|credential|session|password)","i"),Ae=new RegExp("(bearer|session)","i"),Ie=function(e,t){return!e||!t||Oe.test(e)||Ae.test(t)},Re=function(e,n){try{if(n){var r=e.request.url;e.request.url=n(r),e.extra=t(t({},e.extra),{original_url:r})}}catch(e){}},De=function(e,t,r){var i=n(t,2),o=i[0],a=i[1],c=r.setTraceHeader,u=r.ignoreUrls,l=r.setContextAtReq,d=r.extractUrl;e.push(o[0]((function(e){var t=n(e,4);t[0];var i=t[1];t[2];var o=t[3];if(!i)return s;var f=q(i);if(E(u,f))return s;c&&c(f,(function(e,t){return o.setRequestHeader(e,t)}));var h=l(),p=void 0,g=a()[0]((function(e){f===e.name&&!p&&(p=e)}));return function(e){var t=xe(e,r);setTimeout((function(){p&&(t.response.timing=p),Re(t,d),h&&h({ev_type:be,payload:t}),g()}),100)}})))},xe=function(e,t){var r,i=e._method,o=e._reqHeaders,s=e._url,a=e._start,c=e._data,u={api:"xhr",request:{url:q(s),method:(i||"").toLowerCase(),headers:o&&(r=o,Object.keys(r).reduce((function(e,t){return!Ie(t,r[t])&&(e[t.toLowerCase()]=r[t]),e}),{})),timestamp:a},response:{status:e.status||0,is_custom_error:!1,timestamp:F()},duration:F()-a};"function"==typeof e.getAllResponseHeaders&&(u.response.headers=function(e){return p(e)&&e?e.split("\r\n").reduce((function(e,t){if(p(t)){var r=n(t.split(": "),2),i=r[0],o=r[1];!Ie(i,o)&&(e[i.toLowerCase()]=o)}return e}),{}):{}}(e.getAllResponseHeaders()));var l=u.response.status,d=t.collectBodyOnError,f=t.extraExtractor;try{var h=null==f?void 0:f(e.response,u,c);h&&(u.extra=h),h&&(u.response.is_custom_error=!0),d&&(h||l>=400)&&(u.request.body=c?""+c:void 0,u.response.body=e.response?""+e.response:void 0)}catch(e){}return u},Me="ajax",Pe={autoWrap:!0,setContextAtReq:function(){return a},ignoreUrls:[],collectBodyOnError:!1},Ne=function(e,t,r){var i=n(t,2),o=i[0],a=i[1],c=r.setTraceHeader,u=r.ignoreUrls,l=r.setContextAtReq,d=r.extractUrl,f=window.Headers,h=window.Request;h&&f&&e.push(o[0]((function(e){var t=n(e,2),i=t[0],o=t[1],p=q(i instanceof h?i.url:i);if(!ke(p)||E(u,p))return s;c&&c(p,(function(e,t){return je(e,t,i,o,h,f)}));var g=l(),_=F(),m=void 0,v=a()[0]((function(e){p===e.name&&!m&&(m=e)}));return function(e){var t,n,s=Ue(i,o,e,h,f,r,_),a=(t=function(e){m&&(e.response.timing=m),Re(e,d),g&&g({ev_type:be,payload:e}),v()},n=!1,function(e){n||(n=!0,t(e))});setTimeout((function(){a(s)}),1e3)}})))},ke=function(e){if(!p(e))return!1;var t=n(e.split(":"),2),r=t[0];return!t[1]||"http"===r||"https"===r},Le=function(e,t){return e instanceof t},je=function(e,n,r,i,o,s){var a;Le(r,o)?r.headers.set(e,n):i.headers instanceof s?i.headers.set(e,n):i.headers=t(t({},i.headers),((a={})[e]=n,a))},ze=function(e,t,n){var r=t&&t.method||"get";return Le(e,n)&&(r=e.method||r),r.toLowerCase()},Fe=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];try{return t.reduce((function(t,n){return new e(n||{}).forEach((function(e,n){return!Ie(n,e)&&(t[n]=e)})),t}),{})}catch(e){return{}}},Be=function(e,t,n){return Le(e,n)?e.body:null==t?void 0:t.body},Ue=function(e,t,n,r,i,o,a){var c={api:"fetch",request:{method:ze(e,t,r),timestamp:a,url:q(e instanceof r?e.url:e),headers:Fe(i,e.headers,t.headers)},response:{status:n&&n.status||0,is_custom_error:!1,timestamp:F()},duration:F()-a},u=o.collectBodyOnError,l=o.extraExtractor,d=function(){var n;u&&(c.request.body=null===(n=Be(e,t,r))||void 0===n?void 0:n.toString())};if(n)try{var f=Fe(i,n.headers);c.response.headers=f;try{-1!==(f["content-type"]||"").indexOf("application/json")&&l&&n.clone().json().then((function(n){var i,o=l(n,c,null===(i=Be(e,t,r))||void 0===i?void 0:i.toString());o&&(c.extra=o,c.response.is_custom_error=!0,d())})).catch(s)}catch(e){}n.status>=400&&d()}catch(e){}else d();return c},Ge="fetch",qe={autoWrap:!0,setContextAtReq:function(){return a},ignoreUrls:[],collectBodyOnError:!1},Ve=["name","message","stack","filename","lineno","colno"],$e=function(e){var t,n,r;return function(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMError]":case"[object DOMException]":return!0;default:return e instanceof Error}}(e)?(r=Ve,t=(n=e)&&c(n)?r.reduce((function(e,t){return e[t]=n[t],e}),{}):n):(l(e)||"undefined"!=typeof Event&&function(e,t){try{return e instanceof t}catch(e){return!1}}(e,Event)||p(e))&&(t={message:w(e)}),t},He=function(e){return n=e,"[object ErrorEvent]"===Object.prototype.toString.call(n)?function(e){var t=$e(e.error);if(!t)return t;var n=e.colno,r=e.lineno,i=e.filename;return n&&!t.colno&&(t.colno=String(n)),r&&!t.lineno&&(t.lineno=String(r)),i&&!t.filename&&(t.filename=i),t}(e):function(e){return"[object PromiseRejectionEvent]"===Object.prototype.toString.call(e)}(e)?function(e){var n;try{var r=void 0;if("reason"in e?r=e.reason:"detail"in e&&"reason"in e.detail&&(r=e.detail.reason),r){var i=$e(r);return t(t({},i),{name:null!==(n=i&&i.name)&&void 0!==n?n:"UnhandledRejection"})}}catch(e){}}(e):$e(e);var n},We="jsError",Ke=function(e){return"hidden"===e.visibilityState},Je=["hidden_3",function(e,t){var n=U(),r=B();if(n&&r){var i=function(t){e("pagehide"===t.type||Ke(n))},o=ee(n,"visibilitychange",i,!0),s=Q(r,"pagehide",i,!0);t((function(){o(),s()}),(function(e){e(Ke(n))}))}}],Ye=["unload_0",function(e,t){var r=B();if(r){var i=n(te(e),1)[0],o=function(){i()},s=[];["unload","beforeunload","pagehide"].forEach((function(e){s.push(Q(r,e,o,!1))})),t((function(){s.forEach((function(e){return e()}))}))}}],Xe=["hash_0",function(e,t){var n=B();if(n){var r=Q(n,"hashchange",(function(){return e(location.href)}),!0);t((function(){r()}))}}],Ze=["history_0",function(e,t){var n=B()&&window.history,r=B();if(n&&r){var i=[],o=function(){return e(location.href)},s=function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];try{e.apply(n,t)}finally{o()}}};i.push(S(n,"pushState",s)(),S(n,"replaceState",s)()),i.push(Q(r,"popstate",o,!0)),t((function(){i.forEach((function(e){return e()}))}))}}],Qe=function(e){return et(e,F())},et=function(e,t){return e+"_"+t},tt=function(e){return"manual"===e},nt="error_weight",rt="duration_apdex",it="perf_apdex",ot=function(e,t){var n=e[0]+e[1]+e[2],r=e[0]/n;return e[2]/n>t.frustrating_threshold?2:r>t.satisfying_threshold||0===n?0:1},st=function(e,t){return function(n,r){var i=n.payload;switch(n.ev_type){case"performance":var o=i.name;i.isSupport&&e(r[it],o,i.value);break;case we:e(r[it],"action",i.duration||0);break;case ye:t(r[nt],0);break;case be:if(i.response.is_custom_error||i.response.status>=400)t(r[nt],1);else{var s=i.response.timing;s&&e(r[rt],0,s.duration)}break;case"resource_error":t(r[nt],2);break;case"blank_screen":t(r[nt],3);break;case"resource":e(r[rt],1,i.duration);break;case"performance_longtask":i.longtasks.forEach((function(t){e(r[rt],2,t.duration)}))}}},at=function(){var e,t,n=function(){e=[0,0,0],t=function(){var e;return(e={error_count:[0,0,0,0],duration_count:[0,0,0]})[it]={},e}()};return n(),[function(n,r,i){var o=n&&n[r];if(o&&!(i<=0)){var s=i<(o[0].threshold||0)?0:i>(o[1].threshold||0)?2:1;if(e[s]+=o[s].weight,"string"==typeof r){var a=et(r,s),c=t[it][a];t[it][a]=(c||0)+1}else 2===s&&(t.duration_count[r]+=1)}},function(n,r){n&&(e[2]+=n[r],t.error_count[r]+=1)},function(){return[e,t]},n]},ct=function(e,t,r,i){var o,s,a=i.sendInit,c=i.initPid,u=i.routeMode,l=i.extractPid,d=i.onPidUpdate,f=tt(u)?function(){return""}:function(e){return function(t){var n;return"hash"===e?(null===(n=V(t).hash)||void 0===n?void 0:n.replace(/^#/,""))||"/":V(t).path}}(u),h=l||function(){},p=n(function(e,t,n,r){var i=n,o=t;return r&&r(t),[function(t,n,s){"user_set"!==t&&n!==i?(i=n,o=null!=s?s:i,r&&r(o),e(t,o)):"user_set"===t&&n!==o&&(o=n,r&&r(o),e(t,o))},function(){t&&e("init",t)}]}(function(e){return function(t,n){e(function(e,t){return{ev_type:me,payload:{pid:t,source:e}}}(t,n))}}(e),c||function(e){var t;return null!==(t=h(e))&&void 0!==t?t:f(e)}(location.href),f(location.href),d),2),g=p[0],_=p[1];if(!tt(u)){var m=n((o=function(e,t){return g(e,f(t),h(t))},s="",[function(e,t){t!==s&&o(e,s=t)}]),1)[0];r.length&&r.forEach((function(e){return t.push(e[0]((function(e){return m(u,e)})))}))}return a&&_(),[g.bind(null,"user_set")]},ut="pageview",lt={sendInit:!0,routeMode:"history",apdex:2};function dt(e){return(null==e?void 0:e.effectiveType)||(null==e?void 0:e.type)||""}var ft=function(e,t){var n=e.common||{};return n.sample_rate=t,e.common=n,e},ht=function(e,t,n,r,i){return e?(o=i(r,t),function(){return o}):function(){return n(t)};var o},pt=function(e,t){try{return"rule"===t.type?function(e,t,n,r){var i=b(e,t,(function(e,t){return e[t]}));return void 0!==i&&function(e,t,n){switch(n){case"eq":return v(t,e);case"neq":return!v(t,e);case"gt":return e>t[0];case"gte":return e>=t[0];case"lt":return e<t[0];case"lte":return e<=t[0];case"regex":return Boolean(e.match(new RegExp(t.join("|"))));case"not_regex":return!e.match(new RegExp(t.join("|")));default:return!1}}(i,function(e,t){return e.map((function(e){switch(t){case"number":return Number(e);case"boolean":return"1"===e;default:return String(e)}}))}(r,"boolean"==typeof i?"bool":h(i)?"number":"string"),n)}(e,t.field,t.op,t.values):"and"===t.type?t.children.every((function(t){return pt(e,t)})):t.children.some((function(t){return pt(e,t)}))}catch(e){return Y(e),!1}},gt=function(e,t,n){var r=t.url,i=t.data,o=t.success,a=void 0===o?s:o,c=t.fail,u=void 0===c?s:c,l=t.getResponseText,d=void 0===l?s:l,f=t.withCredentials,h=void 0!==f&&f,p=new n;p.withCredentials=h,p.open(e,r,!0),p.setRequestHeader("Content-Type","application/json"),p.onload=function(){null==d||d(this.responseText);try{if(this.status>=400)u(new Error(this.responseText||this.statusText));else if(this.responseText){var e=JSON.parse(this.responseText);a(e)}else a({})}catch(e){u(e)}},p.onerror=function(){u(new Error("Network request failed"))},p.onabort=function(){u(new Error("Network request aborted"))},p.send(i)},_t=function(){var e=function(){if("function"==typeof XMLHttpRequest&&f(XMLHttpRequest))return XMLHttpRequest}();return e?{useBeacon:!0,get:function(t){gt("GET",t,e)},post:function(t){gt("POST",t,e)}}:{get:s,post:s}};function mt(e){var t=function(e){var t,n=e.transport,r=e.endpoint,o=e.size,s=void 0===o?10:o,a=e.wait,c=void 0===a?1e3:a,u=[],l=0;function d(){if(u.length){var e=this.getBatchData();n.post({url:r,data:e,fail:function(n){t&&t(n,e)}}),u=[]}}return{getSize:function(){return s},getWait:function(){return c},setSize:function(e){s=e},setWait:function(e){c=e},getEndpoint:function(){return r},setEndpoint:function(e){r=e},send:function(e){u.push(e),u.length>=s&&d.call(this),clearTimeout(l),l=setTimeout(d.bind(this),c)},flush:function(){clearTimeout(l),d.call(this)},getBatchData:function(){return u.length?i(u):""},clear:function(){clearTimeout(l),u=[]},fail:function(e){t=e}}}(e),r=t.send;return function(e){var t=B();if(t){var r=n(te(e),1)[0];["unload","beforeunload","pagehide"].forEach((function(e){Q(t,e,r,!1)}))}}((function(){if(e.transport.useBeacon){var n=function(){var e=B();return e&&e.navigator.sendBeacon?{get:function(){},post:function(t,n){e.navigator.sendBeacon(t,n)}}:{get:s,post:s}}(),o=t.getBatchData();o&&(n.post(t.getEndpoint(),o),t.clear()),t.send=function(e){n.post(t.getEndpoint(),i([e]))},function(e){var t=U(),n=B();if(t&&n){var r=s;r=ee(t,"visibilitychange",(function(){"visible"===t.visibilityState&&(e(),r())}),!0)}}((function(){t.send=r}))}else t.flush()})),t}var vt="mon-va.byteoversea.com",yt=vt,bt="https://sf16-short-va.bytedapm.com/slardar/fe/sdk-web/plugins",Et="1.14.1",wt="SDK_SLARDAR_WEB",St="/monitor_web/settings/browser-settings",Tt="/monitor_browser/collect/batch/",Ct="SLARDAR",Ot=["/log/sentry/",Tt,St],At="session",It=["blankScreen","action"],Rt={sample_rate:1,include_users:[],sample_granularity:At,rules:{}};function Dt(e,t,n){void 0===n&&(n=Nt),function(e){var t=B(),n=U();t&&n&&("complete"!==n.readyState?Q(t,"load",(function(){setTimeout((function(){e()}),0)}),!1):e())}((function(){e.on("init",(function(){n(e,t)}))}))}var xt=function(e,t,n,r){void 0===r&&(r=kt);var i=t.config(),o=i.plugins,s=i.pluginBundle,a=e.filter((function(e){return o[e]&&!t.destroyAgent.has(e)})),c=function(){return a.forEach((function(e){return Lt(t,e,n)}))};a.every((function(e){return zt(e,n)}))?c():r(t,{name:s.name},c)},Mt=function(e,t,n,r){void 0===r&&(r=kt);var i=t.config().plugins;e.filter((function(e){return i[e]&&!t.destroyAgent.has(e)})).forEach((function(e){zt(e,n)?Lt(t,e,n):r(t,{name:e,config:i[e]},(function(){return Lt(t,e,n)}))}))},Pt=function(e){return function(n,r){var i,o=e.config().pluginBundle;e.destroyAgent.has(n)&&e.destroyAgent.remove(n),void 0!==r&&e.set({plugins:t(t({},e.config().plugins),(i={},i[n]=r,i))}),o&&~o.plugins.indexOf(n)?xt([n],e):Mt([n],e)}};function Nt(e,t,n){void 0===n&&(n=kt);var r=e.config().pluginBundle,i=r?r.plugins:[];xt(i,e,t,n),Mt(It,e,t,n),e.provide("reloadPlugin",Pt(e))}function kt(e,t,n,r){var i=t.name,o=t.config;void 0===r&&(r=ne);var s=function(e,t,n){var r;return null!==(r=null==n?void 0:n.path)&&void 0!==r?r:e.config().pluginPathPrefix+"/"+t.replace(/([a-z])([A-Z])/g,(function(e,t,n){return t+"-"+n.toLowerCase()}))+"."+Et+".js"}(e,i,o);r(s,(function(){n()}))}function Lt(e,t,n){if(void 0===n&&(n=J(B())),n){var r=jt(n,t);if(r)try{if(e.destroyAgent.has(t))return;r.apply(e)}catch(e){Y(e),O("[loader].applyPlugin failed",t,e)}else O("[loader].applyPlugin not found",t)}}function jt(e,t){return e.plugins.filter((function(e){return e.name===t&&e.version===Et}))[0]}function zt(e,t){return void 0===t&&(t=J(B())),!(!t||!t.plugins||!jt(t,e))}function Ft(e,t,n){void 0===n&&(n=J(B())),n&&n.plugins&&(jt(n,e)||n.plugins.push({name:e,version:Et,apply:t}))}function Bt(e){var t,n;try{for(var r=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(["userId","deviceId","sessionId","env"]),i=r.next();!i.done;i=r.next()){var o=i.value;e[o]||delete e[o]}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e}function Ut(e){var n=e.plugins||{};for(var r in n)n[r]&&!c(n[r])&&(n[r]={});return Bt(t(t({},e),{plugins:n}))}function Gt(e){return c(e)&&"bid"in e}function qt(e){return Bt(t({},e))}function Vt(e){var t;if(!e)return{};var n=e.sample,r=e.plugins,i=e.timestamp,o=e.quota_rate,s=void 0===o?1:o,a=e.apdex;if(!n)return{};var c=n.sample_rate,u=n.sample_granularity,l=void 0===u?At:u,d=n.include_users,f=n.rules;return{sample:{include_users:d,sample_rate:c*s,sample_granularity:l,rules:(void 0===f?[]:f).reduce((function(e,t){var n=t.name,r=t.enable,i=t.sample_rate,o=t.conditional_sample_rules;return e[n]={enable:r,sample_rate:i,conditional_sample_rules:o},e}),{})},plugins:{heatmap:null!==(t=null==r?void 0:r.heatmap)&&void 0!==t&&t},apdex:a,serverTimestamp:i}}var $t=function(e,t){return void 0===t&&(t=Tt),(e&&e.indexOf("//")>=0?"":"https://")+e+t},Ht=function(e,t){return void 0===t&&(t=St),(e&&e.indexOf("//")>=0?"":"https://")+e+t},Wt=function(){return D()},Kt=function(e){var t=[];return e.observe=function(e){t.push(e)},e.push=function(){for(var i,o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return o.forEach((function(e){t.forEach((function(t){return t(e)}))})),(i=[].push).call.apply(i,r([e],n(o),!1))},e},Jt=function(){var e,t,n,r=B(),i=U();if(r&&i)return(null===(n=null===(t=null===(e=function(){if(!document)return null;if(document.currentScript)return document.currentScript;try{throw new Error}catch(u){var e=0,t=/at\s+(.*)\s+\((.*):(\d*):(\d*)\)/i.exec(u.stack),n=t&&t[2]||!1,r=t&&t[3]||0,i=document.location.href.replace(document.location.hash,""),o="",s=document.getElementsByTagName("script");if(n===i){var a=document.documentElement.outerHTML,c=new RegExp("(?:[^\\n]+?\\n){0,"+(r-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i");o=a.replace(c,"$1").trim()}for(;e<s.length;e++){if("interactive"===s[e].readyState)return s[e];if(s[e].src===n)return s[e];if(n===i&&s[e].innerHTML&&s[e].innerHTML.trim()===o)return s[e]}return null}}())||void 0===e?void 0:e.getAttribute("src"))||void 0===t?void 0:t.match(/globalName=(.+)$/))||void 0===n?void 0:n[1])||"Slardar"},Yt=function(e){return Ct+e},Xt=function(e,t){try{var n=localStorage.getItem(e);if(!n||!ie()||"{"!==n[0])return;se(e,JSON.parse(n),t)}catch(e){}},Zt=function(e,t){void 0===e&&(e="");var n={userId:D(),deviceId:D()};if(t<=0)return n;var r=Yt(e);Xt(r,t);var i=oe(r);return{userId:(null==i?void 0:i.userId)||n.userId,deviceId:(null==i?void 0:i.deviceId)||n.deviceId}},Qt=function(e){var t=e.bid,n=e.userId,r=e.deviceId,i=e.storageExpires,o=Yt(t);se(o,{userId:n,deviceId:r},ae(i))},en={get:function(){return this.__SLARDAR__REPALCE__HOLDER__}},tn=function(e){var n,r,i=e,o={},a=en.get(),c=s,u=s;return{getConfig:function(){return i},setConfig:function(e){return o=t(t({},o),e||{}),l(),n||(n=e,i.useLocalConfig||!i.bid?(r={},c()):a?d():nn(i.transport,i.domain,i.bid,(function(e){a=e,d()}))),i},onChange:function(e){u=e},onReady:function(e){c=function(){Qt(i),e()},r&&c()}};function l(){var n=t(t(t({},e),r||{}),o);n.plugins=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n={},r=0;r<e.length;)n=_(n,e[r++]);return n}(e.plugins,(null==r?void 0:r.plugins)||{},o.plugins||{}),n.sample=rn(rn(e.sample,null==r?void 0:r.sample),o.sample),i=n,u()}function d(){r=Vt(a),l(),c()}};function nn(e,t,n,r){e.get({withCredentials:!0,url:Ht(t)+"?bid="+n+"&store=1",success:function(e){r(e.data||{})},fail:function(){r({sample:{sample_rate:.001}})}})}function rn(e,i){if(!e||!i)return e||i;var o=t(t({},e),i);return o.include_users=r(r([],n(e.include_users||[]),!1),n(i.include_users||[]),!1),o.rules=r(r([],n(Object.keys(e.rules||{})),!1),n(Object.keys(i.rules||{})),!1).reduce((function(o,s){var a,c;return s in o||(s in(e.rules||{})&&s in(i.rules||{})?(o[s]=t(t({},e.rules[s]),i.rules[s]),o[s].conditional_sample_rules=r(r([],n(e.rules[s].conditional_sample_rules||[]),!1),n(i.rules[s].conditional_sample_rules||[]),!1)):o[s]=(null===(a=e.rules)||void 0===a?void 0:a[s])||(null===(c=i.rules)||void 0===c?void 0:c[s])),o}),{}),o}var on,sn={build:function(e){return{ev_type:e.ev_type,payload:e.payload,common:t(t({},e.extra||{}),e.overrides||{})}}},an=function(e,n){var r=n||{},i=r.pid,o=void 0===i?"":i,s=r.viewId,a=void 0===s?"":s,c={url:$(),timestamp:F(),sdk_version:Et,sdk_name:wt,pid:o,view_id:a};return t(t({},e),{extra:t(t({},c),e.extra||{})})},cn=function(e){e.on("report",(function(t){return an(t,e.config())}))},un={sri:"reportSri",st:"reportResourceError",err:"captureException",reject:"captureException"},ln=function(e){return Object.keys(e).reduce((function(e,t){return e[t]=[],e}),{})},dn=function(e){return Object.keys(e).reduce((function(t,n){return t[e[n]]?t[e[n]].push(n):t[e[n]]=[n],t}),{})},fn=function(e,n,r){return function(i,o,s,a){var c;void 0===s&&(s=F()),void 0===a&&(a=location.href);var u=t(t({},X(e)),{url:a,timestamp:s});n[i]&&(e[r[i]]?Z(e,u)((function(){e[r[i]](o)})):null===(c=n[i])||void 0===c||c.push([o,u]))}},hn=function(e,t,r){return function(i){i in r&&r[i].forEach((function(r){var o;null===(o=t[r])||void 0===o||o.forEach((function(t){var r=n(t,2),o=r[0],s=r[1];Z(e,s)((function(){e[i](o)}))})),t[r]=null}))}},pn=function(e,t){return"err"===t?!1!==b(e,"plugins."+We+".onerror",(function(e,t){return e[t]})):"reject"!==t||!1!==b(e,"plugins."+We+".onunhandledrejection",(function(e,t){return e[t]}))},gn=function(e,t){var r;void 0===t&&(t=un);var i=ln(t),o=dn(t),s=fn(e,i,t);(null===(r=e.p)||void 0===r?void 0:r.a)&&"observe"in e.p.a&&e.p.a.observe((function(t){var r=n(t,5);r[0];var i=r[1],o=r[2],a=r[3],c=r[4],u=e.config();pn(u,i)&&s(i,o,a,c)})),e.on("init",(function(){var t,r=e.config();null===(t=e.p)||void 0===t||t.a.forEach((function(e){var t=n(e,5);t[0];var i=t[1],o=t[2],a=t[3],c=t[4];pn(r,i)&&s(i,o,a,c)})),e.p&&e.p.a&&(e.p.a.length=0),e.provide("precollect",(function(e,t,n,i){void 0===n&&(n=F()),void 0===i&&(i=location.href),pn(r,e)&&s(e,t,n,i)}))})),e.on("provide",hn(e,i,o))},_n=function(e){var t=n(e,2),r=t[0],i=t[1];return{ev_type:ye,payload:{error:He(r),breadcrumbs:[],extra:i||{}},extra:{bid:"slardar_sdk"}}},mn=function(e,t){void 0===t&&(t=.001);var n=J(B());n&&(n.errors||(n.errors=[]),"observe"in n.errors||A(t)&&(n.errors=Kt(n.errors),n.errors.forEach((function(t){e.report(_n(t))})),n.errors.observe((function(t){e.report(_n(t))}))))},vn=function(e){var n,r=!1;e.on("init",(function(){n=(new Date).getTime(),e.on("config",(function(){var i,o=null===(i=e.config())||void 0===i?void 0:i.serverTimestamp;if(!(isNaN(o)||Number(o)<=0||r)){r=!0;var s=(new Date).getTime();if(s-n<700&&o){var a=o-(s+n)/2;!isNaN(a)&&(a>0||a<-6e5)&&e.on("beforeBuild",(function(e){var n;return t(t({},e),{extra:t(t({},null!==(n=e.extra)&&void 0!==n?n:{}),{sdk_offset:null!=a?a:0})})}))}}}))}))},yn=function(e,n){var r={};return r.bid=n.bid,r.user_id=n.userId,r.device_id=n.deviceId,r.session_id=n.sessionId,r.release=n.release,r.env=n.env,t(t({},e),{extra:t(t({},r),e.extra||{})})},bn=function(e){e.on("beforeBuild",(function(t){return yn(t,e.config())}))},En=function(e){e.on("start",(function(){var t=e.config().bid,n=e.getSender();n.setEndpoint(n.getEndpoint()+"?biz_id="+t)}))},wn=function(e){var t=ae(e.storageExpires),n=Zt(e.bid,t);return{bid:"",pid:"",viewId:Qe("_"),userId:n.userId,deviceId:n.deviceId,storageExpires:t,sessionId:Wt(),domain:vt,pluginBundle:{name:"commonMonitors",plugins:["breadcrumb","jsError","performance","resourceError","resource"]},pluginPathPrefix:bt,plugins:{ajax:{ignoreUrls:Ot},fetch:{ignoreUrls:Ot},breadcrumb:{},pageview:{},jsError:{},resource:{},resourceError:{},performance:{},tti:{},fmp:{},blankScreen:!1,heatmap:!1},release:"",env:"production",sample:Rt,transport:_t()}},Sn=function(e){var i=void 0===e?{}:e,o=i.createSender,s=void 0===o?function(e){return mt({size:20,endpoint:$t(e.domain),transport:e.transport})}:o,a=i.builder,c=void 0===a?sn:a,u=i.createDefaultConfig,l=k({validateInitConfig:Gt,initConfigNormalizer:Ut,userConfigNormalizer:qt,createSender:s,builder:c,createDefaultConfig:void 0===u?wn:u,createConfigManager:tn});mn(l),function(e){var n=function(){var e={},n={},r={set:function(t,i){return e[t]=i,n[t]=w(i),r},merge:function(i){return e=t(t({},e),i),Object.keys(i).forEach((function(e){n[e]=w(i[e])})),r},delete:function(t){return delete e[t],delete n[t],r},clear:function(){return e={},n={},r},get:function(e){return n[e]},toString:function(){return t({},n)}};return r}();e.provide("context",n),e.on("report",(function(e){return e.extra||(e.extra={}),e.extra.context=n.toString(),e}))}(l);var d=J(B());!function(e,t){var r=t||{},i={};e.provide("setFilter",(function(e,t){i[e]||(i[e]=[]),i[e].push(t)})),e.provide("initSubject",(function(t){var o=n(t,2),s=o[0],a=o[1],c=function(e){return e.split("_")[0]}(s),u=!!c&&i[c];return r[s]||(r[s]=M(a,(function(){r[s]=void 0}))),u?z(e,[s,P(r[s],u)]):r[s]})),e.provide("getSubject",(function(e){return r[e]})),e.provide("privateSubject",{})}(l,d&&d.subject),vn(l),bn(l),cn(l),function(e){var n=function(){var e=function(){if(B()&&"navigator"in window)return window.navigator}();if(e)return e.connection||e.mozConnection||e.webkitConnection}(),r=dt(n);n&&(n.onchange=function(){r=dt(n)}),e.on("report",(function(e){return t(t({},e),{extra:t(t({},e.extra||{}),{network_type:r})})}))}(l),En(l);var f=L(l,X,(function(e,t,i){return Z(e,t)((function(){var e=n(i),t=e[0],o=e.slice(1);l[t].apply(l,r([],n(o),!1))}))}));return function(e,t){e.on("init",(function(){var n=[],r=function(r){r.forEach((function(r){var i=r.name;v(n,i)||(n.push(i),r.setup(e),t(i,r.setup),e.destroyAgent.set(i,i,[function(){n=y(n,i),r.tearDown&&r.tearDown()}]))}))};e.provide("applyIntegrations",r);var i=e.config();i&&i.integrations&&r(i.integrations)}))}(f,Ft),f},Tn=((on={})[ut]=function(e){e.on("init",(function(){var r,i=null===(r=e.config())||void 0===r?void 0:r.plugins[ut];!function(e,r){var i,o=re(r,lt);if(o&&G()){var a=o.routeMode,c=o.apdex,u=e.report.bind(e),l=s;if(c){var d=[],f=n(function(e,t,r,i){var o,s,a,c=n(r,2),u=c[0],l=c[1],d=2===i.apdex,f=void 0,h=void 0,p=void 0,g=!1,_=n(at(),4),m=_[0],v=_[1],y=_[2],b=_[3],E=n(at(),4),w=E[0],S=E[1],T=E[2],C=E[3],O=n((o={start:F(),end:0,time_spent:0,is_bounced:!1,entry:"",exit:"",p_count:0,a_count:0},[function(e,t){var r=n(e,3),i=r[0],s=r[1],a=r[2];o.end=F(),o.time_spent+=t&&t.time_spent||0,o.last_page=t,o.p_count+=1,o.rank=i,o.apdex=s,o.apdex_detail=a;var c=U();c&&(o.is_bounced=!function(e){return"complete"===e.readyState}(c))},function(e,t){o.time_spent+=e.time_spent,o.p_count+=1,o.exit=t},function(){o.a_count+=1},function(e){o.entry=e,o.exit=e},function(){return o}]),5),A=O[0],I=O[1],R=O[2],D=O[3],x=O[4],M=n((s=0,a=void 0,[function(e){if(e){if(!a)return;s+=F()-a,a=void 0}else a=F()},function(){a&&(s+=F()-a);var e=s;return s=0,a=F(),e}]),2),P=M[0],N=M[1];t.push(u[0](P)),!d&&t.push(l[0]((function(){if(g){var t=n(T(),2),r=t[0],i=t[1],o=ot(r,p);A([o,r,i],j()),e({ev_type:ve,payload:x()}),C()}})));var k=st(m,v),L=st(w,S),j=function(){var e=n(y(),2),t=e[0],r=e[1];return{start:f[0],pid:f[1],view_id:f[2],end:F(),time_spent:N(),apdex:t,rank:ot(t,p),detail:r}};return t.push((function(){g=!1})),[function(e,t){if(!f)return f=[F(),e,t],D(e),void(g=!(!p||!f));g&&(h=j(),I(h,e)),f=[F(),e,t],b()},function(e){g&&(d||(L(e,p),e.ev_type===we&&R()),e.common.pid===f[1]&&k(e,p))},function(t){g&&(t.payload.last=h),e(t)},function(e){if(!e)return t.forEach((function(e){return e()})),void(t.length=0);g=!(!(p=e)||!f)}]}(e.report.bind(e),d,[j(e,Je),j(e,Ye)],o),4),h=f[0],p=f[1],g=f[2],_=f[3];u=g,l=h,e.on("send",p),d.push((function(){return e.off("send",p)})),e.on("start",(function(){_(e.config().apdex)})),N(e,ut,ve,d)}var m=[],v=n(ct(u,m,tt(a)?[]:[e.initSubject(Xe),e.initSubject(Ze)],t(t({},o),{initPid:null===(i=e.config())||void 0===i?void 0:i.pid,onPidUpdate:function(t){var n=Qe(t);l(t,n),e.set({pid:t,viewId:n,actionId:void 0})}})),1)[0];z(e,["f_view_0",K(e)],-1);var y=function(){v(e.config().pid)};e.on("config",y),m.push((function(){return e.off("config",y)})),N(e,ut,me,m),e.provide("sendPageview",v)}}(e,i)}))},on[Me]=function(e){e.on("init",(function(){var n,r=null===(n=e.config())||void 0===n?void 0:n.plugins[Me];!function(e,n){var r=re(n,Pe);if(r){var i=[],o=t(t({},r),{setContextAtReq:function(){return W(e)},setTraceHeader:Ce(r.trace)}),s=function(){return j(e,_e)};o.autoWrap&&De(i,[j(e,["xhr_0",fe(XMLHttpRequest&&XMLHttpRequest.prototype)]),s],o),N(e,Me,be,i),e.provide("wrapXhr",(function(e){function t(){var t=new e;return De(i,[M(fe(t)),s],o),t}return t.prototype=new e,["DONE","HEADERS_RECIEVED","LOADING","OPENED","UNSENT"].forEach((function(n){t[n]=e[n]})),t}))}}(e,r)}))},on[Ge]=function(e){e.on("init",(function(){var n,r=null===(n=e.config())||void 0===n?void 0:n.plugins[Ge];!function(e,n){var r=re(n,qe);if(r){var i=[],o=t(t({},r),{setContextAtReq:function(){return W(e)},setTraceHeader:Ce(r.trace)}),s=function(){return j(e,_e)};o.autoWrap&&Ne(i,[j(e,pe),s],o),N(e,Ge,be,i),e.provide("wrapFetch",(function(e){var t=void 0;return Ne(i,[M((function(n){t=he(e,n)})),s],o),t}))}}(e,r)}))},on),Cn=function(e){void 0===e&&(e={});var t=Sn(e);return function(e){e.on("start",(function(){var t=e.config(),n=function(e,t,n,r,i){if(!t)return a;var o=t.sample_rate,s=t.include_users,c=t.sample_granularity,u=t.rules,l=t.r,d=void 0===l?Math.random():l;if(v(s,e))return function(e){return ft(e,1)};var f="session"===c,h=ht(f,o,n,d,r),p=function(e,t,n,r,i,o){var s={};return Object.keys(e).forEach((function(a){var c=e[a],u=c.enable,l=c.sample_rate,d=c.conditional_sample_rules;u?(s[a]={enable:u,sample_rate:l,effectiveSampleRate:l*n,hit:ht(t,l,r,i,o)},d&&(s[a].conditional_hit_rules=d.map((function(e){var s=e.sample_rate,a=e.filter;return{sample_rate:s,hit:ht(t,s,r,i,o),effectiveSampleRate:s*n,filter:a}})))):s[a]={enable:u,hit:function(){return!1},sample_rate:0,effectiveSampleRate:0}})),s}(u,f,o,n,d,r);return function(e){var t;if(!h())return f&&i[0](),!1;if(!(e.ev_type in p))return ft(e,o);if(!p[e.ev_type].enable)return f&&i[1](e.ev_type),!1;if(null===(t=e.common)||void 0===t?void 0:t.sample_rate)return e;var n=p[e.ev_type],r=n.conditional_hit_rules;if(r)for(var s=0;s<r.length;s++)if(pt(e,r[s].filter))return!!r[s].hit()&&ft(e,r[s].effectiveSampleRate);return n.hit()?ft(e,n.effectiveSampleRate):((!r||!r.length)&&f&&i[1](e.ev_type),!1)}}(t.userId,t.sample,A,I,[function(){e.destroy()},function(t){e.destroyAgent.removeByEvType(t)}]);e.on("build",n)}))}(t),gn(t),function(e){e.provide("sendEvent",(function(t){var n=function(e){if(e&&c(e)&&e.name&&p(e.name)){var t={name:e.name,type:"event"};if("metrics"in e&&c(e.metrics)){var n=e.metrics,r={};for(var i in n)h(n[i])&&(r[i]=n[i]);t.metrics=r}if("categories"in e&&c(e.categories)){var o=e.categories,s={};for(var i in o)s[i]=w(o[i]);t.categories=s}return"attached_log"in e&&p(e.attached_log)&&(t.attached_log=e.attached_log),t}}(t);n&&e.report({ev_type:Ee,payload:n,extra:{timestamp:F()}})})),e.provide("sendLog",(function(t){var n=function(e){if(e&&c(e)&&e.content&&p(e.content)){var t={content:w(e.content),type:"log",level:"info"};if("level"in e&&(t.level=e.level),"extra"in e&&c(e.extra)){var n=e.extra,r={},i={};for(var o in n)h(n[o])?r[o]=n[o]:i[o]=w(n[o]);t.metrics=r,t.categories=i}return"attached_log"in e&&p(e.attached_log)&&(t.attached_log=e.attached_log),t}}(t);n&&e.report({ev_type:Ee,payload:n,extra:{timestamp:F()}})}))}(t),Object.keys(Tn).forEach((function(e){Ft(e,Tn[e]),Tn[e](t)})),Dt(t),t.provide("create",Cn),t},On="precollect",An=3e5,In=Cn(),Rn=B();Rn&&function(e,t){if("addEventListener"in e){t.pcErr=function(n){var r=(n=n||e.event).target||n.srcElement||{};r instanceof Element||r instanceof HTMLElement?t(On,"st",{tagName:r.tagName,url:r.getAttribute("href")||r.getAttribute("src")}):t(On,"err",n.error)},t.pcRej=function(n){n=n||e.event,t(On,"reject",n.reason||n.detail&&n.detail.reason)};var n=[];n.push(Q(e,"error",t.pcErr,!0)),n.push(Q(e,"unhandledrejection",t.pcRej,!0)),setTimeout((function(){n.forEach((function(e){return e()}))}),An)}"PerformanceObserver"in e&&"PerformanceLongTaskTiming"in e&&(t.pp={entries:[]},t.pp.observer=new PerformanceObserver((function(e){t.pp.entries=t.pp.entries.concat(e.getEntries())})),t.pp.observer.observe({entryTypes:["longtask"]}),setTimeout((function(){t.pp.observer.disconnect()}),An))}(Rn,In),e.BATCH_REPORT_PATH=Tt,e.DEFAULT_IGNORE_PATHS=Ot,e.DEFAULT_SAMPLE_CONFIG=Rt,e.DEFAULT_SAMPLE_GRANULARITY=At,e.DEFAULT_SENDER_SIZE=20,e.DEVICE_ID_COOKIE_NAME="MONITOR_DEVICE_ID",e.EV_METHOD_MAP=un,e.EXTRA_INDEPENDENT_PLUGINS=It,e.InjectConfigPlugin=bn,e.InjectEnvPlugin=cn,e.InjectQueryPlugin=En,e.ObserveErrorPlugin=mn,e.PLUGINS_LOAD_PREFIX=bt,e.PluginMap=Tn,e.PrecollectPlugin=gn,e.REPORT_DOMAIN=vt,e.SDK_NAME=wt,e.SDK_VERSION=Et,e.SETTINGS_DOMAIN=yt,e.SETTINGS_PATH=St,e.STORAGE_PREFIX=Ct,e.TimeCalibrationPlugin=vn,e.USER_ID_COOKIE_NAME="MONITOR_WEB_ID",e.addConfigToReportEvent=yn,e.addEnvToSendEvent=an,e.applyPlugin=Lt,e.browserBuilder=sn,e.buildSelfErrorEvent=_n,e.configHolder=en,e.createBrowserClient=Cn,e.createBrowserConfigManager=tn,e.createMinimalBrowserClient=Sn,e.createStore=ln,e.default=In,e.doesPluginExistInRegistry=zt,e.filterIfPluginDisabled=pn,e.getConsumeStored=hn,e.getDefaultConfig=wn,e.getDefaultSessionId=Wt,e.getDefaultUserIdAndDeviceId=Zt,e.getGlobalInstance=function(){var e=B(),t=Jt();if(e&&t)return e[t]},e.getGlobalName=Jt,e.getPluginFromRegistry=jt,e.getReportUrl=$t,e.getServerConfig=nn,e.getSettingsUrl=Ht,e.getStorageKey=Yt,e.getStoreOrConsume=fn,e.glueCodeForStorageSecurity=Xt,e.hasSetStorageItem=function(e){void 0===e&&(e="");var t=Yt(e);return!!oe(t)},e.loadCombinedPlugins=xt,e.loadIndependentPlugins=Mt,e.loadNow=kt,e.loadPlugins=Nt,e.loadPluginsOnPageLoad=Dt,e.mergeSampleConfig=rn,e.normalizeInitConfig=Ut,e.normalizeStrictFields=Bt,e.normalizeUserConfig=qt,e.parseServerConfig=Vt,e.register=Ft,e.reverseMap=dn,e.setStorageUserIdAndDeviceId=Qt,e.toObservableArray=Kt,e.validateInitConfig=Gt}(un)),un),dn={},fn=(cn||(cn=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)};function n(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function r(e,t,n){if(2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var i=function(e){return JSON.stringify({ev_type:"batch",list:e})},o=["init","start","config","beforeDestroy","provide","beforeReport","report","beforeBuild","build","beforeSend","send","beforeConfig"],s=function(){return{}};function a(e){return e}function c(e){return"object"==typeof e&&null!==e}var u=Object.prototype;function l(e){if(c(e)){if("function"==typeof Object.getPrototypeOf){var t=Object.getPrototypeOf(e);return t===u||null===t}return"[object Object]"===u.toString.call(e)}return!1}function d(e){return"[object Array]"===u.toString.call(e)}function f(e){return"function"==typeof e}function h(e){return"number"==typeof e}function p(e){return"string"==typeof e}function g(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function _(e,n){var r=t({},e);for(var i in n)g(n,i)&&void 0!==n[i]&&(c(n[i])&&l(n[i])?r[i]=_(c(e[i])?e[i]:{},n[i]):d(n[i])&&d(e[i])?r[i]=m(e[i],n[i]):r[i]=n[i]);return r}function m(e,t){var n=d(e)?e:[],r=d(t)?t:[];return Array.prototype.concat.call(n,r).map((function(e){return e instanceof RegExp?e:c(e)&&l(e)?_({},e):d(e)?m([],e):e}))}function v(e,t){if(!d(e))return!1;if(0===e.length)return!1;for(var n=0;n<e.length;){if(e[n]===t)return!0;n++}return!1}var y=function(e,t){if(!d(e))return e;var n=e.indexOf(t);if(n>=0){var r=e.slice();return r.splice(n,1),r}return e},b=function(e,t,r){for(var i,o=n(t.split(".")),s=o[0],a=o.slice(1);e&&a.length>0;)e=e[s],s=(i=n(a))[0],a=i.slice(1);if(e)return r(e,s)};var E=function(e,t){var n=function(e){return d(e)&&e.length?function(e){for(var t=[],n=e.length,r=0;r<n;r++){var i=e[r];p(i)?t.push(i.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")):i&&i.source&&t.push(i.source)}return new RegExp(t.join("|"),"i")}(e):null}(e||[]);return!!n&&n.test(t)};function w(e){try{return p(e)?e:JSON.stringify(e)}catch(e){return"[FAILED_TO_STRINGIFY]:"+String(e)}}var S=function(e,t,i,o){return void 0===o&&(o=!0),function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];if(!e)return s;var u=e[t],l=i.apply(void 0,r([u],n(a),!1)),d=l;return f(d)&&o&&(d=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return l.apply(this,e)}catch(t){return f(u)&&u.apply(this,e)}}),e[t]=d,function(n){n||(d===e[t]?e[t]=u:l=u)}}},T=function(e,t,i){return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];if(!e)return s;var c=e[t],u=i.apply(void 0,r([c],n(o),!1)),l=u;return f(l)&&(l=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return u.apply(this,e)}),e[t]=l,function(){l===e[t]?e[t]=c:u=c}}},C=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},O=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},A=function(e){return Math.random()<Number(e)},I=function(e,t){return e<Number(t)},R=function(e){return function(t){for(var n=t,r=0;r<e.length&&n;r++)try{n=e[r](n)}catch(e){C(e)}return n}};function D(){var e=function(){for(var e=new Array(16),t=0,n=0;n<16;n++)3&n||(t=4294967296*Math.random()),e[n]=t>>>((3&n)<<3)&255;return e}();return e[6]=15&e[6]|64,e[8]=63&e[8]|128,function(e){for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);var r=0,i=t;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}(e)}var x=function(e,t){var n=[];try{n=t.reduce((function(t,n){try{var r=n(e);"function"==typeof r&&t.push(r)}catch(e){}return t}),[])}catch(e){}return function(e){return x(e,n)}},M=function(e,t,n){var r=function(e){void 0===e&&(e=3e5);var t,n=[],r=[],i=!1,o=function(e,t,n){var r=0;return-1===n?s:function(){if(e())return r&&clearTimeout(r),void(r=0);0===r&&(r=setTimeout(t,n))}}((function(){return!!n.length}),(function(){i=!0,t&&t[0](),r.forEach((function(e){return e()})),r.length=0,t=void 0}),e),a=function(e){n=y(n,e),!i&&o()};return{next:function(e){return x(e,n)},complete:function(e){r.push(e)},attach:function(e,n){t=[e,n]},subscribe:function(e){if(i)throw new Error("Observer is closed");return n.push(e),t&&t[1]&&t[1](e),o(),function(){return a(e)}},unsubscribe:a}}(n);try{e(r.next,r.attach),t&&r.complete(t)}catch(e){}return[r.subscribe,r.unsubscribe]},P=function(e,t){var r=n(e,1)[0];return function(e,n){var i=r((function(n){var r;return(r=t,function(e){for(var t=!0,n=0;n<r.length&&t;n++)try{t=r[n](e)}catch(e){C(e)}return t})(n)?e(n):s}));n((function(){i()}))}},N=function(e,t,n,r){return e.destroyAgent.set(t,n,r)};function k(e){var t,i,s=e.builder,a=e.createSender,u=e.createDefaultConfig,l=e.createConfigManager,d=e.userConfigNormalizer,f=e.initConfigNormalizer,h=e.validateInitConfig,p={};o.forEach((function(e){return p[e]=[]}));var g=!1,_=!1,m=!1,b=[],E=[],w=function(){var e=!1,t={},n=function(e){e.length&&e.forEach((function(e){try{e()}catch(e){}})),e.length=0},r=function(e){t[e]&&t[e].forEach((function(e){n(e[1])})),t[e]=void 0};return{set:function(r,i,o){t[r]?t[r].push([i,o]):t[r]=[[i,o]],e&&n(o)},has:function(e){return!!t[e]},remove:r,removeByEvType:function(e){Object.keys(t).forEach((function(r){t[r]&&t[r].forEach((function(t){t[0]===e&&n(t[1])}))}))},clear:function(){e=!0,Object.keys(t).forEach((function(e){r(e)}))}}}(),S={getBuilder:function(){return s},getSender:function(){return t},getPreStartQueue:function(){return b},init:function(e){if(g)O("already inited");else{if(!(e&&c(e)&&h(e)))throw new Error("invalid InitConfig, init failed");var n=u(e);if(!n)throw new Error("defaultConfig missing");var r=f(e);if((i=l(n)).setConfig(r),i.onChange((function(){T("config")})),!(t=a(i.getConfig())))throw new Error("sender missing");g=!0,T("init",!0)}},set:function(e){g&&e&&c(e)&&(T("beforeConfig",!1,e),null==i||i.setConfig(e))},config:function(e){if(g)return e&&c(e)&&(T("beforeConfig",!1,e),null==i||i.setConfig(d(e))),null==i?void 0:i.getConfig()},provide:function(e,t){v(E,e)?O("cannot provide "+e+", reserved"):(S[e]=t,T("provide",!1,e))},start:function(){var e=this;g&&(_||null==i||i.onReady((function(){_=!0,T("start",!0),b.forEach((function(t){return e.build(t)})),b.length=0})))},report:function(e){if(e){var t=R(p.beforeReport)(e);if(t){var n=R(p.report)(t);n&&(_?this.build(n):b.push(n))}}},build:function(e){if(_){var t=R(p.beforeBuild)(e);if(t){var n=s.build(t);if(n){var r=R(p.build)(n);r&&this.send(r)}}}},send:function(e){if(_){var n=R(p.beforeSend)(e);n&&(t.send(n),T("send",!1,n))}},destroy:function(){w.clear(),m=!0,b.length=0,T("beforeDestroy",!0)},on:function(e,t){if("init"===e&&g||"start"===e&&_||"beforeDestroy"===e&&m)try{t()}catch(e){}else p[e]&&p[e].push(t)},off:function(e,t){p[e]&&(p[e]=y(p[e],t))},destroyAgent:w};return E=Object.keys(S),S;function T(e,t){void 0===t&&(t=!1);for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];p[e].forEach((function(e){try{e.apply(void 0,r([],n(i),!1))}catch(e){}})),t&&(p[e].length=0)}}var L=function(e,t,i){var o={},s=function(){for(var i,a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var u=a[0];if(u){var l=u.split(".")[0];if(!(l in s)){var d=o[l]||[],h=null!==(i=null==t?void 0:t(e))&&void 0!==i?i:{};return d.push(r([h],n(a),!1)),void(o[l]=d)}return function(e,t,n){return b(e,t,(function(e,t){if(e&&t in e&&f(e[t]))try{return e[t].apply(e,n)}catch(e){return}}))}(s,u,[].slice.call(a,1))}};for(var a in S(e,"provide",(function(t){return function(n,r){s[n]=r,t.call(e,n,r)}}))(),e)Object.prototype.hasOwnProperty.call(e,a)&&(s[a]=e[a]);return e.on("provide",(function(t){o[t]&&(o[t].forEach((function(t){var r=n(t),o=r[0],s=r.slice(1);null==i||i(e,o,s)})),o[t]=null)})),s};function j(e,t){return e.initSubject(t)}function z(e,t,r){var i=n(t,2),o=i[0],s=i[1],a=e.privateSubject||{};return a[o]||(a[o]=M(s,(function(){a[o]=void 0}),r)),a[o]}var F=function(){return Date.now()};function B(){if("object"==typeof window&&c(window))return window}function U(){if("object"==typeof document&&c(document))return document}function G(){return B()&&window.location}function q(e){var t=U();if(!t||!e)return"";var n=t.createElement("a");return n.href=e,n.href}function V(e){var t=U();if(!t||!e)return{url:e,protocol:"",domain:"",query:"",path:"",hash:""};var n=t.createElement("a");n.href=e;var r=n.pathname||"/";return"/"!==r[0]&&(r="/"+r),{url:n.href,protocol:n.protocol.slice(0,-1),domain:n.hostname,query:n.search.substring(1),path:r,hash:n.hash}}function $(){var e=B()&&G();return e?e.href:""}var H=function(e){var t,n={pid:(t=e.config()).pid,view_id:t.viewId,url:$()};return n.context=e.context?e.context.toString():{},n},W=function(e,n){var r=H(e);return r.timestamp=F(),function(n){e.report(t(t({},n),{overrides:r}))}},K=function(e){return function(t,n){var r=H(e);n(s,(function(e){r&&e(r)}))}},J=function(e){if(e)return e.__SLARDAR_REGISTRY__||(e.__SLARDAR_REGISTRY__={Slardar:{plugins:[],errors:[],subject:{}}}),e.__SLARDAR_REGISTRY__.Slardar},Y=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=J(B());n&&(n.errors||(n.errors=[]),n.errors.push(e))},X=function(e){var t={url:$(),timestamp:F()},n=e.config();return(null==n?void 0:n.pid)&&(t.pid=n.pid),(null==e?void 0:e.context)&&(t.context=e.context.toString()),t},Z=function(e,t){return function(n){var r=function(e){return e.overrides=t,e};e.on("report",r),n(),e.off("report",r)}},Q=function(e,t,n,r){return void 0===r&&(r=!1),e.addEventListener(t,n,r),function(){e.removeEventListener(t,n,r)}},ee=function(e,t,n,r){return e.addEventListener(t,n,r),function(){e.removeEventListener(t,n,r)}},te=function(e){var t=!1;return[function(n){t||(t=!0,e&&e(n))}]},ne=function(e,t){var n,r=U();if(r){var i=r.createElement("script");i.src=e,i.crossOrigin="anonymous",i.onload=t,null===(n=r.head)||void 0===n||n.appendChild(i)}},re=function(e,n){return c(e)?t(t({},n),e):!!e&&n},ie=function(){return!!btoa&&!!atob},oe=function(e){try{var t=localStorage.getItem(e),n=t;t&&"string"==typeof t&&(n=JSON.parse((s=t,ie()?decodeURI(atob(s)):s)));var r=n,i=r.expires,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(r,["expires"]);return i>=F()?o:void 0}catch(e){return}var s},se=function(e,n,r){var i;if(!(r<=0))try{localStorage.setItem(e,(i=JSON.stringify(t(t({},n),{expires:F()+r})),ie()?btoa(encodeURI(i)):i))}catch(e){}},ae=function(e){return!1===e?0:!0!==e&&void 0!==e&&h(e)?e:7776e6},ce=function(){var e=new RegExp("\\/monitor_web\\/collect|\\/monitor_browser\\/collect\\/batch","i");return function(t){return e.test(t)}},ue=function(e){return function(){for(var t,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return t=n(r,2),this._method=t[0],this._url=t[1],e.apply(this,r)}},le=function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._reqHeaders=this._reqHeaders||{};var i=n(t,2),o=i[0],s=i[1];return this._reqHeaders[o]=s,e&&e.apply(this,t)}},de=function(e,t){var n=ce();return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return this._start=F(),this._data=null==r?void 0:r[0],n(this._url)||function(e,t){return T(e,"onreadystatechange",(function(n){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return 4===this.readyState&&t(e),n&&n.apply(this,r)}}))}(this,t([this._method,this._url,this._start,this]))(),e.apply(this,r)}},fe=function(e){return function(t,n){if(e){var r=[];r.push(T(e,"open",ue)()),r.push(T(e,"setRequestHeader",le)()),r.push(T(e,"send",de)(t)),n((function(){r.forEach((function(e){return e()}))}))}}},he=function(e,t){return function(n,r){void 0===r&&(r={});var i=t([n,r]),o=e(n,r);return o.then((function(e){i(e)}),(function(){i(void 0)})),o}},pe=["fetch_0",function(e,t){var n=B();if(n&&fetch){var r=[];r.push(T(n,"fetch",he)(e)),t((function(){r.forEach((function(e){return e()}))}))}}],ge=["resource"],_e=["resource_0",function(e,t){var r=function(){if(B()&&f(window.PerformanceObserver))return window.PerformanceObserver}();if(r){var i=ce();t(function(e,t,r){var i=n(function(e,t,n){var r=e&&new e((function(e,n){e.getEntries&&e.getEntries().forEach((function(e,r,i){return t(e,r,i,n)}))}));return[function(t){if(!e||!r)return n;try{r.observe({entryTypes:t})}catch(e){return n}},function(t,i){if(!e||!r)return n;try{var o={type:t,buffered:!0};void 0!==i&&(o.durationThreshold=i),r.observe(o)}catch(e){return n}r.observe({type:t,buffered:!1})},function(){return r&&r.disconnect()}]}(e,t),3),o=i[0],s=i[2];return o(r),s}(r,(function(t){!i(t.name)&&e(t)}),ge))}}],me="pageview",ve="session",ye="js_error",be="http",Ee="custom",we="action",Se={sampleRate:1,origins:[]},Te=function(){var e=window&&(window.crypto||window.msCrypto);if(void 0!==e&&e.getRandomValues){var t=new Uint16Array(8);e.getRandomValues(t);var n=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t};return n(t[0])+n(t[1])+n(t[2])+n(t[3])+n(t[4])+n(t[5])+n(t[6])+n(t[7])}return"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".replace(/[x]/g,(function(){return(16*Math.random()|0).toString(16)}))},Ce=function(e){var t=re(e,Se);if(t&&A(t.sampleRate))return function(e,n){var r=t.origins;r.length&&E(r,e)&&n("traceparent","03-"+Te()+"-"+Te().substring(16)+"-01")}},Oe=new RegExp("(cookie|auth|jwt|token|key|ticket|secret|credential|session|password)","i"),Ae=new RegExp("(bearer|session)","i"),Ie=function(e,t){return!e||!t||Oe.test(e)||Ae.test(t)},Re=function(e,n){try{if(n){var r=e.request.url;e.request.url=n(r),e.extra=t(t({},e.extra),{original_url:r})}}catch(e){}},De=function(e,t,r){var i=n(t,2),o=i[0],a=i[1],c=r.setTraceHeader,u=r.ignoreUrls,l=r.setContextAtReq,d=r.extractUrl;e.push(o[0]((function(e){var t=n(e,4);t[0];var i=t[1];t[2];var o=t[3];if(!i)return s;var f=q(i);if(E(u,f))return s;c&&c(f,(function(e,t){return o.setRequestHeader(e,t)}));var h=l(),p=void 0,g=a()[0]((function(e){f===e.name&&!p&&(p=e)}));return function(e){var t=xe(e,r);setTimeout((function(){p&&(t.response.timing=p),Re(t,d),h&&h({ev_type:be,payload:t}),g()}),100)}})))},xe=function(e,t){var r,i=e._method,o=e._reqHeaders,s=e._url,a=e._start,c=e._data,u={api:"xhr",request:{url:q(s),method:(i||"").toLowerCase(),headers:o&&(r=o,Object.keys(r).reduce((function(e,t){return!Ie(t,r[t])&&(e[t.toLowerCase()]=r[t]),e}),{})),timestamp:a},response:{status:e.status||0,is_custom_error:!1,timestamp:F()},duration:F()-a};"function"==typeof e.getAllResponseHeaders&&(u.response.headers=function(e){return p(e)&&e?e.split("\r\n").reduce((function(e,t){if(p(t)){var r=n(t.split(": "),2),i=r[0],o=r[1];!Ie(i,o)&&(e[i.toLowerCase()]=o)}return e}),{}):{}}(e.getAllResponseHeaders()));var l=u.response.status,d=t.collectBodyOnError,f=t.extraExtractor;try{var h=null==f?void 0:f(e.response,u,c);h&&(u.extra=h),h&&(u.response.is_custom_error=!0),d&&(h||l>=400)&&(u.request.body=c?""+c:void 0,u.response.body=e.response?""+e.response:void 0)}catch(e){}return u},Me="ajax",Pe={autoWrap:!0,setContextAtReq:function(){return a},ignoreUrls:[],collectBodyOnError:!1},Ne=function(e,t,r){var i=n(t,2),o=i[0],a=i[1],c=r.setTraceHeader,u=r.ignoreUrls,l=r.setContextAtReq,d=r.extractUrl,f=window.Headers,h=window.Request;h&&f&&e.push(o[0]((function(e){var t=n(e,2),i=t[0],o=t[1],p=q(i instanceof h?i.url:i);if(!ke(p)||E(u,p))return s;c&&c(p,(function(e,t){return je(e,t,i,o,h,f)}));var g=l(),_=F(),m=void 0,v=a()[0]((function(e){p===e.name&&!m&&(m=e)}));return function(e){var t,n,s=Ue(i,o,e,h,f,r,_),a=(t=function(e){m&&(e.response.timing=m),Re(e,d),g&&g({ev_type:be,payload:e}),v()},n=!1,function(e){n||(n=!0,t(e))});setTimeout((function(){a(s)}),1e3)}})))},ke=function(e){if(!p(e))return!1;var t=n(e.split(":"),2),r=t[0];return!t[1]||"http"===r||"https"===r},Le=function(e,t){return e instanceof t},je=function(e,n,r,i,o,s){var a;Le(r,o)?r.headers.set(e,n):i.headers instanceof s?i.headers.set(e,n):i.headers=t(t({},i.headers),((a={})[e]=n,a))},ze=function(e,t,n){var r=t&&t.method||"get";return Le(e,n)&&(r=e.method||r),r.toLowerCase()},Fe=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];try{return t.reduce((function(t,n){return new e(n||{}).forEach((function(e,n){return!Ie(n,e)&&(t[n]=e)})),t}),{})}catch(e){return{}}},Be=function(e,t,n){return Le(e,n)?e.body:null==t?void 0:t.body},Ue=function(e,t,n,r,i,o,a){var c={api:"fetch",request:{method:ze(e,t,r),timestamp:a,url:q(e instanceof r?e.url:e),headers:Fe(i,e.headers,t.headers)},response:{status:n&&n.status||0,is_custom_error:!1,timestamp:F()},duration:F()-a},u=o.collectBodyOnError,l=o.extraExtractor,d=function(){var n;u&&(c.request.body=null===(n=Be(e,t,r))||void 0===n?void 0:n.toString())};if(n)try{var f=Fe(i,n.headers);c.response.headers=f;try{-1!==(f["content-type"]||"").indexOf("application/json")&&l&&n.clone().json().then((function(n){var i,o=l(n,c,null===(i=Be(e,t,r))||void 0===i?void 0:i.toString());o&&(c.extra=o,c.response.is_custom_error=!0,d())})).catch(s)}catch(e){}n.status>=400&&d()}catch(e){}else d();return c},Ge="fetch",qe={autoWrap:!0,setContextAtReq:function(){return a},ignoreUrls:[],collectBodyOnError:!1},Ve=["name","message","stack","filename","lineno","colno"],$e=function(e){var t,n,r;return function(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMError]":case"[object DOMException]":return!0;default:return e instanceof Error}}(e)?(r=Ve,t=(n=e)&&c(n)?r.reduce((function(e,t){return e[t]=n[t],e}),{}):n):(l(e)||"undefined"!=typeof Event&&function(e,t){try{return e instanceof t}catch(e){return!1}}(e,Event)||p(e))&&(t={message:w(e)}),t},He=function(e){return n=e,"[object ErrorEvent]"===Object.prototype.toString.call(n)?function(e){var t=$e(e.error);if(!t)return t;var n=e.colno,r=e.lineno,i=e.filename;return n&&!t.colno&&(t.colno=String(n)),r&&!t.lineno&&(t.lineno=String(r)),i&&!t.filename&&(t.filename=i),t}(e):function(e){return"[object PromiseRejectionEvent]"===Object.prototype.toString.call(e)}(e)?function(e){var n;try{var r=void 0;if("reason"in e?r=e.reason:"detail"in e&&"reason"in e.detail&&(r=e.detail.reason),r){var i=$e(r);return t(t({},i),{name:null!==(n=i&&i.name)&&void 0!==n?n:"UnhandledRejection"})}}catch(e){}}(e):$e(e);var n},We="jsError",Ke=function(e){return"hidden"===e.visibilityState},Je=["hidden_3",function(e,t){var n=U(),r=B();if(n&&r){var i=function(t){e("pagehide"===t.type||Ke(n))},o=ee(n,"visibilitychange",i,!0),s=Q(r,"pagehide",i,!0);t((function(){o(),s()}),(function(e){e(Ke(n))}))}}],Ye=["unload_0",function(e,t){var r=B();if(r){var i=n(te(e),1)[0],o=function(){i()},s=[];["unload","beforeunload","pagehide"].forEach((function(e){s.push(Q(r,e,o,!1))})),t((function(){s.forEach((function(e){return e()}))}))}}],Xe=["hash_0",function(e,t){var n=B();if(n){var r=Q(n,"hashchange",(function(){return e(location.href)}),!0);t((function(){r()}))}}],Ze=["history_0",function(e,t){var n=B()&&window.history,r=B();if(n&&r){var i=[],o=function(){return e(location.href)},s=function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];try{e.apply(n,t)}finally{o()}}};i.push(S(n,"pushState",s)(),S(n,"replaceState",s)()),i.push(Q(r,"popstate",o,!0)),t((function(){i.forEach((function(e){return e()}))}))}}],Qe=function(e){return et(e,F())},et=function(e,t){return e+"_"+t},tt=function(e){return"manual"===e},nt="error_weight",rt="duration_apdex",it="perf_apdex",ot=function(e,t){var n=e[0]+e[1]+e[2],r=e[0]/n;return e[2]/n>t.frustrating_threshold?2:r>t.satisfying_threshold||0===n?0:1},st=function(e,t){return function(n,r){var i=n.payload;switch(n.ev_type){case"performance":var o=i.name;i.isSupport&&e(r[it],o,i.value);break;case we:e(r[it],"action",i.duration||0);break;case ye:t(r[nt],0);break;case be:if(i.response.is_custom_error||i.response.status>=400)t(r[nt],1);else{var s=i.response.timing;s&&e(r[rt],0,s.duration)}break;case"resource_error":t(r[nt],2);break;case"blank_screen":t(r[nt],3);break;case"resource":e(r[rt],1,i.duration);break;case"performance_longtask":i.longtasks.forEach((function(t){e(r[rt],2,t.duration)}))}}},at=function(){var e,t,n=function(){e=[0,0,0],t=function(){var e;return(e={error_count:[0,0,0,0],duration_count:[0,0,0]})[it]={},e}()};return n(),[function(n,r,i){var o=n&&n[r];if(o&&!(i<=0)){var s=i<(o[0].threshold||0)?0:i>(o[1].threshold||0)?2:1;if(e[s]+=o[s].weight,"string"==typeof r){var a=et(r,s),c=t[it][a];t[it][a]=(c||0)+1}else 2===s&&(t.duration_count[r]+=1)}},function(n,r){n&&(e[2]+=n[r],t.error_count[r]+=1)},function(){return[e,t]},n]},ct=function(e,t,r,i){var o,s,a=i.sendInit,c=i.initPid,u=i.routeMode,l=i.extractPid,d=i.onPidUpdate,f=tt(u)?function(){return""}:function(e){return function(t){var n;return"hash"===e?(null===(n=V(t).hash)||void 0===n?void 0:n.replace(/^#/,""))||"/":V(t).path}}(u),h=l||function(){},p=n(function(e,t,n,r){var i=n,o=t;return r&&r(t),[function(t,n,s){"user_set"!==t&&n!==i?(i=n,o=null!=s?s:i,r&&r(o),e(t,o)):"user_set"===t&&n!==o&&(o=n,r&&r(o),e(t,o))},function(){t&&e("init",t)}]}(function(e){return function(t,n){e(function(e,t){return{ev_type:me,payload:{pid:t,source:e}}}(t,n))}}(e),c||function(e){var t;return null!==(t=h(e))&&void 0!==t?t:f(e)}(location.href),f(location.href),d),2),g=p[0],_=p[1];if(!tt(u)){var m=n((o=function(e,t){return g(e,f(t),h(t))},s="",[function(e,t){t!==s&&o(e,s=t)}]),1)[0];r.length&&r.forEach((function(e){return t.push(e[0]((function(e){return m(u,e)})))}))}return a&&_(),[g.bind(null,"user_set")]},ut="pageview",lt={sendInit:!0,routeMode:"history",apdex:2};function dt(e){return(null==e?void 0:e.effectiveType)||(null==e?void 0:e.type)||""}var ft=function(e,t){var n=e.common||{};return n.sample_rate=t,e.common=n,e},ht=function(e,t,n,r,i){return e?(o=i(r,t),function(){return o}):function(){return n(t)};var o},pt=function(e,t){try{return"rule"===t.type?function(e,t,n,r){var i=b(e,t,(function(e,t){return e[t]}));return void 0!==i&&function(e,t,n){switch(n){case"eq":return v(t,e);case"neq":return!v(t,e);case"gt":return e>t[0];case"gte":return e>=t[0];case"lt":return e<t[0];case"lte":return e<=t[0];case"regex":return Boolean(e.match(new RegExp(t.join("|"))));case"not_regex":return!e.match(new RegExp(t.join("|")));default:return!1}}(i,function(e,t){return e.map((function(e){switch(t){case"number":return Number(e);case"boolean":return"1"===e;default:return String(e)}}))}(r,"boolean"==typeof i?"bool":h(i)?"number":"string"),n)}(e,t.field,t.op,t.values):"and"===t.type?t.children.every((function(t){return pt(e,t)})):t.children.some((function(t){return pt(e,t)}))}catch(e){return Y(e),!1}},gt=function(e,t,n){var r=t.url,i=t.data,o=t.success,a=void 0===o?s:o,c=t.fail,u=void 0===c?s:c,l=t.getResponseText,d=void 0===l?s:l,f=t.withCredentials,h=void 0!==f&&f,p=new n;p.withCredentials=h,p.open(e,r,!0),p.setRequestHeader("Content-Type","application/json"),p.onload=function(){null==d||d(this.responseText);try{if(this.status>=400)u(new Error(this.responseText||this.statusText));else if(this.responseText){var e=JSON.parse(this.responseText);a(e)}else a({})}catch(e){u(e)}},p.onerror=function(){u(new Error("Network request failed"))},p.onabort=function(){u(new Error("Network request aborted"))},p.send(i)},_t=function(){var e=function(){if("function"==typeof XMLHttpRequest&&f(XMLHttpRequest))return XMLHttpRequest}();return e?{useBeacon:!0,get:function(t){gt("GET",t,e)},post:function(t){gt("POST",t,e)}}:{get:s,post:s}};function mt(e){var t=function(e){var t,n=e.transport,r=e.endpoint,o=e.size,s=void 0===o?10:o,a=e.wait,c=void 0===a?1e3:a,u=[],l=0;function d(){if(u.length){var e=this.getBatchData();n.post({url:r,data:e,fail:function(n){t&&t(n,e)}}),u=[]}}return{getSize:function(){return s},getWait:function(){return c},setSize:function(e){s=e},setWait:function(e){c=e},getEndpoint:function(){return r},setEndpoint:function(e){r=e},send:function(e){u.push(e),u.length>=s&&d.call(this),clearTimeout(l),l=setTimeout(d.bind(this),c)},flush:function(){clearTimeout(l),d.call(this)},getBatchData:function(){return u.length?i(u):""},clear:function(){clearTimeout(l),u=[]},fail:function(e){t=e}}}(e),r=t.send;return function(e){var t=B();if(t){var r=n(te(e),1)[0];["unload","beforeunload","pagehide"].forEach((function(e){Q(t,e,r,!1)}))}}((function(){if(e.transport.useBeacon){var n=function(){var e=B();return e&&e.navigator.sendBeacon?{get:function(){},post:function(t,n){e.navigator.sendBeacon(t,n)}}:{get:s,post:s}}(),o=t.getBatchData();o&&(n.post(t.getEndpoint(),o),t.clear()),t.send=function(e){n.post(t.getEndpoint(),i([e]))},function(e){var t=U(),n=B();if(t&&n){var r=s;r=ee(t,"visibilitychange",(function(){"visible"===t.visibilityState&&(e(),r())}),!0)}}((function(){t.send=r}))}else t.flush()})),t}var vt="mon-va.byteoversea.com",yt=vt,bt="https://sf16-short-sg.bytedapm.com/slardar/fe/sdk-web/plugins",Et="1.14.1",wt="SDK_SLARDAR_WEB",St="/monitor_web/settings/browser-settings",Tt="/monitor_browser/collect/batch/",Ct="SLARDAR",Ot=["/log/sentry/",Tt,St],At="session",It=["blankScreen","action"],Rt={sample_rate:1,include_users:[],sample_granularity:At,rules:{}};function Dt(e,t,n){void 0===n&&(n=Nt),function(e){var t=B(),n=U();t&&n&&("complete"!==n.readyState?Q(t,"load",(function(){setTimeout((function(){e()}),0)}),!1):e())}((function(){e.on("init",(function(){n(e,t)}))}))}var xt=function(e,t,n,r){void 0===r&&(r=kt);var i=t.config(),o=i.plugins,s=i.pluginBundle,a=e.filter((function(e){return o[e]&&!t.destroyAgent.has(e)})),c=function(){return a.forEach((function(e){return Lt(t,e,n)}))};a.every((function(e){return zt(e,n)}))?c():r(t,{name:s.name},c)},Mt=function(e,t,n,r){void 0===r&&(r=kt);var i=t.config().plugins;e.filter((function(e){return i[e]&&!t.destroyAgent.has(e)})).forEach((function(e){zt(e,n)?Lt(t,e,n):r(t,{name:e,config:i[e]},(function(){return Lt(t,e,n)}))}))},Pt=function(e){return function(n,r){var i,o=e.config().pluginBundle;e.destroyAgent.has(n)&&e.destroyAgent.remove(n),void 0!==r&&e.set({plugins:t(t({},e.config().plugins),(i={},i[n]=r,i))}),o&&~o.plugins.indexOf(n)?xt([n],e):Mt([n],e)}};function Nt(e,t,n){void 0===n&&(n=kt);var r=e.config().pluginBundle,i=r?r.plugins:[];xt(i,e,t,n),Mt(It,e,t,n),e.provide("reloadPlugin",Pt(e))}function kt(e,t,n,r){var i=t.name,o=t.config;void 0===r&&(r=ne);var s=function(e,t,n){var r;return null!==(r=null==n?void 0:n.path)&&void 0!==r?r:e.config().pluginPathPrefix+"/"+t.replace(/([a-z])([A-Z])/g,(function(e,t,n){return t+"-"+n.toLowerCase()}))+"."+Et+".js"}(e,i,o);r(s,(function(){n()}))}function Lt(e,t,n){if(void 0===n&&(n=J(B())),n){var r=jt(n,t);if(r)try{if(e.destroyAgent.has(t))return;r.apply(e)}catch(e){Y(e),O("[loader].applyPlugin failed",t,e)}else O("[loader].applyPlugin not found",t)}}function jt(e,t){return e.plugins.filter((function(e){return e.name===t&&e.version===Et}))[0]}function zt(e,t){return void 0===t&&(t=J(B())),!(!t||!t.plugins||!jt(t,e))}function Ft(e,t,n){void 0===n&&(n=J(B())),n&&n.plugins&&(jt(n,e)||n.plugins.push({name:e,version:Et,apply:t}))}function Bt(e){var t,n;try{for(var r=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(["userId","deviceId","sessionId","env"]),i=r.next();!i.done;i=r.next()){var o=i.value;e[o]||delete e[o]}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e}function Ut(e){var n=e.plugins||{};for(var r in n)n[r]&&!c(n[r])&&(n[r]={});return Bt(t(t({},e),{plugins:n}))}function Gt(e){return c(e)&&"bid"in e}function qt(e){return Bt(t({},e))}function Vt(e){var t;if(!e)return{};var n=e.sample,r=e.plugins,i=e.timestamp,o=e.quota_rate,s=void 0===o?1:o,a=e.apdex;if(!n)return{};var c=n.sample_rate,u=n.sample_granularity,l=void 0===u?At:u,d=n.include_users,f=n.rules;return{sample:{include_users:d,sample_rate:c*s,sample_granularity:l,rules:(void 0===f?[]:f).reduce((function(e,t){var n=t.name,r=t.enable,i=t.sample_rate,o=t.conditional_sample_rules;return e[n]={enable:r,sample_rate:i,conditional_sample_rules:o},e}),{})},plugins:{heatmap:null!==(t=null==r?void 0:r.heatmap)&&void 0!==t&&t},apdex:a,serverTimestamp:i}}var $t=function(e,t){return void 0===t&&(t=Tt),(e&&e.indexOf("//")>=0?"":"https://")+e+t},Ht=function(e,t){return void 0===t&&(t=St),(e&&e.indexOf("//")>=0?"":"https://")+e+t},Wt=function(){return D()},Kt=function(e){var t=[];return e.observe=function(e){t.push(e)},e.push=function(){for(var i,o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return o.forEach((function(e){t.forEach((function(t){return t(e)}))})),(i=[].push).call.apply(i,r([e],n(o),!1))},e},Jt=function(){var e,t,n,r=B(),i=U();if(r&&i)return(null===(n=null===(t=null===(e=function(){if(!document)return null;if(document.currentScript)return document.currentScript;try{throw new Error}catch(u){var e=0,t=/at\s+(.*)\s+\((.*):(\d*):(\d*)\)/i.exec(u.stack),n=t&&t[2]||!1,r=t&&t[3]||0,i=document.location.href.replace(document.location.hash,""),o="",s=document.getElementsByTagName("script");if(n===i){var a=document.documentElement.outerHTML,c=new RegExp("(?:[^\\n]+?\\n){0,"+(r-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i");o=a.replace(c,"$1").trim()}for(;e<s.length;e++){if("interactive"===s[e].readyState)return s[e];if(s[e].src===n)return s[e];if(n===i&&s[e].innerHTML&&s[e].innerHTML.trim()===o)return s[e]}return null}}())||void 0===e?void 0:e.getAttribute("src"))||void 0===t?void 0:t.match(/globalName=(.+)$/))||void 0===n?void 0:n[1])||"Slardar"},Yt=function(e){return Ct+e},Xt=function(e,t){try{var n=localStorage.getItem(e);if(!n||!ie()||"{"!==n[0])return;se(e,JSON.parse(n),t)}catch(e){}},Zt=function(e,t){void 0===e&&(e="");var n={userId:D(),deviceId:D()};if(t<=0)return n;var r=Yt(e);Xt(r,t);var i=oe(r);return{userId:(null==i?void 0:i.userId)||n.userId,deviceId:(null==i?void 0:i.deviceId)||n.deviceId}},Qt=function(e){var t=e.bid,n=e.userId,r=e.deviceId,i=e.storageExpires,o=Yt(t);se(o,{userId:n,deviceId:r},ae(i))},en={get:function(){return this.__SLARDAR__REPALCE__HOLDER__}},tn=function(e){var n,r,i=e,o={},a=en.get(),c=s,u=s;return{getConfig:function(){return i},setConfig:function(e){return o=t(t({},o),e||{}),l(),n||(n=e,i.useLocalConfig||!i.bid?(r={},c()):a?d():nn(i.transport,i.domain,i.bid,(function(e){a=e,d()}))),i},onChange:function(e){u=e},onReady:function(e){c=function(){Qt(i),e()},r&&c()}};function l(){var n=t(t(t({},e),r||{}),o);n.plugins=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n={},r=0;r<e.length;)n=_(n,e[r++]);return n}(e.plugins,(null==r?void 0:r.plugins)||{},o.plugins||{}),n.sample=rn(rn(e.sample,null==r?void 0:r.sample),o.sample),i=n,u()}function d(){r=Vt(a),l(),c()}};function nn(e,t,n,r){e.get({withCredentials:!0,url:Ht(t)+"?bid="+n+"&store=1",success:function(e){r(e.data||{})},fail:function(){r({sample:{sample_rate:.001}})}})}function rn(e,i){if(!e||!i)return e||i;var o=t(t({},e),i);return o.include_users=r(r([],n(e.include_users||[]),!1),n(i.include_users||[]),!1),o.rules=r(r([],n(Object.keys(e.rules||{})),!1),n(Object.keys(i.rules||{})),!1).reduce((function(o,s){var a,c;return s in o||(s in(e.rules||{})&&s in(i.rules||{})?(o[s]=t(t({},e.rules[s]),i.rules[s]),o[s].conditional_sample_rules=r(r([],n(e.rules[s].conditional_sample_rules||[]),!1),n(i.rules[s].conditional_sample_rules||[]),!1)):o[s]=(null===(a=e.rules)||void 0===a?void 0:a[s])||(null===(c=i.rules)||void 0===c?void 0:c[s])),o}),{}),o}var on,sn={build:function(e){return{ev_type:e.ev_type,payload:e.payload,common:t(t({},e.extra||{}),e.overrides||{})}}},an=function(e,n){var r=n||{},i=r.pid,o=void 0===i?"":i,s=r.viewId,a=void 0===s?"":s,c={url:$(),timestamp:F(),sdk_version:Et,sdk_name:wt,pid:o,view_id:a};return t(t({},e),{extra:t(t({},c),e.extra||{})})},cn=function(e){e.on("report",(function(t){return an(t,e.config())}))},un={sri:"reportSri",st:"reportResourceError",err:"captureException",reject:"captureException"},ln=function(e){return Object.keys(e).reduce((function(e,t){return e[t]=[],e}),{})},dn=function(e){return Object.keys(e).reduce((function(t,n){return t[e[n]]?t[e[n]].push(n):t[e[n]]=[n],t}),{})},fn=function(e,n,r){return function(i,o,s,a){var c;void 0===s&&(s=F()),void 0===a&&(a=location.href);var u=t(t({},X(e)),{url:a,timestamp:s});n[i]&&(e[r[i]]?Z(e,u)((function(){e[r[i]](o)})):null===(c=n[i])||void 0===c||c.push([o,u]))}},hn=function(e,t,r){return function(i){i in r&&r[i].forEach((function(r){var o;null===(o=t[r])||void 0===o||o.forEach((function(t){var r=n(t,2),o=r[0],s=r[1];Z(e,s)((function(){e[i](o)}))})),t[r]=null}))}},pn=function(e,t){return"err"===t?!1!==b(e,"plugins."+We+".onerror",(function(e,t){return e[t]})):"reject"!==t||!1!==b(e,"plugins."+We+".onunhandledrejection",(function(e,t){return e[t]}))},gn=function(e,t){var r;void 0===t&&(t=un);var i=ln(t),o=dn(t),s=fn(e,i,t);(null===(r=e.p)||void 0===r?void 0:r.a)&&"observe"in e.p.a&&e.p.a.observe((function(t){var r=n(t,5);r[0];var i=r[1],o=r[2],a=r[3],c=r[4],u=e.config();pn(u,i)&&s(i,o,a,c)})),e.on("init",(function(){var t,r=e.config();null===(t=e.p)||void 0===t||t.a.forEach((function(e){var t=n(e,5);t[0];var i=t[1],o=t[2],a=t[3],c=t[4];pn(r,i)&&s(i,o,a,c)})),e.p&&e.p.a&&(e.p.a.length=0),e.provide("precollect",(function(e,t,n,i){void 0===n&&(n=F()),void 0===i&&(i=location.href),pn(r,e)&&s(e,t,n,i)}))})),e.on("provide",hn(e,i,o))},_n=function(e){var t=n(e,2),r=t[0],i=t[1];return{ev_type:ye,payload:{error:He(r),breadcrumbs:[],extra:i||{}},extra:{bid:"slardar_sdk"}}},mn=function(e,t){void 0===t&&(t=.001);var n=J(B());n&&(n.errors||(n.errors=[]),"observe"in n.errors||A(t)&&(n.errors=Kt(n.errors),n.errors.forEach((function(t){e.report(_n(t))})),n.errors.observe((function(t){e.report(_n(t))}))))},vn=function(e){var n,r=!1;e.on("init",(function(){n=(new Date).getTime(),e.on("config",(function(){var i,o=null===(i=e.config())||void 0===i?void 0:i.serverTimestamp;if(!(isNaN(o)||Number(o)<=0||r)){r=!0;var s=(new Date).getTime();if(s-n<700&&o){var a=o-(s+n)/2;!isNaN(a)&&(a>0||a<-6e5)&&e.on("beforeBuild",(function(e){var n;return t(t({},e),{extra:t(t({},null!==(n=e.extra)&&void 0!==n?n:{}),{sdk_offset:null!=a?a:0})})}))}}}))}))},yn=function(e,n){var r={};return r.bid=n.bid,r.user_id=n.userId,r.device_id=n.deviceId,r.session_id=n.sessionId,r.release=n.release,r.env=n.env,t(t({},e),{extra:t(t({},r),e.extra||{})})},bn=function(e){e.on("beforeBuild",(function(t){return yn(t,e.config())}))},En=function(e){e.on("start",(function(){var t=e.config().bid,n=e.getSender();n.setEndpoint(n.getEndpoint()+"?biz_id="+t)}))},wn=function(e){var t=ae(e.storageExpires),n=Zt(e.bid,t);return{bid:"",pid:"",viewId:Qe("_"),userId:n.userId,deviceId:n.deviceId,storageExpires:t,sessionId:Wt(),domain:vt,pluginBundle:{name:"commonMonitors",plugins:["breadcrumb","jsError","performance","resourceError","resource"]},pluginPathPrefix:bt,plugins:{ajax:{ignoreUrls:Ot},fetch:{ignoreUrls:Ot},breadcrumb:{},pageview:{},jsError:{},resource:{},resourceError:{},performance:{},tti:{},fmp:{},blankScreen:!1,heatmap:!1},release:"",env:"production",sample:Rt,transport:_t()}},Sn=function(e){var i=void 0===e?{}:e,o=i.createSender,s=void 0===o?function(e){return mt({size:20,endpoint:$t(e.domain),transport:e.transport})}:o,a=i.builder,c=void 0===a?sn:a,u=i.createDefaultConfig,l=k({validateInitConfig:Gt,initConfigNormalizer:Ut,userConfigNormalizer:qt,createSender:s,builder:c,createDefaultConfig:void 0===u?wn:u,createConfigManager:tn});mn(l),function(e){var n=function(){var e={},n={},r={set:function(t,i){return e[t]=i,n[t]=w(i),r},merge:function(i){return e=t(t({},e),i),Object.keys(i).forEach((function(e){n[e]=w(i[e])})),r},delete:function(t){return delete e[t],delete n[t],r},clear:function(){return e={},n={},r},get:function(e){return n[e]},toString:function(){return t({},n)}};return r}();e.provide("context",n),e.on("report",(function(e){return e.extra||(e.extra={}),e.extra.context=n.toString(),e}))}(l);var d=J(B());!function(e,t){var r=t||{},i={};e.provide("setFilter",(function(e,t){i[e]||(i[e]=[]),i[e].push(t)})),e.provide("initSubject",(function(t){var o=n(t,2),s=o[0],a=o[1],c=function(e){return e.split("_")[0]}(s),u=!!c&&i[c];return r[s]||(r[s]=M(a,(function(){r[s]=void 0}))),u?z(e,[s,P(r[s],u)]):r[s]})),e.provide("getSubject",(function(e){return r[e]})),e.provide("privateSubject",{})}(l,d&&d.subject),vn(l),bn(l),cn(l),function(e){var n=function(){var e=function(){if(B()&&"navigator"in window)return window.navigator}();if(e)return e.connection||e.mozConnection||e.webkitConnection}(),r=dt(n);n&&(n.onchange=function(){r=dt(n)}),e.on("report",(function(e){return t(t({},e),{extra:t(t({},e.extra||{}),{network_type:r})})}))}(l),En(l);var f=L(l,X,(function(e,t,i){return Z(e,t)((function(){var e=n(i),t=e[0],o=e.slice(1);l[t].apply(l,r([],n(o),!1))}))}));return function(e,t){e.on("init",(function(){var n=[],r=function(r){r.forEach((function(r){var i=r.name;v(n,i)||(n.push(i),r.setup(e),t(i,r.setup),e.destroyAgent.set(i,i,[function(){n=y(n,i),r.tearDown&&r.tearDown()}]))}))};e.provide("applyIntegrations",r);var i=e.config();i&&i.integrations&&r(i.integrations)}))}(f,Ft),f},Tn=((on={})[ut]=function(e){e.on("init",(function(){var r,i=null===(r=e.config())||void 0===r?void 0:r.plugins[ut];!function(e,r){var i,o=re(r,lt);if(o&&G()){var a=o.routeMode,c=o.apdex,u=e.report.bind(e),l=s;if(c){var d=[],f=n(function(e,t,r,i){var o,s,a,c=n(r,2),u=c[0],l=c[1],d=2===i.apdex,f=void 0,h=void 0,p=void 0,g=!1,_=n(at(),4),m=_[0],v=_[1],y=_[2],b=_[3],E=n(at(),4),w=E[0],S=E[1],T=E[2],C=E[3],O=n((o={start:F(),end:0,time_spent:0,is_bounced:!1,entry:"",exit:"",p_count:0,a_count:0},[function(e,t){var r=n(e,3),i=r[0],s=r[1],a=r[2];o.end=F(),o.time_spent+=t&&t.time_spent||0,o.last_page=t,o.p_count+=1,o.rank=i,o.apdex=s,o.apdex_detail=a;var c=U();c&&(o.is_bounced=!function(e){return"complete"===e.readyState}(c))},function(e,t){o.time_spent+=e.time_spent,o.p_count+=1,o.exit=t},function(){o.a_count+=1},function(e){o.entry=e,o.exit=e},function(){return o}]),5),A=O[0],I=O[1],R=O[2],D=O[3],x=O[4],M=n((s=0,a=void 0,[function(e){if(e){if(!a)return;s+=F()-a,a=void 0}else a=F()},function(){a&&(s+=F()-a);var e=s;return s=0,a=F(),e}]),2),P=M[0],N=M[1];t.push(u[0](P)),!d&&t.push(l[0]((function(){if(g){var t=n(T(),2),r=t[0],i=t[1],o=ot(r,p);A([o,r,i],j()),e({ev_type:ve,payload:x()}),C()}})));var k=st(m,v),L=st(w,S),j=function(){var e=n(y(),2),t=e[0],r=e[1];return{start:f[0],pid:f[1],view_id:f[2],end:F(),time_spent:N(),apdex:t,rank:ot(t,p),detail:r}};return t.push((function(){g=!1})),[function(e,t){if(!f)return f=[F(),e,t],D(e),void(g=!(!p||!f));g&&(h=j(),I(h,e)),f=[F(),e,t],b()},function(e){g&&(d||(L(e,p),e.ev_type===we&&R()),e.common.pid===f[1]&&k(e,p))},function(t){g&&(t.payload.last=h),e(t)},function(e){if(!e)return t.forEach((function(e){return e()})),void(t.length=0);g=!(!(p=e)||!f)}]}(e.report.bind(e),d,[j(e,Je),j(e,Ye)],o),4),h=f[0],p=f[1],g=f[2],_=f[3];u=g,l=h,e.on("send",p),d.push((function(){return e.off("send",p)})),e.on("start",(function(){_(e.config().apdex)})),N(e,ut,ve,d)}var m=[],v=n(ct(u,m,tt(a)?[]:[e.initSubject(Xe),e.initSubject(Ze)],t(t({},o),{initPid:null===(i=e.config())||void 0===i?void 0:i.pid,onPidUpdate:function(t){var n=Qe(t);l(t,n),e.set({pid:t,viewId:n,actionId:void 0})}})),1)[0];z(e,["f_view_0",K(e)],-1);var y=function(){v(e.config().pid)};e.on("config",y),m.push((function(){return e.off("config",y)})),N(e,ut,me,m),e.provide("sendPageview",v)}}(e,i)}))},on[Me]=function(e){e.on("init",(function(){var n,r=null===(n=e.config())||void 0===n?void 0:n.plugins[Me];!function(e,n){var r=re(n,Pe);if(r){var i=[],o=t(t({},r),{setContextAtReq:function(){return W(e)},setTraceHeader:Ce(r.trace)}),s=function(){return j(e,_e)};o.autoWrap&&De(i,[j(e,["xhr_0",fe(XMLHttpRequest&&XMLHttpRequest.prototype)]),s],o),N(e,Me,be,i),e.provide("wrapXhr",(function(e){function t(){var t=new e;return De(i,[M(fe(t)),s],o),t}return t.prototype=new e,["DONE","HEADERS_RECIEVED","LOADING","OPENED","UNSENT"].forEach((function(n){t[n]=e[n]})),t}))}}(e,r)}))},on[Ge]=function(e){e.on("init",(function(){var n,r=null===(n=e.config())||void 0===n?void 0:n.plugins[Ge];!function(e,n){var r=re(n,qe);if(r){var i=[],o=t(t({},r),{setContextAtReq:function(){return W(e)},setTraceHeader:Ce(r.trace)}),s=function(){return j(e,_e)};o.autoWrap&&Ne(i,[j(e,pe),s],o),N(e,Ge,be,i),e.provide("wrapFetch",(function(e){var t=void 0;return Ne(i,[M((function(n){t=he(e,n)})),s],o),t}))}}(e,r)}))},on),Cn=function(e){void 0===e&&(e={});var t=Sn(e);return function(e){e.on("start",(function(){var t=e.config(),n=function(e,t,n,r,i){if(!t)return a;var o=t.sample_rate,s=t.include_users,c=t.sample_granularity,u=t.rules,l=t.r,d=void 0===l?Math.random():l;if(v(s,e))return function(e){return ft(e,1)};var f="session"===c,h=ht(f,o,n,d,r),p=function(e,t,n,r,i,o){var s={};return Object.keys(e).forEach((function(a){var c=e[a],u=c.enable,l=c.sample_rate,d=c.conditional_sample_rules;u?(s[a]={enable:u,sample_rate:l,effectiveSampleRate:l*n,hit:ht(t,l,r,i,o)},d&&(s[a].conditional_hit_rules=d.map((function(e){var s=e.sample_rate,a=e.filter;return{sample_rate:s,hit:ht(t,s,r,i,o),effectiveSampleRate:s*n,filter:a}})))):s[a]={enable:u,hit:function(){return!1},sample_rate:0,effectiveSampleRate:0}})),s}(u,f,o,n,d,r);return function(e){var t;if(!h())return f&&i[0](),!1;if(!(e.ev_type in p))return ft(e,o);if(!p[e.ev_type].enable)return f&&i[1](e.ev_type),!1;if(null===(t=e.common)||void 0===t?void 0:t.sample_rate)return e;var n=p[e.ev_type],r=n.conditional_hit_rules;if(r)for(var s=0;s<r.length;s++)if(pt(e,r[s].filter))return!!r[s].hit()&&ft(e,r[s].effectiveSampleRate);return n.hit()?ft(e,n.effectiveSampleRate):((!r||!r.length)&&f&&i[1](e.ev_type),!1)}}(t.userId,t.sample,A,I,[function(){e.destroy()},function(t){e.destroyAgent.removeByEvType(t)}]);e.on("build",n)}))}(t),gn(t),function(e){e.provide("sendEvent",(function(t){var n=function(e){if(e&&c(e)&&e.name&&p(e.name)){var t={name:e.name,type:"event"};if("metrics"in e&&c(e.metrics)){var n=e.metrics,r={};for(var i in n)h(n[i])&&(r[i]=n[i]);t.metrics=r}if("categories"in e&&c(e.categories)){var o=e.categories,s={};for(var i in o)s[i]=w(o[i]);t.categories=s}return"attached_log"in e&&p(e.attached_log)&&(t.attached_log=e.attached_log),t}}(t);n&&e.report({ev_type:Ee,payload:n,extra:{timestamp:F()}})})),e.provide("sendLog",(function(t){var n=function(e){if(e&&c(e)&&e.content&&p(e.content)){var t={content:w(e.content),type:"log",level:"info"};if("level"in e&&(t.level=e.level),"extra"in e&&c(e.extra)){var n=e.extra,r={},i={};for(var o in n)h(n[o])?r[o]=n[o]:i[o]=w(n[o]);t.metrics=r,t.categories=i}return"attached_log"in e&&p(e.attached_log)&&(t.attached_log=e.attached_log),t}}(t);n&&e.report({ev_type:Ee,payload:n,extra:{timestamp:F()}})}))}(t),Object.keys(Tn).forEach((function(e){Ft(e,Tn[e]),Tn[e](t)})),Dt(t),t.provide("create",Cn),t},On="precollect",An=3e5,In=Cn(),Rn=B();Rn&&function(e,t){if("addEventListener"in e){t.pcErr=function(n){var r=(n=n||e.event).target||n.srcElement||{};r instanceof Element||r instanceof HTMLElement?t(On,"st",{tagName:r.tagName,url:r.getAttribute("href")||r.getAttribute("src")}):t(On,"err",n.error)},t.pcRej=function(n){n=n||e.event,t(On,"reject",n.reason||n.detail&&n.detail.reason)};var n=[];n.push(Q(e,"error",t.pcErr,!0)),n.push(Q(e,"unhandledrejection",t.pcRej,!0)),setTimeout((function(){n.forEach((function(e){return e()}))}),An)}"PerformanceObserver"in e&&"PerformanceLongTaskTiming"in e&&(t.pp={entries:[]},t.pp.observer=new PerformanceObserver((function(e){t.pp.entries=t.pp.entries.concat(e.getEntries())})),t.pp.observer.observe({entryTypes:["longtask"]}),setTimeout((function(){t.pp.observer.disconnect()}),An))}(Rn,In),e.BATCH_REPORT_PATH=Tt,e.DEFAULT_IGNORE_PATHS=Ot,e.DEFAULT_SAMPLE_CONFIG=Rt,e.DEFAULT_SAMPLE_GRANULARITY=At,e.DEFAULT_SENDER_SIZE=20,e.DEVICE_ID_COOKIE_NAME="MONITOR_DEVICE_ID",e.EV_METHOD_MAP=un,e.EXTRA_INDEPENDENT_PLUGINS=It,e.InjectConfigPlugin=bn,e.InjectEnvPlugin=cn,e.InjectQueryPlugin=En,e.ObserveErrorPlugin=mn,e.PLUGINS_LOAD_PREFIX=bt,e.PluginMap=Tn,e.PrecollectPlugin=gn,e.REPORT_DOMAIN=vt,e.SDK_NAME=wt,e.SDK_VERSION=Et,e.SETTINGS_DOMAIN=yt,e.SETTINGS_PATH=St,e.STORAGE_PREFIX=Ct,e.TimeCalibrationPlugin=vn,e.USER_ID_COOKIE_NAME="MONITOR_WEB_ID",e.addConfigToReportEvent=yn,e.addEnvToSendEvent=an,e.applyPlugin=Lt,e.browserBuilder=sn,e.buildSelfErrorEvent=_n,e.configHolder=en,e.createBrowserClient=Cn,e.createBrowserConfigManager=tn,e.createMinimalBrowserClient=Sn,e.createStore=ln,e.default=In,e.doesPluginExistInRegistry=zt,e.filterIfPluginDisabled=pn,e.getConsumeStored=hn,e.getDefaultConfig=wn,e.getDefaultSessionId=Wt,e.getDefaultUserIdAndDeviceId=Zt,e.getGlobalInstance=function(){var e=B(),t=Jt();if(e&&t)return e[t]},e.getGlobalName=Jt,e.getPluginFromRegistry=jt,e.getReportUrl=$t,e.getServerConfig=nn,e.getSettingsUrl=Ht,e.getStorageKey=Yt,e.getStoreOrConsume=fn,e.glueCodeForStorageSecurity=Xt,e.hasSetStorageItem=function(e){void 0===e&&(e="");var t=Yt(e);return!!oe(t)},e.loadCombinedPlugins=xt,e.loadIndependentPlugins=Mt,e.loadNow=kt,e.loadPlugins=Nt,e.loadPluginsOnPageLoad=Dt,e.mergeSampleConfig=rn,e.normalizeInitConfig=Ut,e.normalizeStrictFields=Bt,e.normalizeUserConfig=qt,e.parseServerConfig=Vt,e.register=Ft,e.reverseMap=dn,e.setStorageUserIdAndDeviceId=Qt,e.toObservableArray=Kt,e.validateInitConfig=Gt}(dn)),dn);function hn(e,t,n=r.distExports.getDefaultRegion()){const i=(()=>{switch(n){case r.distExports.Region.CN:return tn();case r.distExports.Region.US:return ln.createBrowserClient();case r.distExports.Region.SG:return fn.createBrowserClient();default:return tn()}})();if(t)for(const[e,n]of Object.entries(t))i.context?.set(e,n);const{bid:o}=r.getSlardarBid({region:n});return i.init({bid:o,...e}),i.start(),i}t.createDefaultSlardarClient=function(e,t,n){const{extension_version:i}=t||{},o=r.distExports.getEnviromentVariables();return hn({release:i,env:r.getEnv(o),userId:r.getUserId(o),plugins:{},...e},{...r.distExports.getDefaultContext(),...t},n)},t.createSlardarClient=hn},6937:(e,t)=>{"use strict";var n,r={},i=(n||(n=1,function(e){var t;e.Region=void 0,(t=e.Region||(e.Region={})).CN="CN",t.BOE="BOE",t.SG="SG",t.US="US",t.BOEI18N="BOEI18N";const n={[e.Region.CN]:"cn",[e.Region.BOE]:"cn",[e.Region.SG]:"sg",[e.Region.US]:"us",[e.Region.BOEI18N]:"sg"};var r;e.VRegion=void 0,(r=e.VRegion||(e.VRegion={})).USEast="US-East",r.SG="Singapore-Central",r.BOEI18N="US-BOE",r.BOE="China-BOE",r.CN="China-North";const i={[e.Region.US]:e.VRegion.USEast,[e.Region.SG]:e.VRegion.SG,[e.Region.BOEI18N]:e.VRegion.BOEI18N,[e.Region.BOE]:e.VRegion.BOE,[e.Region.CN]:e.VRegion.CN},o={[e.Region.CN]:"https://api.marscode.cn",[e.Region.BOE]:"https://bytesec.bytedance.com",[e.Region.SG]:"https://api-sg-central.marscode.com",[e.Region.US]:"https://api-sg-central.marscode.com",[e.Region.BOEI18N]:"https://bytesec.byteintlapi.com"};var s,a;function c(t){const{CLOUDIDE_PROVIDER_REGION:n="",IDE_REGION:r=""}=t;switch(n){case"sg":return e.Region.SG;case"us":return e.Region.US;case"cn":return e.Region.CN}switch(r){case"sg":return e.Region.SG;case"us":return e.Region.US;default:return e.Region.CN}}function u(){return"undefined"!=typeof process?process.env||{}:"undefined"!=typeof window&&window.env||{}}function l(e){const{CLOUDIDE_WORKSPACE_ID:t="",IDE_ENVIRONMENT_NAME:n="",CLOUDIDE_CONFIG_RUNTIME:r="",IDE_LANG:i="",CLOUDIDE_USERID:o="",IDE_OWNER:s="",CLOUDIDE_RUNTIME_DEBUG_PORT:a="",VSCODE_CWD:c="",CLOUDIDE_PROVIDER_REGION:u="",CLOUDIDE_TENANT_NAME:l="",CLOUDIDE_IDE_SERVER_TYPE:d="",CLOUDIDE_ENABLE_DOUBLE_CONTAINER:f="",CLOUDIDE_CONTROL_PLANE:h="",CLOUDIDE_FEATURE_ENV:p="",CLOUDIDE_CONFIG_LANGUAGE:g="",CLOUDIDE_PROJECT_TEMPLATE_SLUG:_="",CLOUDIDE_PROJECT_REPO_SPECIFIED:m=""}=e;return{workspace_id:t,ide_workspace_id:t,ide_project_template_slug:_,ide_project_repo_specified:`${m}`||"false",ide_environment_name:n,ide_config_runtime:r,ide_lang:i,ide_template_language:g,ide_user_id:o,ide_owner:s,ide_runtime_debug_port:a,ide_icube_version:c.split("@")[1]||"",ide_provider_region:u,ide_tenant_name:l,ide_server_type:d,ide_enable_double_container:f,ide_control_plane:h,x_env:p||"prod",ide_env:p}}function d(t){const{CLOUDIDE_CONTROL_PLANE:n="",CLOUDIDE_PROVIDER_REGION:r="",IDE_REGION:i="",CLOUDIDE_APISERVER_BASE_URL:o=""}=t;switch(n){case"i18n":return"us"===r?e.VRegion.USEast:e.VRegion.SG;case"boei18n":return e.VRegion.BOEI18N;case"boe":return e.VRegion.BOE;case"cn":return e.VRegion.CN;case"sg":return e.VRegion.SG}switch(i){case"sg":return e.VRegion.SG;case"us":return e.VRegion.USEast;default:return o?.includes("boe")?e.VRegion.BOE:e.VRegion.CN}}function f(e){const{CLOUDIDE_IDE_SERVER_TYPE:t=""}=e;return`${"icube_a0"===t}`}e.Tenant=void 0,(s=e.Tenant||(e.Tenant={})).BYTEDANCE="bytedance",s.PUBLIC="public",e.Client=void 0,(a=e.Client||(e.Client={})).Native="native",a.Cloud="cloud",e.ApiServerMap=o,e.RegionMap=n,e.VRegionMap=i,e.getClient=function(){return"undefined"==typeof window?process.versions.electron?e.Client.Native:e.Client.Cloud:window.navigator.userAgent.includes("Electron")?e.Client.Native:e.Client.Cloud},e.getDefaultContext=function(){const e=u();return{...l(e),ide_environment_type:"extension",region:d(e),isA0:f(e)}},e.getDefaultContextFromEnv=l,e.getDefaultRegion=function(){return c(u())},e.getEnv=function(e){const{CLOUDIDE_FEATURE_ENV:t="prod"}=e;return t},e.getEnviromentVariables=u,e.getIsA0=f,e.getIsDev=function(e){const{NODE_ENV:t=""}=e;return"development"===t},e.getRegion=c,e.getTenant=function(t={}){const{CLOUDIDE_TENANT_NAME:n}=t;return"bytedance"===n?e.Tenant.BYTEDANCE:e.Tenant.PUBLIC},e.getUserId=function(e){const{CLOUDIDE_USERID:t=""}=e;return t},e.getVRegion=d,e.getVRegionByRegion=function(e){return i[e]}}(r)),r);const o={[i.Region.CN]:{[i.Tenant.BYTEDANCE]:379586,[i.Tenant.PUBLIC]:576092},[i.Region.BOE]:{[i.Tenant.BYTEDANCE]:379586,[i.Tenant.PUBLIC]:576092},[i.Region.US]:{[i.Tenant.BYTEDANCE]:379586,[i.Tenant.PUBLIC]:573425},[i.Region.SG]:{[i.Tenant.BYTEDANCE]:379586,[i.Tenant.PUBLIC]:573425},[i.Region.BOEI18N]:{[i.Tenant.BYTEDANCE]:379586,[i.Tenant.PUBLIC]:573425}},s={[i.Region.CN]:{[i.Tenant.BYTEDANCE]:647416,[i.Tenant.PUBLIC]:647416},[i.Region.SG]:{[i.Tenant.BYTEDANCE]:677332,[i.Tenant.PUBLIC]:677332},[i.Region.US]:{[i.Tenant.BYTEDANCE]:677332,[i.Tenant.PUBLIC]:677332},[i.Region.BOE]:void 0,[i.Region.BOEI18N]:void 0},a={[i.Region.CN]:{[i.Tenant.BYTEDANCE]:"cn",[i.Tenant.PUBLIC]:"cn"},[i.Region.BOE]:{[i.Tenant.BYTEDANCE]:"cn",[i.Tenant.PUBLIC]:"cn"},[i.Region.US]:{[i.Tenant.BYTEDANCE]:"cn",[i.Tenant.PUBLIC]:"va"},[i.Region.SG]:{[i.Tenant.BYTEDANCE]:"cn",[i.Tenant.PUBLIC]:"sg"},[i.Region.BOEI18N]:{[i.Tenant.BYTEDANCE]:"cn",[i.Tenant.PUBLIC]:"sg"}},c={[i.Region.CN]:{[i.Tenant.BYTEDANCE]:"https://abtestvm.bytedance.com",[i.Tenant.PUBLIC]:"https://abtestvm.bytedance.com"},[i.Region.BOE]:{[i.Tenant.BYTEDANCE]:"https://abtestvm.bytedance.com",[i.Tenant.PUBLIC]:"https://abtestvm.bytedance.com"},[i.Region.US]:{[i.Tenant.BYTEDANCE]:"https://abtestvm.bytedance.com",[i.Tenant.PUBLIC]:"https://libraweb-va.tiktok.com"},[i.Region.SG]:{[i.Tenant.BYTEDANCE]:"https://abtestvm.bytedance.com",[i.Tenant.PUBLIC]:"https://libraweb-sg.tiktok.com"},[i.Region.BOEI18N]:{[i.Tenant.BYTEDANCE]:"https://abtestvm.bytedance.com",[i.Tenant.PUBLIC]:"https://libraweb-sg.tiktok.com"}};i.Region.CN,i.Tenant.BYTEDANCE,i.Tenant.PUBLIC,i.Region.BOE,i.Tenant.BYTEDANCE,i.Tenant.PUBLIC,i.Region.US,i.Tenant.BYTEDANCE,i.Tenant.PUBLIC,i.Region.SG,i.Tenant.BYTEDANCE,i.Tenant.PUBLIC,i.Region.BOEI18N,i.Tenant.BYTEDANCE,i.Tenant.PUBLIC;const u={[i.Client.Cloud]:o,[i.Client.Native]:s},l={[i.Client.Cloud]:a,[i.Client.Native]:a},d={[i.Client.Cloud]:c,[i.Client.Native]:void 0},f={[i.Client.Cloud]:c,[i.Client.Native]:void 0};t.getTeaConfig=function(e={}){const t=i.getEnviromentVariables(),n=e?.region||i.getDefaultRegion(),r=e?.tenant||i.getTenant(t),o=i.getClient();return{appId:u?.[o]?.[n]?.[r]||576092,channel:l?.[o]?.[n]?.[r]||"cn",channelDomain:f?.[o]?.[n]?.[r],serviceOrigin:d?.[o]?.[n]?.[r]}}},535:(e,t,n)=>{"use strict";var r=n(6937),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function o(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function s(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e}var a,c,u,l,d=function(){function e(){this._hooks={},this._cache=[],this._hooksCache={}}return e.prototype.on=function(e,t){e&&t&&"function"==typeof t&&(this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t))},e.prototype.once=function(e,t){var n=this;e&&t&&"function"==typeof t&&this.on(e,(function r(i){t(i),n.off(e,r)}))},e.prototype.off=function(e,t){if(e&&this._hooks[e]&&this._hooks[e].length)if(t){var n=this._hooks[e].indexOf(t);-1!==n&&this._hooks[e].splice(n,1)}else this._hooks[e]=[]},e.prototype.emit=function(e,t,n){if(n){if(!e)return;-1!==this._cache.indexOf(n)?this._emit(e,t):(this._hooksCache.hasOwnProperty(n)||(this._hooksCache[n]={}),this._hooksCache[n].hasOwnProperty(e)||(this._hooksCache[n][e]=[]),this._hooksCache[n][e].push(t))}else this._emit(e,t)},e.prototype._emit=function(e,t){e&&this._hooks[e]&&this._hooks[e].length&&s(this._hooks[e]).forEach((function(e){try{e(t)}catch(e){}}))},e.prototype.set=function(e){e&&-1===this._cache.indexOf(e)&&this._cache.push(e)},e}(),f=function(e){return null!=e&&"[object Object]"==Object.prototype.toString.call(e)},h=function(e){return Array.isArray(e)},p=(a=+Date.now()+Number((""+Math.random()).slice(2,8)),function(){return a+=1}),g=function(e){return function(e,t,n){if("string"==typeof e&&"number"==typeof n){var r,i=[];n=n<=25?n:n%25;var o=String.fromCharCode(n+97);r=e.split(o);for(var s=0;s<r.length;s++){var a=parseInt(r[s],n);a=1*a^64;var c=String.fromCharCode(a);i.push(c)}return i.join("")}}(e,0,25)},_=function(e){navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?window.addEventListener("pagehide",e,!1):window.addEventListener("beforeunload",e,!1)},m=function(){var e=0;return["hidden","msHidden","webkitHidden"].forEach((function(t){void 0!==document[t]&&(e=1)})),e},v=function(e){var t=document.createElement("a");return t.href=e,t},y=function(e){var t={};try{var n=v(e).search;if(!n)return t;(n=n.slice(1)).split("&").forEach((function(e){var n,r,i=e.split("=");i.length&&(n=i[0],r=i[1]);try{t[n]=decodeURIComponent(void 0===r?"":r)}catch(e){t[n]=r}}))}catch(e){}return t},b=function(e){for(var t=0,n=0,r=(e+="").length,i=0;i<r;i++)((t=31*t+e.charCodeAt(n++))>0x7fffffffffff||t<-0x800000000000)&&(t&=0xffffffffffff);return t<0&&(t+=0x7ffffffffffff),t},E=(function(e){var t;t=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function i(){}function o(t,n,o){if("undefined"!=typeof document){"number"==typeof(o=e({path:"/"},i.defaults,o)).expires&&(o.expires=new Date(1*new Date+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var s=JSON.stringify(n);/^[\{\[]/.test(s)&&(n=s)}catch(e){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a="";for(var c in o)o[c]&&(a+="; "+c,!0!==o[c]&&(a+="="+o[c].split(";")[0]));return document.cookie=t+"="+n+a}}function s(e,n){if("undefined"!=typeof document){for(var i={},o=document.cookie?document.cookie.split("; "):[],s=0;s<o.length;s++){var a=o[s].split("="),c=a.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var u=t(a[0]);if(c=(r.read||r)(c,u)||t(c),n)try{c=JSON.parse(c)}catch(e){}if(i[u]=c,e===u)break}catch(e){}}return e?i[e]:i}}return i.set=o,i.get=function(e){return s(e,!1)},i.getJSON=function(e){return s(e,!0)},i.remove=function(t,n){o(t,"",e(n,{expires:-1}))},i.defaults={},i.withConverter=n,i}((function(){}))},e.exports=t()}(c={exports:{}}),c.exports),w=function(e,t){try{return e?E.get(e,{domain:t||document.domain}):E.get()}catch(e){return""}},S=function(e,t,n,r){try{var i=r||document.domain,o=+new Date+(n||6048e5);E.set(e,t,{expires:new Date(o),path:"/",domain:i})}catch(e){}},T=function(){function e(){this.cache={}}return e.prototype.setItem=function(e,t){this.cache[e]=t},e.prototype.getItem=function(e){return this.cache[e]},e.prototype.removeItem=function(e){this.cache[e]=void 0},e.prototype.getCookie=function(e,t){return w(e,t)},e.prototype.setCookie=function(e,t,n,r){S(e,t,n,r)},e}(),C={getItem:function(e){try{var t=localStorage.getItem(e),n=t;try{t&&"string"==typeof t&&(n=JSON.parse(t))}catch(e){}return n||{}}catch(e){}return{}},setItem:function(e,t){try{var n="string"==typeof t?t:JSON.stringify(t);localStorage.setItem(e,n)}catch(e){}},removeItem:function(e){try{localStorage.removeItem(e)}catch(e){}},getCookie:function(e,t){return w(e,t)},setCookie:function(e,t,n,r){S(e,t,n,r)},isSupportLS:function(){try{return localStorage.setItem("_ranger-test-key","hi"),localStorage.getItem("_ranger-test-key"),localStorage.removeItem("_ranger-test-key"),!0}catch(e){return!1}}()},O={getItem:function(e){try{var t=sessionStorage.getItem(e),n=t;try{t&&"string"==typeof t&&(n=JSON.parse(t))}catch(e){}return n||{}}catch(e){}return{}},setItem:function(e,t){try{var n="string"==typeof t?t:JSON.stringify(t);sessionStorage.setItem(e,n)}catch(e){}},removeItem:function(e){try{sessionStorage.removeItem(e)}catch(e){}},getCookie:function(e,t){return w(e,t)},setCookie:function(e,t,n,r){S(e,t,n,r)},isSupportSession:function(){try{return sessionStorage.setItem("_ranger-test-key","hi"),sessionStorage.getItem("_ranger-test-key"),sessionStorage.removeItem("_ranger-test-key"),!0}catch(e){return!1}}()},A=function(){function e(e,t){this._storage=t&&"session"===t?O:!e&&C.isSupportLS?C:new T}return e.prototype.getItem=function(e){return this._storage.getItem(e)},e.prototype.setItem=function(e,t){this._storage.setItem(e,t)},e.prototype.getCookie=function(e,t){return this._storage.getCookie(e,t)},e.prototype.setCookie=function(e,t,n,r){this._storage.setCookie(e,t,n,r)},e.prototype.removeItem=function(e){this._storage.removeItem(e)},e}(),I=function(){function e(e,t,n){this.appid=e,this.domain=t,this.userAgent=window.navigator.userAgent,this.appVersion=window.navigator.appVersion,this.cookie_expire=n}return e.prototype.init=function(){var e=window.navigator.userAgent,t=window.navigator.language,n=document.referrer,r=n?v(n).hostname:"",i=y(window.location.href),o=/Mobile|htc|mini|Android|iP(ad|od|hone)/.test(this.appVersion)?"wap":"web";this.utm=function(e,t,n,r){var i=new A(!1),o=new A(!1,"session"),s=e?"_tea_utm_cache_"+e:"_tea_utm_cache",a=e?"_$utm_from_url_"+e:"_$utm_from_url",c={},u=["tr_shareuser","tr_admaster","tr_param1","tr_param2","tr_param3","tr_param4","$utm_from_url"],l={ad_id:Number(t.ad_id)||void 0,campaign_id:Number(t.campaign_id)||void 0,creative_id:Number(t.creative_id)||void 0,utm_source:t.utm_source,utm_medium:t.utm_medium,utm_campaign:t.utm_campaign,utm_term:t.utm_term,utm_content:t.utm_content,tr_shareuser:t.tr_shareuser,tr_admaster:t.tr_admaster,tr_param1:t.tr_param1,tr_param2:t.tr_param2,tr_param3:t.tr_param3,tr_param4:t.tr_param4};try{var d=!1;for(var f in l)l[f]&&(-1!==u.indexOf(f)?(c.hasOwnProperty("tracer_data")||(c.tracer_data={}),c.tracer_data[f]=l[f]):c[f]=l[f],d=!0);if(d)o.setItem(a,"1"),i.setCookie(s,JSON.stringify(c),r,n);else{var h=i.getCookie(s,n);h&&(c=JSON.parse(h))}o.getItem(a)&&(c.hasOwnProperty("tracer_data")||(c.tracer_data={}),c.tracer_data.$utm_from_url=1)}catch(e){return l}return c}(this.appid,i,this.domain,this.cookie_expire);var s=this.browser(),a=this.os();return{browser:s.browser,browser_version:s.browser_version,platform:o,os_name:a.os_name,os_version:a.os_version,userAgent:e,screen_width:window.screen&&window.screen.width,screen_height:window.screen&&window.screen.height,device_model:this.getDeviceModel(a.os_name),language:t,referrer:n,referrer_host:r,utm:this.utm,latest_data:this.last(n,r)}},e.prototype.last=function(e,t){var n="",r="",i="",o=location.hostname,s=!1;if(e&&t&&o!==t){n=e,r=t,s=!0;var a=y(e);a.keyword&&(i=a.keyword)}return{$latest_referrer:n,$latest_referrer_host:r,$latest_search_keyword:i,isLast:s}},e.prototype.browser=function(){var e,t,n="",r=""+parseFloat(this.appVersion),i=this.userAgent;return-1!==i.indexOf("Edge")||-1!==i.indexOf("Edg")?(n="Microsoft Edge",-1!==i.indexOf("Edge")?(e=i.indexOf("Edge"),r=i.substring(e+5)):(e=i.indexOf("Edg"),r=i.substring(e+4))):-1!==(e=i.indexOf("MSIE"))?(n="Microsoft Internet Explorer",r=i.substring(e+5)):-1!==(e=i.indexOf("MetaSr"))?(n="sougoubrowser",r=i.substring(e+7,e+10)):-1!==i.indexOf("MQQBrowser")||-1!==i.indexOf("QQBrowser")?(n="qqbrowser",-1!==i.indexOf("MQQBrowser")?(e=i.indexOf("MQQBrowser"),r=i.substring(e+11,e+15)):-1!==i.indexOf("QQBrowser")&&(e=i.indexOf("QQBrowser"),r=i.substring(e+10,e+25))):-1!==i.indexOf("Chrome")?-1!==(e=i.indexOf("MicroMessenger"))?(n="weixin",r=i.substring(e+15,e+20)):-1!==(e=i.indexOf("360"))?(n="360browser",r=i.substring(i.indexOf("Chrome")+7)):-1!==i.indexOf("baidubrowser")||-1!==i.indexOf("BIDUBrowser")?(-1!==i.indexOf("baidubrowser")?(e=i.indexOf("baidubrowser"),r=i.substring(e+13,e+16)):-1!==i.indexOf("BIDUBrowser")&&(e=i.indexOf("BIDUBrowser"),r=i.substring(e+12,e+15)),n="baidubrowser"):-1!==(e=i.indexOf("xiaomi"))?-1!==i.indexOf("openlanguagexiaomi")?(n="openlanguage xiaomi",r=i.substring(e+7,e+13)):(n="xiaomi",r=i.substring(e-7,e-1)):-1!==(e=i.indexOf("TTWebView"))?(n="TTWebView",r=i.substring(e+10,e+23)):(-1!==(e=i.indexOf("Chrome"))||-1!==(e=i.indexOf("Chrome")))&&(n="Chrome",r=i.substring(e+7)):-1!==i.indexOf("Safari")?-1!==(e=i.indexOf("QQ"))?(n="qqbrowser",r=i.substring(e+10,e+16)):-1!==(e=i.indexOf("Safari"))&&(n="Safari",r=i.substring(e+7),-1!==(e=i.indexOf("Version"))&&(r=i.substring(e+8))):-1!==(e=i.indexOf("Firefox"))?(n="Firefox",r=i.substring(e+8)):-1!==(e=i.indexOf("MicroMessenger"))?(n="weixin",r=i.substring(e+15,e+20)):-1!==(e=i.indexOf("QQ"))&&(n="qqbrowser",r=i.substring(e+3,e+8)),-1!==(t=r.indexOf(";"))&&(r=r.substring(0,t)),-1!==(t=r.indexOf(" "))&&(r=r.substring(0,t)),-1!==(t=r.indexOf(")"))&&(r=r.substring(0,t)),{browser:n,browser_version:r}},e.prototype.os=function(){for(var e="",t="",n=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0|Windows NT 10.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Android",r:/Android/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"chromeOS",r:/CrOS/},{s:"Linux",r:/(Linux|X11)/},{s:"Sun OS",r:/SunOS/}],r=0;r<n.length;r++){var i=n[r];if(i.r.test(this.userAgent)){"Mac OS X"===(e=i.s)&&this.isNewIpad()&&(e="iOS");break}}var o,s,a=function(e,t){var n=e.exec(t);return n&&n[1]?n[1]:""},c=function(e,t){var n=RegExp("(?:^|[^A-Z0-9-_]|[^A-Z0-9-]_|sprd-)(?:"+e+")","i").exec(t);return n?n.slice(1)[0]:""};switch(/Windows/.test(e)&&(t=a(/Windows (.*)/,e),e="windows"),e){case"Mac OS X":t=c("Mac[ +]OS[ +]X(?:[ /](?:Version )?(\\d+(?:[_\\.]\\d+)+))?",this.userAgent),e="mac";break;case"Android":(s=a(/Android ([\.\_\d]+)/,o=this.userAgent))||(s=a(/Android\/([\.\_\d]+)/,o)),t=s,e="android";break;case"iOS":t=this.isNewIpad()?c("Mac[ +]OS[ +]X(?:[ /](?:Version )?(\\d+(?:[_\\.]\\d+)+))?",this.userAgent):(t=/OS (\d+)_(\d+)_?(\d+)?/.exec(this.appVersion))?t[1]+"."+t[2]+"."+(0|t[3]):"",e="ios";break;case"chromeOS":var u=this.userAgent.indexOf("x86_64");t=this.userAgent.substring(u+7,u+16)}return{os_name:e,os_version:t}},e.prototype.getDeviceModel=function(e){var t="";try{if("android"===e)navigator.userAgent.split(";").forEach((function(e){e.indexOf("Build/")>-1&&(t=e.slice(0,e.indexOf("Build/")))}));else if("ios"===e||"mac"===e||"windows"===e)if(this.isNewIpad())t="iPad";else{var n=navigator.userAgent.replace("Mozilla/5.0 (",""),r=n.indexOf(";");t=n.slice(0,r)}}catch(e){return t.trim()}return t.trim()},e.prototype.isNewIpad=function(){return void 0!==this.userAgent&&"MacIntel"===navigator.platform&&"number"==typeof navigator.maxTouchPoints&&navigator.maxTouchPoints>1},e}(),R={cn:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az1az22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az1gz22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k",sg:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k"},D={cn:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z4az28z1gz1hz1gz1cz18z1nz1gz4az1az1mz1k",sg:"1fz22z22z1nz21z4mz4bz4bz21z1ez18z1jz1gz49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz1kz18z1jz1gz24z18z49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k"},x="5.1.25",M=(g("1fz22z22z1nz21z4mz4bz4bz1jz1dz49z1az1bz1lz49z22z1mz21z4az19z27z22z1cz21z1az1kz4az1az1mz1kz4bz1mz19z1hz4bz21z22z18z22z1gz1az4bz1jz1mz1ez49z21z1bz1iz4bz1az1mz1jz1jz1cz1az22z4bz24z1gz21z23z18z1jz49z1cz1bz1gz22z1mz20z49z20z18z1lz1ez1cz20z21z4az1hz21"),g("1fz22z22z1nz21z4mz4bz4bz1jz1dz49z1az1bz1lz49z22z1mz21z4az19z27z22z1cz21z1az1kz4az1az1mz1kz4bz1mz19z1hz4bz21z22z18z22z1gz1az4bz1jz1mz1ez49z21z1bz1iz4bz1az1mz1jz1jz1cz1az22z4bz24z1gz21z23z18z1jz49z18z19z49z1az1mz20z1cz4az1hz21"),g("1fz22z22z1nz21z4mz4bz4bz1jz1dz49z1az1bz1lz49z22z1mz21z4az19z27z22z1cz21z1az1kz4az1az1mz1kz4bz1mz19z1hz4bz21z22z18z22z1gz1az4bz1jz1mz1ez49z21z1bz1iz4bz1az1mz1jz1jz1cz1az22z4bz24z1gz21z23z18z1jz49z18z19z49z1jz1mz18z1bz1cz20z4az1hz21"),g("1fz22z22z1nz21z4mz4bz4bz1jz1dz49z1az1bz1lz49z22z1mz21z4az19z27z22z1cz21z1az1kz4az1az1mz1kz4bz1mz19z1hz4bz21z22z18z22z1gz1az4bz1jz1mz1ez49z21z1bz1iz4bz1az1mz1jz1jz1cz1az22z4bz1fz1cz18z22z1kz18z1nz49z1az1mz20z1c"),g("1fz22z22z1nz21z4mz4bz4bz1jz1dz4fz49z1bz18z22z18z4az24z1mz1jz1az1az1bz1lz4az1az1mz1kz4bz1mz19z1hz4bz1bz18z22z18z49z21z22z18z22z1gz1az4bz1jz1mz1ez49z21z1bz1iz4bz1az1mz1jz1jz1cz1az22z4bz22z1cz21z22z1cz20z49z1cz24z1cz1lz22z49z1gz1lz21z1nz1cz1az22z1mz20"),function(){function e(e,t){this.collector=e,this.config=t,this.eventNameWhiteList=["__bav_page","__bav_beat","__bav_page_statistics","__bav_click","__bav_page_exposure"],this.paramsNameWhiteList=["$inactive","$inline","$target_uuid_list","$source_uuid","$is_spider","$source_id","$is_first_time","_staging_flag"],this.regStr=new RegExp("^[a-zA-Z0-9][a-z0-9A-Z_.-]{1,255}$")}return e.prototype.checkVerify=function(e){var t=this;if(!e||!e.length)return!1;var n=e[0];if(!n)return!1;var r=n.events,i=n.header;if(!r||!r.length)return!1;var o=!0;return r.forEach((function(e){if(!e)return o=!1,void(e.checkEvent="事件异常");t.checkEventName(e.event)||(o=!1,e.checkEvent="事件名不能以 $ or __开头"),t.checkEventParams(e.params)||(o=!1,e.checkParams="属性名不能以 $ or __开头")})),this.checkEventParams(i)||(o=!1),o},e.prototype.checkEventName=function(e){return!!e&&this.calculate(e,"event")},e.prototype.checkEventParams=function(e){var t=e;if("string"==typeof e&&(t=JSON.parse(t)),!Object.keys(t).length)return!0;for(var n in t)return!(!this.calculate(n,"params")||"string"==typeof t[n]&&t[n].length>1024);return!0},e.prototype.calculate=function(e,t){return-1!==("event"===t?this.eventNameWhiteList:this.paramsNameWhiteList).indexOf(e)||!new RegExp("^\\$").test(e)&&!new RegExp("^__").test(e)||!1},e}());!function(e){e.Init="init",e.Config="config",e.Start="start",e.Ready="ready",e.UnReady="un-ready",e.TokenComplete="token-complete",e.TokenStorage="token-storage",e.TokenFetch="token-fetch",e.TokenError="token-error",e.ConfigUuid="config-uuid",e.ConfigWebId="config-webid",e.ConfigDomain="config-domain",e.CustomWebId="custom-webid",e.TokenChange="token-change",e.TokenReset="token-reset",e.ConfigTransform="config-transform",e.EnvTransform="env-transform",e.SessionReset="session-reset",e.SessionResetTime="session-reset-time",e.SetSessionId="set-session-id",e.Event="event",e.Events="events",e.EventNow="event-now",e.CleanEvents="clean-events",e.BeconEvent="becon-event",e.SubmitBefore="submit-before",e.SubmitScuess="submit-scuess",e.SubmitAfter="submit-after",e.SubmitError="submit-error",e.SubmitVerify="submit-verify",e.Stay="stay",e.ResetStay="reset-stay",e.StayReady="stay-ready",e.SetStay="set-stay",e.RouteChange="route-change",e.RouteReady="route-ready",e.Ab="ab",e.AbVar="ab-var",e.AbAllVars="ab-all-vars",e.AbConfig="ab-config",e.AbExternalVersion="ab-external-version",e.AbVersionChangeOn="ab-version-change-on",e.AbVersionChangeOff="ab-version-change-off",e.AbOpenLayer="ab-open-layer",e.AbCloseLayer="ab-close-layer",e.AbReady="ab-ready",e.AbComplete="ab-complete",e.AbTimeout="ab-timeout",e.Profile="profile",e.ProfileSet="profile-set",e.ProfileSetOnce="profile-set-once",e.ProfileUnset="profile-unset",e.ProfileIncrement="profile-increment",e.ProfileAppend="profile-append",e.ProfileClear="profile-clear",e.Autotrack="autotrack",e.AutotrackReady="autotrack-ready",e.CepReady="cep-ready",e.TracerReady="tracer-ready",e.sessionRecord="session-record",e.SessionRecordStart="session-record-start",e.SessionRecordPause="session-record-pause",e.SessionRecordEnd="session-record-end",e.SessionRecordReport="session-record-report",e.DestoryInstance="destory-instance",e.VisualCollectReady="visual-collect-ready",e.VisualApiReady="visual-api-ready",e.VisualApiUpdate="visual-api-update"}(u||(u={})),function(e){e.DEBUGGER_MESSAGE="debugger-message",e.DEBUGGER_MESSAGE_SDK="debugger-message-sdk",e.DEBUGGER_MESSAGE_FETCH="debugger-message-fetch",e.DEBUGGER_MESSAGE_FETCH_RESULT="debugger-message-fetch-result",e.DEBUGGER_MESSAGE_EVENT="debugger-message-event",e.DEVTOOL_WEB_READY="devtool-web-ready"}(l||(l={}));var P,N=u,k=void 0,L=(new Date).getTimezoneOffset(),j=parseInt(""+-L/60,10),z=60*L,F=function(){function e(e,t){this.is_first_time=!0,this.configPersist=!1,this.initConfig=t,this.collect=e;var n=new I(t.app_id,t.cookie_domain||"",t.cookie_expire||7776e6).init();this.eventCheck=new M(e,t);var r="__tea_cache_first_"+t.app_id;this.configKey="__tea_cache_config_"+t.app_id,this.sessionStorage=new A(!1,"session"),this.localStorage=new A(!1,"local"),t.configPersist&&(this.configPersist=!0,this.storage=1===t.configPersist?this.sessionStorage:this.localStorage);var i=this.localStorage.getItem(r);i&&1==i?this.is_first_time=!1:(this.is_first_time=!0,this.localStorage.setItem(r,"1")),this.envInfo={user:{user_unique_id:k,user_type:k,user_id:k,user_is_auth:k,user_is_login:k,device_id:k,web_id:k,ip_addr_id:k,user_unique_id_type:k},header:{app_id:k,app_name:k,app_install_id:k,install_id:k,app_package:k,app_channel:k,app_version:k,ab_version:k,os_name:n.os_name,os_version:n.os_version,device_model:n.device_model,ab_client:k,traffic_type:k,client_ip:k,device_brand:k,os_api:k,access:k,language:n.language,region:k,app_language:k,app_region:k,creative_id:n.utm.creative_id,ad_id:n.utm.ad_id,campaign_id:n.utm.campaign_id,log_type:k,rnd:k,platform:n.platform,sdk_version:x,sdk_lib:"js",province:k,city:k,timezone:j,tz_offset:z,tz_name:k,sim_region:k,carrier:k,resolution:n.screen_width+"x"+n.screen_height,browser:n.browser,browser_version:n.browser_version,referrer:n.referrer,referrer_host:n.referrer_host,width:n.screen_width,height:n.screen_height,screen_width:n.screen_width,screen_height:n.screen_height,utm_term:n.utm.utm_term,utm_content:n.utm.utm_content,utm_source:n.utm.utm_source,utm_medium:n.utm.utm_medium,utm_campaign:n.utm.utm_campaign,tracer_data:JSON.stringify(n.utm.tracer_data),custom:{},wechat_unionid:k,wechat_openid:k}},this.ab_version="",this.evtParams={},this.reportErrorCallback=function(){},this.isLast=!1,this.setCustom(n),this.initDomain(),this.initABData()}return e.prototype.initDomain=function(){var e=this.initConfig.channel_domain;if(e)this.domain=e;else{var t=this.initConfig.channel;this.domain=g(D[t])}},e.prototype.setDomain=function(e){this.domain=e},e.prototype.getDomain=function(){return this.domain},e.prototype.initABData=function(){var e="__tea_sdk_ab_version_"+this.initConfig.app_id,t=null;if(this.initConfig.ab_cross){var n=this.localStorage.getCookie(e,this.initConfig.ab_cookie_domain);t=n?JSON.parse(n):null}else t=this.localStorage.getItem(e);this.setAbCache(t)},e.prototype.setAbCache=function(e){this.ab_cache=e},e.prototype.getAbCache=function(){return this.ab_cache},e.prototype.setAbVersion=function(e){this.ab_version=e},e.prototype.getAbVersion=function(){return this.ab_version},e.prototype.clearAbCache=function(){this.ab_version="",this.ab_cache={}},e.prototype.getUrl=function(e){var t="";switch(e){case"event":t="/list";break;case"webid":t="/webid";break;case"tobid":t="/tobid"}var n="";return this.initConfig.caller&&(n="?sdk_version="+x+"&sdk_name=web&app_id="+this.initConfig.app_id+"&caller="+this.initConfig.caller),""+this.getDomain()+t+n},e.prototype.setCustom=function(e){if(e&&e.latest_data&&e.latest_data.isLast)for(var t in delete e.latest_data.isLast,this.isLast=!0,e.latest_data)this.envInfo.header.custom[t]=e.latest_data[t]},e.prototype.set=function(e){var t=this;Object.keys(e).forEach((function(n){void 0!==e[n]&&null!==e[n]||t.delete(n);try{t.eventCheck.calculate(n,"config")}catch(e){}if("traffic_type"===n&&t.isLast&&(t.envInfo.header.custom.$latest_traffic_source_type=e[n]),"evtParams"===n)t.evtParams=i(i({},t.evtParams||{}),e.evtParams||{});else if("_staging_flag"===n)t.evtParams=i(i({},t.evtParams||{}),{_staging_flag:e._staging_flag});else if("reportErrorCallback"===n&&"function"==typeof e[n])t.reportErrorCallback=e[n];else{var r="",o="";if(n.indexOf(".")>-1){var s=n.split(".");r=s[0],o=s[1]}r?"user"===r||"header"===r?t.envInfo[r][o]=e[n]:t.envInfo.header.custom[o]=e[n]:Object.hasOwnProperty.call(t.envInfo.user,n)?["user_type","ip_addr_id"].indexOf(n)>-1?t.envInfo.user[n]=e[n]?Number(e[n]):e[n]:["user_id","web_id","user_unique_id","user_unique_id_type"].indexOf(n)>-1?t.envInfo.user[n]=e[n]?String(e[n]):e[n]:["user_is_auth","user_is_login"].indexOf(n)>-1?t.envInfo.user[n]=Boolean(e[n]):"device_id"===n&&(t.envInfo.user[n]=e[n]):Object.hasOwnProperty.call(t.envInfo.header,n)?t.envInfo.header[n]=e[n]:t.envInfo.header.custom[n]=e[n]}}))},e.prototype.get=function(e){try{return e?"evtParams"===e?this.evtParams:"reportErrorCallback"===e?this[e]:Object.hasOwnProperty.call(this.envInfo.user,e)?this.envInfo.user[e]:Object.hasOwnProperty.call(this.envInfo.header,e)?this.envInfo.header[e]:JSON.parse(JSON.stringify(this.envInfo[e])):JSON.parse(JSON.stringify(this.envInfo))}catch(e){this.collect.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,info:"发生了异常",level:"error",time:Date.now(),data:e.message})}},e.prototype.setStore=function(e){try{if(!this.configPersist)return;var t=this.storage.getItem(this.configKey)||{};if(t&&Object.keys(e).length){var n=Object.assign(e,t);this.storage.setItem(this.configKey,n)}}catch(e){this.collect.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,info:"发生了异常",level:"error",time:Date.now(),data:e.message})}},e.prototype.getStore=function(){try{if(!this.configPersist)return null;var e=this.storage.getItem(this.configKey)||{};return e&&Object.keys(e).length?e:null}catch(e){return this.collect.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,info:"发生了异常",level:"error",time:Date.now(),data:e.message}),null}},e.prototype.delete=function(e){try{if(!this.configPersist)return;var t=this.storage.getItem(this.configKey)||{};t&&Object.hasOwnProperty.call(t,e)&&(delete t[e],this.storage.setItem(this.configKey,t))}catch(e){this.collect.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,info:"发生了异常",level:"error",time:Date.now(),data:e.message})}},e}(),B=function(){function e(e,t){this.isLog=t||!1,this.name=e||""}return e.prototype.info=function(e){this.isLog},e.prototype.warn=function(e){this.isLog},e.prototype.error=function(e){this.isLog},e.prototype.throw=function(e){throw this.error(this.name),new Error(e)},e}(),U=function(){function e(){this.spiderBot=["Baiduspider","googlebot","360Spider","haosouspider","YoudaoBot","Sogou News Spider","Yisouspider","Googlebot","Headless","Applebot","Bingbot","PetalBot"]}return e.prototype.checkSpider=function(e){if(!e.enable_spider)return!1;var t=window.navigator.userAgent;if(!t)return!0;var n=!1;return this.spiderBot.forEach((function(e){-1!==t.indexOf(e)&&(n=!0)})),n},e}(),G=function(){function e(e,t){this.collect=e,this.native=t}var t=e.prototype;return t.bridgeInject=function(){try{return!!this.native&&!!AppLogBridge}catch(e){return!1}},t.bridgeReady=function(){var e=this;return new Promise((function(t,n){try{e.bridgeInject()?AppLogBridge.hasStarted((function(e){e?t(!0):n(!1)})):n(!1)}catch(e){n(!1)}}))},t.setNativeAppId=function(e){try{AppLogBridge.setNativeAppId(JSON.stringify(e))}catch(e){}},t.setConfig=function(e){var t=this;try{Object.keys(e).forEach((function(n){"user_unique_id"===n?t.setUserUniqueId(e[n]):e[n]?t.addHeaderInfo(n,e[n]):t.removeHeaderInfo(n)}))}catch(e){}},t.setUserUniqueId=function(e){try{AppLogBridge.setUserUniqueId(e)}catch(e){}},t.addHeaderInfo=function(e,t){try{AppLogBridge.addHeaderInfo(e,t)}catch(e){}},t.setHeaderInfo=function(e){try{AppLogBridge.setHeaderInfo(JSON.stringify(e))}catch(e){}},t.removeHeaderInfo=function(e){try{AppLogBridge.removeHeaderInfo(e)}catch(e){}},t.reportPv=function(e){this.onEventV3("predefine_pageview",e)},t.onEventV3=function(e,t){try{AppLogBridge.onEventV3(e,t),this.collect.emit(DebuggerMesssge.DEBUGGER_MESSAGE,{type:DebuggerMesssge.DEBUGGER_MESSAGE_EVENT,info:"bridge埋点上报",time:Date.now(),data:[{events:[{event:e,params:t}]}],code:200,status:"success"})}catch(e){}},t.profileSet=function(e){try{AppLogBridge.profileSet(e)}catch(e){}},t.profileSetOnce=function(e){try{AppLogBridge.profileSetOnce(e)}catch(e){}},t.profileIncrement=function(e){try{AppLogBridge.profileIncrement(e)}catch(e){}},t.profileUnset=function(e){try{AppLogBridge.profileUnset(e)}catch(e){}},t.profileAppend=function(e){try{AppLogBridge.profileAppend(e)}catch(e){}},e}(),q=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},V=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;this.collect=e,this.storage=new A(!1,"session"),this.sessionKey="__tea_session_id_"+t.app_id,this.expireTime=t.expireTime||18e5,this.disableSession=t.disable_session,this.disableSessionTimeCheck=t.disable_session_check,this.disableSession||(this.setSessionId(),this.collect.on(N.SessionReset,(function(e){n.resetSessionId(e)})),this.collect.on(N.SessionResetTime,(function(){n.updateSessionIdTime()})))},e.prototype.updateSessionIdTime=function(){var e=this.storage.getItem(this.sessionKey);if(e&&e.sessionId){var t=e.timestamp;Date.now()-t>this.expireTime?e={sessionId:q(),timestamp:Date.now()}:e.timestamp=Date.now(),this.storage.setItem(this.sessionKey,e),this.resetExpTime()}},e.prototype.setSessionId=function(){var e=this,t=this.storage.getItem(this.sessionKey);t&&t.sessionId?t.timestamp=Date.now():t={sessionId:q(),timestamp:Date.now()},this.storage.setItem(this.sessionKey,t),this.disableSessionTimeCheck||(this.sessionExp=setInterval((function(){e.checkEXp()}),this.expireTime))},e.prototype.getSessionId=function(){var e=this.storage.getItem(this.sessionKey);return this.disableSession?"":e&&e.sessionId?e.sessionId:""},e.prototype.resetExpTime=function(){var e=this;this.sessionExp&&(clearInterval(this.sessionExp),this.sessionExp=setInterval((function(){e.checkEXp()}),this.expireTime))},e.prototype.resetSessionId=function(e){var t={sessionId:e||q(),timestamp:Date.now()};this.storage.setItem(this.sessionKey,t)},e.prototype.checkEXp=function(){var e=this.storage.getItem(this.sessionKey);e&&e.sessionId&&Date.now()-e.timestamp+30>=this.expireTime&&(e={sessionId:q(),timestamp:Date.now()},this.storage.setItem(this.sessionKey,e))},e}(),$=function(){function e(){this.eventLimit=50,this.enable_ttwebid=!1,this.eventCache=[],this.beconEventCache=[]}return e.prototype.apply=function(e,t){var n=this;this.collect=e,this.config=t,this.configManager=e.configManager,this.eventCheck=new M(e,t),this.cacheStorgae=new A(!0),this.localStorage=new A(!1),this.maxReport=t.max_report||10,this.reportTime=t.reportTime||t.report_time||30,this.timeout=t.timeout||1e5,this.enable_ttwebid=t.enable_ttwebid,this.reportUrl=t.report_url||this.configManager.getUrl("event"),this.eventKey="__tea_cache_events_"+this.configManager.get("app_id"),this.beconKey="__tea_cache_events_becon_"+this.configManager.get("app_id"),this.abKey="__tea_sdk_ab_version_"+this.configManager.get("app_id"),this.refer_key="__tea_cache_refer_"+this.configManager.get("app_id"),this.pageId=q(),this.collect.on(N.Ready,(function(){n.reportAll(!1)})),this.collect.on(N.ConfigDomain,(function(){n.reportUrl=n.configManager.getUrl("event")})),this.collect.on(N.Event,(function(e){n.event(e)})),this.collect.on(N.BeconEvent,(function(e){n.beconEvent(e)})),this.collect.on(N.CleanEvents,(function(){n.reportAll(!1)}));var r=this.linster();this.collect.on(N.DestoryInstance,(function(){r&&r()}))},e.prototype.linster=function(){var e=this,t=function(){e.reportAll(!0)};window.addEventListener("unload",t,!1),_(t);var n=function(){"hidden"===document.visibilityState&&e.reportAll(!0)};return document.addEventListener("visibilitychange",n,!1),function(){window.removeEventListener("unload",t),window.removeEventListener("pagehide",t,!1),window.removeEventListener("beforeunload",t,!1),document.removeEventListener("visibilitychange",n,!1)}},e.prototype.reportAll=function(e){this.report(e),this.reportBecon()},e.prototype.event=function(e){var t=this;try{if(this.collect.destroy)return;if(this.collect.sdkStop)return;var n=s(e,this.cacheStorgae.getItem(this.eventKey)||[]);if(this.cacheStorgae.setItem(this.eventKey,n),this.reportTimeout&&clearTimeout(this.reportTimeout),n.length>=this.maxReport)this.report(!1);else{var r=this.reportTime;this.reportTimeout=setTimeout((function(){t.report(!1),t.reportTimeout=null}),r)}}catch(e){this.collect.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,info:"发生了异常",level:"error",time:Date.now(),data:e.message})}},e.prototype.beconEvent=function(e){if(!this.collect.destroy&&!this.collect.sdkStop){var t=s(e,this.cacheStorgae.getItem(this.beconKey)||[]);this.cacheStorgae.setItem(this.beconKey,t),this.collect.tokenManager.getReady()&&this.collect.sdkReady&&(this.cacheStorgae.removeItem(this.beconKey),this.send(this.split(this.merge(t)),!0))}},e.prototype.reportBecon=function(){if(!this.collect.destroy&&!this.collect.sdkStop&&this.collect.tokenManager.getReady()&&this.collect.sdkReady){var e=this.cacheStorgae.getItem(this.beconKey)||[];e&&e.length&&(this.cacheStorgae.removeItem(this.beconKey),this.send(this.split(this.merge(e)),!0))}},e.prototype.report=function(e){if(!this.collect.destroy&&!this.collect.sdkStop&&this.collect.tokenManager.getReady()&&this.collect.sdkReady){var t=this.cacheStorgae.getItem(this.eventKey)||[];t.length&&(this.cacheStorgae.removeItem(this.eventKey),this.sliceEvent(t,e))}},e.prototype.sliceEvent=function(e,t){if(e.length>this.eventLimit)for(var n=0;n<e.length;n+=this.eventLimit){var r;r=e.slice(n,n+this.eventLimit);var i=this.split(this.merge(r));this.send(i,t)}else i=this.split(this.merge(e)),this.send(i,t)},e.prototype.handleRefer=function(){var e="";try{if(this.config.spa||this.config.autotrack){var t=this.localStorage.getItem(this.refer_key)||{};e=t.routeChange?t.refer_key:this.configManager.get("referrer")}else e=this.configManager.get("referrer")}catch(t){e=document.referrer}return e},e.prototype.merge=function(e,t){var n=this,r=this.configManager.get(),o=r.header,s=r.user;this.config.enable_pageid&&(o.custom.page_id=this.pageId),o.referrer=this.handleRefer(),o.custom=JSON.stringify(o.custom);var a=this.configManager.get("evtParams"),c=this.configManager.get("user_unique_id_type"),u=e.map((function(e){try{Object.keys(a).length&&!t&&(e.params=i(i({},a),e.params)),c&&(e.params.$user_unique_id_type=c);var r=n.configManager.getAbCache(),o=s[n.config.ab_user_mode]||s.user_unique_id;return r&&r.uuid&&r.uuid===o&&n.configManager.getAbVersion()&&(e.ab_sdk_version=n.configManager.getAbVersion()),e.session_id=n.collect.sessionManager.getSessionId(),e.params=JSON.stringify(e.params),e}catch(t){return n.collect.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,info:"发生了异常",level:"error",time:Date.now(),data:t.message}),e}})),d=JSON.parse(JSON.stringify({events:u,user:s,header:o}));d.local_time=Math.floor(Date.now()/1e3),d.user_unique_type=this.config.enable_ttwebid?this.config.user_unique_type:void 0,d.verbose=1;var f=[];return f.push(d),f},e.prototype.split=function(e){return e.map((function(e){var t=[];return t.push(e),t}))},e.prototype.send=function(e,t){var n=this;e.length&&(this.config.disable_track_event||e.forEach((function(e){try{var r=JSON.parse(JSON.stringify(e));n.config.filter&&(r=n.config.filter(r)),n.collect.eventFilter&&r&&(r=n.collect.eventFilter(r));var i=r||e,o=JSON.parse(JSON.stringify(i));if(n.eventCheck.checkVerify(o),!i.length)return;var s=!0;if(i.forEach((function(e){e.events.length||(s=!1)})),!s)return;n.collect.emit(N.SubmitBefore,i),n.collect.requestManager.useRequest({url:n.reportUrl,data:i,success:function(e,t){e&&0!==e.e?(n.collect.emit(N.SubmitError,{type:"f_data",eventData:t,errorCode:e.e,response:e}),n.collect.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_EVENT,info:"埋点上报失败",time:Date.now(),data:o,code:e.e,failType:"数据异常失败",status:"fail"})):(n.collect.emit(N.SubmitScuess,{eventData:t,res:e}),n.collect.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_EVENT,info:"埋点上报成功",time:Date.now(),data:o,code:200,status:"success"}))},fail:function(e,t){n.configManager.get("reportErrorCallback")(e,t),n.collect.emit(N.SubmitError,{type:"f_net",eventData:e,errorCode:t}),n.collect.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_EVENT,info:"埋点上报网络异常",time:Date.now(),data:o,code:t,failType:"网络异常失败",status:"fail"})},timeout:n.timeout,useBeacon:t,withCredentials:n.enable_ttwebid}),n.collect.emit(N.SubmitAfter,i)}catch(e){n.collect.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,info:"发生了异常",level:"error",time:Date.now(),data:e.message})}})))},e}(),H=function(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(10):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e)}().replace(/-/g,"").slice(0,19)},W=function(){function e(){this.cacheToken={},this.enableCookie=!1,this.enable_ttwebid=!1,this.enableCustomWebid=!1}return e.prototype.apply=function(e,t){var n=this;this.collect=e,this.config=t,this.configManager=this.collect.configManager,this.storage=new A(!1),this.tokenKey="__tea_cache_tokens_"+t.app_id,this.enable_ttwebid=t.enable_ttwebid,this.enableCustomWebid=t.enable_custom_webid,this.collect.on(N.ConfigUuid,(function(e){n.setUuid(e)})),this.collect.on(N.ConfigWebId,(function(e){n.setWebId(e)})),this.enableCookie=t.cross_subdomain,this.expiresTime=t.cookie_expire||6048e5,this.cookieDomain=t.cookie_domain||"",this.checkStorage()},e.prototype.checkStorage=function(){var e=this;if(this.enableCookie){var t=this.storage.getCookie(this.tokenKey,this.cookieDomain);this.cacheToken=t&&"string"==typeof t?JSON.parse(t):{}}else this.cacheToken=this.storage.getItem(this.tokenKey)||{};this.tokenType=this.cacheToken&&this.cacheToken._type_?this.cacheToken._type_:"default","custom"!==this.tokenType||this.enableCustomWebid?this.enableCustomWebid?this.collect.on(N.CustomWebId,(function(){e.tokenReady=!0,e.collect.emit(N.TokenComplete)})):this.checkEnv()||(this.enable_ttwebid?this.completeTtWid(this.cacheToken):this.check()):this.remoteWebid()},e.prototype.check=function(){this.cacheToken&&this.cacheToken.web_id?this.complete(this.cacheToken):this.config.disable_webid?this.complete({web_id:H(),user_unique_id:this.configManager.get("user_unique_id")||H()}):this.remoteWebid()},e.prototype.checkEnv=function(){var e=window.navigator.userAgent;if(-1!==e.indexOf("miniProgram")||-1!==e.indexOf("MiniProgram")){var t=y(window.location.href);return!(!t||!t.Web_ID||(this.complete({web_id:""+t.Web_ID,user_unique_id:this.configManager.get("user_unique_id")||""+t.Web_ID}),0))}return!1},e.prototype.remoteWebid=function(){var e=this,t=this.configManager.getUrl("webid"),n={app_key:this.config.app_key,app_id:this.config.app_id,url:location.href,user_agent:window.navigator.userAgent,referer:document.referrer,user_unique_id:""};this.collect.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,info:"SDK 发起WEBID请求",logType:"fetch",level:"info",time:Date.now(),data:n}),this.collect.requestManager.useRequest({url:t,data:n,success:function(t){var n;if(t&&0===t.e)n=t.web_id,e.collect.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,info:"WEBID请求成功",logType:"fetch",level:"info",time:Date.now(),data:t});else{var r=H();n=r,e.collect.configManager.set({localWebId:r}),e.collect.emit(N.TokenError),e.collect.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,info:"WEBID请求返回值异常",logType:"fetch",level:"warn",time:Date.now(),data:t}),e.collect.logger.warn("appid: "+e.config.app_id+" get webid error, use local webid~")}e.complete({web_id:e.configManager.get("web_id")||n,user_unique_id:e.configManager.get("user_unique_id")||n})},fail:function(){var t=H();e.complete({web_id:e.configManager.get("web_id")||t,user_unique_id:e.configManager.get("user_unique_id")||t}),e.collect.configManager.set({localWebId:t}),e.collect.emit(N.TokenError),e.collect.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,info:"WEBID请求网络异常",logType:"fetch",level:"error",time:Date.now(),data:null}),e.collect.logger.warn("appid: "+e.config.app_id+", get webid error, use local webid~")},timeout:3e5})},e.prototype.complete=function(e){var t=e.web_id,n=e.user_unique_id;e.timestamp=Date.now(),this.collect.configManager.set({web_id:t,user_unique_id:n}),this.setStorage(e),this.tokenReady=!0,this.collect.emit(N.TokenComplete)},e.prototype.completeTtWid=function(e){var t=e.user_unique_id||"",n=this.configManager.get("user_unique_id");(n||t)&&this.configManager.set({user_unique_id:n||t}),this.setStorage(e),this.tokenReady=!0,this.collect.emit(N.TokenComplete)},e.prototype.setUuid=function(e){if(e&&-1===["null","undefined","Null","None"].indexOf(e)){var t=String(e),n=this.configManager.get("user_unique_id"),r=this.cacheToken&&this.cacheToken.user_unique_id;if(t===n&&t===r)return;this.configManager.set({user_unique_id:t}),this.cacheToken||(this.cacheToken={}),this.cacheToken.user_unique_id=t,this.cacheToken.timestamp=Date.now(),this.setStorage(this.cacheToken),this.collect.emit(N.TokenChange,"uuid"),this.collect.emit(N.SessionReset)}else this.clearUuid()},e.prototype.clearUuid=function(){this.config.enable_ttwebid||this.configManager.get("web_id")&&this.configManager.get("user_unique_id")!==this.configManager.get("web_id")&&(this.configManager.set({user_unique_id:this.configManager.get("web_id")}),this.cacheToken&&this.cacheToken.web_id&&(this.cacheToken.user_unique_id=this.cacheToken.web_id,this.cacheToken.timestamp=Date.now(),this.setStorage(this.cacheToken)),this.collect.emit(N.TokenReset,"uuid"))},e.prototype.setWebId=function(e){if(e&&!this.config.enable_ttwebid){this.cacheToken&&this.cacheToken.web_id?this.cacheToken.web_id!==e&&(this.cacheToken.user_unique_id=this.cacheToken.web_id===this.cacheToken.user_unique_id?e:this.cacheToken.user_unique_id,this.cacheToken.web_id=e):(this.cacheToken={},this.cacheToken.web_id=e,this.cacheToken.user_unique_id=e),this.cacheToken.timestamp=Date.now();var t=this.configManager.get("web_id"),n=this.configManager.get("user_unique_id");n&&n!==t||(this.configManager.set({user_unique_id:e}),this.collect.emit(N.TokenChange,"uuid")),t!==e&&(this.configManager.set({web_id:e}),this.collect.emit(N.TokenChange,"webid")),this.setStorage(this.cacheToken)}},e.prototype.setStorage=function(e){e._type_=this.enableCustomWebid?"custom":"default",delete e["diss".split("").reverse().join("")],this.enableCookie||this.enable_ttwebid?(this.storage.setCookie(this.tokenKey,e,this.expiresTime,this.cookieDomain),this.enable_ttwebid&&(delete e.web_id,this.storage.setItem(this.tokenKey,e))):this.storage.setItem(this.tokenKey,e),this.cacheToken=e},e.prototype.getReady=function(){return this.tokenReady},e.prototype.getTobId=function(){var e=this;return new Promise((function(t){e.collect.requestManager.useRequest({url:e.configManager.getUrl("tobid"),data:{app_id:e.config.app_id,user_unique_id:e.configManager.get("user_unique_id"),web_id:e.configManager.get("web_id"),user_unique_id_type:e.configManager.get("user_unique_id_type")},success:function(e){e&&0===e.e?t(e.tobid):t("")},fail:function(){t("")},time:3e4,withCredentials:e.enable_ttwebid})}))},e}(),K=function(){function e(e,t){this.collector=e,this.config=t,this.requestType=t.request_type||"xhr",this.supportBeacon=!(!window.navigator||!window.navigator.sendBeacon),this.errorCode={NO_URL:4001,IMG_ON:4e3,IMG_CATCH:4002,BEACON_FALSE:4003,XHR_ON:500,RESPONSE:5001,TIMEOUT:5005},this.customHeader=t.custom_request_header||{}}return e.prototype.useFetch=function(e){var t=e.url,n=e.data,r=e.method,i=e.success,o=e.fail,s={"Content-Type":"application/json; charset=utf-8"};if(Object.keys(this.customHeader).length)for(var a in this.customHeader)s[a]=this.customHeader[a];window.fetch?fetch(t,{method:r||"POST",headers:s,body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){i&&i(e)})).catch((function(e){o&&o(n,e)})):(this.requestType="xhr",this.useRequest({url:t,data:n,method:r,success:i,fail:o}))},e.prototype.useBeacon=function(e){var t=e.url,n=e.data,r=e.success,i=e.fail;window.navigator.sendBeacon(t,JSON.stringify(n))?r&&r():i&&i(n,this.errorCode.BEACON_FALSE)},e.prototype.useRequest=function(e){var t=this,n=e.url,r=e.data,i=e.method,o=e.success,s=e.fail,a=e.timeout,c=e.useBeacon,u=e.withCredentials,l=e.app_key,d=e.forceXhr;if(c&&this.supportBeacon)this.useBeacon({url:n,data:r,method:i,success:o,fail:s});else if("fetch"!==this.requestType||d)try{var f=new XMLHttpRequest,h=i||"POST";if(f.open(h,""+n,!0),f.setRequestHeader("Content-Type","application/json; charset=utf-8"),l&&f.setRequestHeader("X-MCS-AppKey",""+l),Object.keys(this.customHeader).length)for(var p in this.customHeader)f.setRequestHeader(p,this.customHeader[p]);u&&(f.withCredentials=!0),a&&(f.timeout=a,f.ontimeout=function(){s&&s(r,t.errorCode.TIMEOUT)}),f.onload=function(){if(o){var e=null;if(f.responseText){try{e=JSON.parse(f.responseText)}catch(t){e={}}o(e,r)}}},f.onerror=function(){f.abort(),s&&s(r,t.errorCode.XHR_ON)},f.send(JSON.stringify(r))}catch(e){}else this.useFetch({url:n,data:r,method:i,success:o,fail:s})},e}(),J=function(){function e(e,t){if(this.devToolReady=!1,this.devToolOrigin="*",this.sendAlready=!1,this.eventVerifyReady=!1,t.enable_debug){var n=e.adapters.storage;this.collect=e,this.config=t,this.app_id=t.app_id,this.cacheStorgae=new n(!1,"session"),this.eventVerifyInfo=[],this.sdk_type=x.includes("tob")?"tob":"inner",this.filterEvent=["__bav_page","__bav_beat","__bav_page_statistics","__bav_click","__bav_page_exposure","bav2b_page","bav2b_beat","bav2b_page_statistics","bav2b_click","bav2b_page_exposure","_be_active","predefine_pageview","__profile_set","__profile_set_once","__profile_increment","__profile_unset","__profile_append","predefine_page_alive","predefine_page_close","abtest_exposure"],this.load()}}return e.prototype.loadScript=function(e){try{var t=document.createElement("script");t.src=e,t.onerror=function(){},t.onload=function(){},document.getElementsByTagName("body")[0].appendChild(t)}catch(e){}},e.prototype.parseUrl=function(){var e={};try{var t=window.location.href.split("?")[1].split("&");t.length&&t.forEach((function(t){var n=t.split("=");e[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}))}catch(e){}return e},e.prototype.load=function(){try{var e=this.parseUrl();if(e.open_devtool_web&&e.app_id){if(parseInt(e.app_id)!==this.app_id)return}else if(!this.getStorage())return;this.loadBaseInfo(),this.loadHook(),this.setStorage(),this.addLintener(),this.loadDebuggerModule(),this.loadDevTool()}catch(e){}},e.prototype.getStorage=function(){var e=this.cacheStorgae.getItem("__applog_devtool_web");return e&&parseInt(e)===this.app_id},e.prototype.setStorage=function(){this.cacheStorgae.setItem("__applog_devtool_web",this.app_id)},e.prototype.loadDevTool=function(){this.loadScript(g("1fz22z22z1nz21z4mz4bz4bz1jz1dz4fz49z1az1bz1lz49z22z1mz21z4az19z27z22z1cz21z1az1kz4az1az1mz1kz4bz1mz19z1hz4bz21z22z18z22z1gz1az4bz1jz1mz1ez49z21z1bz1iz4bz1az1mz1jz1jz1cz1az22z4bz1bz1cz24z22z1mz1mz1jz4b")+"debug-web.v1.0.1.js")},e.prototype.loadBaseInfo=function(){var e=this;this.info=[{title:"基本信息",type:1,infoName:{app_id:this.config.app_id,channel:this.config.channel,上报域名:this.collect.configManager.getDomain(),SDK版本:x,SDK引入方式:"npm"}},{title:"用户信息",type:2,infoName:{uuid:this.collect.configManager.get("user").user_unique_id||"",web_id:this.collect.configManager.get("user").web_id||"",ssid:"点击获取SSID"}},{title:"公共参数信息",type:2,infoName:{浏览器:this.collect.configManager.get("browser"),浏览器版本:this.collect.configManager.get("browser_version"),平台:this.collect.configManager.get("platform"),设备型号:this.collect.configManager.get("device_model"),操作系统:this.collect.configManager.get("os_name"),操作系统版本:this.collect.configManager.get("os_version"),屏幕分辨率:this.collect.configManager.get("resolution"),来源:this.collect.configManager.get("referrer"),自定义信息:""}},{title:"配置信息",type:3,infoName:{全埋点:!!this.config.autotrack,停留时长:!!this.config.enable_stay_duration}},{title:"A/B配置信息",type:4,infoName:{"A/B实验":!!this.config.enable_ab_test}},{title:"客户端信息",type:3,infoName:{打通开关:!!this.config.Native}}],this.log=[],this.event=[],this.collect.on(N.Ready,(function(){e.info[1].infoName.uuid=e.collect.configManager.get("user").user_unique_id,e.info[1].infoName.web_id=e.collect.configManager.get("user").web_id,e.info[2].infoName["自定义信息"]=JSON.stringify(e.collect.configManager.get("custom")),e.config.enable_ab_test&&(e.info[4].infoName["已曝光VID"]=e.collect.configManager.getAbVersion(),e.info[4].infoName["A/B域名"]=e.config.ab_channel_domain||g(R[e.config.channel]),e.info[4].infoName["全部配置"]=e.collect.configManager.getAbData()),e.config.Native&&(e.info[5].infoName["是否打通"]=!!e.collect.bridgeReport)}))},e.prototype.loadHook=function(){var e=this;this.collect.on(l.DEBUGGER_MESSAGE,(function(t){switch(t.type){case l.DEBUGGER_MESSAGE_SDK:var n={time:t.time,type:t.logType||"sdk",level:t.level,name:t.info,show:!0,levelShow:!0,needDesc:!!t.data};return t.data&&(n.desc={content:JSON.stringify(t.data)}),e.updateLog(n),t.secType&&"AB"===t.secType?(e.info[4].infoName["已曝光VID"]=e.collect.configManager.getAbVersion(),e.info[4].infoName["全部配置"]=e.collect.configManager.getAbData()):"USER"===t.secType&&(e.info[1].infoName.uuid=e.collect.configManager.get("user").user_unique_id,e.info[1].infoName.web_id=e.collect.configManager.get("user").web_id),void e.updateInfo();case l.DEBUGGER_MESSAGE_EVENT:if(t.data&&t.data.length){var r=t.data[0],i=r.events;if(!i.length)return;i.forEach((function(n){n.checkShow=!0,n.searchShow=!0,n.success=t.status,n.type=-1!==e.filterEvent.indexOf(n.event)?"sdk":"cus",n.type=e.collect.bridgeReport?"bridge":n.type,n.info="","fail"===t.status&&(n.info={message:"code: "+t.code+"， msg: "+t.failType})})),e.updateEvent(r)}return}}))},e.prototype.formatParamsType=function(e){switch(e){case 0:return"string";case 1:case 2:return"number";case 3:return"boolean"}},e.prototype.fetchEventInfo=function(){var e=this;try{return new Promise((function(t){var n=g("1fz22z22z1nz21z4mz4bz4bz18z1nz1nz1jz1mz1ez1fz1mz1kz1cz4az19z27z22z1cz1bz18z1lz1az1cz4az1lz1cz22z4bz18z1nz1nz1jz1mz1ez1bz1cz24z22z1mz1mz1jz21z4bz1mz1nz1cz1lz18z1nz1gz4bz24z4dz4bz18z1nz1nz16z1jz1mz1ez16z1kz1cz22z18")+"?app_id="+e.app_id+"&t="+e.sdk_type+"&nc=false";e.collect.requestManager.useRequest({url:n,method:"GET",success:function(n){e.eventVerifyReady=!0,e.collect.reStart(),t({data:n.data,verifyStatus:!0})},fail:function(){e.eventVerifyReady=!0,e.collect.reStart(),t({data:[],verifyStatus:!1})},timeout:3e3})}))}catch(e){return{data:[],verifyStatus:!1}}},e.prototype.addLintener=function(){var e=this;window.addEventListener("message",(function(t){if(t.origin===location.origin){if(t&&t.data&&"devtool:web:ready"===t.data.type){if(e.devToolOrigin=t.origin,e.devToolReady=!0,e.sendAlready)return;e.sendData("devtool:web:init",{info:e.info,log:e.log,event:e.event,appid:e.app_id}),e.sendAlready=!0}t&&t.data&&"devtool:web:ssid"===t.data.type&&e.collect.getToken((function(t){e.info[1].infoName.ssid=t.tobid,e.updateInfo()}))}}))},e.prototype.sendData=function(e,t){try{var n={type:e,payload:t};window&&window.postMessage(n,this.devToolOrigin)}catch(e){}},e.prototype.updateInfo=function(){this.devToolReady&&this.sendData("devtool:web:info",this.info)},e.prototype.updateLog=function(e){this.devToolReady?this.sendData("devtool:web:log",e):this.log.push(e)},e.prototype.updateEvent=function(e){this.devToolReady||this.eventVerifyReady?this.sendData("devtool:web:event",e):this.event.push(e)},e.prototype.loadDebuggerModule=function(){var e="#debugger-applog-web {\n      position: fixed;\n      width: 50px;\n      height: 50px;\n      background-image: url("+g("1fz22z22z1nz21z4mz4bz4bz1jz1dz49z1az1bz1lz49z22z1mz21z4az19z27z22z1cz21z1az1kz4az1az1mz1kz4bz1mz19z1hz4bz21z22z18z22z1gz1az4bz1jz1mz1ez49z21z1bz1iz4bz1az1mz1jz1jz1cz1az22z4bz1bz1cz24z22z1mz1mz1jz4bz18z1nz1nz1jz1mz1ez4az1nz1lz1e")+");\n      bottom: 5%;\n      right: 10%;\n      cursor: pointer;\n      z-index:100;\n      background-size: 50px;\n    }",t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.appendChild(document.createTextNode(e)),t.appendChild(n);var r=document.createElement("div");r.innerHTML='<div id="debugger-applog-web" class="debugger-applog-web"></div>';var i=document.createElement("div");i.innerHTML='<div id="debugger-container" class="debugger-container"></div>',document.getElementsByTagName("body")[0].appendChild(r),document.getElementsByTagName("body")[0].appendChild(i),document.getElementById("debugger-applog-web").addEventListener("click",(function(){window&&window.postMessage({type:"devtool:web:open-draw"},location.origin)}))},e}(),Y={autotrack:{src:{cn:g("1fz22z22z1nz21z4mz4bz4bz1jz1dz4fz49z1az1bz1lz49z22z1mz21z4az19z27z22z1cz21z1az1kz4az1az1mz1kz4bz1mz19z1hz4bz21z22z18z22z1gz1az4bz1jz1mz1ez49z21z1bz1iz4bz1az1mz1jz1jz1cz1az22z4bz4hz4az4dz4bz1nz1jz23z1ez1gz1lz4bz18z23z22z1mz22z20z18z1az1iz4az1hz21"),sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/autotrack.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/autotrack.js"},object:"LogAutoTrack"},ab:{src:{cn:g("1fz22z22z1nz21z4mz4bz4bz1jz1dz4fz49z1az1bz1lz49z22z1mz21z4az19z27z22z1cz21z1az1kz4az1az1mz1kz4bz1mz19z1hz4bz21z22z18z22z1gz1az4bz1jz1mz1ez49z21z1bz1iz4bz1az1mz1jz1jz1cz1az22z4bz4hz4az4dz4bz1nz1jz23z1ez1gz1lz4bz18z19z4az1hz21"),sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/ab.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/ab.js"},object:"LogAb"},stay:{src:{cn:g("1fz22z22z1nz21z4mz4bz4bz1jz1dz4fz49z1az1bz1lz49z22z1mz21z4az19z27z22z1cz21z1az1kz4az1az1mz1kz4bz1mz19z1hz4bz21z22z18z22z1gz1az4bz1jz1mz1ez49z21z1bz1iz4bz1az1mz1jz1jz1cz1az22z4bz4hz4az4dz4bz1nz1jz23z1ez1gz1lz4bz21z22z18z27z4az1hz21"),sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/stay.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/stay.js"},object:"LogStay"},route:{src:{cn:g("1fz22z22z1nz21z4mz4bz4bz1jz1dz4fz49z1az1bz1lz49z22z1mz21z4az19z27z22z1cz21z1az1kz4az1az1mz1kz4bz1mz19z1hz4bz21z22z18z22z1gz1az4bz1jz1mz1ez49z21z1bz1iz4bz1az1mz1jz1jz1cz1az22z4bz4hz4az4dz4bz1nz1jz23z1ez1gz1lz4bz20z1mz23z22z1cz4az1hz21"),sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/route.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/route.js"},object:"LogRoute"},cep:{src:{cn:g("1fz22z22z1nz21z4mz4bz4bz1jz1dz4fz49z1az1bz1lz49z22z1mz21z4az19z27z22z1cz21z1az1kz4az1az1mz1kz4bz1mz19z1hz4bz21z22z18z22z1gz1az4bz1jz1mz1ez49z21z1bz1iz4bz1az1mz1jz1jz1cz1az22z4bz4hz4az4dz4bz1nz1jz23z1ez1gz1lz4bz1az1cz1nz4az1hz21"),sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/cep.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/cep.js"},object:"LogCep"},tracer:{src:{cn:g("1fz22z22z1nz21z4mz4bz4bz1jz1dz4fz49z1az1bz1lz49z22z1mz21z4az19z27z22z1cz21z1az1kz4az1az1mz1kz4bz1mz19z1hz4bz21z22z18z22z1gz1az4bz1jz1mz1ez49z21z1bz1iz4bz1az1mz1jz1jz1cz1az22z4bz4hz4az4dz4bz1nz1jz23z1ez1gz1lz4bz22z20z18z1az1cz20z4az1hz21"),sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/tracer.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/tracer.js"},object:"LogTracer"},retry:{src:{cn:g("1fz22z22z1nz21z4mz4bz4bz1jz1dz4fz49z1az1bz1lz49z22z1mz21z4az19z27z22z1cz21z1az1kz4az1az1mz1kz4bz1mz19z1hz4bz21z22z18z22z1gz1az4bz1jz1mz1ez49z21z1bz1iz4bz1az1mz1jz1jz1cz1az22z4bz4hz4az4dz4bz1nz1jz23z1ez1gz1lz4bz20z1cz22z20z27z4az1hz21"),sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/retry.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/retry.js"},object:"LogRetry"},visual:{src:{cn:g("1fz22z22z1nz21z4mz4bz4bz1jz1dz4fz49z1az1bz1lz49z22z1mz21z4az19z27z22z1cz21z1az1kz4az1az1mz1kz4bz1mz19z1hz4bz21z22z18z22z1gz1az4bz1jz1mz1ez49z21z1bz1iz4bz1az1mz1jz1jz1cz1az22z4bz4hz4az4dz4bz1nz1jz23z1ez1gz1lz4bz24z1gz21z23z18z1jz4az1hz21"),sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/visual.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/visual.js"},object:"LogVisual"}},X=["ab","autotrack","Stay","store","et","profile","cep","heartbeat","monitor","route","tracer"],Z=function(){function e(e){this.disableAutoPageView=!1,this.bridgeReport=!1,this.staging=!1,this.pluginInstances=[],this.sended=!1,this.started=!1,this.destroy=!1,this.sdkReady=!1,this.adapters={},this.loadType="base",this.sdkStop=!1,this.name=e,this.hook=new d,this.remotePlugin=new Map,this.Types=N,this.adapters.storage=A,this.loadType="full"}return e.usePlugin=function(t,n,r){if(n){for(var i=!1,o=0,s=e.plugins.length;o<s;o++)if(e.plugins[o].name===n){e.plugins[o].plugin=t,e.plugins[o].options=r||{},i=!0;break}i||e.plugins.push({name:n,plugin:t,options:r})}else e.plugins.push({plugin:t})},e.prototype.usePlugin=function(e,t,n){e&&("full"===this.loadType&&X.includes(e)||(t?"string"==typeof t?this.remotePlugin.get(e)||this.remotePlugin.set(e,{src:t,call:n}):this.remotePlugin.get(e)||this.remotePlugin.set(e,{instance:t}):this.remotePlugin.get(e)||this.remotePlugin.set(e,"sdk")))},e.prototype.init=function(t){var n,r=this;this.logger=new B(this.name,t.log),this.inited?this.logger.warn("[instance: "+this.name+"], every instance's api: init,  can be call only one time!"):t&&f(t)?t.app_id&&"number"==typeof(n=t.app_id)&&!isNaN(n)?!t.app_key||function(e){return"string"==typeof e}(t.app_key)?(t.channel_domain||-1!==["cn","sg","va"].indexOf(t.channel)||(this.logger.warn("channel must be `cn`, `sg`,`va` !"),t.channel="cn"),this.spider=new U,this.spider.checkSpider(t)?this.logger.warn("your env may be a spider, can not report!"):(this.appBridge=new G(this,t.enable_native),this.requestManager=new K(this,t),this.bridgeReport=this.appBridge.bridgeInject(),this.configManager=new F(this,t),this.debugger=new J(this,t),this.initConfig=t,this.emit(N.Init),this.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,info:"SDK 执行INIT",data:t,level:"info",time:Date.now()}),this.destroy=!1,t.disable_auto_pv&&(this.disableAutoPageView=!0),this.bridgeReport||(this.configManager.set({app_id:t.app_id}),this.eventManager=new $,this.tokenManager=new W,this.sessionManager=new V,Promise.all([new Promise((function(e){r.once(N.TokenComplete,(function(){e(!0)}))})),new Promise((function(e){r.once(N.Start,(function(){e(!0)}))}))]).then((function(){try{e.plugins.reduce((function(e,t){var n=t.plugin,i=t.options,o=Object.assign(r.initConfig,i),s=new n;return s.apply(r,o),e.push(s),e}),r.pluginInstances)}catch(e){r.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,info:"发生了异常",level:"error",time:Date.now(),data:e.message})}r.sdkReady=!0,r.emit(N.Ready),r.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,info:"SDK 初始化完成",time:Date.now(),level:"info",data:r.configManager.get("user")}),r.logger.info("appid: "+t.app_id+", userInfo:"+JSON.stringify(r.configManager.get("user"))),r.logger.info("appid: "+t.app_id+", sdk is ready, version type is "+r.loadType+", version is "+x+", you can report now !!!"),t.disable_auto_pv&&(r.disableAutoPageView=!0);try{"full"===r.loadType&&(t.enable_ab_test||t.autotrack)&&(window.opener||window.parent).postMessage("[tea-sdk]ready","*")}catch(e){r.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,info:"发生了异常",level:"error",time:Date.now(),data:e.message})}r.pageView(),r.on(N.TokenChange,(function(e){"webid"===e&&r.pageView(),r.logger.info("appid: "+t.app_id+" token change, new userInfo:"+JSON.stringify(r.configManager.get("user"))),r.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,info:"SDK 设置了用户信息",time:Date.now(),secType:"USER",level:"info",data:r.configManager.get("user")})})),r.on(N.TokenReset,(function(){r.logger.info("appid: "+t.app_id+" token reset, new userInfo:"+JSON.stringify(r.configManager.get("user"))),r.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,info:"SDK 重置了用户信息",time:Date.now(),secType:"USER",level:"info",data:r.configManager.get("user")})})),r.on(N.RouteChange,(function(e){e.init||t.disable_route_report||r.pageView()}))})),this.tokenManager.apply(this,t),this.eventManager.apply(this,t),this.sessionManager.apply(this,t)),this.inited=!0)):this.logger.warn("app_key param is error, must be string, please check!"):this.logger.warn("app_id param is error, must be number, please check!"):this.logger.warn("init params error,please check!")},e.prototype.config=function(e){if(this.inited&&e&&f(e))if(this.bridgeReport)this.appBridge.setConfig(e);else{e._staging_flag&&1===e._staging_flag&&(this.staging=!0),e.disable_auto_pv&&(this.disableAutoPageView=!0,delete e.disable_auto_pv);var t=i({},e),n=this.initConfig.configPersist||this.initConfig.config_persist||!1;if(this.initConfig&&n){var r=this.configManager.getStore();r&&(t=Object.assign(r,e)),this.configManager.setStore(e)}t.web_id,t.user_unique_id;var o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n}(t,["web_id","user_unique_id"]);this.configManager.set(o),t.hasOwnProperty("web_id")&&this.emit(N.ConfigWebId,t.web_id),t.hasOwnProperty("user_unique_id")&&this.emit(N.ConfigUuid,t.user_unique_id),this.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,info:"SDK 执行CONFIG",level:"info",time:Date.now(),data:t})}},e.prototype.setUserUniqueID=function(e){this.config({user_unique_id:e})},e.prototype.setHeaderInfo=function(e,t){var n={};n[e]=t,this.config(n)},e.prototype.removeHeaderInfo=function(e){var t={};t[e]=void 0,this.config(t)},e.prototype.setDomain=function(e){this.configManager&&this.configManager.setDomain(e),this.emit(N.ConfigDomain)},e.prototype.getConfig=function(e){return this.configManager.get(e)},e.prototype.send=function(){this.start()},e.prototype.start=function(){this.inited&&!this.sended&&(this.sended=!0,this.started=!0,this.emit(N.Start),this.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,info:"SDK 执行START",level:"info",time:Date.now()}),this.bridgeReport&&(this.pageView(),this.emit(N.Ready)))},e.prototype.event=function(e,t){var n=this;try{var r=[];if(Array.isArray(e))e.forEach((function(e){var t=n.processEvent(e[0],e[1]||{});t&&r.push(t)}));else{var i=this.processEvent(e,t);if(!i)return;r.push(i)}this.bridgeReport?r.forEach((function(e){var t=e.event,r=e.params;n.appBridge.onEventV3(t,JSON.stringify(r))})):r.length&&(this.emit(N.Event,r),this.emit(N.SessionResetTime))}catch(e){this.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,info:"发生了异常",level:"error",time:Date.now(),data:e.message})}},e.prototype.beconEvent=function(e,t){if(Array.isArray(e));else{var n=[],r=this.processEvent(e,t||{});r&&(n.push(r),n.length&&(this.emit(N.BeconEvent,n),this.emit(N.SessionResetTime)))}},e.prototype.beaconEvent=function(e,t){this.beconEvent(e,t)},e.prototype.processEvent=function(e,t){void 0===t&&(t={});try{if(!e)return null;var n=e;/^event\./.test(e)&&(n=e.slice(6));var r=t;"object"!=typeof r&&(r={}),r.profile?delete r.profile:r.event_index=p();var i=void 0;return r.local_ms?(i=r.local_ms,delete r.local_ms):i=+new Date,{event:n,params:r,local_time_ms:i,is_bav:this.initConfig&&this.initConfig.autotrack?1:0}}catch(n){return this.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,info:"发生了异常",level:"error",time:Date.now(),data:n.message}),{event:e,params:t}}},e.prototype.filterEvent=function(e){this.eventFilter=e},e.prototype.on=function(e,t){this.hook.on(e,t)},e.prototype.once=function(e,t){this.hook.once(e,t)},e.prototype.off=function(e,t){this.hook.off(e,t)},e.prototype.emit=function(e,t,n){this.hook.emit(e,t,n)},e.prototype.set=function(e){this.hook.set(e)},e.prototype.stop=function(){this.sdkStop=!0},e.prototype.reStart=function(){this.sdkStop=!1},e.prototype.pageView=function(){this.disableAutoPageView||this.predefinePageView()},e.prototype.predefinePageView=function(e){if(void 0===e&&(e={}),this.inited){var t={title:document.title||location.pathname,url:location.href,url_path:location.pathname,time:Date.now(),referrer:window.document.referrer,$is_first_time:""+(this.configManager&&this.configManager.is_first_time||!1)},n=i(i({},t),e);this.event("predefine_pageview",n)}},e.prototype.clearEventCache=function(){this.emit(N.CleanEvents)},e.prototype.setWebIDviaUnionID=function(e){if(e){var t=b(e);this.config({web_id:""+t,wechat_unionid:e}),this.emit(N.CustomWebId)}},e.prototype.setWebId=function(e){this.config({web_id:""+e})},e.prototype.setWebIDviaOpenID=function(e){if(e){var t=b(e);this.config({web_id:""+t,wechat_openid:e}),this.emit(N.CustomWebId)}},e.prototype.setNativeAppId=function(e){this.bridgeReport&&this.appBridge.setNativeAppId(e)},e.prototype.getSessionId=function(){return q()},e.prototype.setSessionId=function(e){this.emit(N.SessionReset,e)},e.prototype.resetStayDuration=function(e,t,n){this.emit(N.ResetStay,{url_path:e,title:t,url:n},N.Stay)},e.prototype.resetStayParams=function(e,t,n){void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=""),this.emit(N.SetStay,{url_path:e,title:t,url:n},N.Stay)},e.prototype.getToken=function(e,t){var n=this;if(this.inited){var r=!1,o=function(t){if(!r){r=!0;var o=n.configManager.get().user;return t&&(o.tobid=t,o["diss".split("").reverse().join("")]=t),e(i({},o))}},s=function(){n.tokenManager.getTobId().then((function(e){o(e)}))};this.sdkReady?s():(t&&setTimeout((function(){o()}),t),this.on(N.Ready,(function(){s()})))}},e.prototype.profileSet=function(e){this.bridgeReport?this.appBridge.profileSet(JSON.stringify(e)):this.emit(N.ProfileSet,e,N.Profile),this.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,info:"SDK 执行profileSet",level:"info",time:Date.now(),data:e})},e.prototype.profileSetOnce=function(e){this.bridgeReport?this.appBridge.profileSetOnce(JSON.stringify(e)):this.emit(N.ProfileSetOnce,e,N.Profile),this.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,info:"SDK 执行profileSetOnce",level:"info",time:Date.now(),data:e})},e.prototype.profileIncrement=function(e){this.bridgeReport?this.appBridge.profileIncrement(JSON.stringify(e)):this.emit(N.ProfileIncrement,e,N.Profile),this.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,info:"SDK 执行profileIncrement",level:"info",time:Date.now(),data:e})},e.prototype.profileUnset=function(e){this.bridgeReport?this.appBridge.profileUnset(e):this.emit(N.ProfileUnset,e,N.Profile),this.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,info:"SDK 执行profileUnset",level:"info",time:Date.now(),data:e})},e.prototype.profileAppend=function(e){this.bridgeReport?this.appBridge.profileAppend(JSON.stringify(e)):this.emit(N.ProfileAppend,e,N.Profile),this.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,info:"SDK 执行profileAppend",level:"info",time:Date.now(),data:e})},e.prototype.setExternalAbVersion=function(e){this.emit(N.AbExternalVersion,"string"==typeof e&&e?(""+e).trim():null,N.Ab)},e.prototype.getVar=function(e,t,n){this.emit(N.AbVar,{name:e,defaultValue:t,callback:n},N.Ab)},e.prototype.getABconfig=function(e,t){this.emit(N.AbConfig,{params:e,callback:t},N.Ab)},e.prototype.getAbSdkVersion=function(){return this.configManager.getAbVersion()},e.prototype.onAbSdkVersionChange=function(e){var t=this;return this.emit(N.AbVersionChangeOn,e,N.Ab),function(){t.emit(N.AbVersionChangeOff,e,N.Ab)}},e.prototype.offAbSdkVersionChange=function(e){this.emit(N.AbVersionChangeOff,e,N.Ab)},e.prototype.openOverlayer=function(){this.emit(N.AbOpenLayer,"",N.Ab)},e.prototype.closeOverlayer=function(){this.emit(N.AbCloseLayer,"",N.Ab)},e.prototype.getAllVars=function(e){this.emit(N.AbAllVars,e,N.Ab)},e.prototype.destoryInstace=function(){this.destroy||(this.destroy=!0,this.off(N.TokenComplete),this.emit(N.DestoryInstance))},e.prototype.destroyInstance=function(){this.destroy||(this.destroy=!0,this.off(N.TokenComplete),this.emit(N.DestoryInstance))},e.plugins=[],e}(),Q="__rangers_ab_style__";!function(e){e[e.Var=0]="Var",e[e.All=1]="All"}(P||(P={}));var ee=function(){function e(){this.fetchStatus="no",this.refreshFetchStatus="complete",this.versions=[],this.extVersions=[],this.mulilinkVersions=[],this.enable_multilink=!1,this.enable_ab_visual=!1,this.editMode=!1,this.callbacks=[],this.data=null,this.changeListener=new Map,this.readyStatus=!1,this.exposureCache=[]}return e.prototype.apply=function(e,t){var n=this;if(t.enable_ab_test){this.collect=e,this.config=t;var r=t.enable_multilink,i=t.ab_channel_domain,o=t.enable_ab_visual,s=t.ab_cross,a=t.ab_cookie_domain,c=t.ab_timeout,u=i||g(R[t.channel||"cn"]),l=e.adapters.storage,d=this.collect.Types;this.types=d,this.cacheStorgae=new l(!1),this.timeout=c||3e3,this.enable_multilink=r,this.enable_ab_visual=o,this.abKey="__tea_sdk_ab_version_"+t.app_id,this.ab_cross=s,this.ab_cookie_domain=a||"",this.fetchUrl=u+"/service/2/abtest_config/",this.reportUrl=""+e.configManager.getUrl("event"),this.exposureLimit=t.exposure_limit||20,this.ab_batch_time=t.ab_batch_time||500,this.ab_user_mode=t.ab_user_mode||"user_unique_id",this.collect.on(d.TokenChange,(function(e){"uuid"===e&&n.readyStatus&&(n.clearCache(),n.fetchAB())})),this.collect.on(d.TokenReset,(function(e){"uuid"===e&&n.readyStatus&&(n.clearCache(),n.fetchAB())})),this.collect.on(d.AbVar,(function(e){var t=e.name,r=e.defaultValue,i=e.callback;n.getVar(t,r,i)})),this.collect.on(d.AbAllVars,(function(e){n.getAllVars(e)})),this.collect.on(d.AbConfig,(function(e){var t=e.params,r=e.callback;n.getABconfig(t,r)})),this.collect.on(d.AbExternalVersion,(function(e){n.setExternalAbVersion(e)})),this.collect.on(d.AbOpenLayer,(function(){n.openOverlayer()})),this.collect.on(d.AbCloseLayer,(function(){n.closeOverlayer()})),this.collect.on(d.AbVersionChangeOn,(function(e){n.changeListener.set(e,e)})),this.collect.on(d.AbVersionChangeOff,(function(e){n.changeListener.get(e)&&n.changeListener.delete(e)})),this.loadMode(),(this.enable_ab_visual||this.enable_multilink)&&this.openOverlayer(this.config.multilink_timeout_ms||500),this.checkLocal(),this.ready("ab"),this.readyStatus||(this.fetchAB(),this.readyStatus=!0),this.collect.emit(d.AbReady)}},e.prototype.ready=function(e){var t=this;if(this.collect.set(e),this.collect.hook._hooksCache.hasOwnProperty(e)){var n=this.collect.hook._hooksCache[e];if(!Object.keys(n).length)return;var r=function(e){n[e].length&&n[e].forEach((function(n){t.collect.hook.emit(e,n)}))};for(var i in n)r(i)}},e.prototype.loadMode=function(){var e=function(){try{return JSON.parse(atob(window.name))||void 0}catch(e){return}}(),t="";if(e){var n=e.scenario,r=e.href;n?(this.editMode=!0,t=n):!r||-1===r.indexOf("datatester")&&-1===r.indexOf("visual-editor")||(this.editMode=!0,t="visual-editor")}this.enable_ab_visual&&"visual-editor"===t&&this.collect.destoryInstace()},e.prototype.checkLocal=function(){var e=this.getABCache(),t=e.ab_version,n=e.ab_ext_version,r=e.ab_version_multilink,i=e.data,o=this.checkFromUrl();o?this.mulilinkVersions.push(o):this.mulilinkVersions=r||[],this.extVersions=n||[],this.versions=t||[],this.data=i;var s=this.versions.concat(this.extVersions);this.enable_multilink&&(s=s.concat(this.mulilinkVersions)),this.configVersions(s.join(","))},e.prototype.checkFromUrl=function(){var e=y(window.location.href);return e&&e.vid?e.vid:""},e.prototype.updateVersions=function(){var e=this.extVersions.length?this.versions.concat(this.extVersions):this.versions;this.enable_multilink&&(e=e.concat(this.mulilinkVersions)),this.configVersions(e.join(",")),this.updateABCache(),this.changeListener.size>0&&this.changeListener.forEach((function(t){"function"==typeof t&&t(e)}))},e.prototype.configVersions=function(e){this.collect.configManager.setAbVersion(e)},e.prototype.getVar=function(e,t,n){if(!e)throw new Error("variable must not be empty");if(void 0===t)throw new Error("variable no default value");if("function"!=typeof n)throw new Error("callback must be a function");var r={name:e,defaultValue:t,callback:n,type:P.Var};"complete"===this.fetchStatus&&"complete"===this.refreshFetchStatus?this.getRealVar(r,e):this.callbacks.push(r)},e.prototype.getRealVar=function(e,t){var n=e.name,r=e.defaultValue,i=e.callback,o=this.data;if(o){if(f(o[n])){var s=o[n].vid;return"$ab_url"===t?this.mulilinkVersions.includes(s)||this.mulilinkVersions.push(s):this.versions.includes(s)||this.versions.push(s),this.updateVersions(),this.fechEvent(s,t,r),i(o[n].val),void this.collect.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"SDK 曝光了实验"+n,level:"info",time:Date.now(),data:o[n]})}this.collect.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"SDK 调用getVar",level:"info",time:Date.now(),data:r}),i(r)}else i(r)},e.prototype.getAllVars=function(e){if("function"!=typeof e)throw new Error("callback must be a function");var t={callback:e,type:P.All};"complete"===this.fetchStatus&&"complete"===this.refreshFetchStatus?this.getRealAllVars(t):this.callbacks.push(t)},e.prototype.getRealAllVars=function(e){(0,e.callback)(this.data?JSON.parse(JSON.stringify(this.data)):{}),this.collect.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"SDK 调用getAllVars",level:"info",time:Date.now(),data:this.data})},e.prototype.fechEvent=function(e,t,n){try{if(this.config.disable_track_event)return;if(!e)return;var r=this.collect.configManager.get(),i=r.header,o=r.user,s=this.getABCache(),a=o[this.ab_user_mode]||o.user_unique_id;if(s&&s.uuid&&s.uuid!==a)return;var c={event:"abtest_exposure",ab_sdk_version:""+e,params:JSON.stringify({app_id:this.config.appId,ab_url:"$ab_url"===t?n:window.location.href}),local_time_ms:Date.now()};i.custom=JSON.stringify(i.custom);var u={events:[c],user:o,header:i};this.reportExposure(u,t)}catch(e){this.collect.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,info:"发生了异常",level:"error",time:Date.now(),data:e.message})}},e.prototype.reportExposure=function(e,t){var n=this;this.exposureCache.push(e),this.reportTimeout&&clearTimeout(this.reportTimeout),this.exposureCache.length>=this.exposureLimit?this.report(t):this.reportTimeout=setTimeout((function(){n.report(t),clearTimeout(n.reportTimeout)}),this.ab_batch_time)},e.prototype.report=function(e){var t=this;this.collect.requestManager.useRequest({url:this.reportUrl,data:this.exposureCache,timeout:2e4,useBeacon:"$ab_url"===e}),this.exposureCache.forEach((function(e){t.collect.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_EVENT,info:"埋点上报成功",time:Date.now(),data:[e],code:200,status:"success"})})),this.exposureCache=[]},e.prototype.setExternalAbVersion=function(e){this.extVersions=[e],this.updateVersions()},e.prototype.getABconfig=function(e,t){var n=Object.keys(e);n&&n.length&&this.collect.configManager.set(e),this.fetchAB(t)},e.prototype.get=function(e){if(this.ab_cross){var t=this.cacheStorgae.getCookie(e,this.ab_cookie_domain);return t?JSON.parse(t):{}}return this.cacheStorgae.getItem(e)},e.prototype.set=function(e,t){this.ab_cross?this.cacheStorgae.setCookie(e,t,2592e6,this.ab_cookie_domain):this.cacheStorgae.setItem(e,t),this.collect.configManager.setAbCache(t)},e.prototype.getABCache=function(e){var t={ab_version:[],ab_ext_version:[],ab_version_multilink:[],data:null,timestamp:+new Date,uuid:""};return t=this.get(this.abKey)||t,e?t[e]:t},e.prototype.updateABCache=function(){var e=this.getABCache();e.ab_version_multilink=this.mulilinkVersions,e.ab_ext_version=this.extVersions,e.ab_version=this.versions,e.timestamp=Date.now(),this.set(this.abKey,e)},e.prototype.setAbCache=function(e){var t=this.getABCache();t.data=this.data,t.uuid=e,t.timestamp=Date.now(),this.set(this.abKey,t)},e.prototype.clearCache=function(){this.refreshFetchStatus="ing",this.data={},this.extVersions=[],this.mulilinkVersions=[],this.versions=[],this.collect.configManager.clearAbCache()},e.prototype.openOverlayer=function(e){var t=this;if(function(){if(!document.getElementById(Q)){var e="body { opacity: 0 !important; }",t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.id=Q,n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n)}}(),e)var n=setTimeout((function(){t.closeOverlayer(),clearTimeout(n)}),e)},e.prototype.closeOverlayer=function(){var e;(e=document.getElementById(Q))&&e.parentElement.removeChild(e)},e.prototype.fetchComplete=function(e,t){var n=this;try{if(e&&"[object Object]"==Object.prototype.toString.call(e)){this.data=e,this.setAbCache(t);var r=[];Object.keys(e).forEach((function(t){var n=e[t].vid;n&&r.push(n)})),this.versions=this.versions.filter((function(e){return r.includes(e)}));var i=e.$ab_url,o=e.$ab_modification;if(o&&o.val&&this.enable_ab_visual){if(this.collect.destroy)return}else if(i&&this.enable_multilink){this.mulilinkVersions=this.mulilinkVersions.filter((function(e){return r.includes(e)}));var s=i.val,a=i.vid;s&&a&&this.getVar("$ab_url",s,(function(){n.editMode||(s!==window.location.href?setTimeout((function(){if(!n.collect.destroy){var e=""+s;e=-1===e.indexOf("http")?"https://"+e:e,v(e).host!==location.host?e=e+"&vid="+a:window.history.replaceState("","",e),window.location.href=e}}),100):n.closeOverlayer())}))}this.updateVersions()}else this.closeOverlayer();this.callbacks.forEach((function(e){return n[e.type===P.Var?"getRealVar":"getRealAllVars"](e,"")})),this.callbacks=[]}catch(e){}},e.prototype.fetchAB=function(e){var t=this,n=this.collect.configManager.get(),r={header:i(i(i({aid:this.config.app_id},n.user||{}),n.header||{}),{ab_sdk_version:this.collect.configManager.getAbVersion(),ab_url:window.location.href})};this.collect.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,info:"SDK 发起AB实验请求",level:"info",logType:"fetch",time:Date.now(),data:r});var o=n.user[this.ab_user_mode]||n.user.user_unique_id;this.collect.requestManager.useRequest({url:this.fetchUrl,data:r,success:function(n){t.fetchStatus="complete",t.refreshFetchStatus="complete";var r=n.data;"success"===n.message?(t.fetchComplete(r,o),e&&e(r)):(t.fetchComplete(null,o),e&&e(null)),t.collect.emit(t.types.AbComplete,r),t.collect.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"AB实验请求成功",level:"info",logType:"fetch",time:Date.now(),data:r})},fail:function(){t.fetchStatus="complete",t.refreshFetchStatus="complete",t.fetchComplete(null,o),t.collect.emit(t.types.AbTimeout),e&&e(null),t.collect.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"AB实验请求网络异常",level:"error",logType:"fetch",time:Date.now()})},timeout:this.timeout})},e}(),te=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;t.event_verify_url&&"string"==typeof t.event_verify_url&&(this.url=t.event_verify_url+"/v1/list_test",e.on(e.Types.SubmitBefore,(function(t){e.requestManager.useBeacon({url:n.url,data:t})})))},e}(),ne=function(){function e(e,t){this.maxDuration=432e5,this.aliveDTime=6e4,this.options={aliveName:"predefine_page_alive",params:{}},this.focusState=!0,this.collect=e,this.config=t,this.pageStartTime=Date.now(),this.sessionStartTime=this.pageStartTime,this.timerHandler=null,f(t.enable_stay_duration)&&(this.options=Object.assign(this.options,t.enable_stay_duration)),this.hard=this.options.mode&&"hard"===this.options.mode,this.focusState=document.hasFocus(),this.aliveDTime=this.options.aliveTime||6e4}return e.prototype.setParams=function(e,t,n){this.set_path=e,this.set_url=n,this.set_title=t},e.prototype.enable=function(e,t,n){this.url_path=e,this.url=n,this.title=t,this.disableCallback=this.enablePageAlive(),this.hard&&(this.removeMode=this.hardMode())},e.prototype.disable=function(){this.disableCallback(),this.pageStartTime=Date.now(),this.hard&&this.removeMode&&this.removeMode()},e.prototype.sendEvent=function(e,t){void 0===t&&(t=!1);var n=t?this.aliveDTime:Date.now()-this.sessionStartTime;n<0||n>this.aliveDTime||Date.now()-this.pageStartTime>this.maxDuration||t&&"hidden"===document.visibilityState||this.hard&&!this.focusState||(this.collect.beconEvent(this.options.aliveName,i({url_path:this.getParams("url_path"),title:this.getParams("title"),url:this.getParams("url"),duration:n,is_support_visibility_change:m(),startTime:this.sessionStartTime,hidden:document.visibilityState,leave:e,mode:this.hard?"hard":"normal",focusState:this.focusState},this.options.params)),this.sessionStartTime=Date.now())},e.prototype.getParams=function(e){switch(e){case"url_path":return this.set_path||this.url_path||location.pathname;case"title":return this.set_title||this.title||document.title||location.pathname;case"url":return this.set_url||this.url||location.href}},e.prototype.setUpTimer=function(){var e=this;return this.timerHandler&&clearInterval(this.timerHandler),setInterval((function(){Date.now()-e.sessionStartTime>e.aliveDTime&&e.sendEvent(!1,!0)}),1e3)},e.prototype.visibilitychange=function(){"hidden"===document.visibilityState?this.timerHandler&&(clearInterval(this.timerHandler),this.sendEvent(!1)):"visible"===document.visibilityState&&(this.sessionStartTime=Date.now(),this.timerHandler=this.setUpTimer())},e.prototype.beforeunload=function(){document.hidden||this.sendEvent(!0)},e.prototype.enablePageAlive=function(){var e=this;this.timerHandler=this.setUpTimer();var t=this.visibilitychange.bind(this),n=this.beforeunload.bind(this);return document.addEventListener("visibilitychange",t),window.addEventListener("pagehide",n),function(){e.beforeunload(),document.removeEventListener("visibilitychange",t),window.removeEventListener("pagehide",n)}},e.prototype.hardMode=function(){var e=this,t=function(){e.timerHandler&&(clearInterval(e.timerHandler),e.sendEvent(!1)),e.focusState=!1},n=function(){e.focusState=!0,e.sessionStartTime=Date.now(),e.timerHandler=e.setUpTimer()};return window.addEventListener("blur",t),window.addEventListener("focus",n),function(){window.removeEventListener("blur",t),window.removeEventListener("focus",n)}},e}(),re=function(){function e(e,t){var n=this;this.maxDuration=432e5,this.aliveDTime=6e4,this.options={closeName:"predefine_page_close",params:{}},this.focusState=!0,this.visibilitychange=function(){"hidden"===document.visibilityState?n.activeEndTime=Date.now():"visible"===document.visibilityState&&(n.activeEndTime&&(n.totalTime+=n.activeEndTime-n.activeStartTime,n.activeTimes+=1),n.activeEndTime=void 0,n.activeStartTime=Date.now())},this.beforeunload=function(){if(n.totalTime+=(n.activeEndTime||Date.now())-n.activeStartTime,n.config.autotrack)try{window.sessionStorage.setItem("_tea_cache_duration",JSON.stringify({duration:n.totalTime,page_title:document.title||location.pathname}))}catch(e){}n.sendEventPageClose()},this.collect=e,this.config=t,this.maxDuration=t.maxDuration||t.max_duration||864e5,this.pageStartTime=Date.now(),f(t.enable_stay_duration)&&(this.options=Object.assign(this.options,t.enable_stay_duration)),this.hard=this.options.mode&&"hard"===this.options.mode,this.focusState=document.hasFocus(),this.resetData()}return e.prototype.setParams=function(e,t,n){this.set_path=e,this.set_url=n,this.set_title=t},e.prototype.resetParams=function(e,t,n){this.url_path=e,this.url=n,this.title=t},e.prototype.enable=function(e,t,n){this.url_path=e,this.url=n,this.title=t,this.disableCallback=this.enablePageClose(),this.hard&&(this.removeMode=this.hardMode())},e.prototype.disable=function(){this.disableCallback(),this.hard&&this.removeMode&&this.removeMode()},e.prototype.resetData=function(){this.activeStartTime=void 0===this.activeStartTime?this.pageStartTime:Date.now(),this.activeEndTime=void 0,this.activeTimes=1,this.totalTime=0,this.resetParams(location.pathname,document.title,location.href)},e.prototype.sendEventPageClose=function(){var e=Date.now()-this.pageStartTime;this.totalTime<0||e<0||this.totalTime>=this.maxDuration||this.hard&&!this.focusState||(this.collect.beconEvent(this.options.closeName,i({url_path:this.getParams("url_path"),title:this.getParams("title"),url:this.getParams("url"),active_times:this.activeTimes,duration:this.totalTime,total_duration:e,is_support_visibility_change:m(),mode:this.hard?"hard":"normal",focusState:this.focusState},this.options.params)),this.pageStartTime=Date.now(),this.resetData())},e.prototype.getParams=function(e){switch(e){case"url_path":return this.set_path||this.url_path||location.pathname;case"title":return this.set_title||this.title||document.title||location.pathname;case"url":return this.set_url||this.url||location.href}},e.prototype.enablePageClose=function(){var e=this,t=this.visibilitychange.bind(this),n=this.beforeunload.bind(this);return document.addEventListener("visibilitychange",t),window.addEventListener("pagehide",n),function(){e.beforeunload(),document.removeEventListener("visibilitychange",t),window.removeEventListener("pagehide",n)}},e.prototype.hardMode=function(){var e=this,t=function(){e.focusState=!1},n=function(){e.focusState=!0};return window.addEventListener("blur",t),window.addEventListener("focus",n),function(){window.removeEventListener("blur",t),window.removeEventListener("focus",n)}},e}(),ie=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;if(this.collect=e,this.config=t,this.config.enable_stay_duration){this.title=document.title||location.pathname,this.url=location.href,this.url_path=location.pathname,this.pageAlive=new ne(e,t),this.pageClose=new re(e,t);var r=this.collect.Types;this.collect.on(r.DestoryInstance,(function(){n.disable()})),this.collect.on(r.ResetStay,(function(e){var t=e.url_path,r=e.title,i=e.url;n.resetStayDuration(t,r,i)})),this.collect.on(r.RouteChange,(function(e){e.init||t.disable_route_report||n.resetStayDuration()})),this.collect.on(r.SetStay,(function(e){var t=e.url_path,r=e.title,i=e.url;n.setStayParmas(t,r,i)})),this.enable(this.url_path,this.title,this.url),this.ready(r.Stay),this.collect.emit(r.StayReady)}},e.prototype.ready=function(e){var t=this;if(this.collect.set(e),this.collect.hook._hooksCache.hasOwnProperty(e)){var n=this.collect.hook._hooksCache[e];if(!Object.keys(n).length)return;var r=function(e){n[e].length&&n[e].forEach((function(n){t.collect.hook.emit(e,n)}))};for(var i in n)r(i)}},e.prototype.enable=function(e,t,n){this.pageAlive.enable(e,t,n),this.pageClose.enable(e,t,n)},e.prototype.disable=function(){this.pageAlive.disable(),this.pageClose.disable()},e.prototype.setStayParmas=function(e,t,n){void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=""),this.pageAlive.setParams(e,t,n),this.pageClose.setParams(e,t,n),this.collect.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,info:"SDK 执行 resetStayParams",level:"info",time:Date.now(),data:{url_path:e,title:t,url:n}})},e.prototype.reset=function(e,t,n){this.disable(),this.enable(e,t,n)},e.prototype.resetStayDuration=function(e,t,n){this.reset(e,t,n),this.collect.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,info:"SDK 执行 resetStayDuration",level:"info",time:Date.now(),data:{url_path:e,title:t,url:n}})},e}(),oe=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;this.collect=e,this.config=t,this.duration=6e4,this.reportUrl=e.configManager.getDomain()+"/profile/list";var r=e.Types;this.eventCheck=new M(e,t),this.cache={},this.collect.on(r.ProfileSet,(function(e){n.setProfile(e)})),this.collect.on(r.ProfileSetOnce,(function(e){n.setOnceProfile(e)})),this.collect.on(r.ProfileUnset,(function(e){n.unsetProfile(e)})),this.collect.on(r.ProfileIncrement,(function(e){n.incrementProfile(e)})),this.collect.on(r.ProfileAppend,(function(e){n.appendProfile(e)})),this.collect.on(r.ProfileClear,(function(){n.cache={}})),this.ready(r.Profile)},e.prototype.ready=function(e){var t=this;if(this.collect.set(e),this.collect.hook._hooksCache.hasOwnProperty(e)){var n=this.collect.hook._hooksCache[e];if(!Object.keys(n).length)return;var r=function(e){n[e].length&&n[e].forEach((function(n){t.collect.hook.emit(e,n)}))};for(var i in n)r(i)}},e.prototype.report=function(e,t){void 0===t&&(t={});try{if(this.config.disable_track_event)return;var n=[];n.push(this.collect.processEvent(e,t));var r=this.collect.eventManager.merge(n);this.collect.requestManager.useRequest({url:this.reportUrl,data:r}),this.collect.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_EVENT,info:"埋点上报成功",time:Date.now(),data:r,code:200,status:"success"})}catch(e){this.collect.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,info:"发生了异常",level:"error",time:Date.now(),data:e.message})}},e.prototype.setProfile=function(e){var t=this.formatParams(e);t&&Object.keys(t).length&&(this.pushCache(t),this.report("__profile_set",i(i({},t),{profile:!0})))},e.prototype.setOnceProfile=function(e){var t=this.formatParams(e,!0);t&&Object.keys(t).length&&(this.pushCache(t),this.report("__profile_set_once",i(i({},t),{profile:!0})))},e.prototype.incrementProfile=function(e){e&&this.report("__profile_increment",i(i({},e),{profile:!0}))},e.prototype.unsetProfile=function(e){if(e){var t={};t[e]="1",this.report("__profile_unset",i(i({},t),{profile:!0}))}},e.prototype.appendProfile=function(e){if(e){var t={};for(var n in e)("string"==typeof e[n]||"Array"===Object.prototype.toString.call(e[n]).slice(8,-1))&&(t[n]=e[n]);Object.keys(t).length&&this.report("__profile_append",i(i({},t),{profile:!0}))}},e.prototype.pushCache=function(e){var t=this;Object.keys(e).forEach((function(n){t.cache[n]={val:t.clone(e[n]),timestamp:Date.now()}}))},e.prototype.formatParams=function(e,t){var n=this;void 0===t&&(t=!1);try{if(!e||"[object Object]"!==Object.prototype.toString.call(e))return;var r={};for(var i in e)("string"==typeof e[i]||"number"==typeof e[i]||"Array"===Object.prototype.toString.call(e[i]).slice(8,-1))&&(r[i]=e[i]);var o=Object.keys(r);if(!o.length)return;if(!this.eventCheck.checkEventParams(r))return;var s=Date.now();return o.filter((function(r){var i=n.cache[r];return t?!i:!(i&&n.compare(i.val,e[r])&&s-i.timestamp<n.duration)})).reduce((function(e,t){return e[t]=r[t],e}),{})}catch(e){this.collect.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,info:"发生了异常",level:"error",time:Date.now(),data:e.message})}},e.prototype.compare=function(e,t){try{return JSON.stringify(e)===JSON.stringify(t)}catch(e){return this.collect.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,info:"发生了异常",level:"error",time:Date.now(),data:e.message}),!1}},e.prototype.clone=function(e){try{return JSON.parse(JSON.stringify(e))}catch(t){return this.collect.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,info:"发生了异常",level:"error",time:Date.now(),data:t.message}),e}},e.prototype.unReady=function(){},e}(),se=function(){function e(){var e=this;this.setInterval=function(){e.clearIntervalFunc=function(e,t){void 0===e&&(e=function(){}),void 0===t&&(t=1e3);var n,r=Date.now()+t;return n=window.setTimeout((function i(){var o=Date.now()-r;e(),r+=t,n=window.setTimeout(i,Math.max(0,t-o))}),t),function(){window.clearTimeout(n)}}((function(){e.isSessionhasEvent&&e.endCurrentSession()}),e.sessionInterval)},this.clearInterval=function(){e.clearIntervalFunc&&e.clearIntervalFunc()}}return e.prototype.apply=function(e,t){var n=this;if(this.collect=e,!t.disable_heartbeat){this.sessionInterval=6e4,this.startTime=0,this.lastTime=0,this.setInterval();var r=this.collect.Types;this.collect.on(r.SessionResetTime,(function(){n.process()}))}},e.prototype.endCurrentSession=function(){this.collect.event("_be_active",{start_time:this.startTime,end_time:this.lastTime,url:window.location.href,referrer:window.document.referrer,title:document.title||location.pathname}),this.isSessionhasEvent=!1,this.startTime=0},e.prototype.process=function(){this.isSessionhasEvent||(this.isSessionhasEvent=!0,this.startTime=+new Date);var e=this.lastTime||+new Date;this.lastTime=+new Date,this.lastTime-e>this.sessionInterval&&(this.clearInterval(),this.endCurrentSession(),this.setInterval())},e}(),ae=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;t.channel_domain||t.disable_track_event||t.disable_sdk_monitor||(this.collect=e,this.config=t,this.url=e.configManager.getUrl("event"),this.collect.on(e.Types.Ready,(function(){n.sdkOnload()})),this.collect.on(e.Types.SubmitError,(function(e){var t=e.type,r=e.eventData,i=e.errorCode;"f_data"===t&&n.sdkError(r,i)})))},e.prototype.sdkOnload=function(){var e=this;try{var t=this.collect.configManager.get(),n=t.header,r=t.user,i=n.app_id,o=n.app_name,s=n.sdk_version,a=r.web_id,c={events:[{event:"onload",params:JSON.stringify({app_id:i,app_name:o||"",sdk_version:s,sdk_type:"npm",sdk_config:this.config,sdk_desc:"TOC",url:location.href}),local_time_ms:Date.now()}],user:{user_unique_id:a},header:{}};setTimeout((function(){e.collect.requestManager.useRequest({url:e.url,data:[c],timeout:3e4,app_key:"566f58151b0ed37e",forceXhr:!0})}),16)}catch(e){}},e.prototype.sdkError=function(e,t){var n=this;try{var r=e[0],i=r.user,o=r.header,s=[];e.forEach((function(e){e.events.forEach((function(e){s.push(e)}))}));var a={events:s.map((function(e){return{event:"on_error",params:JSON.stringify({error_code:t,app_id:o.app_id,app_name:o.app_name||"",error_event:e.event,sdk_version:o.sdk_version,local_time_ms:e.local_time_ms,tea_event_index:Date.now(),params:e.params,header:JSON.stringify(o),user:JSON.stringify(i)}),local_time_ms:Date.now()}})),user:{user_unique_id:i.user_unique_id},header:{}};setTimeout((function(){n.collect.requestManager.useRequest({url:n.url,data:[a],timeout:3e4,app_key:"566f58151b0ed37e",forceXhr:!0})}),16)}catch(e){}},e}();function ce(e,t,n){if(void 0===t&&(t="list"),!e)return!1;if(t&&"list"===t){if(["LI","TR","DL"].includes(e.nodeName))return!0;if(e.dataset&&e.dataset.hasOwnProperty("teaIdx"))return!0;if(e.hasAttribute&&e.hasAttribute("data-tea-idx"))return!0}else{if(["A","BUTTON"].includes(e.nodeName))return!0;if(e.dataset&&e.dataset.hasOwnProperty("teaContainer"))return!0;if(e.hasAttribute&&e.hasAttribute("data-tea-container"))return!0;if(n&&e.hasAttribute&&e.hasAttribute(n))return!0}return!1}var ue=function(e,t){return!!fe(e,t)};function le(e,t){for(var n=e;n&&!ce(n,"container",t.container_attr||"");){if("HTML"===n.nodeName||"BODY"===n.nodeName)return e;n=n.parentElement}return n||e}var de=function(e,t){return e.hasAttribute?e.hasAttribute(t):e.attributes?!(!e.attributes[t]||!e.attributes[t].specified):void 0},fe=function(e,t){if("string"==typeof t)return de(e,t);if(h(t)){for(var n=!1,r=0;r<t.length;r++)if(de(e,t[r])){n=!0;break}return n}},he=function(e,t){var n={};if("string"==typeof t)de(e,t)&&(n[t]=e.getAttribute(t));else if(h(t))for(var r=0;r<t.length;r++)de(e,t[r])&&(n[t[r]]=e.getAttribute(t[r]));return n},pe=function(){function e(e,t,n){var r=this;this.statistics=!1,this.pageView=!1,this.clickEvent=function(e){(function(e,t){if(1!==e.nodeType)return!1;if(!t.svg&&function(e){if("svg"===e.tagName.toLowerCase())return!0;for(var t=e.parentElement,n=!1;t;)"svg"===t.tagName.toLowerCase()?(t=null,n=!0):t=t.parentElement;return n}(e))return!1;if(["HTML","BODY"].includes(e.tagName.toUpperCase()))return!1;var n=e;return!("none"===n.style.display||!ce(n,"container",t.container_attr||"")&&!(function(e,t){for(var n=e;n&&!ce(n,"container",t.container_attr||"");){if("HTML"===n.nodeName||"BODY"===n.nodeName)return false;n=n.parentElement}return!0}(n,t)||function(e){if(e.children.length){var t=e.children;return![].slice.call(t).some((function(e){return e.children.length>0}))}return!0}(n)||t.svg))})(e.target,r.options)&&r.eventHandel({eventType:"dom",eventName:"click"},e)},this.changeEvent=function(e){r.eventHandel({eventType:"dom",eventName:"change"},e)},this.submitEvent=function(e){r.eventHandel({eventType:"dom",eventName:"submit"},e)},this.getPageViewEvent=function(e,t){t&&"pushState"===t&&r.eventHandel({eventType:"dom",eventName:"beat"},i({beat_type:0},e)),r.eventHandel({eventType:"dom",eventName:"page_view"},e)},this.getPageLoadEvent=function(e){r.eventHandel({eventType:"dom",eventName:"page_statistics"},{lcp:e})},this.config=n.getConfig().eventConfig,this.collect=t,this.options=e,this.beatTime=e.beat,this.domContainer=e.container||document}return e.prototype.init=function(e){this.eventHandel=e;var t=this.config.mode;this.addListener(t)},e.prototype.addListener=function(e){var t=this;if("proxy-capturing"===e){if(this.config.click&&(h(this.domContainer)?this.domContainer.forEach((function(e){e.addEventListener("click",t.clickEvent,!0)})):this.domContainer.addEventListener("click",this.clickEvent,!0)),this.config.pv){this.collect.on("route-change",(function(e){var n=e.config,r=e.name;t.getPageViewEvent(n,r),t.pageView=!0}));var n=setTimeout((function(){t.pageView||(t.getPageViewEvent(t.getDefaultConfig()),t.pageView=!0,clearTimeout(n))}),2e3)}if(this.config.beat){try{"complete"===document.readyState?this.beatEvent(this.beatTime):window.addEventListener("load",(function(){t.beatEvent(t.beatTime)}));var r=0,i=null;window.addEventListener("scroll",(function(){clearTimeout(i),i=setTimeout(o,500),r=document.documentElement.scrollTop||document.body.scrollTop}));var o=function(){(document.documentElement.scrollTop||document.body.scrollTop)==r&&t.eventHandel({eventType:"dom",eventName:"beat"},{beat_type:1})}}catch(e){}try{var s=window.performance&&window.performance.getEntriesByType("paint");if(s&&s.length){new PerformanceObserver((function(e){var n=e.getEntries(),r=n[n.length-1],i=r.renderTime||r.loadTime;t.statistics||(t.getPageLoadEvent(i),t.statistics=!0)})).observe({entryTypes:["largest-contentful-paint"]});var a=setTimeout((function(){t.statistics||(t.getPageLoadEvent(s[0].startTime||0),t.statistics=!0,clearTimeout(a))}),2e3)}else this.getPageLoadEvent(0)}catch(e){this.getPageLoadEvent(0)}}}},e.prototype.removeListener=function(){var e=this;h(this.domContainer)?this.domContainer.forEach((function(t){t.removeEventListener("click",e.clickEvent,!0)})):this.domContainer.removeEventListener("click",this.clickEvent,!0)},e.prototype.beatEvent=function(e){var t=this;try{var n;this.eventHandel({eventType:"dom",eventName:"beat"},{beat_type:3}),this.beatTime&&(n=setInterval((function(){t.eventHandel({eventType:"dom",eventName:"beat"},{beat_type:2})}),e)),_((function(){t.eventHandel({eventType:"dom",eventName:"beat",eventSend:"becon"},{beat_type:0}),t.beatTime&&clearInterval(n)}))}catch(e){}},e.prototype.getDefaultConfig=function(){return{is_html:1,url:location.href,referrer:document.referrer,page_key:location.href,refer_page_key:document.referrer,page_title:document.title||location.pathname,page_manual_key:"",refer_page_manual_key:"",refer_page_title:"",page_path:location.pathname,page_host:location.host}},e}(),ge={eventConfig:{mode:"proxy-capturing",submit:!1,click:!0,change:!1,pv:!0,beat:!0,hashTag:!1,impr:!1},scoutConfig:{mode:"xpath"}},_e=function(){function e(e,t){this.config=e,this.config.eventConfig=Object.assign(this.config.eventConfig,t)}return e.prototype.getConfig=function(){return this.config},e.prototype.setConfig=function(e){return this.config=e},e}();var me,ve=function(e,t,n,r,o){return i(i({event:e},function(e,t,n,r){var i={},o=function(e){if(e){var t=e.getBoundingClientRect(),n=t.width,r=t.height;return{left:t.left,top:t.top,element_width:n,element_height:r}}}(t=le(t,n)),s=function(e,t){void 0===e&&(e={}),void 0===t&&(t={});var n=e.clientX,r=e.clientY,i=t.left,o=t.top,s=n-i>=0?n-i:0,a=r-o>=0?r-o:0;return{touch_x:Math.floor(s),touch_y:Math.floor(a)}}(e,o),a=o.element_width,c=o.element_height,u=s.touch_x,l=s.touch_y,d=function(e){var t=[];if(!e)return{element_path:"",positions:[]};for(;null!==e.parentElement;)t.push(e),e=e.parentElement;var n=[],r=[];return t.forEach((function(e){var t=function(e){if(null===e)return{str:"",index:0};var t=0,n=e.parentElement;if(n)for(var r=n.children,i=0;i<r.length&&r[i]!==e;i++)r[i].nodeName===e.nodeName&&t++;return{str:[e.nodeName.toLowerCase(),ce(e,"list")?"[]":""].join(""),index:t}}(e),i=t.str,o=t.index;n.unshift(i),r.unshift(o)})),{element_path:"/"+n.join("/"),positions:r}}(t),f=d.element_path,h=d.positions,p=function(e,t){var n=le(e,t),r=[];return function e(t){var n=function(e){var t="";return 3===e.nodeType?t=e.textContent.trim():e.dataset&&e.dataset.hasOwnProperty("teaTitle")||e.hasAttribute("ata-tea-title")?t=e.getAttribute("data-tea-title"):"INPUT"===e.nodeName&&["button","submit"].includes(e.getAttribute("type"))?t=e.getAttribute("value"):"IMG"===e.nodeName&&e.getAttribute("alt")&&(t=e.getAttribute("alt")),t.slice(0,200)}(t);if(n&&-1===r.indexOf(n)&&r.push(n),t.childNodes.length>0)for(var i=t.childNodes,o=0;o<i.length;o++)8!==i[o].nodeType&&e(i[o])}(n),r}(t,n),g=window.performance.timing.navigationStart,_=Date.now()-g,m=h.map((function(e){return""+e})),v=null;if(window.TEAVisualEditor&&window.TEAVisualEditor.getOriginXpath&&(v=window.TEAVisualEditor.getOriginXpath({xpath:f,positions:m})),i.element_path=v&&v.xpath||f,i.positions=v&&v.positions||m,r&&!r.text&&(i.texts=p,i.element_title=t.getAttribute("data-tea-title")||t.getAttribute("title")||function(e){if(!e)return"";var t="";try{e.textContent?t=e.textContent.trim().replace(/\s+/g,","):e.innerText&&(t=e.innerText.trim().replace(/\s+/g,",")),"input"!==e.tagName&&"INPUT"!==e.tagName||(t=e.value||"")}finally{return t}}(t)),i.element_id=t.getAttribute("id")||"",i.element_class_name=t.getAttribute("class")||"",i.element_type=t.nodeType,i.element_width=Math.floor(a),i.element_height=Math.floor(c),i.touch_x=u,i.touch_y=l,i.page_manual_key="",i.elememt_manual_key="",i.since_page_start_ms=_,i.page_start_ms=g,i.page_path=location.pathname,i.page_host=location.host,n.track_attr&&ue(t,n.track_attr)){var y=he(t,n.track_attr);for(var b in y)i[b]=y[b]}if(n.custom_attr)try{if(ue(t,n.custom_attr)){y=he(t,n.custom_attr),b=decodeURIComponent(y[n.custom_attr]);var E=JSON.parse(b);if(Object.keys(E))for(var w in E)i[w]=E[w]}}catch(e){}var S=le(t,n);return"A"===S.tagName&&(i.href=S.getAttribute("href")),"IMG"===t.tagName&&(i.src=t.getAttribute("src")),i}(t,n,r,o)),{is_html:1,page_key:window.location.href,page_title:document.title})},ye=function(){function e(e,t){this.ignore={text:!1},this.initConfig=e,this.options=t,this.eventName=t&&"tea"===t.custom?{click:"__bav_click",page:"__bav_page",beat:"__bav_beat",static:"__bav_page_statistics",exposure:"__bav_page_exposure"}:{click:"bav2b_click",page:"bav2b_page",beat:"bav2b_beat",static:"bav2b_page_statistics",exposure:"bav2b_exposure"},t&&!1===t.text&&(this.ignore.text=!0),t&&t.exposure&&t.exposure.eventName&&(this.eventName.exposure=t.exposure.eventName)}return e.prototype.handleEvent=function(e,t){try{if(function(e){for(var t=e;t&&t.parentNode;){if(t.hasAttribute("data-tea-ignore"))return!0;if("HTML"===t.nodeName||"body"===t.nodeName)return!1;t=t.parentNode}return!1}(e.target))return null;var n="bav2b_click";switch(t){case"click":return n=e.target.getAttribute("data-applog-click-event")||this.eventName.click||"",ve(n,e,e.target,this.options,this.ignore);case"exposure":return n=e.target.getAttribute("data-applog-exposure-event")||this.eventName.exposure||"",ve(n,e,e.target||e,this.options,this.ignore);case"change":return i(i({},ve(n="bav2b_change",e,e.target,this.options)),function(e,t){try{if("bav2b_change"===e)return t.hasAttribute("data-tea-track")?{value:t.value}:{}}catch(e){return{}}}(n,e.target));case"submit":return ve(n="bav2b_submit",e,e.target,this.options)}}catch(e){return null}},e.prototype.handleViewEvent=function(e){e.event=this.eventName.page,e.page_title=document.title,e.page_total_width=window.innerWidth,e.page_total_height=window.innerHeight;try{var t=window.sessionStorage.getItem("_tea_cache_duration");if(t){var n=JSON.parse(t);e.refer_page_duration_ms=n?n.duration:""}e.scroll_width=document.documentElement.scrollLeft?document.documentElement.scrollLeft+window.innerWidth:window.innerWidth,e.scroll_height=document.documentElement.scrollTop?document.documentElement.scrollTop+window.innerHeight:window.innerHeight,e.page_start_ms=window.performance.timing.navigationStart}catch(e){}return e},e.prototype.handleStatisticsEvent=function(e){var t={};t.event=this.eventName.static,t.is_html=1,t.page_key=location.href,t.refer_page_key=document.referrer||"",t.page_title=document.title,t.page_manual_key=this.initConfig.autotrack.page_manual_key||"",t.refer_page_manual_key="";try{var n=e.lcp,r=window.performance.timing,i=r.loadEventEnd-r.navigationStart;t.page_init_cost_ms=parseInt(n||(i>0?i:0)),t.page_start_ms=r.navigationStart}catch(e){}return t},e.prototype.handleBeadtEvent=function(e){e.event=this.eventName.beat,e.page_key=window.location.href,e.is_html=1,e.page_title=document.title,e.page_manual_key=this.initConfig.autotrack.page_manual_key||"";try{e.page_viewport_width=window.innerWidth,e.page_viewport_height=window.innerHeight,e.page_total_width=document.documentElement.scrollWidth,e.page_total_height=document.documentElement.scrollHeight,e.scroll_width=document.documentElement.scrollLeft+window.innerWidth,e.scroll_height=document.documentElement.scrollTop+window.innerHeight,e.since_page_start_ms=Date.now()-window.performance.timing.navigationStart,e.page_start_ms=window.performance.timing.navigationStart}catch(e){}return e},e}(),be=function(){function e(e){this.collect=e,this.eventNameList=["report_click_event","report_change_event","report_submit_event","report_exposure_event","report_page_view_event","report_page_statistics_event","report_beat_event"]}return e.prototype.send=function(e,t){var n=e.eventSend,r=t.event;delete t.event,n&&"becon"===n?this.collect.beconEvent(r,t):this.collect.event(r,t)},e.prototype.get=function(e,t){var n=Object.assign({headers:{"content-type":"application/json"},method:"GET"},t);fetch(e,n)},e.prototype.post=function(e,t){var n=Object.assign({headers:{"content-type":"application/json"},method:"POST"},t);fetch(e,n)},e}(),Ee=function(){function e(e){this._instance=null,this._intersection=e,this.init()}return e.prototype.init=function(){var e=this;if(window.MutationObserver)try{this._instance=new MutationObserver((function(t){t.forEach((function(t){"attributes"===t.type&&e.attributeChangeObserve(t),"childList"===t.type&&e.modifyNodeObserve(t)}))})),this._instance.observe(document.body,{childList:!0,attributes:!0,subtree:!0,attributeOldValue:!1})}catch(e){}},e.prototype.attributeChangeObserve=function(e){e.target.hasAttribute("data-exposure")?this.exposureAdd(e,"mutation"):this.exposureRemove(e)},e.prototype.modifyNodeObserve=function(e){var t=this;Array.from(e.addedNodes).forEach((function(e){1===e.nodeType&&e.hasAttribute("data-exposure")&&t.exposureAdd(e,"intersect"),t.mapChild(e,t.exposureAdd.bind(t))})),Array.prototype.forEach.call(e.removedNodes,(function(e){1===e.nodeType&&e.hasAttribute("data-exposure")&&t.exposureRemove(e),t.mapChild(e,t.exposureRemove.bind(t))}))},e.prototype.mapChild=function(e,t){var n=this;1===e.nodeType&&e.children.length&&Array.prototype.forEach.call(e.children,(function(e){1===e.nodeType&&e.hasAttribute("data-exposure")&&t(e),n.mapChild(e,t)}))},e.prototype.exposureAdd=function(e,t){this._intersection&&this._intersection.exposureAdd(e,t)},e.prototype.exposureRemove=function(e){this._intersection&&this._intersection.exposureRemove(e)},e._exposure_observer=null,e}(),we=function(){function e(t,n){this.count=1,this.instance=this.buildObserver(),this.observeMap=e._observer_map,t.autotrack.exposure.ratio?this.Ratio=t.autotrack.exposure.ratio:0===t.autotrack.exposure.ratio?this.Ratio=0:this.Ratio=.5,this.EventHandle=n}return e.prototype.buildObserver=function(){var t=this;if(!e._observer_instance)return IntersectionObserver&&(e._observer_instance=new IntersectionObserver((function(e){e.forEach((function(e){t.observeMap.get(e.target._observeId)&&t.exposureEvent(e)}))}),{threshold:[.01,.25,.5,.75,1]})),e._observer_instance},e.prototype.exposureAdd=function(e,t){var n=e;"mutation"===t&&(n=e.target);var r=n._observeId;if(r||this.observeMap.has(r)){if(!1===n.visible){var i=n.getBoundingClientRect(),o=i.top,s=i.left,a=i.right,c=i.bottom;o>=0&&c<=window.innerHeight&&s>=0&&a<=window.innerWidth&&(n.visible=!0,this.EventHandle({eventType:"dom",eventName:"exposure"},e))}}else n._observeId=this.count,n.visible=!1,this.observeMap.set(this.count,n),this.observe(n),this.count++},e.prototype.exposureRemove=function(e){this.observeMap.has(e._observeId)&&(this.observeMap.delete(e._observeId),this.unobserve(e))},e.prototype.exposureEvent=function(e){if(e.intersectionRatio>=this.Ratio&&e.isIntersecting){if("0"===e.target.style.opacity||"hidden"===e.target.style.visibility)return;if(!0===e.target.visible)return;e.target.visible=!0,this.EventHandle({eventType:"dom",eventName:"exposure"},e)}else e.target.visible=!1},e.prototype.observe=function(e){this.instance.observe(e)},e.prototype.unobserve=function(e){this.instance.unobserve(e)},e._observer_instance=null,e._observer_map=new Map,e}(),Se=function(){function e(e,t){e.autotrack&&e.autotrack.exposure&&(this._intersection=new we(e,t),this._observer=new Ee(this._intersection),this.initObserver())}return e.prototype.initObserver=function(){var e=this;Array.prototype.forEach.call(document.querySelectorAll("[data-exposure]"),(function(t){e._intersection.exposureAdd(t,"intersect")}))},e}(),Te={hashTag:!1,impr:!1},Ce=function(){function e(){}return e.prototype.apply=function(e,t){if(this.autoTrackStart=!1,this.collect=e,this.config=t,t.autotrack){var n=e.Types;t.autotrack&&t.autotrack.collect_url&&!t.autotrack.collect_url()||(this.ready(n.Autotrack),this.collect.emit(n.AutotrackReady))}},e.prototype.ready=function(e){this.collect.set(e);var t=this.config.autotrack;t="object"==typeof t?t:{},t=Object.assign(Te,t),this.destroyed=!1,this.options=t,this.Config=new _e(ge,this.options),this.Listener=new pe(t,this.collect,this.Config),this.EventHandle=new ye(this.config,t),this.Request=new be(this.collect),this.autoTrackStart=!0,this.Exposure=new Se(this.config,this.handle.bind(this)),this.init()},e.prototype.init=function(){this.Listener.init(this.handle.bind(this));try{"base"===this.collect.loadType&&(window.opener||window.parent).postMessage("[tea-sdk]ready","*")}catch(e){}},e.prototype.handle=function(e,t){try{if(this.config.autotrack.collect_url&&!this.config.autotrack.collect_url())return}catch(e){}"dom"===e.eventType&&this.handleDom(e,t)},e.prototype.handleDom=function(e,t){try{var n=e.eventName;if("click"===n||"exposure"===n||"change"===n||"submit"===n){var r=this.EventHandle.handleEvent(t,n);null!==r&&this.Request.send({eventType:"custom",eventName:"report_"+n+"_event",extra:{methods:"GET"}},r)}else if("page_view"===n||"page_statistics"===n){var i;i="page_view"===n?this.EventHandle.handleViewEvent(t):this.EventHandle.handleStatisticsEvent(t),this.Request.send({eventType:"custom",eventName:"report_${eventName}_event",extra:{methods:"GET"}},i)}else if("beat"===n){var o=this.EventHandle.handleBeadtEvent(t),s=e.eventSend;this.Request.send({eventType:"custom",eventName:"report_${eventName}_event",extra:{methods:"GET"},eventSend:s},o)}}catch(e){}},e.prototype.destroy=function(){this.autoTrackStart&&(this.autoTrackStart=!1,this.Listener.removeListener())},e}();!function(e){e.Net="net",e.FailNet="f_net",e.FailData="f_data"}(me||(me={}));var Oe={pv:["predefine_pageview"],sdk:["_be_active","predefine_page_alive","predefine_page_close","__profile_set","__profile_set_once","__profile_increment","__profile_unset","__profile_append"],autotrack:["bav2b_click","bav2b_page","bav2b_beat","bav2b_page_statistics","__bav_click","__bav_page","__bav_beat","__bav_page_statistics"]},Ae=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;if(t.app_id&&t.enable_tracer&&!t.disable_track_event){this.limit={pv:1,sdk:3,autotrack:3,log:3},this.errorCode={f_net:0,f_data:0},this.tracerCache=new Map,this.collect=e,this.appid=t.app_id,this.reportUrl=e.configManager.getUrl("event");var r=this.collect.Types;this.collect.on(r.Event,(function(){n.addCount("log")})),this.collect.on(r.SubmitError,(function(e){var t=e.type,r=e.eventDate,i=e.errorCode,o=e.response;n.addErrorCount(r,t,i,o)})),this.listener(),this.collect.emit(r.TracerReady)}},e.prototype.addCount=function(e,t,n){void 0===t&&(t="net"),void 0===n&&(n=1);try{this.tracerCache||(this.tracerCache=new Map);var r=void 0;if(this.tracerCache.has(e))(i=this.tracerCache.get(e)).has(t)?(r=i.get(t).params.count,r++,i.set(t,this.processTracer(r,e,t))):(r=n,i.set(t,this.processTracer(n,e,t)));else{var i=new Map;r=n,i.set(t,this.processTracer(n,e,t)),this.tracerCache.set(e,i)}"net"===t&&r>=this.limit[e]&&this.report(!1)}catch(e){}},e.prototype.addErrorCount=function(e,t,n,r){var i=this;try{if(e&&e.length){var o=e[0].events;o&&o.length&&("f_data"===t?(r&&r.hasOwnProperty("sc")?this.addCount("log",t,o.length-r.sc):this.addCount("log",t,o.length),this.errorCode[t]=n):o.forEach((function(e){var r="log";for(var o in Oe)if(-1!==Oe[o].indexOf(e.event)){r=o;break}i.addCount(r,t,1),i.errorCode[t]=n})))}}catch(e){}},e.prototype.report=function(e){if(this.tracerCache){var t=[];this.tracerCache.forEach((function(e){e.forEach((function(e){t.push(e)}))})),t&&t.length&&this.sendTracer(t,e)}},e.prototype.sendTracer=function(e,t){try{var n=this.collect.eventManager.merge(e);this.collect.requestManager.useRequest({url:this.reportUrl,data:n,useBeacon:t}),this.tracerCache=null}catch(e){}},e.prototype.processTracer=function(e,t,n){var r={count:e,state:n,key:t,params_for_special:"applog_trace",aid:this.appid,platform:"web",_staging_flag:1,sdk_version:x};"f_net"!==n&&"f_data"!==n||(r.errorCode=this.errorCode[n]);var i=this.collect.processEvent("applog_trace",r);if(i&&i.event)return delete i.is_bav,i},e.prototype.listener=function(){var e=this;document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e.leavePage()})),_((function(){e.leavePage()}))},e.prototype.leavePage=function(){this.report(!0)},e}(),Ie=function(){function e(){this.retryWaitTime=3e3,this.retryStatus=!1,this.retryCacheStatus=!1}return e.prototype.apply=function(e,t){var n=this;if(t.enable_storage&&!t.disable_storage&&(this.collect=e,this.config=t,!this.collect.destroy)){var r=e.Types,i=e.adapters.storage;this.storage=new i(!1),this.eventUrl=this.collect.configManager.getUrl("event"),this.eventKey="__tea_cache_events_"+t.app_id,this.storageNum=t.storage_num||50,this.retryNum=t.retry_num||3,this.retryInterval=1e3,e.on(r.SubmitError,(function(e){"f_data"!==e.type&&n.storeData(e)})),e.on(r.Ready,(function(){n.checkStorage()}))}},e.prototype.retryRightNow=function(e){var t=this;if(this.retryStatus)this.errorCache.push(e);else{var n=0;this.retryStatus=!0;var r=setInterval((function(){if(3===n)return t.storeData(t.errorCache),t.retryStatus=!1,void clearInterval(r);var i=e.eventData;t.fetchData(i,(function(){t.retryStatus=!1,clearInterval(r),t.retryCacheStatus&&t.errorCache.splice(0,1),t.errorCache.length&&(t.retryCacheStatus=!0,t.retryRightNow(t.errorCache[0]))}),(function(){n++}))}),this.retryInterval)}},e.prototype.storeData=function(e){var t=this.storage.getItem(this.eventKey),n=e.eventData;Object.keys(t).length!==this.storageNum&&(t[Date.now()]=n,this.storage.setItem(this.eventKey,t))},e.prototype.checkStorage=function(){var e=this;try{if(!window.navigator.onLine)return;var t=this.storage.getItem(this.eventKey);if(!t||!Object.keys(t).length)return;var n={events:[{event:"ontest",params:{app_id:this.config.app_id},local_time_ms:Date.now()}],user:{user_unique_id:this.collect.configManager.get("web_id")},header:{}};this.fetchData([n],(function(){var n=JSON.parse(JSON.stringify(t)),r=function(r){e.fetchData(t[r],(function(){delete n[r],e.storage.setItem(e.eventKey,n)}),(function(){}),!1)};for(var i in t)r(i)}),(function(){}),!0)}catch(e){}},e.prototype.fetchData=function(e,t,n,r){this.collect.requestManager.useRequest({url:this.eventUrl,data:e,timeout:3e4,success:t,fail:n,app_key:r?"566f58151b0ed37e":""})},e}(),Re="undefined"!=typeof window?(window.LogPluginObject||(window.LogPluginObject={}),window.LogPluginObject):null,De=function(){function e(){}return e.prototype.apply=function(e,t){this._plugin={},this.config=t,this.collect=e,this.channel=t.channel||"cn",this.loadExtend()},e.prototype.loadExtend=function(){var e=this;try{this.collect.remotePlugin.forEach((function(t,n){if("sdk"===t){if(Y.hasOwnProperty(n)){var r=Y[n].object,i=Y[n].src[e.channel]+"?query="+Date.now();e.exist(n,r,i)}}else"object"==typeof t&&(t.src?e.exist(n,t.call,t.src):e.process(n,t.instance,"INSTANCE"))}))}catch(e){this.collect.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,info:"发生了异常",level:"error",time:Date.now(),data:e.message})}},e.prototype.exist=function(e,t,n){var r=this;Re[t]?this.process(e,Re[t]):this.loadPlugin(e,n,(function(){r.process(e,Re[t])}),(function(){}))},e.prototype.process=function(e,t,n){try{if(n){var r=new t;r.apply&&r.apply(this.collect,this.config)}else t&&t(this.collect,this.config)}catch(t){this.collect.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,info:"发生了异常",level:"error",time:Date.now(),data:t.message})}},e.prototype.loadPlugin=function(e,t,n,r){var i=this;try{var o=document.createElement("script");o.src=t,this._plugin[e]||(this._plugin[e]=[]),this._plugin[e].push(n),o.onerror=function(){r(t)},o.onload=function(){i._plugin[e].forEach((function(e){e()}))},document.getElementsByTagName("head")[0].appendChild(o)}catch(e){this.collect.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,info:"发生了异常",level:"error",time:Date.now(),data:e.message})}},e}(),xe=function(){function e(){this.autotrack=!1,this.spa=!1,this.cache={},this.allowHash=!1}return e.prototype.apply=function(e,t){if(t.spa||t.autotrack){var n=e.Types;this.collect=e,this.config=t,this.appid=t.app_id,this.allowHash=t.allow_hash,this.fncArray=new Map,this.setKey(),this.setLocation(),this.hack(),this.init(),this.listener(),e.emit(n.RouteReady)}},e.prototype.setKey=function(){var e=this.collect.adapters.storage;this.storage=new e(!1),this.cache_key="__tea_cache_refer_"+this.appid,this.cache={refer_key:"",refer_title:document.title||location.pathname,refer_manual_key:"",routeChange:!1},this.config.autotrack&&"object"==typeof this.config.autotrack&&this.config.autotrack.page_manual_key&&(this.cache.refer_manual_key=this.config.autotrack.page_manual_key),this.storage.setItem(this.cache_key,this.cache)},e.prototype.hack=function(){var e=this,t=window.history.pushState;history.pushState=function(n){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];"function"==typeof history.onpushstate&&history.onpushstate({state:n});var o=t.call.apply(t,s([history,n],r));if(e.collect.sdkStop||e.collect.destroy)return o;if(!(e.lastLocation===location.href||e.config.disable_spa_query&&e.pathEquel())){var a=e.getPopStateChangeEventData();return e.setReferCache(e.lastLocation),e.lastLocation=location.href,e.sendPv(a,"pushState"),o}};var n=history.replaceState;history.replaceState=function(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];"function"==typeof history.onreplacestate&&history.onreplacestate({state:t});var o=n.call.apply(n,s([history,t],r));if(e.collect.sdkStop||e.collect.destroy)return o;if(!(e.lastLocation===location.href||e.config.disable_spa_query&&e.pathEquel())){var a=e.getPopStateChangeEventData();return e.setReferCache(e.lastLocation),e.lastLocation=location.href,e.sendPv(a),o}}},e.prototype.setLocation=function(){"undefined"!=typeof window&&(this.lastLocation=window.location.href)},e.prototype.getLocation=function(){return this.lastLocation},e.prototype.pathEquel=function(){try{return new URL(this.lastLocation).origin+new URL(this.lastLocation).pathname===new URL(location.href).origin+new URL(location.href).pathname}catch(e){return!1}},e.prototype.init=function(){var e=this.getPopStateChangeEventData();this.collect.emit("route-change",{config:e,init:!0})},e.prototype.listener=function(){var e=this;window.addEventListener("hashchange",(function(t){if(!e.collect.sdkStop&&!e.collect.destroy&&e.lastLocation!==window.location.href&&(!e.config.disable_spa_query||!e.pathEquel())&&e.allowHash){e.setReferCache(e.lastLocation),e.lastLocation=window.location.href;var n=e.getPopStateChangeEventData();e.sendPv(n)}})),window.addEventListener("popstate",(function(t){if(!e.collect.sdkStop&&!e.collect.destroy&&!(e.lastLocation===window.location.href||e.config.disable_spa_query&&e.pathEquel())){e.setReferCache(e.lastLocation),e.lastLocation=window.location.href;var n=e.getPopStateChangeEventData();e.sendPv(n)}}))},e.prototype.getPopStateChangeEventData=function(){var e=this.pageConfig();return e.is_back=0,e},e.prototype.pageConfig=function(){try{var e,t=this.storage.getItem(this.cache_key)||{},n=this.storage.getItem("__tea_cache_first_"+this.appid);return e=!n||1!=n,{is_html:1,url:location.href,referrer:this.handleRefer(),page_key:location.href,refer_page_key:this.handleRefer(),page_title:document.title||location.pathname,page_manual_key:this.config.autotrack&&this.config.autotrack.page_manual_key||"",refer_page_manual_key:t&&t.refer_manual_key||"",refer_page_title:t&&t.refer_title||"",page_path:location.pathname,page_host:location.host,is_first_time:""+e}}catch(t){return this.collect.emit(l.DEBUGGER_MESSAGE,{type:l.DEBUGGER_MESSAGE_SDK,info:"发生了异常",level:"error",time:Date.now(),data:t.message}),{}}},e.prototype.sendPv=function(e,t){this.collect.emit("route-change",{config:e,init:!1})},e.prototype.handleRefer=function(){var e="";try{var t=this.storage.getItem()||{};e=t.routeChange?t.refer_key:this.collect.configManager.get("referrer")}catch(t){e=document.referrer}return e},e.prototype.setReferCache=function(e){var t=this.storage.getItem(this.cache_key)||{};t.refer_key=e,t.routeChange=!0,this.storage.setItem(this.cache_key,t)},e}();Z.usePlugin(De,"extend"),Z.usePlugin(ee,"ab"),Z.usePlugin(ie,"stay"),Z.usePlugin(Ce,"autotrack"),Z.usePlugin(te,"et"),Z.usePlugin(oe,"profile"),Z.usePlugin(Ie,"retry"),Z.usePlugin(se,"heartbeat"),Z.usePlugin(ae,"monitor"),Z.usePlugin(xe,"route"),Z.usePlugin(Ae,"tracer"),new Z("default");var Me=Z;function Pe(e){const t=new Me(e.collectorId||String(e.app_id));return t.init(e),e.defer||t.start(),new Ne(t,e.app_id)}class Ne{_tea;_appId;constructor(e,t){this._tea=e,this._appId=t}config(e){this._tea.config({...e.user||{},...e.header||{},...e.custom||{},web_id:e.user?.web_id?String(e.user.web_id):void 0})}collect(e,t){Array.isArray(e)&&e.forEach((({name:e,params:t})=>this._tea.event(e,t))),"string"==typeof e&&this._tea.event(e,t)}predefinePageView(e){this._tea.predefinePageView(e)}getVar(e,t){return new Promise((n=>{this._tea.getVar(String(e),t?.defaultValue,(e=>{n(e)}))}))}getAllVars(e){return new Promise((e=>{this._tea.getAllVars((t=>{e(t)}))}))}getSDK(){return this._tea}getAppID(){return this._appId}}t.TeaClient=Ne,t.createDefaultTeaClient=function(e){const{appId:t,channel:n,serviceOrigin:i,channelDomain:o}=r.getTeaConfig(e);return Pe({app_id:t,channel:n,log:!0,abServiceOrigin:i,enable_ab_test:!0,ab_channel_domain:o,disable_auto_pv:!0,enable_ttwebid:!0,enable_cookie:!0,cross_subdomain:!0,...e})},t.createTeaClient=Pe},4383:e=>{"use strict";e.exports=require("fs")},1398:e=>{"use strict";e.exports=require("vscode")},2441:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringifyServiceIdentifier=t.LazyServiceIdentifier=void 0;const r=n(718);Object.defineProperty(t,"stringifyServiceIdentifier",{enumerable:!0,get:function(){return r.stringifyServiceIdentifier}});const i=n(7183);Object.defineProperty(t,"LazyServiceIdentifier",{enumerable:!0,get:function(){return i.LazyServiceIdentifier}})},718:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringifyServiceIdentifier=function(e){switch(typeof e){case"string":case"symbol":return e.toString();case"function":return e.name;default:throw new Error(`Unexpected ${typeof e} service id type`)}}},7183:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LazyServiceIdentifier=t.islazyServiceIdentifierSymbol=void 0,t.islazyServiceIdentifierSymbol=Symbol.for("@inversifyjs/common/islazyServiceIdentifier");class n{[t.islazyServiceIdentifierSymbol];#e;constructor(e){this.#e=e,this[t.islazyServiceIdentifierSymbol]=!0}static is(e){return"object"==typeof e&&null!==e&&!0===e[t.islazyServiceIdentifierSymbol]}unwrap(){return this.#e()}}t.LazyServiceIdentifier=n},877:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InversifyCoreError=t.isAppErrorSymbol=void 0,t.isAppErrorSymbol=Symbol.for("@inversifyjs/core/InversifyCoreError");class n extends Error{[t.isAppErrorSymbol];kind;constructor(e,n,r){super(n,r),this[t.isAppErrorSymbol]=!0,this.kind=e}static is(e){return"object"==typeof e&&null!==e&&!0===e[t.isAppErrorSymbol]}static isErrorOfKind(e,t){return n.is(e)&&e.kind===t}}t.InversifyCoreError=n},6435:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.InversifyCoreErrorKind=void 0,function(e){e[e.injectionDecoratorConflict=0]="injectionDecoratorConflict",e[e.missingInjectionDecorator=1]="missingInjectionDecorator",e[e.planning=2]="planning",e[e.unknown=3]="unknown"}(n||(t.InversifyCoreErrorKind=n={}))},5719:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LegacyTargetImpl=t.getTargets=t.getClassMetadataFromMetadataReader=t.getClassMetadata=t.getClassElementMetadataFromLegacyMetadata=t.ClassElementMetadataKind=void 0;const r=n(5595);Object.defineProperty(t,"getTargets",{enumerable:!0,get:function(){return r.getTargets}});const i=n(7949);Object.defineProperty(t,"LegacyTargetImpl",{enumerable:!0,get:function(){return i.LegacyTargetImpl}});const o=n(8607);Object.defineProperty(t,"getClassElementMetadataFromLegacyMetadata",{enumerable:!0,get:function(){return o.getClassElementMetadataFromLegacyMetadata}});const s=n(4575);Object.defineProperty(t,"getClassMetadata",{enumerable:!0,get:function(){return s.getClassMetadata}});const a=n(3865);Object.defineProperty(t,"getClassMetadataFromMetadataReader",{enumerable:!0,get:function(){return a.getClassMetadataFromMetadataReader}});const c=n(7317);Object.defineProperty(t,"ClassElementMetadataKind",{enumerable:!0,get:function(){return c.ClassElementMetadataKind}})},7173:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTargetId=function(){const e=(0,r.getReflectMetadata)(Object,i)??0;e===Number.MAX_SAFE_INTEGER?(0,r.updateReflectMetadata)(Object,i,e,(()=>Number.MIN_SAFE_INTEGER)):(0,r.updateReflectMetadata)(Object,i,e,(e=>e+1));return e};const r=n(3906),i="@inversifyjs/core/targetId"},5595:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTargets=void 0;const r=n(4575),i=n(3865),o=n(822),s=n(5216),a=n(9082);t.getTargets=e=>{const t=void 0===e?r.getClassMetadata:t=>(0,i.getClassMetadataFromMetadataReader)(t,e),n=void 0===e?o.getClassMetadataProperties:t=>(0,s.getClassMetadataPropertiesFromMetadataReader)(t,e);return(0,a.getTargetsFromMetadataProviders)(t,n)}},9082:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTargetsFromMetadataProviders=function(e,t){return function(n){const s=e(n);let a=(0,i.getBaseType)(n);for(;void 0!==a&&a!==Object;){const e=t(a);for(const[t,n]of e)s.properties.has(t)||s.properties.set(t,n);a=(0,i.getBaseType)(a)}const c=[];for(const e of s.constructorArguments)if(e.kind!==r.ClassElementMetadataKind.unmanaged){const t=e.targetName??"";c.push(new o.LegacyTargetImpl(t,e,"ConstructorArgument"))}for(const[e,t]of s.properties)if(t.kind!==r.ClassElementMetadataKind.unmanaged){const n=t.targetName??e;c.push(new o.LegacyTargetImpl(n,t,"ClassProperty"))}return c}};const r=n(7317),i=n(5812),o=n(7949)},7949:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LegacyTargetImpl=void 0;const r=n(2441),i=n(3378),o=n(7317),s=n(2753),a=n(9218),c=n(3193),u=n(7173);t.LegacyTargetImpl=class{#t;#n;#r;#i;#o;#s;constructor(e,t,n){this.#n=(0,u.getTargetId)(),this.#r=e,this.#i=void 0,this.#t=t,this.#o=new a.LegacyQueryableStringImpl("string"==typeof e?e:(0,c.getDescription)(e)),this.#s=n}get id(){return this.#n}get identifier(){return this.#r}get metadata(){return void 0===this.#i&&(this.#i=(0,i.getLegacyMetadata)(this.#t)),this.#i}get name(){return this.#o}get type(){return this.#s}get serviceIdentifier(){return r.LazyServiceIdentifier.is(this.#t.value)?this.#t.value.unwrap():this.#t.value}getCustomTags(){return[...this.#t.tags.entries()].map((([e,t])=>({key:e,value:t})))}getNamedTag(){return void 0===this.#t.name?null:{key:s.NAMED_TAG,value:this.#t.name}}hasTag(e){return this.metadata.some((t=>t.key===e))}isArray(){return this.#t.kind===o.ClassElementMetadataKind.multipleInjection}isNamed(){return void 0!==this.#t.name}isOptional(){return this.#t.optional}isTagged(){return this.#t.tags.size>0}matchesArray(e){return this.isArray()&&this.#t.value===e}matchesNamedTag(e){return this.#t.name===e}matchesTag(e){return t=>this.metadata.some((n=>n.key===e&&n.value===t))}}},714:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertConstructorMetadataArrayFilled=function(e,t){const n=[];for(let e=0;e<t.length;++e){void 0===t[e]&&n.push(e)}if(n.length>0)throw new r.InversifyCoreError(i.InversifyCoreErrorKind.missingInjectionDecorator,`Found unexpected missing metadata on type "${e.name}" at constructor indexes "${n.join('", "')}".\n\nAre you using @inject, @multiInject or @unmanaged decorators at those indexes?\n\nIf you're using typescript and want to rely on auto injection, set "emitDecoratorMetadata" compiler option to true`)};const r=n(877),i=n(6435)},8607:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getClassElementMetadataFromLegacyMetadata=function(e){const t=e.find((e=>e.key===o.INJECT_TAG)),n=e.find((e=>e.key===o.MULTI_INJECT_TAG));if(void 0!==e.find((e=>e.key===o.UNMANAGED_TAG)))return function(e,t){if(void 0!==t||void 0!==e)throw new r.InversifyCoreError(i.InversifyCoreErrorKind.missingInjectionDecorator,"Expected a single @inject, @multiInject or @unmanaged metadata");return{kind:s.ClassElementMetadataKind.unmanaged}}(t,n);if(void 0===n&&void 0===t)throw new r.InversifyCoreError(i.InversifyCoreErrorKind.missingInjectionDecorator,"Expected @inject, @multiInject or @unmanaged metadata");const a=e.find((e=>e.key===o.NAMED_TAG)),c=e.find((e=>e.key===o.OPTIONAL_TAG)),u=e.find((e=>e.key===o.NAME_TAG));return{kind:void 0===t?s.ClassElementMetadataKind.multipleInjection:s.ClassElementMetadataKind.singleInjection,name:a?.value,optional:void 0!==c,tags:new Map(e.filter((e=>o.NON_CUSTOM_TAG_KEYS.every((t=>e.key!==t)))).map((e=>[e.key,e.value]))),targetName:u?.value,value:void 0===t?n?.value:t.value}};const r=n(877),i=n(6435),o=n(2753),s=n(7317)},935:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getClassElementMetadataFromNewable=function(e){return{kind:r.ClassElementMetadataKind.singleInjection,name:void 0,optional:!1,tags:new Map,targetName:void 0,value:e}};const r=n(7317)},4575:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getClassMetadata=function(e){const t=(0,r.getReflectMetadata)(e,i.POST_CONSTRUCT),n=(0,r.getReflectMetadata)(e,i.PRE_DESTROY);return{constructorArguments:(0,o.getClassMetadataConstructorArguments)(e),lifecycle:{postConstructMethodName:t?.value,preDestroyMethodName:n?.value},properties:(0,s.getClassMetadataProperties)(e)}};const r=n(3906),i=n(2753),o=n(5007),s=n(822)},5007:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getClassMetadataConstructorArguments=function(e){const t=(0,r.getReflectMetadata)(e,i.DESIGN_PARAM_TYPES),n=(0,r.getReflectMetadata)(e,i.TAGGED),c=[];if(void 0!==n)for(const[t,r]of Object.entries(n)){const n=parseInt(t);c[n]=(0,a.getConstructorArgumentMetadataFromLegacyMetadata)(e,n,r)}if(void 0!==t)for(let e=0;e<t.length;++e)if(void 0===c[e]){const n=t[e];c[e]=(0,s.getClassElementMetadataFromNewable)(n)}return(0,o.assertConstructorMetadataArrayFilled)(e,c),c};const r=n(3906),i=n(2753),o=n(714),s=n(935),a=n(2466)},793:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getClassMetadataConstructorArgumentsFromMetadataReader=function(e,t){const n=t.getConstructorMetadata(e),s=[];for(const[t,r]of Object.entries(n.userGeneratedMetadata)){const n=parseInt(t);s[n]=(0,o.getConstructorArgumentMetadataFromLegacyMetadata)(e,n,r)}if(void 0!==n.compilerGeneratedMetadata)for(let e=0;e<n.compilerGeneratedMetadata.length;++e)if(void 0===s[e]){const t=n.compilerGeneratedMetadata[e];s[e]=(0,i.getClassElementMetadataFromNewable)(t)}return(0,r.assertConstructorMetadataArrayFilled)(e,s),s};const r=n(714),i=n(935),o=n(2466)},3865:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getClassMetadataFromMetadataReader=function(e,t){const n=(0,r.getReflectMetadata)(e,i.POST_CONSTRUCT),a=(0,r.getReflectMetadata)(e,i.PRE_DESTROY);return{constructorArguments:(0,o.getClassMetadataConstructorArgumentsFromMetadataReader)(e,t),lifecycle:{postConstructMethodName:n?.value,preDestroyMethodName:a?.value},properties:(0,s.getClassMetadataPropertiesFromMetadataReader)(e,t)}};const r=n(3906),i=n(2753),o=n(793),s=n(5216)},822:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getClassMetadataProperties=function(e){const t=(0,r.getReflectMetadata)(e,i.TAGGED_PROP),n=new Map;if(void 0!==t)for(const r of Reflect.ownKeys(t)){const i=t[r];n.set(r,(0,o.getPropertyMetadataFromLegacyMetadata)(e,r,i))}return n};const r=n(3906),i=n(2753),o=n(8330)},5216:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getClassMetadataPropertiesFromMetadataReader=function(e,t){const n=t.getPropertiesMetadata(e),i=new Map;for(const t of Reflect.ownKeys(n)){const o=n[t];i.set(t,(0,r.getPropertyMetadataFromLegacyMetadata)(e,t,o))}return i};const r=n(8330)},2466:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getConstructorArgumentMetadataFromLegacyMetadata=function(e,t,n){try{return(0,o.getClassElementMetadataFromLegacyMetadata)(n)}catch(n){throw r.InversifyCoreError.isErrorOfKind(n,i.InversifyCoreErrorKind.missingInjectionDecorator)?new r.InversifyCoreError(i.InversifyCoreErrorKind.missingInjectionDecorator,`Expected a single @inject, @multiInject or @unmanaged decorator at type "${e.name}" at constructor arguments at index "${t.toString()}"`,{cause:n}):n}};const r=n(877),i=n(6435),o=n(8607)},3378:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLegacyMetadata=function(e){if(e.kind===i.ClassElementMetadataKind.unmanaged)return[{key:r.UNMANAGED_TAG,value:!0}];return function(e){const t=[o(e)];void 0!==e.name&&t.push({key:r.NAMED_TAG,value:e.name});e.optional&&t.push({key:r.OPTIONAL_TAG,value:!0});for(const[n,r]of e.tags)t.push({key:n,value:r});void 0!==e.targetName&&t.push({key:r.NAME_TAG,value:e.targetName});return t}(e)};const r=n(2753),i=n(7317);function o(e){let t;switch(e.kind){case i.ClassElementMetadataKind.multipleInjection:t={key:r.MULTI_INJECT_TAG,value:e.value};break;case i.ClassElementMetadataKind.singleInjection:t={key:r.INJECT_TAG,value:e.value}}return t}},8330:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPropertyMetadataFromLegacyMetadata=function(e,t,n){try{return(0,o.getClassElementMetadataFromLegacyMetadata)(n)}catch(n){throw r.InversifyCoreError.isErrorOfKind(n,i.InversifyCoreErrorKind.missingInjectionDecorator)?new r.InversifyCoreError(i.InversifyCoreErrorKind.missingInjectionDecorator,`Expected a single @inject, @multiInject or @unmanaged decorator at type "${e.name}" at property "${t.toString()}"`,{cause:n}):n}};const r=n(877),i=n(6435),o=n(8607)},7317:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ClassElementMetadataKind=void 0,function(e){e[e.multipleInjection=0]="multipleInjection",e[e.singleInjection=1]="singleInjection",e[e.unmanaged=2]="unmanaged"}(n||(t.ClassElementMetadataKind=n={}))},5812:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBaseType=function(e){const t=Object.getPrototypeOf(e.prototype),n=t?.constructor;return n}},2753:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NON_CUSTOM_TAG_KEYS=t.PRE_DESTROY=t.POST_CONSTRUCT=t.DESIGN_PARAM_TYPES=t.PARAM_TYPES=t.TAGGED_PROP=t.TAGGED=t.MULTI_INJECT_TAG=t.INJECT_TAG=t.OPTIONAL_TAG=t.UNMANAGED_TAG=t.NAME_TAG=t.NAMED_TAG=void 0,t.NAMED_TAG="named",t.NAME_TAG="name",t.UNMANAGED_TAG="unmanaged",t.OPTIONAL_TAG="optional",t.INJECT_TAG="inject",t.MULTI_INJECT_TAG="multi_inject",t.TAGGED="inversify:tagged",t.TAGGED_PROP="inversify:tagged_props",t.PARAM_TYPES="inversify:paramtypes",t.DESIGN_PARAM_TYPES="design:paramtypes",t.POST_CONSTRUCT="post_construct",t.PRE_DESTROY="pre_destroy",t.NON_CUSTOM_TAG_KEYS=[t.INJECT_TAG,t.MULTI_INJECT_TAG,t.NAME_TAG,t.UNMANAGED_TAG,t.NAMED_TAG,t.OPTIONAL_TAG]},9218:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LegacyQueryableStringImpl=void 0;t.LegacyQueryableStringImpl=class{#a;constructor(e){this.#a=e}startsWith(e){return this.#a.startsWith(e)}endsWith(e){return this.#a.endsWith(e)}contains(e){return this.#a.includes(e)}equals(e){return this.#a===e}value(){return this.#a}}},3193:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDescription=function(e){return e.toString().slice(n,r)};const n=7,r=-1},3906:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateReflectMetadata=t.getReflectMetadata=void 0;const r=n(4551);Object.defineProperty(t,"getReflectMetadata",{enumerable:!0,get:function(){return r.getReflectMetadata}});const i=n(4596);Object.defineProperty(t,"updateReflectMetadata",{enumerable:!0,get:function(){return i.updateReflectMetadata}})},4551:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getReflectMetadata=function(e,t){return Reflect.getMetadata(t,e)}},4596:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateReflectMetadata=function(e,t,n,i){const o=(0,r.getReflectMetadata)(e,t)??n,s=i(o);Reflect.defineMetadata(t,s,e)};const r=n(4551)},8583:(e,t,n)=>{"use strict";function r(e,t){return function(){return e.apply(t,arguments)}}const{toString:i}=Object.prototype,{getPrototypeOf:o}=Object,s=(a=Object.create(null),e=>{const t=i.call(e);return a[t]||(a[t]=t.slice(8,-1).toLowerCase())});var a;const c=e=>(e=e.toLowerCase(),t=>s(t)===e),u=e=>t=>typeof t===e,{isArray:l}=Array,d=u("undefined");const f=c("ArrayBuffer");const h=u("string"),p=u("function"),g=u("number"),_=e=>null!==e&&"object"==typeof e,m=e=>{if("object"!==s(e))return!1;const t=o(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},v=c("Date"),y=c("File"),b=c("Blob"),E=c("FileList"),w=c("URLSearchParams");function S(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let r,i;if("object"!=typeof e&&(e=[e]),l(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{const i=n?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let s;for(r=0;r<o;r++)s=i[r],t.call(null,e[s],s,e)}}function T(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const C="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:n.g,O=e=>!d(e)&&e!==C;const A=(I="undefined"!=typeof Uint8Array&&o(Uint8Array),e=>I&&e instanceof I);var I;const R=c("HTMLFormElement"),D=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),x=c("RegExp"),M=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};S(n,((n,i)=>{let o;!1!==(o=t(n,i,e))&&(r[i]=o||n)})),Object.defineProperties(e,r)},P="abcdefghijklmnopqrstuvwxyz",N="0123456789",k={DIGIT:N,ALPHA:P,ALPHA_DIGIT:P+P.toUpperCase()+N};const L=c("AsyncFunction");var j={isArray:l,isArrayBuffer:f,isBuffer:function(e){return null!==e&&!d(e)&&null!==e.constructor&&!d(e.constructor)&&p(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||p(e.append)&&("formdata"===(t=s(e))||"object"===t&&p(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&f(e.buffer),t},isString:h,isNumber:g,isBoolean:e=>!0===e||!1===e,isObject:_,isPlainObject:m,isUndefined:d,isDate:v,isFile:y,isBlob:b,isRegExp:x,isFunction:p,isStream:e=>_(e)&&p(e.pipe),isURLSearchParams:w,isTypedArray:A,isFileList:E,forEach:S,merge:function e(){const{caseless:t}=O(this)&&this||{},n={},r=(r,i)=>{const o=t&&T(n,i)||i;m(n[o])&&m(r)?n[o]=e(n[o],r):m(r)?n[o]=e({},r):l(r)?n[o]=r.slice():n[o]=r};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&S(arguments[e],r);return n},extend:(e,t,n,{allOwnKeys:i}={})=>(S(t,((t,i)=>{n&&p(t)?e[i]=r(t,n):e[i]=t}),{allOwnKeys:i}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,s,a;const c={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)a=i[s],r&&!r(a,e,t)||c[a]||(t[a]=e[a],c[a]=!0);e=!1!==n&&o(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:s,kindOfTest:c,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(l(e))return e;let t=e.length;if(!g(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:R,hasOwnProperty:D,hasOwnProp:D,reduceDescriptors:M,freezeMethods:e=>{M(e,((t,n)=>{if(p(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];p(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return l(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:T,global:C,isContextDefined:O,ALPHABET:k,generateString:(e=16,t=k.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&p(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(_(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=l(e)?[]:{};return S(e,((e,t)=>{const o=n(e,r+1);!d(o)&&(i[t]=o)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:L,isThenable:e=>e&&(_(e)||p(e))&&p(e.then)&&p(e.catch)};function z(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}j.inherits(z,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:j.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const F=z.prototype,B={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{B[e]={value:e}})),Object.defineProperties(z,B),Object.defineProperty(F,"isAxiosError",{value:!0}),z.from=(e,t,n,r,i,o)=>{const s=Object.create(F);return j.toFlatObject(e,s,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),z.call(s,e.message,t,n,r,i),s.cause=e,s.name=e.name,o&&Object.assign(s,o),s};function U(e){return j.isPlainObject(e)||j.isArray(e)}function G(e){return j.endsWith(e,"[]")?e.slice(0,-2):e}function q(e,t,n){return e?e.concat(t).map((function(e,t){return e=G(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const V=j.toFlatObject(j,{},null,(function(e){return/^is[A-Z]/.test(e)}));function $(e,t,n){if(!j.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=j.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!j.isUndefined(t[e])}))).metaTokens,i=n.visitor||u,o=n.dots,s=n.indexes,a=(n.Blob||"undefined"!=typeof Blob&&Blob)&&j.isSpecCompliantForm(t);if(!j.isFunction(i))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(j.isDate(e))return e.toISOString();if(!a&&j.isBlob(e))throw new z("Blob is not supported. Use a Buffer instead.");return j.isArrayBuffer(e)||j.isTypedArray(e)?a&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function u(e,n,i){let a=e;if(e&&!i&&"object"==typeof e)if(j.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(j.isArray(e)&&function(e){return j.isArray(e)&&!e.some(U)}(e)||(j.isFileList(e)||j.endsWith(n,"[]"))&&(a=j.toArray(e)))return n=G(n),a.forEach((function(e,r){!j.isUndefined(e)&&null!==e&&t.append(!0===s?q([n],r,o):null===s?n:n+"[]",c(e))})),!1;return!!U(e)||(t.append(q(i,n,o),c(e)),!1)}const l=[],d=Object.assign(V,{defaultVisitor:u,convertValue:c,isVisitable:U});if(!j.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!j.isUndefined(n)){if(-1!==l.indexOf(n))throw Error("Circular reference detected in "+r.join("."));l.push(n),j.forEach(n,(function(n,o){!0===(!(j.isUndefined(n)||null===n)&&i.call(t,n,j.isString(o)?o.trim():o,r,d))&&e(n,r?r.concat(o):[o])})),l.pop()}}(e),t}function H(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function W(e,t){this._pairs=[],e&&$(e,this,t)}const K=W.prototype;function J(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Y(e,t,n){if(!t)return e;const r=n&&n.encode||J,i=n&&n.serialize;let o;if(o=i?i(t,n):j.isURLSearchParams(t)?t.toString():new W(t,n).toString(r),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}K.append=function(e,t){this._pairs.push([e,t])},K.toString=function(e){const t=e?function(t){return e.call(this,t,H)}:H;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var X=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){j.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Z={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Q={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:W,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]};const ee="undefined"!=typeof window&&"undefined"!=typeof document,te=(ne="undefined"!=typeof navigator&&navigator.product,ee&&["ReactNative","NativeScript","NS"].indexOf(ne)<0);var ne;const re="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts;var ie={...Object.freeze({__proto__:null,hasBrowserEnv:ee,hasStandardBrowserWebWorkerEnv:re,hasStandardBrowserEnv:te}),...Q};function oe(e){function t(e,n,r,i){let o=e[i++];if("__proto__"===o)return!0;const s=Number.isFinite(+o),a=i>=e.length;if(o=!o&&j.isArray(r)?r.length:o,a)return j.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!s;r[o]&&j.isObject(r[o])||(r[o]=[]);return t(e,n,r[o],i)&&j.isArray(r[o])&&(r[o]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],t[o]=e[o];return t}(r[o])),!s}if(j.isFormData(e)&&j.isFunction(e.entries)){const n={};return j.forEachEntry(e,((e,r)=>{t(function(e){return j.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null}const se={transitional:Z,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=j.isObject(e);i&&j.isHTMLForm(e)&&(e=new FormData(e));if(j.isFormData(e))return r?JSON.stringify(oe(e)):e;if(j.isArrayBuffer(e)||j.isBuffer(e)||j.isStream(e)||j.isFile(e)||j.isBlob(e))return e;if(j.isArrayBufferView(e))return e.buffer;if(j.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return $(e,new ie.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return ie.isNode&&j.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((o=j.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return $(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(j.isString(e))try{return(t||JSON.parse)(e),j.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||se.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&j.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(e){if(n){if("SyntaxError"===e.name)throw z.from(e,z.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ie.classes.FormData,Blob:ie.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};j.forEach(["delete","get","head","post","put","patch"],(e=>{se.headers[e]={}}));var ae=se;const ce=j.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);const ue=Symbol("internals");function le(e){return e&&String(e).trim().toLowerCase()}function de(e){return!1===e||null==e?e:j.isArray(e)?e.map(de):String(e)}function fe(e,t,n,r,i){return j.isFunction(r)?r.call(this,t,n):(i&&(t=n),j.isString(t)?j.isString(r)?-1!==t.indexOf(r):j.isRegExp(r)?r.test(t):void 0:void 0)}class he{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=le(t);if(!i)throw new Error("header name must be a non-empty string");const o=j.findKey(r,i);(!o||void 0===r[o]||!0===n||void 0===n&&!1!==r[o])&&(r[o||t]=de(e))}const o=(e,t)=>j.forEach(e,((e,n)=>i(e,n,t)));return j.isPlainObject(e)||e instanceof this.constructor?o(e,t):j.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?o((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&ce[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t):null!=e&&i(t,e,n),this}get(e,t){if(e=le(e)){const n=j.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(j.isFunction(t))return t.call(this,e,n);if(j.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=le(e)){const n=j.findKey(this,e);return!(!n||void 0===this[n]||t&&!fe(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=le(e)){const i=j.findKey(n,e);!i||t&&!fe(0,n[i],i,t)||(delete n[i],r=!0)}}return j.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!fe(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return j.forEach(this,((r,i)=>{const o=j.findKey(n,i);if(o)return t[o]=de(r),void delete t[i];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();s!==i&&delete t[i],t[s]=de(r),n[s]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return j.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&j.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach((e=>n.set(e))),n}static accessor(e){const t=(this[ue]=this[ue]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=le(e);t[r]||(!function(e,t){const n=j.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return j.isArray(e)?e.forEach(r):r(e),this}}he.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),j.reduceDescriptors(he.prototype,(({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}})),j.freezeMethods(he);var pe=he;function ge(e,t){const n=this||ae,r=t||n,i=pe.from(r.headers);let o=r.data;return j.forEach(e,(function(e){o=e.call(n,o,i.normalize(),t?t.status:void 0)})),i.normalize(),o}function _e(e){return!(!e||!e.__CANCEL__)}function me(e,t,n){z.call(this,null==e?"canceled":e,z.ERR_CANCELED,t,n),this.name="CanceledError"}j.inherits(me,z,{__CANCEL__:!0});var ve=ie.hasStandardBrowserEnv?{write(e,t,n,r,i,o){const s=[e+"="+encodeURIComponent(t)];j.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),j.isString(r)&&s.push("path="+r),j.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function ye(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}var be=ie.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function r(n){let r=n;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(e){const t=j.isString(e)?r(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0};function Ee(e,t){let n=0;const r=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,o=0,s=0;return t=void 0!==t?t:1e3,function(a){const c=Date.now(),u=r[s];i||(i=c),n[o]=a,r[o]=c;let l=s,d=0;for(;l!==o;)d+=n[l++],l%=e;if(o=(o+1)%e,o===s&&(s=(s+1)%e),c-i<t)return;const f=u&&c-u;return f?Math.round(1e3*d/f):void 0}}(50,250);return i=>{const o=i.loaded,s=i.lengthComputable?i.total:void 0,a=o-n,c=r(a);n=o;const u={loaded:o,total:s,progress:s?o/s:void 0,bytes:a,rate:c||void 0,estimated:c&&s&&o<=s?(s-o)/c:void 0,event:i};u[t?"download":"upload"]=!0,e(u)}}const we={http:null,xhr:"undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){let r=e.data;const i=pe.from(e.headers).normalize();let o,s,{responseType:a,withXSRFToken:c}=e;function u(){e.cancelToken&&e.cancelToken.unsubscribe(o),e.signal&&e.signal.removeEventListener("abort",o)}if(j.isFormData(r))if(ie.hasStandardBrowserEnv||ie.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if(!1!==(s=i.getContentType())){const[e,...t]=s?s.split(";").map((e=>e.trim())).filter(Boolean):[];i.setContentType([e||"multipart/form-data",...t].join("; "))}let l=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(t+":"+n))}const d=ye(e.baseURL,e.url);function f(){if(!l)return;const r=pe.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders());!function(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new z("Request failed with status code "+n.status,[z.ERR_BAD_REQUEST,z.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),u()}),(function(e){n(e),u()}),{data:a&&"text"!==a&&"json"!==a?l.response:l.responseText,status:l.status,statusText:l.statusText,headers:r,config:e,request:l}),l=null}if(l.open(e.method.toUpperCase(),Y(d,e.params,e.paramsSerializer),!0),l.timeout=e.timeout,"onloadend"in l?l.onloadend=f:l.onreadystatechange=function(){l&&4===l.readyState&&(0!==l.status||l.responseURL&&0===l.responseURL.indexOf("file:"))&&setTimeout(f)},l.onabort=function(){l&&(n(new z("Request aborted",z.ECONNABORTED,e,l)),l=null)},l.onerror=function(){n(new z("Network Error",z.ERR_NETWORK,e,l)),l=null},l.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const r=e.transitional||Z;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new z(t,r.clarifyTimeoutError?z.ETIMEDOUT:z.ECONNABORTED,e,l)),l=null},ie.hasStandardBrowserEnv&&(c&&j.isFunction(c)&&(c=c(e)),c||!1!==c&&be(d))){const t=e.xsrfHeaderName&&e.xsrfCookieName&&ve.read(e.xsrfCookieName);t&&i.set(e.xsrfHeaderName,t)}void 0===r&&i.setContentType(null),"setRequestHeader"in l&&j.forEach(i.toJSON(),(function(e,t){l.setRequestHeader(t,e)})),j.isUndefined(e.withCredentials)||(l.withCredentials=!!e.withCredentials),a&&"json"!==a&&(l.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&l.addEventListener("progress",Ee(e.onDownloadProgress,!0)),"function"==typeof e.onUploadProgress&&l.upload&&l.upload.addEventListener("progress",Ee(e.onUploadProgress)),(e.cancelToken||e.signal)&&(o=t=>{l&&(n(!t||t.type?new me(null,e,l):t),l.abort(),l=null)},e.cancelToken&&e.cancelToken.subscribe(o),e.signal&&(e.signal.aborted?o():e.signal.addEventListener("abort",o)));const h=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(d);h&&-1===ie.protocols.indexOf(h)?n(new z("Unsupported protocol "+h+":",z.ERR_BAD_REQUEST,e)):l.send(r||null)}))}};j.forEach(we,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));const Se=e=>`- ${e}`,Te=e=>j.isFunction(e)||null===e||!1===e;var Ce=e=>{e=j.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let o=0;o<t;o++){let t;if(n=e[o],r=n,!Te(n)&&(r=we[(t=String(n)).toLowerCase()],void 0===r))throw new z(`Unknown adapter '${t}'`);if(r)break;i[t||"#"+o]=r}if(!r){const e=Object.entries(i).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));throw new z("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(Se).join("\n"):" "+Se(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r};function Oe(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new me(null,e)}function Ae(e){Oe(e),e.headers=pe.from(e.headers),e.data=ge.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Ce(e.adapter||ae.adapter)(e).then((function(t){return Oe(e),t.data=ge.call(e,e.transformResponse,t),t.headers=pe.from(t.headers),t}),(function(t){return _e(t)||(Oe(e),t&&t.response&&(t.response.data=ge.call(e,e.transformResponse,t.response),t.response.headers=pe.from(t.response.headers))),Promise.reject(t)}))}const Ie=e=>e instanceof pe?{...e}:e;function Re(e,t){t=t||{};const n={};function r(e,t,n){return j.isPlainObject(e)&&j.isPlainObject(t)?j.merge.call({caseless:n},e,t):j.isPlainObject(t)?j.merge({},t):j.isArray(t)?t.slice():t}function i(e,t,n){return j.isUndefined(t)?j.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function o(e,t){if(!j.isUndefined(t))return r(void 0,t)}function s(e,t){return j.isUndefined(t)?j.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,i,o){return o in t?r(n,i):o in e?r(void 0,n):void 0}const c={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(e,t)=>i(Ie(e),Ie(t),!0)};return j.forEach(Object.keys(Object.assign({},e,t)),(function(r){const o=c[r]||i,s=o(e[r],t[r],r);j.isUndefined(s)&&o!==a||(n[r]=s)})),n}const De="1.6.8",xe={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{xe[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const Me={};xe.transitional=function(e,t,n){return(r,i,o)=>{if(!1===e)throw new z(function(e,t){return"[Axios v1.6.8] Transitional option '"+e+"'"+t+(n?". "+n:"")}(i," has been removed"+(t?" in "+t:"")),z.ERR_DEPRECATED);return t&&!Me[i]&&(Me[i]=!0),!e||e(r,i,o)}};var Pe={assertOptions:function(e,t,n){if("object"!=typeof e)throw new z("options must be an object",z.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const o=r[i],s=t[o];if(s){const t=e[o],n=void 0===t||s(t,o,e);if(!0!==n)throw new z("option "+o+" must be "+n,z.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new z("Unknown option "+o,z.ERR_BAD_OPTION)}},validators:xe};const Ne=Pe.validators;class ke{constructor(e){this.defaults=e,this.interceptors={request:new X,response:new X}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t;Error.captureStackTrace?Error.captureStackTrace(t={}):t=new Error;const n=t.stack?t.stack.replace(/^.+\n/,""):"";e.stack?n&&!String(e.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+n):e.stack=n}throw e}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Re(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&Pe.assertOptions(n,{silentJSONParsing:Ne.transitional(Ne.boolean),forcedJSONParsing:Ne.transitional(Ne.boolean),clarifyTimeoutError:Ne.transitional(Ne.boolean)},!1),null!=r&&(j.isFunction(r)?t.paramsSerializer={serialize:r}:Pe.assertOptions(r,{encode:Ne.function,serialize:Ne.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=i&&j.merge(i.common,i[t.method]);i&&j.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=pe.concat(o,i);const s=[];let a=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));const c=[];let u;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let l,d=0;if(!a){const e=[Ae.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,c),l=e.length,u=Promise.resolve(t);d<l;)u=u.then(e[d++],e[d++]);return u}l=s.length;let f=t;for(d=0;d<l;){const e=s[d++],t=s[d++];try{f=e(f)}catch(e){t.call(this,e);break}}try{u=Ae.call(this,f)}catch(e){return Promise.reject(e)}for(d=0,l=c.length;d<l;)u=u.then(c[d++],c[d++]);return u}getUri(e){return Y(ye((e=Re(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}j.forEach(["delete","get","head","options"],(function(e){ke.prototype[e]=function(t,n){return this.request(Re(n||{},{method:e,url:t,data:(n||{}).data}))}})),j.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(Re(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}ke.prototype[e]=t(),ke.prototype[e+"Form"]=t(!0)}));var Le=ke;class je{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new me(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new je((function(t){e=t})),cancel:e}}}var ze=je;const Fe={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Fe).forEach((([e,t])=>{Fe[t]=e}));var Be=Fe;const Ue=function e(t){const n=new Le(t),i=r(Le.prototype.request,n);return j.extend(i,Le.prototype,n,{allOwnKeys:!0}),j.extend(i,n,null,{allOwnKeys:!0}),i.create=function(n){return e(Re(t,n))},i}(ae);Ue.Axios=Le,Ue.CanceledError=me,Ue.CancelToken=ze,Ue.isCancel=_e,Ue.VERSION=De,Ue.toFormData=$,Ue.AxiosError=z,Ue.Cancel=Ue.CanceledError,Ue.all=function(e){return Promise.all(e)},Ue.spread=function(e){return function(t){return e.apply(null,t)}},Ue.isAxiosError=function(e){return j.isObject(e)&&!0===e.isAxiosError},Ue.mergeConfig=Re,Ue.AxiosHeaders=pe,Ue.formToJSON=e=>oe(j.isHTMLForm(e)?new FormData(e):e),Ue.getAdapter=Ce,Ue.HttpStatusCode=Be,Ue.default=Ue,e.exports=Ue},2326:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.decorate=function(e,t,n){"number"==typeof n?h([p(n,e)],t):"string"==typeof n?Reflect.decorate([e],t,n):h([e],t)},t.tagParameter=l,t.tagProperty=d,t.createTaggedDecorator=function(e){return(t,n,r)=>{"number"==typeof r?l(t,n,r,e):d(t,n,e)}};const a=s(n(8836)),c=s(n(3811)),u=n(5426);function l(e,t,n,r){!function(e){if(void 0!==e)throw new Error(a.INVALID_DECORATOR_OPERATION)}(t),f(c.TAGGED,e,n.toString(),r)}function d(e,t,n){if(void 0!==e.prototype)throw new Error(a.INVALID_DECORATOR_OPERATION);f(c.TAGGED_PROP,e.constructor,t,n)}function f(e,t,n,r){const i=function(e){let t=[];if(Array.isArray(e)){t=e;const n=(0,u.getFirstArrayDuplicate)(t.map((e=>e.key)));if(void 0!==n)throw new Error(`${a.DUPLICATED_METADATA} ${n.toString()}`)}else t=[e];return t}(r);let o={};Reflect.hasOwnMetadata(e,t)&&(o=Reflect.getMetadata(e,t));let s=o[n];if(void 0===s)s=[];else for(const e of s)if(i.some((t=>t.key===e.key)))throw new Error(`${a.DUPLICATED_METADATA} ${e.key.toString()}`);s.push(...i),o[n]=s,Reflect.defineMetadata(e,o,t)}function h(e,t){Reflect.decorate(e,t)}function p(e,t){return function(n,r){t(n,r,e)}}},8028:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.inject=void 0;const a=s(n(3811)),c=(0,n(5550).injectBase)(a.INJECT_TAG);t.inject=c},5550:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.injectBase=function(e){return t=>(n,s,a)=>{if(void 0===t){const e="function"==typeof n?n.name:n.constructor.name;throw new Error((0,r.UNDEFINED_INJECT_ANNOTATION)(e))}(0,o.createTaggedDecorator)(new i.Metadata(e,t))(n,s,a)}};const r=n(8836),i=n(2328),o=n(2326)},6896:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.injectable=function(){return function(e){if(Reflect.hasOwnMetadata(c.PARAM_TYPES,e))throw new Error(a.DUPLICATED_INJECTABLE_DECORATOR);const t=Reflect.getMetadata(c.DESIGN_PARAM_TYPES,e)||[];return Reflect.defineMetadata(c.PARAM_TYPES,t,e),e}};const a=s(n(8836)),c=s(n(3811))},6598:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.multiInject=void 0;const a=s(n(3811)),c=(0,n(5550).injectBase)(a.MULTI_INJECT_TAG);t.multiInject=c},9676:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.named=function(e){return(0,u.createTaggedDecorator)(new c.Metadata(a.NAMED_TAG,e))};const a=s(n(3811)),c=n(2328),u=n(2326)},2933:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.optional=function(){return(0,u.createTaggedDecorator)(new c.Metadata(a.OPTIONAL_TAG,!0))};const a=s(n(3811)),c=n(2328),u=n(2326)},2585:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.postConstruct=void 0;const a=s(n(8836)),c=s(n(3811)),u=(0,n(3289).propertyEventDecorator)(c.POST_CONSTRUCT,a.MULTIPLE_POST_CONSTRUCT_METHODS);t.postConstruct=u},8353:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.preDestroy=void 0;const a=s(n(8836)),c=s(n(3811)),u=(0,n(3289).propertyEventDecorator)(c.PRE_DESTROY,a.MULTIPLE_PRE_DESTROY_METHODS);t.preDestroy=u},3289:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.propertyEventDecorator=function(e,t){return()=>(n,i)=>{const o=new r.Metadata(e,i);if(Reflect.hasOwnMetadata(e,n.constructor))throw new Error(t);Reflect.defineMetadata(e,o,n.constructor)}};const r=n(2328)},2985:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tagged=function(e,t){return(0,i.createTaggedDecorator)(new r.Metadata(e,t))};const r=n(2328),i=n(2326)},3972:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.targetName=function(e){return function(t,n,r){const i=new c.Metadata(a.NAME_TAG,e);(0,u.tagParameter)(t,n,r,i)}};const a=s(n(3811)),c=n(2328),u=n(2326)},8213:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.unmanaged=function(){return function(e,t,n){const r=new c.Metadata(a.UNMANAGED_TAG,!0);(0,u.tagParameter)(e,t,n,r)}};const a=s(n(3811)),c=n(2328),u=n(2326)},8071:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Binding=void 0;const r=n(4592),i=n(6732);class o{id;moduleId;activated;serviceIdentifier;implementationType;cache;dynamicValue;scope;type;factory;provider;constraint;onActivation;onDeactivation;constructor(e,t){this.id=(0,i.id)(),this.activated=!1,this.serviceIdentifier=e,this.scope=t,this.type=r.BindingTypeEnum.Invalid,this.constraint=e=>!0,this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.onDeactivation=null,this.dynamicValue=null}clone(){const e=new o(this.serviceIdentifier,this.scope);return e.activated=e.scope===r.BindingScopeEnum.Singleton&&this.activated,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.onDeactivation=this.onDeactivation,e.cache=this.cache,e}}t.Binding=o},3379:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.BindingCount=void 0,function(e){e[e.MultipleBindingsAvailable=2]="MultipleBindingsAvailable",e[e.NoBindingsAvailable=0]="NoBindingsAvailable",e[e.OnlyOneBindingAvailable=1]="OnlyOneBindingAvailable"}(n||(t.BindingCount=n={}))},8836:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STACK_OVERFLOW=t.CIRCULAR_DEPENDENCY_IN_FACTORY=t.ON_DEACTIVATION_ERROR=t.PRE_DESTROY_ERROR=t.POST_CONSTRUCT_ERROR=t.ASYNC_UNBIND_REQUIRED=t.MULTIPLE_POST_CONSTRUCT_METHODS=t.MULTIPLE_PRE_DESTROY_METHODS=t.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=t.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=t.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=t.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=t.ARGUMENTS_LENGTH_MISMATCH=t.INVALID_DECORATOR_OPERATION=t.INVALID_TO_SELF_VALUE=t.LAZY_IN_SYNC=t.INVALID_FUNCTION_BINDING=t.INVALID_MIDDLEWARE_RETURN=t.NO_MORE_SNAPSHOTS_AVAILABLE=t.INVALID_BINDING_TYPE=t.CIRCULAR_DEPENDENCY=t.UNDEFINED_INJECT_ANNOTATION=t.TRYING_TO_RESOLVE_BINDINGS=t.NOT_REGISTERED=t.CANNOT_UNBIND=t.AMBIGUOUS_MATCH=t.KEY_NOT_FOUND=t.NULL_ARGUMENT=t.DUPLICATED_METADATA=t.DUPLICATED_INJECTABLE_DECORATOR=void 0,t.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",t.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",t.NULL_ARGUMENT="NULL argument",t.KEY_NOT_FOUND="Key Not Found",t.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",t.CANNOT_UNBIND="Could not unbind serviceIdentifier:",t.NOT_REGISTERED="No matching bindings found for serviceIdentifier:";t.TRYING_TO_RESOLVE_BINDINGS=e=>`Trying to resolve bindings for "${e}"`;t.UNDEFINED_INJECT_ANNOTATION=e=>`@inject called with undefined this could mean that the class ${e} has a circular dependency problem. You can use a LazyServiceIdentifer to overcome this limitation.`,t.CIRCULAR_DEPENDENCY="Circular dependency found:",t.INVALID_BINDING_TYPE="Invalid binding type:",t.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",t.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",t.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!";t.LAZY_IN_SYNC=e=>`You are attempting to construct ${function(e){if("function"==typeof e)return`[function/class ${e.name||"<anonymous>"}]`;if("symbol"==typeof e)return e.toString();return`'${e}'`}(e)} in a synchronous way but it has asynchronous dependencies.`,t.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",t.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";t.ARGUMENTS_LENGTH_MISMATCH=e=>`The number of constructor arguments in the derived class ${e} must be >= than the number of constructor arguments of its base class.`,t.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",t.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE='Invalid Container option. Default scope must be a string ("singleton" or "transient").',t.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",t.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",t.MULTIPLE_PRE_DESTROY_METHODS="Cannot apply @preDestroy decorator multiple times in the same class",t.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",t.ASYNC_UNBIND_REQUIRED="Attempting to unbind dependency with asynchronous destruction (@preDestroy or onDeactivation)";t.POST_CONSTRUCT_ERROR=(e,t)=>`@postConstruct error in class ${e}: ${t}`;t.PRE_DESTROY_ERROR=(e,t)=>`@preDestroy error in class ${e}: ${t}`;t.ON_DEACTIVATION_ERROR=(e,t)=>`onDeactivation() error in class ${e}: ${t}`;t.CIRCULAR_DEPENDENCY_IN_FACTORY=(e,t)=>`It looks like there is a circular dependency in one of the '${e}' bindings. Please investigate bindings with service identifier '${t}'.`,t.STACK_OVERFLOW="Maximum call stack size exceeded"},4592:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TargetTypeEnum=t.BindingTypeEnum=t.BindingScopeEnum=void 0;t.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"};t.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};t.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}},3811:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NON_CUSTOM_TAG_KEYS=t.PRE_DESTROY=t.POST_CONSTRUCT=t.DESIGN_PARAM_TYPES=t.PARAM_TYPES=t.TAGGED_PROP=t.TAGGED=t.MULTI_INJECT_TAG=t.INJECT_TAG=t.OPTIONAL_TAG=t.UNMANAGED_TAG=t.NAME_TAG=t.NAMED_TAG=void 0,t.NAMED_TAG="named",t.NAME_TAG="name",t.UNMANAGED_TAG="unmanaged",t.OPTIONAL_TAG="optional",t.INJECT_TAG="inject",t.MULTI_INJECT_TAG="multi_inject",t.TAGGED="inversify:tagged",t.TAGGED_PROP="inversify:tagged_props",t.PARAM_TYPES="inversify:paramtypes",t.DESIGN_PARAM_TYPES="design:paramtypes",t.POST_CONSTRUCT="post_construct",t.PRE_DESTROY="pre_destroy",t.NON_CUSTOM_TAG_KEYS=[t.INJECT_TAG,t.MULTI_INJECT_TAG,t.NAME_TAG,t.UNMANAGED_TAG,t.NAMED_TAG,t.OPTIONAL_TAG]},3976:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.Container=void 0;const a=n(8071),c=s(n(8836)),u=n(4592),l=s(n(3811)),d=n(1956),f=n(6773),h=n(2814),p=n(5176),g=n(9001),_=n(6732),m=n(4737),v=n(5831),y=n(5429),b=n(3352);class E{id;parent;options;_middleware;_bindingDictionary;_activations;_deactivations;_snapshots;_metadataReader;_moduleActivationStore;constructor(e){const t=e||{};if("object"!=typeof t)throw new Error(c.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===t.defaultScope)t.defaultScope=u.BindingScopeEnum.Transient;else if(t.defaultScope!==u.BindingScopeEnum.Singleton&&t.defaultScope!==u.BindingScopeEnum.Transient&&t.defaultScope!==u.BindingScopeEnum.Request)throw new Error(c.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===t.autoBindInjectable)t.autoBindInjectable=!1;else if("boolean"!=typeof t.autoBindInjectable)throw new Error(c.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===t.skipBaseClassChecks)t.skipBaseClassChecks=!1;else if("boolean"!=typeof t.skipBaseClassChecks)throw new Error(c.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:t.autoBindInjectable,defaultScope:t.defaultScope,skipBaseClassChecks:t.skipBaseClassChecks},this.id=(0,_.id)(),this._bindingDictionary=new y.Lookup,this._snapshots=[],this._middleware=null,this._activations=new y.Lookup,this._deactivations=new y.Lookup,this.parent=null,this._metadataReader=new d.MetadataReader,this._moduleActivationStore=new b.ModuleActivationStore}static merge(e,t,...n){const r=new E,i=[e,t,...n].map((e=>(0,f.getBindingDictionary)(e))),o=(0,f.getBindingDictionary)(r);return i.forEach((e=>{var t;t=o,e.traverse(((e,n)=>{n.forEach((e=>{t.add(e.serviceIdentifier,e.clone())}))}))})),r}load(...e){const t=this._getContainerModuleHelpersFactory();for(const n of e){const e=t(n.id);n.registry(e.bindFunction,e.unbindFunction,e.isboundFunction,e.rebindFunction,e.unbindAsyncFunction,e.onActivationFunction,e.onDeactivationFunction)}}async loadAsync(...e){const t=this._getContainerModuleHelpersFactory();for(const n of e){const e=t(n.id);await n.registry(e.bindFunction,e.unbindFunction,e.isboundFunction,e.rebindFunction,e.unbindAsyncFunction,e.onActivationFunction,e.onDeactivationFunction)}}unload(...e){e.forEach((e=>{const t=this._removeModuleBindings(e.id);this._deactivateSingletons(t),this._removeModuleHandlers(e.id)}))}async unloadAsync(...e){for(const t of e){const e=this._removeModuleBindings(t.id);await this._deactivateSingletonsAsync(e),this._removeModuleHandlers(t.id)}}bind(e){return this._bind(this._buildBinding(e))}rebind(e){return this.unbind(e),this.bind(e)}async rebindAsync(e){return await this.unbindAsync(e),this.bind(e)}unbind(e){if(this._bindingDictionary.hasKey(e)){const t=this._bindingDictionary.get(e);this._deactivateSingletons(t)}this._removeServiceFromDictionary(e)}async unbindAsync(e){if(this._bindingDictionary.hasKey(e)){const t=this._bindingDictionary.get(e);await this._deactivateSingletonsAsync(t)}this._removeServiceFromDictionary(e)}unbindAll(){this._bindingDictionary.traverse(((e,t)=>{this._deactivateSingletons(t)})),this._bindingDictionary=new y.Lookup}async unbindAllAsync(){const e=[];this._bindingDictionary.traverse(((t,n)=>{e.push(this._deactivateSingletonsAsync(n))})),await Promise.all(e),this._bindingDictionary=new y.Lookup}onActivation(e,t){this._activations.add(e,t)}onDeactivation(e,t){this._deactivations.add(e,t)}isBound(e){let t=this._bindingDictionary.hasKey(e);return!t&&this.parent&&(t=this.parent.isBound(e)),t}isCurrentBound(e){return this._bindingDictionary.hasKey(e)}isBoundNamed(e,t){return this.isBoundTagged(e,l.NAMED_TAG,t)}isBoundTagged(e,t,n){let r=!1;if(this._bindingDictionary.hasKey(e)){const i=this._bindingDictionary.get(e),o=(0,f.createMockRequest)(this,e,{customTag:{key:t,value:n},isMultiInject:!1});r=i.some((e=>e.constraint(o)))}return!r&&this.parent&&(r=this.parent.isBoundTagged(e,t,n)),r}snapshot(){this._snapshots.push(v.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware,this._activations.clone(),this._deactivations.clone(),this._moduleActivationStore.clone()))}restore(){const e=this._snapshots.pop();if(void 0===e)throw new Error(c.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=e.bindings,this._activations=e.activations,this._deactivations=e.deactivations,this._middleware=e.middleware,this._moduleActivationStore=e.moduleActivationStore}createChild(e){const t=new E(e||this.options);return t.parent=this,t}applyMiddleware(...e){const t=this._middleware?this._middleware:this._planAndResolve();this._middleware=e.reduce(((e,t)=>t(e)),t)}applyCustomMetadataReader(e){this._metadataReader=e}get(e){const t=this._getNotAllArgs(e,!1,!1);return this._getButThrowIfAsync(t)}async getAsync(e){const t=this._getNotAllArgs(e,!1,!1);return this._get(t)}getTagged(e,t,n){const r=this._getNotAllArgs(e,!1,!1,t,n);return this._getButThrowIfAsync(r)}async getTaggedAsync(e,t,n){const r=this._getNotAllArgs(e,!1,!1,t,n);return this._get(r)}getNamed(e,t){return this.getTagged(e,l.NAMED_TAG,t)}async getNamedAsync(e,t){return this.getTaggedAsync(e,l.NAMED_TAG,t)}getAll(e,t){const n=this._getAllArgs(e,t,!1);return this._getButThrowIfAsync(n)}async getAllAsync(e,t){const n=this._getAllArgs(e,t,!1);return this._getAll(n)}getAllTagged(e,t,n){const r=this._getNotAllArgs(e,!0,!1,t,n);return this._getButThrowIfAsync(r)}async getAllTaggedAsync(e,t,n){const r=this._getNotAllArgs(e,!0,!1,t,n);return this._getAll(r)}getAllNamed(e,t){return this.getAllTagged(e,l.NAMED_TAG,t)}async getAllNamedAsync(e,t){return this.getAllTaggedAsync(e,l.NAMED_TAG,t)}resolve(e){const t=this.isBound(e);t||this.bind(e).toSelf();const n=this.get(e);return t||this.unbind(e),n}tryGet(e){const t=this._getNotAllArgs(e,!1,!0);return this._getButThrowIfAsync(t)}async tryGetAsync(e){const t=this._getNotAllArgs(e,!1,!0);return this._get(t)}tryGetTagged(e,t,n){const r=this._getNotAllArgs(e,!1,!0,t,n);return this._getButThrowIfAsync(r)}async tryGetTaggedAsync(e,t,n){const r=this._getNotAllArgs(e,!1,!0,t,n);return this._get(r)}tryGetNamed(e,t){return this.tryGetTagged(e,l.NAMED_TAG,t)}async tryGetNamedAsync(e,t){return this.tryGetTaggedAsync(e,l.NAMED_TAG,t)}tryGetAll(e,t){const n=this._getAllArgs(e,t,!0);return this._getButThrowIfAsync(n)}async tryGetAllAsync(e,t){const n=this._getAllArgs(e,t,!0);return this._getAll(n)}tryGetAllTagged(e,t,n){const r=this._getNotAllArgs(e,!0,!0,t,n);return this._getButThrowIfAsync(r)}async tryGetAllTaggedAsync(e,t,n){const r=this._getNotAllArgs(e,!0,!0,t,n);return this._getAll(r)}tryGetAllNamed(e,t){return this.tryGetAllTagged(e,l.NAMED_TAG,t)}async tryGetAllNamedAsync(e,t){return this.tryGetAllTaggedAsync(e,l.NAMED_TAG,t)}_preDestroy(e,t){if(void 0!==e&&Reflect.hasMetadata(l.PRE_DESTROY,e)){const n=Reflect.getMetadata(l.PRE_DESTROY,e);return t[n.value]?.()}}_removeModuleHandlers(e){const t=this._moduleActivationStore.remove(e);this._activations.removeIntersection(t.onActivations),this._deactivations.removeIntersection(t.onDeactivations)}_removeModuleBindings(e){return this._bindingDictionary.removeByCondition((t=>t.moduleId===e))}_deactivate(e,t){const n=null==t?void 0:Object.getPrototypeOf(t).constructor;try{if(this._deactivations.hasKey(e.serviceIdentifier)){const r=this._deactivateContainer(t,this._deactivations.get(e.serviceIdentifier).values());if((0,g.isPromise)(r))return this._handleDeactivationError(r.then((async()=>this._propagateContainerDeactivationThenBindingAndPreDestroyAsync(e,t,n))),e.serviceIdentifier)}const r=this._propagateContainerDeactivationThenBindingAndPreDestroy(e,t,n);if((0,g.isPromise)(r))return this._handleDeactivationError(r,e.serviceIdentifier)}catch(t){if(t instanceof Error)throw new Error(c.ON_DEACTIVATION_ERROR((0,m.getServiceIdentifierAsString)(e.serviceIdentifier),t.message))}}async _handleDeactivationError(e,t){try{await e}catch(e){if(e instanceof Error)throw new Error(c.ON_DEACTIVATION_ERROR((0,m.getServiceIdentifierAsString)(t),e.message))}}_deactivateContainer(e,t){let n=t.next();for(;"function"==typeof n.value;){const r=n.value(e);if((0,g.isPromise)(r))return r.then((async()=>this._deactivateContainerAsync(e,t)));n=t.next()}}async _deactivateContainerAsync(e,t){let n=t.next();for(;"function"==typeof n.value;)await n.value(e),n=t.next()}_getContainerModuleHelpersFactory(){const e=e=>t=>{const n=this._buildBinding(t);return n.moduleId=e,this._bind(n)},t=()=>e=>{this.unbind(e)},n=()=>async e=>this.unbindAsync(e),r=()=>e=>this.isBound(e),i=t=>{const n=e(t);return e=>(this.unbind(e),n(e))},o=e=>(t,n)=>{this._moduleActivationStore.addActivation(e,t,n),this.onActivation(t,n)},s=e=>(t,n)=>{this._moduleActivationStore.addDeactivation(e,t,n),this.onDeactivation(t,n)};return a=>({bindFunction:e(a),isboundFunction:r(),onActivationFunction:o(a),onDeactivationFunction:s(a),rebindFunction:i(a),unbindAsyncFunction:n(),unbindFunction:t()})}_bind(e){return this._bindingDictionary.add(e.serviceIdentifier,e),new p.BindingToSyntax(e)}_buildBinding(e){const t=this.options.defaultScope||u.BindingScopeEnum.Transient;return new a.Binding(e,t)}async _getAll(e){return Promise.all(this._get(e))}_get(e){const t={...e,contextInterceptor:e=>e,targetType:u.TargetTypeEnum.Variable};if(this._middleware){const e=this._middleware(t);if(null==e)throw new Error(c.INVALID_MIDDLEWARE_RETURN);return e}return this._planAndResolve()(t)}_getButThrowIfAsync(e){const t=this._get(e);if((0,g.isPromiseOrContainsPromise)(t))throw new Error(c.LAZY_IN_SYNC(e.serviceIdentifier));return t}_getAllArgs(e,t,n){return{avoidConstraints:!t?.enforceBindingConstraints,isMultiInject:!0,isOptional:n,serviceIdentifier:e}}_getNotAllArgs(e,t,n,r,i){return{avoidConstraints:!1,isMultiInject:t,isOptional:n,key:r,serviceIdentifier:e,value:i}}_getPlanMetadataFromNextArgs(e){const t={isMultiInject:e.isMultiInject};return void 0!==e.key&&(t.customTag={key:e.key,value:e.value}),!0===e.isOptional&&(t.isOptional=!0),t}_planAndResolve(){return e=>{let t=(0,f.plan)(this._metadataReader,this,e.targetType,e.serviceIdentifier,this._getPlanMetadataFromNextArgs(e),e.avoidConstraints);t=e.contextInterceptor(t);return(0,h.resolve)(t)}}_deactivateIfSingleton(e){if(e.activated)return(0,g.isPromise)(e.cache)?e.cache.then((t=>this._deactivate(e,t))):this._deactivate(e,e.cache)}_deactivateSingletons(e){for(const t of e){const e=this._deactivateIfSingleton(t);if((0,g.isPromise)(e))throw new Error(c.ASYNC_UNBIND_REQUIRED)}}async _deactivateSingletonsAsync(e){await Promise.all(e.map((async e=>this._deactivateIfSingleton(e))))}_propagateContainerDeactivationThenBindingAndPreDestroy(e,t,n){return this.parent?this._deactivate.bind(this.parent)(e,t):this._bindingDeactivationAndPreDestroy(e,t,n)}async _propagateContainerDeactivationThenBindingAndPreDestroyAsync(e,t,n){this.parent?await this._deactivate.bind(this.parent)(e,t):await this._bindingDeactivationAndPreDestroyAsync(e,t,n)}_removeServiceFromDictionary(e){try{this._bindingDictionary.remove(e)}catch(t){throw new Error(`${c.CANNOT_UNBIND} ${(0,m.getServiceIdentifierAsString)(e)}`)}}_bindingDeactivationAndPreDestroy(e,t,n){if("function"==typeof e.onDeactivation){const r=e.onDeactivation(t);if((0,g.isPromise)(r))return r.then((()=>this._preDestroy(n,t)))}return this._preDestroy(n,t)}async _bindingDeactivationAndPreDestroyAsync(e,t,n){"function"==typeof e.onDeactivation&&await e.onDeactivation(t),await this._preDestroy(n,t)}}t.Container=E},1587:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncContainerModule=t.ContainerModule=void 0;const r=n(6732);t.ContainerModule=class{id;registry;constructor(e){this.id=(0,r.id)(),this.registry=e}};t.AsyncContainerModule=class{id;registry;constructor(e){this.id=(0,r.id)(),this.registry=e}}},5831:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContainerSnapshot=void 0;class n{bindings;activations;deactivations;middleware;moduleActivationStore;static of(e,t,r,i,o){const s=new n;return s.bindings=e,s.middleware=t,s.deactivations=i,s.activations=r,s.moduleActivationStore=o,s}}t.ContainerSnapshot=n},5429:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.Lookup=void 0;const a=s(n(8836)),c=n(9183);class u{_map;constructor(){this._map=new Map}getMap(){return this._map}add(e,t){if(this._checkNonNulish(e),null==t)throw new Error(a.NULL_ARGUMENT);const n=this._map.get(e);void 0!==n?n.push(t):this._map.set(e,[t])}get(e){this._checkNonNulish(e);const t=this._map.get(e);if(void 0!==t)return t;throw new Error(a.KEY_NOT_FOUND)}remove(e){if(this._checkNonNulish(e),!this._map.delete(e))throw new Error(a.KEY_NOT_FOUND)}removeIntersection(e){this.traverse(((t,n)=>{const r=e.hasKey(t)?e.get(t):void 0;if(void 0!==r){const e=n.filter((e=>!r.some((t=>e===t))));this._setValue(t,e)}}))}removeByCondition(e){const t=[];return this._map.forEach(((n,r)=>{const i=[];for(const r of n){e(r)?t.push(r):i.push(r)}this._setValue(r,i)})),t}hasKey(e){return this._checkNonNulish(e),this._map.has(e)}clone(){const e=new u;return this._map.forEach(((t,n)=>{t.forEach((t=>{e.add(n,(0,c.isClonable)(t)?t.clone():t)}))})),e}traverse(e){this._map.forEach(((t,n)=>{e(n,t)}))}_checkNonNulish(e){if(null==e)throw new Error(a.NULL_ARGUMENT)}_setValue(e,t){t.length>0?this._map.set(e,t):this._map.delete(e)}}t.Lookup=u},3352:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleActivationStore=void 0;const r=n(5429);class i{_map=new Map;remove(e){const t=this._map.get(e);return void 0===t?this._getEmptyHandlersStore():(this._map.delete(e),t)}addDeactivation(e,t,n){this._getModuleActivationHandlers(e).onDeactivations.add(t,n)}addActivation(e,t,n){this._getModuleActivationHandlers(e).onActivations.add(t,n)}clone(){const e=new i;return this._map.forEach(((t,n)=>{e._map.set(n,{onActivations:t.onActivations.clone(),onDeactivations:t.onDeactivations.clone()})})),e}_getModuleActivationHandlers(e){let t=this._map.get(e);return void 0===t&&(t=this._getEmptyHandlersStore(),this._map.set(e,t)),t}_getEmptyHandlersStore(){return{onActivations:new r.Lookup,onDeactivations:new r.Lookup}}}t.ModuleActivationStore=i},2479:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.multiBindToService=t.getServiceIdentifierAsString=t.typeConstraint=t.namedConstraint=t.taggedConstraint=t.traverseAncerstors=t.decorate=t.id=t.MetadataReader=t.preDestroy=t.postConstruct=t.targetName=t.multiInject=t.unmanaged=t.optional=t.inject=t.named=t.tagged=t.injectable=t.createTaggedDecorator=t.ContainerModule=t.AsyncContainerModule=t.TargetTypeEnum=t.BindingTypeEnum=t.BindingScopeEnum=t.Container=t.METADATA_KEY=t.LazyServiceIdentifer=t.LazyServiceIdentifier=void 0,n(7331);const a=n(2441),c=s(n(3811));var u=n(2441);Object.defineProperty(t,"LazyServiceIdentifier",{enumerable:!0,get:function(){return u.LazyServiceIdentifier}}),t.LazyServiceIdentifer=a.LazyServiceIdentifier,t.METADATA_KEY=c;var l=n(3976);Object.defineProperty(t,"Container",{enumerable:!0,get:function(){return l.Container}});var d=n(4592);Object.defineProperty(t,"BindingScopeEnum",{enumerable:!0,get:function(){return d.BindingScopeEnum}}),Object.defineProperty(t,"BindingTypeEnum",{enumerable:!0,get:function(){return d.BindingTypeEnum}}),Object.defineProperty(t,"TargetTypeEnum",{enumerable:!0,get:function(){return d.TargetTypeEnum}});var f=n(1587);Object.defineProperty(t,"AsyncContainerModule",{enumerable:!0,get:function(){return f.AsyncContainerModule}}),Object.defineProperty(t,"ContainerModule",{enumerable:!0,get:function(){return f.ContainerModule}});var h=n(2326);Object.defineProperty(t,"createTaggedDecorator",{enumerable:!0,get:function(){return h.createTaggedDecorator}});var p=n(6896);Object.defineProperty(t,"injectable",{enumerable:!0,get:function(){return p.injectable}});var g=n(2985);Object.defineProperty(t,"tagged",{enumerable:!0,get:function(){return g.tagged}});var _=n(9676);Object.defineProperty(t,"named",{enumerable:!0,get:function(){return _.named}});var m=n(8028);Object.defineProperty(t,"inject",{enumerable:!0,get:function(){return m.inject}});var v=n(2933);Object.defineProperty(t,"optional",{enumerable:!0,get:function(){return v.optional}});var y=n(8213);Object.defineProperty(t,"unmanaged",{enumerable:!0,get:function(){return y.unmanaged}});var b=n(6598);Object.defineProperty(t,"multiInject",{enumerable:!0,get:function(){return b.multiInject}});var E=n(3972);Object.defineProperty(t,"targetName",{enumerable:!0,get:function(){return E.targetName}});var w=n(2585);Object.defineProperty(t,"postConstruct",{enumerable:!0,get:function(){return w.postConstruct}});var S=n(8353);Object.defineProperty(t,"preDestroy",{enumerable:!0,get:function(){return S.preDestroy}});var T=n(1956);Object.defineProperty(t,"MetadataReader",{enumerable:!0,get:function(){return T.MetadataReader}});var C=n(6732);Object.defineProperty(t,"id",{enumerable:!0,get:function(){return C.id}});var O=n(2326);Object.defineProperty(t,"decorate",{enumerable:!0,get:function(){return O.decorate}});var A=n(4290);Object.defineProperty(t,"traverseAncerstors",{enumerable:!0,get:function(){return A.traverseAncerstors}}),Object.defineProperty(t,"taggedConstraint",{enumerable:!0,get:function(){return A.taggedConstraint}}),Object.defineProperty(t,"namedConstraint",{enumerable:!0,get:function(){return A.namedConstraint}}),Object.defineProperty(t,"typeConstraint",{enumerable:!0,get:function(){return A.typeConstraint}});var I=n(4737);Object.defineProperty(t,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return I.getServiceIdentifierAsString}});var R=n(2254);Object.defineProperty(t,"multiBindToService",{enumerable:!0,get:function(){return R.multiBindToService}})},5538:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Context=void 0;const r=n(6732);t.Context=class{id;container;plan;currentRequest;constructor(e){this.id=(0,r.id)(),this.container=e}addPlan(e){this.plan=e}setCurrentRequest(e){this.currentRequest=e}}},2328:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;const a=s(n(3811));t.Metadata=class{key;value;constructor(e,t){this.key=e,this.value=t}toString(){return this.key===a.NAMED_TAG?`named: ${String(this.value).toString()} `:`tagged: { key:${this.key.toString()}, value: ${String(this.value)} }`}}},1956:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.MetadataReader=void 0;const a=s(n(3811));t.MetadataReader=class{getConstructorMetadata(e){return{compilerGeneratedMetadata:Reflect.getMetadata(a.DESIGN_PARAM_TYPES,e)??[],userGeneratedMetadata:Reflect.getMetadata(a.TAGGED,e)??{}}}getPropertiesMetadata(e){return Reflect.getMetadata(a.TAGGED_PROP,e)??{}}}},8118:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Plan=void 0;t.Plan=class{parentContext;rootRequest;constructor(e,t){this.parentContext=e,this.rootRequest=t}}},6773:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.getBindingDictionary=y,t.plan=function(e,t,n,r,i,o=!1){const s=new p.Context(t),c=function(e,t,n){const r=E(t,n),i=(0,a.getClassElementMetadataFromLegacyMetadata)(r);if(i.kind===a.ClassElementMetadataKind.unmanaged)throw new Error("Unexpected metadata when creating target");const o=new a.LegacyTargetImpl("",i,e);return o}(n,r,i);try{return w(e,o,r,s,null,c),s}catch(e){throw(0,f.isStackOverflowException)(e)&&(0,h.circularDependencyToException)(s.plan.rootRequest),e}},t.createMockRequest=function(e,t,n){const r=E(t,n),i=(0,a.getClassElementMetadataFromLegacyMetadata)(r);if(i.kind===a.ClassElementMetadataKind.unmanaged)throw new Error("Unexpected metadata when creating target");const o=new a.LegacyTargetImpl("",i,"Variable"),s=new p.Context(e);return new v.Request(t,s,null,[],o)};const a=n(5719),c=n(3379),u=s(n(8836)),l=n(4592),d=s(n(3811)),f=n(4135),h=n(4737),p=n(5538),g=n(2328),_=n(8118),m=n(7502),v=n(5648);function y(e){return e._bindingDictionary}function b(e,t,n,r,i){let o=S(n.container,i.serviceIdentifier),s=[];return o.length===c.BindingCount.NoBindingsAvailable&&!0===n.container.options.autoBindInjectable&&"function"==typeof i.serviceIdentifier&&e.getConstructorMetadata(i.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(i.serviceIdentifier).toSelf(),o=S(n.container,i.serviceIdentifier)),s=t?o:o.filter((e=>{const t=new v.Request(e.serviceIdentifier,n,r,e,i);return e.constraint(t)})),function(e,t,n,r,i){switch(t.length){case c.BindingCount.NoBindingsAvailable:if(r.isOptional())return t;{const t=(0,h.getServiceIdentifierAsString)(e);let o=u.NOT_REGISTERED;throw o+=(0,h.listMetadataForTarget)(t,r),o+=(0,h.listRegisteredBindingsForServiceIdentifier)(i,t,S),null!==n&&(o+=`\n${u.TRYING_TO_RESOLVE_BINDINGS((0,h.getServiceIdentifierAsString)(n.serviceIdentifier))}`),new Error(o)}case c.BindingCount.OnlyOneBindingAvailable:return t;case c.BindingCount.MultipleBindingsAvailable:default:if(r.isArray())return t;{const t=(0,h.getServiceIdentifierAsString)(e);let n=`${u.AMBIGUOUS_MATCH} ${t}`;throw n+=(0,h.listRegisteredBindingsForServiceIdentifier)(i,t,S),new Error(n)}}}(i.serviceIdentifier,s,r,i,n.container),s}function E(e,t){const n=t.isMultiInject?d.MULTI_INJECT_TAG:d.INJECT_TAG,r=[new g.Metadata(n,e)];return void 0!==t.customTag&&r.push(new g.Metadata(t.customTag.key,t.customTag.value)),!0===t.isOptional&&r.push(new g.Metadata(d.OPTIONAL_TAG,!0)),r}function w(e,t,n,r,i,o){let s,a;if(null===i){s=b(e,t,r,null,o),a=new v.Request(n,r,null,s,o);const i=new _.Plan(r,a);r.addPlan(i)}else s=b(e,t,r,i,o),a=i.addChildRequest(o.serviceIdentifier,s,o);s.forEach((t=>{let n=null;if(o.isArray())n=a.addChildRequest(t.serviceIdentifier,t,o);else{if(null!==t.cache)return;n=a}if(t.type===l.BindingTypeEnum.Instance&&null!==t.implementationType){const i=(0,m.getDependencies)(e,t.implementationType);if(!0!==r.container.options.skipBaseClassChecks){const n=(0,m.getBaseClassDependencyCount)(e,t.implementationType);if(i.length<n){const e=u.ARGUMENTS_LENGTH_MISMATCH((0,m.getFunctionName)(t.implementationType));throw new Error(e)}}i.forEach((t=>{w(e,!1,t.serviceIdentifier,r,n,t)}))}}))}function S(e,t){let n=[];const r=y(e);return r.hasKey(t)?n=r.get(t):null!==e.parent&&(n=S(e.parent,t)),n}},7502:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.getFunctionName=void 0,t.getDependencies=function(e,t){return(0,a.getTargets)(e)(t)},t.getBaseClassDependencyCount=function e(t,n){const r=(0,u.getBaseType)(n);if(void 0===r||r===Object)return 0;const i=(0,a.getTargets)(t)(r),o=i.map((e=>e.metadata.filter((e=>e.key===c.UNMANAGED_TAG)))),s=[].concat.apply([],o).length,l=i.length-s;return l>0?l:e(t,r)};const a=n(5719),c=s(n(3811)),u=n(1936),l=n(4737);Object.defineProperty(t,"getFunctionName",{enumerable:!0,get:function(){return l.getFunctionName}})},5648:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Request=void 0;const r=n(6732);class i{id;serviceIdentifier;parentContext;parentRequest;bindings;childRequests;target;requestScope;constructor(e,t,n,i,o){this.id=(0,r.id)(),this.serviceIdentifier=e,this.parentContext=t,this.parentRequest=n,this.target=o,this.childRequests=[],this.bindings=Array.isArray(i)?i:[i],this.requestScope=null===n?new Map:null}addChildRequest(e,t,n){const r=new i(e,this.parentContext,this,t,n);return this.childRequests.push(r),r}}t.Request=i},4599:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.resolveInstance=function(e,t,n,r){!function(e,t){e.scope!==c.BindingScopeEnum.Singleton&&function(e,t){const n=`Class cannot be instantiated in ${e.scope===c.BindingScopeEnum.Request?"request":"transient"} scope.`;if("function"==typeof e.onDeactivation)throw new Error((0,a.ON_DEACTIVATION_ERROR)(t.name,n));if(Reflect.hasMetadata(u.PRE_DESTROY,t))throw new Error((0,a.PRE_DESTROY_ERROR)(t.name,n))}(e,t)}(e,t);const i=function(e,t,n){let r;if(t.length>0){const i=function(e,t){return e.reduce(((e,n)=>{const r=t(n);return n.target.type===c.TargetTypeEnum.ConstructorArgument?e.constructorInjections.push(r):(e.propertyRequests.push(n),e.propertyInjections.push(r)),e.isAsync||(e.isAsync=(0,l.isPromiseOrContainsPromise)(r)),e}),{constructorInjections:[],isAsync:!1,propertyInjections:[],propertyRequests:[]})}(t,n),o={...i,constr:e};r=i.isAsync?async function(e){const t=await f(e.constructorInjections),n=await f(e.propertyInjections);return d({...e,constructorInjections:t,propertyInjections:n})}(o):d(o)}else r=new e;return r}(t,n,r);return(0,l.isPromise)(i)?i.then((e=>h(t,e))):h(t,i)};const a=n(8836),c=n(4592),u=s(n(3811)),l=n(9001);function d(e){const t=new e.constr(...e.constructorInjections);return e.propertyRequests.forEach(((n,r)=>{const i=n.target.identifier,o=e.propertyInjections[r];n.target.isOptional()&&void 0===o||(t[i]=o)})),t}async function f(e){const t=[];for(const n of e)Array.isArray(n)?t.push(Promise.all(n)):t.push(n);return Promise.all(t)}function h(e,t){const n=function(e,t){if(Reflect.hasMetadata(u.POST_CONSTRUCT,e)){const n=Reflect.getMetadata(u.POST_CONSTRUCT,e);try{return t[n.value]?.()}catch(t){if(t instanceof Error)throw new Error((0,a.POST_CONSTRUCT_ERROR)(e.name,t.message))}}}(e,t);return(0,l.isPromise)(n)?n.then((()=>t)):t}},2814:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.resolve=function(e){return g(e.plan.rootRequest.requestScope)(e.plan.rootRequest)};const a=s(n(8836)),c=n(4592),u=n(6773),l=n(1432),d=n(9001),f=n(2254),h=n(4135),p=n(4599),g=e=>t=>{t.parentContext.setCurrentRequest(t);const n=t.bindings,r=t.childRequests,i=t.target&&t.target.isArray(),o=!(t.parentRequest&&t.parentRequest.target&&t.target&&t.parentRequest.target.matchesArray(t.target.serviceIdentifier));if(i&&o)return r.map((t=>g(e)(t)));{if(t.target.isOptional()&&0===n.length)return;const r=n[0];return m(e,t,r)}},_=(e,t,n)=>{let r;const i=t.childRequests;switch((0,f.ensureFullyBound)(n),n.type){case c.BindingTypeEnum.ConstantValue:case c.BindingTypeEnum.Function:r=n.cache;break;case c.BindingTypeEnum.Constructor:r=n.implementationType;break;case c.BindingTypeEnum.Instance:r=(0,p.resolveInstance)(n,n.implementationType,i,g(e));break;default:r=((e,t)=>{const n=(0,f.getFactoryDetails)(e);return(0,h.tryAndThrowErrorIfStackOverflow)((()=>n.factory.bind(e)(t)),(()=>new Error(a.CIRCULAR_DEPENDENCY_IN_FACTORY(n.factoryType,t.currentRequest.serviceIdentifier.toString()))))})(n,t.parentContext)}return r},m=(e,t,n)=>((e,t,n)=>{let r=(0,l.tryGetFromScope)(e,t);return null!==r||(r=n(),(0,l.saveToScope)(e,t,r)),r})(e,n,(()=>{let r=_(e,t,n);return r=(0,d.isPromise)(r)?r.then((e=>v(t,n,e))):v(t,n,r),r}));function v(e,t,n){let r=y(e.parentContext,t,n);const i=S(e.parentContext.container);let o,s=i.next();do{o=s.value;const t=e.parentContext,n=e.serviceIdentifier,a=w(o,n);r=(0,d.isPromise)(r)?E(a,t,r):b(a,t,r),s=i.next()}while(!0!==s.done&&!(0,u.getBindingDictionary)(o).hasKey(e.serviceIdentifier));return r}const y=(e,t,n)=>{let r;return r="function"==typeof t.onActivation?t.onActivation(e,n):n,r},b=(e,t,n)=>{let r=e.next();for(;!0!==r.done;){if(n=r.value(t,n),(0,d.isPromise)(n))return E(e,t,n);r=e.next()}return n},E=async(e,t,n)=>{let r=await n,i=e.next();for(;!0!==i.done;)r=await i.value(t,r),i=e.next();return r},w=(e,t)=>{const n=e._activations;return n.hasKey(t)?n.get(t).values():[].values()},S=e=>{const t=[e];let n=e.parent;for(;null!==n;)t.push(n),n=n.parent;return{next:()=>{const e=t.pop();return void 0!==e?{done:!1,value:e}:{done:!0,value:void 0}}}}},1432:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.saveToScope=t.tryGetFromScope=void 0;const r=n(4592),i=n(9001);t.tryGetFromScope=(e,t)=>t.scope===r.BindingScopeEnum.Singleton&&t.activated?t.cache:t.scope===r.BindingScopeEnum.Request&&e.has(t.id)?e.get(t.id):null;t.saveToScope=(e,t,n)=>{t.scope===r.BindingScopeEnum.Singleton&&s(t,n),t.scope===r.BindingScopeEnum.Request&&o(e,t,n)};const o=(e,t,n)=>{e.has(t.id)||e.set(t.id,n)},s=(e,t)=>{e.cache=t,e.activated=!0,(0,i.isPromise)(t)&&a(e,t)},a=async(e,t)=>{try{const n=await t;e.cache=n}catch(t){throw e.cache=null,e.activated=!1,t}}},1042:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingInSyntax=void 0;const r=n(4592),i=n(3187);t.BindingInSyntax=class{_binding;constructor(e){this._binding=e}inRequestScope(){return this._binding.scope=r.BindingScopeEnum.Request,new i.BindingWhenOnSyntax(this._binding)}inSingletonScope(){return this._binding.scope=r.BindingScopeEnum.Singleton,new i.BindingWhenOnSyntax(this._binding)}inTransientScope(){return this._binding.scope=r.BindingScopeEnum.Transient,new i.BindingWhenOnSyntax(this._binding)}}},1727:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingInWhenOnSyntax=void 0;const r=n(1042),i=n(2756),o=n(6579);t.BindingInWhenOnSyntax=class{_bindingInSyntax;_bindingWhenSyntax;_bindingOnSyntax;_binding;constructor(e){this._binding=e,this._bindingWhenSyntax=new o.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new i.BindingOnSyntax(this._binding),this._bindingInSyntax=new r.BindingInSyntax(e)}inRequestScope(){return this._bindingInSyntax.inRequestScope()}inSingletonScope(){return this._bindingInSyntax.inSingletonScope()}inTransientScope(){return this._bindingInSyntax.inTransientScope()}when(e){return this._bindingWhenSyntax.when(e)}whenTargetNamed(e){return this._bindingWhenSyntax.whenTargetNamed(e)}whenTargetIsDefault(){return this._bindingWhenSyntax.whenTargetIsDefault()}whenTargetTagged(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)}whenInjectedInto(e){return this._bindingWhenSyntax.whenInjectedInto(e)}whenParentNamed(e){return this._bindingWhenSyntax.whenParentNamed(e)}whenParentTagged(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)}whenAnyAncestorIs(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)}whenNoAncestorIs(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)}whenAnyAncestorNamed(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)}whenAnyAncestorTagged(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)}whenNoAncestorNamed(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)}whenNoAncestorTagged(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)}whenAnyAncestorMatches(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)}whenNoAncestorMatches(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)}onActivation(e){return this._bindingOnSyntax.onActivation(e)}onDeactivation(e){return this._bindingOnSyntax.onDeactivation(e)}}},2756:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingOnSyntax=void 0;const r=n(6579);t.BindingOnSyntax=class{_binding;constructor(e){this._binding=e}onActivation(e){return this._binding.onActivation=e,new r.BindingWhenSyntax(this._binding)}onDeactivation(e){return this._binding.onDeactivation=e,new r.BindingWhenSyntax(this._binding)}}},5176:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.BindingToSyntax=void 0;const a=s(n(8836)),c=n(4592),u=n(1727),l=n(3187);t.BindingToSyntax=class{_binding;constructor(e){this._binding=e}to(e){return this._binding.type=c.BindingTypeEnum.Instance,this._binding.implementationType=e,new u.BindingInWhenOnSyntax(this._binding)}toSelf(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error(a.INVALID_TO_SELF_VALUE);const e=this._binding.serviceIdentifier;return this.to(e)}toConstantValue(e){return this._binding.type=c.BindingTypeEnum.ConstantValue,this._binding.cache=e,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=c.BindingScopeEnum.Singleton,new l.BindingWhenOnSyntax(this._binding)}toDynamicValue(e){return this._binding.type=c.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=e,this._binding.implementationType=null,new u.BindingInWhenOnSyntax(this._binding)}toConstructor(e){return this._binding.type=c.BindingTypeEnum.Constructor,this._binding.implementationType=e,this._binding.scope=c.BindingScopeEnum.Singleton,new l.BindingWhenOnSyntax(this._binding)}toFactory(e){return this._binding.type=c.BindingTypeEnum.Factory,this._binding.factory=e,this._binding.scope=c.BindingScopeEnum.Singleton,new l.BindingWhenOnSyntax(this._binding)}toFunction(e){if("function"!=typeof e)throw new Error(a.INVALID_FUNCTION_BINDING);const t=this.toConstantValue(e);return this._binding.type=c.BindingTypeEnum.Function,this._binding.scope=c.BindingScopeEnum.Singleton,t}toAutoFactory(e){return this._binding.type=c.BindingTypeEnum.Factory,this._binding.factory=t=>()=>t.container.get(e),this._binding.scope=c.BindingScopeEnum.Singleton,new l.BindingWhenOnSyntax(this._binding)}toAutoNamedFactory(e){return this._binding.type=c.BindingTypeEnum.Factory,this._binding.factory=t=>n=>t.container.getNamed(e,n),new l.BindingWhenOnSyntax(this._binding)}toProvider(e){return this._binding.type=c.BindingTypeEnum.Provider,this._binding.provider=e,this._binding.scope=c.BindingScopeEnum.Singleton,new l.BindingWhenOnSyntax(this._binding)}toService(e){this._binding.type=c.BindingTypeEnum.DynamicValue,Object.defineProperty(this._binding,"cache",{configurable:!0,enumerable:!0,get:()=>null,set(e){}}),this._binding.dynamicValue=t=>{try{return t.container.get(e)}catch(n){return t.container.getAsync(e)}},this._binding.implementationType=null}}},3187:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingWhenOnSyntax=void 0;const r=n(2756),i=n(6579);t.BindingWhenOnSyntax=class{_bindingWhenSyntax;_bindingOnSyntax;_binding;constructor(e){this._binding=e,this._bindingWhenSyntax=new i.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new r.BindingOnSyntax(this._binding)}when(e){return this._bindingWhenSyntax.when(e)}whenTargetNamed(e){return this._bindingWhenSyntax.whenTargetNamed(e)}whenTargetIsDefault(){return this._bindingWhenSyntax.whenTargetIsDefault()}whenTargetTagged(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)}whenInjectedInto(e){return this._bindingWhenSyntax.whenInjectedInto(e)}whenParentNamed(e){return this._bindingWhenSyntax.whenParentNamed(e)}whenParentTagged(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)}whenAnyAncestorIs(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)}whenNoAncestorIs(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)}whenAnyAncestorNamed(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)}whenAnyAncestorTagged(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)}whenNoAncestorNamed(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)}whenNoAncestorTagged(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)}whenAnyAncestorMatches(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)}whenNoAncestorMatches(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)}onActivation(e){return this._bindingOnSyntax.onActivation(e)}onDeactivation(e){return this._bindingOnSyntax.onDeactivation(e)}}},6579:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingWhenSyntax=void 0;const r=n(2756),i=n(4290);t.BindingWhenSyntax=class{_binding;constructor(e){this._binding=e}when(e){return this._binding.constraint=e,new r.BindingOnSyntax(this._binding)}whenTargetNamed(e){return this._binding.constraint=(0,i.namedConstraint)(e),new r.BindingOnSyntax(this._binding)}whenTargetIsDefault(){return this._binding.constraint=e=>{if(null===e)return!1;return null!==e.target&&!e.target.isNamed()&&!e.target.isTagged()},new r.BindingOnSyntax(this._binding)}whenTargetTagged(e,t){return this._binding.constraint=(0,i.taggedConstraint)(e)(t),new r.BindingOnSyntax(this._binding)}whenInjectedInto(e){return this._binding.constraint=t=>null!==t&&(0,i.typeConstraint)(e)(t.parentRequest),new r.BindingOnSyntax(this._binding)}whenParentNamed(e){return this._binding.constraint=t=>null!==t&&(0,i.namedConstraint)(e)(t.parentRequest),new r.BindingOnSyntax(this._binding)}whenParentTagged(e,t){return this._binding.constraint=n=>null!==n&&(0,i.taggedConstraint)(e)(t)(n.parentRequest),new r.BindingOnSyntax(this._binding)}whenAnyAncestorIs(e){return this._binding.constraint=t=>null!==t&&(0,i.traverseAncerstors)(t,(0,i.typeConstraint)(e)),new r.BindingOnSyntax(this._binding)}whenNoAncestorIs(e){return this._binding.constraint=t=>null!==t&&!(0,i.traverseAncerstors)(t,(0,i.typeConstraint)(e)),new r.BindingOnSyntax(this._binding)}whenAnyAncestorNamed(e){return this._binding.constraint=t=>null!==t&&(0,i.traverseAncerstors)(t,(0,i.namedConstraint)(e)),new r.BindingOnSyntax(this._binding)}whenNoAncestorNamed(e){return this._binding.constraint=t=>null!==t&&!(0,i.traverseAncerstors)(t,(0,i.namedConstraint)(e)),new r.BindingOnSyntax(this._binding)}whenAnyAncestorTagged(e,t){return this._binding.constraint=n=>null!==n&&(0,i.traverseAncerstors)(n,(0,i.taggedConstraint)(e)(t)),new r.BindingOnSyntax(this._binding)}whenNoAncestorTagged(e,t){return this._binding.constraint=n=>null!==n&&!(0,i.traverseAncerstors)(n,(0,i.taggedConstraint)(e)(t)),new r.BindingOnSyntax(this._binding)}whenAnyAncestorMatches(e){return this._binding.constraint=t=>null!==t&&(0,i.traverseAncerstors)(t,e),new r.BindingOnSyntax(this._binding)}whenNoAncestorMatches(e){return this._binding.constraint=t=>null!==t&&!(0,i.traverseAncerstors)(t,e),new r.BindingOnSyntax(this._binding)}}},4290:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.typeConstraint=t.namedConstraint=t.taggedConstraint=t.traverseAncerstors=void 0;const a=s(n(3811)),c=n(2328),u=(e,t)=>{const n=e.parentRequest;return null!==n&&(!!t(n)||u(n,t))};t.traverseAncerstors=u;const l=e=>t=>{const n=n=>null!==n&&null!==n.target&&n.target.matchesTag(e)(t);return n.metaData=new c.Metadata(e,t),n};t.taggedConstraint=l;const d=l(a.NAMED_TAG);t.namedConstraint=d;t.typeConstraint=e=>t=>{let n=null;if(null!==t){if(n=t.bindings[0],"string"==typeof e)return n.serviceIdentifier===e;{const n=t.bindings[0].implementationType;return e===n}}return!1}},9001:(e,t)=>{"use strict";function n(e){return("object"==typeof e&&null!==e||"function"==typeof e)&&"function"==typeof e.then}Object.defineProperty(t,"__esModule",{value:!0}),t.isPromise=n,t.isPromiseOrContainsPromise=function(e){if(n(e))return!0;return Array.isArray(e)&&e.some(n)}},2254:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.getFactoryDetails=t.ensureFullyBound=t.multiBindToService=void 0;const a=s(n(8836)),c=n(4592),u=n(4737),l=n(6250);t.multiBindToService=e=>t=>(...n)=>{n.forEach((n=>{e.bind(n).toService(t)}))};t.ensureFullyBound=e=>{let t=null;switch(e.type){case c.BindingTypeEnum.ConstantValue:case c.BindingTypeEnum.Function:t=e.cache;break;case c.BindingTypeEnum.Constructor:case c.BindingTypeEnum.Instance:t=e.implementationType;break;case c.BindingTypeEnum.DynamicValue:t=e.dynamicValue;break;case c.BindingTypeEnum.Provider:t=e.provider;break;case c.BindingTypeEnum.Factory:t=e.factory}if(null===t){const t=(0,u.getServiceIdentifierAsString)(e.serviceIdentifier);throw new Error(`${a.INVALID_BINDING_TYPE} ${t}`)}};t.getFactoryDetails=e=>{switch(e.type){case c.BindingTypeEnum.Factory:return{factory:e.factory,factoryType:l.FactoryType.Factory};case c.BindingTypeEnum.Provider:return{factory:e.provider,factoryType:l.FactoryType.Provider};case c.BindingTypeEnum.DynamicValue:return{factory:e.dynamicValue,factoryType:l.FactoryType.DynamicValue};default:throw new Error(`Unexpected factory type ${e.type}`)}}},9183:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isClonable=function(e){return"object"==typeof e&&null!==e&&"clone"in e&&"function"==typeof e.clone}},4135:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.tryAndThrowErrorIfStackOverflow=void 0,t.isStackOverflowException=c;const a=s(n(8836));function c(e){return e instanceof RangeError||e.message===a.STACK_OVERFLOW}t.tryAndThrowErrorIfStackOverflow=(e,t)=>{try{return e()}catch(e){if(c(e))throw t();throw e}}},6250:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.FactoryType=void 0,function(e){e.DynamicValue="toDynamicValue",e.Factory="toFactory",e.Provider="toProvider"}(n||(t.FactoryType=n={}))},1936:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBaseType=function(e){const t=Object.getPrototypeOf(e.prototype),n=t?.constructor;return n}},6732:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.id=function(){return n++};let n=0},5426:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFirstArrayDuplicate=function(e){const t=new Set;for(const n of e){if(t.has(n))return n;t.add(n)}return}},4737:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.getFunctionName=l,t.getServiceIdentifierAsString=c,t.listRegisteredBindingsForServiceIdentifier=function(e,t,n){let r="";const i=n(e,t);0!==i.length&&(r="\nRegistered bindings:",i.forEach((e=>{let t="Object";null!==e.implementationType&&(t=l(e.implementationType)),r=`${r}\n ${t}`,e.constraint.metaData&&(r=`${r} - ${e.constraint.metaData}`)})));return r},t.listMetadataForTarget=function(e,t){if(t.isTagged()||t.isNamed()){let n="";const r=t.getNamedTag(),i=t.getCustomTags();return null!==r&&(n+=d(r)+"\n"),null!==i&&i.forEach((e=>{n+=d(e)+"\n"})),` ${e}\n ${e} - ${n}`}return` ${e}`},t.circularDependencyToException=function e(t){t.childRequests.forEach((n=>{if(u(t,n.serviceIdentifier)){const e=function(e){function t(e,n=[]){const r=c(e.serviceIdentifier);return n.push(r),null!==e.parentRequest?t(e.parentRequest,n):n}const n=t(e);return n.reverse().join(" --\x3e ")}(n);throw new Error(`${a.CIRCULAR_DEPENDENCY} ${e}`)}e(n)}))},t.getSymbolDescription=function(e){return e.toString().slice(7,-1)};const a=s(n(8836));function c(e){return"function"==typeof e?e.name:"symbol"==typeof e?e.toString():e}function u(e,t){return null!==e.parentRequest&&(e.parentRequest.serviceIdentifier===t||u(e.parentRequest,t))}function l(e){if(null!=e.name&&""!==e.name)return e.name;{const t=e.toString(),n=t.match(/^function\s*([^\s(]+)/);return null===n?`Anonymous function: ${t}`:n[1]}}function d(e){return`{"key":"${e.key.toString()}","value":"${e.value.toString()}"}`}},6584:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCache=void 0;const n="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,r=new Set,i="object"==typeof process&&process?process:{},o=(e,t,n,r)=>{"function"==typeof i.emitWarning&&i.emitWarning(e,t,n,r)};let s=globalThis.AbortController,a=globalThis.AbortSignal;if(void 0===s){a=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(e,t){this._onabort.push(t)}},s=class{constructor(){t()}signal=new a;abort(e){if(!this.signal.aborted){this.signal.reason=e,this.signal.aborted=!0;for(const t of this.signal._onabort)t(e);this.signal.onabort?.(e)}}};let e="1"!==i.env?.LRU_CACHE_IGNORE_AC_WARNING;const t=()=>{e&&(e=!1,o("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}Symbol("type");const c=e=>e&&e===Math.floor(e)&&e>0&&isFinite(e),u=e=>c(e)?e<=Math.pow(2,8)?Uint8Array:e<=Math.pow(2,16)?Uint16Array:e<=Math.pow(2,32)?Uint32Array:e<=Number.MAX_SAFE_INTEGER?l:null:null;class l extends Array{constructor(e){super(e),this.fill(0)}}class d{heap;length;static#c=!1;static create(e){const t=u(e);if(!t)return[];d.#c=!0;const n=new d(e,t);return d.#c=!1,n}constructor(e,t){if(!d.#c)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}}class f{#u;#l;#d;#f;#h;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#p;#g;#_;#m;#v;#y;#b;#E;#w;#S;#T;#C;#O;#A;#I;#R;#D;static unsafeExposeInternals(e){return{starts:e.#O,ttls:e.#A,sizes:e.#C,keyMap:e.#_,keyList:e.#m,valList:e.#v,next:e.#y,prev:e.#b,get head(){return e.#E},get tail(){return e.#w},free:e.#S,isBackgroundFetch:t=>e.#x(t),backgroundFetch:(t,n,r,i)=>e.#M(t,n,r,i),moveToTail:t=>e.#P(t),indexes:t=>e.#N(t),rindexes:t=>e.#k(t),isStale:t=>e.#L(t)}}get max(){return this.#u}get maxSize(){return this.#l}get calculatedSize(){return this.#g}get size(){return this.#p}get fetchMethod(){return this.#h}get dispose(){return this.#d}get disposeAfter(){return this.#f}constructor(e){const{max:t=0,ttl:n,ttlResolution:i=1,ttlAutopurge:s,updateAgeOnGet:a,updateAgeOnHas:l,allowStale:h,dispose:p,disposeAfter:g,noDisposeOnSet:_,noUpdateTTL:m,maxSize:v=0,maxEntrySize:y=0,sizeCalculation:b,fetchMethod:E,noDeleteOnFetchRejection:w,noDeleteOnStaleGet:S,allowStaleOnFetchRejection:T,allowStaleOnFetchAbort:C,ignoreFetchAbort:O}=e;if(0!==t&&!c(t))throw new TypeError("max option must be a nonnegative integer");const A=t?u(t):Array;if(!A)throw new Error("invalid max value: "+t);if(this.#u=t,this.#l=v,this.maxEntrySize=y||this.#l,this.sizeCalculation=b,this.sizeCalculation){if(!this.#l&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if("function"!=typeof this.sizeCalculation)throw new TypeError("sizeCalculation set to non-function")}if(void 0!==E&&"function"!=typeof E)throw new TypeError("fetchMethod must be a function if specified");if(this.#h=E,this.#R=!!E,this.#_=new Map,this.#m=new Array(t).fill(void 0),this.#v=new Array(t).fill(void 0),this.#y=new A(t),this.#b=new A(t),this.#E=0,this.#w=0,this.#S=d.create(t),this.#p=0,this.#g=0,"function"==typeof p&&(this.#d=p),"function"==typeof g?(this.#f=g,this.#T=[]):(this.#f=void 0,this.#T=void 0),this.#I=!!this.#d,this.#D=!!this.#f,this.noDisposeOnSet=!!_,this.noUpdateTTL=!!m,this.noDeleteOnFetchRejection=!!w,this.allowStaleOnFetchRejection=!!T,this.allowStaleOnFetchAbort=!!C,this.ignoreFetchAbort=!!O,0!==this.maxEntrySize){if(0!==this.#l&&!c(this.#l))throw new TypeError("maxSize must be a positive integer if specified");if(!c(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#j()}if(this.allowStale=!!h,this.noDeleteOnStaleGet=!!S,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!l,this.ttlResolution=c(i)||0===i?i:1,this.ttlAutopurge=!!s,this.ttl=n||0,this.ttl){if(!c(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#z()}if(0===this.#u&&0===this.ttl&&0===this.#l)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#u&&!this.#l){const e="LRU_CACHE_UNBOUNDED";if((e=>!r.has(e))(e)){r.add(e);o("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",e,f)}}}getRemainingTTL(e){return this.#_.has(e)?1/0:0}#z(){const e=new l(this.#u),t=new l(this.#u);this.#A=e,this.#O=t,this.#F=(r,i,o=n.now())=>{if(t[r]=0!==i?o:0,e[r]=i,0!==i&&this.ttlAutopurge){const e=setTimeout((()=>{this.#L(r)&&this.delete(this.#m[r])}),i+1);e.unref&&e.unref()}},this.#B=r=>{t[r]=0!==e[r]?n.now():0},this.#U=(n,o)=>{if(e[o]){const s=e[o],a=t[o];if(!s||!a)return;n.ttl=s,n.start=a,n.now=r||i();const c=n.now-a;n.remainingTTL=s-c}};let r=0;const i=()=>{const e=n.now();if(this.ttlResolution>0){r=e;const t=setTimeout((()=>r=0),this.ttlResolution);t.unref&&t.unref()}return e};this.getRemainingTTL=n=>{const o=this.#_.get(n);if(void 0===o)return 0;const s=e[o],a=t[o];if(!s||!a)return 1/0;return s-((r||i())-a)},this.#L=n=>{const o=t[n],s=e[n];return!!s&&!!o&&(r||i())-o>s}}#B=()=>{};#U=()=>{};#F=()=>{};#L=()=>!1;#j(){const e=new l(this.#u);this.#g=0,this.#C=e,this.#G=t=>{this.#g-=e[t],e[t]=0},this.#q=(e,t,n,r)=>{if(this.#x(t))return 0;if(!c(n)){if(!r)throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");if("function"!=typeof r)throw new TypeError("sizeCalculation must be a function");if(n=r(t,e),!c(n))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}return n},this.#V=(t,n,r)=>{if(e[t]=n,this.#l){const n=this.#l-e[t];for(;this.#g>n;)this.#$(!0)}this.#g+=e[t],r&&(r.entrySize=n,r.totalCalculatedSize=this.#g)}}#G=e=>{};#V=(e,t,n)=>{};#q=(e,t,n,r)=>{if(n||r)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#N({allowStale:e=this.allowStale}={}){if(this.#p)for(let t=this.#w;this.#H(t)&&(!e&&this.#L(t)||(yield t),t!==this.#E);)t=this.#b[t]}*#k({allowStale:e=this.allowStale}={}){if(this.#p)for(let t=this.#E;this.#H(t)&&(!e&&this.#L(t)||(yield t),t!==this.#w);)t=this.#y[t]}#H(e){return void 0!==e&&this.#_.get(this.#m[e])===e}*entries(){for(const e of this.#N())void 0===this.#v[e]||void 0===this.#m[e]||this.#x(this.#v[e])||(yield[this.#m[e],this.#v[e]])}*rentries(){for(const e of this.#k())void 0===this.#v[e]||void 0===this.#m[e]||this.#x(this.#v[e])||(yield[this.#m[e],this.#v[e]])}*keys(){for(const e of this.#N()){const t=this.#m[e];void 0===t||this.#x(this.#v[e])||(yield t)}}*rkeys(){for(const e of this.#k()){const t=this.#m[e];void 0===t||this.#x(this.#v[e])||(yield t)}}*values(){for(const e of this.#N()){void 0===this.#v[e]||this.#x(this.#v[e])||(yield this.#v[e])}}*rvalues(){for(const e of this.#k()){void 0===this.#v[e]||this.#x(this.#v[e])||(yield this.#v[e])}}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,t={}){for(const n of this.#N()){const r=this.#v[n],i=this.#x(r)?r.__staleWhileFetching:r;if(void 0!==i&&e(i,this.#m[n],this))return this.get(this.#m[n],t)}}forEach(e,t=this){for(const n of this.#N()){const r=this.#v[n],i=this.#x(r)?r.__staleWhileFetching:r;void 0!==i&&e.call(t,i,this.#m[n],this)}}rforEach(e,t=this){for(const n of this.#k()){const r=this.#v[n],i=this.#x(r)?r.__staleWhileFetching:r;void 0!==i&&e.call(t,i,this.#m[n],this)}}purgeStale(){let e=!1;for(const t of this.#k({allowStale:!0}))this.#L(t)&&(this.delete(this.#m[t]),e=!0);return e}info(e){const t=this.#_.get(e);if(void 0===t)return;const r=this.#v[t],i=this.#x(r)?r.__staleWhileFetching:r;if(void 0===i)return;const o={value:i};if(this.#A&&this.#O){const e=this.#A[t],r=this.#O[t];if(e&&r){const t=e-(n.now()-r);o.ttl=t,o.start=Date.now()}}return this.#C&&(o.size=this.#C[t]),o}dump(){const e=[];for(const t of this.#N({allowStale:!0})){const r=this.#m[t],i=this.#v[t],o=this.#x(i)?i.__staleWhileFetching:i;if(void 0===o||void 0===r)continue;const s={value:o};if(this.#A&&this.#O){s.ttl=this.#A[t];const e=n.now()-this.#O[t];s.start=Math.floor(Date.now()-e)}this.#C&&(s.size=this.#C[t]),e.unshift([r,s])}return e}load(e){this.clear();for(const[t,r]of e){if(r.start){const e=Date.now()-r.start;r.start=n.now()-e}this.set(t,r.value,r)}}set(e,t,n={}){if(void 0===t)return this.delete(e),this;const{ttl:r=this.ttl,start:i,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:s=this.sizeCalculation,status:a}=n;let{noUpdateTTL:c=this.noUpdateTTL}=n;const u=this.#q(e,t,n.size||0,s);if(this.maxEntrySize&&u>this.maxEntrySize)return a&&(a.set="miss",a.maxEntrySizeExceeded=!0),this.delete(e),this;let l=0===this.#p?void 0:this.#_.get(e);if(void 0===l)l=0===this.#p?this.#w:0!==this.#S.length?this.#S.pop():this.#p===this.#u?this.#$(!1):this.#p,this.#m[l]=e,this.#v[l]=t,this.#_.set(e,l),this.#y[this.#w]=l,this.#b[l]=this.#w,this.#w=l,this.#p++,this.#V(l,u,a),a&&(a.set="add"),c=!1;else{this.#P(l);const n=this.#v[l];if(t!==n){if(this.#R&&this.#x(n)){n.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:t}=n;void 0===t||o||(this.#I&&this.#d?.(t,e,"set"),this.#D&&this.#T?.push([t,e,"set"]))}else o||(this.#I&&this.#d?.(n,e,"set"),this.#D&&this.#T?.push([n,e,"set"]));if(this.#G(l),this.#V(l,u,a),this.#v[l]=t,a){a.set="replace";const e=n&&this.#x(n)?n.__staleWhileFetching:n;void 0!==e&&(a.oldValue=e)}}else a&&(a.set="update")}if(0===r||this.#A||this.#z(),this.#A&&(c||this.#F(l,r,i),a&&this.#U(a,l)),!o&&this.#D&&this.#T){const e=this.#T;let t;for(;t=e?.shift();)this.#f?.(...t)}return this}pop(){try{for(;this.#p;){const e=this.#v[this.#E];if(this.#$(!0),this.#x(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(void 0!==e)return e}}finally{if(this.#D&&this.#T){const e=this.#T;let t;for(;t=e?.shift();)this.#f?.(...t)}}}#$(e){const t=this.#E,n=this.#m[t],r=this.#v[t];return this.#R&&this.#x(r)?r.__abortController.abort(new Error("evicted")):(this.#I||this.#D)&&(this.#I&&this.#d?.(r,n,"evict"),this.#D&&this.#T?.push([r,n,"evict"])),this.#G(t),e&&(this.#m[t]=void 0,this.#v[t]=void 0,this.#S.push(t)),1===this.#p?(this.#E=this.#w=0,this.#S.length=0):this.#E=this.#y[t],this.#_.delete(n),this.#p--,t}has(e,t={}){const{updateAgeOnHas:n=this.updateAgeOnHas,status:r}=t,i=this.#_.get(e);if(void 0!==i){const e=this.#v[i];if(this.#x(e)&&void 0===e.__staleWhileFetching)return!1;if(!this.#L(i))return n&&this.#B(i),r&&(r.has="hit",this.#U(r,i)),!0;r&&(r.has="stale",this.#U(r,i))}else r&&(r.has="miss");return!1}peek(e,t={}){const{allowStale:n=this.allowStale}=t,r=this.#_.get(e);if(void 0===r||!n&&this.#L(r))return;const i=this.#v[r];return this.#x(i)?i.__staleWhileFetching:i}#M(e,t,n,r){const i=void 0===t?void 0:this.#v[t];if(this.#x(i))return i;const o=new s,{signal:a}=n;a?.addEventListener("abort",(()=>o.abort(a.reason)),{signal:o.signal});const c={signal:o.signal,options:n,context:r},u=(r,i=!1)=>{const{aborted:s}=o.signal,a=n.ignoreFetchAbort&&void 0!==r;if(n.status&&(s&&!i?(n.status.fetchAborted=!0,n.status.fetchError=o.signal.reason,a&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),s&&!a&&!i)return l(o.signal.reason);const u=d;return this.#v[t]===d&&(void 0===r?u.__staleWhileFetching?this.#v[t]=u.__staleWhileFetching:this.delete(e):(n.status&&(n.status.fetchUpdated=!0),this.set(e,r,c.options))),r},l=r=>{const{aborted:i}=o.signal,s=i&&n.allowStaleOnFetchAbort,a=s||n.allowStaleOnFetchRejection,c=a||n.noDeleteOnFetchRejection,u=d;if(this.#v[t]===d){!c||void 0===u.__staleWhileFetching?this.delete(e):s||(this.#v[t]=u.__staleWhileFetching)}if(a)return n.status&&void 0!==u.__staleWhileFetching&&(n.status.returnedStale=!0),u.__staleWhileFetching;if(u.__returned===u)throw r};n.status&&(n.status.fetchDispatched=!0);const d=new Promise(((t,r)=>{const s=this.#h?.(e,i,c);s&&s instanceof Promise&&s.then((e=>t(void 0===e?void 0:e)),r),o.signal.addEventListener("abort",(()=>{n.ignoreFetchAbort&&!n.allowStaleOnFetchAbort||(t(void 0),n.allowStaleOnFetchAbort&&(t=e=>u(e,!0)))}))})).then(u,(e=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=e),l(e)))),f=Object.assign(d,{__abortController:o,__staleWhileFetching:i,__returned:void 0});return void 0===t?(this.set(e,f,{...c.options,status:void 0}),t=this.#_.get(e)):this.#v[t]=f,f}#x(e){if(!this.#R)return!1;const t=e;return!!t&&t instanceof Promise&&t.hasOwnProperty("__staleWhileFetching")&&t.__abortController instanceof s}async fetch(e,t={}){const{allowStale:n=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:s=this.noDisposeOnSet,size:a=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:l=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:d=this.allowStaleOnFetchRejection,ignoreFetchAbort:f=this.ignoreFetchAbort,allowStaleOnFetchAbort:h=this.allowStaleOnFetchAbort,context:p,forceRefresh:g=!1,status:_,signal:m}=t;if(!this.#R)return _&&(_.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:r,noDeleteOnStaleGet:i,status:_});const v={allowStale:n,updateAgeOnGet:r,noDeleteOnStaleGet:i,ttl:o,noDisposeOnSet:s,size:a,sizeCalculation:c,noUpdateTTL:u,noDeleteOnFetchRejection:l,allowStaleOnFetchRejection:d,allowStaleOnFetchAbort:h,ignoreFetchAbort:f,status:_,signal:m};let y=this.#_.get(e);if(void 0===y){_&&(_.fetch="miss");const t=this.#M(e,y,v,p);return t.__returned=t}{const t=this.#v[y];if(this.#x(t)){const e=n&&void 0!==t.__staleWhileFetching;return _&&(_.fetch="inflight",e&&(_.returnedStale=!0)),e?t.__staleWhileFetching:t.__returned=t}const i=this.#L(y);if(!g&&!i)return _&&(_.fetch="hit"),this.#P(y),r&&this.#B(y),_&&this.#U(_,y),t;const o=this.#M(e,y,v,p),s=void 0!==o.__staleWhileFetching&&n;return _&&(_.fetch=i?"stale":"refresh",s&&i&&(_.returnedStale=!0)),s?o.__staleWhileFetching:o.__returned=o}}get(e,t={}){const{allowStale:n=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,status:o}=t,s=this.#_.get(e);if(void 0!==s){const t=this.#v[s],a=this.#x(t);return o&&this.#U(o,s),this.#L(s)?(o&&(o.get="stale"),a?(o&&n&&void 0!==t.__staleWhileFetching&&(o.returnedStale=!0),n?t.__staleWhileFetching:void 0):(i||this.delete(e),o&&n&&(o.returnedStale=!0),n?t:void 0)):(o&&(o.get="hit"),a?t.__staleWhileFetching:(this.#P(s),r&&this.#B(s),t))}o&&(o.get="miss")}#W(e,t){this.#b[t]=e,this.#y[e]=t}#P(e){e!==this.#w&&(e===this.#E?this.#E=this.#y[e]:this.#W(this.#b[e],this.#y[e]),this.#W(this.#w,e),this.#w=e)}delete(e){let t=!1;if(0!==this.#p){const n=this.#_.get(e);if(void 0!==n)if(t=!0,1===this.#p)this.clear();else{this.#G(n);const t=this.#v[n];if(this.#x(t)?t.__abortController.abort(new Error("deleted")):(this.#I||this.#D)&&(this.#I&&this.#d?.(t,e,"delete"),this.#D&&this.#T?.push([t,e,"delete"])),this.#_.delete(e),this.#m[n]=void 0,this.#v[n]=void 0,n===this.#w)this.#w=this.#b[n];else if(n===this.#E)this.#E=this.#y[n];else{const e=this.#b[n];this.#y[e]=this.#y[n];const t=this.#y[n];this.#b[t]=this.#b[n]}this.#p--,this.#S.push(n)}}if(this.#D&&this.#T?.length){const e=this.#T;let t;for(;t=e?.shift();)this.#f?.(...t)}return t}clear(){for(const e of this.#k({allowStale:!0})){const t=this.#v[e];if(this.#x(t))t.__abortController.abort(new Error("deleted"));else{const n=this.#m[e];this.#I&&this.#d?.(t,n,"delete"),this.#D&&this.#T?.push([t,n,"delete"])}}if(this.#_.clear(),this.#v.fill(void 0),this.#m.fill(void 0),this.#A&&this.#O&&(this.#A.fill(0),this.#O.fill(0)),this.#C&&this.#C.fill(0),this.#E=0,this.#w=0,this.#S.length=0,this.#g=0,this.#p=0,this.#D&&this.#T){const e=this.#T;let t;for(;t=e?.shift();)this.#f?.(...t)}}}t.LRUCache=f},9128:(e,t,n)=>{"use strict";var r,i,o,s,a,c,u,l,d,f,h,p,g,_,m,v,y,b,E,w,S,T,C,O,A,I,R,D,x,M,P,N,k,L,j,z,F,B,U,G,q,V,$,H,W,K,J,Y,X,Z,Q,ee,te,ne,re,ie,oe,se,ae,ce,ue,le,de,fe,he,pe,ge,_e,me,ve,ye,be,Ee,we,Se,Te,Ce,Oe;n.r(t),n.d(t,{AnnotatedTextEdit:()=>C,ChangeAnnotation:()=>S,ChangeAnnotationIdentifier:()=>T,CodeAction:()=>oe,CodeActionContext:()=>ie,CodeActionKind:()=>ne,CodeActionTriggerKind:()=>re,CodeDescription:()=>y,CodeLens:()=>se,Color:()=>d,ColorInformation:()=>f,ColorPresentation:()=>h,Command:()=>E,CompletionItem:()=>q,CompletionItemKind:()=>j,CompletionItemLabelDetails:()=>G,CompletionItemTag:()=>F,CompletionList:()=>V,CreateFile:()=>A,DeleteFile:()=>R,Diagnostic:()=>b,DiagnosticRelatedInformation:()=>_,DiagnosticSeverity:()=>m,DiagnosticTag:()=>v,DocumentHighlight:()=>Y,DocumentHighlightKind:()=>J,DocumentLink:()=>ce,DocumentSymbol:()=>te,DocumentUri:()=>r,EOL:()=>De,FoldingRange:()=>g,FoldingRangeKind:()=>p,FormattingOptions:()=>ae,Hover:()=>H,InlayHint:()=>ye,InlayHintKind:()=>me,InlayHintLabelPart:()=>ve,InlineCompletionContext:()=>Ce,InlineCompletionItem:()=>Ee,InlineCompletionList:()=>we,InlineCompletionTriggerKind:()=>Se,InlineValueContext:()=>_e,InlineValueEvaluatableExpression:()=>ge,InlineValueText:()=>he,InlineValueVariableLookup:()=>pe,InsertReplaceEdit:()=>B,InsertTextFormat:()=>z,InsertTextMode:()=>U,Location:()=>u,LocationLink:()=>l,MarkedString:()=>$,MarkupContent:()=>L,MarkupKind:()=>k,OptionalVersionedTextDocumentIdentifier:()=>P,ParameterInformation:()=>W,Position:()=>a,Range:()=>c,RenameFile:()=>I,SelectedCompletionInfo:()=>Te,SelectionRange:()=>ue,SemanticTokenModifiers:()=>de,SemanticTokenTypes:()=>le,SemanticTokens:()=>fe,SignatureInformation:()=>K,StringValue:()=>be,SymbolInformation:()=>Q,SymbolKind:()=>X,SymbolTag:()=>Z,TextDocument:()=>xe,TextDocumentEdit:()=>O,TextDocumentIdentifier:()=>x,TextDocumentItem:()=>N,TextEdit:()=>w,URI:()=>i,VersionedTextDocumentIdentifier:()=>M,WorkspaceChange:()=>Re,WorkspaceEdit:()=>D,WorkspaceFolder:()=>Oe,WorkspaceSymbol:()=>ee,integer:()=>o,uinteger:()=>s}),function(e){e.is=function(e){return"string"==typeof e}}(r||(r={})),function(e){e.is=function(e){return"string"==typeof e}}(i||(i={})),function(e){e.MIN_VALUE=-2147483648,e.MAX_VALUE=2147483647,e.is=function(t){return"number"==typeof t&&e.MIN_VALUE<=t&&t<=e.MAX_VALUE}}(o||(o={})),function(e){e.MIN_VALUE=0,e.MAX_VALUE=2147483647,e.is=function(t){return"number"==typeof t&&e.MIN_VALUE<=t&&t<=e.MAX_VALUE}}(s||(s={})),function(e){e.create=function(e,t){return e===Number.MAX_VALUE&&(e=s.MAX_VALUE),t===Number.MAX_VALUE&&(t=s.MAX_VALUE),{line:e,character:t}},e.is=function(e){let t=e;return Me.objectLiteral(t)&&Me.uinteger(t.line)&&Me.uinteger(t.character)}}(a||(a={})),function(e){e.create=function(e,t,n,r){if(Me.uinteger(e)&&Me.uinteger(t)&&Me.uinteger(n)&&Me.uinteger(r))return{start:a.create(e,t),end:a.create(n,r)};if(a.is(e)&&a.is(t))return{start:e,end:t};throw new Error(`Range#create called with invalid arguments[${e}, ${t}, ${n}, ${r}]`)},e.is=function(e){let t=e;return Me.objectLiteral(t)&&a.is(t.start)&&a.is(t.end)}}(c||(c={})),function(e){e.create=function(e,t){return{uri:e,range:t}},e.is=function(e){let t=e;return Me.objectLiteral(t)&&c.is(t.range)&&(Me.string(t.uri)||Me.undefined(t.uri))}}(u||(u={})),function(e){e.create=function(e,t,n,r){return{targetUri:e,targetRange:t,targetSelectionRange:n,originSelectionRange:r}},e.is=function(e){let t=e;return Me.objectLiteral(t)&&c.is(t.targetRange)&&Me.string(t.targetUri)&&c.is(t.targetSelectionRange)&&(c.is(t.originSelectionRange)||Me.undefined(t.originSelectionRange))}}(l||(l={})),function(e){e.create=function(e,t,n,r){return{red:e,green:t,blue:n,alpha:r}},e.is=function(e){const t=e;return Me.objectLiteral(t)&&Me.numberRange(t.red,0,1)&&Me.numberRange(t.green,0,1)&&Me.numberRange(t.blue,0,1)&&Me.numberRange(t.alpha,0,1)}}(d||(d={})),function(e){e.create=function(e,t){return{range:e,color:t}},e.is=function(e){const t=e;return Me.objectLiteral(t)&&c.is(t.range)&&d.is(t.color)}}(f||(f={})),function(e){e.create=function(e,t,n){return{label:e,textEdit:t,additionalTextEdits:n}},e.is=function(e){const t=e;return Me.objectLiteral(t)&&Me.string(t.label)&&(Me.undefined(t.textEdit)||w.is(t))&&(Me.undefined(t.additionalTextEdits)||Me.typedArray(t.additionalTextEdits,w.is))}}(h||(h={})),function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(p||(p={})),function(e){e.create=function(e,t,n,r,i,o){const s={startLine:e,endLine:t};return Me.defined(n)&&(s.startCharacter=n),Me.defined(r)&&(s.endCharacter=r),Me.defined(i)&&(s.kind=i),Me.defined(o)&&(s.collapsedText=o),s},e.is=function(e){const t=e;return Me.objectLiteral(t)&&Me.uinteger(t.startLine)&&Me.uinteger(t.startLine)&&(Me.undefined(t.startCharacter)||Me.uinteger(t.startCharacter))&&(Me.undefined(t.endCharacter)||Me.uinteger(t.endCharacter))&&(Me.undefined(t.kind)||Me.string(t.kind))}}(g||(g={})),function(e){e.create=function(e,t){return{location:e,message:t}},e.is=function(e){let t=e;return Me.defined(t)&&u.is(t.location)&&Me.string(t.message)}}(_||(_={})),function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4}(m||(m={})),function(e){e.Unnecessary=1,e.Deprecated=2}(v||(v={})),function(e){e.is=function(e){const t=e;return Me.objectLiteral(t)&&Me.string(t.href)}}(y||(y={})),function(e){e.create=function(e,t,n,r,i,o){let s={range:e,message:t};return Me.defined(n)&&(s.severity=n),Me.defined(r)&&(s.code=r),Me.defined(i)&&(s.source=i),Me.defined(o)&&(s.relatedInformation=o),s},e.is=function(e){var t;let n=e;return Me.defined(n)&&c.is(n.range)&&Me.string(n.message)&&(Me.number(n.severity)||Me.undefined(n.severity))&&(Me.integer(n.code)||Me.string(n.code)||Me.undefined(n.code))&&(Me.undefined(n.codeDescription)||Me.string(null===(t=n.codeDescription)||void 0===t?void 0:t.href))&&(Me.string(n.source)||Me.undefined(n.source))&&(Me.undefined(n.relatedInformation)||Me.typedArray(n.relatedInformation,_.is))}}(b||(b={})),function(e){e.create=function(e,t,...n){let r={title:e,command:t};return Me.defined(n)&&n.length>0&&(r.arguments=n),r},e.is=function(e){let t=e;return Me.defined(t)&&Me.string(t.title)&&Me.string(t.command)}}(E||(E={})),function(e){e.replace=function(e,t){return{range:e,newText:t}},e.insert=function(e,t){return{range:{start:e,end:e},newText:t}},e.del=function(e){return{range:e,newText:""}},e.is=function(e){const t=e;return Me.objectLiteral(t)&&Me.string(t.newText)&&c.is(t.range)}}(w||(w={})),function(e){e.create=function(e,t,n){const r={label:e};return void 0!==t&&(r.needsConfirmation=t),void 0!==n&&(r.description=n),r},e.is=function(e){const t=e;return Me.objectLiteral(t)&&Me.string(t.label)&&(Me.boolean(t.needsConfirmation)||void 0===t.needsConfirmation)&&(Me.string(t.description)||void 0===t.description)}}(S||(S={})),function(e){e.is=function(e){const t=e;return Me.string(t)}}(T||(T={})),function(e){e.replace=function(e,t,n){return{range:e,newText:t,annotationId:n}},e.insert=function(e,t,n){return{range:{start:e,end:e},newText:t,annotationId:n}},e.del=function(e,t){return{range:e,newText:"",annotationId:t}},e.is=function(e){const t=e;return w.is(t)&&(S.is(t.annotationId)||T.is(t.annotationId))}}(C||(C={})),function(e){e.create=function(e,t){return{textDocument:e,edits:t}},e.is=function(e){let t=e;return Me.defined(t)&&P.is(t.textDocument)&&Array.isArray(t.edits)}}(O||(O={})),function(e){e.create=function(e,t,n){let r={kind:"create",uri:e};return void 0===t||void 0===t.overwrite&&void 0===t.ignoreIfExists||(r.options=t),void 0!==n&&(r.annotationId=n),r},e.is=function(e){let t=e;return t&&"create"===t.kind&&Me.string(t.uri)&&(void 0===t.options||(void 0===t.options.overwrite||Me.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||Me.boolean(t.options.ignoreIfExists)))&&(void 0===t.annotationId||T.is(t.annotationId))}}(A||(A={})),function(e){e.create=function(e,t,n,r){let i={kind:"rename",oldUri:e,newUri:t};return void 0===n||void 0===n.overwrite&&void 0===n.ignoreIfExists||(i.options=n),void 0!==r&&(i.annotationId=r),i},e.is=function(e){let t=e;return t&&"rename"===t.kind&&Me.string(t.oldUri)&&Me.string(t.newUri)&&(void 0===t.options||(void 0===t.options.overwrite||Me.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||Me.boolean(t.options.ignoreIfExists)))&&(void 0===t.annotationId||T.is(t.annotationId))}}(I||(I={})),function(e){e.create=function(e,t,n){let r={kind:"delete",uri:e};return void 0===t||void 0===t.recursive&&void 0===t.ignoreIfNotExists||(r.options=t),void 0!==n&&(r.annotationId=n),r},e.is=function(e){let t=e;return t&&"delete"===t.kind&&Me.string(t.uri)&&(void 0===t.options||(void 0===t.options.recursive||Me.boolean(t.options.recursive))&&(void 0===t.options.ignoreIfNotExists||Me.boolean(t.options.ignoreIfNotExists)))&&(void 0===t.annotationId||T.is(t.annotationId))}}(R||(R={})),function(e){e.is=function(e){let t=e;return t&&(void 0!==t.changes||void 0!==t.documentChanges)&&(void 0===t.documentChanges||t.documentChanges.every((e=>Me.string(e.kind)?A.is(e)||I.is(e)||R.is(e):O.is(e))))}}(D||(D={}));class Ae{constructor(e,t){this.edits=e,this.changeAnnotations=t}insert(e,t,n){let r,i;if(void 0===n?r=w.insert(e,t):T.is(n)?(i=n,r=C.insert(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=C.insert(e,t,i)),this.edits.push(r),void 0!==i)return i}replace(e,t,n){let r,i;if(void 0===n?r=w.replace(e,t):T.is(n)?(i=n,r=C.replace(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=C.replace(e,t,i)),this.edits.push(r),void 0!==i)return i}delete(e,t){let n,r;if(void 0===t?n=w.del(e):T.is(t)?(r=t,n=C.del(e,t)):(this.assertChangeAnnotations(this.changeAnnotations),r=this.changeAnnotations.manage(t),n=C.del(e,r)),this.edits.push(n),void 0!==r)return r}add(e){this.edits.push(e)}all(){return this.edits}clear(){this.edits.splice(0,this.edits.length)}assertChangeAnnotations(e){if(void 0===e)throw new Error("Text edit change is not configured to manage change annotations.")}}class Ie{constructor(e){this._annotations=void 0===e?Object.create(null):e,this._counter=0,this._size=0}all(){return this._annotations}get size(){return this._size}manage(e,t){let n;if(T.is(e)?n=e:(n=this.nextId(),t=e),void 0!==this._annotations[n])throw new Error(`Id ${n} is already in use.`);if(void 0===t)throw new Error(`No annotation provided for id ${n}`);return this._annotations[n]=t,this._size++,n}nextId(){return this._counter++,this._counter.toString()}}class Re{constructor(e){this._textEditChanges=Object.create(null),void 0!==e?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new Ie(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach((e=>{if(O.is(e)){const t=new Ae(e.edits,this._changeAnnotations);this._textEditChanges[e.textDocument.uri]=t}}))):e.changes&&Object.keys(e.changes).forEach((t=>{const n=new Ae(e.changes[t]);this._textEditChanges[t]=n}))):this._workspaceEdit={}}get edit(){return this.initDocumentChanges(),void 0!==this._changeAnnotations&&(0===this._changeAnnotations.size?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit}getTextEditChange(e){if(P.is(e)){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");const t={uri:e.uri,version:e.version};let n=this._textEditChanges[t.uri];if(!n){const e=[],r={textDocument:t,edits:e};this._workspaceEdit.documentChanges.push(r),n=new Ae(e,this._changeAnnotations),this._textEditChanges[t.uri]=n}return n}{if(this.initChanges(),void 0===this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");let t=this._textEditChanges[e];if(!t){let n=[];this._workspaceEdit.changes[e]=n,t=new Ae(n),this._textEditChanges[e]=t}return t}}initDocumentChanges(){void 0===this._workspaceEdit.documentChanges&&void 0===this._workspaceEdit.changes&&(this._changeAnnotations=new Ie,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())}initChanges(){void 0===this._workspaceEdit.documentChanges&&void 0===this._workspaceEdit.changes&&(this._workspaceEdit.changes=Object.create(null))}createFile(e,t,n){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");let r,i,o;if(S.is(t)||T.is(t)?r=t:n=t,void 0===r?i=A.create(e,n):(o=T.is(r)?r:this._changeAnnotations.manage(r),i=A.create(e,n,o)),this._workspaceEdit.documentChanges.push(i),void 0!==o)return o}renameFile(e,t,n,r){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");let i,o,s;if(S.is(n)||T.is(n)?i=n:r=n,void 0===i?o=I.create(e,t,r):(s=T.is(i)?i:this._changeAnnotations.manage(i),o=I.create(e,t,r,s)),this._workspaceEdit.documentChanges.push(o),void 0!==s)return s}deleteFile(e,t,n){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");let r,i,o;if(S.is(t)||T.is(t)?r=t:n=t,void 0===r?i=R.create(e,n):(o=T.is(r)?r:this._changeAnnotations.manage(r),i=R.create(e,n,o)),this._workspaceEdit.documentChanges.push(i),void 0!==o)return o}}!function(e){e.create=function(e){return{uri:e}},e.is=function(e){let t=e;return Me.defined(t)&&Me.string(t.uri)}}(x||(x={})),function(e){e.create=function(e,t){return{uri:e,version:t}},e.is=function(e){let t=e;return Me.defined(t)&&Me.string(t.uri)&&Me.integer(t.version)}}(M||(M={})),function(e){e.create=function(e,t){return{uri:e,version:t}},e.is=function(e){let t=e;return Me.defined(t)&&Me.string(t.uri)&&(null===t.version||Me.integer(t.version))}}(P||(P={})),function(e){e.create=function(e,t,n,r){return{uri:e,languageId:t,version:n,text:r}},e.is=function(e){let t=e;return Me.defined(t)&&Me.string(t.uri)&&Me.string(t.languageId)&&Me.integer(t.version)&&Me.string(t.text)}}(N||(N={})),function(e){e.PlainText="plaintext",e.Markdown="markdown",e.is=function(t){const n=t;return n===e.PlainText||n===e.Markdown}}(k||(k={})),function(e){e.is=function(e){const t=e;return Me.objectLiteral(e)&&k.is(t.kind)&&Me.string(t.value)}}(L||(L={})),function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25}(j||(j={})),function(e){e.PlainText=1,e.Snippet=2}(z||(z={})),function(e){e.Deprecated=1}(F||(F={})),function(e){e.create=function(e,t,n){return{newText:e,insert:t,replace:n}},e.is=function(e){const t=e;return t&&Me.string(t.newText)&&c.is(t.insert)&&c.is(t.replace)}}(B||(B={})),function(e){e.asIs=1,e.adjustIndentation=2}(U||(U={})),function(e){e.is=function(e){const t=e;return t&&(Me.string(t.detail)||void 0===t.detail)&&(Me.string(t.description)||void 0===t.description)}}(G||(G={})),function(e){e.create=function(e){return{label:e}}}(q||(q={})),function(e){e.create=function(e,t){return{items:e||[],isIncomplete:!!t}}}(V||(V={})),function(e){e.fromPlainText=function(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},e.is=function(e){const t=e;return Me.string(t)||Me.objectLiteral(t)&&Me.string(t.language)&&Me.string(t.value)}}($||($={})),function(e){e.is=function(e){let t=e;return!!t&&Me.objectLiteral(t)&&(L.is(t.contents)||$.is(t.contents)||Me.typedArray(t.contents,$.is))&&(void 0===e.range||c.is(e.range))}}(H||(H={})),function(e){e.create=function(e,t){return t?{label:e,documentation:t}:{label:e}}}(W||(W={})),function(e){e.create=function(e,t,...n){let r={label:e};return Me.defined(t)&&(r.documentation=t),Me.defined(n)?r.parameters=n:r.parameters=[],r}}(K||(K={})),function(e){e.Text=1,e.Read=2,e.Write=3}(J||(J={})),function(e){e.create=function(e,t){let n={range:e};return Me.number(t)&&(n.kind=t),n}}(Y||(Y={})),function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26}(X||(X={})),function(e){e.Deprecated=1}(Z||(Z={})),function(e){e.create=function(e,t,n,r,i){let o={name:e,kind:t,location:{uri:r,range:n}};return i&&(o.containerName=i),o}}(Q||(Q={})),function(e){e.create=function(e,t,n,r){return void 0!==r?{name:e,kind:t,location:{uri:n,range:r}}:{name:e,kind:t,location:{uri:n}}}}(ee||(ee={})),function(e){e.create=function(e,t,n,r,i,o){let s={name:e,detail:t,kind:n,range:r,selectionRange:i};return void 0!==o&&(s.children=o),s},e.is=function(e){let t=e;return t&&Me.string(t.name)&&Me.number(t.kind)&&c.is(t.range)&&c.is(t.selectionRange)&&(void 0===t.detail||Me.string(t.detail))&&(void 0===t.deprecated||Me.boolean(t.deprecated))&&(void 0===t.children||Array.isArray(t.children))&&(void 0===t.tags||Array.isArray(t.tags))}}(te||(te={})),function(e){e.Empty="",e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports",e.SourceFixAll="source.fixAll"}(ne||(ne={})),function(e){e.Invoked=1,e.Automatic=2}(re||(re={})),function(e){e.create=function(e,t,n){let r={diagnostics:e};return null!=t&&(r.only=t),null!=n&&(r.triggerKind=n),r},e.is=function(e){let t=e;return Me.defined(t)&&Me.typedArray(t.diagnostics,b.is)&&(void 0===t.only||Me.typedArray(t.only,Me.string))&&(void 0===t.triggerKind||t.triggerKind===re.Invoked||t.triggerKind===re.Automatic)}}(ie||(ie={})),function(e){e.create=function(e,t,n){let r={title:e},i=!0;return"string"==typeof t?(i=!1,r.kind=t):E.is(t)?r.command=t:r.edit=t,i&&void 0!==n&&(r.kind=n),r},e.is=function(e){let t=e;return t&&Me.string(t.title)&&(void 0===t.diagnostics||Me.typedArray(t.diagnostics,b.is))&&(void 0===t.kind||Me.string(t.kind))&&(void 0!==t.edit||void 0!==t.command)&&(void 0===t.command||E.is(t.command))&&(void 0===t.isPreferred||Me.boolean(t.isPreferred))&&(void 0===t.edit||D.is(t.edit))}}(oe||(oe={})),function(e){e.create=function(e,t){let n={range:e};return Me.defined(t)&&(n.data=t),n},e.is=function(e){let t=e;return Me.defined(t)&&c.is(t.range)&&(Me.undefined(t.command)||E.is(t.command))}}(se||(se={})),function(e){e.create=function(e,t){return{tabSize:e,insertSpaces:t}},e.is=function(e){let t=e;return Me.defined(t)&&Me.uinteger(t.tabSize)&&Me.boolean(t.insertSpaces)}}(ae||(ae={})),function(e){e.create=function(e,t,n){return{range:e,target:t,data:n}},e.is=function(e){let t=e;return Me.defined(t)&&c.is(t.range)&&(Me.undefined(t.target)||Me.string(t.target))}}(ce||(ce={})),function(e){e.create=function(e,t){return{range:e,parent:t}},e.is=function(t){let n=t;return Me.objectLiteral(n)&&c.is(n.range)&&(void 0===n.parent||e.is(n.parent))}}(ue||(ue={})),function(e){e.namespace="namespace",e.type="type",e.class="class",e.enum="enum",e.interface="interface",e.struct="struct",e.typeParameter="typeParameter",e.parameter="parameter",e.variable="variable",e.property="property",e.enumMember="enumMember",e.event="event",e.function="function",e.method="method",e.macro="macro",e.keyword="keyword",e.modifier="modifier",e.comment="comment",e.string="string",e.number="number",e.regexp="regexp",e.operator="operator",e.decorator="decorator"}(le||(le={})),function(e){e.declaration="declaration",e.definition="definition",e.readonly="readonly",e.static="static",e.deprecated="deprecated",e.abstract="abstract",e.async="async",e.modification="modification",e.documentation="documentation",e.defaultLibrary="defaultLibrary"}(de||(de={})),function(e){e.is=function(e){const t=e;return Me.objectLiteral(t)&&(void 0===t.resultId||"string"==typeof t.resultId)&&Array.isArray(t.data)&&(0===t.data.length||"number"==typeof t.data[0])}}(fe||(fe={})),function(e){e.create=function(e,t){return{range:e,text:t}},e.is=function(e){const t=e;return null!=t&&c.is(t.range)&&Me.string(t.text)}}(he||(he={})),function(e){e.create=function(e,t,n){return{range:e,variableName:t,caseSensitiveLookup:n}},e.is=function(e){const t=e;return null!=t&&c.is(t.range)&&Me.boolean(t.caseSensitiveLookup)&&(Me.string(t.variableName)||void 0===t.variableName)}}(pe||(pe={})),function(e){e.create=function(e,t){return{range:e,expression:t}},e.is=function(e){const t=e;return null!=t&&c.is(t.range)&&(Me.string(t.expression)||void 0===t.expression)}}(ge||(ge={})),function(e){e.create=function(e,t){return{frameId:e,stoppedLocation:t}},e.is=function(e){const t=e;return Me.defined(t)&&c.is(e.stoppedLocation)}}(_e||(_e={})),function(e){e.Type=1,e.Parameter=2,e.is=function(e){return 1===e||2===e}}(me||(me={})),function(e){e.create=function(e){return{value:e}},e.is=function(e){const t=e;return Me.objectLiteral(t)&&(void 0===t.tooltip||Me.string(t.tooltip)||L.is(t.tooltip))&&(void 0===t.location||u.is(t.location))&&(void 0===t.command||E.is(t.command))}}(ve||(ve={})),function(e){e.create=function(e,t,n){const r={position:e,label:t};return void 0!==n&&(r.kind=n),r},e.is=function(e){const t=e;return Me.objectLiteral(t)&&a.is(t.position)&&(Me.string(t.label)||Me.typedArray(t.label,ve.is))&&(void 0===t.kind||me.is(t.kind))&&void 0===t.textEdits||Me.typedArray(t.textEdits,w.is)&&(void 0===t.tooltip||Me.string(t.tooltip)||L.is(t.tooltip))&&(void 0===t.paddingLeft||Me.boolean(t.paddingLeft))&&(void 0===t.paddingRight||Me.boolean(t.paddingRight))}}(ye||(ye={})),function(e){e.createSnippet=function(e){return{kind:"snippet",value:e}}}(be||(be={})),function(e){e.create=function(e,t,n,r){return{insertText:e,filterText:t,range:n,command:r}}}(Ee||(Ee={})),function(e){e.create=function(e){return{items:e}}}(we||(we={})),function(e){e.Invoked=0,e.Automatic=1}(Se||(Se={})),function(e){e.create=function(e,t){return{range:e,text:t}}}(Te||(Te={})),function(e){e.create=function(e,t){return{triggerKind:e,selectedCompletionInfo:t}}}(Ce||(Ce={})),function(e){e.is=function(e){const t=e;return Me.objectLiteral(t)&&i.is(t.uri)&&Me.string(t.name)}}(Oe||(Oe={}));const De=["\n","\r\n","\r"];var xe,Me;!function(e){function t(e,n){if(e.length<=1)return e;const r=e.length/2|0,i=e.slice(0,r),o=e.slice(r);t(i,n),t(o,n);let s=0,a=0,c=0;for(;s<i.length&&a<o.length;){let t=n(i[s],o[a]);e[c++]=t<=0?i[s++]:o[a++]}for(;s<i.length;)e[c++]=i[s++];for(;a<o.length;)e[c++]=o[a++];return e}e.create=function(e,t,n,r){return new Pe(e,t,n,r)},e.is=function(e){let t=e;return!!(Me.defined(t)&&Me.string(t.uri)&&(Me.undefined(t.languageId)||Me.string(t.languageId))&&Me.uinteger(t.lineCount)&&Me.func(t.getText)&&Me.func(t.positionAt)&&Me.func(t.offsetAt))},e.applyEdits=function(e,n){let r=e.getText(),i=t(n,((e,t)=>{let n=e.range.start.line-t.range.start.line;return 0===n?e.range.start.character-t.range.start.character:n})),o=r.length;for(let t=i.length-1;t>=0;t--){let n=i[t],s=e.offsetAt(n.range.start),a=e.offsetAt(n.range.end);if(!(a<=o))throw new Error("Overlapping edit");r=r.substring(0,s)+n.newText+r.substring(a,r.length),o=s}return r}}(xe||(xe={}));class Pe{constructor(e,t,n,r){this._uri=e,this._languageId=t,this._version=n,this._content=r,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content}update(e,t){this._content=e.text,this._version=t,this._lineOffsets=void 0}getLineOffsets(){if(void 0===this._lineOffsets){let e=[],t=this._content,n=!0;for(let r=0;r<t.length;r++){n&&(e.push(r),n=!1);let i=t.charAt(r);n="\r"===i||"\n"===i,"\r"===i&&r+1<t.length&&"\n"===t.charAt(r+1)&&r++}n&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let t=this.getLineOffsets(),n=0,r=t.length;if(0===r)return a.create(0,e);for(;n<r;){let i=Math.floor((n+r)/2);t[i]>e?r=i:n=i+1}let i=n-1;return a.create(i,e-t[i])}offsetAt(e){let t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;let n=t[e.line],r=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,r),n)}get lineCount(){return this.getLineOffsets().length}}!function(e){const t=Object.prototype.toString;e.defined=function(e){return void 0!==e},e.undefined=function(e){return void 0===e},e.boolean=function(e){return!0===e||!1===e},e.string=function(e){return"[object String]"===t.call(e)},e.number=function(e){return"[object Number]"===t.call(e)},e.numberRange=function(e,n,r){return"[object Number]"===t.call(e)&&n<=e&&e<=r},e.integer=function(e){return"[object Number]"===t.call(e)&&-2147483648<=e&&e<=2147483647},e.uinteger=function(e){return"[object Number]"===t.call(e)&&0<=e&&e<=2147483647},e.func=function(e){return"[object Function]"===t.call(e)},e.objectLiteral=function(e){return null!==e&&"object"==typeof e},e.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)}}(Me||(Me={}))}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(6800),__webpack_export_target__=exports;for(var __webpack_i__ in __webpack_exports__)__webpack_export_target__[__webpack_i__]=__webpack_exports__[__webpack_i__];__webpack_exports__.__esModule&&Object.defineProperty(__webpack_export_target__,"__esModule",{value:!0})})();