/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/var Rm=function(e,t){return Rm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},Rm(e,t)};export function __extends(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Rm(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}export var __assign=function(){return __assign=Object.assign||function(t){for(var i,r=1,s=arguments.length;r<s;r++){i=arguments[r];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},__assign.apply(this,arguments)};export function __rest(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(i[r[s]]=e[r[s]]);return i}export function __decorate(e,t,i,r){var s=arguments.length,n=s<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n}export function __param(e,t){return function(i,r){t(i,r,e)}}export function __esDecorate(e,t,i,r,s,n){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var a=r.kind,c=a==="getter"?"get":a==="setter"?"set":"value",l=!t&&e?r.static?e:e.prototype:null,u=t||(l?Object.getOwnPropertyDescriptor(l,r.name):{}),h,d=!1,f=i.length-1;f>=0;f--){var g={};for(var v in r)g[v]=v==="access"?{}:r[v];for(var v in r.access)g.access[v]=r.access[v];g.addInitializer=function(S){if(d)throw new TypeError("Cannot add initializers after decoration has completed");n.push(o(S||null))};var y=(0,i[f])(a==="accessor"?{get:u.get,set:u.set}:u[c],g);if(a==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(h=o(y.get))&&(u.get=h),(h=o(y.set))&&(u.set=h),(h=o(y.init))&&s.unshift(h)}else(h=o(y))&&(a==="field"?s.unshift(h):u[c]=h)}l&&Object.defineProperty(l,r.name,u),d=!0}export function __runInitializers(e,t,i){for(var r=arguments.length>2,s=0;s<t.length;s++)i=r?t[s].call(e,i):t[s].call(e);return r?i:void 0}export function __propKey(e){return typeof e=="symbol"?e:"".concat(e)}export function __setFunctionName(e,t,i){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:i?"".concat(i," ",t):t})}export function __metadata(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}export function __awaiter(e,t,i,r){function s(n){return n instanceof i?n:new i(function(o){o(n)})}return new(i||(i=Promise))(function(n,o){function a(u){try{l(r.next(u))}catch(h){o(h)}}function c(u){try{l(r.throw(u))}catch(h){o(h)}}function l(u){u.done?n(u.value):s(u.value).then(a,c)}l((r=r.apply(e,t||[])).next())})}export function __generator(e,t){var i={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},r,s,n,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(i=0)),i;)try{if(r=1,s&&(n=l[0]&2?s.return:l[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,l[1])).done)return n;switch(s=0,n&&(l=[l[0]&2,n.value]),l[0]){case 0:case 1:n=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,s=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(n=i.trys,!(n=n.length>0&&n[n.length-1])&&(l[0]===6||l[0]===2)){i=0;continue}if(l[0]===3&&(!n||l[1]>n[0]&&l[1]<n[3])){i.label=l[1];break}if(l[0]===6&&i.label<n[1]){i.label=n[1],n=l;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(l);break}n[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(u){l=[6,u],s=0}finally{r=n=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}export var __createBinding=Object.create?function(e,t,i,r){r===void 0&&(r=i);var s=Object.getOwnPropertyDescriptor(t,i);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,s)}:function(e,t,i,r){r===void 0&&(r=i),e[r]=t[i]};export function __exportStar(e,t){for(var i in e)i!=="default"&&!Object.prototype.hasOwnProperty.call(t,i)&&__createBinding(t,e,i)}export function __values(e){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}export function __read(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),s,n=[],o;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)n.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return n}export function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e}export function __spreadArrays(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var r=Array(e),s=0,t=0;t<i;t++)for(var n=arguments[t],o=0,a=n.length;o<a;o++,s++)r[s]=n[o];return r}export function __spreadArray(e,t,i){if(i||arguments.length===2)for(var r=0,s=t.length,n;r<s;r++)(n||!(r in t))&&(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))}export function __await(e){return this instanceof __await?(this.v=e,this):new __await(e)}export function __asyncGenerator(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=i.apply(e,t||[]),s,n=[];return s={},a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(f){return function(g){return Promise.resolve(g).then(f,h)}}function a(f,g){r[f]&&(s[f]=function(v){return new Promise(function(y,S){n.push([f,v,y,S])>1||c(f,v)})},g&&(s[f]=g(s[f])))}function c(f,g){try{l(r[f](g))}catch(v){d(n[0][3],v)}}function l(f){f.value instanceof __await?Promise.resolve(f.value.v).then(u,h):d(n[0][2],f)}function u(f){c("next",f)}function h(f){c("throw",f)}function d(f,g){f(g),n.shift(),n.length&&c(n[0][0],n[0][1])}}export function __asyncDelegator(e){var t,i;return t={},r("next"),r("throw",function(s){throw s}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(s,n){t[s]=e[s]?function(o){return(i=!i)?{value:__await(e[s](o)),done:!1}:n?n(o):o}:n}}export function __asyncValues(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],i;return t?t.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i);function r(n){i[n]=e[n]&&function(o){return new Promise(function(a,c){o=e[n](o),s(a,c,o.done,o.value)})}}function s(n,o,a,c){Promise.resolve(c).then(function(l){n({value:l,done:a})},o)}}export function __makeTemplateObject(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var MP=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};export function __importStar(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i in e)i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)&&__createBinding(t,e,i);return MP(t,e),t}export function __importDefault(e){return e&&e.__esModule?e:{default:e}}export function __classPrivateFieldGet(e,t,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(e):r?r.value:t.get(e)}export function __classPrivateFieldSet(e,t,i,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(e,i):s?s.value=i:t.set(e,i),i}export function __classPrivateFieldIn(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}export function __addDisposableResource(e,t,i){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,s;if(i){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],i&&(s=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");s&&(r=function(){try{s.call(this)}catch(n){return Promise.reject(n)}}),e.stack.push({value:t,dispose:r,async:i})}else i&&e.stack.push({async:!0});return t}var UP=typeof SuppressedError=="function"?SuppressedError:function(e,t,i){var r=new Error(i);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};export function __disposeResources(e){function t(r){e.error=e.hasError?new UP(r,e.error,"An error was suppressed during disposal."):r,e.hasError=!0}function i(){for(;e.stack.length;){var r=e.stack.pop();try{var s=r.dispose&&r.dispose.call(r.value);if(r.async)return Promise.resolve(s).then(i,function(n){return t(n),i()})}catch(n){t(n)}}if(e.hasError)throw e.error}return i()}export default{__extends,__assign,__rest,__decorate,__param,__metadata,__awaiter,__generator,__createBinding,__exportStar,__values,__read,__spread,__spreadArrays,__spreadArray,__await,__asyncGenerator,__asyncDelegator,__asyncValues,__makeTemplateObject,__importStar,__importDefault,__classPrivateFieldGet,__classPrivateFieldSet,__classPrivateFieldIn,__addDisposableResource,__disposeResources};var _P=Object.create,Tm=Object.defineProperty,jP=Object.getOwnPropertyDescriptor,M4=Object.getOwnPropertyNames,HP=Object.getPrototypeOf,BP=Object.prototype.hasOwnProperty,Lm=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,i)=>(typeof require<"u"?require:t)[i]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}),WP=(e,t)=>function(){return t||(0,e[M4(e)[0]])((t={exports:{}}).exports,t),t.exports},zP=(e,t)=>{for(var i in t)Tm(e,i,{get:t[i],enumerable:!0})},VP=(e,t,i,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of M4(t))!BP.call(e,s)&&s!==i&&Tm(e,s,{get:()=>t[s],enumerable:!(r=jP(t,s))||r.enumerable});return e},qP=(e,t,i)=>(i=e!=null?_P(HP(e)):{},VP(t||!e||!e.__esModule?Tm(i,"default",{value:e,enumerable:!0}):i,e)),GP=WP({"node_modules/minimist/index.js"(e,t){"use strict";function i(n,o){var a=n;o.slice(0,-1).forEach(function(l){a=a[l]||{}});var c=o[o.length-1];return c in a}function r(n){return typeof n=="number"||/^0x[0-9a-f]+$/i.test(n)?!0:/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(n)}function s(n,o){return o==="constructor"&&typeof n[o]=="function"||o==="__proto__"}t.exports=function(n,o){o||(o={});var a={bools:{},strings:{},unknownFn:null};typeof o.unknown=="function"&&(a.unknownFn=o.unknown),typeof o.boolean=="boolean"&&o.boolean?a.allBools=!0:[].concat(o.boolean).filter(Boolean).forEach(function(M){a.bools[M]=!0});var c={};function l(M){return c[M].some(function(re){return a.bools[re]})}Object.keys(o.alias||{}).forEach(function(M){c[M]=[].concat(o.alias[M]),c[M].forEach(function(re){c[re]=[M].concat(c[M].filter(function(ae){return re!==ae}))})}),[].concat(o.string).filter(Boolean).forEach(function(M){a.strings[M]=!0,c[M]&&[].concat(c[M]).forEach(function(re){a.strings[re]=!0})});var u=o.default||{},h={_:[]};function d(M,re){return a.allBools&&/^--[^=]+$/.test(re)||a.strings[M]||a.bools[M]||c[M]}function f(M,re,ae){for(var fe=M,Je=0;Je<re.length-1;Je++){var G=re[Je];if(s(fe,G))return;fe[G]===void 0&&(fe[G]={}),(fe[G]===Object.prototype||fe[G]===Number.prototype||fe[G]===String.prototype)&&(fe[G]={}),fe[G]===Array.prototype&&(fe[G]=[]),fe=fe[G]}var _=re[re.length-1];s(fe,_)||((fe===Object.prototype||fe===Number.prototype||fe===String.prototype)&&(fe={}),fe===Array.prototype&&(fe=[]),fe[_]===void 0||a.bools[_]||typeof fe[_]=="boolean"?fe[_]=ae:Array.isArray(fe[_])?fe[_].push(ae):fe[_]=[fe[_],ae])}function g(M,re,ae){if(!(ae&&a.unknownFn&&!d(M,ae)&&a.unknownFn(ae)===!1)){var fe=!a.strings[M]&&r(re)?Number(re):re;f(h,M.split("."),fe),(c[M]||[]).forEach(function(Je){f(h,Je.split("."),fe)})}}Object.keys(a.bools).forEach(function(M){g(M,u[M]===void 0?!1:u[M])});var v=[];n.indexOf("--")!==-1&&(v=n.slice(n.indexOf("--")+1),n=n.slice(0,n.indexOf("--")));for(var y=0;y<n.length;y++){var S=n[y],x,P;if(/^--.+=/.test(S)){var D=S.match(/^--([^=]+)=([\s\S]*)$/);x=D[1];var N=D[2];a.bools[x]&&(N=N!=="false"),g(x,N,S)}else if(/^--no-.+/.test(S))x=S.match(/^--no-(.+)/)[1],g(x,!1,S);else if(/^--.+/.test(S))x=S.match(/^--(.+)/)[1],P=n[y+1],P!==void 0&&!/^(-|--)[^-]/.test(P)&&!a.bools[x]&&!a.allBools&&(!c[x]||!l(x))?(g(x,P,S),y+=1):/^(true|false)$/.test(P)?(g(x,P==="true",S),y+=1):g(x,a.strings[x]?"":!0,S);else if(/^-[^-]+/.test(S)){for(var H=S.slice(1,-1).split(""),Y=!1,B=0;B<H.length;B++){if(P=S.slice(B+2),P==="-"){g(H[B],P,S);continue}if(/[A-Za-z]/.test(H[B])&&P[0]==="="){g(H[B],P.slice(1),S),Y=!0;break}if(/[A-Za-z]/.test(H[B])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(P)){g(H[B],P,S),Y=!0;break}if(H[B+1]&&H[B+1].match(/\W/)){g(H[B],S.slice(B+2),S),Y=!0;break}else g(H[B],a.strings[H[B]]?"":!0,S)}x=S.slice(-1)[0],!Y&&x!=="-"&&(n[y+1]&&!/^(-|--)[^-]/.test(n[y+1])&&!a.bools[x]&&(!c[x]||!l(x))?(g(x,n[y+1],S),y+=1):n[y+1]&&/^(true|false)$/.test(n[y+1])?(g(x,n[y+1]==="true",S),y+=1):g(x,a.strings[x]?"":!0,S))}else if((!a.unknownFn||a.unknownFn(S)!==!1)&&h._.push(a.strings._||!r(S)?S:Number(S)),o.stopEarly){h._.push.apply(h._,n.slice(y+1));break}}return Object.keys(u).forEach(function(M){i(h,M.split("."))||(f(h,M.split("."),u[M]),(c[M]||[]).forEach(function(re){f(h,re.split("."),u[M])}))}),o["--"]?h["--"]=v.slice():v.forEach(function(M){h._.push(M)}),h}}}),JP=qP(GP(),1);import*as QP from"net";var U4;function Nm(e,t){const i=Object.create(null);for(const r of e){const s=t(r);let n=i[s];n||(n=i[s]=[]),n.push(r)}return i}function YP(e,t){const i=[],r=[];for(const s of e)t.has(s)||i.push(s);for(const s of t)e.has(s)||r.push(s);return{removed:i,added:r}}var pq=class{static{U4=Symbol.toStringTag}constructor(e,t){this.b=t,this.a=new Map,this[U4]="SetWithKey";for(const i of e)this.add(i)}get size(){return this.a.size}add(e){const t=this.b(e);return this.a.set(t,e),this}delete(e){return this.a.delete(this.b(e))}has(e){return this.a.has(this.b(e))}*entries(){for(const e of this.a.values())yield[e,e]}keys(){return this.values()}*values(){for(const e of this.a.values())yield e}clear(){this.a.clear()}forEach(e,t){this.a.forEach(i=>e.call(t,i,i,this))}[Symbol.iterator](){return this.values()}},XP=class{constructor(){this.b=[],this.a=function(e){setTimeout(()=>{throw e.stack?yr.isErrorNoTelemetry(e)?new yr(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.b.push(e),()=>{this.d(e)}}c(e){this.b.forEach(t=>{t(e)})}d(e){this.b.splice(this.b.indexOf(e),1)}setUnexpectedErrorHandler(e){this.a=e}getUnexpectedErrorHandler(){return this.a}onUnexpectedError(e){this.a(e),this.c(e)}onUnexpectedExternalError(e){this.a(e)}},Mh=new XP;function Om(e){Mh.setUnexpectedErrorHandler(e)}function ZP(e){if(!e||typeof e!="object")return!1;const t=e;return t.code==="EPIPE"&&t.syscall?.toUpperCase()==="WRITE"}function Uh(e){Mh.onUnexpectedError(e)}function Et(e){zr(e)||Mh.onUnexpectedError(e)}function cr(e){zr(e)||Mh.onUnexpectedExternalError(e)}function Jc(e){if(e instanceof Error){const{name:t,message:i}=e,r=e.stacktrace||e.stack;return{$isError:!0,name:t,message:i,stack:r,noTelemetry:yr.isErrorNoTelemetry(e)}}return e}function KP(e){let t;return e.noTelemetry?t=new yr:(t=new Error,t.name=e.name),t.message=e.message,t.stack=e.stack,t}var _h="Canceled";function zr(e){return e instanceof ki?!0:e instanceof Error&&e.name===_h&&e.message===_h}var ki=class extends Error{constructor(){super(_h),this.name=this.message}};function Qc(){const e=new Error(_h);return e.name=e.message,e}function $e(e){return e?new Error(`Illegal argument: ${e}`):new Error("Illegal argument")}function Fm(e){return e?new Error(`Illegal state: ${e}`):new Error("Illegal state")}var Kn=class extends TypeError{constructor(e){super(e?`${e} is read-only and cannot be changed`:"Cannot change read-only property")}},eD=class extends Error{constructor(e){super("NotImplemented"),e&&(this.message=e)}},Mm=class extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}},yr=class u4 extends Error{constructor(t){super(t),this.name="CodeExpectedError"}static fromError(t){if(t instanceof u4)return t;const i=new u4;return i.message=t.message,i.stack=t.stack,i}static isErrorNoTelemetry(t){return t.name==="CodeExpectedError"}},ua=class tI extends Error{constructor(t){super(t||"An unexpected bug occurred."),Object.setPrototypeOf(this,tI.prototype)}};function jh(e,t){const i=this;let r=!1,s;return function(){if(r)return s;if(r=!0,t)try{s=e.apply(i,arguments)}finally{t()}else s=e.apply(i,arguments);return s}}function tD(e,t){const i=iD(e,t);if(i!==-1)return e[i]}function iD(e,t,i=e.length-1){for(let r=i;r>=0;r--){const s=e[r];if(t(s))return r}return-1}function rD(e,t,i=0,r=e.length){let s=i,n=r;for(;s<n;){const o=Math.floor((s+n)/2);t(e[o])?s=o+1:n=o}return s-1}function sD(e,t,i=0,r=e.length){let s=i,n=r;for(;s<n;){const o=Math.floor((s+n)/2);t(e[o])?n=o:s=o+1}return s}var gq=class iI{static{this.assertInvariants=!1}constructor(t){this.e=t,this.c=0}findLastMonotonous(t){if(iI.assertInvariants){if(this.d){for(const r of this.e)if(this.d(r)&&!t(r))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this.d=t}const i=rD(this.e,t,this.c);return this.c=i+1,i===-1?void 0:this.e[i]}};function Vr(e,t,i=(r,s)=>r===s){if(e===t)return!0;if(!e||!t||e.length!==t.length)return!1;for(let r=0,s=e.length;r<s;r++)if(!i(e[r],t[r]))return!1;return!0}function nD(e,t){const i=[];let r;for(const s of e.slice(0).sort(t))!r||t(r[0],s)!==0?(r=[s],i.push(r)):r.push(s);return i}function _4(e,t,i){const r=[];function s(a,c,l){if(c===0&&l.length===0)return;const u=r[r.length-1];u&&u.start+u.deleteCount===a?(u.deleteCount+=c,u.toInsert.push(...l)):r.push({start:a,deleteCount:c,toInsert:l})}let n=0,o=0;for(;;){if(n===e.length){s(n,0,t.slice(o));break}if(o===t.length){s(n,e.length-n,[]);break}const a=e[n],c=t[o],l=i(a,c);l===0?(n+=1,o+=1):l<0?(s(n,1,[]),n+=1):l>0&&(s(n,0,[c]),o+=1)}return r}function oD(e,t,i){const r=_4(e,t,i),s=[],n=[];for(const o of r)s.push(...e.slice(o.start,o.start+o.deleteCount)),n.push(...o.toInsert);return{removed:s,added:n}}function aD(e,t,i,r,s){return i===0?Promise.resolve([]):new Promise((n,o)=>{(async()=>{const a=e.length,c=e.slice(0,i).sort(t);for(let l=i,u=Math.min(i+r,a);l<a;l=u,u=Math.min(u+r,a)){if(l>i&&await new Promise(h=>setTimeout(h)),s&&s.isCancellationRequested)throw new ki;cD(e,t,c,l,u)}return c})().then(n,o)})}function cD(e,t,i,r,s){for(const n=i.length;r<s;r++){const o=e[r];if(t(o,i[n-1])<0){i.pop();const a=sD(i,c=>t(o,c)<0);i.splice(a,0,o)}}}function mt(e){return e.filter(t=>!!t)}function lD(e){let t=0;for(let i=0;i<e.length;i++)e[i]&&(e[t]=e[i],t+=1);e.length=t}function Um(e){return!Array.isArray(e)||e.length===0}function Yc(e){return Array.isArray(e)&&e.length>0}function ha(e,t=i=>i){const i=new Set;return e.filter(r=>{const s=t(r);return i.has(s)?!1:(i.add(s),!0)})}function j4(e,t){return e.push(t),()=>uD(e,t)}function uD(e,t){const i=e.indexOf(t);if(i>-1)return e.splice(i,1),t}function H4(e,t){let i;if(typeof t=="number"){let r=t;i=()=>{const s=Math.sin(r++)*179426549;return s-Math.floor(s)}}else i=Math.random;for(let r=e.length-1;r>0;r-=1){const s=Math.floor(i()*(r+1)),n=e[r];e[r]=e[s],e[s]=n}}function Hh(e,t){return Array.isArray(e)?e.map(t):t(e)}function Er(e){return Array.isArray(e)?e:[e]}var _m;(function(e){function t(n){return n<0}e.isLessThan=t;function i(n){return n<=0}e.isLessThanOrEqual=i;function r(n){return n>0}e.isGreaterThan=r;function s(n){return n===0}e.isNeitherLessOrGreaterThan=s,e.greaterThan=1,e.lessThan=-1,e.neitherLessOrGreaterThan=0})(_m||(_m={}));function hD(e,t){return(i,r)=>t(e(i),e(r))}var dD=(e,t)=>e-t,mq=class dm{static{this.empty=new dm(t=>{})}constructor(t){this.iterate=t}forEach(t){this.iterate(i=>(t(i),!0))}toArray(){const t=[];return this.iterate(i=>(t.push(i),!0)),t}filter(t){return new dm(i=>this.iterate(r=>t(r)?i(r):!0))}map(t){return new dm(i=>this.iterate(r=>i(t(r))))}some(t){let i=!1;return this.iterate(r=>(i=t(r),!i)),i}findFirst(t){let i;return this.iterate(r=>t(r)?(i=r,!1):!0),i}findLast(t){let i;return this.iterate(r=>(t(r)&&(i=r),!0)),i}findLastMaxBy(t){let i,r=!0;return this.iterate(s=>((r||_m.isGreaterThan(t(s,i)))&&(r=!1,i=s),!0)),i}},B4,W4,z4;function fD(e,t,i){let r=e.get(t);return r===void 0&&(r=i,e.set(t,r)),r}var pD=class{constructor(e,t){this.uri=e,this.value=t}};function gD(e){return Array.isArray(e)}var Gt=class Ih{static{this.c=t=>t.toString()}constructor(t,i){if(this[B4]="ResourceMap",t instanceof Ih)this.d=new Map(t.d),this.e=i??Ih.c;else if(gD(t)){this.d=new Map,this.e=i??Ih.c;for(const[r,s]of t)this.set(r,s)}else this.d=new Map,this.e=t??Ih.c}set(t,i){return this.d.set(this.e(t),new pD(t,i)),this}get(t){return this.d.get(this.e(t))?.value}has(t){return this.d.has(this.e(t))}get size(){return this.d.size}clear(){this.d.clear()}delete(t){return this.d.delete(this.e(t))}forEach(t,i){typeof i<"u"&&(t=t.bind(i));for(const[r,s]of this.d)t(s.value,s.uri,this)}*values(){for(const t of this.d.values())yield t.value}*keys(){for(const t of this.d.values())yield t.uri}*entries(){for(const t of this.d.values())yield[t.uri,t.value]}*[(B4=Symbol.toStringTag,Symbol.iterator)](){for(const[,t]of this.d)yield[t.uri,t.value]}},V4=class{constructor(e,t){this[W4]="ResourceSet",!e||typeof e=="function"?this.c=new Gt(e):(this.c=new Gt(t),e.forEach(this.add,this))}get size(){return this.c.size}add(e){return this.c.set(e,e),this}clear(){this.c.clear()}delete(e){return this.c.delete(e)}forEach(e,t){this.c.forEach((i,r)=>e.call(t,r,r,this))}has(e){return this.c.has(e)}entries(){return this.c.entries()}keys(){return this.c.keys()}values(){return this.c.keys()}[(W4=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}},q4;(function(e){e[e.None=0]="None",e[e.AsOld=1]="AsOld",e[e.AsNew=2]="AsNew"})(q4||(q4={}));var mD=class{constructor(){this[z4]="LinkedMap",this.c=new Map,this.d=void 0,this.e=void 0,this.f=0,this.g=0}clear(){this.c.clear(),this.d=void 0,this.e=void 0,this.f=0,this.g++}isEmpty(){return!this.d&&!this.e}get size(){return this.f}get first(){return this.d?.value}get last(){return this.e?.value}has(e){return this.c.has(e)}get(e,t=0){const i=this.c.get(e);if(i)return t!==0&&this.m(i,t),i.value}set(e,t,i=0){let r=this.c.get(e);if(r)r.value=t,i!==0&&this.m(r,i);else{switch(r={key:e,value:t,next:void 0,previous:void 0},i){case 0:this.k(r);break;case 1:this.j(r);break;case 2:this.k(r);break;default:this.k(r);break}this.c.set(e,r),this.f++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this.c.get(e);if(t)return this.c.delete(e),this.l(t),this.f--,t.value}shift(){if(!this.d&&!this.e)return;if(!this.d||!this.e)throw new Error("Invalid list");const e=this.d;return this.c.delete(e.key),this.l(e),this.f--,e.value}forEach(e,t){const i=this.g;let r=this.d;for(;r;){if(t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),this.g!==i)throw new Error("LinkedMap got modified during iteration.");r=r.next}}keys(){const e=this,t=this.g;let i=this.d;const r={[Symbol.iterator](){return r},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const s={value:i.key,done:!1};return i=i.next,s}else return{value:void 0,done:!0}}};return r}values(){const e=this,t=this.g;let i=this.d;const r={[Symbol.iterator](){return r},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const s={value:i.value,done:!1};return i=i.next,s}else return{value:void 0,done:!0}}};return r}entries(){const e=this,t=this.g;let i=this.d;const r={[Symbol.iterator](){return r},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const s={value:[i.key,i.value],done:!1};return i=i.next,s}else return{value:void 0,done:!0}}};return r}[(z4=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}h(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this.d,i=this.size;for(;t&&i>e;)this.c.delete(t.key),t=t.next,i--;this.d=t,this.f=i,t&&(t.previous=void 0),this.g++}i(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this.e,i=this.size;for(;t&&i>e;)this.c.delete(t.key),t=t.previous,i--;this.e=t,this.f=i,t&&(t.next=void 0),this.g++}j(e){if(!this.d&&!this.e)this.e=e;else if(this.d)e.next=this.d,this.d.previous=e;else throw new Error("Invalid list");this.d=e,this.g++}k(e){if(!this.d&&!this.e)this.d=e;else if(this.e)e.previous=this.e,this.e.next=e;else throw new Error("Invalid list");this.e=e,this.g++}l(e){if(e===this.d&&e===this.e)this.d=void 0,this.e=void 0;else if(e===this.d){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this.d=e.next}else if(e===this.e){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this.e=e.previous}else{const t=e.next,i=e.previous;if(!t||!i)throw new Error("Invalid list");t.previous=i,i.next=t}e.next=void 0,e.previous=void 0,this.g++}m(e,t){if(!this.d||!this.e)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this.d)return;const i=e.next,r=e.previous;e===this.e?(r.next=void 0,this.e=r):(i.previous=r,r.next=i),e.previous=void 0,e.next=this.d,this.d.previous=e,this.d=e,this.g++}else if(t===2){if(e===this.e)return;const i=e.next,r=e.previous;e===this.d?(i.previous=void 0,this.d=i):(i.previous=r,r.next=i),e.next=void 0,e.previous=this.e,this.e.next=e,this.e=e,this.g++}}}toJSON(){const e=[];return this.forEach((t,i)=>{e.push([i,t])}),e}fromJSON(e){this.clear();for(const[t,i]of e)this.set(t,i)}},vD=class extends mD{constructor(e,t=1){super(),this.n=e,this.o=Math.min(Math.max(0,t),1)}get limit(){return this.n}set limit(e){this.n=e,this.p()}get ratio(){return this.o}set ratio(e){this.o=Math.min(Math.max(0,e),1),this.p()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this}p(){this.size>this.n&&this.q(Math.round(this.n*this.o))}},Xc=class extends vD{constructor(e,t=1){super(e,t)}q(e){this.h(e)}set(e,t){return super.set(e,t),this.p(),this}},G4=class{constructor(){this.c=new Map}add(e,t){let i=this.c.get(e);i||(i=new Set,this.c.set(e,i)),i.add(t)}delete(e,t){const i=this.c.get(e);i&&(i.delete(t),i.size===0&&this.c.delete(e))}forEach(e,t){const i=this.c.get(e);i&&i.forEach(t)}get(e){const t=this.c.get(e);return t||new Set}},Qi;(function(e){function t(D){return D&&typeof D=="object"&&typeof D[Symbol.iterator]=="function"}e.is=t;const i=Object.freeze([]);function r(){return i}e.empty=r;function*s(D){yield D}e.single=s;function n(D){return t(D)?D:s(D)}e.wrap=n;function o(D){return D||i}e.from=o;function*a(D){for(let N=D.length-1;N>=0;N--)yield D[N]}e.reverse=a;function c(D){return!D||D[Symbol.iterator]().next().done===!0}e.isEmpty=c;function l(D){return D[Symbol.iterator]().next().value}e.first=l;function u(D,N){let H=0;for(const Y of D)if(N(Y,H++))return!0;return!1}e.some=u;function h(D,N){for(const H of D)if(N(H))return H}e.find=h;function*d(D,N){for(const H of D)N(H)&&(yield H)}e.filter=d;function*f(D,N){let H=0;for(const Y of D)yield N(Y,H++)}e.map=f;function*g(D,N){let H=0;for(const Y of D)yield*N(Y,H++)}e.flatMap=g;function*v(...D){for(const N of D)yield*N}e.concat=v;function y(D,N,H){let Y=H;for(const B of D)Y=N(Y,B);return Y}e.reduce=y;function*S(D,N,H=D.length){for(N<-D.length&&(N=0),N<0&&(N+=D.length),H<0?H+=D.length:H>D.length&&(H=D.length);N<H;N++)yield D[N]}e.slice=S;function x(D,N=Number.POSITIVE_INFINITY){const H=[];if(N===0)return[H,D];const Y=D[Symbol.iterator]();for(let B=0;B<N;B++){const M=Y.next();if(M.done)return[H,e.empty()];H.push(M.value)}return[H,{[Symbol.iterator](){return Y}}]}e.consume=x;async function P(D){const N=[];for await(const H of D)N.push(H);return Promise.resolve(N)}e.asyncToArray=P})(Qi||(Qi={}));var wD=!1,da=null,vq=class rI{constructor(){this.b=new Map}static{this.a=0}c(t){let i=this.b.get(t);return i||(i={parent:null,source:null,isSingleton:!1,value:t,idx:rI.a++},this.b.set(t,i)),i}trackDisposable(t){const i=this.c(t);i.source||(i.source=new Error().stack)}setParent(t,i){const r=this.c(t);r.parent=i}markAsDisposed(t){this.b.delete(t)}markAsSingleton(t){this.c(t).isSingleton=!0}f(t,i){const r=i.get(t);if(r)return r;const s=t.parent?this.f(this.c(t.parent),i):t;return i.set(t,s),s}getTrackedDisposables(){const t=new Map;return[...this.b.entries()].filter(([,r])=>r.source!==null&&!this.f(r,t).isSingleton).flatMap(([r])=>r)}computeLeakingDisposables(t=10,i){let r;if(i)r=i;else{const c=new Map,l=[...this.b.values()].filter(h=>h.source!==null&&!this.f(h,c).isSingleton);if(l.length===0)return;const u=new Set(l.map(h=>h.value));if(r=l.filter(h=>!(h.parent&&u.has(h.parent))),r.length===0)throw new Error("There are cyclic diposable chains!")}if(!r)return;function s(c){function l(h,d){for(;h.length>0&&d.some(f=>typeof f=="string"?f===h[0]:h[0].match(f));)h.shift()}const u=c.source.split(`
`).map(h=>h.trim().replace("at ","")).filter(h=>h!=="");return l(u,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),u.reverse()}const n=new G4;for(const c of r){const l=s(c);for(let u=0;u<=l.length;u++)n.add(l.slice(0,u).join(`
`),c)}r.sort(hD(c=>c.idx,dD));let o="",a=0;for(const c of r.slice(0,t)){a++;const l=s(c),u=[];for(let h=0;h<l.length;h++){let d=l[h];d=`(shared with ${n.get(l.slice(0,h+1).join(`
`)).size}/${r.length} leaks) at ${d}`;const g=n.get(l.slice(0,h).join(`
`)),v=Nm([...g].map(y=>s(y)[h]),y=>y);delete v[l[h]];for(const[y,S]of Object.entries(v))u.unshift(`    - stacktraces of ${S.length} other leaks continue with ${y}`);u.unshift(d)}o+=`


==================== Leaking disposable ${a}/${r.length}: ${c.value.constructor.name} ====================
${u.join(`
`)}
============================================================

`}return r.length>t&&(o+=`


... and ${r.length-t} more leaking disposables

`),{leaks:r,details:o}}};function bD(e){da=e}if(wD){const e="__is_disposable_tracked__";bD(new class{trackDisposable(t){const i=new Error("Potentially leaked disposable").stack;setTimeout(()=>{t[e]||console.log(i)},3e3)}setParent(t,i){if(t&&t!==X.None)try{t[e]=!0}catch{}}markAsDisposed(t){if(t&&t!==X.None)try{t[e]=!0}catch{}}markAsSingleton(t){}})}function fa(e){return da?.trackDisposable(e),e}function pa(e){da?.markAsDisposed(e)}function Zc(e,t){da?.setParent(e,t)}function yD(e,t){if(da)for(const i of e)da.setParent(i,t)}function ED(e){return typeof e=="object"&&e!==null&&typeof e.dispose=="function"&&e.dispose.length===0}function Sr(e){if(Qi.is(e)){const t=[];for(const i of e)if(i)try{i.dispose()}catch(r){t.push(r)}if(t.length===1)throw t[0];if(t.length>1)throw new AggregateError(t,"Encountered errors while disposing of store");return Array.isArray(e)?[]:e}else if(e)return e.dispose(),e}function J4(...e){const t=ee(()=>Sr(e));return yD(e,t),t}function ee(e){const t=fa({dispose:jh(()=>{pa(t),e()})});return t}var ue=class sI{static{this.DISABLE_DISPOSED_WARNING=!1}constructor(){this.f=new Set,this.g=!1,fa(this)}dispose(){this.g||(pa(this),this.g=!0,this.clear())}get isDisposed(){return this.g}clear(){if(this.f.size!==0)try{Sr(this.f)}finally{this.f.clear()}}add(t){if(!t)return t;if(t===this)throw new Error("Cannot register a disposable on itself!");return Zc(t,this),this.g?sI.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this.f.add(t),t}delete(t){if(t){if(t===this)throw new Error("Cannot dispose a disposable on itself!");this.f.delete(t),t.dispose()}}deleteAndLeak(t){t&&this.f.has(t)&&(this.f.delete(t),Zc(t,null))}},X=class{static{this.None=Object.freeze({dispose(){}})}constructor(){this.q=new ue,fa(this),Zc(this.q,this)}dispose(){pa(this),this.q.dispose()}B(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this.q.add(e)}},vs=class{constructor(){this.b=!1,fa(this)}get value(){return this.b?void 0:this.a}set value(e){this.b||e===this.a||(this.a?.dispose(),e&&Zc(e,this),this.a=e)}clear(){this.value=void 0}dispose(){this.b=!0,pa(this),this.a?.dispose(),this.a=void 0}clearAndLeak(){const e=this.a;return this.a=void 0,e&&Zc(e,null),e}},Bh=class{constructor(){this.a=new Map,this.b=!1,fa(this)}dispose(){pa(this),this.b=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this.a.size)try{Sr(this.a.values())}finally{this.a.clear()}}has(e){return this.a.has(e)}get size(){return this.a.size}get(e){return this.a.get(e)}set(e,t,i=!1){this.b&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),i||this.a.get(e)?.dispose(),this.a.set(e,t)}deleteAndDispose(e){this.a.get(e)?.dispose(),this.a.delete(e)}deleteAndLeak(e){const t=this.a.get(e);return this.a.delete(e),t}keys(){return this.a.keys()}values(){return this.a.values()}[Symbol.iterator](){return this.a[Symbol.iterator]()}},Pt=class fm{static{this.Undefined=new fm(void 0)}constructor(t){this.element=t,this.next=fm.Undefined,this.prev=fm.Undefined}},Kc=class{constructor(){this.a=Pt.Undefined,this.b=Pt.Undefined,this.c=0}get size(){return this.c}isEmpty(){return this.a===Pt.Undefined}clear(){let e=this.a;for(;e!==Pt.Undefined;){const t=e.next;e.prev=Pt.Undefined,e.next=Pt.Undefined,e=t}this.a=Pt.Undefined,this.b=Pt.Undefined,this.c=0}unshift(e){return this.d(e,!1)}push(e){return this.d(e,!0)}d(e,t){const i=new Pt(e);if(this.a===Pt.Undefined)this.a=i,this.b=i;else if(t){const s=this.b;this.b=i,i.prev=s,s.next=i}else{const s=this.a;this.a=i,i.next=s,s.prev=i}this.c+=1;let r=!1;return()=>{r||(r=!0,this.e(i))}}shift(){if(this.a!==Pt.Undefined){const e=this.a.element;return this.e(this.a),e}}pop(){if(this.b!==Pt.Undefined){const e=this.b.element;return this.e(this.b),e}}e(e){if(e.prev!==Pt.Undefined&&e.next!==Pt.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===Pt.Undefined&&e.next===Pt.Undefined?(this.a=Pt.Undefined,this.b=Pt.Undefined):e.next===Pt.Undefined?(this.b=this.b.prev,this.b.next=Pt.Undefined):e.prev===Pt.Undefined&&(this.a=this.a.next,this.a.prev=Pt.Undefined);this.c-=1}*[Symbol.iterator](){let e=this.a;for(;e!==Pt.Undefined;)yield e.element,e=e.next}},SD=globalThis.performance&&typeof globalThis.performance.now=="function",ri=class nI{static create(t){return new nI(t)}constructor(t){this.c=SD&&t===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this.a=this.c(),this.b=-1}stop(){this.b=this.c()}reset(){this.a=this.c(),this.b=-1}elapsed(){return this.b!==-1?this.b-this.a:this.c()-this.a}},xD=!1,Q4=!1,kD=!1,ze;(function(e){e.None=()=>X.None;function t(G){if(kD){const{onDidAddListener:_}=G,K=jm.create();let W=0;G.onDidAddListener=()=>{++W===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),K.print()),_?.()}}}function i(G,_){return f(G,()=>{},0,void 0,!0,void 0,_)}e.defer=i;function r(G){return(_,K=null,W)=>{let ne=!1,ye;return ye=G(he=>{if(!ne)return ye?ye.dispose():ne=!0,_.call(K,he)},null,W),ne&&ye.dispose(),ye}}e.once=r;function s(G,_){return e.once(e.filter(G,_))}e.onceIf=s;function n(G,_,K){return h((W,ne=null,ye)=>G(he=>W.call(ne,_(he)),null,ye),K)}e.map=n;function o(G,_,K){return h((W,ne=null,ye)=>G(he=>{_(he),W.call(ne,he)},null,ye),K)}e.forEach=o;function a(G,_,K){return h((W,ne=null,ye)=>G(he=>_(he)&&W.call(ne,he),null,ye),K)}e.filter=a;function c(G){return G}e.signal=c;function l(...G){return(_,K=null,W)=>{const ne=J4(...G.map(ye=>ye(he=>_.call(K,he))));return d(ne,W)}}e.any=l;function u(G,_,K,W){let ne=K;return n(G,ye=>(ne=_(ne,ye),ne),W)}e.reduce=u;function h(G,_){let K;const W={onWillAddFirstListener(){K=G(ne.fire,ne)},onDidRemoveLastListener(){K?.dispose()}};_||t(W);const ne=new I(W);return _?.add(ne),ne.event}function d(G,_){return _ instanceof Array?_.push(G):_&&_.add(G),G}function f(G,_,K=100,W=!1,ne=!1,ye,he){let tt,Ze,Mt,Nt=0,ii;const dt={leakWarningThreshold:ye,onWillAddFirstListener(){tt=G(rn=>{Nt++,Ze=_(Ze,rn),W&&!Mt&&(gi.fire(Ze),Ze=void 0),ii=()=>{const ps=Ze;Ze=void 0,Mt=void 0,(!W||Nt>1)&&gi.fire(ps),Nt=0},typeof K=="number"?(clearTimeout(Mt),Mt=setTimeout(ii,K)):Mt===void 0&&(Mt=0,queueMicrotask(ii))})},onWillRemoveListener(){ne&&Nt>0&&ii?.()},onDidRemoveLastListener(){ii=void 0,tt.dispose()}};he||t(dt);const gi=new I(dt);return he?.add(gi),gi.event}e.debounce=f;function g(G,_=0,K){return e.debounce(G,(W,ne)=>W?(W.push(ne),W):[ne],_,void 0,!0,void 0,K)}e.accumulate=g;function v(G,_=(W,ne)=>W===ne,K){let W=!0,ne;return a(G,ye=>{const he=W||!_(ye,ne);return W=!1,ne=ye,he},K)}e.latch=v;function y(G,_,K){return[e.filter(G,_,K),e.filter(G,W=>!_(W),K)]}e.split=y;function S(G,_=!1,K=[],W){let ne=K.slice(),ye=G(Ze=>{ne?ne.push(Ze):tt.fire(Ze)});W&&W.add(ye);const he=()=>{ne?.forEach(Ze=>tt.fire(Ze)),ne=null},tt=new I({onWillAddFirstListener(){ye||(ye=G(Ze=>tt.fire(Ze)),W&&W.add(ye))},onDidAddFirstListener(){ne&&(_?setTimeout(he):he())},onDidRemoveLastListener(){ye&&ye.dispose(),ye=null}});return W&&W.add(tt),tt.event}e.buffer=S;function x(G,_){return(W,ne,ye)=>{const he=_(new D);return G(function(tt){const Ze=he.evaluate(tt);Ze!==P&&W.call(ne,Ze)},void 0,ye)}}e.chain=x;const P=Symbol("HaltChainable");class D{constructor(){this.f=[]}map(_){return this.f.push(_),this}forEach(_){return this.f.push(K=>(_(K),K)),this}filter(_){return this.f.push(K=>_(K)?K:P),this}reduce(_,K){let W=K;return this.f.push(ne=>(W=_(W,ne),W)),this}latch(_=(K,W)=>K===W){let K=!0,W;return this.f.push(ne=>{const ye=K||!_(ne,W);return K=!1,W=ne,ye?ne:P}),this}evaluate(_){for(const K of this.f)if(_=K(_),_===P)break;return _}}function N(G,_,K=W=>W){const W=(...tt)=>he.fire(K(...tt)),ne=()=>G.on(_,W),ye=()=>G.removeListener(_,W),he=new I({onWillAddFirstListener:ne,onDidRemoveLastListener:ye});return he.event}e.fromNodeEventEmitter=N;function H(G,_,K=W=>W){const W=(...tt)=>he.fire(K(...tt)),ne=()=>G.addEventListener(_,W),ye=()=>G.removeEventListener(_,W),he=new I({onWillAddFirstListener:ne,onDidRemoveLastListener:ye});return he.event}e.fromDOMEventEmitter=H;function Y(G){return new Promise(_=>r(G)(_))}e.toPromise=Y;function B(G){const _=new I;return G.then(K=>{_.fire(K)},()=>{_.fire(void 0)}).finally(()=>{_.dispose()}),_.event}e.fromPromise=B;function M(G,_){return G(K=>_.fire(K))}e.forward=M;function re(G,_,K){return _(K),G(W=>_(W))}e.runAndSubscribe=re;class ae{constructor(_,K){this._observable=_,this.f=0,this.g=!1;const W={onWillAddFirstListener:()=>{_.addObserver(this),this._observable.reportChanges()},onDidRemoveLastListener:()=>{_.removeObserver(this)}};K||t(W),this.emitter=new I(W),K&&K.add(this.emitter)}beginUpdate(_){this.f++}handlePossibleChange(_){}handleChange(_,K){this.g=!0}endUpdate(_){this.f--,this.f===0&&(this._observable.reportChanges(),this.g&&(this.g=!1,this.emitter.fire(this._observable.get())))}}function fe(G,_){return new ae(G,_).emitter.event}e.fromObservable=fe;function Je(G){return(_,K,W)=>{let ne=0,ye=!1;const he={beginUpdate(){ne++},endUpdate(){ne--,ne===0&&(G.reportChanges(),ye&&(ye=!1,_.call(K)))},handlePossibleChange(){},handleChange(){ye=!0}};G.addObserver(he),G.reportChanges();const tt={dispose(){G.removeObserver(he)}};return W instanceof ue?W.add(tt):Array.isArray(W)&&W.push(tt),tt}}e.fromObservableLight=Je})(ze||(ze={}));var $D=class h4{static{this.all=new Set}static{this.f=0}constructor(t){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${t}_${h4.f++}`,h4.all.add(this)}start(t){this.g=new ri,this.listenerCount=t}stop(){if(this.g){const t=this.g.elapsed();this.durations.push(t),this.elapsedOverall+=t,this.invocationCount+=1,this.g=void 0}}},Y4=-1,CD=class oI{static{this.f=1}constructor(t,i,r=(oI.f++).toString(16).padStart(3,"0")){this.j=t,this.threshold=i,this.name=r,this.h=0}dispose(){this.g?.clear()}check(t,i){const r=this.threshold;if(r<=0||i<r)return;this.g||(this.g=new Map);const s=this.g.get(t.value)||0;if(this.g.set(t.value,s+1),this.h-=1,this.h<=0){this.h=r*.5;const[n,o]=this.getMostFrequentStack(),a=`[${this.name}] potential listener LEAK detected, having ${i} listeners already. MOST frequent listener (${o}):`;console.warn(a),console.warn(n);const c=new ID(a,n);this.j(c)}return()=>{const n=this.g.get(t.value)||0;this.g.set(t.value,n-1)}}getMostFrequentStack(){if(!this.g)return;let t,i=0;for(const[r,s]of this.g)(!t||i<s)&&(t=[r,s],i=s);return t}},jm=class aI{static create(){const t=new Error;return new aI(t.stack??"")}constructor(t){this.value=t}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},ID=class extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}},PD=class extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}},DD=0,Wh=class{constructor(e){this.value=e,this.id=DD++}},AD=2,X4=(e,t)=>{if(e instanceof Wh)t(e);else for(let i=0;i<e.length;i++){const r=e[i];r&&t(r)}},zh;if(xD){const e=[];setInterval(()=>{e.length!==0&&(console.warn("[LEAKING LISTENERS] GC'ed these listeners that were NOT yet disposed:"),console.warn(e.join(`
`)),e.length=0)},3e3),zh=new FinalizationRegistry(t=>{typeof t=="string"&&e.push(t)})}var I=class{constructor(e){this.z=0,this.f=e,this.g=Y4>0||this.f?.leakWarningThreshold?new CD(e?.onListenerError??Et,this.f?.leakWarningThreshold??Y4):void 0,this.j=this.f?._profName?new $D(this.f._profName):void 0,this.w=this.f?.deliveryQueue}dispose(){if(!this.m){if(this.m=!0,this.w?.current===this&&this.w.reset(),this.u){if(Q4){const e=this.u;queueMicrotask(()=>{X4(e,t=>t.stack?.print())})}this.u=void 0,this.z=0}this.f?.onDidRemoveLastListener?.(),this.g?.dispose()}}get event(){return this.q??=(e,t,i)=>{if(this.g&&this.z>this.g.threshold**2){const a=`[${this.g.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this.z} vs ${this.g.threshold})`;console.warn(a);const c=this.g.getMostFrequentStack()??["UNKNOWN stack",-1],l=new PD(`${a}. HINT: Stack shows most frequent listener (${c[1]}-times)`,c[0]);return(this.f?.onListenerError||Et)(l),X.None}if(this.m)return X.None;t&&(e=e.bind(t));const r=new Wh(e);let s,n;this.g&&this.z>=Math.ceil(this.g.threshold*.2)&&(r.stack=jm.create(),s=this.g.check(r.stack,this.z+1)),Q4&&(r.stack=n??jm.create()),this.u?this.u instanceof Wh?(this.w??=new RD,this.u=[this.u,r]):this.u.push(r):(this.f?.onWillAddFirstListener?.(this),this.u=r,this.f?.onDidAddFirstListener?.(this)),this.f?.onDidAddListener?.(this),this.z++;const o=ee(()=>{zh?.unregister(o),s?.(),this.A(r)});if(i instanceof ue?i.add(o):Array.isArray(i)&&i.push(o),zh){const a=new Error().stack.split(`
`).slice(2,3).join(`
`).trim(),c=/(file:|vscode-file:\/\/vscode-app)?(\/[^:]*:\d+:\d+)/.exec(a);zh.register(o,c?.[2]??a,o)}return o},this.q}A(e){if(this.f?.onWillRemoveListener?.(this),!this.u)return;if(this.z===1){this.u=void 0,this.f?.onDidRemoveLastListener?.(this),this.z=0;return}const t=this.u,i=t.indexOf(e);if(i===-1)throw console.log("disposed?",this.m),console.log("size?",this.z),console.log("arr?",JSON.stringify(this.u)),new Error("Attempted to dispose unknown listener");this.z--,t[i]=void 0;const r=this.w.current===this;if(this.z*AD<=t.length){let s=0;for(let n=0;n<t.length;n++)t[n]?t[s++]=t[n]:r&&s<this.w.end&&(this.w.end--,s<this.w.i&&this.w.i--);t.length=s}}B(e,t){if(!e)return;const i=this.f?.onListenerError||Et;if(!i){e.value(t);return}try{e.value(t)}catch(r){i(r)}}C(e){const t=e.current.u;for(;e.i<e.end;)this.B(t[e.i++],e.value);e.reset()}fire(e){if(this.w?.current&&(this.C(this.w),this.j?.stop()),this.j?.start(this.z),this.u)if(this.u instanceof Wh)this.B(this.u,e);else{const t=this.w;t.enqueue(this,e,this.u.length),this.C(t)}this.j?.stop()}hasListeners(){return this.z>0}},RD=class{constructor(){this.i=-1,this.end=0}enqueue(e,t,i){this.i=0,this.end=i,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},el=class extends I{async fireAsync(e,t,i){if(this.u)for(this.h||(this.h=new Kc),X4(this.u,r=>this.h.push([r.value,e]));this.h.size>0&&!t.isCancellationRequested;){const[r,s]=this.h.shift(),n=[],o={...s,token:t,waitUntil:a=>{if(Object.isFrozen(n))throw new Error("waitUntil can NOT be called asynchronous");i&&(a=i(a,r)),n.push(a)}};try{r(o)}catch(a){Et(a);continue}Object.freeze(n),await Promise.allSettled(n).then(a=>{for(const c of a)c.status==="rejected"&&Et(c.reason)})}}},tl=class extends I{get isPaused(){return this.h!==0}constructor(e){super(e),this.h=0,this.s=new Kc,this.t=e?.merge}pause(){this.h++}resume(){if(this.h!==0&&--this.h===0)if(this.t){if(this.s.size>0){const e=Array.from(this.s);this.s.clear(),super.fire(this.t(e))}}else for(;!this.h&&this.s.size!==0;)super.fire(this.s.shift())}fire(e){this.z&&(this.h!==0?this.s.push(e):super.fire(e))}},TD=class extends tl{constructor(e){super(e),this.k=e.delay??100}fire(e){this.o||(this.pause(),this.o=setTimeout(()=>{this.o=void 0,this.resume()},this.k)),super.fire(e)}},LD=class{constructor(){this.f=!1,this.g=ze.None,this.h=X.None,this.j=new I({onDidAddFirstListener:()=>{this.f=!0,this.h=this.g(this.j.fire,this.j)},onDidRemoveLastListener:()=>{this.f=!1,this.h.dispose()}}),this.event=this.j.event}set input(e){this.g=e,this.f&&(this.h.dispose(),this.h=e(this.j.fire,this.j))}dispose(){this.h.dispose(),this.j.dispose()}},Z4=Object.freeze(function(e,t){const i=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(i)}}}),Ge;(function(e){function t(i){return i===e.None||i===e.Cancelled||i instanceof Vh?!0:!i||typeof i!="object"?!1:typeof i.isCancellationRequested=="boolean"&&typeof i.onCancellationRequested=="function"}e.isCancellationToken=t,e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:ze.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Z4})})(Ge||(Ge={}));var Vh=class{constructor(){this.a=!1,this.b=null}cancel(){this.a||(this.a=!0,this.b&&(this.b.fire(void 0),this.dispose()))}get isCancellationRequested(){return this.a}get onCancellationRequested(){return this.a?Z4:(this.b||(this.b=new I),this.b.event)}dispose(){this.b&&(this.b.dispose(),this.b=null)}},lt=class{constructor(e){this.f=void 0,this.g=void 0,this.g=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this.f||(this.f=new Vh),this.f}cancel(){this.f?this.f instanceof Vh&&this.f.cancel():this.f=Ge.Cancelled}dispose(e=!1){e&&this.cancel(),this.g?.dispose(),this.f?this.f instanceof Vh&&this.f.dispose():this.f=Ge.None}},K4;(function(e){e[e.PRO=0]="PRO",e[e.LITE=1]="LITE",e[e.UX_SIMPLE=2]="UX_SIMPLE"})(K4||(K4={}));var qh;(function(e){e.YINLI="Yinli",e.SPRING="Spring"})(qh||(qh={}));var e5;(function(e){e.CN="cn",e.I18N="i18n"})(e5||(e5={}));var t5;(function(e){e.Yinli="Yinli",e.Spring="Spring"})(t5||(t5={}));var ND="ByteIDEClientFlag";function OD(){return globalThis._VSCODE_NLS_MESSAGES}function i5(){return globalThis._VSCODE_NLS_LANGUAGE}var FD=i5()==="pseudo"||typeof document<"u"&&document.location&&typeof document.location.hash=="string"&&document.location.hash.indexOf("pseudo=true")>=0;function Gh(e,t){let i;return t.length===0?i=e:i=e.replace(/\{(\d+)\}/g,(r,s)=>{const n=s[0],o=t[n];let a=r;return typeof o=="string"?a=o:(typeof o=="number"||typeof o=="boolean"||o===void 0||o===null)&&(a=String(o)),a}),FD&&(i="\uFF3B"+i.replace(/[aouei]/g,"$&$&")+"\uFF3D"),i}function p(e,t,...i){return Gh(typeof e=="number"?r5(e,t):t,i)}function r5(e,t){const i=OD()?.[e];if(typeof i!="string"){if(typeof t=="string")return t;throw new Error(`!!! NLS MISSING: ${e} !!!`)}return i}function Hm(e,t,...i){let r;typeof e=="number"?r=r5(e,t):r=t;const s=Gh(r,i);return{value:s,original:t===r?s:Gh(t,i)}}var eo="en",il=!1,rl=!1,sl=!1,MD=!1,s5=!1,Bm=!1,UD=!1,n5=!1,o5=!1,_D=!1,Jh=void 0,Qh=eo,a5=eo,jD=void 0,ws=void 0,HD=!1,bs=globalThis,Yi=void 0;typeof bs.vscode<"u"&&typeof bs.vscode.process<"u"?Yi=bs.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(Yi=process);var c5=typeof Yi?.versions?.electron=="string",BD=c5&&Yi?.type==="renderer";if(typeof Yi=="object"){il=Yi.platform==="win32",rl=Yi.platform==="darwin",sl=Yi.platform==="linux",MD=sl&&!!Yi.env.SNAP&&!!Yi.env.SNAP_REVISION,UD=c5,o5=!!Yi.env.CI||!!Yi.env.BUILD_ARTIFACTSTAGINGDIRECTORY,Jh=eo,Qh=eo;const e=Yi.env.VSCODE_NLS_CONFIG;if(e)try{const t=JSON.parse(e);Jh=t.userLocale,a5=t.osLocale,Qh=t.resolvedLanguage||eo,jD=t.languagePack?.translationsConfigFile}catch{}s5=!0}else typeof navigator=="object"&&!BD?(ws=navigator.userAgent,il=ws.indexOf("Windows")>=0,rl=ws.indexOf("Macintosh")>=0,n5=(ws.indexOf("Macintosh")>=0||ws.indexOf("iPad")>=0||ws.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,sl=ws.indexOf("Linux")>=0,_D=ws?.indexOf("Mobi")>=0,Bm=!0,HD=ND in globalThis,Qh=i5()||eo,Jh=navigator.language.toLowerCase(),a5=Jh):console.error("Unable to resolve platform.");var l5;(function(e){e[e.Web=0]="Web",e[e.Mac=1]="Mac",e[e.Linux=2]="Linux",e[e.Windows=3]="Windows"})(l5||(l5={}));function WD(e){switch(e){case 1:return"Mac";case 2:return"Linux";case 3:return"Windows";case 0:default:return"Web"}}var Yh=0;rl?Yh=1:il?Yh=3:sl&&(Yh=2);var it=il,Dt=rl,At=sl,u5=s5,Wm=Bm,zD=Bm&&typeof bs.importScripts=="function",VD=zD?bs.origin:void 0,to=o5,qD=Yh,qr=ws,on=Qh,h5;(function(e){function t(){return on}e.value=t;function i(){return on.length===2?on==="en":on.length>=3?on[0]==="e"&&on[1]==="n"&&on[2]==="-":!1}e.isDefaultVariant=i;function r(){return on==="en"}e.isDefault=r})(h5||(h5={}));var GD=typeof bs.postMessage=="function"&&!bs.importScripts,d5=(()=>{if(GD){const e=[];bs.addEventListener("message",i=>{if(i.data&&i.data.vscodeScheduleAsyncWork)for(let r=0,s=e.length;r<s;r++){const n=e[r];if(n.id===i.data.vscodeScheduleAsyncWork){e.splice(r,1),n.callback();return}}});let t=0;return i=>{const r=++t;e.push({id:r,callback:i}),bs.postMessage({vscodeScheduleAsyncWork:r},"*")}}return e=>setTimeout(e)})(),f5;(function(e){e[e.Windows=1]="Windows",e[e.Macintosh=2]="Macintosh",e[e.Linux=3]="Linux"})(f5||(f5={}));var p5;(function(e){e.Windows="Win",e.Macintosh="Mac",e.Linux="Linux"})(p5||(p5={}));var g5=rl||n5?2:il?1:3,m5=!0,v5=!1;function w5(){if(!v5){v5=!0;const e=new Uint8Array(2);e[0]=1,e[1]=2,m5=new Uint16Array(e.buffer)[0]===513}return m5}var zm=!!(qr&&qr.indexOf("Chrome")>=0),JD=!!(qr&&qr.indexOf("Firefox")>=0),QD=!!(!zm&&qr&&qr.indexOf("Safari")>=0),b5=!!(qr&&qr.indexOf("Edg/")>=0),wq=!!(qr&&qr.indexOf("Android")>=0),io,Vm=globalThis.vscode;if(typeof Vm<"u"&&typeof Vm.process<"u"){const e=Vm.process;io={get platform(){return e.platform},get arch(){return e.arch},get env(){return e.env},cwd(){return e.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?io={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:io={get platform(){return it?"win32":Dt?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var ro=io.cwd,si=io.env,YD=io.platform,bq=io.arch,XD=65,ZD=97,KD=90,eA=122,an=46,ni=47,_i=92,cn=58,tA=63,y5=class extends Error{constructor(e,t,i){let r;typeof t=="string"&&t.indexOf("not ")===0?(r="must not be",t=t.replace(/^not /,"")):r="must be";const s=e.indexOf(".")!==-1?"property":"argument";let n=`The "${e}" ${s} ${r} of type ${t}`;n+=`. Received type ${typeof i}`,super(n),this.code="ERR_INVALID_ARG_TYPE"}};function iA(e,t){if(e===null||typeof e!="object")throw new y5(t,"Object",e)}function Ot(e,t){if(typeof e!="string")throw new y5(t,"string",e)}var ji=YD==="win32";function Te(e){return e===ni||e===_i}function qm(e){return e===ni}function ln(e){return e>=XD&&e<=KD||e>=ZD&&e<=eA}function Xh(e,t,i,r){let s="",n=0,o=-1,a=0,c=0;for(let l=0;l<=e.length;++l){if(l<e.length)c=e.charCodeAt(l);else{if(r(c))break;c=ni}if(r(c)){if(!(o===l-1||a===1))if(a===2){if(s.length<2||n!==2||s.charCodeAt(s.length-1)!==an||s.charCodeAt(s.length-2)!==an){if(s.length>2){const u=s.lastIndexOf(i);u===-1?(s="",n=0):(s=s.slice(0,u),n=s.length-1-s.lastIndexOf(i)),o=l,a=0;continue}else if(s.length!==0){s="",n=0,o=l,a=0;continue}}t&&(s+=s.length>0?`${i}..`:"..",n=2)}else s.length>0?s+=`${i}${e.slice(o+1,l)}`:s=e.slice(o+1,l),n=l-o-1;o=l,a=0}else c===an&&a!==-1?++a:a=-1}return s}function rA(e){return e?`${e[0]==="."?"":"."}${e}`:""}function E5(e,t){iA(t,"pathObject");const i=t.dir||t.root,r=t.base||`${t.name||""}${rA(t.ext)}`;return i?i===t.root?`${i}${r}`:`${i}${e}${r}`:r}var Ft={resolve(...e){let t="",i="",r=!1;for(let s=e.length-1;s>=-1;s--){let n;if(s>=0){if(n=e[s],Ot(n,`paths[${s}]`),n.length===0)continue}else t.length===0?n=ro():(n=si[`=${t}`]||ro(),(n===void 0||n.slice(0,2).toLowerCase()!==t.toLowerCase()&&n.charCodeAt(2)===_i)&&(n=`${t}\\`));const o=n.length;let a=0,c="",l=!1;const u=n.charCodeAt(0);if(o===1)Te(u)&&(a=1,l=!0);else if(Te(u))if(l=!0,Te(n.charCodeAt(1))){let h=2,d=h;for(;h<o&&!Te(n.charCodeAt(h));)h++;if(h<o&&h!==d){const f=n.slice(d,h);for(d=h;h<o&&Te(n.charCodeAt(h));)h++;if(h<o&&h!==d){for(d=h;h<o&&!Te(n.charCodeAt(h));)h++;(h===o||h!==d)&&(c=`\\\\${f}\\${n.slice(d,h)}`,a=h)}}}else a=1;else ln(u)&&n.charCodeAt(1)===cn&&(c=n.slice(0,2),a=2,o>2&&Te(n.charCodeAt(2))&&(l=!0,a=3));if(c.length>0)if(t.length>0){if(c.toLowerCase()!==t.toLowerCase())continue}else t=c;if(r){if(t.length>0)break}else if(i=`${n.slice(a)}\\${i}`,r=l,l&&t.length>0)break}return i=Xh(i,!r,"\\",Te),r?`${t}\\${i}`:`${t}${i}`||"."},normalize(e){Ot(e,"path");const t=e.length;if(t===0)return".";let i=0,r,s=!1;const n=e.charCodeAt(0);if(t===1)return qm(n)?"\\":e;if(Te(n))if(s=!0,Te(e.charCodeAt(1))){let a=2,c=a;for(;a<t&&!Te(e.charCodeAt(a));)a++;if(a<t&&a!==c){const l=e.slice(c,a);for(c=a;a<t&&Te(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&!Te(e.charCodeAt(a));)a++;if(a===t)return`\\\\${l}\\${e.slice(c)}\\`;a!==c&&(r=`\\\\${l}\\${e.slice(c,a)}`,i=a)}}}else i=1;else ln(n)&&e.charCodeAt(1)===cn&&(r=e.slice(0,2),i=2,t>2&&Te(e.charCodeAt(2))&&(s=!0,i=3));let o=i<t?Xh(e.slice(i),!s,"\\",Te):"";return o.length===0&&!s&&(o="."),o.length>0&&Te(e.charCodeAt(t-1))&&(o+="\\"),r===void 0?s?`\\${o}`:o:s?`${r}\\${o}`:`${r}${o}`},isAbsolute(e){Ot(e,"path");const t=e.length;if(t===0)return!1;const i=e.charCodeAt(0);return Te(i)||t>2&&ln(i)&&e.charCodeAt(1)===cn&&Te(e.charCodeAt(2))},join(...e){if(e.length===0)return".";let t,i;for(let n=0;n<e.length;++n){const o=e[n];Ot(o,"path"),o.length>0&&(t===void 0?t=i=o:t+=`\\${o}`)}if(t===void 0)return".";let r=!0,s=0;if(typeof i=="string"&&Te(i.charCodeAt(0))){++s;const n=i.length;n>1&&Te(i.charCodeAt(1))&&(++s,n>2&&(Te(i.charCodeAt(2))?++s:r=!1))}if(r){for(;s<t.length&&Te(t.charCodeAt(s));)s++;s>=2&&(t=`\\${t.slice(s)}`)}return Ft.normalize(t)},relative(e,t){if(Ot(e,"from"),Ot(t,"to"),e===t)return"";const i=Ft.resolve(e),r=Ft.resolve(t);if(i===r||(e=i.toLowerCase(),t=r.toLowerCase(),e===t))return"";let s=0;for(;s<e.length&&e.charCodeAt(s)===_i;)s++;let n=e.length;for(;n-1>s&&e.charCodeAt(n-1)===_i;)n--;const o=n-s;let a=0;for(;a<t.length&&t.charCodeAt(a)===_i;)a++;let c=t.length;for(;c-1>a&&t.charCodeAt(c-1)===_i;)c--;const l=c-a,u=o<l?o:l;let h=-1,d=0;for(;d<u;d++){const g=e.charCodeAt(s+d);if(g!==t.charCodeAt(a+d))break;g===_i&&(h=d)}if(d!==u){if(h===-1)return r}else{if(l>u){if(t.charCodeAt(a+d)===_i)return r.slice(a+d+1);if(d===2)return r.slice(a+d)}o>u&&(e.charCodeAt(s+d)===_i?h=d:d===2&&(h=3)),h===-1&&(h=0)}let f="";for(d=s+h+1;d<=n;++d)(d===n||e.charCodeAt(d)===_i)&&(f+=f.length===0?"..":"\\..");return a+=h,f.length>0?`${f}${r.slice(a,c)}`:(r.charCodeAt(a)===_i&&++a,r.slice(a,c))},toNamespacedPath(e){if(typeof e!="string"||e.length===0)return e;const t=Ft.resolve(e);if(t.length<=2)return e;if(t.charCodeAt(0)===_i){if(t.charCodeAt(1)===_i){const i=t.charCodeAt(2);if(i!==tA&&i!==an)return`\\\\?\\UNC\\${t.slice(2)}`}}else if(ln(t.charCodeAt(0))&&t.charCodeAt(1)===cn&&t.charCodeAt(2)===_i)return`\\\\?\\${t}`;return e},dirname(e){Ot(e,"path");const t=e.length;if(t===0)return".";let i=-1,r=0;const s=e.charCodeAt(0);if(t===1)return Te(s)?e:".";if(Te(s)){if(i=r=1,Te(e.charCodeAt(1))){let a=2,c=a;for(;a<t&&!Te(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&Te(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&!Te(e.charCodeAt(a));)a++;if(a===t)return e;a!==c&&(i=r=a+1)}}}}else ln(s)&&e.charCodeAt(1)===cn&&(i=t>2&&Te(e.charCodeAt(2))?3:2,r=i);let n=-1,o=!0;for(let a=t-1;a>=r;--a)if(Te(e.charCodeAt(a))){if(!o){n=a;break}}else o=!1;if(n===-1){if(i===-1)return".";n=i}return e.slice(0,n)},basename(e,t){t!==void 0&&Ot(t,"suffix"),Ot(e,"path");let i=0,r=-1,s=!0,n;if(e.length>=2&&ln(e.charCodeAt(0))&&e.charCodeAt(1)===cn&&(i=2),t!==void 0&&t.length>0&&t.length<=e.length){if(t===e)return"";let o=t.length-1,a=-1;for(n=e.length-1;n>=i;--n){const c=e.charCodeAt(n);if(Te(c)){if(!s){i=n+1;break}}else a===-1&&(s=!1,a=n+1),o>=0&&(c===t.charCodeAt(o)?--o===-1&&(r=n):(o=-1,r=a))}return i===r?r=a:r===-1&&(r=e.length),e.slice(i,r)}for(n=e.length-1;n>=i;--n)if(Te(e.charCodeAt(n))){if(!s){i=n+1;break}}else r===-1&&(s=!1,r=n+1);return r===-1?"":e.slice(i,r)},extname(e){Ot(e,"path");let t=0,i=-1,r=0,s=-1,n=!0,o=0;e.length>=2&&e.charCodeAt(1)===cn&&ln(e.charCodeAt(0))&&(t=r=2);for(let a=e.length-1;a>=t;--a){const c=e.charCodeAt(a);if(Te(c)){if(!n){r=a+1;break}continue}s===-1&&(n=!1,s=a+1),c===an?i===-1?i=a:o!==1&&(o=1):i!==-1&&(o=-1)}return i===-1||s===-1||o===0||o===1&&i===s-1&&i===r+1?"":e.slice(i,s)},format:E5.bind(null,"\\"),parse(e){Ot(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;const i=e.length;let r=0,s=e.charCodeAt(0);if(i===1)return Te(s)?(t.root=t.dir=e,t):(t.base=t.name=e,t);if(Te(s)){if(r=1,Te(e.charCodeAt(1))){let h=2,d=h;for(;h<i&&!Te(e.charCodeAt(h));)h++;if(h<i&&h!==d){for(d=h;h<i&&Te(e.charCodeAt(h));)h++;if(h<i&&h!==d){for(d=h;h<i&&!Te(e.charCodeAt(h));)h++;h===i?r=h:h!==d&&(r=h+1)}}}}else if(ln(s)&&e.charCodeAt(1)===cn){if(i<=2)return t.root=t.dir=e,t;if(r=2,Te(e.charCodeAt(2))){if(i===3)return t.root=t.dir=e,t;r=3}}r>0&&(t.root=e.slice(0,r));let n=-1,o=r,a=-1,c=!0,l=e.length-1,u=0;for(;l>=r;--l){if(s=e.charCodeAt(l),Te(s)){if(!c){o=l+1;break}continue}a===-1&&(c=!1,a=l+1),s===an?n===-1?n=l:u!==1&&(u=1):n!==-1&&(u=-1)}return a!==-1&&(n===-1||u===0||u===1&&n===a-1&&n===o+1?t.base=t.name=e.slice(o,a):(t.name=e.slice(o,n),t.base=e.slice(o,a),t.ext=e.slice(n,a))),o>0&&o!==r?t.dir=e.slice(0,o-1):t.dir=t.root,t},sep:"\\",delimiter:";",win32:null,posix:null},sA=(()=>{if(ji){const e=/\\/g;return()=>{const t=ro().replace(e,"/");return t.slice(t.indexOf("/"))}}return()=>ro()})(),Le={resolve(...e){let t="",i=!1;for(let r=e.length-1;r>=-1&&!i;r--){const s=r>=0?e[r]:sA();Ot(s,`paths[${r}]`),s.length!==0&&(t=`${s}/${t}`,i=s.charCodeAt(0)===ni)}return t=Xh(t,!i,"/",qm),i?`/${t}`:t.length>0?t:"."},normalize(e){if(Ot(e,"path"),e.length===0)return".";const t=e.charCodeAt(0)===ni,i=e.charCodeAt(e.length-1)===ni;return e=Xh(e,!t,"/",qm),e.length===0?t?"/":i?"./":".":(i&&(e+="/"),t?`/${e}`:e)},isAbsolute(e){return Ot(e,"path"),e.length>0&&e.charCodeAt(0)===ni},join(...e){if(e.length===0)return".";let t;for(let i=0;i<e.length;++i){const r=e[i];Ot(r,"path"),r.length>0&&(t===void 0?t=r:t+=`/${r}`)}return t===void 0?".":Le.normalize(t)},relative(e,t){if(Ot(e,"from"),Ot(t,"to"),e===t||(e=Le.resolve(e),t=Le.resolve(t),e===t))return"";const i=1,r=e.length,s=r-i,n=1,o=t.length-n,a=s<o?s:o;let c=-1,l=0;for(;l<a;l++){const h=e.charCodeAt(i+l);if(h!==t.charCodeAt(n+l))break;h===ni&&(c=l)}if(l===a)if(o>a){if(t.charCodeAt(n+l)===ni)return t.slice(n+l+1);if(l===0)return t.slice(n+l)}else s>a&&(e.charCodeAt(i+l)===ni?c=l:l===0&&(c=0));let u="";for(l=i+c+1;l<=r;++l)(l===r||e.charCodeAt(l)===ni)&&(u+=u.length===0?"..":"/..");return`${u}${t.slice(n+c)}`},toNamespacedPath(e){return e},dirname(e){if(Ot(e,"path"),e.length===0)return".";const t=e.charCodeAt(0)===ni;let i=-1,r=!0;for(let s=e.length-1;s>=1;--s)if(e.charCodeAt(s)===ni){if(!r){i=s;break}}else r=!1;return i===-1?t?"/":".":t&&i===1?"//":e.slice(0,i)},basename(e,t){t!==void 0&&Ot(t,"ext"),Ot(e,"path");let i=0,r=-1,s=!0,n;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t===e)return"";let o=t.length-1,a=-1;for(n=e.length-1;n>=0;--n){const c=e.charCodeAt(n);if(c===ni){if(!s){i=n+1;break}}else a===-1&&(s=!1,a=n+1),o>=0&&(c===t.charCodeAt(o)?--o===-1&&(r=n):(o=-1,r=a))}return i===r?r=a:r===-1&&(r=e.length),e.slice(i,r)}for(n=e.length-1;n>=0;--n)if(e.charCodeAt(n)===ni){if(!s){i=n+1;break}}else r===-1&&(s=!1,r=n+1);return r===-1?"":e.slice(i,r)},extname(e){Ot(e,"path");let t=-1,i=0,r=-1,s=!0,n=0;for(let o=e.length-1;o>=0;--o){const a=e.charCodeAt(o);if(a===ni){if(!s){i=o+1;break}continue}r===-1&&(s=!1,r=o+1),a===an?t===-1?t=o:n!==1&&(n=1):t!==-1&&(n=-1)}return t===-1||r===-1||n===0||n===1&&t===r-1&&t===i+1?"":e.slice(t,r)},format:E5.bind(null,"/"),parse(e){Ot(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;const i=e.charCodeAt(0)===ni;let r;i?(t.root="/",r=1):r=0;let s=-1,n=0,o=-1,a=!0,c=e.length-1,l=0;for(;c>=r;--c){const u=e.charCodeAt(c);if(u===ni){if(!a){n=c+1;break}continue}o===-1&&(a=!1,o=c+1),u===an?s===-1?s=c:l!==1&&(l=1):s!==-1&&(l=-1)}if(o!==-1){const u=n===0&&i?1:n;s===-1||l===0||l===1&&s===o-1&&s===n+1?t.base=t.name=e.slice(u,o):(t.name=e.slice(u,s),t.base=e.slice(u,o),t.ext=e.slice(s,o))}return n>0?t.dir=e.slice(0,n-1):i&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};Le.win32=Ft.win32=Ft,Le.posix=Ft.posix=Le;var ys=ji?Ft.normalize:Le.normalize,lr=ji?Ft.isAbsolute:Le.isAbsolute,rt=ji?Ft.join:Le.join,nA=ji?Ft.resolve:Le.resolve,so=ji?Ft.relative:Le.relative,wi=ji?Ft.dirname:Le.dirname,ut=ji?Ft.basename:Le.basename,Zh=ji?Ft.extname:Le.extname,yq=ji?Ft.format:Le.format,Eq=ji?Ft.parse:Le.parse,Sq=ji?Ft.toNamespacedPath:Le.toNamespacedPath,ft=ji?Ft.sep:Le.sep,S5=ji?Ft.delimiter:Le.delimiter;function oA(e){return e}var aA=class{constructor(e,t){this.a=void 0,this.b=void 0,typeof e=="function"?(this.c=e,this.d=oA):(this.c=t,this.d=e.getCacheKey)}get(e){const t=this.d(e);return this.b!==t&&(this.b=t,this.a=this.c(e)),this.a}},Hi=class{constructor(e){this.d=e,this.a=!1}get hasValue(){return this.a}get value(){if(!this.a)try{this.b=this.d()}catch(e){this.c=e}finally{this.a=!0}if(this.c)throw this.c;return this.b}get rawValue(){return this.b}};function Kh(e){return!e||typeof e!="string"?!0:e.trim().length===0}var cA=/{([^}]+)}/g;function x5(e,t){return Object.keys(t).length===0?e:e.replace(cA,(i,r)=>t[r]??i)}function un(e){return e.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function lA(e,t){let i=0,r=e.indexOf(t);for(;r!==-1;)i++,r=e.indexOf(t,r+t.length);return i}function uA(e,t){if(!e||!t)return e;const i=t.length;if(i===0||e.length===0)return e;let r=0;for(;e.indexOf(t,r)===r;)r=r+i;return e.substring(r)}function Gr(e,t){if(!e||!t)return e;const i=t.length,r=e.length;if(i===0||r===0)return e;let s=r,n=-1;for(;n=e.lastIndexOf(t,s-1),!(n===-1||n+i!==s);){if(n===0)return"";s=n}return e.substring(0,s)}function hA(e){return e.replace(/\*/g,"")}function k5(e,t,i={}){if(!e)throw new Error("Cannot create regex from empty string");t||(e=un(e)),i.wholeWord&&(/\B/.test(e.charAt(0))||(e="\\b"+e),/\B/.test(e.charAt(e.length-1))||(e=e+"\\b"));let r="";return i.global&&(r+="g"),i.matchCase||(r+="i"),i.multiline&&(r+="m"),i.unicode&&(r+="u"),new RegExp(e,r)}function $5(e){return e.source==="^"||e.source==="^$"||e.source==="$"||e.source==="^\\s*$"?!1:!!(e.exec("")&&e.lastIndex===0)}function C5(e){return e.split(/\r\n|\r|\n/)}function Gm(e){for(let t=0,i=e.length;t<i;t++){const r=e.charCodeAt(t);if(r!==32&&r!==9)return t}return-1}function dA(e,t=e.length-1){for(let i=t;i>=0;i--){const r=e.charCodeAt(i);if(r!==32&&r!==9)return i}return-1}function fA(e,t,i){const r=[];let s=0;for(const n of e.matchAll(t)){if(r.push(e.slice(s,n.index)),n.index===void 0)throw new Error("match.index should be defined");s=n.index+n[0].length,r.push(i(n[0],...n.slice(1),n.index,e,n.groups))}return r.push(e.slice(s)),Promise.all(r).then(n=>n.join(""))}function no(e,t){return e<t?-1:e>t?1:0}function Jm(e,t,i=0,r=e.length,s=0,n=t.length){for(;i<r&&s<n;i++,s++){const c=e.charCodeAt(i),l=t.charCodeAt(s);if(c<l)return-1;if(c>l)return 1}const o=r-i,a=n-s;return o<a?-1:o>a?1:0}function I5(e,t){return nl(e,t,0,e.length,0,t.length)}function nl(e,t,i=0,r=e.length,s=0,n=t.length){for(;i<r&&s<n;i++,s++){let c=e.charCodeAt(i),l=t.charCodeAt(s);if(c===l)continue;if(c>=128||l>=128)return Jm(e.toLowerCase(),t.toLowerCase(),i,r,s,n);P5(c)&&(c-=32),P5(l)&&(l-=32);const u=c-l;if(u!==0)return u}const o=r-i,a=n-s;return o<a?-1:o>a?1:0}function P5(e){return e>=97&&e<=122}function D5(e){return e>=65&&e<=90}function xr(e,t){return e.length===t.length&&nl(e,t)===0}function ed(e,t){const i=t.length;return t.length>e.length?!1:nl(e,t,0,i)===0}function pA(e,t){const i=Math.min(e.length,t.length);let r;for(r=0;r<i;r++)if(e.charCodeAt(r)!==t.charCodeAt(r))return r;return i}function td(e){return 55296<=e&&e<=56319}function id(e){return 56320<=e&&e<=57343}function Qm(e,t){return(e-55296<<10)+(t-56320)+65536}function A5(e,t,i){const r=e.charCodeAt(i);if(td(r)&&i+1<t){const s=e.charCodeAt(i+1);if(id(s))return Qm(r,s)}return r}function gA(e,t){const i=e.charCodeAt(t-1);if(id(i)&&t>1){const r=e.charCodeAt(t-2);if(td(r))return Qm(r,i)}return i}var mA=class{get offset(){return this.e}constructor(e,t=0){this.c=e,this.d=e.length,this.e=t}setOffset(e){this.e=e}prevCodePoint(){const e=gA(this.c,this.e);return this.e-=e>=65536?2:1,e}nextCodePoint(){const e=A5(this.c,this.d,this.e);return this.e+=e>=65536?2:1,e}eol(){return this.e>=this.d}},vA=class{get offset(){return this.c.offset}constructor(e,t=0){this.c=new mA(e,t)}nextGraphemeLength(){const e=U5.getInstance(),t=this.c,i=t.offset;let r=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const s=t.offset,n=e.getGraphemeBreakType(t.nextCodePoint());if(F5(r,n)){t.setOffset(s);break}r=n}return t.offset-i}prevGraphemeLength(){const e=U5.getInstance(),t=this.c,i=t.offset;let r=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const s=t.offset,n=e.getGraphemeBreakType(t.prevCodePoint());if(F5(n,r)){t.setOffset(s);break}r=n}return i-t.offset}eol(){return this.c.eol()}};function R5(e,t){return new vA(e,t).nextGraphemeLength()}var Ym=void 0;function wA(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function T5(e){return Ym||(Ym=wA()),Ym.test(e)}var bA=/^[\t\n\r\x20-\x7E]*$/;function yA(e){return bA.test(e)}var EA=/[\u2028\u2029]/;function L5(e){return EA.test(e)}var SA="\uFEFF";function xA(e){return!!(e&&e.length>0&&e.charCodeAt(0)===65279)}function kA(e,t){if(!e||!t||e.length<t.length)return!1;const i=t.length,r=e.toLowerCase();let s=0,n=-1;for(;s<i;){const o=r.indexOf(t[s],n+1);if(o<0)return!1;n=o,s++}return!0}function N5(e,t=!1){return e?(t&&(e=e.replace(/\\./g,"")),e.toLowerCase()!==e):!1}function O5(e){return e.charAt(0).toUpperCase()+e.slice(1)}function $A(e,t=1){if(t===0)return"";let i=-1;do i=e.indexOf(`
`,i+1),t--;while(t>0&&i>=0);return i===-1?e:(e[i-1]==="\r"&&i--,e.substr(0,i))}function F5(e,t){return e===0?t!==5&&t!==7:e===2&&t===3?!1:e===4||e===2||e===3||t===4||t===2||t===3?!0:!(e===8&&(t===8||t===9||t===11||t===12)||(e===11||e===9)&&(t===9||t===10)||(e===12||e===10)&&t===10||t===5||t===13||t===7||e===1||e===13&&t===14||e===6&&t===6)}var M5;(function(e){e[e.Other=0]="Other",e[e.Prepend=1]="Prepend",e[e.CR=2]="CR",e[e.LF=3]="LF",e[e.Control=4]="Control",e[e.Extend=5]="Extend",e[e.Regional_Indicator=6]="Regional_Indicator",e[e.SpacingMark=7]="SpacingMark",e[e.L=8]="L",e[e.V=9]="V",e[e.T=10]="T",e[e.LV=11]="LV",e[e.LVT=12]="LVT",e[e.ZWJ=13]="ZWJ",e[e.Extended_Pictographic=14]="Extended_Pictographic"})(M5||(M5={}));var U5=class Ph{static{this.c=null}static getInstance(){return Ph.c||(Ph.c=new Ph),Ph.c}constructor(){this.d=CA()}getGraphemeBreakType(t){if(t<32)return t===10?3:t===13?2:4;if(t<127)return 0;const i=this.d,r=i.length/3;let s=1;for(;s<=r;)if(t<i[3*s])s=2*s;else if(t>i[3*s+1])s=2*s+1;else return i[3*s+2];return 0}};function CA(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}var _5;(function(e){e[e.zwj=8205]="zwj",e[e.emojiVariantSelector=65039]="emojiVariantSelector",e[e.enclosingKeyCap=8419]="enclosingKeyCap"})(_5||(_5={}));var xq=class Dh{static{this.c=new Hi(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'))}static{this.d=new aA({getCacheKey:JSON.stringify},t=>{function i(u){const h=new Map;for(let d=0;d<u.length;d+=2)h.set(u[d],u[d+1]);return h}function r(u,h){const d=new Map(u);for(const[f,g]of h)d.set(f,g);return d}function s(u,h){if(!u)return h;const d=new Map;for(const[f,g]of u)h.has(f)&&d.set(f,g);return d}const n=this.c.value;let o=t.filter(u=>!u.startsWith("_")&&u in n);o.length===0&&(o=["_default"]);let a;for(const u of o){const h=i(n[u]);a=s(a,h)}const c=i(n._common),l=r(c,a);return new Dh(l)})}static getInstance(t){return Dh.d.get(Array.from(t))}static{this.e=new Hi(()=>Object.keys(Dh.c.value).filter(t=>!t.startsWith("_")))}static getLocales(){return Dh.e.value}constructor(t){this.f=t}isAmbiguous(t){return this.f.has(t)}containsAmbiguousCharacter(t){for(let i=0;i<t.length;i++){const r=t.codePointAt(i);if(typeof r=="number"&&this.isAmbiguous(r))return!0}return!1}getPrimaryConfusable(t){return this.f.get(t)}getConfusableCodePoints(){return new Set(this.f.keys())}},kq=class Ah{static c(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static{this.d=void 0}static e(){return this.d||(this.d=new Set(Ah.c())),this.d}static isInvisibleCharacter(t){return Ah.e().has(t)}static containsInvisibleCharacter(t){for(let i=0;i<t.length;i++){const r=t.codePointAt(i);if(typeof r=="number"&&Ah.isInvisibleCharacter(r))return!0}return!1}static get codePoints(){return Ah.e()}};function De(e){return typeof e=="string"}function IA(e){return Array.isArray(e)&&e.every(t=>De(t))}function St(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&!(e instanceof RegExp)&&!(e instanceof Date)}function PA(e){const t=Object.getPrototypeOf(Uint8Array);return typeof e=="object"&&e instanceof t}function Xi(e){return typeof e=="number"&&!isNaN(e)}function ol(e){return typeof e>"u"}function oo(e){return!$t(e)}function $t(e){return ol(e)||e===null}function j5(e,t){if(!e)throw new Error(t?`Unexpected type, expected '${t}'`:"Unexpected type")}function ga(e){if($t(e))throw new Error("Assertion Failed: argument is undefined or null");return e}var DA=Object.prototype.hasOwnProperty;function H5(e){if(!St(e))return!1;for(const t in e)if(DA.call(e,t))return!1;return!0}function AA(e){return typeof e=="function"}function RA(e,t){if(De(t)){if(typeof e!==t)throw new Error(`argument does not match constraint: typeof ${t}`)}else if(AA(t)){try{if(e instanceof t)return}catch{}if(!$t(e)&&e.constructor===t||t.length===1&&t.call(void 0,e)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function hn(e){return e===47||e===92}function B5(e){return e.replace(/[\\/]/g,Le.sep)}function TA(e){return e.indexOf("/")===-1&&(e=B5(e)),/^[a-zA-Z]:(\/|$)/.test(e)&&(e="/"+e),e}function rd(e,t=Le.sep){if(!e)return"";const i=e.length,r=e.charCodeAt(0);if(hn(r)){if(hn(e.charCodeAt(1))&&!hn(e.charCodeAt(2))){let n=3;const o=n;for(;n<i&&!hn(e.charCodeAt(n));n++);if(o!==n&&!hn(e.charCodeAt(n+1))){for(n+=1;n<i;n++)if(hn(e.charCodeAt(n)))return e.slice(0,n+1).replace(/[\\/]/g,t)}}return t}else if(W5(r)&&e.charCodeAt(1)===58)return hn(e.charCodeAt(2))?e.slice(0,2)+t:e.slice(0,2);let s=e.indexOf("://");if(s!==-1){for(s+=3;s<i;s++)if(hn(e.charCodeAt(s)))return e.slice(0,s+1)}return""}var LA=/[\\/:\*\?"<>\|]/g,NA=/[/]/g,OA=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function FA(e,t=it){const i=t?LA:NA;return!(!e||e.length===0||/^\s+$/.test(e)||(i.lastIndex=0,i.test(e))||t&&OA.test(e)||e==="."||e===".."||t&&e[e.length-1]==="."||t&&e.length!==e.trim().length||e.length>255)}function Xm(e,t,i){const r=e===t;return!i||r?r:!e||!t?!1:xr(e,t)}function dn(e,t,i,r=ft){if(e===t)return!0;if(!e||!t||t.length>e.length)return!1;if(i){if(!ed(e,t))return!1;if(t.length===e.length)return!0;let n=t.length;return t.charAt(t.length-1)===r&&n--,e.charAt(n)===r}return t.charAt(t.length-1)!==r&&(t+=r),e.indexOf(t)===0}function W5(e){return e>=65&&e<=90||e>=97&&e<=122}function MA(e){return it?(e=Gr(e,ft),e.endsWith(":")&&(e+=ft)):(e=Gr(e,ft),e||(e=ft)),e}function z5(e){const t=ys(e);return it?e.length>3?!1:Zm(t)&&(e.length===2||t.charCodeAt(2)===92):t===Le.sep}function Zm(e,t=it){return t?W5(e.charCodeAt(0))&&e.charCodeAt(1)===58:!1}function V5(e,t=it){return Zm(e,t)?e[0]:void 0}var UA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",_A="BDEFGHIJKMOQRSTUVWXYZbdefghijkmoqrstuvwxyz0123456789";function jA(e,t,i=8){let r="";for(let n=0;n<i;n++){let o;n===0&&it&&!t&&(i===3||i===4)?o=_A:o=UA,r+=o.charAt(Math.floor(Math.random()*o.length))}let s;return t?s=`${t}-${r}`:s=r,e?rt(e,s):s}var HA=/^\w[\w\d+.-]*$/,BA=/^\//,WA=/^\/\//;function zA(e,t){if(!e.scheme&&t)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${e.authority}", path: "${e.path}", query: "${e.query}", fragment: "${e.fragment}"}`);if(e.scheme&&!HA.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path){if(e.authority){if(!BA.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(WA.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function VA(e,t){return!e&&!t?"file":e}function qA(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==kr&&(t=kr+t):t=kr;break}return t}var vt="",kr="/",GA=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,E=class pm{static isUri(t){return t instanceof pm?!0:t?typeof t.authority=="string"&&typeof t.fragment=="string"&&typeof t.path=="string"&&typeof t.query=="string"&&typeof t.scheme=="string"&&typeof t.fsPath=="string"&&typeof t.with=="function"&&typeof t.toString=="function":!1}constructor(t,i,r,s,n,o=!1){typeof t=="object"?(this.scheme=t.scheme||vt,this.authority=t.authority||vt,this.path=t.path||vt,this.query=t.query||vt,this.fragment=t.fragment||vt):(this.scheme=VA(t,o),this.authority=i||vt,this.path=qA(this.scheme,r||vt),this.query=s||vt,this.fragment=n||vt,zA(this,o))}get fsPath(){return sd(this,!1)}with(t){if(!t)return this;let{scheme:i,authority:r,path:s,query:n,fragment:o}=t;return i===void 0?i=this.scheme:i===null&&(i=vt),r===void 0?r=this.authority:r===null&&(r=vt),s===void 0?s=this.path:s===null&&(s=vt),n===void 0?n=this.query:n===null&&(n=vt),o===void 0?o=this.fragment:o===null&&(o=vt),i===this.scheme&&r===this.authority&&s===this.path&&n===this.query&&o===this.fragment?this:new ma(i,r,s,n,o)}static parse(t,i=!1){const r=GA.exec(t);return r?new ma(r[2]||vt,nd(r[4]||vt),nd(r[5]||vt),nd(r[7]||vt),nd(r[9]||vt),i):new ma(vt,vt,vt,vt,vt)}static file(t){let i=vt;if(it&&(t=t.replace(/\\/g,kr)),t[0]===kr&&t[1]===kr){const r=t.indexOf(kr,2);r===-1?(i=t.substring(2),t=kr):(i=t.substring(2,r),t=t.substring(r)||kr)}return new ma("file",i,t,vt,vt)}static from(t,i){return new ma(t.scheme,t.authority,t.path,t.query,t.fragment,i)}static joinPath(t,...i){if(!t.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let r;return it&&t.scheme==="file"?r=pm.file(Ft.join(sd(t,!0),...i)).path:r=Le.join(t.path,...i),t.with({path:r})}toString(t=!1){return Km(this,t)}toJSON(){return this}static revive(t){if(t){if(t instanceof pm)return t;{const i=new ma(t);return i._formatted=t.external??null,i._fsPath=t._sep===G5?t.fsPath??null:null,i}}else return t}[Symbol.for("debug.description")](){return`URI(${this.toString()})`}};function q5(e){return!e||typeof e!="object"?!1:typeof e.scheme=="string"&&(typeof e.authority=="string"||typeof e.authority>"u")&&(typeof e.path=="string"||typeof e.path>"u")&&(typeof e.query=="string"||typeof e.query>"u")&&(typeof e.fragment=="string"||typeof e.fragment>"u")}var G5=it?1:void 0,ma=class extends E{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=sd(this,!1)),this._fsPath}toString(e=!1){return e?Km(this,!0):(this._formatted||(this._formatted=Km(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=G5),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},J5={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function Q5(e,t,i){let r,s=-1;for(let n=0;n<e.length;n++){const o=e.charCodeAt(n);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||o===45||o===46||o===95||o===126||t&&o===47||i&&o===91||i&&o===93||i&&o===58)s!==-1&&(r+=encodeURIComponent(e.substring(s,n)),s=-1),r!==void 0&&(r+=e.charAt(n));else{r===void 0&&(r=e.substr(0,n));const a=J5[o];a!==void 0?(s!==-1&&(r+=encodeURIComponent(e.substring(s,n)),s=-1),r+=a):s===-1&&(s=n)}}return s!==-1&&(r+=encodeURIComponent(e.substring(s))),r!==void 0?r:e}function JA(e){let t;for(let i=0;i<e.length;i++){const r=e.charCodeAt(i);r===35||r===63?(t===void 0&&(t=e.substr(0,i)),t+=J5[r]):t!==void 0&&(t+=e[i])}return t!==void 0?t:e}function sd(e,t){let i;return e.authority&&e.path.length>1&&e.scheme==="file"?i=`//${e.authority}${e.path}`:e.path.charCodeAt(0)===47&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&e.path.charCodeAt(2)===58?t?i=e.path.substr(1):i=e.path[1].toLowerCase()+e.path.substr(2):i=e.path,it&&(i=i.replace(/\//g,"\\")),i}function Km(e,t){const i=t?JA:Q5;let r="",{scheme:s,authority:n,path:o,query:a,fragment:c}=e;if(s&&(r+=s,r+=":"),(n||s==="file")&&(r+=kr,r+=kr),n){let l=n.indexOf("@");if(l!==-1){const u=n.substr(0,l);n=n.substr(l+1),l=u.lastIndexOf(":"),l===-1?r+=i(u,!1,!1):(r+=i(u.substr(0,l),!1,!1),r+=":",r+=i(u.substr(l+1),!1,!0)),r+="@"}n=n.toLowerCase(),l=n.lastIndexOf(":"),l===-1?r+=i(n,!1,!0):(r+=i(n.substr(0,l),!1,!0),r+=n.substr(l))}if(o){if(o.length>=3&&o.charCodeAt(0)===47&&o.charCodeAt(2)===58){const l=o.charCodeAt(1);l>=65&&l<=90&&(o=`/${String.fromCharCode(l+32)}:${o.substr(3)}`)}else if(o.length>=2&&o.charCodeAt(1)===58){const l=o.charCodeAt(0);l>=65&&l<=90&&(o=`${String.fromCharCode(l+32)}:${o.substr(2)}`)}r+=i(o,!0,!1)}return a&&(r+="?",r+=i(a,!1,!1)),c&&(r+="#",r+=t?c:Q5(c,!1,!1)),r}function Y5(e){try{return decodeURIComponent(e)}catch{return e.length>3?e.substr(0,3)+Y5(e.substr(3)):e}}var X5=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function nd(e){return e.match(X5)?e.replace(X5,t=>Y5(t)):e}var z;(function(e){e.inMemory="inmemory",e.vscode="vscode",e.internal="private",e.walkThrough="walkThrough",e.walkThroughSnippet="walkThroughSnippet",e.http="http",e.https="https",e.file="file",e.mailto="mailto",e.untitled="untitled",e.data="data",e.command="command",e.vscodeRemote="vscode-remote",e.vscodeRemoteDownload="vscode-remote-download",e.vscodeRemoteResource="vscode-remote-resource",e.vscodeManagedRemoteResource="vscode-managed-remote-resource",e.vscodeUserData="vscode-userdata",e.vscodeCustomEditor="vscode-custom-editor",e.vscodeNotebookCell="vscode-notebook-cell",e.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",e.vscodeNotebookCellMetadataDiff="vscode-notebook-cell-metadata-diff",e.vscodeNotebookCellOutput="vscode-notebook-cell-output",e.vscodeNotebookCellOutputDiff="vscode-notebook-cell-output-diff",e.vscodeNotebookMetadata="vscode-notebook-metadata",e.vscodeInteractiveInput="vscode-interactive-input",e.vscodeSettings="vscode-settings",e.vscodeWorkspaceTrust="vscode-workspace-trust",e.vscodeTerminal="vscode-terminal",e.vscodeChatCodeBlock="vscode-chat-code-block",e.icubeChatCodeBlock="icube-chat-code-block",e.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",e.vscodeChatSesssion="vscode-chat-editor",e.vscodeComponent="vscode-component-editor",e.vscodeIcubeChatSession="vscode-icube-chat-editor",e.webviewPanel="webview-panel",e.vscodeWebview="vscode-webview",e.extension="extension",e.vscodeFileResource="vscode-file",e.tmp="tmp",e.vsls="vsls",e.vscodeSourceControl="vscode-scm",e.commentsInput="comment",e.codeSetting="code-setting",e.outputChannel="output",e.accessibleView="accessible-view"})(z||(z={}));function e1(e,t){return E.isUri(e)?xr(e.scheme,t):ed(e,t+":")}function QA(e,...t){return t.some(i=>e1(e,i))}var YA="tkn",XA=class{constructor(){this.a=Object.create(null),this.b=Object.create(null),this.c=Object.create(null),this.d="http",this.e=null,this.f="/"}setPreferredWebSchema(e){this.d=e}setDelegate(e){this.e=e}setServerRootPath(e,t){this.f=ZA(e,t)}getServerRootPath(){return this.f}get g(){return Le.join(this.f,z.vscodeRemoteResource)}set(e,t,i){this.a[e]=t,this.b[e]=i}setConnectionToken(e,t){this.c[e]=t}getPreferredWebSchema(){return this.d}rewrite(e){if(this.e)try{return this.e(e)}catch(o){return Et(o),e}const t=e.authority;let i=this.a[t];i&&i.indexOf(":")!==-1&&i.indexOf("[")===-1&&(i=`[${i}]`);const r=this.b[t],s=this.c[t];let n=`path=${encodeURIComponent(e.path)}`;return typeof s=="string"&&(n+=`&${YA}=${encodeURIComponent(s)}`),E.from({scheme:Wm?this.d:z.vscodeRemoteResource,authority:`${i}:${r}`,path:this.g,query:n})}},Z5=new XA;function ZA(e,t){return Le.join(t??"/",`${e.quality??"oss"}-${e.commit??"dev"}`)}var K5="vscode-app",KA=class gm{static{this.a=K5}asBrowserUri(t){const i=this.b(t);return this.uriToBrowserUri(i)}uriToBrowserUri(t){return t.scheme===z.vscodeRemote?Z5.rewrite(t):t.scheme===z.file&&(u5||VD===`${z.vscodeFileResource}://${gm.a}`)?t.with({scheme:z.vscodeFileResource,authority:t.authority||gm.a,query:null,fragment:null}):t}asFileUri(t){const i=this.b(t);return this.uriToFileUri(i)}uriToFileUri(t){return t.scheme===z.vscodeFileResource?t.with({scheme:z.file,authority:t.authority!==gm.a?t.authority:null,query:null,fragment:null}):t}b(t,i){if(E.isUri(t))return t;if(globalThis._VSCODE_FILE_ROOT){const r=globalThis._VSCODE_FILE_ROOT;if(/^\w[\w\d+.-]*:\/\//.test(r))return E.joinPath(E.parse(r,!0),t);const s=rt(r,t);return E.file(s)}return E.parse(i.toUrl(t))}},eE=new KA,tE;(function(e){const t=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);e.CoopAndCoep=Object.freeze(t.get("3"));const i="vscode-coi";function r(n){let o;typeof n=="string"?o=new URL(n).searchParams:n instanceof URL?o=n.searchParams:E.isUri(n)&&(o=new URL(n.toString(!0)).searchParams);const a=o?.get(i);if(a)return t.get(a)}e.getHeadersFromQuery=r;function s(n,o,a){if(!globalThis.crossOriginIsolated)return;const c=o&&a?"3":a?"2":"1";n instanceof URLSearchParams?n.set(i,c):n[i]=c}e.addSearchParam=s})(tE||(tE={}));function $r(e){return sd(e,!0)}var al=class{constructor(e){this.a=e}compare(e,t,i=!1){return e===t?0:no(this.getComparisonKey(e,i),this.getComparisonKey(t,i))}isEqual(e,t,i=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,i)===this.getComparisonKey(t,i)}getComparisonKey(e,t=!1){return e.with({path:this.a(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}ignorePathCasing(e){return this.a(e)}isEqualOrParent(e,t,i=!1){if(e.scheme===t.scheme){if(e.scheme===z.file)return dn($r(e),$r(t),this.a(e))&&e.query===t.query&&(i||e.fragment===t.fragment);if(sE(e.authority,t.authority))return dn(e.path,t.path,this.a(e),"/")&&e.query===t.query&&(i||e.fragment===t.fragment)}return!1}joinPath(e,...t){return E.joinPath(e,...t)}basenameOrAuthority(e){return Jr(e)||e.authority}basename(e){return Le.basename(e.path)}extname(e){return Le.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===z.file?t=E.file(wi($r(e))).path:(t=Le.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===z.file?t=E.file(ys($r(e))).path:t=Le.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!sE(e.authority,t.authority))return;if(e.scheme===z.file){const s=so($r(e),$r(t));return it?B5(s):s}let i=e.path||"/";const r=t.path||"/";if(this.a(e)){let s=0;for(const n=Math.min(i.length,r.length);s<n&&!(i.charCodeAt(s)!==r.charCodeAt(s)&&i.charAt(s).toLowerCase()!==r.charAt(s).toLowerCase());s++);i=r.substr(0,s)+i.substr(s)}return Le.relative(i,r)}resolvePath(e,t){if(e.scheme===z.file){const i=E.file(nA($r(e),t));return e.with({authority:i.authority,path:i.path})}return t=TA(t),e.with({path:Le.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&xr(e,t)}hasTrailingPathSeparator(e,t=ft){if(e.scheme===z.file){const i=$r(e);return i.length>rd(i).length&&i[i.length-1]===t}else{const i=e.path;return i.length>1&&i.charCodeAt(i.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=ft){return nE(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=ft){let i=!1;if(e.scheme===z.file){const r=$r(e);i=r!==void 0&&r.length===rd(r).length&&r[r.length-1]===t}else{t="/";const r=e.path;i=r.length===1&&r.charCodeAt(r.length-1)===47}return!i&&!nE(e,t)?e.with({path:e.path+"/"}):e}},Ve=new al(()=>!1),t1=new al(e=>e.scheme===z.file?!At:!0),eR=new al(e=>!0),iE=Ve.isEqual.bind(Ve),$q=Ve.isEqualOrParent.bind(Ve),Cq=Ve.getComparisonKey.bind(Ve),i1=Ve.basenameOrAuthority.bind(Ve),Jr=Ve.basename.bind(Ve),tR=Ve.extname.bind(Ve),od=Ve.dirname.bind(Ve),Rt=Ve.joinPath.bind(Ve),Iq=Ve.normalizePath.bind(Ve),rE=Ve.relativePath.bind(Ve),Pq=Ve.resolvePath.bind(Ve),iR=Ve.isAbsolutePath.bind(Ve),sE=Ve.isEqualAuthority.bind(Ve),nE=Ve.hasTrailingPathSeparator.bind(Ve),Dq=Ve.removeTrailingPathSeparator.bind(Ve),Aq=Ve.addTrailingPathSeparator.bind(Ve),oE;(function(e){e.META_DATA_LABEL="label",e.META_DATA_DESCRIPTION="description",e.META_DATA_SIZE="size",e.META_DATA_MIME="mime";function t(i){const r=new Map;i.path.substring(i.path.indexOf(";")+1,i.path.lastIndexOf(";")).split(";").forEach(o=>{const[a,c]=o.split(":");a&&c&&r.set(a,c)});const n=i.path.substring(0,i.path.indexOf(";"));return n&&r.set(e.META_DATA_MIME,n),r}e.parseMetaData=t})(oE||(oE={}));var rR=Symbol("MicrotaskDelay");function fn(e){return!!e&&typeof e.then=="function"}function Qr(e){const t=new lt,i=e(t.token),r=new Promise((s,n)=>{const o=t.token.onCancellationRequested(()=>{o.dispose(),n(new ki)});Promise.resolve(i).then(a=>{o.dispose(),t.dispose(),s(a)},a=>{o.dispose(),t.dispose(),n(a)})});return new class{cancel(){t.cancel(),t.dispose()}then(s,n){return r.then(s,n)}catch(s){return this.then(void 0,s)}finally(s){return r.finally(s)}}}function pn(e,t,i){return new Promise((r,s)=>{const n=t.onCancellationRequested(()=>{n.dispose(),r(i)});e.then(r,s).finally(()=>n.dispose())})}function sR(e,t){return new Promise((i,r)=>{const s=t.onCancellationRequested(()=>{s.dispose(),r(new ki)});e.then(i,r).finally(()=>s.dispose())})}function hi(e){return new Promise((t,i)=>{const r=e();fn(r)?r.then(t,i):t(r)})}function aE(){let e,t;return{promise:new Promise((r,s)=>{e=r,t=s}),resolve:e,reject:t}}var nR=class{constructor(){this.f=!1,this.a=null,this.b=null,this.d=null}queue(e){if(this.f)return Promise.reject(new Error("Throttler is disposed"));if(this.a){if(this.d=e,!this.b){const t=()=>{if(this.b=null,this.f)return;const i=this.queue(this.d);return this.d=null,i};this.b=new Promise(i=>{this.a.then(t,t).then(i)})}return new Promise((t,i)=>{this.b.then(t,i)})}return this.a=e(),new Promise((t,i)=>{this.a.then(r=>{this.a=null,t(r)},r=>{this.a=null,i(r)})})}dispose(){this.f=!0}},oR=(e,t)=>{let i=!0;const r=setTimeout(()=>{i=!1,t()},e);return{isTriggered:()=>i,dispose:()=>{clearTimeout(r),i=!1}}},aR=e=>{let t=!0;return queueMicrotask(()=>{t&&(t=!1,e())}),{isTriggered:()=>t,dispose:()=>{t=!1}}},cE=class{constructor(e){this.defaultDelay=e,this.a=null,this.b=null,this.d=null,this.f=null,this.g=null}trigger(e,t=this.defaultDelay){this.g=e,this.h(),this.b||(this.b=new Promise((r,s)=>{this.d=r,this.f=s}).then(()=>{if(this.b=null,this.d=null,this.g){const r=this.g;return this.g=null,r()}}));const i=()=>{this.a=null,this.d?.(null)};return this.a=t===rR?aR(i):oR(t,i),this.b}isTriggered(){return!!this.a?.isTriggered()}cancel(){this.h(),this.b&&(this.f?.(new ki),this.b=null)}h(){this.a?.dispose(),this.a=null}dispose(){this.cancel()}},ad=class{constructor(e){this.a=new cE(e),this.b=new nR}trigger(e,t){return this.a.trigger(()=>this.b.queue(e),t)}isTriggered(){return this.a.isTriggered()}cancel(){this.a.cancel()}dispose(){this.a.dispose(),this.b.dispose()}},ur=class{constructor(){this.a=!1,this.b=new Promise((e,t)=>{this.d=e})}isOpen(){return this.a}open(){this.a=!0,this.d(!0)}wait(){return this.b}};function bi(e,t){return t?new Promise((i,r)=>{const s=setTimeout(()=>{n.dispose(),i()},e),n=t.onCancellationRequested(()=>{clearTimeout(s),n.dispose(),r(new ki)})}):Qr(i=>bi(e,i))}function lE(e,t=0,i){const r=setTimeout(()=>{e(),i&&s.dispose()},t),s=ee(()=>{clearTimeout(r),i?.deleteAndLeak(s)});return i?.add(s),s}function cR(e,t=r=>!!r,i=null){if(e.length===0)return Promise.resolve(i);let r=e.length;const s=()=>{r=-1;for(const n of e)n.cancel?.()};return new Promise((n,o)=>{for(const a of e)a.then(c=>{--r>=0&&t(c)?(s(),n(c)):r===0&&n(i)}).catch(c=>{--r>=0&&(s(),o(c))})})}var lR=class{constructor(e){this.a=0,this.b=!1,this.f=e,this.g=[],this.d=0,this.h=new I}whenIdle(){return this.size>0?ze.toPromise(this.onDrained):Promise.resolve()}get onDrained(){return this.h.event}get size(){return this.a}queue(e){if(this.b)throw new Error("Object has been disposed");return this.a++,new Promise((t,i)=>{this.g.push({factory:e,c:t,e:i}),this.j()})}j(){for(;this.g.length&&this.d<this.f;){const e=this.g.shift();this.d++;const t=e.factory();t.then(e.c,e.e),t.then(()=>this.k(),()=>this.k())}}k(){this.b||(this.d--,--this.a===0&&this.h.fire(),this.g.length>0&&this.j())}clear(){if(this.b)throw new Error("Object has been disposed");this.g.length=0,this.a=this.d}dispose(){this.b=!0,this.g.length=0,this.a=0,this.h.dispose()}},uR=class extends lR{constructor(){super(1)}},uE=class{constructor(){this.a=new Map,this.b=new Set,this.d=void 0,this.f=0}async whenDrained(){if(this.g())return;const e=new Ss;return this.b.add(e),e.p}g(){for(const[,e]of this.a)if(e.size>0)return!1;return!0}queueSize(e,t=Ve){const i=t.getComparisonKey(e);return this.a.get(i)?.size??0}queueFor(e,t,i=Ve){const r=i.getComparisonKey(e);let s=this.a.get(r);if(!s){s=new uR;const n=this.f++,o=ze.once(s.onDrained)(()=>{s?.dispose(),this.a.delete(r),this.h(),this.d?.deleteAndDispose(n),this.d?.size===0&&(this.d.dispose(),this.d=void 0)});this.d||(this.d=new Bh),this.d.set(n,o),this.a.set(r,s)}return s.queue(t)}h(){this.g()&&this.j()}j(){for(const e of this.b)e.complete();this.b.clear()}dispose(){for(const[,e]of this.a)e.dispose();this.a.clear(),this.j(),this.d?.dispose()}},hE=class{constructor(){this.d=void 0,this.f=!1}cancel(){this.d?.dispose(),this.d=void 0}cancelAndSet(e,t,i=globalThis){if(this.f)throw new ua("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();const r=i.setInterval(()=>{e()},t);this.d=ee(()=>{i.clearInterval(r),this.d=void 0})}dispose(){this.cancel(),this.f=!0}},Es=class{constructor(e,t){this.b=-1,this.a=e,this.d=t,this.f=this.g.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearTimeout(this.b),this.b=-1)}schedule(e=this.d){this.cancel(),this.b=setTimeout(this.f,e)}get delay(){return this.d}set delay(e){this.d=e}isScheduled(){return this.b!==-1}flush(){this.isScheduled()&&(this.cancel(),this.h())}g(){this.b=-1,this.a&&this.h()}h(){this.a?.()}},dE=class{constructor(e,t){t%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${t}ms is not a multiple of 1000ms.`),this.a=e,this.b=t,this.d=0,this.f=-1,this.g=this.h.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearInterval(this.f),this.f=-1)}schedule(e=this.b){e%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${e}ms is not a multiple of 1000ms.`),this.cancel(),this.d=Math.ceil(e/1e3),this.f=setInterval(this.g,1e3)}isScheduled(){return this.f!==-1}h(){this.d--,!(this.d>0)&&(clearInterval(this.f),this.f=-1,this.a?.())}},hR=class extends Es{constructor(e,t){super(e,t),this.j=[]}work(e){this.j.push(e),this.isScheduled()||this.schedule()}h(){const e=this.j;this.j=[],this.a?.(e)}dispose(){this.j=[],super.dispose()}},dR=class extends X{constructor(e,t){super(),this.h=e,this.j=t,this.a=[],this.b=this.B(new vs),this.f=!1,this.g=0}get pending(){return this.a.length}work(e){if(this.f)return!1;if(typeof this.h.maxBufferedWork=="number"){if(this.b.value){if(this.pending+e.length>this.h.maxBufferedWork)return!1}else if(this.pending+e.length-this.h.maxWorkChunkSize>this.h.maxBufferedWork)return!1}for(const i of e)this.a.push(i);const t=Date.now()-this.g;return!this.b.value&&(!this.h.waitThrottleDelayBetweenWorkUnits||t>=this.h.throttleDelay)?this.m():!this.b.value&&this.h.waitThrottleDelayBetweenWorkUnits&&this.r(Math.max(this.h.throttleDelay-t,0)),!0}m(){this.g=Date.now(),this.j(this.a.splice(0,this.h.maxWorkChunkSize)),this.a.length>0&&this.r()}r(e=this.h.throttleDelay){this.b.value=new Es(()=>{this.b.clear(),this.m()},e),this.b.value.schedule()}dispose(){super.dispose(),this.f=!0}},fE,cd;(function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?cd=(e,t,i)=>{d5(()=>{if(r)return;const s=Date.now()+15;t(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,s-Date.now())}}))});let r=!1;return{dispose(){r||(r=!0)}}}:cd=(e,t,i)=>{const r=e.requestIdleCallback(t,typeof i=="number"?{timeout:i}:void 0);let s=!1;return{dispose(){s||(s=!0,e.cancelIdleCallback(r))}}},fE=(e,t)=>cd(globalThis,e,t)})();var fR=class{constructor(e,t){this.g=!1,this.d=()=>{try{this.j=t()}catch(i){this.l=i}finally{this.g=!0}},this.f=cd(e,()=>this.d())}dispose(){this.f.dispose()}get value(){if(this.g||(this.f.dispose(),this.d()),this.l)throw this.l;return this.j}get isInitialized(){return this.g}},pR=class extends fR{constructor(e){super(globalThis,e)}};async function gR(e,t,i){let r;for(let s=0;s<i;s++)try{return await e()}catch(n){r=n,await bi(t)}throw r}var pE;(function(e){e[e.Resolved=0]="Resolved",e[e.Rejected=1]="Rejected"})(pE||(pE={}));var Ss=class{get isRejected(){return this.d?.outcome===1}get isResolved(){return this.d?.outcome===0}get isSettled(){return!!this.d}get value(){return this.d?.outcome===0?this.d?.value:void 0}constructor(){this.p=new Promise((e,t)=>{this.a=e,this.b=t})}complete(e){return new Promise(t=>{this.a(e),this.d={outcome:0,value:e},t()})}error(e){return new Promise(t=>{this.b(e),this.d={outcome:1,value:e},t()})}cancel(){return this.error(new ki)}},va;(function(e){async function t(r){let s;const n=await Promise.all(r.map(o=>o.then(a=>a,a=>{s||(s=a)})));if(typeof s<"u")throw s;return n}e.settled=t;function i(r){return new Promise(async(s,n)=>{try{await r(s,n)}catch(o){n(o)}})}e.withAsyncBody=i})(va||(va={}));var gE;(function(e){e[e.Initial=0]="Initial",e[e.DoneOK=1]="DoneOK",e[e.DoneError=2]="DoneError"})(gE||(gE={}));var cl=class sr{static fromArray(t){return new sr(i=>{i.emitMany(t)})}static fromPromise(t){return new sr(async i=>{i.emitMany(await t)})}static fromPromisesResolveOrder(t){return new sr(async i=>{await Promise.all(t.map(async r=>i.emitOne(await r)))})}static merge(t){return new sr(async i=>{await Promise.all(t.map(async r=>{for await(const s of r)i.emitOne(s)}))})}static{this.EMPTY=sr.fromArray([])}constructor(t,i){this.a=0,this.b=[],this.d=null,this.f=i,this.g=new I,queueMicrotask(async()=>{const r={emitOne:s=>this.h(s),emitMany:s=>this.j(s),reject:s=>this.l(s)};try{await Promise.resolve(t(r)),this.k()}catch(s){this.l(s)}finally{r.emitOne=void 0,r.emitMany=void 0,r.reject=void 0}})}[Symbol.asyncIterator](){let t=0;return{next:async()=>{do{if(this.a===2)throw this.d;if(t<this.b.length)return{done:!1,value:this.b[t++]};if(this.a===1)return{done:!0,value:void 0};await ze.toPromise(this.g.event)}while(!0)},return:async()=>(this.f?.(),{done:!0,value:void 0})}}static map(t,i){return new sr(async r=>{for await(const s of t)r.emitOne(i(s))})}map(t){return sr.map(this,t)}static filter(t,i){return new sr(async r=>{for await(const s of t)i(s)&&r.emitOne(s)})}filter(t){return sr.filter(this,t)}static coalesce(t){return sr.filter(t,i=>!!i)}coalesce(){return sr.coalesce(this)}static async toPromise(t){const i=[];for await(const r of t)i.push(r);return i}toPromise(){return sr.toPromise(this)}h(t){this.a===0&&(this.b.push(t),this.g.fire())}j(t){this.a===0&&(this.b=this.b.concat(t),this.g.fire())}k(){this.a===0&&(this.a=1,this.g.fire())}l(t){this.a===0&&(this.a=2,this.d=t,this.g.fire())}},r1=class{constructor(e){this.a=new Ss,this.b=new cl(r=>{if(t){r.reject(t);return}return i&&r.emitMany(i),this.d=s=>r.reject(s),this.f=s=>r.emitOne(s),this.a.p},e);let t,i;this.f=r=>{i||(i=[]),i.push(r)},this.d=r=>{t||(t=r)}}get asyncIterable(){return this.b}resolve(){this.a.complete()}reject(e){this.d(e),this.a.complete()}emitOne(e){this.f(e)}};function mR(e,t){return new vR(e,t)}var vR=class{constructor(e,t){this.e=e,this.f=t,this.a={flowing:!1,ended:!1,destroyed:!1},this.b={data:[],error:[]},this.c={data:[],error:[],end:[]},this.d=[]}pause(){this.a.destroyed||(this.a.flowing=!1)}resume(){this.a.destroyed||this.a.flowing||(this.a.flowing=!0,this.j(),this.k(),this.l())}write(e){if(!this.a.destroyed){if(this.a.flowing)this.g(e);else if(this.b.data.push(e),typeof this.f?.highWaterMark=="number"&&this.b.data.length>this.f.highWaterMark)return new Promise(t=>this.d.push(t))}}error(e){this.a.destroyed||(this.a.flowing?this.h(e):this.b.error.push(e))}end(e){this.a.destroyed||(typeof e<"u"&&this.write(e),this.a.flowing?(this.i(),this.destroy()):this.a.ended=!0)}g(e){this.c.data.slice(0).forEach(t=>t(e))}h(e){this.c.error.length===0?Et(e):this.c.error.slice(0).forEach(t=>t(e))}i(){this.c.end.slice(0).forEach(e=>e())}on(e,t){if(!this.a.destroyed)switch(e){case"data":this.c.data.push(t),this.resume();break;case"end":this.c.end.push(t),this.a.flowing&&this.l()&&this.destroy();break;case"error":this.c.error.push(t),this.a.flowing&&this.k();break}}removeListener(e,t){if(this.a.destroyed)return;let i;switch(e){case"data":i=this.c.data;break;case"end":i=this.c.end;break;case"error":i=this.c.error;break}if(i){const r=i.indexOf(t);r>=0&&i.splice(r,1)}}j(){if(this.b.data.length>0){const e=this.e(this.b.data);this.g(e),this.b.data.length=0;const t=[...this.d];this.d.length=0,t.forEach(i=>i())}}k(){if(this.c.error.length>0){for(const e of this.b.error)this.h(e);this.b.error.length=0}}l(){return this.a.ended?(this.i(),this.c.end.length>0):!1}destroy(){this.a.destroyed||(this.a.destroyed=!0,this.a.ended=!0,this.b.data.length=0,this.b.error.length=0,this.c.data.length=0,this.c.error.length=0,this.c.end.length=0,this.d.length=0)}};function wR(e,t){return new Promise((i,r)=>{const s=[];bR(e,{onData:n=>{t&&s.push(n)},onError:n=>{t?r(n):i(void 0)},onEnd:()=>{i(t?t(s):void 0)}})})}function bR(e,t,i){e.on("error",r=>{i?.isCancellationRequested||t.onError(r)}),e.on("end",()=>{i?.isCancellationRequested||t.onEnd()}),e.on("data",r=>{i?.isCancellationRequested||t.onData(r)})}var ld=typeof Buffer<"u",yR=new Hi(()=>new Uint8Array(256)),s1,n1,J=class vr{static alloc(t){return ld?new vr(Buffer.allocUnsafe(t)):new vr(new Uint8Array(t))}static wrap(t){return ld&&!Buffer.isBuffer(t)&&(t=Buffer.from(t.buffer,t.byteOffset,t.byteLength)),new vr(t)}static fromString(t,i){return!(i?.dontUseNodeBuffer||!1)&&ld?new vr(Buffer.from(t)):(s1||(s1=new TextEncoder),new vr(s1.encode(t)))}static fromByteArray(t){const i=vr.alloc(t.length);for(let r=0,s=t.length;r<s;r++)i.buffer[r]=t[r];return i}static concat(t,i){if(typeof i>"u"){i=0;for(let n=0,o=t.length;n<o;n++)i+=t[n].byteLength}const r=vr.alloc(i);let s=0;for(let n=0,o=t.length;n<o;n++){const a=t[n];r.set(a,s),s+=a.byteLength}return r}constructor(t){this.buffer=t,this.byteLength=this.buffer.byteLength}clone(){const t=vr.alloc(this.byteLength);return t.set(this),t}toString(){return ld?this.buffer.toString():(n1||(n1=new TextDecoder),n1.decode(this.buffer))}slice(t,i){return new vr(this.buffer.subarray(t,i))}set(t,i){if(t instanceof vr)this.buffer.set(t.buffer,i);else if(t instanceof Uint8Array)this.buffer.set(t,i);else if(t instanceof ArrayBuffer)this.buffer.set(new Uint8Array(t),i);else if(ArrayBuffer.isView(t))this.buffer.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),i);else throw new Error("Unknown argument 'array'")}readUInt32BE(t){return ud(this.buffer,t)}writeUInt32BE(t,i){hd(this.buffer,t,i)}readUInt32LE(t){return kR(this.buffer,t)}writeUInt32LE(t,i){$R(this.buffer,t,i)}readUInt8(t){return CR(this.buffer,t)}writeUInt8(t,i){IR(this.buffer,t,i)}indexOf(t,i=0){return ER(this.buffer,t instanceof vr?t.buffer:t,i)}};function ER(e,t,i=0){const r=t.byteLength,s=e.byteLength;if(r===0)return 0;if(r===1)return e.indexOf(t[0]);if(r>s-i)return-1;const n=yR.value;n.fill(t.length);for(let l=0;l<t.length;l++)n[t[l]]=t.length-l-1;let o=i+t.length-1,a=o,c=-1;for(;o<s;)if(e[o]===t[a]){if(a===0){c=o;break}o--,a--}else o+=Math.max(t.length-a,n[e[o]]),a=t.length-1;return c}function SR(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0}function xR(e,t,i){e[i+0]=t&255,t=t>>>8,e[i+1]=t&255}function ud(e,t){return e[t]*2**24+e[t+1]*2**16+e[t+2]*2**8+e[t+3]}function hd(e,t,i){e[i+3]=t,t=t>>>8,e[i+2]=t,t=t>>>8,e[i+1]=t,t=t>>>8,e[i]=t}function kR(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0|e[t+2]<<16>>>0|e[t+3]<<24>>>0}function $R(e,t,i){e[i+0]=t&255,t=t>>>8,e[i+1]=t&255,t=t>>>8,e[i+2]=t&255,t=t>>>8,e[i+3]=t&255}function CR(e,t){return e[t]}function IR(e,t,i){e[i]=t}function PR(e){return wR(e,t=>J.concat(t))}function mE(e){let t=0,i=0,r=0;const s=new Uint8Array(Math.floor(e.length/4*3)),n=a=>{switch(i){case 3:s[r++]=t|a,i=0;break;case 2:s[r++]=t|a>>>2,t=a<<6,i=3;break;case 1:s[r++]=t|a>>>4,t=a<<4,i=2;break;default:t=a<<2,i=1}};for(let a=0;a<e.length;a++){const c=e.charCodeAt(a);if(c>=65&&c<=90)n(c-65);else if(c>=97&&c<=122)n(c-97+26);else if(c>=48&&c<=57)n(c-48+52);else if(c===43||c===45)n(62);else if(c===47||c===95)n(63);else{if(c===61)break;throw new SyntaxError(`Unexpected base64 character ${e[a]}`)}}const o=r;for(;i>0;)n(0);return J.wrap(s).slice(0,o)}var DR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",AR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function dd({buffer:e},t=!0,i=!1){const r=i?AR:DR;let s="";const n=e.byteLength%3;let o=0;for(;o<e.byteLength-n;o+=3){const a=e[o+0],c=e[o+1],l=e[o+2];s+=r[a>>>2],s+=r[(a<<4|c>>>4)&63],s+=r[(c<<2|l>>>6)&63],s+=r[l&63]}if(n===1){const a=e[o+0];s+=r[a>>>2],s+=r[a<<4&63],t&&(s+="==")}else if(n===2){const a=e[o+0],c=e[o+1];s+=r[a>>>2],s+=r[(a<<4|c>>>4)&63],s+=r[c<<2&63],t&&(s+="=")}return s}function o1(e){const t=[];typeof e=="number"&&t.push("code/timeOrigin",e);function i(s,n){t.push(s,n?.startTime??Date.now())}function r(){const s=[];for(let n=0;n<t.length;n+=2)s.push({name:t[n],startTime:t[n+1]});return s}return{mark:i,getMarks:r}}function RR(){if(typeof performance=="object"&&typeof performance.mark=="function"&&!performance.nodeTiming)return typeof performance.timeOrigin!="number"&&!performance.timing?o1():{mark(e,t){performance.mark(e,t)},getMarks(){let e=performance.timeOrigin;typeof e!="number"&&(e=performance.timing.navigationStart||performance.timing.redirectStart||performance.timing.fetchStart);const t=[{name:"code/timeOrigin",startTime:Math.round(e)}];for(const i of performance.getEntriesByType("mark"))t.push({name:i.name,startTime:Math.round(e+i.startTime)});return t}};if(typeof process=="object"){const e=performance?.timeOrigin;return o1(e)}else return console.trace("perf-util loaded in UNKNOWN environment"),o1()}function TR(e){return e.MonacoPerformanceMarks||(e.MonacoPerformanceMarks=RR()),e.MonacoPerformanceMarks}var vE=TR(globalThis),Ct=vE.mark,LR=vE.getMarks;import*as ll from"fs";var fd={};zP(fd,{Promises:()=>ht,RimRafMode:()=>ao,SymlinkSupport:()=>Cr,configureFlushOnWrite:()=>l1,readdirSync:()=>HR,rimrafSync:()=>_R,whenDeleted:()=>WR,writeFileSync:()=>GR});import*as Be from"fs";import{tmpdir as NR}from"os";import{promisify as pd}from"util";var OR=new Xc(1e4);function ul(e){return wE(e,"NFC",OR)}var FR=new Xc(1e4);function gd(e){return wE(e,"NFD",FR)}var MR=/[^\u0000-\u0080]/;function wE(e,t,i){if(!e)return e;const r=i.get(e);if(r)return r;let s;return MR.test(e)?s=e.normalize(t):s=e,i.set(e,s),s}var ao;(function(e){e[e.UNLINK=0]="UNLINK",e[e.MOVE=1]="MOVE"})(ao||(ao={}));async function bE(e,t=ao.UNLINK,i){if(z5(e))throw new Error("rimraf - will refuse to recursively delete root");return t===ao.UNLINK?a1(e):UR(e,i)}async function UR(e,t=jA(NR())){try{try{await Be.promises.rename(e,t)}catch(i){return i.code==="ENOENT"?void 0:a1(e)}a1(t).catch(i=>{})}catch(i){if(i.code!=="ENOENT")throw i}}async function a1(e){return Be.promises.rm(e,{recursive:!0,force:!0,maxRetries:3})}function _R(e){if(z5(e))throw new Error("rimraf - will refuse to recursively delete root");Be.rmSync(e,{recursive:!0,force:!0,maxRetries:3})}async function md(e,t){return yE(await(t?jR(e):Be.promises.readdir(e)))}async function jR(e){try{return await Be.promises.readdir(e,{withFileTypes:!0})}catch(r){console.warn("[node.js fs] readdir with filetypes failed with error: ",r)}const t=[],i=await md(e);for(const r of i){let s=!1,n=!1,o=!1;try{const a=await Be.promises.lstat(rt(e,r));s=a.isFile(),n=a.isDirectory(),o=a.isSymbolicLink()}catch(a){console.warn("[node.js fs] unexpected error from lstat after readdir: ",a)}t.push({name:r,isFile:()=>s,isDirectory:()=>n,isSymbolicLink:()=>o})}return t}function HR(e){return yE(Be.readdirSync(e))}function yE(e){return e.map(t=>typeof t=="string"?Dt?ul(t):t:(t.name=Dt?ul(t.name):t.name,t))}async function BR(e){const t=await md(e),i=[];for(const r of t)await Cr.existsDirectory(rt(e,r))&&i.push(r);return i}function WR(e,t=1e3){return new Promise(i=>{let r=!1;const s=setInterval(()=>{r||(r=!0,Be.access(e,n=>{r=!1,n&&(clearInterval(s),i(void 0))}))},t)})}var Cr;(function(e){async function t(s){let n;try{if(n=await Be.promises.lstat(s),!n.isSymbolicLink())return{stat:n}}catch{}try{return{stat:await Be.promises.stat(s),symbolicLink:n?.isSymbolicLink()?{dangling:!1}:void 0}}catch(o){if(o.code==="ENOENT"&&n)return{stat:n,symbolicLink:{dangling:!0}};if(it&&o.code==="EACCES")try{return{stat:await Be.promises.stat(await Be.promises.readlink(s)),symbolicLink:{dangling:!1}}}catch(a){if(a.code==="ENOENT"&&n)return{stat:n,symbolicLink:{dangling:!0}};throw a}throw o}}e.stat=t;async function i(s){try{const{stat:n,symbolicLink:o}=await e.stat(s);return n.isFile()&&o?.dangling!==!0}catch{}return!1}e.existsFile=i;async function r(s){try{const{stat:n,symbolicLink:o}=await e.stat(s);return n.isDirectory()&&o?.dangling!==!0}catch{}return!1}e.existsDirectory=r})(Cr||(Cr={}));var zR=new uE;function VR(e,t,i){return zR.queueFor(E.file(e),()=>{const r=EE(i);return new Promise((s,n)=>qR(e,t,r,o=>o?n(o):s()))},t1)}var c1=!0;function l1(e){c1=e}function qR(e,t,i,r){if(!c1)return Be.writeFile(e,t,{mode:i.mode,flag:i.flag},r);Be.open(e,i.flag,i.mode,(s,n)=>{if(s)return r(s);Be.writeFile(n,t,o=>{if(o)return Be.close(n,()=>r(o));Be.fdatasync(n,a=>(a&&(console.warn("[node.js fs] fdatasync is now disabled for this session because it failed: ",a),l1(!1)),Be.close(n,c=>r(c))))})})}function GR(e,t,i){const r=EE(i);if(!c1)return Be.writeFileSync(e,t,{mode:r.mode,flag:r.flag});const s=Be.openSync(e,r.flag,r.mode);try{Be.writeFileSync(s,t);try{Be.fdatasyncSync(s)}catch(n){console.warn("[node.js fs] fdatasyncSync is now disabled for this session because it failed: ",n),l1(!1)}}finally{Be.closeSync(s)}}function EE(e){return e?{mode:typeof e.mode=="number"?e.mode:438,flag:typeof e.flag=="string"?e.flag:"w"}:{mode:438,flag:"w"}}async function JR(e,t,i=6e4){if(e!==t)try{it&&typeof i=="number"?await SE(e,t,Date.now(),i):await Be.promises.rename(e,t)}catch(r){if(e.toLowerCase()!==t.toLowerCase()&&r.code==="EXDEV"||e.endsWith("."))await xE(e,t,{preserveSymlinks:!1}),await bE(e,ao.MOVE);else throw r}}async function SE(e,t,i,r,s=0){try{return await Be.promises.rename(e,t)}catch(n){if(n.code!=="EACCES"&&n.code!=="EPERM"&&n.code!=="EBUSY")throw n;if(Date.now()-i>=r)throw console.error(`[node.js fs] rename failed after ${s} retries with error: ${n}`),n;if(s===0){let o=!1;try{const{stat:a}=await Cr.stat(t);a.isFile()||(o=!0)}catch{}if(o)throw n}return await bi(Math.min(100,s*10)),SE(e,t,i,r,s+1)}}async function xE(e,t,i){return $E(e,t,{root:{source:e,target:t},options:i,handledSourcePaths:new Set})}var kE=511;async function $E(e,t,i){if(i.handledSourcePaths.has(e))return;i.handledSourcePaths.add(e);const{stat:r,symbolicLink:s}=await Cr.stat(e);if(s){if(i.options.preserveSymlinks)try{return await XR(e,t,i)}catch{}if(s.dangling)return}return r.isDirectory()?QR(e,t,r.mode&kE,i):YR(e,t,r.mode&kE)}async function QR(e,t,i,r){await Be.promises.mkdir(t,{recursive:!0,mode:i});const s=await md(e);for(const n of s)await $E(rt(e,n),rt(t,n),r)}async function YR(e,t,i){await Be.promises.copyFile(e,t),await Be.promises.chmod(t,i)}async function XR(e,t,i){let r=await Be.promises.readlink(e);dn(r,i.root.source,!At)&&(r=rt(i.root.target,r.substr(i.root.source.length+1))),await Be.promises.symlink(r,t)}var ht=new class{get read(){return(e,t,i,r,s)=>new Promise((n,o)=>{Be.read(e,t,i,r,s,(a,c,l)=>a?o(a):n({bytesRead:c,buffer:l}))})}get write(){return(e,t,i,r,s)=>new Promise((n,o)=>{Be.write(e,t,i,r,s,(a,c,l)=>a?o(a):n({bytesWritten:c,buffer:l}))})}get fdatasync(){return pd(Be.fdatasync)}get open(){return pd(Be.open)}get close(){return pd(Be.close)}get realpath(){return pd(Be.realpath)}async exists(e){try{return await Be.promises.access(e),!0}catch{return!1}}get readdir(){return md}get readDirsInDir(){return BR}get writeFile(){return VR}get rm(){return bE}get rename(){return JR}get copy(){return xE}};async function u1(e,t){if(At)return e;const i=wi(e);if(e===i)return e;const r=(ut(e)||e).toLowerCase();try{if(t?.isCancellationRequested)return null;const n=(await ht.readdir(i)).filter(o=>o.toLowerCase()===r);if(n.length===1){const o=await u1(i,t);if(o)return rt(o,n[0])}else if(n.length>1){const o=n.indexOf(r);if(o>=0){const a=await u1(i,t);if(a)return rt(a,n[o])}}}catch{}return null}async function ZR(e){try{return await ht.realpath(e)}catch{const i=CE(e);return await ll.promises.access(i,ll.constants.R_OK),i}}function KR(e){try{return ll.realpathSync(e)}catch{const i=CE(e);return ll.accessSync(i,ll.constants.R_OK),i}}function CE(e){return Gr(ys(e),ft)}function IE(e){return(t,i,r)=>{let s=null,n=null;if(typeof r.value=="function"?(s="value",n=r.value):typeof r.get=="function"&&(s="get",n=r.get),!n||typeof i=="symbol")throw new Error("not supported");r[s]=e(n,i)}}function PE(e,t,i){let r=null,s=null;if(typeof i.value=="function"?(r="value",s=i.value,s.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof i.get=="function"&&(r="get",s=i.get),!s)throw new Error("not supported");const n=`$memoize$${t}`;i[r]=function(...o){return this.hasOwnProperty(n)||Object.defineProperty(this,n,{configurable:!1,enumerable:!1,writable:!1,value:s.apply(this,o)}),this[n]}}function vd(e,t,i){return IE((r,s)=>{const n=`$debounce$${s}`,o=`$debounce$result$${s}`;return function(...a){this[o]||(this[o]=i?i():void 0),clearTimeout(this[n]),t&&(this[o]=t(this[o],...a),a=[this[o]]),this[n]=setTimeout(()=>{r.apply(this,a),this[o]=i?i():void 0},e)}})}function e2(e,t,i){return IE((r,s)=>{const n=`$throttle$timer$${s}`,o=`$throttle$result$${s}`,a=`$throttle$lastRun$${s}`,c=`$throttle$pending$${s}`;return function(...l){if(this[o]||(this[o]=i?i():void 0),(this[a]===null||this[a]===void 0)&&(this[a]=-Number.MAX_VALUE),t&&(this[o]=t(this[o],...l)),this[c])return;const u=this[a]+e;u<=Date.now()?(this[a]=Date.now(),r.apply(this,[this[o]]),this[o]=i?i():void 0):(this[c]=!0,this[n]=setTimeout(()=>{this[c]=!1,this[a]=Date.now(),r.apply(this,[this[o]]),this[o]=i?i():void 0},u-Date.now()))}})}function t2(e){return JSON.stringify(e,i2)}function DE(e){let t=JSON.parse(e);return t=oi(t),t}function i2(e,t){return t instanceof RegExp?{$mid:2,source:t.source,flags:t.flags}:t}function oi(e,t=0){if(!e||t>200)return e;if(typeof e=="object"){switch(e.$mid){case 1:return E.revive(e);case 2:return new RegExp(e.source,e.flags);case 17:return new Date(e.source)}if(e instanceof J||e instanceof Uint8Array)return e;if(Array.isArray(e))for(let i=0;i<e.length;++i)e[i]=oi(e[i],t+1);else for(const i in e)Object.hasOwnProperty.call(e,i)&&(e[i]=oi(e[i],t+1))}return e}var AE;(function(e){e[e.Promise=100]="Promise",e[e.PromiseCancel=101]="PromiseCancel",e[e.EventListen=102]="EventListen",e[e.EventDispose=103]="EventDispose"})(AE||(AE={}));function RE(e){switch(e){case 100:return"req";case 101:return"cancel";case 102:return"subscribe";case 103:return"unsubscribe"}}var TE;(function(e){e[e.Initialize=200]="Initialize",e[e.PromiseSuccess=201]="PromiseSuccess",e[e.PromiseError=202]="PromiseError",e[e.PromiseErrorObj=203]="PromiseErrorObj",e[e.EventFire=204]="EventFire"})(TE||(TE={}));function LE(e){switch(e){case 200:return"init";case 201:return"reply:";case 202:case 203:return"replyErr:";case 204:return"event:"}}var co;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Idle=1]="Idle"})(co||(co={}));function wa(e){let t=0;for(let i=0;;i+=7){const r=e.read(1);if(t|=(r.buffer[0]&127)<<i,!(r.buffer[0]&128))return t}}var r2=gn(0);function ba(e,t){if(t===0){e.write(r2);return}let i=0;for(let s=t;s!==0;s=s>>>7)i++;const r=J.alloc(i);for(let s=0;t!==0;s++)r.buffer[s]=t&127,t=t>>>7,t>0&&(r.buffer[s]|=128);e.write(r)}var s2=class{constructor(e){this.b=e,this.a=0}read(e){const t=this.b.slice(this.a,this.a+e);return this.a+=t.byteLength,t}},n2=class{constructor(){this.a=[]}get buffer(){return J.concat(this.a)}write(e){this.a.push(e)}},yi;(function(e){e[e.Undefined=0]="Undefined",e[e.String=1]="String",e[e.Buffer=2]="Buffer",e[e.VSBuffer=3]="VSBuffer",e[e.Array=4]="Array",e[e.Object=5]="Object",e[e.Int=6]="Int"})(yi||(yi={}));function gn(e){const t=J.alloc(1);return t.writeUInt8(e,0),t}var lo={Undefined:gn(yi.Undefined),String:gn(yi.String),Buffer:gn(yi.Buffer),VSBuffer:gn(yi.VSBuffer),Array:gn(yi.Array),Object:gn(yi.Object),Uint:gn(yi.Int)},o2=typeof Buffer<"u";function h1(e,t){if(typeof t>"u")e.write(lo.Undefined);else if(typeof t=="string"){const i=J.fromString(t);e.write(lo.String),ba(e,i.byteLength),e.write(i)}else if(o2&&Buffer.isBuffer(t)){const i=J.wrap(t);e.write(lo.Buffer),ba(e,i.byteLength),e.write(i)}else if(t instanceof J)e.write(lo.VSBuffer),ba(e,t.byteLength),e.write(t);else if(Array.isArray(t)){e.write(lo.Array),ba(e,t.length);for(const i of t)h1(e,i)}else if(typeof t=="number"&&(t|0)===t)e.write(lo.Uint),ba(e,t);else{const i=J.fromString(JSON.stringify(t));e.write(lo.Object),ba(e,i.byteLength),e.write(i)}}function d1(e){switch(e.read(1).readUInt8(0)){case yi.Undefined:return;case yi.String:return e.read(wa(e)).toString();case yi.Buffer:return e.read(wa(e)).buffer;case yi.VSBuffer:return e.read(wa(e));case yi.Array:{const i=wa(e),r=[];for(let s=0;s<i;s++)r.push(d1(e));return r}case yi.Object:return JSON.parse(e.read(wa(e)).toString());case yi.Int:return wa(e)}}var NE;(function(e){e[e.LocalSide=0]="LocalSide",e[e.OtherSide=1]="OtherSide"})(NE||(NE={}));var OE=class{constructor(e,t=null){this.l=e,this.a=!1,this.b=co.Uninitialized,this.d=new Set,this.f=new Map,this.g=0,this.k=new I,this.onDidInitialize=this.k.event,this.h=this.l.onMessage(i=>this.s(i)),this.j=t}getChannel(e){const t=this;return{call(i,r,s){return t.a?Promise.reject(new ki):t.m(e,i,r,s)},listen(i,r){return t.a?ze.None:t.o(e,i,r)}}}m(e,t,i,r=Ge.None){const s=this.g++,o={id:s,type:100,channelName:e,name:t,arg:i};if(r.isCancellationRequested)return Promise.reject(new ki);let a,c;return new Promise((u,h)=>{if(r.isCancellationRequested)return h(new ki);const d=()=>{const v=y=>{switch(y.type){case 201:this.f.delete(s),u(y.data);break;case 202:{this.f.delete(s);const S=new Error(y.data.message);S.stack=Array.isArray(y.data.stack)?y.data.stack.join(`
`):y.data.stack,S.name=y.data.name,h(S);break}case 203:this.f.delete(s),h(y.data);break}};this.f.set(s,v),this.p(o)};let f=null;this.b===co.Idle?d():(f=Qr(v=>this.u()),f.then(()=>{f=null,d()}));const g=()=>{f?(f.cancel(),f=null):this.p({id:s,type:101}),h(new ki)};a=r.onCancellationRequested(g),c={dispose:jh(()=>{g(),a.dispose()})},this.d.add(c)}).finally(()=>{a.dispose(),this.d.delete(c)})}o(e,t,i){const r=this.g++,n={id:r,type:102,channelName:e,name:t,arg:i};let o=null;const a=new I({onWillAddFirstListener:()=>{const l=()=>{this.d.add(a),this.p(n)};this.b===co.Idle?l():(o=Qr(u=>this.u()),o.then(()=>{o=null,l()}))},onDidRemoveLastListener:()=>{o?(o.cancel(),o=null):(this.d.delete(a),this.p({id:r,type:103}))}}),c=l=>a.fire(l.data);return this.f.set(r,c),a.event}p(e){switch(e.type){case 100:case 102:{const t=this.q([e.type,e.id,e.channelName,e.name],e.arg);this.j?.logOutgoing(t,e.id,0,`${RE(e.type)}: ${e.channelName}.${e.name}`,e.arg);return}case 101:case 103:{const t=this.q([e.type,e.id]);this.j?.logOutgoing(t,e.id,0,RE(e.type));return}}}q(e,t=void 0){const i=new n2;return h1(i,e),h1(i,t),this.r(i.buffer)}r(e){try{return this.l.send(e),e.byteLength}catch{return 0}}s(e){const t=new s2(e),i=d1(t),r=d1(t),s=i[0];switch(s){case 200:return this.j?.logIncoming(e.byteLength,0,0,LE(s)),this.t({type:i[0]});case 201:case 202:case 204:case 203:return this.j?.logIncoming(e.byteLength,i[1],0,LE(s),r),this.t({type:i[0],id:i[1],data:r})}}t(e){if(e.type===200){this.b=co.Idle,this.k.fire();return}this.f.get(e.id)?.(e)}get onDidInitializePromise(){return ze.toPromise(this.onDidInitialize)}u(){return this.b===co.Idle?Promise.resolve():this.onDidInitializePromise}dispose(){this.a=!0,this.h&&(this.h.dispose(),this.h=null),Sr(this.d.values()),this.d.clear()}};__decorate([PE],OE.prototype,"onDidInitializePromise",null);function a2(e){let t=!1;return{call(i,r,s){return t?e.call(i,r,s):bi(0).then(()=>t=!0).then(()=>e.call(i,r,s))},listen(i,r){if(t)return e.listen(i,r);const s=new LD;return bi(0).then(()=>t=!0).then(()=>s.input=e.listen(i,r)),s.event}}}var f1;(function(e){function t(n,o,a){const c=n,l=a&&a.disableMarshalling,u=new Map;for(const h in c)r(h)&&u.set(h,ze.buffer(c[h],!0,void 0,o));return new class{listen(h,d,f){const g=u.get(d);if(g)return g;const v=c[d];if(typeof v=="function"){if(s(d))return v.call(c,f);if(r(d))return u.set(d,ze.buffer(c[d],!0,void 0,o)),u.get(d)}throw new yr(`Event not found: ${d}`)}call(h,d,f){const g=c[d];if(typeof g=="function"){if(!l&&Array.isArray(f))for(let y=0;y<f.length;y++)f[y]=oi(f[y]);let v=g.apply(c,f);return v instanceof Promise||(v=Promise.resolve(v)),v}throw new yr(`Method not found: ${d}`)}}}e.fromService=t;function i(n,o){const a=o&&o.disableMarshalling;return new Proxy({},{get(c,l){if(typeof l=="string")return o?.properties?.has(l)?o.properties.get(l):s(l)?function(u){return n.listen(l,u)}:r(l)?n.listen(l):async function(...u){let h;o&&!$t(o.context)?h=[o.context,...u]:h=u;const d=await n.call(l,h);return a?d:oi(d)};throw new yr(`Property not found: ${String(l)}`)}})}e.toService=i;function r(n){return n[0]==="o"&&n[1]==="n"&&D5(n.charCodeAt(2))}function s(n){return/^onDynamic/.test(n)&&D5(n.charCodeAt(9))}})(f1||(f1={}));var FE;(function(e){e.Created="created",e.Read="read",e.Write="write",e.Open="open",e.Error="error",e.Close="close",e.BrowserWebSocketBlobReceived="browserWebSocketBlobReceived",e.NodeEndReceived="nodeEndReceived",e.NodeEndSent="nodeEndSent",e.NodeDrainBegin="nodeDrainBegin",e.NodeDrainEnd="nodeDrainEnd",e.zlibInflateError="zlibInflateError",e.zlibInflateData="zlibInflateData",e.zlibInflateInitialWrite="zlibInflateInitialWrite",e.zlibInflateInitialFlushFired="zlibInflateInitialFlushFired",e.zlibInflateWrite="zlibInflateWrite",e.zlibInflateFlushFired="zlibInflateFlushFired",e.zlibDeflateError="zlibDeflateError",e.zlibDeflateData="zlibDeflateData",e.zlibDeflateWrite="zlibDeflateWrite",e.zlibDeflateFlushFired="zlibDeflateFlushFired",e.WebSocketNodeSocketWrite="webSocketNodeSocketWrite",e.WebSocketNodeSocketPeekedHeader="webSocketNodeSocketPeekedHeader",e.WebSocketNodeSocketReadHeader="webSocketNodeSocketReadHeader",e.WebSocketNodeSocketReadData="webSocketNodeSocketReadData",e.WebSocketNodeSocketUnmaskedData="webSocketNodeSocketUnmaskedData",e.WebSocketNodeSocketDrainBegin="webSocketNodeSocketDrainBegin",e.WebSocketNodeSocketDrainEnd="webSocketNodeSocketDrainEnd",e.ProtocolHeaderRead="protocolHeaderRead",e.ProtocolMessageRead="protocolMessageRead",e.ProtocolHeaderWrite="protocolHeaderWrite",e.ProtocolMessageWrite="protocolMessageWrite",e.ProtocolWrite="protocolWrite"})(FE||(FE={}));var mn;(function(e){e.enableDiagnostics=!!globalThis.process?.env?.ENABLE_SOCKET_LOG,e.records=[];const t=new WeakMap;let i=0;function r(n,o){if(!t.has(n)){const a=String(++i);t.set(n,a)}return t.get(n)}function s(n,o,a,c){if(!e.enableDiagnostics)return;const l=r(n,o);if(c instanceof J||c instanceof Uint8Array||c instanceof ArrayBuffer||ArrayBuffer.isView(c)){const u=J.alloc(c.byteLength);u.set(c),e.records.push({timestamp:Date.now(),id:l,label:o,type:a,buff:u})}else e.records.push({timestamp:Date.now(),id:l,label:o,type:a,data:c})}e.traceSocketEvent=s})(mn||(mn={}));var ME;(function(e){e[e.NodeSocketCloseEvent=0]="NodeSocketCloseEvent",e[e.WebSocketCloseEvent=1]="WebSocketCloseEvent"})(ME||(ME={}));var p1=null;function vn(){return p1||(p1=J.alloc(0)),p1}var UE=class{get byteLength(){return this.b}constructor(){this.a=[],this.b=0}acceptChunk(e){this.a.push(e),this.b+=e.byteLength}read(e){return this.c(e,!0)}peek(e){return this.c(e,!1)}c(e,t){if(e===0)return vn();if(e>this.b)throw new Error("Cannot read so many bytes!");if(this.a[0].byteLength===e){const n=this.a[0];return t&&(this.a.shift(),this.b-=e),n}if(this.a[0].byteLength>e){const n=this.a[0].slice(0,e);return t&&(this.a[0]=this.a[0].slice(e),this.b-=e),n}const i=J.alloc(e);let r=0,s=0;for(;e>0;){const n=this.a[s];if(n.byteLength>e){const o=n.slice(0,e);i.set(o,r),r+=e,t&&(this.a[s]=n.slice(e),this.b-=e),e-=e}else i.set(n,r),r+=n.byteLength,t?(this.a.shift(),this.b-=n.byteLength):s++,e-=n.byteLength}return i}},_E;(function(e){e[e.None=0]="None",e[e.Regular=1]="Regular",e[e.Control=2]="Control",e[e.Ack=3]="Ack",e[e.Disconnect=5]="Disconnect",e[e.ReplayRequest=6]="ReplayRequest",e[e.Pause=7]="Pause",e[e.Resume=8]="Resume",e[e.KeepAlive=9]="KeepAlive",e[e.RemoteDisconnect=192]="RemoteDisconnect"})(_E||(_E={}));function jE(e){switch(e){case 0:return"None";case 1:return"Regular";case 2:return"Control";case 3:return"Ack";case 5:return"Disconnect";case 6:return"ReplayRequest";case 7:return"PauseWriting";case 8:return"ResumeWriting";case 9:return"KeepAlive";case 192:return"RemoteDisconnect"}}var HE;(function(e){e[e.HeaderLength=13]="HeaderLength",e[e.AcknowledgeTime=2e3]="AcknowledgeTime",e[e.TimeoutTime=2e4]="TimeoutTime",e[e.ReconnectionGraceTime=2592e5]="ReconnectionGraceTime",e[e.ReconnectionShortGraceTime=3e5]="ReconnectionShortGraceTime",e[e.KeepAliveSendTime=5e3]="KeepAliveSendTime"})(HE||(HE={}));var Yr=class{constructor(e,t,i,r){this.type=e,this.id=t,this.ack=i,this.data=r,this.writtenTime=0}get size(){return this.data.byteLength}},BE=class extends X{constructor(e){super(),this.f=this.B(new I),this.onMessage=this.f.event,this.g={readHead:!0,readLen:13,messageType:0,id:0,ack:0},this.a=e,this.b=!1,this.c=new UE,this.B(this.a.onData(t=>this.acceptChunk(t))),this.lastReadTime=Date.now()}acceptChunk(e){if(!(!e||e.byteLength===0))for(this.lastReadTime=Date.now(),this.c.acceptChunk(e);this.c.byteLength>=this.g.readLen;){const t=this.c.read(this.g.readLen);if(this.g.readHead)this.g.readHead=!1,this.g.readLen=t.readUInt32BE(9),this.g.messageType=t.readUInt8(0),this.g.id=t.readUInt32BE(1),this.g.ack=t.readUInt32BE(5),this.a.traceSocketEvent("protocolHeaderRead",{messageType:jE(this.g.messageType),id:this.g.id,ack:this.g.ack,messageSize:this.g.readLen});else{const i=this.g.messageType,r=this.g.id,s=this.g.ack;if(this.g.readHead=!0,this.g.readLen=13,this.g.messageType=0,this.g.id=0,this.g.ack=0,this.a.traceSocketEvent("protocolMessageRead",t),this.f.fire(new Yr(i,r,s,t)),this.b)break}}}readEntireBuffer(){return this.c.read(this.c.byteLength)}dispose(){this.b=!0,super.dispose()}},WE=class{constructor(e){this.k=null,this.a=!1,this.b=!1,this.c=e,this.d=[],this.f=0,this.lastWriteTime=0}dispose(){try{this.flush()}catch{}this.a=!0}drain(){return this.flush(),this.c.drain()}flush(){this.m()}pause(){this.b=!0}resume(){this.b=!1,this.l()}write(e){if(this.a)return;e.writtenTime=Date.now(),this.lastWriteTime=Date.now();const t=J.alloc(13);t.writeUInt8(e.type,0),t.writeUInt32BE(e.id,1),t.writeUInt32BE(e.ack,5),t.writeUInt32BE(e.data.byteLength,9),this.c.traceSocketEvent("protocolHeaderWrite",{messageType:jE(e.type),id:e.id,ack:e.ack,messageSize:e.data.byteLength}),this.c.traceSocketEvent("protocolMessageWrite",e.data),this.j(t,e.data)}g(e,t){const i=this.f===0;return this.d.push(e,t),this.f+=e.byteLength+t.byteLength,i}h(){const e=J.concat(this.d,this.f);return this.d.length=0,this.f=0,e}j(e,t){this.g(e,t)&&this.l()}l(){this.k||(this.k=setTimeout(()=>{this.k=null,this.m()}))}m(){if(this.f===0||this.b)return;const e=this.h();this.c.traceSocketEvent("protocolWrite",{byteLength:e.byteLength}),this.c.write(e)}},uo=class{constructor(){this.b=!1,this.c=!1,this.d=[],this.a=new I({onWillAddFirstListener:()=>{this.b=!0,queueMicrotask(()=>this.f())},onDidRemoveLastListener:()=>{this.b=!1}}),this.event=this.a.event}f(){if(!this.c){for(this.c=!0;this.b&&this.d.length>0;)this.a.fire(this.d.shift());this.c=!1}}fire(e){this.b?this.d.length>0?this.d.push(e):this.a.fire(e):this.d.push(e)}flushBuffer(){this.d=[]}},c2=class{constructor(e){this.data=e,this.next=null}},l2=class{constructor(){this.a=null,this.b=null}length(){let e=0,t=this.a;for(;t;)t=t.next,e++;return e}peek(){return this.a?this.a.data:null}toArray(){const e=[];let t=0,i=this.a;for(;i;)e[t++]=i.data,i=i.next;return e}pop(){if(this.a){if(this.a===this.b){this.a=null,this.b=null;return}this.a=this.a.next}}push(e){const t=new c2(e);if(!this.a){this.a=t,this.b=t;return}this.b.next=t,this.b=t}},u2=class hs{static{this.a=10}static{this.b=null}static getInstance(){return hs.b||(hs.b=new hs),hs.b}constructor(){this.c=[];const t=Date.now();for(let i=0;i<hs.a;i++)this.c[i]=t-1e3*i;setInterval(()=>{for(let i=hs.a;i>=1;i--)this.c[i]=this.c[i-1];this.c[0]=Date.now()},1e3)}d(){const t=Date.now(),i=(1+hs.a)*1e3;let r=0;for(let s=0;s<hs.a;s++)t-this.c[s]<=i&&r++;return 1-r/hs.a}hasHighLoad(){return this.d()>=.5}},g1=class{get unacknowledgedCount(){return this.d-this.f}constructor(e){this.w=new uo,this.onControlMessage=this.w.event,this.x=new uo,this.onMessage=this.x.event,this.y=new uo,this.onDidDispose=this.y.event,this.z=new uo,this.onSocketClose=this.z.event,this.A=new uo,this.onSocketTimeout=this.A.event,this.u=e.loadEstimator??u2.getInstance(),this.v=e.sendKeepAlive??!0,this.a=!1,this.c=new l2,this.d=0,this.f=0,this.g=null,this.h=0,this.j=0,this.k=0,this.l=null,this.n=0,this.o=Date.now(),this.t=new ue,this.p=e.socket,this.q=this.t.add(new WE(this.p)),this.s=this.t.add(new BE(this.p)),this.t.add(this.s.onMessage(t=>this.B(t))),this.t.add(this.p.onClose(t=>this.z.fire(t))),e.initialChunk&&this.s.acceptChunk(e.initialChunk),this.v?this.m=setInterval(()=>{this.F()},5e3):this.m=null}dispose(){this.g&&(clearTimeout(this.g),this.g=null),this.l&&(clearTimeout(this.l),this.l=null),this.m&&(clearInterval(this.m),this.m=null),this.t.dispose()}drain(){return this.q.drain()}sendDisconnect(){if(!this.b){this.b=!0;const e=new Yr(5,0,0,vn());this.q.write(e),this.q.flush()}}sendPause(){const e=new Yr(7,0,0,vn());this.q.write(e)}sendResume(){const e=new Yr(8,0,0,vn());this.q.write(e)}pauseSocketWriting(){this.q.pause()}getSocket(){return this.p}getMillisSinceLastIncomingData(){return Date.now()-this.s.lastReadTime}beginAcceptReconnection(e,t){this.a=!0,this.t.dispose(),this.t=new ue,this.w.flushBuffer(),this.z.flushBuffer(),this.A.flushBuffer(),this.p.dispose(),this.n=0,this.o=Date.now(),this.p=e,this.q=this.t.add(new WE(this.p)),this.s=this.t.add(new BE(this.p)),this.t.add(this.s.onMessage(i=>this.B(i))),this.t.add(this.p.onClose(i=>this.z.fire(i))),this.s.acceptChunk(t)}endAcceptReconnection(){this.a=!1,this.j=this.h;const e=new Yr(3,0,this.j,vn());this.q.write(e);const t=this.c.toArray();for(let i=0,r=t.length;i<r;i++)this.q.write(t[i]);this.D()}acceptDisconnect(){this.y.fire()}B(e){if(e.ack>this.f){this.f=e.ack;do{const t=this.c.peek();if(t&&t.id<=e.ack)this.c.pop();else break}while(!0)}switch(e.type){case 0:break;case 1:{if(e.id>this.h)if(e.id!==this.h+1){const t=Date.now();t-this.n>1e4&&(this.n=t,this.q.write(new Yr(6,0,0,vn())))}else this.h=e.id,this.k=Date.now(),this.C(),this.x.fire(e.data);break}case 2:{this.w.fire(e.data);break}case 3:break;case 5:{this.y.fire();break}case 6:{const t=this.c.toArray();for(let i=0,r=t.length;i<r;i++)this.q.write(t[i]);this.D();break}case 7:{this.q.pause();break}case 8:{this.q.resume();break}case 9:break;case 192:{this.p.end();break}}}readEntireBuffer(){return this.s.readEntireBuffer()}flush(){this.q.flush()}send(e){const t=++this.d;this.j=this.h;const i=new Yr(1,t,this.j,e);this.c.push(i),this.a||(this.q.write(i),this.D())}sendControl(e){const t=new Yr(2,0,0,e);this.q.write(t)}C(){if(this.h<=this.j||this.l)return;const e=Date.now()-this.k;if(e>=2e3){this.E();return}this.l=setTimeout(()=>{this.l=null,this.C()},2e3-e+5)}D(){if(this.d<=this.f||this.g||this.a)return;const e=this.c.peek(),t=Date.now()-e.writtenTime,i=Date.now()-this.s.lastReadTime,r=Date.now()-this.o;if(t>=2e4&&i>=2e4&&r>=2e4&&!this.u.hasHighLoad()){this.o=Date.now(),this.A.fire({unacknowledgedMsgCount:this.c.length(),timeSinceOldestUnacknowledgedMsg:t,timeSinceLastReceivedSomeData:i});return}const s=Math.max(2e4-t,2e4-i,2e4-r,500);this.g=setTimeout(()=>{this.g=null,this.D()},s)}E(){if(this.h<=this.j)return;this.j=this.h;const e=new Yr(3,0,this.j,vn());this.q.write(e)}F(){this.j=this.h;const e=new Yr(9,0,this.j,vn());this.q.write(e)}};(()=>{if(!mn.enableDiagnostics)return;if(typeof Lm!="function"){console.log("Can only log socket diagnostics on native platforms.");return}const e=process.argv.includes("--type=renderer")?"renderer":process.argv.includes("--type=extensionHost")?"extensionHost":process.argv.some(t=>t.includes("server-main"))?"server":"unknown";setInterval(()=>{mn.records.forEach(s=>{s.buff&&(s.data=Buffer.from(s.buff.buffer).toString("base64"),s.buff=void 0)});const t=Lm("fs"),r=Lm("path").join(globalThis.process?.env?.SOCKET_LOG_DIR||"/cloudide/component/log",`${e}-${process.pid}_${new Date().toISOString().replaceAll(":","-")}.json`);console.log(`dumping socket diagnostics at ${r}`),t.writeFile(r,JSON.stringify(mn.records,null,2),console.log),mn.records.splice(0)},3e4)})();import"crypto";import"net";import{tmpdir as h2}from"os";import{createDeflateRaw as d2,createInflateRaw as f2}from"zlib";var Ht=function(){if(typeof crypto=="object"&&typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let e;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?e=crypto.getRandomValues.bind(crypto):e=function(r){for(let s=0;s<r.length;s++)r[s]=Math.floor(Math.random()*256);return r};const t=new Uint8Array(16),i=[];for(let r=0;r<256;r++)i.push(r.toString(16).padStart(2,"0"));return function(){e(t),t[6]=t[6]&15|64,t[8]=t[8]&63|128;let s=0,n="";return n+=i[t[s++]],n+=i[t[s++]],n+=i[t[s++]],n+=i[t[s++]],n+="-",n+=i[t[s++]],n+=i[t[s++]],n+="-",n+=i[t[s++]],n+=i[t[s++]],n+="-",n+=i[t[s++]],n+=i[t[s++]],n+="-",n+=i[t[s++]],n+=i[t[s++]],n+=i[t[s++]],n+=i[t[s++]],n+=i[t[s++]],n+=i[t[s++]],n}}(),p2=3e4,hl=class{traceSocketEvent(e,t){mn.traceSocketEvent(this.socket,this.debugLabel,e,t)}constructor(e,t=""){this.f=!0,this.debugLabel=t,this.socket=e,this.traceSocketEvent("created",{type:"NodeSocket"}),this.a=r=>{if(this.traceSocketEvent("error",{code:r?.code,message:r?.message}),r){if(r.code==="EPIPE")return;Et(r)}},this.socket.on("error",this.a);let i;this.b=r=>{this.traceSocketEvent("close",{hadError:r}),this.f=!1,i&&clearTimeout(i)},this.socket.on("close",this.b),this.d=()=>{this.traceSocketEvent("nodeEndReceived"),this.f=!1,i=setTimeout(()=>e.destroy(),p2)},this.socket.on("end",this.d)}dispose(){this.socket.off("error",this.a),this.socket.off("close",this.b),this.socket.off("end",this.d),this.socket.destroy()}onData(e){const t=i=>{this.traceSocketEvent("read",i),e(J.wrap(i))};return this.socket.on("data",t),{dispose:()=>this.socket.off("data",t)}}onClose(e){const t=i=>{e({type:0,hadError:i,error:void 0})};return this.socket.on("close",t),{dispose:()=>this.socket.off("close",t)}}onEnd(e){const t=()=>{e()};return this.socket.on("end",t),{dispose:()=>this.socket.off("end",t)}}write(e){if(!(this.socket.destroyed||!this.f))try{this.traceSocketEvent("write",e),this.socket.write(e.buffer,t=>{if(t){if(t.code==="EPIPE")return;Et(t)}})}catch(t){if(t.code==="EPIPE")return;Et(t)}}end(){this.traceSocketEvent("nodeEndSent"),this.socket.end()}drain(){return this.traceSocketEvent("nodeDrainBegin"),new Promise((e,t)=>{if(this.socket.bufferSize===0){this.traceSocketEvent("nodeDrainEnd"),e();return}const i=()=>{this.socket.off("close",i),this.socket.off("end",i),this.socket.off("error",i),this.socket.off("timeout",i),this.socket.off("drain",i),this.traceSocketEvent("nodeDrainEnd"),e()};this.socket.on("close",i),this.socket.on("end",i),this.socket.on("error",i),this.socket.on("timeout",i),this.socket.on("drain",i)})}},zE;(function(e){e[e.MinHeaderByteSize=2]="MinHeaderByteSize",e[e.MaxWebSocketMessageLength=262144]="MaxWebSocketMessageLength"})(zE||(zE={}));var VE;(function(e){e[e.PeekHeader=1]="PeekHeader",e[e.ReadHeader=2]="ReadHeader",e[e.ReadBody=3]="ReadBody",e[e.Fin=4]="Fin"})(VE||(VE={}));var g2=class extends X{get permessageDeflate(){return this.a.permessageDeflate}get recordedInflateBytes(){return this.a.recordedInflateBytes}traceSocketEvent(e,t){this.socket.traceSocketEvent(e,t)}constructor(e,t,i,r){super(),this.f=this.B(new I),this.g=this.B(new I),this.h=!1,this.j={state:1,readLen:2,fin:0,compressed:!1,firstFrameOfMessage:!0,mask:0,opcode:0},this.socket=e,this.traceSocketEvent("created",{type:"WebSocketNodeSocket",permessageDeflate:t,inflateBytesLength:i?.byteLength||0,recordInflateBytes:r}),this.a=this.B(new m2(this,t,i,r,this.f,(s,n)=>this.m(s,n))),this.B(this.a.onError(s=>{console.error(s),Et(s),this.g.fire({type:0,hadError:!0,error:s})})),this.b=new UE,this.B(this.socket.onData(s=>this.n(s))),this.B(this.socket.onClose(async s=>{this.a.isProcessingReadQueue()&&await ze.toPromise(this.a.onDidFinishProcessingReadQueue),this.g.fire(s)}))}dispose(){this.a.isProcessingWriteQueue()?this.B(this.a.onDidFinishProcessingWriteQueue(()=>{this.dispose()})):(this.socket.dispose(),super.dispose())}onData(e){return this.f.event(e)}onClose(e){return this.g.event(e)}onEnd(e){return this.socket.onEnd(e)}write(e){let t=0;for(;t<e.byteLength;)this.a.writeMessage(e.slice(t,Math.min(t+262144,e.byteLength)),{compressed:!0,opcode:2}),t+=262144}m(e,{compressed:t,opcode:i}){if(this.h)return;this.traceSocketEvent("webSocketNodeSocketWrite",e);let r=2;e.byteLength<126?r+=0:e.byteLength<2**16?r+=2:r+=8;const s=J.alloc(r),n=t?64:0,o=i&15;if(s.writeUInt8(128|n|o,0),e.byteLength<126)s.writeUInt8(e.byteLength,1);else if(e.byteLength<2**16){s.writeUInt8(126,1);let a=1;s.writeUInt8(e.byteLength>>>8&255,++a),s.writeUInt8(e.byteLength>>>0&255,++a)}else{s.writeUInt8(127,1);let a=1;s.writeUInt8(0,++a),s.writeUInt8(0,++a),s.writeUInt8(0,++a),s.writeUInt8(0,++a),s.writeUInt8(e.byteLength>>>24&255,++a),s.writeUInt8(e.byteLength>>>16&255,++a),s.writeUInt8(e.byteLength>>>8&255,++a),s.writeUInt8(e.byteLength>>>0&255,++a)}this.socket.write(J.concat([s,e]))}end(){this.h=!0,this.socket.end()}n(e){if(e.byteLength!==0){for(this.b.acceptChunk(e);this.b.byteLength>=this.j.readLen;)if(this.j.state===1){const t=this.b.peek(this.j.readLen),i=t.readUInt8(0),r=(i&128)>>>7,s=(i&64)>>>6,n=i&15,o=t.readUInt8(1),a=(o&128)>>>7,c=o&127;this.j.state=2,this.j.readLen=2+(a?4:0)+(c===126?2:0)+(c===127?8:0),this.j.fin=r,this.j.firstFrameOfMessage&&(this.j.compressed=!!s),this.j.firstFrameOfMessage=!!r,this.j.mask=0,this.j.opcode=n,this.traceSocketEvent("webSocketNodeSocketPeekedHeader",{headerSize:this.j.readLen,compressed:this.j.compressed,fin:this.j.fin,opcode:this.j.opcode})}else if(this.j.state===2){const t=this.b.read(this.j.readLen),i=t.readUInt8(1),r=(i&128)>>>7;let s=i&127,n=1;s===126?s=t.readUInt8(++n)*2**8+t.readUInt8(++n):s===127&&(s=t.readUInt8(++n)*0+t.readUInt8(++n)*0+t.readUInt8(++n)*0+t.readUInt8(++n)*0+t.readUInt8(++n)*2**24+t.readUInt8(++n)*2**16+t.readUInt8(++n)*2**8+t.readUInt8(++n));let o=0;r&&(o=t.readUInt8(++n)*2**24+t.readUInt8(++n)*2**16+t.readUInt8(++n)*2**8+t.readUInt8(++n)),this.j.state=3,this.j.readLen=s,this.j.mask=o,this.traceSocketEvent("webSocketNodeSocketPeekedHeader",{bodySize:this.j.readLen,compressed:this.j.compressed,fin:this.j.fin,mask:this.j.mask,opcode:this.j.opcode})}else if(this.j.state===3){const t=this.b.read(this.j.readLen);this.traceSocketEvent("webSocketNodeSocketReadData",t),b2(t,this.j.mask),this.traceSocketEvent("webSocketNodeSocketUnmaskedData",t),this.j.state=1,this.j.readLen=2,this.j.mask=0,this.j.opcode<=2?this.a.acceptFrame(t,this.j.compressed,!!this.j.fin):this.j.opcode===9&&this.a.writeMessage(t,{compressed:!1,opcode:10})}}}async drain(){this.traceSocketEvent("webSocketNodeSocketDrainBegin"),this.a.isProcessingWriteQueue()&&await ze.toPromise(this.a.onDidFinishProcessingWriteQueue),await this.socket.drain(),this.traceSocketEvent("webSocketNodeSocketDrainEnd")}},m2=class extends X{get permessageDeflate(){return!!(this.b&&this.f)}get recordedInflateBytes(){return this.b?this.b.recordedInflateBytes:J.alloc(0)}constructor(e,t,i,r,s,n){super(),this.n=e,this.r=s,this.s=n,this.a=this.B(new I),this.onError=this.a.event,this.g=[],this.h=[],this.j=this.B(new I),this.onDidFinishProcessingReadQueue=this.j.event,this.m=this.B(new I),this.onDidFinishProcessingWriteQueue=this.m.event,this.t=!1,this.y=!1,t?(this.b=this.B(new v2(this.n,r,i,{windowBits:15})),this.f=this.B(new w2(this.n,{windowBits:15})),this.B(this.b.onError(o=>this.a.fire(o))),this.B(this.f.onError(o=>this.a.fire(o)))):(this.b=null,this.f=null)}writeMessage(e,t){this.g.push({data:e,options:t}),this.u()}async u(){if(!this.t){for(this.t=!0;this.g.length>0;){const{data:e,options:t}=this.g.shift();if(this.f&&t.compressed){const i=await this.w(this.f,e);this.s(i,t)}else this.s(e,{...t,compressed:!1})}this.t=!1,this.m.fire()}}isProcessingWriteQueue(){return this.t}w(e,t){return new Promise((i,r)=>{e.write(t),e.flush(s=>i(s))})}acceptFrame(e,t,i){this.h.push({data:e,isCompressed:t,isLastFrameOfMessage:i}),this.z()}async z(){if(!this.y){for(this.y=!0;this.h.length>0;){const e=this.h.shift();if(this.b&&e.isCompressed){const t=await this.C(this.b,e.data,e.isLastFrameOfMessage);this.r.fire(t)}else this.r.fire(e.data)}this.y=!1,this.j.fire()}}isProcessingReadQueue(){return this.y}C(e,t,i){return new Promise((r,s)=>{e.write(t),i&&e.write(J.fromByteArray([0,0,255,255])),e.flush(n=>r(n))})}},v2=class extends X{get recordedInflateBytes(){return this.j?J.concat(this.f):J.alloc(0)}constructor(e,t,i,r){super(),this.h=e,this.j=t,this.a=this.B(new I),this.onError=this.a.event,this.f=[],this.g=[],this.b=f2(r),this.b.on("error",s=>{this.h.traceSocketEvent("zlibInflateError",{message:s?.message,code:s?.code}),this.a.fire(s)}),this.b.on("data",s=>{this.h.traceSocketEvent("zlibInflateData",s),this.g.push(J.wrap(s))}),i&&(this.h.traceSocketEvent("zlibInflateInitialWrite",i.buffer),this.b.write(i.buffer),this.b.flush(()=>{this.h.traceSocketEvent("zlibInflateInitialFlushFired"),this.g.length=0}))}write(e){this.j&&this.f.push(e.clone()),this.h.traceSocketEvent("zlibInflateWrite",e),this.b.write(e.buffer)}flush(e){this.b.flush(()=>{this.h.traceSocketEvent("zlibInflateFlushFired");const t=J.concat(this.g);this.g.length=0,e(t)})}},w2=class extends X{constructor(e,t){super(),this.g=e,this.a=this.B(new I),this.onError=this.a.event,this.f=[],this.b=d2({windowBits:15}),this.b.on("error",i=>{this.g.traceSocketEvent("zlibDeflateError",{message:i?.message,code:i?.code}),this.a.fire(i)}),this.b.on("data",i=>{this.g.traceSocketEvent("zlibDeflateData",i),this.f.push(J.wrap(i))})}write(e){this.g.traceSocketEvent("zlibDeflateWrite",e.buffer),this.b.write(e.buffer)}flush(e){this.b.flush(2,()=>{this.g.traceSocketEvent("zlibDeflateFlushFired");let t=J.concat(this.f);this.f.length=0,t=t.slice(0,t.byteLength-4),e(t)})}};function b2(e,t){if(t===0)return;const i=e.byteLength>>>2;for(let c=0;c<i;c++){const l=e.readUInt32BE(c*4);e.writeUInt32BE(l^t,c*4)}const r=i*4,s=e.byteLength-r,n=t>>>24&255,o=t>>>16&255,a=t>>>8&255;s>=1&&e.writeUInt8(e.readUInt8(r)^n,r),s>=2&&e.writeUInt8(e.readUInt8(r+1)^o,r+1),s>=3&&e.writeUInt8(e.readUInt8(r+2)^a,r+2)}var qE=process.env.XDG_RUNTIME_DIR,y2={2:107,1:103};function E2(){const e=Ht();if(process.platform==="win32")return`\\\\.\\pipe\\vscode-ipc-${e}-sock`;const t=process.platform!=="darwin"&&qE?qE:h2(),i=rt(t,`vscode-ipc-${e}.sock`);return S2(i),i}function S2(e){const t=y2[qD];typeof t=="number"&&e.length>=t&&console.warn(`WARNING: IPC handle "${e}" is longer than ${t} chars, try a shorter --user-data-dir`)}function ot(e){if(!e||typeof e!="object"||e instanceof RegExp)return e;const t=Array.isArray(e)?[]:{};return Object.entries(e).forEach(([i,r])=>{t[i]=r&&typeof r=="object"?ot(r):r}),t}function GE(e){if(!e||typeof e!="object")return e;const t=[e];for(;t.length>0;){const i=t.shift();Object.freeze(i);for(const r in i)if(JE.call(i,r)){const s=i[r];typeof s=="object"&&!Object.isFrozen(s)&&!PA(s)&&t.push(s)}}return e}var JE=Object.prototype.hasOwnProperty;function ya(e,t){return m1(e,t,new Set)}function m1(e,t,i){if($t(e))return e;const r=t(e);if(typeof r<"u")return r;if(Array.isArray(e)){const s=[];for(const n of e)s.push(m1(n,t,i));return s}if(St(e)){if(i.has(e))throw new Error("Cannot clone recursive data-structure");i.add(e);const s={};for(const n in e)JE.call(e,n)&&(s[n]=m1(e[n],t,i));return i.delete(e),s}return e}function xs(e,t,i=!0){return St(e)?(St(t)&&Object.keys(t).forEach(r=>{r in e?i&&(St(e[r])&&St(t[r])?xs(e[r],t[r],i):e[r]=t[r]):e[r]=t[r]}),e):t}function Ir(e,t){if(e===t)return!0;if(e==null||t===null||t===void 0||typeof e!=typeof t||typeof e!="object"||Array.isArray(e)!==Array.isArray(t))return!1;let i,r;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(!Ir(e[i],t[i]))return!1}else{const s=[];for(r in e)s.push(r);s.sort();const n=[];for(r in t)n.push(r);if(n.sort(),!Ir(s,n))return!1;for(i=0;i<s.length;i++)if(!Ir(e[s[i]],t[s[i]]))return!1}return!0}function x2(e){const t=new Set;return JSON.stringify(e,(i,r)=>{if(St(r)||Array.isArray(r)){if(t.has(r))return"[Circular]";t.add(r)}return typeof r=="bigint"?`[BigInt ${r.toString()}]`:r})}function QE(e,t){const i=Object.create(null);for(const[r,s]of Object.entries(e))t(r,s)&&(i[r]=s);return i}var YE={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}},XE="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function k2(e=""){let t="(-?\\d*\\.\\d\\w*)|([^";for(const i of XE)e.indexOf(i)>=0||(t+="\\"+i);return t+="\\s]+)",new RegExp(t,"g")}var $2=k2();function ZE(e){let t=$2;if(e&&e instanceof RegExp)if(e.global)t=e;else{let i="g";e.ignoreCase&&(i+="i"),e.multiline&&(i+="m"),e.unicode&&(i+="u"),t=new RegExp(e.source,i)}return t.lastIndex=0,t}var KE=new Kc;KE.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function eS(e,t,i,r,s){if(t=ZE(t),s||(s=Qi.first(KE)),i.length>s.maxLen){let l=e-s.maxLen/2;return l<0?l=0:r+=l,i=i.substring(l,e+s.maxLen/2),eS(e,t,i,r,s)}const n=Date.now(),o=e-1-r;let a=-1,c=null;for(let l=1;!(Date.now()-n>=s.timeBudget);l++){const u=o-s.windowSize*l;t.lastIndex=Math.max(0,u);const h=C2(t,i,o,a);if(!h&&c||(c=h,u<=0))break;a=u}if(c){const l={word:c[0],startColumn:r+1+c.index,endColumn:r+1+c.index+c[0].length};return t.lastIndex=0,l}return null}function C2(e,t,i,r){let s;for(;s=e.exec(t);){const n=s.index||0;if(n<=i&&e.lastIndex>=i)return s;if(r>0&&n>r)return null}return null}var tS;(function(e){e[e.None=0]="None",e[e.Keep=1]="Keep",e[e.Brackets=2]="Brackets",e[e.Advanced=3]="Advanced",e[e.Full=4]="Full"})(tS||(tS={}));var I2=8,P2=class{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}},Ye=class{constructor(e,t,i,r){this.id=e,this.name=t,this.defaultValue=i,this.schema=r}applyUpdate(e,t){return bd(e,t)}compute(e,t,i){return i}},wd=class{constructor(e,t){this.newValue=e,this.didChange=t}};function bd(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return new wd(t,e!==t);if(Array.isArray(e)||Array.isArray(t)){const r=Array.isArray(e)&&Array.isArray(t)&&Vr(e,t);return new wd(t,!r)}let i=!1;for(const r in t)if(t.hasOwnProperty(r)){const s=bd(e[r],t[r]);s.didChange&&(e[r]=s.newValue,i=!0)}return new wd(e,i)}var dl=class{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return bd(e,t)}validate(e){return this.defaultValue}},Ea=class{constructor(e,t,i,r){this.id=e,this.name=t,this.defaultValue=i,this.schema=r}applyUpdate(e,t){return bd(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,i){return i}};function Q(e,t){return typeof e>"u"?t:e==="false"?!1:!!e}var be=class extends Ea{constructor(e,t,i,r=void 0){typeof r<"u"&&(r.type="boolean",r.default=i),super(e,t,i,r)}validate(e){return Q(e,this.defaultValue)}};function D2(e,t,i,r){if(typeof e>"u")return t;let s=parseInt(e,10);return isNaN(s)?t:(s=Math.max(i,s),s=Math.min(r,s),s|0)}var We=class cI extends Ea{static clampedInt(t,i,r,s){return D2(t,i,r,s)}constructor(t,i,r,s,n,o=void 0){typeof o<"u"&&(o.type="integer",o.default=r,o.minimum=s,o.maximum=n),super(t,i,r,o),this.minimum=s,this.maximum=n}validate(t){return cI.clampedInt(t,this.defaultValue,this.minimum,this.maximum)}},Xr=class lI extends Ea{static clamp(t,i,r){return t<i?i:t>r?r:t}static float(t,i){if(typeof t=="number")return t;if(typeof t>"u")return i;const r=parseFloat(t);return isNaN(r)?i:r}constructor(t,i,r,s,n){typeof n<"u"&&(n.type="number",n.default=r),super(t,i,r,n),this.validationFn=s}validate(t){return this.validationFn(lI.float(t,this.defaultValue))}},$i=class uI extends Ea{static string(t,i){return typeof t!="string"?i:t}constructor(t,i,r,s=void 0){typeof s<"u"&&(s.type="string",s.default=r),super(t,i,r,s)}validate(t){return uI.string(t,this.defaultValue)}};function wt(e,t,i,r){return typeof e!="string"?t:r&&e in r?r[e]:i.indexOf(e)===-1?t:e}var st=class extends Ea{constructor(e,t,i,r,s=void 0){typeof s<"u"&&(s.type="string",s.enum=r,s.default=i),super(e,t,i,s),this.c=r}validate(e){return wt(e,this.defaultValue,this.c)}},yd=class extends Ye{constructor(e,t,i,r,s,n,o=void 0){typeof o<"u"&&(o.type="string",o.enum=s,o.default=r),super(e,t,i,o),this.c=s,this.d=n}validate(e){return typeof e!="string"?this.defaultValue:this.c.indexOf(e)===-1?this.defaultValue:this.d(e)}};function A2(e){switch(e){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}var R2=class extends Ye{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[p(311,null),p(312,null),p(313,null)],default:"auto",tags:["accessibility"],description:p(314,null)})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,i){return i===0?e.accessibilitySupport:i}},T2=class extends Ye{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(23,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:p(315,null)},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:p(316,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:Q(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:Q(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}},iS;(function(e){e[e.Hidden=0]="Hidden",e[e.Blink=1]="Blink",e[e.Smooth=2]="Smooth",e[e.Phase=3]="Phase",e[e.Expand=4]="Expand",e[e.Solid=5]="Solid"})(iS||(iS={}));function L2(e){switch(e){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var Zr;(function(e){e[e.Line=1]="Line",e[e.Block=2]="Block",e[e.Underline=3]="Underline",e[e.LineThin=4]="LineThin",e[e.BlockOutline=5]="BlockOutline",e[e.UnderlineThin=6]="UnderlineThin"})(Zr||(Zr={}));function N2(e){switch(e){case"line":return Zr.Line;case"block":return Zr.Block;case"underline":return Zr.Underline;case"line-thin":return Zr.LineThin;case"block-outline":return Zr.BlockOutline;case"underline-thin":return Zr.UnderlineThin}}var O2=class extends dl{constructor(){super(145)}compute(e,t,i){const r=["monaco-editor"];return t.get(41)&&r.push(t.get(41)),e.extraEditorClassName&&r.push(e.extraEditorClassName),t.get(75)==="default"?r.push("mouse-default"):t.get(75)==="copy"&&r.push("mouse-copy"),t.get(114)&&r.push("showUnused"),t.get(143)&&r.push("showDeprecated"),r.join(" ")}},F2=class extends be{constructor(){super(38,"emptySelectionClipboard",!0,{description:p(317,null)})}compute(e,t,i){return i&&e.emptySelectionClipboard}},M2=class extends Ye{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(43,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:p(318,null)},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[p(319,null),p(320,null),p(321,null)],description:p(322,null)},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[p(323,null),p(324,null),p(325,null)],description:p(326,null)},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:p(327,null),included:Dt},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:p(328,null)},"editor.find.loop":{type:"boolean",default:e.loop,description:p(329,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:Q(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":wt(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":wt(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:Q(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:Q(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:Q(t.loop,this.defaultValue.loop)}}},U2=class _c extends Ye{static{this.OFF='"liga" off, "calt" off'}static{this.ON='"liga" on, "calt" on'}constructor(){super(53,"fontLigatures",_c.OFF,{anyOf:[{type:"boolean",description:p(330,null)},{type:"string",description:p(331,null)}],description:p(332,null),default:!1})}validate(t){return typeof t>"u"?this.defaultValue:typeof t=="string"?t==="false"||t.length===0?_c.OFF:t==="true"?_c.ON:t:t?_c.ON:_c.OFF}},_2=class jc extends Ye{static{this.OFF="normal"}static{this.TRANSLATE="translate"}constructor(){super(56,"fontVariations",jc.OFF,{anyOf:[{type:"boolean",description:p(333,null)},{type:"string",description:p(334,null)}],description:p(335,null),default:!1})}validate(t){return typeof t>"u"?this.defaultValue:typeof t=="string"?t==="false"?jc.OFF:t==="true"?jc.TRANSLATE:t:t?jc.TRANSLATE:jc.OFF}compute(t,i,r){return t.fontInfo.fontVariationSettings}},j2=class extends dl{constructor(){super(52)}compute(e,t,i){return e.fontInfo}},H2=class extends Ea{constructor(){super(54,"fontSize",$s.fontSize,{type:"number",minimum:6,maximum:100,default:$s.fontSize,description:p(336,null)})}validate(e){const t=Xr.float(e,this.defaultValue);return t===0?$s.fontSize:Xr.clamp(t,6,100)}compute(e,t,i){return e.fontInfo.fontSize}},B2=class Hc extends Ye{static{this.c=["normal","bold","100","200","300","400","500","600","700","800","900"]}static{this.d=1}static{this.e=1e3}constructor(){super(55,"fontWeight",$s.fontWeight,{anyOf:[{type:"number",minimum:Hc.d,maximum:Hc.e,errorMessage:p(337,null)},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:Hc.c}],default:$s.fontWeight,description:p(338,null)})}validate(t){return t==="normal"||t==="bold"?t:String(We.clampedInt(t,$s.fontWeight,Hc.d,Hc.e))}},W2=class extends Ye{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",multipleTests:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:"",alternativeTestsCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[p(339,null),p(340,null),p(341,null)]},i=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(60,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:p(342,null)},"editor.gotoLocation.multipleDefinitions":{description:p(343,null),...t},"editor.gotoLocation.multipleTypeDefinitions":{description:p(344,null),...t},"editor.gotoLocation.multipleDeclarations":{description:p(345,null),...t},"editor.gotoLocation.multipleImplementations":{description:p(346,null),...t},"editor.gotoLocation.multipleReferences":{description:p(347,null),...t},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:i,description:p(348,null)},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:i,description:p(349,null)},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:i,description:p(350,null)},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:i,description:p(351,null)},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:i,description:p(352,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{multiple:wt(t.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:t.multipleDefinitions??wt(t.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:t.multipleTypeDefinitions??wt(t.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:t.multipleDeclarations??wt(t.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:t.multipleImplementations??wt(t.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:t.multipleReferences??wt(t.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),multipleTests:t.multipleTests??wt(t.multipleTests,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:$i.string(t.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:$i.string(t.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:$i.string(t.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:$i.string(t.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:$i.string(t.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand),alternativeTestsCommand:$i.string(t.alternativeTestsCommand,this.defaultValue.alternativeTestsCommand)}}},z2=class extends Ye{constructor(){const e={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(62,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:p(353,null)},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:p(354,null)},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:p(355,null)},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,description:p(356,null)},"editor.hover.above":{type:"boolean",default:e.above,description:p(357,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Q(t.enabled,this.defaultValue.enabled),delay:We.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:Q(t.sticky,this.defaultValue.sticky),hidingDelay:We.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:Q(t.above,this.defaultValue.above)}}},rS;(function(e){e[e.None=0]="None",e[e.Text=1]="Text",e[e.Blocks=2]="Blocks"})(rS||(rS={}));var V2=class mm extends dl{constructor(){super(148)}compute(t,i,r){return mm.computeLayout(i,{memory:t.memory,outerWidth:t.outerWidth,outerHeight:t.outerHeight,isDominatedByLongLines:t.isDominatedByLongLines,lineHeight:t.fontInfo.lineHeight,viewLineCount:t.viewLineCount,lineNumbersDigitCount:t.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:t.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:t.fontInfo.maxDigitWidth,pixelRatio:t.pixelRatio,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(t){const i=t.height/t.lineHeight,r=Math.floor(t.paddingTop/t.lineHeight);let s=Math.floor(t.paddingBottom/t.lineHeight);t.scrollBeyondLastLine&&(s=Math.max(s,i-1));const n=(r+t.viewLineCount+s)/(t.pixelRatio*t.height),o=Math.floor(t.viewLineCount/n);return{typicalViewportLineCount:i,extraLinesBeforeFirstLine:r,extraLinesBeyondLastLine:s,desiredRatio:n,minimapLineCount:o}}static c(t,i){const r=t.outerWidth,s=t.outerHeight,n=t.pixelRatio;if(!t.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(n*s),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:s};const o=i.stableMinimapLayoutInput,a=o&&t.outerHeight===o.outerHeight&&t.lineHeight===o.lineHeight&&t.typicalHalfwidthCharacterWidth===o.typicalHalfwidthCharacterWidth&&t.pixelRatio===o.pixelRatio&&t.scrollBeyondLastLine===o.scrollBeyondLastLine&&t.paddingTop===o.paddingTop&&t.paddingBottom===o.paddingBottom&&t.minimap.enabled===o.minimap.enabled&&t.minimap.side===o.minimap.side&&t.minimap.size===o.minimap.size&&t.minimap.showSlider===o.minimap.showSlider&&t.minimap.renderCharacters===o.minimap.renderCharacters&&t.minimap.maxColumn===o.minimap.maxColumn&&t.minimap.scale===o.minimap.scale&&t.verticalScrollbarWidth===o.verticalScrollbarWidth&&t.isViewportWrapping===o.isViewportWrapping,c=t.lineHeight,l=t.typicalHalfwidthCharacterWidth,u=t.scrollBeyondLastLine,h=t.minimap.renderCharacters;let d=n>=2?Math.round(t.minimap.scale*2):t.minimap.scale;const f=t.minimap.maxColumn,g=t.minimap.size,v=t.minimap.side,y=t.verticalScrollbarWidth,S=t.viewLineCount,x=t.remainingWidth,P=t.isViewportWrapping,D=h?2:3;let N=Math.floor(n*s);const H=N/n;let Y=!1,B=!1,M=D*d,re=d/n,ae=1;if(g==="fill"||g==="fit"){const{typicalViewportLineCount:ne,extraLinesBeforeFirstLine:ye,extraLinesBeyondLastLine:he,desiredRatio:tt,minimapLineCount:Ze}=mm.computeContainedMinimapLineCount({viewLineCount:S,scrollBeyondLastLine:u,paddingTop:t.paddingTop,paddingBottom:t.paddingBottom,height:s,lineHeight:c,pixelRatio:n});if(S/Ze>1)Y=!0,B=!0,d=1,M=1,re=d/n;else{let Nt=!1,ii=d+1;if(g==="fit"){const dt=Math.ceil((ye+S+he)*M);P&&a&&x<=i.stableFitRemainingWidth?(Nt=!0,ii=i.stableFitMaxMinimapScale):Nt=dt>N}if(g==="fill"||Nt){Y=!0;const dt=d;M=Math.min(c*n,Math.max(1,Math.floor(1/tt))),P&&a&&x<=i.stableFitRemainingWidth&&(ii=i.stableFitMaxMinimapScale),d=Math.min(ii,Math.max(1,Math.floor(M/D))),d>dt&&(ae=Math.min(2,d/dt)),re=d/n/ae,N=Math.ceil(Math.max(ne,ye+S+he)*M),P?(i.stableMinimapLayoutInput=t,i.stableFitRemainingWidth=x,i.stableFitMaxMinimapScale=d):(i.stableMinimapLayoutInput=null,i.stableFitRemainingWidth=0)}}}const fe=Math.floor(f*re),Je=Math.min(fe,Math.max(0,Math.floor((x-y-2)*re/(l+re)))+I2);let G=Math.floor(n*Je);const _=G/n;G=Math.floor(G*ae);const K=h?1:2,W=v==="left"?0:r-Je-y;return{renderMinimap:K,minimapLeft:W,minimapWidth:Je,minimapHeightIsEditorHeight:Y,minimapIsSampling:B,minimapScale:d,minimapLineHeight:M,minimapCanvasInnerWidth:G,minimapCanvasInnerHeight:N,minimapCanvasOuterWidth:_,minimapCanvasOuterHeight:H}}static computeLayout(t,i){const r=i.outerWidth|0,s=i.outerHeight|0,n=i.lineHeight|0,o=i.lineNumbersDigitCount|0,a=i.typicalHalfwidthCharacterWidth,c=i.maxDigitWidth,l=i.pixelRatio,u=i.viewLineCount,h=t.get(140),d=h==="inherit"?t.get(139):h,f=d==="inherit"?t.get(135):d,g=t.get(138),v=i.isDominatedByLongLines,y=t.get(59),S=t.get(69).renderType!==0,x=t.get(70),P=t.get(108),D=t.get(86),N=t.get(74),H=t.get(106),Y=H.verticalScrollbarSize,B=H.verticalHasArrows,M=H.arrowSize,re=H.horizontalScrollbarSize,ae=t.get(45),fe=t.get(113)!=="never";let Je=t.get(67);ae&&fe&&(Je+=16);let G=0;if(S){const rn=Math.max(o,x);G=Math.round(rn*c)}let _=0;y&&(_=n*i.glyphMarginDecorationLaneCount);let K=0,W=K+_,ne=W+G,ye=ne+Je;const he=r-_-G-Je;let tt=!1,Ze=!1,Mt=-1;d==="inherit"&&v?(tt=!0,Ze=!0):f==="on"||f==="bounded"?Ze=!0:f==="wordWrapColumn"&&(Mt=g);const Nt=mm.c({outerWidth:r,outerHeight:s,lineHeight:n,typicalHalfwidthCharacterWidth:a,pixelRatio:l,scrollBeyondLastLine:P,paddingTop:D.top,paddingBottom:D.bottom,minimap:N,verticalScrollbarWidth:Y,viewLineCount:u,remainingWidth:he,isViewportWrapping:Ze},i.memory||new P2);Nt.renderMinimap!==0&&Nt.minimapLeft===0&&(K+=Nt.minimapWidth,W+=Nt.minimapWidth,ne+=Nt.minimapWidth,ye+=Nt.minimapWidth);const ii=he-Nt.minimapWidth,dt=Math.max(1,Math.floor((ii-Y-2)/a)),gi=B?M:0;return Ze&&(Mt=Math.max(1,dt),f==="bounded"&&(Mt=Math.min(Mt,g))),{width:r,height:s,glyphMarginLeft:K,glyphMarginWidth:_,glyphMarginDecorationLaneCount:i.glyphMarginDecorationLaneCount,lineNumbersLeft:W,lineNumbersWidth:G,decorationsLeft:ne,decorationsWidth:Je,contentLeft:ye,contentWidth:ii,minimap:Nt,viewportColumn:dt,isWordWrapMinified:tt,isViewportWrapping:Ze,wrappingColumn:Mt,verticalScrollbarWidth:Y,horizontalScrollbarHeight:re,overviewRuler:{top:gi,width:Y,height:s-2*gi,right:0}}}},q2=class extends Ye{constructor(){super(142,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[p(358,null),p(359,null)],type:"string",enum:["simple","advanced"],default:"simple",description:p(360,null)}})}validate(e){return wt(e,"simple",["simple","advanced"])}compute(e,t,i){return t.get(2)===2?"advanced":i}},ks;(function(e){e.Off="off",e.OnCode="onCode",e.On="on"})(ks||(ks={}));var G2=class extends Ye{constructor(){const e={enabled:ks.OnCode};super(66,"lightbulb",e,{"editor.lightbulb.enabled":{type:"string",enum:[ks.Off,ks.OnCode,ks.On],default:e.enabled,enumDescriptions:[p(361,null),p(362,null),p(363,null)],description:p(364,null)}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:wt(e.enabled,this.defaultValue.enabled,[ks.Off,ks.OnCode,ks.On])}}},J2=class extends Ye{constructor(){const e={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(118,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:p(365,null)},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:20,description:p(366,null)},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:p(367,null)},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:p(368,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Q(t.enabled,this.defaultValue.enabled),maxLineCount:We.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:wt(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:Q(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}},Q2=class extends Ye{constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1,maximumLength:43};super(144,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:p(369,null),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[p(370,null),p(371,null,Dt?"Ctrl+Option":"Ctrl+Alt"),p(372,null,Dt?"Ctrl+Option":"Ctrl+Alt"),p(373,null)]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:p(374,null,"`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:p(375,null,"`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:p(376,null)},"editor.inlayHints.maximumLength":{type:"number",default:e.maximumLength,markdownDescription:p(377,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:wt(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:We.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:$i.string(t.fontFamily,this.defaultValue.fontFamily),padding:Q(t.padding,this.defaultValue.padding),maximumLength:We.clampedInt(t.maximumLength,this.defaultValue.maximumLength,0,Number.MAX_SAFE_INTEGER)}}},Y2=class extends Ye{constructor(){super(67,"lineDecorationsWidth",10)}validate(e){return typeof e=="string"&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):We.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,i){return i<0?We.clampedInt(-i*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):i}},X2=class extends Xr{constructor(){super(68,"lineHeight",$s.lineHeight,e=>Xr.clamp(e,0,150),{markdownDescription:p(378,null)})}compute(e,t,i){return e.fontInfo.lineHeight}},Z2=class extends Ye{constructor(){const e={enabled:!1,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,sectionHeaderFontSize:9,sectionHeaderLetterSpacing:1};super(74,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:p(379,null)},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:p(380,null)},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[p(381,null),p(382,null),p(383,null)],default:e.size,description:p(384,null)},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:p(385,null)},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:p(386,null)},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:p(387,null)},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:p(388,null)},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:p(389,null)},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:e.showRegionSectionHeaders,description:p(390,null)},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:e.showMarkSectionHeaders,description:p(391,null)},"editor.minimap.sectionHeaderFontSize":{type:"number",default:e.sectionHeaderFontSize,description:p(392,null)},"editor.minimap.sectionHeaderLetterSpacing":{type:"number",default:e.sectionHeaderLetterSpacing,description:p(393,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Q(t.enabled,this.defaultValue.enabled),autohide:Q(t.autohide,this.defaultValue.autohide),size:wt(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:wt(t.side,this.defaultValue.side,["right","left"]),showSlider:wt(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:Q(t.renderCharacters,this.defaultValue.renderCharacters),scale:We.clampedInt(t.scale,1,1,3),maxColumn:We.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:Q(t.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:Q(t.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),sectionHeaderFontSize:Xr.clamp(t.sectionHeaderFontSize??this.defaultValue.sectionHeaderFontSize,4,32),sectionHeaderLetterSpacing:Xr.clamp(t.sectionHeaderLetterSpacing??this.defaultValue.sectionHeaderLetterSpacing,0,5)}}};function K2(e){return e==="ctrlCmd"?Dt?"metaKey":"ctrlKey":"altKey"}var eT=class extends Ye{constructor(){super(86,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:p(394,null)},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:p(395,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:We.clampedInt(t.top,0,0,1e3),bottom:We.clampedInt(t.bottom,0,0,1e3)}}},tT=class extends Ye{constructor(){const e={enabled:!0,cycle:!0};super(88,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:p(396,null)},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:p(397,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Q(t.enabled,this.defaultValue.enabled),cycle:Q(t.cycle,this.defaultValue.cycle)}}},iT=class extends dl{constructor(){super(146)}compute(e,t,i){return e.pixelRatio}},rT=class extends Ye{constructor(){super(90,"placeholder",void 0)}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e:this.defaultValue}},sT=class extends Ye{constructor(){const e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[p(398,null),p(399,null),p(400,null)]}];super(92,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:p(401,null)},comments:{anyOf:t,default:e.comments,description:p(402,null)},other:{anyOf:t,default:e.other,description:p(403,null)}},default:e,markdownDescription:p(404,null,"`#editor.suggestOnTriggerCharacters#`")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){const c=e?"on":"off";return{comments:c,strings:c,other:c}}if(!e||typeof e!="object")return this.defaultValue;const{other:t,comments:i,strings:r}=e,s=["on","inline","off"];let n,o,a;return typeof t=="boolean"?n=t?"on":"off":n=wt(t,this.defaultValue.other,s),typeof i=="boolean"?o=i?"on":"off":o=wt(i,this.defaultValue.comments,s),typeof r=="boolean"?a=r?"on":"off":a=wt(r,this.defaultValue.strings,s),{other:n,comments:o,strings:a}}},sS;(function(e){e[e.Off=0]="Off",e[e.On=1]="On",e[e.Relative=2]="Relative",e[e.Interval=3]="Interval",e[e.Custom=4]="Custom"})(sS||(sS={}));var nT=class extends Ye{constructor(){super(69,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[p(405,null),p(406,null),p(407,null),p(408,null)],default:"on",description:p(409,null)})}validate(e){let t=this.defaultValue.renderType,i=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,i=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:i}}},oT=class extends Ye{constructor(){const e=[],t={type:"number",description:p(410,null)};super(105,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:p(411,null),format:"color-hex"}}}]},default:e,description:p(412,null)})}validate(e){if(Array.isArray(e)){const t=[];for(const i of e)if(typeof i=="number")t.push({column:We.clampedInt(i,0,0,1e4),color:null});else if(i&&typeof i=="object"){const r=i;t.push({column:We.clampedInt(r.column,0,0,1e4),color:r.color})}return t.sort((i,r)=>i.column-r.column),t}return this.defaultValue}},aT=class extends Ye{constructor(){super(95,"readOnlyMessage",void 0)}validate(e){return!e||typeof e!="object"?this.defaultValue:e}};function nS(e,t){if(typeof e!="string")return t;switch(e){case"hidden":return 2;case"visible":return 3;default:return 1}}var cT=class extends Ye{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:12,verticalSliderSize:12,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(106,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[p(413,null),p(414,null),p(415,null)],default:"auto",description:p(416,null)},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[p(417,null),p(418,null),p(419,null)],default:"auto",description:p(420,null)},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:p(421,null)},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:p(422,null)},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:p(423,null)},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:e.ignoreHorizontalScrollbarInContentHeight,description:p(424,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,i=We.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),r=We.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:We.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:nS(t.vertical,this.defaultValue.vertical),horizontal:nS(t.horizontal,this.defaultValue.horizontal),useShadows:Q(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:Q(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:Q(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:Q(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:Q(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:i,horizontalSliderSize:We.clampedInt(t.horizontalSliderSize,i,0,1e3),verticalScrollbarSize:r,verticalSliderSize:We.clampedInt(t.verticalSliderSize,r,0,1e3),scrollByPage:Q(t.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:Q(t.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}},Pr="inUntrustedWorkspace",ho={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"},lT=class extends Ye{constructor(){const e={nonBasicASCII:Pr,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:Pr,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(128,"unicodeHighlight",e,{[ho.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Pr],default:e.nonBasicASCII,description:p(425,null)},[ho.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:p(426,null)},[ho.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:p(427,null)},[ho.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Pr],default:e.includeComments,description:p(428,null)},[ho.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Pr],default:e.includeStrings,description:p(429,null)},[ho.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:p(430,null),additionalProperties:{type:"boolean"}},[ho.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:p(431,null)}})}applyUpdate(e,t){let i=!1;t.allowedCharacters&&e&&(Ir(e.allowedCharacters,t.allowedCharacters)||(e={...e,allowedCharacters:t.allowedCharacters},i=!0)),t.allowedLocales&&e&&(Ir(e.allowedLocales,t.allowedLocales)||(e={...e,allowedLocales:t.allowedLocales},i=!0));const r=super.applyUpdate(e,t);return i?new wd(r.newValue,!0):r}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:Sa(t.nonBasicASCII,Pr,[!0,!1,Pr]),invisibleCharacters:Q(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:Q(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:Sa(t.includeComments,Pr,[!0,!1,Pr]),includeStrings:Sa(t.includeStrings,Pr,[!0,!1,Pr]),allowedCharacters:this.c(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.c(e.allowedLocales,this.defaultValue.allowedLocales)}}c(e,t){if(typeof e!="object"||!e)return t;const i={};for(const[r,s]of Object.entries(e))s===!0&&(i[r]=!0);return i}},uT=class extends Ye{constructor(){const e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default",syntaxHighlightingEnabled:!1,edits:{experimental:{enabled:!0}}};super(64,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:p(432,null)},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[p(433,null),p(434,null),p(435,null)],description:p(436,null)},"editor.inlineSuggest.syntaxHighlightingEnabled":{type:"boolean",default:e.syntaxHighlightingEnabled,description:p(437,null)},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:p(438,null)},"editor.inlineSuggest.fontFamily":{type:"string",default:e.fontFamily,description:p(439,null)},"editor.inlineSuggest.edits.experimental.enabled":{type:"boolean",default:e.edits.experimental.enabled,description:p(440,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Q(t.enabled,this.defaultValue.enabled),mode:wt(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:wt(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:Q(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:Q(t.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:$i.string(t.fontFamily,this.defaultValue.fontFamily),syntaxHighlightingEnabled:Q(t.syntaxHighlightingEnabled,this.defaultValue.syntaxHighlightingEnabled),edits:{experimental:{enabled:Q(t.edits?.experimental?.enabled,this.defaultValue.edits.experimental.enabled)}}}}},hT=class extends Ye{constructor(){const e={enabled:YE.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:YE.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(15,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:p(441,null,"`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:p(442,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Q(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:Q(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}},dT=class extends Ye{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(16,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[p(443,null),p(444,null),p(445,null)],default:e.bracketPairs,description:p(446,null)},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[p(447,null),p(448,null),p(449,null)],default:e.bracketPairsHorizontal,description:p(450,null)},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:p(451,null)},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:p(452,null)},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[p(453,null),p(454,null),p(455,null)],default:e.highlightActiveIndentation,description:p(456,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:Sa(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:Sa(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:Q(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:Q(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:Sa(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}};function Sa(e,t,i){const r=i.indexOf(e);return r===-1?t:i[r]}var fT=class extends Ye{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(121,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[p(457,null),p(458,null)],default:e.insertMode,description:p(459,null)},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:p(460,null)},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:p(461,null)},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:p(462,null)},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[p(463,null),p(464,null),p(465,null),p(466,null)],default:e.selectionMode,markdownDescription:p(467,null,"`#editor.quickSuggestions#`","`#editor.suggestOnTriggerCharacters#`")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:p(468,null)},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:p(469,null)},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:p(470,null)},"editor.suggest.preview":{type:"boolean",default:e.preview,description:p(471,null)},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:p(472,null)},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:p(473,null)},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:p(474,null)},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:p(475,null)},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:p(476,null)},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:p(477,null)},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:p(478,null)},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:p(479,null)},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:p(480,null)},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:p(481,null)},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:p(482,null)},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:p(483,null)},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:p(484,null)},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:p(485,null)},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:p(486,null)},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:p(487,null)},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:p(488,null)},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:p(489,null)},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:p(490,null)},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:p(491,null)},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:p(492,null)},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:p(493,null)},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:p(494,null)},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:p(495,null)},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:p(496,null)},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:p(497,null)},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:p(498,null)},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:p(499,null)},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:p(500,null)},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:p(501,null)},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:p(502,null)},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:p(503,null)},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:p(504,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:wt(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:Q(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:Q(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:Q(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:Q(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:wt(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:Q(t.showIcons,this.defaultValue.showIcons),showStatusBar:Q(t.showStatusBar,this.defaultValue.showStatusBar),preview:Q(t.preview,this.defaultValue.preview),previewMode:wt(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:Q(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:Q(t.showMethods,this.defaultValue.showMethods),showFunctions:Q(t.showFunctions,this.defaultValue.showFunctions),showConstructors:Q(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:Q(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:Q(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:Q(t.showFields,this.defaultValue.showFields),showVariables:Q(t.showVariables,this.defaultValue.showVariables),showClasses:Q(t.showClasses,this.defaultValue.showClasses),showStructs:Q(t.showStructs,this.defaultValue.showStructs),showInterfaces:Q(t.showInterfaces,this.defaultValue.showInterfaces),showModules:Q(t.showModules,this.defaultValue.showModules),showProperties:Q(t.showProperties,this.defaultValue.showProperties),showEvents:Q(t.showEvents,this.defaultValue.showEvents),showOperators:Q(t.showOperators,this.defaultValue.showOperators),showUnits:Q(t.showUnits,this.defaultValue.showUnits),showValues:Q(t.showValues,this.defaultValue.showValues),showConstants:Q(t.showConstants,this.defaultValue.showConstants),showEnums:Q(t.showEnums,this.defaultValue.showEnums),showEnumMembers:Q(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:Q(t.showKeywords,this.defaultValue.showKeywords),showWords:Q(t.showWords,this.defaultValue.showWords),showColors:Q(t.showColors,this.defaultValue.showColors),showFiles:Q(t.showFiles,this.defaultValue.showFiles),showReferences:Q(t.showReferences,this.defaultValue.showReferences),showFolders:Q(t.showFolders,this.defaultValue.showFolders),showTypeParameters:Q(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:Q(t.showSnippets,this.defaultValue.showSnippets),showUsers:Q(t.showUsers,this.defaultValue.showUsers),showIssues:Q(t.showIssues,this.defaultValue.showIssues)}}},pT=class extends Ye{constructor(){super(116,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:p(505,null),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:p(506,null),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:Q(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:Q(e.selectSubwords,this.defaultValue.selectSubwords)}}},gT=class extends Ye{constructor(){const e=[];super(133,"wordSegmenterLocales",e,{anyOf:[{description:p(507,null),type:"string"},{description:p(508,null),type:"array",items:{type:"string"}}]})}validate(e){if(typeof e=="string"&&(e=[e]),Array.isArray(e)){const t=[];for(const i of e)if(typeof i=="string")try{Intl.Segmenter.supportedLocalesOf(i).length>0&&t.push(i)}catch{}return t}return this.defaultValue}},oS;(function(e){e[e.None=0]="None",e[e.Same=1]="Same",e[e.Indent=2]="Indent",e[e.DeepIndent=3]="DeepIndent"})(oS||(oS={}));var mT=class extends Ye{constructor(){super(141,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[p(509,null),p(510,null),p(511,null),p(512,null)],description:p(513,null),default:"same"}})}validate(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,i){return t.get(2)===2?0:i}},vT=class extends dl{constructor(){super(149)}compute(e,t,i){const r=t.get(148);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:r.isWordWrapMinified,isViewportWrapping:r.isViewportWrapping,wrappingColumn:r.wrappingColumn}}},wT=class extends Ye{constructor(){const e={enabled:!0,showDropSelector:"afterDrop"};super(36,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:p(514,null)},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:p(515,null),enum:["afterDrop","never"],enumDescriptions:[p(516,null),p(517,null)],default:"afterDrop"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Q(t.enabled,this.defaultValue.enabled),showDropSelector:wt(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}},bT=class extends Ye{constructor(){const e={enabled:!0,showPasteSelector:"afterPaste"};super(87,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:p(518,null)},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:p(519,null),enum:["afterPaste","never"],enumDescriptions:[p(520,null),p(521,null)],default:"afterPaste"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Q(t.enabled,this.defaultValue.enabled),showPasteSelector:wt(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}},yT="'JetBrains Mono', Consolas, 'Courier New', monospace",ET="'JetBrains Mono', Menlo, Monaco, 'Courier New', monospace",ST="'JetBrains Mono', 'Droid Sans Mono', 'monospace', monospace",$s={fontFamily:Dt?ET:At?ST:yT,fontWeight:"normal",fontSize:Dt?12:14,lineHeight:0,letterSpacing:0},xT=[];function R(e){return xT[e.id]=e,e}var aS;(function(e){e[e.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",e[e.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",e[e.accessibilitySupport=2]="accessibilitySupport",e[e.accessibilityPageSize=3]="accessibilityPageSize",e[e.ariaLabel=4]="ariaLabel",e[e.ariaRequired=5]="ariaRequired",e[e.autoClosingBrackets=6]="autoClosingBrackets",e[e.autoClosingComments=7]="autoClosingComments",e[e.screenReaderAnnounceInlineSuggestion=8]="screenReaderAnnounceInlineSuggestion",e[e.autoClosingDelete=9]="autoClosingDelete",e[e.autoClosingOvertype=10]="autoClosingOvertype",e[e.autoClosingQuotes=11]="autoClosingQuotes",e[e.autoIndent=12]="autoIndent",e[e.automaticLayout=13]="automaticLayout",e[e.autoSurround=14]="autoSurround",e[e.bracketPairColorization=15]="bracketPairColorization",e[e.guides=16]="guides",e[e.codeLens=17]="codeLens",e[e.codeLensFontFamily=18]="codeLensFontFamily",e[e.codeLensFontSize=19]="codeLensFontSize",e[e.colorDecorators=20]="colorDecorators",e[e.colorDecoratorsLimit=21]="colorDecoratorsLimit",e[e.columnSelection=22]="columnSelection",e[e.comments=23]="comments",e[e.contextmenu=24]="contextmenu",e[e.copyWithSyntaxHighlighting=25]="copyWithSyntaxHighlighting",e[e.cursorBlinking=26]="cursorBlinking",e[e.cursorSmoothCaretAnimation=27]="cursorSmoothCaretAnimation",e[e.cursorStyle=28]="cursorStyle",e[e.cursorSurroundingLines=29]="cursorSurroundingLines",e[e.cursorSurroundingLinesStyle=30]="cursorSurroundingLinesStyle",e[e.cursorWidth=31]="cursorWidth",e[e.disableLayerHinting=32]="disableLayerHinting",e[e.disableMonospaceOptimizations=33]="disableMonospaceOptimizations",e[e.domReadOnly=34]="domReadOnly",e[e.dragAndDrop=35]="dragAndDrop",e[e.dropIntoEditor=36]="dropIntoEditor",e[e.experimentalEditContextEnabled=37]="experimentalEditContextEnabled",e[e.emptySelectionClipboard=38]="emptySelectionClipboard",e[e.experimentalGpuAcceleration=39]="experimentalGpuAcceleration",e[e.experimentalWhitespaceRendering=40]="experimentalWhitespaceRendering",e[e.extraEditorClassName=41]="extraEditorClassName",e[e.fastScrollSensitivity=42]="fastScrollSensitivity",e[e.find=43]="find",e[e.fixedOverflowWidgets=44]="fixedOverflowWidgets",e[e.folding=45]="folding",e[e.foldingStrategy=46]="foldingStrategy",e[e.foldingHighlight=47]="foldingHighlight",e[e.foldingImportsByDefault=48]="foldingImportsByDefault",e[e.foldingMaximumRegions=49]="foldingMaximumRegions",e[e.unfoldOnClickAfterEndOfLine=50]="unfoldOnClickAfterEndOfLine",e[e.fontFamily=51]="fontFamily",e[e.fontInfo=52]="fontInfo",e[e.fontLigatures=53]="fontLigatures",e[e.fontSize=54]="fontSize",e[e.fontWeight=55]="fontWeight",e[e.fontVariations=56]="fontVariations",e[e.formatOnPaste=57]="formatOnPaste",e[e.formatOnType=58]="formatOnType",e[e.glyphMargin=59]="glyphMargin",e[e.gotoLocation=60]="gotoLocation",e[e.hideCursorInOverviewRuler=61]="hideCursorInOverviewRuler",e[e.hover=62]="hover",e[e.inDiffEditor=63]="inDiffEditor",e[e.inlineSuggest=64]="inlineSuggest",e[e.letterSpacing=65]="letterSpacing",e[e.lightbulb=66]="lightbulb",e[e.lineDecorationsWidth=67]="lineDecorationsWidth",e[e.lineHeight=68]="lineHeight",e[e.lineNumbers=69]="lineNumbers",e[e.lineNumbersMinChars=70]="lineNumbersMinChars",e[e.linkedEditing=71]="linkedEditing",e[e.links=72]="links",e[e.matchBrackets=73]="matchBrackets",e[e.minimap=74]="minimap",e[e.mouseStyle=75]="mouseStyle",e[e.mouseWheelScrollSensitivity=76]="mouseWheelScrollSensitivity",e[e.mouseWheelZoom=77]="mouseWheelZoom",e[e.multiCursorMergeOverlapping=78]="multiCursorMergeOverlapping",e[e.multiCursorModifier=79]="multiCursorModifier",e[e.multiCursorPaste=80]="multiCursorPaste",e[e.multiCursorLimit=81]="multiCursorLimit",e[e.occurrencesHighlight=82]="occurrencesHighlight",e[e.occurrencesHighlightDelay=83]="occurrencesHighlightDelay",e[e.overviewRulerBorder=84]="overviewRulerBorder",e[e.overviewRulerLanes=85]="overviewRulerLanes",e[e.padding=86]="padding",e[e.pasteAs=87]="pasteAs",e[e.parameterHints=88]="parameterHints",e[e.peekWidgetDefaultFocus=89]="peekWidgetDefaultFocus",e[e.placeholder=90]="placeholder",e[e.definitionLinkOpensInPeek=91]="definitionLinkOpensInPeek",e[e.quickSuggestions=92]="quickSuggestions",e[e.quickSuggestionsDelay=93]="quickSuggestionsDelay",e[e.readOnly=94]="readOnly",e[e.readOnlyMessage=95]="readOnlyMessage",e[e.renameOnType=96]="renameOnType",e[e.renderControlCharacters=97]="renderControlCharacters",e[e.renderFinalNewline=98]="renderFinalNewline",e[e.renderLineHighlight=99]="renderLineHighlight",e[e.renderLineHighlightOnlyWhenFocus=100]="renderLineHighlightOnlyWhenFocus",e[e.renderValidationDecorations=101]="renderValidationDecorations",e[e.renderWhitespace=102]="renderWhitespace",e[e.revealHorizontalRightPadding=103]="revealHorizontalRightPadding",e[e.roundedSelection=104]="roundedSelection",e[e.rulers=105]="rulers",e[e.scrollbar=106]="scrollbar",e[e.scrollBeyondLastColumn=107]="scrollBeyondLastColumn",e[e.scrollBeyondLastLine=108]="scrollBeyondLastLine",e[e.scrollPredominantAxis=109]="scrollPredominantAxis",e[e.selectionClipboard=110]="selectionClipboard",e[e.selectionHighlight=111]="selectionHighlight",e[e.selectOnLineNumbers=112]="selectOnLineNumbers",e[e.showFoldingControls=113]="showFoldingControls",e[e.showUnused=114]="showUnused",e[e.snippetSuggestions=115]="snippetSuggestions",e[e.smartSelect=116]="smartSelect",e[e.smoothScrolling=117]="smoothScrolling",e[e.stickyScroll=118]="stickyScroll",e[e.stickyTabStops=119]="stickyTabStops",e[e.stopRenderingLineAfter=120]="stopRenderingLineAfter",e[e.suggest=121]="suggest",e[e.suggestFontSize=122]="suggestFontSize",e[e.suggestLineHeight=123]="suggestLineHeight",e[e.suggestOnTriggerCharacters=124]="suggestOnTriggerCharacters",e[e.suggestSelection=125]="suggestSelection",e[e.tabCompletion=126]="tabCompletion",e[e.tabIndex=127]="tabIndex",e[e.unicodeHighlighting=128]="unicodeHighlighting",e[e.unusualLineTerminators=129]="unusualLineTerminators",e[e.useShadowDOM=130]="useShadowDOM",e[e.useTabStops=131]="useTabStops",e[e.wordBreak=132]="wordBreak",e[e.wordSegmenterLocales=133]="wordSegmenterLocales",e[e.wordSeparators=134]="wordSeparators",e[e.wordWrap=135]="wordWrap",e[e.wordWrapBreakAfterCharacters=136]="wordWrapBreakAfterCharacters",e[e.wordWrapBreakBeforeCharacters=137]="wordWrapBreakBeforeCharacters",e[e.wordWrapColumn=138]="wordWrapColumn",e[e.wordWrapOverride1=139]="wordWrapOverride1",e[e.wordWrapOverride2=140]="wordWrapOverride2",e[e.wrappingIndent=141]="wrappingIndent",e[e.wrappingStrategy=142]="wrappingStrategy",e[e.showDeprecated=143]="showDeprecated",e[e.inlayHints=144]="inlayHints",e[e.editorClassName=145]="editorClassName",e[e.pixelRatio=146]="pixelRatio",e[e.tabFocusMode=147]="tabFocusMode",e[e.layoutInfo=148]="layoutInfo",e[e.wrappingInfo=149]="wrappingInfo",e[e.defaultColorDecorators=150]="defaultColorDecorators",e[e.colorDecoratorsActivatedOn=151]="colorDecoratorsActivatedOn",e[e.inlineCompletionsAccessibilityVerbose=152]="inlineCompletionsAccessibilityVerbose",e[e.directLink=153]="directLink"})(aS||(aS={}));var jq={acceptSuggestionOnCommitCharacter:R(new be(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:p(522,null)})),acceptSuggestionOnEnter:R(new st(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",p(523,null),""],markdownDescription:p(524,null)})),accessibilitySupport:R(new R2),accessibilityPageSize:R(new We(3,"accessibilityPageSize",10,1,1073741824,{description:p(525,null),tags:["accessibility"]})),ariaLabel:R(new $i(4,"ariaLabel",p(526,null))),ariaRequired:R(new be(5,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:R(new be(8,"screenReaderAnnounceInlineSuggestion",!0,{description:p(527,null),tags:["accessibility"]})),autoClosingBrackets:R(new st(6,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",p(528,null),p(529,null),""],description:p(530,null)})),autoClosingComments:R(new st(7,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",p(531,null),p(532,null),""],description:p(533,null)})),autoClosingDelete:R(new st(9,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",p(534,null),""],description:p(535,null)})),autoClosingOvertype:R(new st(10,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",p(536,null),""],description:p(537,null)})),autoClosingQuotes:R(new st(11,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",p(538,null),p(539,null),""],description:p(540,null)})),autoIndent:R(new yd(12,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],A2,{enumDescriptions:[p(541,null),p(542,null),p(543,null),p(544,null),p(545,null)],description:p(546,null)})),automaticLayout:R(new be(13,"automaticLayout",!1)),autoSurround:R(new st(14,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[p(547,null),p(548,null),p(549,null),""],description:p(550,null)})),bracketPairColorization:R(new hT),bracketPairGuides:R(new dT),stickyTabStops:R(new be(119,"stickyTabStops",!1,{description:p(551,null)})),codeLens:R(new be(17,"codeLens",!0,{description:p(552,null)})),codeLensFontFamily:R(new $i(18,"codeLensFontFamily","",{description:p(553,null)})),codeLensFontSize:R(new We(19,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:p(554,null)})),colorDecorators:R(new be(20,"colorDecorators",!0,{description:p(555,null)})),colorDecoratorActivatedOn:R(new st(151,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[p(556,null),p(557,null),p(558,null)],description:p(559,null)})),colorDecoratorsLimit:R(new We(21,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:p(560,null)})),columnSelection:R(new be(22,"columnSelection",!1,{description:p(561,null)})),comments:R(new T2),contextmenu:R(new be(24,"contextmenu",!0)),copyWithSyntaxHighlighting:R(new be(25,"copyWithSyntaxHighlighting",!0,{description:p(562,null)})),cursorBlinking:R(new yd(26,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],L2,{description:p(563,null)})),cursorSmoothCaretAnimation:R(new st(27,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[p(564,null),p(565,null),p(566,null)],description:p(567,null)})),cursorStyle:R(new yd(28,"cursorStyle",Zr.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],N2,{description:p(568,null)})),cursorSurroundingLines:R(new We(29,"cursorSurroundingLines",0,0,1073741824,{description:p(569,null)})),cursorSurroundingLinesStyle:R(new st(30,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[p(570,null),p(571,null)],markdownDescription:p(572,null)})),cursorWidth:R(new We(31,"cursorWidth",0,0,1073741824,{markdownDescription:p(573,null)})),disableLayerHinting:R(new be(32,"disableLayerHinting",!1)),disableMonospaceOptimizations:R(new be(33,"disableMonospaceOptimizations",!1)),domReadOnly:R(new be(34,"domReadOnly",!1)),dragAndDrop:R(new be(35,"dragAndDrop",!0,{description:p(574,null)})),emptySelectionClipboard:R(new F2),dropIntoEditor:R(new wT),experimentalEditContextEnabled:R(new be(37,"experimentalEditContextEnabled",!1,{description:p(575,null),included:zm||b5||u5})),stickyScroll:R(new J2),experimentalGpuAcceleration:R(new st(39,"experimentalGpuAcceleration","off",["off","on"],void 0)),experimentalWhitespaceRendering:R(new st(40,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[p(576,null),p(577,null),p(578,null)],description:p(579,null)})),extraEditorClassName:R(new $i(41,"extraEditorClassName","")),fastScrollSensitivity:R(new Xr(42,"fastScrollSensitivity",5,e=>e<=0?5:e,{markdownDescription:p(580,null)})),find:R(new M2),fixedOverflowWidgets:R(new be(44,"fixedOverflowWidgets",!1)),folding:R(new be(45,"folding",!0,{description:p(581,null)})),foldingStrategy:R(new st(46,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[p(582,null),p(583,null)],description:p(584,null)})),foldingHighlight:R(new be(47,"foldingHighlight",!0,{description:p(585,null)})),foldingImportsByDefault:R(new be(48,"foldingImportsByDefault",!1,{description:p(586,null)})),foldingMaximumRegions:R(new We(49,"foldingMaximumRegions",5e3,10,65e3,{description:p(587,null)})),unfoldOnClickAfterEndOfLine:R(new be(50,"unfoldOnClickAfterEndOfLine",!1,{description:p(588,null)})),fontFamily:R(new $i(51,"fontFamily",$s.fontFamily,{description:p(589,null)})),fontInfo:R(new j2),fontLigatures2:R(new U2),fontSize:R(new H2),fontWeight:R(new B2),fontVariations:R(new _2),formatOnPaste:R(new be(57,"formatOnPaste",!1,{description:p(590,null)})),formatOnType:R(new be(58,"formatOnType",!1,{description:p(591,null)})),glyphMargin:R(new be(59,"glyphMargin",!0,{description:p(592,null)})),gotoLocation:R(new W2),hideCursorInOverviewRuler:R(new be(61,"hideCursorInOverviewRuler",!1,{description:p(593,null)})),hover:R(new z2),inDiffEditor:R(new be(63,"inDiffEditor",!1)),letterSpacing:R(new Xr(65,"letterSpacing",$s.letterSpacing,e=>Xr.clamp(e,-5,20),{description:p(594,null)})),lightbulb:R(new G2),lineDecorationsWidth:R(new Y2),lineHeight:R(new X2),lineNumbers:R(new nT),lineNumbersMinChars:R(new We(70,"lineNumbersMinChars",2,1,300)),linkedEditing:R(new be(71,"linkedEditing",!1,{description:p(595,null)})),links:R(new be(72,"links",!0,{description:p(596,null)})),directLink:R(new be(153,"directLink",!1,{description:p(597,null)})),matchBrackets:R(new st(73,"matchBrackets","always",["always","near","never"],{description:p(598,null)})),minimap:R(new Z2),mouseStyle:R(new st(75,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:R(new Xr(76,"mouseWheelScrollSensitivity",1,e=>e===0?1:e,{markdownDescription:p(599,null)})),mouseWheelZoom:R(new be(77,"mouseWheelZoom",!1,{markdownDescription:p(Dt?600:601,null)})),multiCursorMergeOverlapping:R(new be(78,"multiCursorMergeOverlapping",!0,{description:p(602,null)})),multiCursorModifier:R(new yd(79,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],K2,{markdownEnumDescriptions:[p(603,null),p(604,null)],markdownDescription:p(605,null)})),multiCursorPaste:R(new st(80,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[p(606,null),p(607,null)],markdownDescription:p(608,null)})),multiCursorLimit:R(new We(81,"multiCursorLimit",1e4,1,1e5,{markdownDescription:p(609,null)})),occurrencesHighlight:R(new st(82,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[p(610,null),p(611,null),p(612,null)],markdownDescription:p(613,null)})),occurrencesHighlightDelay:R(new We(83,"occurrencesHighlightDelay",250,0,2e3,{description:p(614,null),tags:["preview"]})),overviewRulerBorder:R(new be(84,"overviewRulerBorder",!0,{description:p(615,null)})),overviewRulerLanes:R(new We(85,"overviewRulerLanes",3,0,3)),padding:R(new eT),pasteAs:R(new bT),parameterHints:R(new tT),peekWidgetDefaultFocus:R(new st(89,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[p(616,null),p(617,null)],description:p(618,null)})),placeholder:R(new rT),definitionLinkOpensInPeek:R(new be(91,"definitionLinkOpensInPeek",!1,{description:p(619,null)})),quickSuggestions:R(new sT),quickSuggestionsDelay:R(new We(93,"quickSuggestionsDelay",10,0,1073741824,{description:p(620,null)})),readOnly:R(new be(94,"readOnly",!1)),readOnlyMessage:R(new aT),renameOnType:R(new be(96,"renameOnType",!1,{description:p(621,null),markdownDeprecationMessage:p(622,null)})),renderControlCharacters:R(new be(97,"renderControlCharacters",!0,{description:p(623,null),restricted:!0})),renderFinalNewline:R(new st(98,"renderFinalNewline",At?"dimmed":"on",["off","on","dimmed"],{description:p(624,null)})),renderLineHighlight:R(new st(99,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",p(625,null)],description:p(626,null)})),renderLineHighlightOnlyWhenFocus:R(new be(100,"renderLineHighlightOnlyWhenFocus",!1,{description:p(627,null)})),renderValidationDecorations:R(new st(101,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:R(new st(102,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",p(628,null),p(629,null),p(630,null),""],description:p(631,null)})),revealHorizontalRightPadding:R(new We(103,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:R(new be(104,"roundedSelection",!0,{description:p(632,null)})),rulers:R(new oT),scrollbar:R(new cT),scrollBeyondLastColumn:R(new We(107,"scrollBeyondLastColumn",4,0,1073741824,{description:p(633,null)})),scrollBeyondLastLine:R(new be(108,"scrollBeyondLastLine",!0,{description:p(634,null)})),scrollPredominantAxis:R(new be(109,"scrollPredominantAxis",!0,{description:p(635,null)})),selectionClipboard:R(new be(110,"selectionClipboard",!0,{description:p(636,null),included:At})),selectionHighlight:R(new be(111,"selectionHighlight",!0,{description:p(637,null)})),selectOnLineNumbers:R(new be(112,"selectOnLineNumbers",!0)),showFoldingControls:R(new st(113,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[p(638,null),p(639,null),p(640,null)],description:p(641,null)})),showUnused:R(new be(114,"showUnused",!0,{description:p(642,null)})),showDeprecated:R(new be(143,"showDeprecated",!0,{description:p(643,null)})),inlayHints:R(new Q2),snippetSuggestions:R(new st(115,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[p(644,null),p(645,null),p(646,null),p(647,null)],description:p(648,null)})),smartSelect:R(new pT),smoothScrolling:R(new be(117,"smoothScrolling",!1,{description:p(649,null)})),stopRenderingLineAfter:R(new We(120,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:R(new fT),inlineSuggest:R(new uT),inlineCompletionsAccessibilityVerbose:R(new be(152,"inlineCompletionsAccessibilityVerbose",!1,{description:p(650,null)})),suggestFontSize:R(new We(122,"suggestFontSize",0,0,1e3,{markdownDescription:p(651,null,"`0`","`#editor.fontSize#`")})),suggestLineHeight:R(new We(123,"suggestLineHeight",0,0,1e3,{markdownDescription:p(652,null,"`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:R(new be(124,"suggestOnTriggerCharacters",!0,{description:p(653,null)})),suggestSelection:R(new st(125,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[p(654,null),p(655,null),p(656,null)],description:p(657,null)})),tabCompletion:R(new st(126,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[p(658,null),p(659,null),p(660,null)],description:p(661,null)})),tabIndex:R(new We(127,"tabIndex",0,-1,1073741824)),unicodeHighlight:R(new lT),unusualLineTerminators:R(new st(129,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[p(662,null),p(663,null),p(664,null)],description:p(665,null)})),useShadowDOM:R(new be(130,"useShadowDOM",!0)),useTabStops:R(new be(131,"useTabStops",!0,{description:p(666,null)})),wordBreak:R(new st(132,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[p(667,null),p(668,null)],description:p(669,null)})),wordSegmenterLocales:R(new gT),wordSeparators:R(new $i(134,"wordSeparators",XE,{description:p(670,null)})),wordWrap:R(new st(135,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[p(671,null),p(672,null),p(673,null),p(674,null)],description:p(675,null)})),wordWrapBreakAfterCharacters:R(new $i(136,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;\xA2\xB0\u2032\u2033\u2030\u2103\u3001\u3002\uFF61\uFF64\uFFE0\uFF0C\uFF0E\uFF1A\uFF1B\uFF1F\uFF01\uFF05\u30FB\uFF65\u309D\u309E\u30FD\u30FE\u30FC\u30A1\u30A3\u30A5\u30A7\u30A9\u30C3\u30E3\u30E5\u30E7\u30EE\u30F5\u30F6\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308E\u3095\u3096\u31F0\u31F1\u31F2\u31F3\u31F4\u31F5\u31F6\u31F7\u31F8\u31F9\u31FA\u31FB\u31FC\u31FD\u31FE\u31FF\u3005\u303B\uFF67\uFF68\uFF69\uFF6A\uFF6B\uFF6C\uFF6D\uFF6E\uFF6F\uFF70\u201D\u3009\u300B\u300D\u300F\u3011\u3015\uFF09\uFF3D\uFF5D\uFF63")),wordWrapBreakBeforeCharacters:R(new $i(137,"wordWrapBreakBeforeCharacters","([{\u2018\u201C\u3008\u300A\u300C\u300E\u3010\u3014\uFF08\uFF3B\uFF5B\uFF62\xA3\xA5\uFF04\uFFE1\uFFE5+\uFF0B")),wordWrapColumn:R(new We(138,"wordWrapColumn",80,1,1073741824,{markdownDescription:p(676,null)})),wordWrapOverride1:R(new st(139,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:R(new st(140,"wordWrapOverride2","inherit",["off","on","inherit"])),editorClassName:R(new O2),defaultColorDecorators:R(new be(150,"defaultColorDecorators",!1,{markdownDescription:p(677,null)})),pixelRatio:R(new iT),tabFocusMode:R(new be(147,"tabFocusMode",!1,{markdownDescription:p(678,null)})),layoutInfo:R(new V2),wrappingInfo:R(new vT),wrappingIndent:R(new mT),wrappingStrategy:R(new q2)},Bt,v1=globalThis.vscode;if(typeof v1<"u"&&typeof v1.context<"u"){const e=v1.context.configuration();if(e)Bt=e.product;else throw new Error("Sandbox: unable to resolve product configuration from preload script.")}else if(globalThis._VSCODE_PRODUCT_JSON&&globalThis._VSCODE_PACKAGE_JSON){if(Bt=globalThis._VSCODE_PRODUCT_JSON,si.VSCODE_DEV&&Object.assign(Bt,{nameShort:`${Bt.nameShort} - Local`,nameLong:`${Bt.nameLong} - Local`,dataFolderName:`${Bt.dataFolderName}-local`,serverDataFolderName:Bt.serverDataFolderName?`${Bt.serverDataFolderName}-local`:void 0}),!Bt.version){const e=globalThis._VSCODE_PACKAGE_JSON;Object.assign(Bt,{version:e.version})}si.ICUBE_EXTENSIONS_GALLERY&&Object.assign(Bt,{extensionsGallery:JSON.parse(si.ICUBE_EXTENSIONS_GALLERY)})}else Bt={},Object.keys(Bt).length===0&&Object.assign(Bt,{version:"1.95.0-dev",nameShort:"Code - OSS Dev",nameLong:"Code - OSS Dev",applicationName:"code-oss",dataFolderName:".vscode-oss",urlProtocol:"code-oss",reportIssueUrl:"https://github.com/microsoft/vscode/issues/new",licenseName:"MIT",licenseUrl:"https://github.com/microsoft/vscode/blob/main/LICENSE.txt",serverLicenseUrl:"https://github.com/microsoft/vscode/blob/main/LICENSE.txt"});if(si.IDE_ENVIRONMENT_ID){const t={id:si.IDE_ENVIRONMENT_ID||"",owner:si.IDE_OWNER||"",ideLang:si.IDE_LANG||"",ideTemplate:si.IDE_TEMPLATE||"",isBOE:(si.CLOUDIDE_APISERVER_BASE_URL||"").includes("-boe."),apiServerBaseUrl:si.IDE_APISERVER_BASE_URL||"",isBuilt:!si.VSCODE_DEV,workspacePath:si.CLOUDIDE_WORKSPACEPATH||""};Object.assign(Bt,{devSpaceInfo:t})}Bt.iCubeApp||Object.assign(Bt,{iCubeApp:{}}),Object.assign(Bt.iCubeApp,{envInfo:{...Bt.iCubeApp?.envInfo,sessionID:Ht()}}),Object.assign(Bt,{_onDidChangeConfig:new I});var Cs=Bt,cS=class hI{static{this.count=0}constructor(t){this._proxyIdentifierBrand=void 0,this.sid=t,this.nid=++hI.count}},lS=[];function T(e){const t=new cS(e);return lS[t.nid]=t,t}function Ed(e){return lS[e].sid}var Zi=class{constructor(e){this.value=e}},uS;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(uS||(uS={}));var hS;(function(e){e[e.UnknownInput=0]="UnknownInput",e[e.TextInput=1]="TextInput",e[e.TextDiffInput=2]="TextDiffInput",e[e.TextMergeInput=3]="TextMergeInput",e[e.NotebookInput=4]="NotebookInput",e[e.NotebookDiffInput=5]="NotebookDiffInput",e[e.CustomEditorInput=6]="CustomEditorInput",e[e.WebviewEditorInput=7]="WebviewEditorInput",e[e.TerminalEditorInput=8]="TerminalEditorInput",e[e.InteractiveEditorInput=9]="InteractiveEditorInput",e[e.ChatEditorInput=10]="ChatEditorInput",e[e.MultiDiffEditorInput=11]="MultiDiffEditorInput"})(hS||(hS={}));var dS;(function(e){e[e.TAB_OPEN=0]="TAB_OPEN",e[e.TAB_CLOSE=1]="TAB_CLOSE",e[e.TAB_UPDATE=2]="TAB_UPDATE",e[e.TAB_MOVE=3]="TAB_MOVE"})(dS||(dS={}));var fS;(function(e){e[e.Editable=0]="Editable",e[e.SupportsHotExit=1]="SupportsHotExit"})(fS||(fS={}));var pS;(function(e){e[e.Int8Array=1]="Int8Array",e[e.Uint8Array=2]="Uint8Array",e[e.Uint8ClampedArray=3]="Uint8ClampedArray",e[e.Int16Array=4]="Int16Array",e[e.Uint16Array=5]="Uint16Array",e[e.Int32Array=6]="Int32Array",e[e.Uint32Array=7]="Uint32Array",e[e.Float32Array=8]="Float32Array",e[e.Float64Array=9]="Float64Array",e[e.BigInt64Array=10]="BigInt64Array",e[e.BigUint64Array=11]="BigUint64Array"})(pS||(pS={}));var gS;(function(e){e[e.Text=1]="Text",e[e.Error=2]="Error",e[e.Rich=3]="Rich"})(gS||(gS={}));var mS;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(mS||(mS={}));var w1;(function(e){e[e.None=0]="None",e[e.Process=1]="Process",e[e.Output=2]="Output",e[e.Hybrid=3]="Hybrid"})(w1||(w1={}));var Hq=class dI{static{this.a=0}static mixin(t){return t._id=dI.a++,t}},vS;(function(e){e.label="a",e.kind="b",e.detail="c",e.documentation="d",e.sortText="e",e.filterText="f",e.preselect="g",e.insertText="h",e.insertTextRules="i",e.range="j",e.commitCharacters="k",e.additionalTextEdits="l",e.kindModifier="m",e.commandIdent="n",e.commandId="o",e.commandArguments="p"})(vS||(vS={}));var wS;(function(e){e.defaultRanges="a",e.completions="b",e.isIncomplete="c",e.duration="d"})(wS||(wS={}));var bS;(function(e){e[e.Workspace=0]="Workspace",e[e.TextDocument=1]="TextDocument"})(bS||(bS={}));var kT={MainThreadICubeClientBridge:T("MainThreadICubeClientBridge"),MainThreadICubeModularManager:T("MainThreadICubeModularManager")},q={MainThreadAuthentication:T("MainThreadAuthentication"),MainThreadBulkEdits:T("MainThreadBulkEdits"),MainThreadLanguageModels:T("MainThreadLanguageModels"),MainThreadEmbeddings:T("MainThreadEmbeddings"),MainThreadChatAgents2:T("MainThreadChatAgents2"),MainThreadCodeMapper:T("MainThreadCodeMapper"),MainThreadChatVariables:T("MainThreadChatVariables"),MainThreadLanguageModelTools:T("MainThreadChatSkills"),MainThreadClipboard:T("MainThreadClipboard"),MainThreadCommands:T("MainThreadCommands"),MainThreadComments:T("MainThreadComments"),MainThreadConfiguration:T("MainThreadConfiguration"),MainThreadConsole:T("MainThreadConsole"),MainThreadDebugService:T("MainThreadDebugService"),MainThreadDecorations:T("MainThreadDecorations"),MainThreadDiagnostics:T("MainThreadDiagnostics"),MainThreadDialogs:T("MainThreadDiaglogs"),MainThreadDocuments:T("MainThreadDocuments"),MainThreadDocumentContentProviders:T("MainThreadDocumentContentProviders"),MainThreadTextEditors:T("MainThreadTextEditors"),MainThreadEditorInsets:T("MainThreadEditorInsets"),MainThreadEditorTabs:T("MainThreadEditorTabs"),MainThreadErrors:T("MainThreadErrors"),MainThreadTreeViews:T("MainThreadTreeViews"),MainThreadDownloadService:T("MainThreadDownloadService"),MainThreadLanguageFeatures:T("MainThreadLanguageFeatures"),MainThreadLanguages:T("MainThreadLanguages"),MainThreadLogger:T("MainThreadLogger"),MainThreadMessageService:T("MainThreadMessageService"),MainThreadOutputService:T("MainThreadOutputService"),MainThreadProgress:T("MainThreadProgress"),MainThreadQuickDiff:T("MainThreadQuickDiff"),MainThreadQuickOpen:T("MainThreadQuickOpen"),MainThreadStatusBar:T("MainThreadStatusBar"),MainThreadSecretState:T("MainThreadSecretState"),MainThreadStorage:T("MainThreadStorage"),MainThreadSpeech:T("MainThreadSpeechProvider"),MainThreadTelemetry:T("MainThreadTelemetry"),MainThreadTerminalService:T("MainThreadTerminalService"),MainThreadTerminalShellIntegration:T("MainThreadTerminalShellIntegration"),MainThreadWebviews:T("MainThreadWebviews"),MainThreadWebviewPanels:T("MainThreadWebviewPanels"),MainThreadWebviewViews:T("MainThreadWebviewViews"),MainThreadCustomEditors:T("MainThreadCustomEditors"),MainThreadUrls:T("MainThreadUrls"),MainThreadUriOpeners:T("MainThreadUriOpeners"),MainThreadProfileContentHandlers:T("MainThreadProfileContentHandlers"),MainThreadWorkspace:T("MainThreadWorkspace"),MainThreadFileSystem:T("MainThreadFileSystem"),MainThreadFileSystemEventService:T("MainThreadFileSystemEventService"),MainThreadExtensionService:T("MainThreadExtensionService"),MainThreadSCM:T("MainThreadSCM"),MainThreadSearch:T("MainThreadSearch"),MainThreadShare:T("MainThreadShare"),MainThreadTask:T("MainThreadTask"),MainThreadWindow:T("MainThreadWindow"),MainThreadLabelService:T("MainThreadLabelService"),MainThreadNotebook:T("MainThreadNotebook"),MainThreadNotebookDocuments:T("MainThreadNotebookDocumentsShape"),MainThreadNotebookEditors:T("MainThreadNotebookEditorsShape"),MainThreadNotebookKernels:T("MainThreadNotebookKernels"),MainThreadNotebookRenderers:T("MainThreadNotebookRenderers"),MainThreadInteractive:T("MainThreadInteractive"),MainThreadTheming:T("MainThreadTheming"),MainThreadTunnelService:T("MainThreadTunnelService"),MainThreadManagedSockets:T("MainThreadManagedSockets"),MainThreadTimeline:T("MainThreadTimeline"),MainThreadTesting:T("MainThreadTesting"),MainThreadLocalization:T("MainThreadLocalizationShape"),MainThreadAiRelatedInformation:T("MainThreadAiRelatedInformation"),MainThreadAiEmbeddingVector:T("MainThreadAiEmbeddingVector"),MainThreadICubeEvent:T("MainThreadICubeEvent"),MainThreadICubeWebComponent:T("MainThreadICubeWebComponent"),MainThreadIcubeInlineChat:T("MainThreadIcubeInlineChat"),MainThreadIcubeChat:T("MainThreadIcubeChat"),...kT},$T={ExtHostICubeClientBridge:T("ExtHostICubeClientBridge"),ExtHostICubeModularManager:T("ExtHostICubeModularManager")},Z={ExtHostCodeMapper:T("ExtHostCodeMapper"),ExtHostCommands:T("ExtHostCommands"),ExtHostConfiguration:T("ExtHostConfiguration"),ExtHostDiagnostics:T("ExtHostDiagnostics"),ExtHostDebugService:T("ExtHostDebugService"),ExtHostDecorations:T("ExtHostDecorations"),ExtHostDocumentsAndEditors:T("ExtHostDocumentsAndEditors"),ExtHostDocuments:T("ExtHostDocuments"),ExtHostDocumentContentProviders:T("ExtHostDocumentContentProviders"),ExtHostDocumentSaveParticipant:T("ExtHostDocumentSaveParticipant"),ExtHostEditors:T("ExtHostEditors"),ExtHostTreeViews:T("ExtHostTreeViews"),ExtHostFileSystem:T("ExtHostFileSystem"),ExtHostFileSystemInfo:T("ExtHostFileSystemInfo"),ExtHostFileSystemEventService:T("ExtHostFileSystemEventService"),ExtHostLanguages:T("ExtHostLanguages"),ExtHostLanguageFeatures:T("ExtHostLanguageFeatures"),ExtHostQuickOpen:T("ExtHostQuickOpen"),ExtHostQuickDiff:T("ExtHostQuickDiff"),ExtHostStatusBar:T("ExtHostStatusBar"),ExtHostShare:T("ExtHostShare"),ExtHostExtensionService:T("ExtHostExtensionService"),ExtHostLogLevelServiceShape:T("ExtHostLogLevelServiceShape"),ExtHostTerminalService:T("ExtHostTerminalService"),ExtHostTerminalShellIntegration:T("ExtHostTerminalShellIntegration"),ExtHostSCM:T("ExtHostSCM"),ExtHostSearch:T("ExtHostSearch"),ExtHostTask:T("ExtHostTask"),ExtHostWorkspace:T("ExtHostWorkspace"),ExtHostWindow:T("ExtHostWindow"),ExtHostWebviews:T("ExtHostWebviews"),ExtHostWebviewPanels:T("ExtHostWebviewPanels"),ExtHostCustomEditors:T("ExtHostCustomEditors"),ExtHostWebviewViews:T("ExtHostWebviewViews"),ExtHostEditorInsets:T("ExtHostEditorInsets"),ExtHostEditorTabs:T("ExtHostEditorTabs"),ExtHostProgress:T("ExtHostProgress"),ExtHostComments:T("ExtHostComments"),ExtHostSecretState:T("ExtHostSecretState"),ExtHostStorage:T("ExtHostStorage"),ExtHostUrls:T("ExtHostUrls"),ExtHostUriOpeners:T("ExtHostUriOpeners"),ExtHostProfileContentHandlers:T("ExtHostProfileContentHandlers"),ExtHostOutputService:T("ExtHostOutputService"),ExtHostLabelService:T("ExtHostLabelService"),ExtHostNotebook:T("ExtHostNotebook"),ExtHostNotebookDocuments:T("ExtHostNotebookDocuments"),ExtHostNotebookEditors:T("ExtHostNotebookEditors"),ExtHostNotebookKernels:T("ExtHostNotebookKernels"),ExtHostNotebookRenderers:T("ExtHostNotebookRenderers"),ExtHostNotebookDocumentSaveParticipant:T("ExtHostNotebookDocumentSaveParticipant"),ExtHostInteractive:T("ExtHostInteractive"),ExtHostChatAgents2:T("ExtHostChatAgents"),ExtHostChatVariables:T("ExtHostChatVariables"),ExtHostLanguageModelTools:T("ExtHostChatSkills"),ExtHostChatProvider:T("ExtHostChatProvider"),ExtHostSpeech:T("ExtHostSpeech"),ExtHostEmbeddings:T("ExtHostEmbeddings"),ExtHostAiRelatedInformation:T("ExtHostAiRelatedInformation"),ExtHostAiEmbeddingVector:T("ExtHostAiEmbeddingVector"),ExtHostTheming:T("ExtHostTheming"),ExtHostTunnelService:T("ExtHostTunnelService"),ExtHostManagedSockets:T("ExtHostManagedSockets"),ExtHostAuthentication:T("ExtHostAuthentication"),ExtHostTimeline:T("ExtHostTimeline"),ExtHostTesting:T("ExtHostTesting"),ExtHostTelemetry:T("ExtHostTelemetry"),ExtHostLocalization:T("ExtHostLocalization"),ExtHostICubeEvent:T("ExtHostICubeEvent"),ExtHostICubeWebComponent:T("ExtHostICubeWebComponent"),ExtHostIcubeChat:T("ExtHostIcubeChat"),ExtHostIcubeInlineChat:T("ExtHostICubeInlineChatShape"),...$T};function yS(e){return e.toJSON()}var CT=class{constructor(e){this.a=e}transformIncoming(e){const t=this.a.transformIncoming(e);return t===e?e:yS(E.from(t))}transformOutgoing(e){const t=this.a.transformOutgoing(e);return t===e?e:yS(E.from(t))}transformOutgoingURI(e){const t=this.a.transformOutgoing(e);return t===e?e:E.from(t)}transformOutgoingScheme(e){return this.a.transformOutgoingScheme(e)}},Bq=new class{transformIncoming(e){return e}transformOutgoing(e){return e}transformOutgoingURI(e){return e}transformOutgoingScheme(e){return e}};function ES(e,t,i,r){if(!e||r>200)return null;if(typeof e=="object"){if(e.$mid===1)return i?E.revive(t.transformIncoming(e)):t.transformIncoming(e);if(e instanceof J)return null;for(const s in e)if(Object.hasOwnProperty.call(e,s)){const n=ES(e[s],t,i,r+1);n!==null&&(e[s]=n)}}return null}function fl(e,t){const i=ES(e,t,!1,0);return i===null?e:i}var SS=class{constructor(){this.a=null,this.b=null,this.d=null,this.f=!1,this.g=null,this.h=!1,this.i=null}get[Symbol.toStringTag](){return this.toString()}j(){return this.a||(this.a=new Promise((e,t)=>{this.b=e,this.d=t,this.f&&this.b(this.g),this.h&&this.d(this.i)})),this.a}resolveOk(e){this.f||this.h||(this.f=!0,this.g=e,this.a&&this.b(e))}resolveErr(e){this.f||this.h||(this.h=!0,this.i=e,this.a?this.d(e):Et(e))}then(e,t){return this.j().then(e,t)}catch(e){return this.j().then(void 0,e)}finally(e){return this.j().finally(e)}},IT=class extends SS{constructor(){super(),this.h=!0,this.i=new ki}},xS;function b1(e,t){try{return JSON.stringify(e,t)}catch{return"null"}}var y1="$$ref$$",PT={[y1]:-1};function kS(e,t=null,i=!1){const r=[];return{jsonString:(i?b1:JSON.stringify)(e,(n,o)=>{if(typeof o>"u")return PT;if(typeof o=="object"){if(o instanceof J){const a=r.push(o)-1;return{[y1]:a}}if(t)return t(n,o)}return o}),referencedBuffers:r}}function $S(e,t,i){return JSON.parse(e,(r,s)=>{if(s){const n=s[y1];if(typeof n=="number")return t[n];if(i&&s.$mid===1)return i.transformIncoming(s)}return s})}function CS(e,t){return JSON.stringify(e,t)}function DT(e){return e?(t,i)=>i&&i.$mid===1?e.transformOutgoing(i):i:null}var IS;(function(e){e[e.LocalSide=0]="LocalSide",e[e.OtherSide=1]="OtherSide"})(IS||(IS={}));var PS;(function(e){e[e.Responsive=0]="Responsive",e[e.Unresponsive=1]="Unresponsive"})(PS||(PS={}));var AT=()=>{},RT=Symbol.for("rpcProtocol"),TT=Symbol.for("rpcProxy"),LT=class d4 extends X{static{xS=RT}static{this.a=3*1e3}constructor(t,i=null,r=null){super(),this[xS]=!0,this.b=this.B(new I),this.onDidChangeResponsiveState=this.b.event,this.c=t,this.f=i,this.g=r,this.h=DT(this.g),this.j=!1,this.m=[],this.s=[];for(let s=0,n=cS.count;s<n;s++)this.m[s]=null,this.s[s]=null;this.t=0,this.u=Object.create(null),this.w={},this.y=0,this.z=0,this.C=0,this.D=this.B(new Es(()=>this.H(),1e3)),this.B(this.c.onMessage(s=>this.L(s)))}dispose(){this.j=!0,Object.keys(this.w).forEach(t=>{const i=this.w[t];delete this.w[t],i.resolveErr(Qc())}),super.dispose()}drain(){return typeof this.c.drain=="function"?this.c.drain():Promise.resolve()}F(t){this.z===0&&(this.C=Date.now()+d4.a),this.z++,this.D.isScheduled()||this.D.schedule()}G(t){this.C=Date.now()+d4.a,this.z--,this.z===0&&this.D.cancel(),this.I(0)}H(){this.z!==0&&(Date.now()>this.C?this.I(1):this.D.schedule())}I(t){this.y!==t&&(this.y=t,this.b.fire(this.y))}get responsiveState(){return this.y}transformIncomingURIs(t){return this.g?fl(t,this.g):t}getProxy(t){const{nid:i,sid:r}=t;return this.s[i]||(this.s[i]=this.J(i,r)),this.s[i]}J(t,i){const r={get:(s,n)=>(typeof n=="string"&&!s[n]&&n.charCodeAt(0)===36&&(s[n]=(...o)=>this.U(t,n,o)),n===TT?i:s[n])};return new Proxy(Object.create(null),r)}set(t,i){return this.m[t.nid]=i,i}assertRegistered(t){for(let i=0,r=t.length;i<r;i++){const s=t[i];if(!this.m[s.nid])throw new Error(`Missing proxy instance ${s.sid}`)}}L(t){if(this.j)return;const i=t.byteLength,r=Tt.read(t,0),s=r.readUInt8(),n=r.readUInt32();switch(s){case 1:case 2:{let{rpcId:o,method:a,args:c}=hr.deserializeRequestJSONArgs(r);this.g&&(c=fl(c,this.g)),this.M(i,n,o,a,c,s===2);break}case 3:case 4:{let{rpcId:o,method:a,args:c}=hr.deserializeRequestMixedArgs(r);this.g&&(c=fl(c,this.g)),this.M(i,n,o,a,c,s===4);break}case 5:{this.f?.logIncoming(i,n,0,"ack"),this.G(n);break}case 6:{this.N(i,n);break}case 7:{this.O(i,n,void 0);break}case 9:{let o=hr.deserializeReplyOKJSON(r);this.g&&(o=fl(o,this.g)),this.O(i,n,o);break}case 10:{const o=hr.deserializeReplyOKJSONWithBuffers(r,this.g);this.O(i,n,o);break}case 8:{const o=hr.deserializeReplyOKVSBuffer(r);this.O(i,n,o);break}case 11:{let o=hr.deserializeReplyErrError(r);this.g&&(o=fl(o,this.g)),this.P(i,n,o);break}case 12:{this.P(i,n,void 0);break}default:console.error("received unexpected message"),console.error(t)}}M(t,i,r,s,n,o){this.f?.logIncoming(t,i,1,`receiveRequest ${Ed(r)}.${s}(`,n);const a=String(i);let c,l;if(o){const h=new lt;n.push(h.token),c=this.Q(r,s,n),l=()=>h.cancel()}else c=this.Q(r,s,n),l=AT;this.u[a]=l;const u=hr.serializeAcknowledged(i);this.f?.logOutgoing(u.byteLength,i,1,"ack"),this.c.send(u),c.then(h=>{delete this.u[a];const d=hr.serializeReplyOK(i,h,this.h);this.f?.logOutgoing(d.byteLength,i,1,"reply:",h),this.c.send(d)},h=>{delete this.u[a];const d=hr.serializeReplyErr(i,h);this.f?.logOutgoing(d.byteLength,i,1,"replyErr:",h),this.c.send(d)})}N(t,i){this.f?.logIncoming(t,i,1,"receiveCancel");const r=String(i);this.u[r]?.()}O(t,i,r){this.f?.logIncoming(t,i,0,"receiveReply:",r);const s=String(i);if(!this.w.hasOwnProperty(s))return;const n=this.w[s];delete this.w[s],n.resolveOk(r)}P(t,i,r){this.f?.logIncoming(t,i,0,"receiveReplyErr:",r);const s=String(i);if(!this.w.hasOwnProperty(s))return;const n=this.w[s];delete this.w[s];let o;r&&(r.$isError?(o=new Error,o.name=r.name,o.message=r.message,o.stack=r.stack):o=r),n.resolveErr(o)}Q(t,i,r){try{return Promise.resolve(this.S(t,i,r))}catch(s){return Promise.reject(s)}}S(t,i,r){const s=this.m[t];if(!s)throw new Error("Unknown actor "+Ed(t));const n=s[i];if(typeof n!="function")throw new Error("Unknown method "+i+" on actor "+Ed(t));return n.apply(s,r)}U(t,i,r){if(this.j)return new IT;let s=null;if(r.length>0&&Ge.isCancellationToken(r[r.length-1])&&(s=r.pop()),s&&s.isCancellationRequested)return Promise.reject(Qc());const n=hr.serializeRequestArguments(r,this.h),o=++this.t,a=String(o),c=new SS,l=new ue;s&&l.add(s.onCancellationRequested(()=>{const h=hr.serializeCancel(o);this.f?.logOutgoing(h.byteLength,o,0,"cancel"),this.c.send(h)})),this.w[a]=new NT(c,l),this.F(o);const u=hr.serializeRequest(o,t,i,n,!!s);return this.f?.logOutgoing(u.byteLength,o,0,`request: ${Ed(t)}.${i}(`,r),this.c.send(u),c}},NT=class{constructor(e,t){this.a=e,this.b=t}resolveOk(e){this.a.resolveOk(e),this.b.dispose()}resolveErr(e){this.a.resolveErr(e),this.b.dispose()}},Tt=class f4{static alloc(t,i,r){const s=new f4(J.alloc(r+1+4),0);return s.writeUInt8(t),s.writeUInt32(i),s}static read(t,i){return new f4(t,i)}get buffer(){return this.a}constructor(t,i){this.a=t,this.b=i}static sizeUInt8(){return 1}static{this.sizeUInt32=4}writeUInt8(t){this.a.writeUInt8(t,this.b),this.b+=1}readUInt8(){const t=this.a.readUInt8(this.b);return this.b+=1,t}writeUInt32(t){this.a.writeUInt32BE(t,this.b),this.b+=4}readUInt32(){const t=this.a.readUInt32BE(this.b);return this.b+=4,t}static sizeShortString(t){return 1+t.byteLength}writeShortString(t){this.a.writeUInt8(t.byteLength,this.b),this.b+=1,this.a.set(t,this.b),this.b+=t.byteLength}readShortString(){const t=this.a.readUInt8(this.b);this.b+=1;const r=this.a.slice(this.b,this.b+t).toString();return this.b+=t,r}static sizeLongString(t){return 4+t.byteLength}writeLongString(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}readLongString(){const t=this.a.readUInt32BE(this.b);this.b+=4;const r=this.a.slice(this.b,this.b+t).toString();return this.b+=t,r}writeBuffer(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}static sizeVSBuffer(t){return 4+t.byteLength}writeVSBuffer(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}readVSBuffer(){const t=this.a.readUInt32BE(this.b);this.b+=4;const i=this.a.slice(this.b,this.b+t);return this.b+=t,i}static sizeMixedArray(t){let i=0;i+=1;for(let r=0,s=t.length;r<s;r++){const n=t[r];switch(i+=1,n.type){case 1:i+=this.sizeLongString(n.value);break;case 2:i+=this.sizeVSBuffer(n.value);break;case 3:i+=this.sizeUInt32,i+=this.sizeLongString(n.value);for(let o=0;o<n.buffers.length;++o)i+=this.sizeVSBuffer(n.buffers[o]);break;case 4:break}}return i}writeMixedArray(t){this.a.writeUInt8(t.length,this.b),this.b+=1;for(let i=0,r=t.length;i<r;i++){const s=t[i];switch(s.type){case 1:this.writeUInt8(1),this.writeLongString(s.value);break;case 2:this.writeUInt8(2),this.writeVSBuffer(s.value);break;case 3:this.writeUInt8(3),this.writeUInt32(s.buffers.length),this.writeLongString(s.value);for(let n=0;n<s.buffers.length;++n)this.writeBuffer(s.buffers[n]);break;case 4:this.writeUInt8(4);break}}}readMixedArray(){const t=this.a.readUInt8(this.b);this.b+=1;const i=new Array(t);for(let r=0;r<t;r++)switch(this.readUInt8()){case 1:i[r]=this.readLongString();break;case 2:i[r]=this.readVSBuffer();break;case 3:{const n=this.readUInt32(),o=this.readLongString(),a=[];for(let c=0;c<n;++c)a.push(this.readVSBuffer());i[r]=new Zi($S(o,a,null));break}case 4:i[r]=void 0;break}return i}},DS;(function(e){e[e.Simple=0]="Simple",e[e.Mixed=1]="Mixed"})(DS||(DS={}));var hr=class{static a(e){for(let t=0,i=e.length;t<i;t++)if(e[t]instanceof J||e[t]instanceof Zi||typeof e[t]>"u")return!0;return!1}static serializeRequestArguments(e,t){if(this.a(e)){const i=[];for(let r=0,s=e.length;r<s;r++){const n=e[r];if(n instanceof J)i[r]={type:2,value:n};else if(typeof n>"u")i[r]={type:4};else if(n instanceof Zi){const{jsonString:o,referencedBuffers:a}=kS(n.value,t);i[r]={type:3,value:J.fromString(o),buffers:a}}else i[r]={type:1,value:J.fromString(CS(n,t))}}return{type:1,args:i}}return{type:0,args:CS(e,t)}}static serializeRequest(e,t,i,r,s){switch(r.type){case 0:return this.b(e,t,i,r.args,s);case 1:return this.c(e,t,i,r.args,s)}}static b(e,t,i,r,s){const n=J.fromString(i),o=J.fromString(r);let a=0;a+=Tt.sizeUInt8(),a+=Tt.sizeShortString(n),a+=Tt.sizeLongString(o);const c=Tt.alloc(s?2:1,e,a);return c.writeUInt8(t),c.writeShortString(n),c.writeLongString(o),c.buffer}static deserializeRequestJSONArgs(e){const t=e.readUInt8(),i=e.readShortString(),r=e.readLongString();return{rpcId:t,method:i,args:JSON.parse(r)}}static c(e,t,i,r,s){const n=J.fromString(i);let o=0;o+=Tt.sizeUInt8(),o+=Tt.sizeShortString(n),o+=Tt.sizeMixedArray(r);const a=Tt.alloc(s?4:3,e,o);return a.writeUInt8(t),a.writeShortString(n),a.writeMixedArray(r),a.buffer}static deserializeRequestMixedArgs(e){const t=e.readUInt8(),i=e.readShortString(),r=e.readMixedArray(),s=new Array(r.length);for(let n=0,o=r.length;n<o;n++){const a=r[n];typeof a=="string"?s[n]=JSON.parse(a):s[n]=a}return{rpcId:t,method:i,args:s}}static serializeAcknowledged(e){return Tt.alloc(5,e,0).buffer}static serializeCancel(e){return Tt.alloc(6,e,0).buffer}static serializeReplyOK(e,t,i){if(typeof t>"u")return this.d(e);if(t instanceof J)return this.e(e,t);if(t instanceof Zi){const{jsonString:r,referencedBuffers:s}=kS(t.value,i,!0);return this.g(e,r,s)}else return this.f(e,b1(t,i))}static d(e){return Tt.alloc(7,e,0).buffer}static e(e,t){let i=0;i+=Tt.sizeVSBuffer(t);const r=Tt.alloc(8,e,i);return r.writeVSBuffer(t),r.buffer}static deserializeReplyOKVSBuffer(e){return e.readVSBuffer()}static f(e,t){const i=J.fromString(t);let r=0;r+=Tt.sizeLongString(i);const s=Tt.alloc(9,e,r);return s.writeLongString(i),s.buffer}static g(e,t,i){const r=J.fromString(t);let s=0;s+=Tt.sizeUInt32,s+=Tt.sizeLongString(r);for(const o of i)s+=Tt.sizeVSBuffer(o);const n=Tt.alloc(10,e,s);n.writeUInt32(i.length),n.writeLongString(r);for(const o of i)n.writeBuffer(o);return n.buffer}static deserializeReplyOKJSON(e){const t=e.readLongString();return JSON.parse(t)}static deserializeReplyOKJSONWithBuffers(e,t){const i=e.readUInt32(),r=e.readLongString(),s=[];for(let n=0;n<i;++n)s.push(e.readVSBuffer());return new Zi($S(r,s,t))}static serializeReplyErr(e,t){const i=t?b1(Jc(t),null):void 0;if(typeof i!="string")return this.h(e);const r=J.fromString(i);let s=0;s+=Tt.sizeLongString(r);const n=Tt.alloc(11,e,s);return n.writeLongString(r),n.buffer}static deserializeReplyErrError(e){const t=e.readLongString();return JSON.parse(t)}static h(e){return Tt.alloc(12,e,0).buffer}},AS;(function(e){e[e.RequestJSONArgs=1]="RequestJSONArgs",e[e.RequestJSONArgsWithCancellation=2]="RequestJSONArgsWithCancellation",e[e.RequestMixedArgs=3]="RequestMixedArgs",e[e.RequestMixedArgsWithCancellation=4]="RequestMixedArgsWithCancellation",e[e.Acknowledged=5]="Acknowledged",e[e.Cancel=6]="Cancel",e[e.ReplyOKEmpty=7]="ReplyOKEmpty",e[e.ReplyOKVSBuffer=8]="ReplyOKVSBuffer",e[e.ReplyOKJSON=9]="ReplyOKJSON",e[e.ReplyOKJSONWithBuffers=10]="ReplyOKJSONWithBuffers",e[e.ReplyErrError=11]="ReplyErrError",e[e.ReplyErrEmpty=12]="ReplyErrEmpty"})(AS||(AS={}));var RS;(function(e){e[e.String=1]="String",e[e.VSBuffer=2]="VSBuffer",e[e.SerializedObjectWithBuffers=3]="SerializedObjectWithBuffers",e[e.Undefined=4]="Undefined"})(RS||(RS={}));function E1(e,t){return t&&(e.stack||e.stacktrace)?p(112,null,LS(e),TS(e.stack)||TS(e.stacktrace)):LS(e)}function TS(e){return Array.isArray(e)?e.join(`
`):e}function LS(e){return e.code==="ERR_UNC_HOST_NOT_ALLOWED"?`${e.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:typeof e.code=="string"&&typeof e.errno=="number"&&typeof e.syscall=="string"?p(113,null,e.message):e.message||p(114,null)}function Ei(e=null,t=!1){if(!e)return p(115,null);if(Array.isArray(e)){const i=mt(e),r=Ei(i[0],t);return i.length>1?p(116,null,r,i.length):r}if(De(e))return e;if(e.detail){const i=e.detail;if(i.error)return E1(i.error,t);if(i.exception)return E1(i.exception,t)}return e.stack?E1(e,t):e.message?e.message:p(117,null)}function Is(e){return S1(e,0)}function S1(e,t){switch(typeof e){case"object":return e===null?Ps(349,t):Array.isArray(e)?FT(e,t):MT(e,t);case"string":return NS(e,t);case"boolean":return OT(e,t);case"number":return Ps(e,t);case"undefined":return Ps(937,t);default:return Ps(617,t)}}function Ps(e,t){return(t<<5)-t+e|0}function OT(e,t){return Ps(e?433:863,t)}function NS(e,t){t=Ps(149417,t);for(let i=0,r=e.length;i<r;i++)t=Ps(e.charCodeAt(i),t);return t}function FT(e,t){return t=Ps(104579,t),e.reduce((i,r)=>S1(r,i),t)}function MT(e,t){return t=Ps(181387,t),Object.keys(e).sort().reduce((i,r)=>(i=NS(r,i),S1(e[r],i)),t)}var OS;(function(e){e[e.BLOCK_SIZE=64]="BLOCK_SIZE",e[e.UNICODE_REPLACEMENT=65533]="UNICODE_REPLACEMENT"})(OS||(OS={}));function x1(e,t,i=32){const r=i-t,s=~((1<<r)-1);return(e<<t|(s&e)>>>r)>>>0}function pl(e,t=32){return e instanceof ArrayBuffer?Array.from(new Uint8Array(e)).map(i=>i.toString(16).padStart(2,"0")).join(""):(e>>>0).toString(16).padStart(t/4,"0")}var Wq=class fI{static{this.g=new DataView(new ArrayBuffer(320))}constructor(){this.h=1732584193,this.l=4023233417,this.m=2562383102,this.n=271733878,this.o=3285377520,this.p=new Uint8Array(67),this.q=new DataView(this.p.buffer),this.r=0,this.t=0,this.u=0,this.v=!1}update(t){const i=t.length;if(i===0)return;const r=this.p;let s=this.r,n=this.u,o,a;for(n!==0?(o=n,a=-1,n=0):(o=t.charCodeAt(0),a=0);;){let c=o;if(td(o))if(a+1<i){const l=t.charCodeAt(a+1);id(l)?(a++,c=Qm(o,l)):c=65533}else{n=o;break}else id(o)&&(c=65533);if(s=this.w(r,s,c),a++,a<i)o=t.charCodeAt(a);else break}this.r=s,this.u=n}w(t,i,r){return r<128?t[i++]=r:r<2048?(t[i++]=192|(r&1984)>>>6,t[i++]=128|(r&63)>>>0):r<65536?(t[i++]=224|(r&61440)>>>12,t[i++]=128|(r&4032)>>>6,t[i++]=128|(r&63)>>>0):(t[i++]=240|(r&1835008)>>>18,t[i++]=128|(r&258048)>>>12,t[i++]=128|(r&4032)>>>6,t[i++]=128|(r&63)>>>0),i>=64&&(this.y(),i-=64,this.t+=64,t[0]=t[64],t[1]=t[65],t[2]=t[66]),i}digest(){return this.v||(this.v=!0,this.u&&(this.u=0,this.r=this.w(this.p,this.r,65533)),this.t+=this.r,this.x()),pl(this.h)+pl(this.l)+pl(this.m)+pl(this.n)+pl(this.o)}x(){this.p[this.r++]=128,this.p.subarray(this.r).fill(0),this.r>56&&(this.y(),this.p.fill(0));const t=8*this.t;this.q.setUint32(56,Math.floor(t/4294967296),!1),this.q.setUint32(60,t%4294967296,!1),this.y()}y(){const t=fI.g,i=this.q;for(let h=0;h<64;h+=4)t.setUint32(h,i.getUint32(h,!1),!1);for(let h=64;h<320;h+=4)t.setUint32(h,x1(t.getUint32(h-12,!1)^t.getUint32(h-32,!1)^t.getUint32(h-56,!1)^t.getUint32(h-64,!1),1),!1);let r=this.h,s=this.l,n=this.m,o=this.n,a=this.o,c,l,u;for(let h=0;h<80;h++)h<20?(c=s&n|~s&o,l=1518500249):h<40?(c=s^n^o,l=1859775393):h<60?(c=s&n|s&o|n&o,l=2400959708):(c=s^n^o,l=3395469782),u=x1(r,5)+c+a+l+t.getUint32(h*4,!1)&4294967295,a=o,o=n,n=x1(s,30),s=r,r=u;this.h=this.h+r&4294967295,this.l=this.l+s&4294967295,this.m=this.m+n&4294967295,this.n=this.n+o&4294967295,this.o=this.o+a&4294967295}},FS;(function(e){e[e.LParen=0]="LParen",e[e.RParen=1]="RParen",e[e.Neg=2]="Neg",e[e.Eq=3]="Eq",e[e.NotEq=4]="NotEq",e[e.Lt=5]="Lt",e[e.LtEq=6]="LtEq",e[e.Gt=7]="Gt",e[e.GtEq=8]="GtEq",e[e.RegexOp=9]="RegexOp",e[e.RegexStr=10]="RegexStr",e[e.True=11]="True",e[e.False=12]="False",e[e.In=13]="In",e[e.Not=14]="Not",e[e.And=15]="And",e[e.Or=16]="Or",e[e.Str=17]="Str",e[e.QuotedStr=18]="QuotedStr",e[e.Error=19]="Error",e[e.EOF=20]="EOF"})(FS||(FS={}));function k1(...e){switch(e.length){case 1:return p(1729,null,e[0]);case 2:return p(1730,null,e[0],e[1]);case 3:return p(1731,null,e[0],e[1],e[2]);default:return}}var UT=p(1732,null),_T=p(1733,null),gl=class p4{constructor(){this.c="",this.d=0,this.e=0,this.f=[],this.g=[],this.m=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(t){switch(t.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return t.isTripleEq?"===":"==";case 4:return t.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return t.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return t.lexeme;case 18:return t.lexeme;case 19:return t.lexeme;case 20:return"EOF";default:throw Fm(`unhandled token type: ${JSON.stringify(t)}; have you forgotten to add a case?`)}}static{this.a=new Set(["i","g","s","m","y","u"].map(t=>t.charCodeAt(0)))}static{this.b=new Map([["not",14],["in",13],["false",12],["true",11]])}get errors(){return this.g}reset(t){return this.c=t,this.d=0,this.e=0,this.f=[],this.g=[],this}scan(){for(;!this.r();)switch(this.d=this.e,this.i()){case 40:this.k(0);break;case 41:this.k(1);break;case 33:if(this.h(61)){const i=this.h(61);this.f.push({type:4,offset:this.d,isTripleEq:i})}else this.k(2);break;case 39:this.o();break;case 47:this.q();break;case 61:if(this.h(61)){const i=this.h(61);this.f.push({type:3,offset:this.d,isTripleEq:i})}else this.h(126)?this.k(9):this.l(k1("==","=~"));break;case 60:this.k(this.h(61)?6:5);break;case 62:this.k(this.h(61)?8:7);break;case 38:this.h(38)?this.k(15):this.l(k1("&&"));break;case 124:this.h(124)?this.k(16):this.l(k1("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this.n()}return this.d=this.e,this.k(20),Array.from(this.f)}h(t){return this.r()||this.c.charCodeAt(this.e)!==t?!1:(this.e++,!0)}i(){return this.c.charCodeAt(this.e++)}j(){return this.r()?0:this.c.charCodeAt(this.e)}k(t){this.f.push({type:t,offset:this.d})}l(t){const i=this.d,r=this.c.substring(this.d,this.e),s={type:19,offset:this.d,lexeme:r};this.g.push({offset:i,lexeme:r,additionalInfo:t}),this.f.push(s)}n(){this.m.lastIndex=this.d;const t=this.m.exec(this.c);if(t){this.e=this.d+t[0].length;const i=this.c.substring(this.d,this.e),r=p4.b.get(i);r?this.k(r):this.f.push({type:17,lexeme:i,offset:this.d})}}o(){for(;this.j()!==39&&!this.r();)this.i();if(this.r()){this.l(UT);return}this.i(),this.f.push({type:18,lexeme:this.c.substring(this.d+1,this.e-1),offset:this.d+1})}q(){let t=this.e,i=!1,r=!1;for(;;){if(t>=this.c.length){this.e=t,this.l(_T);return}const n=this.c.charCodeAt(t);if(i)i=!1;else if(n===47&&!r){t++;break}else n===91?r=!0:n===92?i=!0:n===93&&(r=!1);t++}for(;t<this.c.length&&p4.a.has(this.c.charCodeAt(t));)t++;this.e=t;const s=this.c.substring(this.d,this.e);this.f.push({type:10,lexeme:s,offset:this.d})}r(){return this.e>=this.c.length}},Dr;(function(e){e.serviceIds=new Map,e.DI_TARGET="$di$target",e.DI_DEPENDENCIES="$di$dependencies";function t(i){return i[e.DI_DEPENDENCIES]||[]}e.getServiceDependencies=t})(Dr||(Dr={}));var Sd=V("instantiationService");function jT(e,t,i){t[Dr.DI_TARGET]===t?t[Dr.DI_DEPENDENCIES].push({id:e,index:i}):(t[Dr.DI_DEPENDENCIES]=[{id:e,index:i}],t[Dr.DI_TARGET]=t)}function V(e){if(Dr.serviceIds.has(e))return Dr.serviceIds.get(e);const t=function(i,r,s){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");jT(t,i,s)};return t.toString=()=>e,Dr.serviceIds.set(e,t),t}function zq(e){return e}var ei=new Map;ei.set("false",!1),ei.set("true",!0),ei.set("isMac",Dt),ei.set("isLinux",At),ei.set("isWindows",it),ei.set("isWeb",Wm),ei.set("isMacNative",Dt&&!Wm),ei.set("isEdge",b5),ei.set("isFirefox",JD),ei.set("isChrome",zm),ei.set("isSafari",QD);var HT=Object.prototype.hasOwnProperty,MS;(function(e){e[e.False=0]="False",e[e.True=1]="True",e[e.Defined=2]="Defined",e[e.Not=3]="Not",e[e.Equals=4]="Equals",e[e.NotEquals=5]="NotEquals",e[e.And=6]="And",e[e.Regex=7]="Regex",e[e.NotRegex=8]="NotRegex",e[e.Or=9]="Or",e[e.In=10]="In",e[e.NotIn=11]="NotIn",e[e.Greater=12]="Greater",e[e.GreaterEquals=13]="GreaterEquals",e[e.Smaller=14]="Smaller",e[e.SmallerEquals=15]="SmallerEquals"})(MS||(MS={}));var BT={regexParsingWithErrorRecovery:!0},WT=p(1707,null),zT=p(1708,null),VT=p(1709,null),US=p(1710,null),qT=p(1711,null),GT=p(1712,null),JT=p(1713,null),QT=p(1714,null),_S=class Rh{static{this.c=new Error}get lexingErrors(){return this.d.errors}get parsingErrors(){return this.h}constructor(t=BT){this.k=t,this.d=new gl,this.f=[],this.g=0,this.h=[],this.v=/g|y/g}parse(t){if(t===""){this.h.push({message:WT,offset:0,lexeme:"",additionalInfo:zT});return}this.f=this.d.reset(t).scan(),this.g=0,this.h=[];try{const i=this.l();if(!this.E()){const r=this.D(),s=r.type===17?GT:void 0;throw this.h.push({message:qT,offset:r.offset,lexeme:gl.getLexeme(r),additionalInfo:s}),Rh.c}return i}catch(i){if(i!==Rh.c)throw i;return}}l(){return this.m()}m(){const t=[this.o()];for(;this.y(16);){const i=this.o();t.push(i)}return t.length===1?t[0]:Jt.or(...t)}o(){const t=[this.s()];for(;this.y(15);){const i=this.s();t.push(i)}return t.length===1?t[0]:Jt.and(...t)}s(){if(this.y(2)){const t=this.D();switch(t.type){case 11:return this.z(),Ci.INSTANCE;case 12:return this.z(),Bi.INSTANCE;case 0:{this.z();const i=this.l();return this.A(1,US),i?.negate()}case 17:return this.z(),wl.create(t.lexeme);default:throw this.B("KEY | true | false | '(' expression ')'",t)}}return this.t()}t(){const t=this.D();switch(t.type){case 11:return this.z(),Jt.true();case 12:return this.z(),Jt.false();case 0:{this.z();const i=this.l();return this.A(1,US),i}case 17:{const i=t.lexeme;if(this.z(),this.y(9)){const s=this.D();if(!this.k.regexParsingWithErrorRecovery){if(this.z(),s.type!==10)throw this.B("REGEX",s);const n=s.lexeme,o=n.lastIndexOf("/"),a=o===n.length-1?void 0:this.w(n.substring(o+1));let c;try{c=new RegExp(n.substring(1,o),a)}catch{throw this.B("REGEX",s)}return R1.create(i,c)}switch(s.type){case 10:case 19:{const n=[s.lexeme];this.z();let o=this.D(),a=0;for(let d=0;d<s.lexeme.length;d++)s.lexeme.charCodeAt(d)===40?a++:s.lexeme.charCodeAt(d)===41&&a--;for(;!this.E()&&o.type!==15&&o.type!==16;){switch(o.type){case 0:a++;break;case 1:a--;break;case 10:case 18:for(let d=0;d<o.lexeme.length;d++)o.lexeme.charCodeAt(d)===40?a++:s.lexeme.charCodeAt(d)===41&&a--}if(a<0)break;n.push(gl.getLexeme(o)),this.z(),o=this.D()}const c=n.join(""),l=c.lastIndexOf("/"),u=l===c.length-1?void 0:this.w(c.substring(l+1));let h;try{h=new RegExp(c.substring(1,l),u)}catch{throw this.B("REGEX",s)}return Jt.regex(i,h)}case 18:{const n=s.lexeme;this.z();let o=null;if(!Kh(n)){const a=n.indexOf("/"),c=n.lastIndexOf("/");if(a!==c&&a>=0){const l=n.slice(a+1,c),u=n[c+1]==="i"?"i":"";try{o=new RegExp(l,u)}catch{throw this.B("REGEX",s)}}}if(o===null)throw this.B("REGEX",s);return R1.create(i,o)}default:throw this.B("REGEX",this.D())}}if(this.y(14)){this.A(13,VT);const s=this.u();return Jt.notIn(i,s)}switch(this.D().type){case 3:{this.z();const s=this.u();if(this.x().type===18)return Jt.equals(i,s);switch(s){case"true":return Jt.has(i);case"false":return Jt.not(i);default:return Jt.equals(i,s)}}case 4:{this.z();const s=this.u();if(this.x().type===18)return Jt.notEquals(i,s);switch(s){case"true":return Jt.not(i);case"false":return Jt.has(i);default:return Jt.notEquals(i,s)}}case 5:return this.z(),D1.create(i,this.u());case 6:return this.z(),A1.create(i,this.u());case 7:return this.z(),I1.create(i,this.u());case 8:return this.z(),P1.create(i,this.u());case 13:return this.z(),Jt.in(i,this.u());default:return Jt.has(i)}}case 20:throw this.h.push({message:JT,offset:t.offset,lexeme:"",additionalInfo:QT}),Rh.c;default:throw this.B(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this.D())}}u(){const t=this.D();switch(t.type){case 17:case 18:return this.z(),t.lexeme;case 11:return this.z(),"true";case 12:return this.z(),"false";case 13:return this.z(),"in";default:return""}}w(t){return t.replaceAll(this.v,"")}x(){return this.f[this.g-1]}y(t){return this.C(t)?(this.z(),!0):!1}z(){return this.E()||this.g++,this.x()}A(t,i){if(this.C(t))return this.z();throw this.B(i,this.D())}B(t,i,r){const s=p(1715,null,t,gl.getLexeme(i)),n=i.offset,o=gl.getLexeme(i);return this.h.push({message:s,offset:n,lexeme:o,additionalInfo:r}),Rh.c}C(t){return this.D().type===t}D(){return this.f[this.g]}E(){return this.D().type===20}},Jt=class{static false(){return Ci.INSTANCE}static true(){return Bi.INSTANCE}static has(e){return vl.create(e)}static equals(e,t){return $1.create(e,t)}static notEquals(e,t){return C1.create(e,t)}static regex(e,t){return R1.create(e,t)}static in(e,t){return jS.create(e,t)}static notIn(e,t){return HS.create(e,t)}static not(e){return wl.create(e)}static and(...e){return WS.create(e,null,!0)}static or(...e){return T1.create(e,null,!0)}static greater(e,t){return I1.create(e,t)}static greaterEquals(e,t){return P1.create(e,t)}static smaller(e,t){return D1.create(e,t)}static smallerEquals(e,t){return A1.create(e,t)}static{this.c=new _S({regexParsingWithErrorRecovery:!1})}static deserialize(e){return e==null?void 0:this.c.parse(e)}};function YT(e){const t=new _S({regexParsingWithErrorRecovery:!1});return e.map(i=>(t.parse(i),t.lexingErrors.length>0?t.lexingErrors.map(r=>({errorMessage:r.additionalInfo?p(1716,null,r.additionalInfo):p(1717,null),offset:r.offset,length:r.lexeme.length})):t.parsingErrors.length>0?t.parsingErrors.map(r=>({errorMessage:r.additionalInfo?`${r.message}. ${r.additionalInfo}`:r.message,offset:r.offset,length:r.lexeme.length})):[]))}function ml(e,t){return e.cmp(t)}var Ci=class pI{static{this.INSTANCE=new pI}constructor(){this.type=0}cmp(t){return this.type-t.type}equals(t){return t.type===this.type}substituteConstants(){return this}evaluate(t){return!1}serialize(){return"false"}keys(){return[]}map(t){return this}negate(){return Bi.INSTANCE}},Bi=class gI{static{this.INSTANCE=new gI}constructor(){this.type=1}cmp(t){return this.type-t.type}equals(t){return t.type===this.type}substituteConstants(){return this}evaluate(t){return!0}serialize(){return"true"}keys(){return[]}map(t){return this}negate(){return Ci.INSTANCE}},vl=class mI{static create(t,i=null){const r=ei.get(t);return typeof r=="boolean"?r?Bi.INSTANCE:Ci.INSTANCE:new mI(t,i)}constructor(t,i){this.key=t,this.c=i,this.type=2}cmp(t){return t.type!==this.type?this.type-t.type:VS(this.key,t.key)}equals(t){return t.type===this.type?this.key===t.key:!1}substituteConstants(){const t=ei.get(this.key);return typeof t=="boolean"?t?Bi.INSTANCE:Ci.INSTANCE:this}evaluate(t){return!!t.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(t){return t.mapDefined(this.key)}negate(){return this.c||(this.c=wl.create(this.key,this)),this.c}},$1=class vI{static create(t,i,r=null){if(typeof i=="boolean")return i?vl.create(t,r):wl.create(t,r);const s=ei.get(t);return typeof s=="boolean"?i===(s?"true":"false")?Bi.INSTANCE:Ci.INSTANCE:new vI(t,i,r)}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=4}cmp(t){return t.type!==this.type?this.type-t.type:fo(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){const t=ei.get(this.c);if(typeof t=="boolean"){const i=t?"true":"false";return this.d===i?Bi.INSTANCE:Ci.INSTANCE}return this}evaluate(t){return t.getValue(this.c)==this.d}serialize(){return`${this.c} == '${this.d}'`}keys(){return[this.c]}map(t){return t.mapEquals(this.c,this.d)}negate(){return this.f||(this.f=C1.create(this.c,this.d,this)),this.f}},jS=class wI{static create(t,i){return new wI(t,i)}constructor(t,i){this.d=t,this.f=i,this.type=10,this.c=null}cmp(t){return t.type!==this.type?this.type-t.type:fo(this.d,this.f,t.d,t.f)}equals(t){return t.type===this.type?this.d===t.d&&this.f===t.f:!1}substituteConstants(){return this}evaluate(t){const i=t.getValue(this.f),r=t.getValue(this.d);return Array.isArray(i)?i.includes(r):typeof r=="string"&&typeof i=="object"&&i!==null?HT.call(i,r):!1}serialize(){return`${this.d} in '${this.f}'`}keys(){return[this.d,this.f]}map(t){return t.mapIn(this.d,this.f)}negate(){return this.c||(this.c=HS.create(this.d,this.f)),this.c}},HS=class bI{static create(t,i){return new bI(t,i)}constructor(t,i){this.d=t,this.f=i,this.type=11,this.c=jS.create(t,i)}cmp(t){return t.type!==this.type?this.type-t.type:this.c.cmp(t.c)}equals(t){return t.type===this.type?this.c.equals(t.c):!1}substituteConstants(){return this}evaluate(t){return!this.c.evaluate(t)}serialize(){return`${this.d} not in '${this.f}'`}keys(){return this.c.keys()}map(t){return t.mapNotIn(this.d,this.f)}negate(){return this.c}},C1=class yI{static create(t,i,r=null){if(typeof i=="boolean")return i?wl.create(t,r):vl.create(t,r);const s=ei.get(t);return typeof s=="boolean"?i===(s?"true":"false")?Ci.INSTANCE:Bi.INSTANCE:new yI(t,i,r)}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=5}cmp(t){return t.type!==this.type?this.type-t.type:fo(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){const t=ei.get(this.c);if(typeof t=="boolean"){const i=t?"true":"false";return this.d===i?Ci.INSTANCE:Bi.INSTANCE}return this}evaluate(t){return t.getValue(this.c)!=this.d}serialize(){return`${this.c} != '${this.d}'`}keys(){return[this.c]}map(t){return t.mapNotEquals(this.c,this.d)}negate(){return this.f||(this.f=$1.create(this.c,this.d,this)),this.f}},wl=class EI{static create(t,i=null){const r=ei.get(t);return typeof r=="boolean"?r?Ci.INSTANCE:Bi.INSTANCE:new EI(t,i)}constructor(t,i){this.c=t,this.d=i,this.type=3}cmp(t){return t.type!==this.type?this.type-t.type:VS(this.c,t.c)}equals(t){return t.type===this.type?this.c===t.c:!1}substituteConstants(){const t=ei.get(this.c);return typeof t=="boolean"?t?Ci.INSTANCE:Bi.INSTANCE:this}evaluate(t){return!t.getValue(this.c)}serialize(){return`!${this.c}`}keys(){return[this.c]}map(t){return t.mapNot(this.c)}negate(){return this.d||(this.d=vl.create(this.c,this)),this.d}};function xd(e,t){if(typeof e=="string"){const i=parseFloat(e);isNaN(i)||(e=i)}return typeof e=="string"||typeof e=="number"?t(e):Ci.INSTANCE}var I1=class SI{static create(t,i,r=null){return xd(i,s=>new SI(t,s,r))}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=12}cmp(t){return t.type!==this.type?this.type-t.type:fo(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))>this.d}serialize(){return`${this.c} > ${this.d}`}keys(){return[this.c]}map(t){return t.mapGreater(this.c,this.d)}negate(){return this.f||(this.f=A1.create(this.c,this.d,this)),this.f}},P1=class xI{static create(t,i,r=null){return xd(i,s=>new xI(t,s,r))}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=13}cmp(t){return t.type!==this.type?this.type-t.type:fo(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))>=this.d}serialize(){return`${this.c} >= ${this.d}`}keys(){return[this.c]}map(t){return t.mapGreaterEquals(this.c,this.d)}negate(){return this.f||(this.f=D1.create(this.c,this.d,this)),this.f}},D1=class kI{static create(t,i,r=null){return xd(i,s=>new kI(t,s,r))}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=14}cmp(t){return t.type!==this.type?this.type-t.type:fo(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))<this.d}serialize(){return`${this.c} < ${this.d}`}keys(){return[this.c]}map(t){return t.mapSmaller(this.c,this.d)}negate(){return this.f||(this.f=P1.create(this.c,this.d,this)),this.f}},A1=class $I{static create(t,i,r=null){return xd(i,s=>new $I(t,s,r))}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=15}cmp(t){return t.type!==this.type?this.type-t.type:fo(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))<=this.d}serialize(){return`${this.c} <= ${this.d}`}keys(){return[this.c]}map(t){return t.mapSmallerEquals(this.c,this.d)}negate(){return this.f||(this.f=I1.create(this.c,this.d,this)),this.f}},R1=class CI{static create(t,i){return new CI(t,i)}constructor(t,i){this.d=t,this.f=i,this.type=7,this.c=null}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.d<t.d)return-1;if(this.d>t.d)return 1;const i=this.f?this.f.source:"",r=t.f?t.f.source:"";return i<r?-1:i>r?1:0}equals(t){if(t.type===this.type){const i=this.f?this.f.source:"",r=t.f?t.f.source:"";return this.d===t.d&&i===r}return!1}substituteConstants(){return this}evaluate(t){const i=t.getValue(this.d);return this.f?this.f.test(i):!1}serialize(){const t=this.f?`/${this.f.source}/${this.f.flags}`:"/invalid/";return`${this.d} =~ ${t}`}keys(){return[this.d]}map(t){return t.mapRegex(this.d,this.f)}negate(){return this.c||(this.c=XT.create(this)),this.c}},XT=class g4{static create(t){return new g4(t)}constructor(t){this.c=t,this.type=8}cmp(t){return t.type!==this.type?this.type-t.type:this.c.cmp(t.c)}equals(t){return t.type===this.type?this.c.equals(t.c):!1}substituteConstants(){return this}evaluate(t){return!this.c.evaluate(t)}serialize(){return`!(${this.c.serialize()})`}keys(){return this.c.keys()}map(t){return new g4(this.c.map(t))}negate(){return this.c}};function BS(e){let t=null;for(let i=0,r=e.length;i<r;i++){const s=e[i].substituteConstants();if(e[i]!==s&&t===null){t=[];for(let n=0;n<i;n++)t[n]=e[n]}t!==null&&(t[i]=s)}return t===null?e:t}var WS=class Bc{static create(t,i,r){return Bc.d(t,i,r)}constructor(t,i){this.expr=t,this.c=i,this.type=6}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.expr.length<t.expr.length)return-1;if(this.expr.length>t.expr.length)return 1;for(let i=0,r=this.expr.length;i<r;i++){const s=ml(this.expr[i],t.expr[i]);if(s!==0)return s}return 0}equals(t){if(t.type===this.type){if(this.expr.length!==t.expr.length)return!1;for(let i=0,r=this.expr.length;i<r;i++)if(!this.expr[i].equals(t.expr[i]))return!1;return!0}return!1}substituteConstants(){const t=BS(this.expr);return t===this.expr?this:Bc.create(t,this.c,!1)}evaluate(t){for(let i=0,r=this.expr.length;i<r;i++)if(!this.expr[i].evaluate(t))return!1;return!0}static d(t,i,r){const s=[];let n=!1;for(const o of t)if(o){if(o.type===1){n=!0;continue}if(o.type===0)return Ci.INSTANCE;if(o.type===6){s.push(...o.expr);continue}s.push(o)}if(s.length===0&&n)return Bi.INSTANCE;if(s.length!==0){if(s.length===1)return s[0];s.sort(ml);for(let o=1;o<s.length;o++)s[o-1].equals(s[o])&&(s.splice(o,1),o--);if(s.length===1)return s[0];for(;s.length>1;){const o=s[s.length-1];if(o.type!==9)break;s.pop();const a=s.pop(),c=s.length===0,l=T1.create(o.expr.map(u=>Bc.create([u,a],null,r)),null,c);l&&(s.push(l),s.sort(ml))}if(s.length===1)return s[0];if(r){for(let o=0;o<s.length;o++)for(let a=o+1;a<s.length;a++)if(s[o].negate().equals(s[a]))return Ci.INSTANCE;if(s.length===1)return s[0]}return new Bc(s,i)}}serialize(){return this.expr.map(t=>t.serialize()).join(" && ")}keys(){const t=[];for(const i of this.expr)t.push(...i.keys());return t}map(t){return new Bc(this.expr.map(i=>i.map(t)),null)}negate(){if(!this.c){const t=[];for(const i of this.expr)t.push(i.negate());this.c=T1.create(t,this,!0)}return this.c}},T1=class Zo{static create(t,i,r){return Zo.d(t,i,r)}constructor(t,i){this.expr=t,this.c=i,this.type=9}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.expr.length<t.expr.length)return-1;if(this.expr.length>t.expr.length)return 1;for(let i=0,r=this.expr.length;i<r;i++){const s=ml(this.expr[i],t.expr[i]);if(s!==0)return s}return 0}equals(t){if(t.type===this.type){if(this.expr.length!==t.expr.length)return!1;for(let i=0,r=this.expr.length;i<r;i++)if(!this.expr[i].equals(t.expr[i]))return!1;return!0}return!1}substituteConstants(){const t=BS(this.expr);return t===this.expr?this:Zo.create(t,this.c,!1)}evaluate(t){for(let i=0,r=this.expr.length;i<r;i++)if(this.expr[i].evaluate(t))return!0;return!1}static d(t,i,r){let s=[],n=!1;if(t){for(let o=0,a=t.length;o<a;o++){const c=t[o];if(c){if(c.type===0){n=!0;continue}if(c.type===1)return Bi.INSTANCE;if(c.type===9){s=s.concat(c.expr);continue}s.push(c)}}if(s.length===0&&n)return Ci.INSTANCE;s.sort(ml)}if(s.length!==0){if(s.length===1)return s[0];for(let o=1;o<s.length;o++)s[o-1].equals(s[o])&&(s.splice(o,1),o--);if(s.length===1)return s[0];if(r){for(let o=0;o<s.length;o++)for(let a=o+1;a<s.length;a++)if(s[o].negate().equals(s[a]))return Bi.INSTANCE;if(s.length===1)return s[0]}return new Zo(s,i)}}serialize(){return this.expr.map(t=>t.serialize()).join(" || ")}keys(){const t=[];for(const i of this.expr)t.push(...i.keys());return t}map(t){return new Zo(this.expr.map(i=>i.map(t)),null)}negate(){if(!this.c){const t=[];for(const i of this.expr)t.push(i.negate());for(;t.length>1;){const i=t.shift(),r=t.shift(),s=[];for(const n of qS(i))for(const o of qS(r))s.push(WS.create([n,o],null,!1));t.unshift(Zo.create(s,null,!1))}this.c=Zo.create(t,this,!0)}return this.c}},j=class vm extends vl{static{this.d=[]}static all(){return vm.d.values()}constructor(t,i,r){super(t,null),this.f=i,typeof r=="object"?vm.d.push({...r,key:t}):r!==!0&&vm.d.push({key:t,description:r,type:i!=null?typeof i:void 0})}bindTo(t){return t.createKey(this.key,this.f)}getValue(t){return t.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(t){return $1.create(this.key,t)}notEqualsTo(t){return C1.create(this.key,t)}},zS=V("contextKeyService");function VS(e,t){return e<t?-1:e>t?1:0}function fo(e,t,i,r){return e<i?-1:e>i?1:t<r?-1:t>r?1:0}function qS(e){return e.type===9?e.expr:[e]}var Ce=V("logService"),xa=V("loggerService");function ZT(e){return Xi(e)}var de;(function(e){e[e.Off=0]="Off",e[e.Trace=1]="Trace",e[e.Debug=2]="Debug",e[e.Info=3]="Info",e[e.Warning=4]="Warning",e[e.Error=5]="Error"})(de||(de={}));var KT=de.Info;function eL(e,t,i){switch(t){case de.Trace:e.trace(i);break;case de.Debug:e.debug(i);break;case de.Info:e.info(i);break;case de.Warning:e.warn(i);break;case de.Error:e.error(i);break;case de.Off:break;default:throw new Error(`Invalid log level ${t}`)}}function ka(e,t=!1){let i="";for(let r=0;r<e.length;r++){let s=e[r];if(s instanceof Error&&(s=Ei(s,t)),typeof s=="object")try{s=JSON.stringify(s)}catch{}i+=(r>0?" ":"")+s}return i}var GS=class extends X{constructor(){super(...arguments),this.b=KT,this.c=this.B(new I),this.onDidChangeLogLevel=this.c.event}setLevel(e){this.b!==e&&(this.b=e,this.c.fire(this.b))}getLevel(){return this.b}f(e){return this.b!==de.Off&&this.b<=e}},L1=class extends GS{constructor(e){super(),this.h=e}f(e){return this.h||super.f(e)}trace(e,...t){this.f(de.Trace)&&this.g(de.Trace,ka([e,...t],!0))}debug(e,...t){this.f(de.Debug)&&this.g(de.Debug,ka([e,...t]))}info(e,...t){this.f(de.Info)&&this.g(de.Info,ka([e,...t]))}warn(e,...t){this.f(de.Warning)&&this.g(de.Warning,ka([e,...t]))}error(e,...t){if(this.f(de.Error))if(e instanceof Error){const i=Array.prototype.slice.call(arguments);i[0]=e.stack,this.g(de.Error,ka(i))}else this.g(de.Error,ka([e,...t]))}flush(){}},tL=class extends GS{constructor(e){super(),this.g=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.g)t.setLevel(e);super.setLevel(e)}trace(e,...t){for(const i of this.g)i.trace(e,...t)}debug(e,...t){for(const i of this.g)i.debug(e,...t)}info(e,...t){for(const i of this.g)i.info(e,...t)}warn(e,...t){for(const i of this.g)i.warn(e,...t)}error(e,...t){for(const i of this.g)i.error(e,...t)}flush(){for(const e of this.g)e.flush()}dispose(){for(const e of this.g)e.dispose();super.dispose()}},iL=class extends X{constructor(e,t,i){if(super(),this.h=e,this.j=t,this.b=new Gt,this.c=this.B(new I),this.onDidChangeLoggers=this.c.event,this.f=this.B(new I),this.onDidChangeLogLevel=this.f.event,this.g=this.B(new I),this.onDidChangeVisibility=this.g.event,i)for(const r of i)this.b.set(r.resource,{logger:void 0,info:r})}m(e){return De(e)?[...this.b.values()].find(t=>t.info.id===e):this.b.get(e)}getLogger(e){return this.m(e)?.logger}createLogger(e,t){const i=this.n(e),r=De(e)?e:t?.id??Is(i.toString()).toString(16);let s=this.b.get(i)?.logger;const n=t?.logLevel==="always"?de.Trace:t?.logLevel;s||(s=this.s(i,n??this.getLogLevel(i)??this.h,{...t,id:r}));const o={logger:s,info:{resource:i,id:r,logLevel:n,name:t?.name,hidden:t?.hidden,extensionId:t?.extensionId,when:t?.when}};return this.registerLogger(o.info),this.b.set(i,o),s}n(e){return De(e)?Rt(this.j,`${e}.log`):e}setLogLevel(e,t){if(E.isUri(e)){const i=e,r=t,s=this.b.get(i);s&&r!==s.info.logLevel&&(s.info.logLevel=r===this.h?void 0:r,s.logger?.setLevel(r),this.b.set(s.info.resource,s),this.f.fire([i,r]))}else{this.h=e;for(const[i,r]of this.b.entries())this.b.get(i)?.info.logLevel===void 0&&r.logger?.setLevel(this.h);this.f.fire(this.h)}}setVisibility(e,t){const i=this.m(e);i&&t!==!i.info.hidden&&(i.info.hidden=!t,this.b.set(i.info.resource,i),this.g.fire([i.info.resource,t]))}getLogLevel(e){let t;return e&&(t=this.b.get(e)?.info.logLevel),t??this.h}registerLogger(e){const t=this.b.get(e.resource);t?t.info.hidden!==e.hidden&&this.setVisibility(e.resource,!e.hidden):(this.b.set(e.resource,{info:e,logger:void 0}),this.c.fire({added:[e],removed:[]}))}deregisterLogger(e){const t=this.b.get(e);t&&(t.logger&&t.logger.dispose(),this.b.delete(e),this.c.fire({added:[],removed:[t.info]}))}*getRegisteredLoggers(){for(const e of this.b.values())yield e.info}getRegisteredLogger(e){return this.b.get(e)?.info}dispose(){this.b.forEach(e=>e.logger?.dispose()),this.b.clear(),super.dispose()}};function rL(e){switch(e){case de.Trace:return"trace";case de.Debug:return"debug";case de.Info:return"info";case de.Warning:return"warn";case de.Error:return"error";case de.Off:return"off"}}function sL(e){switch(e){case"trace":return de.Trace;case"debug":return de.Debug;case"info":return de.Info;case"warn":return de.Warning;case"error":return de.Error;case"critical":return de.Error;case"off":return de.Off}}var Vq=new j("logLevel",rL(de.Info)),Kr=class{constructor(e,t=[],i=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=i}},JS=[],QS;(function(e){e[e.Eager=0]="Eager",e[e.Delayed=1]="Delayed"})(QS||(QS={}));function Ae(e,t,i){t instanceof Kr||(t=new Kr(t,[],!!i)),JS.push([e,t])}function nL(){return JS}var N1=class{constructor(...e){this.a=new Map;for(const[t,i]of e)this.set(t,i)}set(e,t){const i=this.a.get(e);return this.a.set(e,t),i}has(e){return this.a.has(e)}get(e){return this.a.get(e)}},Qt=V("IExtHostInitDataService"),oL=class{constructor(e,t){this.key=e,this.data=t,this.incoming=new Map,this.outgoing=new Map}},YS=class{constructor(e){this.b=e,this.a=new Map}roots(){const e=[];for(const t of this.a.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const i=this.lookupOrInsertNode(e),r=this.lookupOrInsertNode(t);i.outgoing.set(r.key,r),r.incoming.set(i.key,i)}removeNode(e){const t=this.b(e);this.a.delete(t);for(const i of this.a.values())i.outgoing.delete(t),i.incoming.delete(t)}lookupOrInsertNode(e){const t=this.b(e);let i=this.a.get(t);return i||(i=new oL(t,e),this.a.set(t,i)),i}lookup(e){return this.a.get(this.b(e))}isEmpty(){return this.a.size===0}toString(){const e=[];for(const[t,i]of this.a)e.push(`${t}
	(-> incoming)[${[...i.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...i.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(const[e,t]of this.a){const i=new Set([e]),r=this.c(t,i);if(r)return r}}c(e,t){for(const[i,r]of e.outgoing){if(t.has(i))return[...t,i].join(" -> ");t.add(i);const s=this.c(r,t);if(s)return s;t.delete(i)}}},aL=!1,XS=class extends Error{constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}},cL=class m4{constructor(t=new N1,i=!1,r,s=aL){this.i=t,this.j=i,this.k=r,this.l=s,this.f=!1,this.g=new Set,this.h=new Set,this.t=new Set,this.i.set(Sd,this),this._globalGraph=s?r?._globalGraph??new YS(n=>n):void 0}dispose(){if(!this.f){this.f=!0,Sr(this.h),this.h.clear();for(const t of this.g)ED(t)&&t.dispose();this.g.clear()}}m(){if(this.f)throw new Error("InstantiationService has been disposed")}createChild(t,i){this.m();const r=this,s=new class extends m4{dispose(){r.h.delete(s),super.dispose()}}(t,this.j,this,this.l);return this.h.add(s),i?.add(s),s}invokeFunction(t,...i){this.m();const r=O1.traceInvocation(this.l,t);let s=!1;try{return t({get:o=>{if(s)throw Fm("service accessor is only valid during the invocation of its target method");const a=this.s(o,r);if(!a)throw new Error(`[invokeFunction] unknown service '${o}'`);return a}},...i)}finally{s=!0,r.stop()}}createInstance(t,...i){this.m();let r,s;return t instanceof Kr?(r=O1.traceCreation(this.l,t.ctor),s=this.o(t.ctor,t.staticArguments.concat(i),r)):(r=O1.traceCreation(this.l,t),s=this.o(t,i,r)),r.stop(),s}o(t,i=[],r){const s=Dr.getServiceDependencies(t).sort((a,c)=>a.index-c.index),n=[];for(const a of s){const c=this.s(a.id,r);c||this.y(`[createInstance] ${t.name} depends on UNKNOWN service ${a.id}.`,!1),n.push(c)}const o=s.length>0?s[0].index:i.length;if(i.length!==o){console.trace(`[createInstance] First service dependency of ${t.name} at position ${o+1} conflicts with ${i.length} static arguments`);const a=o-i.length;a>0?i=i.concat(new Array(a)):i=i.slice(0,o)}return Reflect.construct(t,i.concat(n))}q(t,i){if(this.i.get(t)instanceof Kr)this.i.set(t,i);else if(this.k)this.k.q(t,i);else throw new Error("illegalState - setting UNKNOWN service instance")}r(t){const i=this.i.get(t);return!i&&this.k?this.k.r(t):i}s(t,i){this._globalGraph&&this.c&&this._globalGraph.insertEdge(this.c,String(t));const r=this.r(t);return r instanceof Kr?this.u(t,r,i.branch(t,!0)):(i.branch(t,!1),r)}u(t,i,r){if(this.t.has(t))throw new Error(`illegal state - RECURSIVELY instantiating service '${t}'`);this.t.add(t);try{return this.v(t,i,r)}finally{this.t.delete(t)}}v(t,i,r){const s=new YS(c=>c.id.toString());let n=0;const o=[{id:t,desc:i,_trace:r}],a=new Set;for(;o.length;){const c=o.pop();if(!a.has(String(c.id))){if(a.add(String(c.id)),s.lookupOrInsertNode(c),n++>1e3)throw new XS(s);for(const l of Dr.getServiceDependencies(c.desc.ctor)){const u=this.r(l.id);if(u||this.y(`[createInstance] ${t} depends on ${l.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(c.id),String(l.id)),u instanceof Kr){const h={id:l.id,desc:u,_trace:c._trace.branch(l.id,!0)};s.insertEdge(c,h),o.push(h)}}}}for(;;){const c=s.roots();if(c.length===0){if(!s.isEmpty())throw new XS(s);break}for(const{data:l}of c){if(this.r(l.id)instanceof Kr){const h=this.w(l.id,l.desc.ctor,l.desc.staticArguments,l.desc.supportsDelayedInstantiation,l._trace);this.q(l.id,h)}s.removeNode(l)}}return this.r(t)}w(t,i,r=[],s,n){if(this.i.get(t)instanceof Kr)return this.x(t,i,r,s,n,this.g);if(this.k)return this.k.w(t,i,r,s,n);throw new Error(`illegalState - creating UNKNOWN service instance ${i.name}`)}x(t,i,r=[],s,n,o){if(s){const a=new m4(void 0,this.j,this,this.l);a.c=String(t);const c=new Map,l=new pR(()=>{const u=a.o(i,r,n);for(const[h,d]of c){const f=u[h];if(typeof f=="function")for(const g of d)g.disposable=f.apply(u,g.listener)}return c.clear(),o.add(u),u});return new Proxy(Object.create(null),{get(u,h){if(!l.isInitialized&&typeof h=="string"&&(h.startsWith("onDid")||h.startsWith("onWill"))){let g=c.get(h);return g||(g=new Kc,c.set(h,g)),(y,S,x)=>{if(l.isInitialized)return l.value[h](y,S,x);{const P={listener:[y,S,x],disposable:void 0},D=g.push(P);return ee(()=>{D(),P.disposable?.dispose()})}}}if(h in u)return u[h];const d=l.value;let f=d[h];return typeof f!="function"||(f=f.bind(d),u[h]=f),f},set(u,h,d){return l.value[h]=d,!0},getPrototypeOf(u){return i.prototype}})}else{const a=this.o(i,r,n);return o.add(a),a}}y(t,i){if(i&&console.warn(t),this.j)throw new Error(t)}},ZS;(function(e){e[e.None=0]="None",e[e.Creation=1]="Creation",e[e.Invocation=2]="Invocation",e[e.Branch=3]="Branch"})(ZS||(ZS={}));var O1=class ds{static{this.all=new Set}static{this.c=new class extends ds{constructor(){super(0,null)}stop(){}branch(){return this}}}static traceInvocation(t,i){return t?new ds(2,i.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):ds.c}static traceCreation(t,i){return t?new ds(1,i.name):ds.c}static{this.f=0}constructor(t,i){this.type=t,this.name=i,this.g=Date.now(),this.h=[]}branch(t,i){const r=new ds(3,t.toString());return this.h.push([t,i,r]),r}stop(){const t=Date.now()-this.g;ds.f+=t;let i=!1;function r(n,o){const a=[],c=new Array(n+1).join("	");for(const[l,u,h]of o.h)if(u&&h){i=!0,a.push(`${c}CREATES -> ${l}`);const d=r(n+1,h);d&&a.push(d)}else a.push(`${c}uses -> ${l}`);return a.join(`
`)}const s=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${r(1,this)}`,`DONE, took ${t.toFixed(2)}ms (grand total ${ds.f.toFixed(2)}ms)`];(t>2||i)&&ds.all.add(s.join(`
`))}},Ie=V("IExtHostRpcService"),lL=class{constructor(e){this.getProxy=e.getProxy.bind(e),this.set=e.set.bind(e),this.dispose=e.dispose.bind(e),this.assertRegistered=e.assertRegistered.bind(e),this.drain=e.drain.bind(e)}},bl=V("IURITransformerService"),uL=class{constructor(e){e?(this.transformIncoming=e.transformIncoming.bind(e),this.transformOutgoing=e.transformOutgoing.bind(e),this.transformOutgoingURI=e.transformOutgoingURI.bind(e),this.transformOutgoingScheme=e.transformOutgoingScheme.bind(e)):(this.transformIncoming=t=>t,this.transformOutgoing=t=>t,this.transformOutgoingURI=t=>t,this.transformOutgoingScheme=t=>t)}},hL=class{constructor(){this.b="",this.c=0}reset(e){return this.b=e,this.c=0,this}next(){return this.c+=1,this}hasNext(){return this.c<this.b.length-1}cmp(e){const t=e.charCodeAt(0),i=this.b.charCodeAt(this.c);return t-i}value(){return this.b[this.c]}},dL=class{constructor(e=!0){this.e=e}reset(e){return this.b=e,this.c=0,this.d=0,this.next()}hasNext(){return this.d<this.b.length}next(){this.c=this.d;let e=!0;for(;this.d<this.b.length;this.d++)if(this.b.charCodeAt(this.d)===46)if(e)this.c++;else break;else e=!1;return this}cmp(e){return this.e?Jm(e,this.b,0,e.length,this.c,this.d):nl(e,this.b,0,e.length,this.c,this.d)}value(){return this.b.substring(this.c,this.d)}},KS=class{constructor(e=!0,t=!0){this.f=e,this.g=t}reset(e){this.d=0,this.e=0,this.b=e,this.c=e.length;for(let t=e.length-1;t>=0;t--,this.c--){const i=this.b.charCodeAt(t);if(!(i===47||this.f&&i===92))break}return this.next()}hasNext(){return this.e<this.c}next(){this.d=this.e;let e=!0;for(;this.e<this.c;this.e++){const t=this.b.charCodeAt(this.e);if(t===47||this.f&&t===92)if(e)this.d++;else break;else e=!1}return this}cmp(e){return this.g?Jm(e,this.b,0,e.length,this.d,this.e):nl(e,this.b,0,e.length,this.d,this.e)}value(){return this.b.substring(this.d,this.e)}},e6;(function(e){e[e.Scheme=1]="Scheme",e[e.Authority=2]="Authority",e[e.Path=3]="Path",e[e.Query=4]="Query",e[e.Fragment=5]="Fragment"})(e6||(e6={}));var t6=class{constructor(e,t){this.f=e,this.g=t,this.d=[],this.e=0}reset(e){return this.c=e,this.d=[],this.c.scheme&&this.d.push(1),this.c.authority&&this.d.push(2),this.c.path&&(this.b=new KS(!1,!this.f(e)),this.b.reset(e.path),this.b.value()&&this.d.push(3)),this.g(e)||(this.c.query&&this.d.push(4),this.c.fragment&&this.d.push(5)),this.e=0,this}next(){return this.d[this.e]===3&&this.b.hasNext()?this.b.next():this.e+=1,this}hasNext(){return this.d[this.e]===3&&this.b.hasNext()||this.e<this.d.length-1}cmp(e){if(this.d[this.e]===1)return I5(e,this.c.scheme);if(this.d[this.e]===2)return I5(e,this.c.authority);if(this.d[this.e]===3)return this.b.cmp(e);if(this.d[this.e]===4)return no(e,this.c.query);if(this.d[this.e]===5)return no(e,this.c.fragment);throw new Error}value(){if(this.d[this.e]===1)return this.c.scheme;if(this.d[this.e]===2)return this.c.authority;if(this.d[this.e]===3)return this.b.value();if(this.d[this.e]===4)return this.c.query;if(this.d[this.e]===5)return this.c.fragment;throw new Error}},kd=class{constructor(){this.height=1}isEmpty(){return!this.left&&!this.mid&&!this.right&&!this.value}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){return this.left?.height??0}get heightRight(){return this.right?.height??0}},i6;(function(e){e[e.Left=-1]="Left",e[e.Mid=0]="Mid",e[e.Right=1]="Right"})(i6||(i6={}));var wn=class Th{static forUris(t=()=>!1,i=()=>!1){return new Th(new t6(t,i))}static forPaths(t=!1){return new Th(new KS(void 0,!t))}static forStrings(){return new Th(new hL)}static forConfigKeys(){return new Th(new dL)}constructor(t){this.b=t}clear(){this.c=void 0}fill(t,i){if(i){const r=i.slice(0);H4(r);for(const s of r)this.set(s,t)}else{const r=t.slice(0);H4(r);for(const s of r)this.set(s[0],s[1])}}set(t,i){const r=this.b.reset(t);let s;this.c||(this.c=new kd,this.c.segment=r.value());const n=[];for(s=this.c;;){const a=r.cmp(s.segment);if(a>0)s.left||(s.left=new kd,s.left.segment=r.value()),n.push([-1,s]),s=s.left;else if(a<0)s.right||(s.right=new kd,s.right.segment=r.value()),n.push([1,s]),s=s.right;else if(r.hasNext())r.next(),s.mid||(s.mid=new kd,s.mid.segment=r.value()),n.push([0,s]),s=s.mid;else break}const o=s.value;s.value=i,s.key=t;for(let a=n.length-1;a>=0;a--){const c=n[a][1];c.updateHeight();const l=c.balanceFactor();if(l<-1||l>1){const u=n[a][0],h=n[a+1][0];if(u===1&&h===1)n[a][1]=c.rotateLeft();else if(u===-1&&h===-1)n[a][1]=c.rotateRight();else if(u===1&&h===-1)c.right=n[a+1][1]=n[a+1][1].rotateRight(),n[a][1]=c.rotateLeft();else if(u===-1&&h===1)c.left=n[a+1][1]=n[a+1][1].rotateLeft(),n[a][1]=c.rotateRight();else throw new Error;if(a>0)switch(n[a-1][0]){case-1:n[a-1][1].left=n[a][1];break;case 1:n[a-1][1].right=n[a][1];break;case 0:n[a-1][1].mid=n[a][1];break}else this.c=n[0][1]}}return o}get(t){return this.d(t)?.value}d(t){const i=this.b.reset(t);let r=this.c;for(;r;){const s=i.cmp(r.segment);if(s>0)r=r.left;else if(s<0)r=r.right;else if(i.hasNext())i.next(),r=r.mid;else break}return r}has(t){const i=this.d(t);return!(i?.value===void 0&&i?.mid===void 0)}delete(t){return this.e(t,!1)}deleteSuperstr(t){return this.e(t,!0)}e(t,i){const r=this.b.reset(t),s=[];let n=this.c;for(;n;){const o=r.cmp(n.segment);if(o>0)s.push([-1,n]),n=n.left;else if(o<0)s.push([1,n]),n=n.right;else if(r.hasNext())r.next(),s.push([0,n]),n=n.mid;else break}if(n){if(i?(n.left=void 0,n.mid=void 0,n.right=void 0,n.height=1):(n.key=void 0,n.value=void 0),!n.mid&&!n.value)if(n.left&&n.right){const o=this.f(n.right);if(o.key){const{key:a,value:c,segment:l}=o;this.e(o.key,!1),n.key=a,n.value=c,n.segment=l}}else{const o=n.left??n.right;if(s.length>0){const[a,c]=s[s.length-1];switch(a){case-1:c.left=o;break;case 0:c.mid=o;break;case 1:c.right=o;break}}else this.c=o}for(let o=s.length-1;o>=0;o--){const a=s[o][1];a.updateHeight();const c=a.balanceFactor();if(c>1?(a.right.balanceFactor()>=0||(a.right=a.right.rotateRight()),s[o][1]=a.rotateLeft()):c<-1&&(a.left.balanceFactor()<=0||(a.left=a.left.rotateLeft()),s[o][1]=a.rotateRight()),o>0)switch(s[o-1][0]){case-1:s[o-1][1].left=s[o][1];break;case 1:s[o-1][1].right=s[o][1];break;case 0:s[o-1][1].mid=s[o][1];break}else this.c=s[0][1]}}}f(t){for(;t.left;)t=t.left;return t}findSubstr(t){const i=this.b.reset(t);let r=this.c,s;for(;r;){const n=i.cmp(r.segment);if(n>0)r=r.left;else if(n<0)r=r.right;else if(i.hasNext())i.next(),s=r.value||s,r=r.mid;else break}return r&&r.value||s}findSuperstr(t){return this.g(t,!1)}g(t,i){const r=this.b.reset(t);let s=this.c;for(;s;){const n=r.cmp(s.segment);if(n>0)s=s.left;else if(n<0)s=s.right;else if(r.hasNext())r.next(),s=s.mid;else return s.mid?this.h(s.mid):i?s.value:void 0}}hasElementOrSubtree(t){return this.g(t,!0)!==void 0}forEach(t){for(const[i,r]of this)t(r,i)}*[Symbol.iterator](){yield*this.h(this.c)}h(t){const i=[];return this.j(t,i),i[Symbol.iterator]()}j(t,i){t&&(t.left&&this.j(t.left,i),t.value&&i.push([t.key,t.value]),t.mid&&this.j(t.mid,i),t.right&&this.j(t.right,i))}_isBalanced(){const t=i=>{if(!i)return!0;const r=i.balanceFactor();return r<-1||r>1?!1:t(i.left)&&t(i.right)};return t(this.c)}},fL=class{constructor(){this.a=0}getNext(){return this.a++}},pL=class{constructor(){this.a=1,this.b=0}update(e){return this.b=this.b+(e-this.b)/this.a,this.a+=1,this.b}get value(){return this.b}},yl;(function(e){e[e.Ignore=0]="Ignore",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"})(yl||(yl={})),function(e){const t="error",i="warning",r="warn",s="info",n="ignore";function o(c){return c?xr(t,c)?e.Error:xr(i,c)||xr(r,c)?e.Warning:xr(s,c)?e.Info:e.Ignore:e.Ignore}e.fromValue=o;function a(c){switch(c){case e.Error:return t;case e.Warning:return i;case e.Info:return s;default:return n}}e.toString=a}(yl||(yl={}));var Lt=yl,gL=Lt,qq=V("notificationService"),r6;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.SILENT=1]="SILENT",e[e.URGENT=2]="URGENT"})(r6||(r6={}));var s6;(function(e){e[e.WORKSPACE=0]="WORKSPACE",e[e.PROFILE=1]="PROFILE",e[e.APPLICATION=2]="APPLICATION"})(s6||(s6={}));var n6;(function(e){e[e.OFF=0]="OFF",e[e.ERROR=1]="ERROR"})(n6||(n6={}));var $d=V("contextService");function mL(e){const t=e;return typeof t?.id=="string"&&E.isUri(t.uri)}function vL(e){const t=e;return typeof t?.id=="string"&&E.isUri(t.configPath)}var o6;(function(e){e[e.EMPTY=1]="EMPTY",e[e.FOLDER=2]="FOLDER",e[e.WORKSPACE=3]="WORKSPACE"})(o6||(o6={}));var wL=class{constructor(e,t,i,r,s){this.h=e,this.j=i,this.k=r,this.l=s,this.c=wn.forUris(this.l,()=>!0),this.folders=t}update(e){this.h=e.id,this.k=e.configuration,this.j=e.transient,this.l=e.l,this.folders=e.folders}get folders(){return this.g}set folders(e){this.g=e,this.n()}get id(){return this.h}get transient(){return this.j}get configuration(){return this.k}set configuration(e){this.k=e}getFolder(e){return e&&this.c.findSubstr(e)||null}n(){this.c=wn.forUris(this.l,()=>!0);for(const e of this.folders)this.c.set(e.uri,e)}toJSON(){return{id:this.id,folders:this.folders,transient:this.transient,configuration:this.configuration}}},F1=class{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toResource(e){return Rt(this.uri,e)}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}};function M1(e){return new F1({uri:e,index:0,name:i1(e)},{uri:e.toString()})}var a6="code-workspace",bL=`.${a6}`,Gq=[{name:p(2793,null),extensions:[a6]}];function yL(e){return(typeof e=="string"?Zh(e):tR(e))===bL}var EL=class{constructor(){this.a=new Set(Object.keys(z)),this.b=new Map,this.extUri=new al(e=>{const t=this.b.get(e.scheme);return!(t===void 0||t&1024)})}$acceptProviderInfos(e,t){t===null?this.b.delete(e.scheme):this.b.set(e.scheme,t)}isFreeScheme(e){return!this.b.has(e)&&!this.a.has(e)}getCapabilities(e){return this.b.get(e)}},$a=V("IExtHostFileSystemInfo"),U1=Object.freeze({create:e=>ha(e.map(t=>t.toString())).join(`\r
`),split:e=>e.split(`\r
`),parse:e=>U1.split(e).filter(t=>!t.startsWith("#"))}),Jq=new Uint32Array(10),c6;(function(e){e[e.InitialConsonant=4352]="InitialConsonant",e[e.Vowel=4449]="Vowel",e[e.FinalConsonant=4520]="FinalConsonant",e[e.CompatibilityJamo=12593]="CompatibilityJamo"})(c6||(c6={}));var l6;(function(e){e[e.NUL=0]="NUL",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z"})(l6||(l6={}));var u6;(function(e){e[e.fa=24934]="fa",e[e.fg=26470]="fg",e[e.fq=29030]="fq",e[e.fr=29286]="fr",e[e.ft=29798]="ft",e[e.fv=30310]="fv",e[e.fx=30822]="fx",e[e.hk=27496]="hk",e[e.hl=27752]="hl",e[e.ho=28520]="ho",e[e.ml=27757]="ml",e[e.nj=27246]="nj",e[e.nl=27758]="nl",e[e.np=28782]="np",e[e.qt=29809]="qt",e[e.rt=29810]="rt",e[e.sg=26483]="sg",e[e.sw=30579]="sw"})(u6||(u6={}));var Qq=new Uint8Array([114,82,115,101,69,102,97,113,81,116,84,100,119,87,99,122,120,118,103]),Yq=new Uint16Array([107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]),Xq=new Uint16Array([114,82,29810,115,30579,26483,101,102,29286,24934,29030,29798,30822,30310,26470,97,113,29809,116,84,100,119,99,122,120,118,103]),Zq=new Uint16Array([114,82,29810,115,30579,26483,101,69,102,29286,24934,29030,29798,30822,30310,26470,97,113,81,29809,116,84,100,119,87,99,122,120,118,103,107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]);function h6(...e){return function(t,i){for(let r=0,s=e.length;r<s;r++){const n=e[r](t,i);if(n)return n}return null}}var Kq=d6.bind(void 0,!1),_1=d6.bind(void 0,!0);function d6(e,t,i){if(!i||i.length<t.length)return null;let r;return e?r=ed(i,t):r=i.indexOf(t)===0,r?t.length>0?[{start:0,end:t.length}]:[]:null}function SL(e,t){const i=t.toLowerCase().indexOf(e.toLowerCase());return i===-1?null:[{start:i,end:i+e.length}]}function xL(e,t){return j1(e.toLowerCase(),t.toLowerCase(),0,0)}function j1(e,t,i,r){if(i===e.length)return[];if(r===t.length)return null;if(e[i]===t[r]){let s=null;return(s=j1(e,t,i+1,r+1))?p6({start:r,end:r+1},s):null}return j1(e,t,i,r+1)}function H1(e){return 97<=e&&e<=122}function El(e){return 65<=e&&e<=90}function B1(e){return 48<=e&&e<=57}function kL(e){return e===32||e===9||e===10||e===13}var $L=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(e=>$L.add(e.charCodeAt(0)));function f6(e){return H1(e)||El(e)||B1(e)}function p6(e,t){return t.length===0?t=[e]:e.end===t[0].start?t[0].start=e.start:t.unshift(e),t}function g6(e,t){for(let i=t;i<e.length;i++){const r=e.charCodeAt(i);if(El(r)||B1(r)||i>0&&!f6(e.charCodeAt(i-1)))return i}return e.length}function W1(e,t,i,r){if(i===e.length)return[];if(r===t.length)return null;if(e[i]!==t[r].toLowerCase())return null;{let s=null,n=r+1;for(s=W1(e,t,i+1,r+1);!s&&(n=g6(t,n))<t.length;)s=W1(e,t,i+1,n),n++;return s===null?null:p6({start:r,end:r+1},s)}}function CL(e){let t=0,i=0,r=0,s=0,n=0;for(let u=0;u<e.length;u++)n=e.charCodeAt(u),El(n)&&t++,H1(n)&&i++,f6(n)&&r++,B1(n)&&s++;const o=t/e.length,a=i/e.length,c=r/e.length,l=s/e.length;return{upperPercent:o,lowerPercent:a,alphaPercent:c,numericPercent:l}}function IL(e){const{upperPercent:t,lowerPercent:i}=e;return i===0&&t>.6}function PL(e){const{upperPercent:t,lowerPercent:i,alphaPercent:r,numericPercent:s}=e;return i>.2&&t<.8&&r>.6&&s<.2}function DL(e){let t=0,i=0,r=0,s=0;for(let n=0;n<e.length;n++)r=e.charCodeAt(n),El(r)&&t++,H1(r)&&i++,kL(r)&&s++;return(t===0||i===0)&&s===0?e.length<=30:t<=5}function m6(e,t){if(!t||(t=t.trim(),t.length===0)||!DL(e))return null;t.length>60&&(t=t.substring(0,60));const i=CL(t);if(!PL(i)){if(!IL(i))return null;t=t.toLowerCase()}let r=null,s=0;for(e=e.toLowerCase();s<t.length&&(r=W1(e,t,0,s))===null;)s=g6(t,s+1);return r}var eG=h6(_1,m6,SL),tG=h6(_1,m6,xL),iG=new Xc(1e4),Cd=128;function z1(){const e=[],t=[];for(let i=0;i<=Cd;i++)t[i]=0;for(let i=0;i<=Cd;i++)e.push(t.slice(0));return e}function v6(e){const t=[];for(let i=0;i<=e;i++)t[i]=0;return t}var rG=v6(2*Cd),sG=v6(2*Cd),nG=z1(),oG=z1(),aG=z1(),w6;(function(e){e[e.Diag=1]="Diag",e[e.Left=2]="Left",e[e.LeftLeft=3]="LeftLeft"})(w6||(w6={}));var b6;(function(e){e.Default=[-100,0];function t(i){return!i||i.length===2&&i[0]===-100&&i[1]===0}e.isDefault=t})(b6||(b6={}));var cG=class{static{this.default={boostFullMatch:!0,firstMatchCanBeWeak:!1}}constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}},V1=Object.create(null);function m(e,t){if(De(t)){const i=V1[t];if(i===void 0)throw new Error(`${e} references an unknown codicon: ${t}`);t=i}return V1[e]=t,{id:e}}function AL(){return V1}var RL={add:m("add",6e4),plus:m("plus",6e4),gistNew:m("gist-new",6e4),repoCreate:m("repo-create",6e4),lightbulb:m("lightbulb",60001),lightBulb:m("light-bulb",60001),repo:m("repo",60002),repoDelete:m("repo-delete",60002),gistFork:m("gist-fork",60003),repoForked:m("repo-forked",60003),gitPullRequest:m("git-pull-request",60004),gitPullRequestAbandoned:m("git-pull-request-abandoned",60004),recordKeys:m("record-keys",60005),keyboard:m("keyboard",60005),tag:m("tag",60006),gitPullRequestLabel:m("git-pull-request-label",60006),tagAdd:m("tag-add",60006),tagRemove:m("tag-remove",60006),person:m("person",60007),personFollow:m("person-follow",60007),personOutline:m("person-outline",60007),personFilled:m("person-filled",60007),gitBranch:m("git-branch",60008),gitBranchCreate:m("git-branch-create",60008),gitBranchDelete:m("git-branch-delete",60008),sourceControl:m("source-control",60008),mirror:m("mirror",60009),mirrorPublic:m("mirror-public",60009),star:m("star",60010),starAdd:m("star-add",60010),starDelete:m("star-delete",60010),starEmpty:m("star-empty",60010),comment:m("comment",60011),commentAdd:m("comment-add",60011),alert:m("alert",60012),warning:m("warning",60012),search:m("search",60013),searchSave:m("search-save",60013),logOut:m("log-out",60014),signOut:m("sign-out",60014),logIn:m("log-in",60015),signIn:m("sign-in",60015),eye:m("eye",60016),eyeUnwatch:m("eye-unwatch",60016),eyeWatch:m("eye-watch",60016),circleFilled:m("circle-filled",60017),primitiveDot:m("primitive-dot",60017),closeDirty:m("close-dirty",60017),debugBreakpoint:m("debug-breakpoint",60017),debugBreakpointDisabled:m("debug-breakpoint-disabled",60017),debugHint:m("debug-hint",60017),terminalDecorationSuccess:m("terminal-decoration-success",60017),primitiveSquare:m("primitive-square",60018),edit:m("edit",60019),pencil:m("pencil",60019),info:m("info",60020),issueOpened:m("issue-opened",60020),gistPrivate:m("gist-private",60021),gitForkPrivate:m("git-fork-private",60021),lock:m("lock",60021),mirrorPrivate:m("mirror-private",60021),close:m("close",60022),removeClose:m("remove-close",60022),x:m("x",60022),repoSync:m("repo-sync",60023),sync:m("sync",60023),clone:m("clone",60024),desktopDownload:m("desktop-download",60024),beaker:m("beaker",60025),microscope:m("microscope",60025),vm:m("vm",60026),deviceDesktop:m("device-desktop",60026),file:m("file",60027),fileText:m("file-text",60027),more:m("more",60028),ellipsis:m("ellipsis",60028),kebabHorizontal:m("kebab-horizontal",60028),mailReply:m("mail-reply",60029),reply:m("reply",60029),organization:m("organization",60030),organizationFilled:m("organization-filled",60030),organizationOutline:m("organization-outline",60030),newFile:m("new-file",60031),fileAdd:m("file-add",60031),newFolder:m("new-folder",60032),fileDirectoryCreate:m("file-directory-create",60032),trash:m("trash",60033),trashcan:m("trashcan",60033),history:m("history",60034),clock:m("clock",60034),folder:m("folder",60035),fileDirectory:m("file-directory",60035),symbolFolder:m("symbol-folder",60035),logoGithub:m("logo-github",60036),markGithub:m("mark-github",60036),github:m("github",60036),terminal:m("terminal",60037),console:m("console",60037),repl:m("repl",60037),zap:m("zap",60038),symbolEvent:m("symbol-event",60038),error:m("error",60039),stop:m("stop",60039),variable:m("variable",60040),symbolVariable:m("symbol-variable",60040),array:m("array",60042),symbolArray:m("symbol-array",60042),symbolModule:m("symbol-module",60043),symbolPackage:m("symbol-package",60043),symbolNamespace:m("symbol-namespace",60043),symbolObject:m("symbol-object",60043),symbolMethod:m("symbol-method",60044),symbolFunction:m("symbol-function",60044),symbolConstructor:m("symbol-constructor",60044),symbolBoolean:m("symbol-boolean",60047),symbolNull:m("symbol-null",60047),symbolNumeric:m("symbol-numeric",60048),symbolNumber:m("symbol-number",60048),symbolStructure:m("symbol-structure",60049),symbolStruct:m("symbol-struct",60049),symbolParameter:m("symbol-parameter",60050),symbolTypeParameter:m("symbol-type-parameter",60050),symbolKey:m("symbol-key",60051),symbolText:m("symbol-text",60051),symbolReference:m("symbol-reference",60052),goToFile:m("go-to-file",60052),symbolEnum:m("symbol-enum",60053),symbolValue:m("symbol-value",60053),symbolRuler:m("symbol-ruler",60054),symbolUnit:m("symbol-unit",60054),activateBreakpoints:m("activate-breakpoints",60055),archive:m("archive",60056),arrowBoth:m("arrow-both",60057),arrowDown:m("arrow-down",60058),arrowLeft:m("arrow-left",60059),arrowRight:m("arrow-right",60060),arrowSmallDown:m("arrow-small-down",60061),arrowSmallLeft:m("arrow-small-left",60062),arrowSmallRight:m("arrow-small-right",60063),arrowSmallUp:m("arrow-small-up",60064),arrowUp:m("arrow-up",60065),bell:m("bell",60066),bold:m("bold",60067),book:m("book",60068),bookmark:m("bookmark",60069),debugBreakpointConditionalUnverified:m("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:m("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:m("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:m("debug-breakpoint-data-unverified",60072),debugBreakpointData:m("debug-breakpoint-data",60073),debugBreakpointDataDisabled:m("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:m("debug-breakpoint-log-unverified",60074),debugBreakpointLog:m("debug-breakpoint-log",60075),debugBreakpointLogDisabled:m("debug-breakpoint-log-disabled",60075),briefcase:m("briefcase",60076),broadcast:m("broadcast",60077),browser:m("browser",60078),bug:m("bug",60079),calendar:m("calendar",60080),caseSensitive:m("case-sensitive",60081),check:m("check",60082),checklist:m("checklist",60083),chevronDown:m("chevron-down",60084),chevronLeft:m("chevron-left",60085),chevronRight:m("chevron-right",60086),chevronUp:m("chevron-up",60087),chromeClose:m("chrome-close",60088),chromeMaximize:m("chrome-maximize",60089),chromeMinimize:m("chrome-minimize",60090),chromeRestore:m("chrome-restore",60091),circleOutline:m("circle-outline",60092),circle:m("circle",60092),debugBreakpointUnverified:m("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:m("terminal-decoration-incomplete",60092),circleSlash:m("circle-slash",60093),circuitBoard:m("circuit-board",60094),clearAll:m("clear-all",60095),clippy:m("clippy",60096),closeAll:m("close-all",60097),cloudDownload:m("cloud-download",60098),cloudUpload:m("cloud-upload",60099),code:m("code",60100),collapseAll:m("collapse-all",60101),colorMode:m("color-mode",60102),commentDiscussion:m("comment-discussion",60103),creditCard:m("credit-card",60105),dash:m("dash",60108),dashboard:m("dashboard",60109),database:m("database",60110),debugContinue:m("debug-continue",60111),debugDisconnect:m("debug-disconnect",60112),debugPause:m("debug-pause",60113),debugRestart:m("debug-restart",60114),debugStart:m("debug-start",60115),debugStepInto:m("debug-step-into",60116),debugStepOut:m("debug-step-out",60117),debugStepOver:m("debug-step-over",60118),debugStop:m("debug-stop",60119),debug:m("debug",60120),deviceCameraVideo:m("device-camera-video",60121),deviceCamera:m("device-camera",60122),deviceMobile:m("device-mobile",60123),diffAdded:m("diff-added",60124),diffIgnored:m("diff-ignored",60125),diffModified:m("diff-modified",60126),diffRemoved:m("diff-removed",60127),diffRenamed:m("diff-renamed",60128),diff:m("diff",60129),diffSidebyside:m("diff-sidebyside",60129),discard:m("discard",60130),editorLayout:m("editor-layout",60131),emptyWindow:m("empty-window",60132),exclude:m("exclude",60133),extensions:m("extensions",60134),eyeClosed:m("eye-closed",60135),fileBinary:m("file-binary",60136),fileCode:m("file-code",60137),fileMedia:m("file-media",60138),filePdf:m("file-pdf",60139),fileSubmodule:m("file-submodule",60140),fileSymlinkDirectory:m("file-symlink-directory",60141),fileSymlinkFile:m("file-symlink-file",60142),fileZip:m("file-zip",60143),files:m("files",60144),filter:m("filter",60145),flame:m("flame",60146),foldDown:m("fold-down",60147),foldUp:m("fold-up",60148),fold:m("fold",60149),folderActive:m("folder-active",60150),folderOpened:m("folder-opened",60151),gear:m("gear",60152),gift:m("gift",60153),gistSecret:m("gist-secret",60154),gist:m("gist",60155),gitCommit:m("git-commit",60156),gitCompare:m("git-compare",60157),compareChanges:m("compare-changes",60157),gitMerge:m("git-merge",60158),githubAction:m("github-action",60159),githubAlt:m("github-alt",60160),globe:m("globe",60161),grabber:m("grabber",60162),graph:m("graph",60163),gripper:m("gripper",60164),heart:m("heart",60165),home:m("home",60166),horizontalRule:m("horizontal-rule",60167),hubot:m("hubot",60168),inbox:m("inbox",60169),issueReopened:m("issue-reopened",60171),issues:m("issues",60172),italic:m("italic",60173),jersey:m("jersey",60174),json:m("json",60175),kebabVertical:m("kebab-vertical",60176),key:m("key",60177),law:m("law",60178),lightbulbAutofix:m("lightbulb-autofix",60179),linkExternal:m("link-external",60180),link:m("link",60181),listOrdered:m("list-ordered",60182),listUnordered:m("list-unordered",60183),liveShare:m("live-share",60184),loading:m("loading",60185),location:m("location",60186),mailRead:m("mail-read",60187),mail:m("mail",60188),markdown:m("markdown",60189),megaphone:m("megaphone",60190),mention:m("mention",60191),milestone:m("milestone",60192),gitPullRequestMilestone:m("git-pull-request-milestone",60192),mortarBoard:m("mortar-board",60193),move:m("move",60194),multipleWindows:m("multiple-windows",60195),mute:m("mute",60196),noNewline:m("no-newline",60197),note:m("note",60198),octoface:m("octoface",60199),openPreview:m("open-preview",60200),package:m("package",60201),paintcan:m("paintcan",60202),pin:m("pin",60203),play:m("play",60204),run:m("run",60204),plug:m("plug",60205),preserveCase:m("preserve-case",60206),preview:m("preview",60207),project:m("project",60208),pulse:m("pulse",60209),question:m("question",60210),quote:m("quote",60211),radioTower:m("radio-tower",60212),reactions:m("reactions",60213),references:m("references",60214),refresh:m("refresh",60215),regex:m("regex",60216),remoteExplorer:m("remote-explorer",60217),remote:m("remote",60218),remove:m("remove",60219),replaceAll:m("replace-all",60220),replace:m("replace",60221),repoClone:m("repo-clone",60222),repoForcePush:m("repo-force-push",60223),repoPull:m("repo-pull",60224),repoPush:m("repo-push",60225),report:m("report",60226),requestChanges:m("request-changes",60227),rocket:m("rocket",60228),rootFolderOpened:m("root-folder-opened",60229),rootFolder:m("root-folder",60230),rss:m("rss",60231),ruby:m("ruby",60232),saveAll:m("save-all",60233),saveAs:m("save-as",60234),save:m("save",60235),screenFull:m("screen-full",60236),screenNormal:m("screen-normal",60237),searchStop:m("search-stop",60238),server:m("server",60240),settingsGear:m("settings-gear",60241),settings:m("settings",60242),shield:m("shield",60243),smiley:m("smiley",60244),sortPrecedence:m("sort-precedence",60245),splitHorizontal:m("split-horizontal",60246),splitVertical:m("split-vertical",60247),squirrel:m("squirrel",60248),starFull:m("star-full",60249),starHalf:m("star-half",60250),symbolClass:m("symbol-class",60251),symbolColor:m("symbol-color",60252),symbolConstant:m("symbol-constant",60253),symbolEnumMember:m("symbol-enum-member",60254),symbolField:m("symbol-field",60255),symbolFile:m("symbol-file",60256),symbolInterface:m("symbol-interface",60257),symbolKeyword:m("symbol-keyword",60258),symbolMisc:m("symbol-misc",60259),symbolOperator:m("symbol-operator",60260),symbolProperty:m("symbol-property",60261),wrench:m("wrench",60261),wrenchSubaction:m("wrench-subaction",60261),symbolSnippet:m("symbol-snippet",60262),tasklist:m("tasklist",60263),telescope:m("telescope",60264),textSize:m("text-size",60265),threeBars:m("three-bars",60266),thumbsdown:m("thumbsdown",60267),thumbsup:m("thumbsup",60268),tools:m("tools",60269),triangleDown:m("triangle-down",60270),triangleLeft:m("triangle-left",60271),triangleRight:m("triangle-right",60272),triangleUp:m("triangle-up",60273),twitter:m("twitter",60274),unfold:m("unfold",60275),unlock:m("unlock",60276),unmute:m("unmute",60277),unverified:m("unverified",60278),verified:m("verified",60279),versions:m("versions",60280),vmActive:m("vm-active",60281),vmOutline:m("vm-outline",60282),vmRunning:m("vm-running",60283),watch:m("watch",60284),whitespace:m("whitespace",60285),wholeWord:m("whole-word",60286),window:m("window",60287),wordWrap:m("word-wrap",60288),zoomIn:m("zoom-in",60289),zoomOut:m("zoom-out",60290),listFilter:m("list-filter",60291),listFlat:m("list-flat",60292),listSelection:m("list-selection",60293),selection:m("selection",60293),listTree:m("list-tree",60294),debugBreakpointFunctionUnverified:m("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:m("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:m("debug-breakpoint-function-disabled",60296),debugStackframeActive:m("debug-stackframe-active",60297),circleSmallFilled:m("circle-small-filled",60298),debugStackframeDot:m("debug-stackframe-dot",60298),terminalDecorationMark:m("terminal-decoration-mark",60298),debugStackframe:m("debug-stackframe",60299),debugStackframeFocused:m("debug-stackframe-focused",60299),debugBreakpointUnsupported:m("debug-breakpoint-unsupported",60300),symbolString:m("symbol-string",60301),debugReverseContinue:m("debug-reverse-continue",60302),debugStepBack:m("debug-step-back",60303),debugRestartFrame:m("debug-restart-frame",60304),debugAlt:m("debug-alt",60305),callIncoming:m("call-incoming",60306),callOutgoing:m("call-outgoing",60307),menu:m("menu",60308),expandAll:m("expand-all",60309),feedback:m("feedback",60310),gitPullRequestReviewer:m("git-pull-request-reviewer",60310),groupByRefType:m("group-by-ref-type",60311),ungroupByRefType:m("ungroup-by-ref-type",60312),account:m("account",60313),gitPullRequestAssignee:m("git-pull-request-assignee",60313),bellDot:m("bell-dot",60314),debugConsole:m("debug-console",60315),library:m("library",60316),output:m("output",60317),runAll:m("run-all",60318),syncIgnored:m("sync-ignored",60319),pinned:m("pinned",60320),githubInverted:m("github-inverted",60321),serverProcess:m("server-process",60322),serverEnvironment:m("server-environment",60323),pass:m("pass",60324),issueClosed:m("issue-closed",60324),stopCircle:m("stop-circle",60325),playCircle:m("play-circle",60326),record:m("record",60327),debugAltSmall:m("debug-alt-small",60328),vmConnect:m("vm-connect",60329),cloud:m("cloud",60330),merge:m("merge",60331),export:m("export",60332),graphLeft:m("graph-left",60333),magnet:m("magnet",60334),notebook:m("notebook",60335),redo:m("redo",60336),checkAll:m("check-all",60337),pinnedDirty:m("pinned-dirty",60338),passFilled:m("pass-filled",60339),circleLargeFilled:m("circle-large-filled",60340),circleLarge:m("circle-large",60341),circleLargeOutline:m("circle-large-outline",60341),combine:m("combine",60342),gather:m("gather",60342),table:m("table",60343),variableGroup:m("variable-group",60344),typeHierarchy:m("type-hierarchy",60345),typeHierarchySub:m("type-hierarchy-sub",60346),typeHierarchySuper:m("type-hierarchy-super",60347),gitPullRequestCreate:m("git-pull-request-create",60348),runAbove:m("run-above",60349),runBelow:m("run-below",60350),notebookTemplate:m("notebook-template",60351),debugRerun:m("debug-rerun",60352),workspaceTrusted:m("workspace-trusted",60353),workspaceUntrusted:m("workspace-untrusted",60354),workspaceUnknown:m("workspace-unknown",60355),terminalCmd:m("terminal-cmd",60356),terminalDebian:m("terminal-debian",60357),terminalLinux:m("terminal-linux",60358),terminalPowershell:m("terminal-powershell",60359),terminalTmux:m("terminal-tmux",60360),terminalUbuntu:m("terminal-ubuntu",60361),terminalBash:m("terminal-bash",60362),arrowSwap:m("arrow-swap",60363),copy:m("copy",60364),personAdd:m("person-add",60365),filterFilled:m("filter-filled",60366),wand:m("wand",60367),debugLineByLine:m("debug-line-by-line",60368),inspect:m("inspect",60369),layers:m("layers",60370),layersDot:m("layers-dot",60371),layersActive:m("layers-active",60372),compass:m("compass",60373),compassDot:m("compass-dot",60374),compassActive:m("compass-active",60375),azure:m("azure",60376),issueDraft:m("issue-draft",60377),gitPullRequestClosed:m("git-pull-request-closed",60378),gitPullRequestDraft:m("git-pull-request-draft",60379),debugAll:m("debug-all",60380),debugCoverage:m("debug-coverage",60381),runErrors:m("run-errors",60382),folderLibrary:m("folder-library",60383),debugContinueSmall:m("debug-continue-small",60384),beakerStop:m("beaker-stop",60385),graphLine:m("graph-line",60386),graphScatter:m("graph-scatter",60387),pieChart:m("pie-chart",60388),bracket:m("bracket",60175),bracketDot:m("bracket-dot",60389),bracketError:m("bracket-error",60390),lockSmall:m("lock-small",60391),azureDevops:m("azure-devops",60392),verifiedFilled:m("verified-filled",60393),newline:m("newline",60394),layout:m("layout",60395),layoutActivitybarLeft:m("layout-activitybar-left",60396),layoutActivitybarRight:m("layout-activitybar-right",60397),layoutPanelLeft:m("layout-panel-left",60398),layoutPanelCenter:m("layout-panel-center",60399),layoutPanelJustify:m("layout-panel-justify",60400),layoutPanelRight:m("layout-panel-right",60401),layoutPanel:m("layout-panel",60402),layoutSidebarLeft:m("layout-sidebar-left",60403),layoutSidebarRight:m("layout-sidebar-right",60404),layoutStatusbar:m("layout-statusbar",60405),layoutMenubar:m("layout-menubar",60406),layoutCentered:m("layout-centered",60407),target:m("target",60408),indent:m("indent",60409),recordSmall:m("record-small",60410),errorSmall:m("error-small",60411),terminalDecorationError:m("terminal-decoration-error",60411),arrowCircleDown:m("arrow-circle-down",60412),arrowCircleLeft:m("arrow-circle-left",60413),arrowCircleRight:m("arrow-circle-right",60414),arrowCircleUp:m("arrow-circle-up",60415),layoutSidebarRightOff:m("layout-sidebar-right-off",60416),layoutPanelOff:m("layout-panel-off",60417),layoutSidebarLeftOff:m("layout-sidebar-left-off",60418),blank:m("blank",60419),heartFilled:m("heart-filled",60420),map:m("map",60421),mapHorizontal:m("map-horizontal",60421),foldHorizontal:m("fold-horizontal",60421),mapFilled:m("map-filled",60422),mapHorizontalFilled:m("map-horizontal-filled",60422),foldHorizontalFilled:m("fold-horizontal-filled",60422),circleSmall:m("circle-small",60423),bellSlash:m("bell-slash",60424),bellSlashDot:m("bell-slash-dot",60425),commentUnresolved:m("comment-unresolved",60426),gitPullRequestGoToChanges:m("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:m("git-pull-request-new-changes",60428),searchFuzzy:m("search-fuzzy",60429),commentDraft:m("comment-draft",60430),send:m("send",60431),sparkle:m("sparkle",60432),insert:m("insert",60433),mic:m("mic",60434),thumbsdownFilled:m("thumbsdown-filled",60435),thumbsupFilled:m("thumbsup-filled",60436),coffee:m("coffee",60437),snake:m("snake",60438),game:m("game",60439),vr:m("vr",60440),chip:m("chip",60441),piano:m("piano",60442),music:m("music",60443),micFilled:m("mic-filled",60444),repoFetch:m("repo-fetch",60445),copilot:m("copilot",60446),lightbulbSparkle:m("lightbulb-sparkle",60447),robot:m("robot",60448),sparkleFilled:m("sparkle-filled",60449),diffSingle:m("diff-single",60450),diffMultiple:m("diff-multiple",60451),surroundWith:m("surround-with",60452),share:m("share",60453),gitStash:m("git-stash",60454),gitStashApply:m("git-stash-apply",60455),gitStashPop:m("git-stash-pop",60456),vscode:m("vscode",60457),vscodeInsiders:m("vscode-insiders",60458),codeOss:m("code-oss",60459),runCoverage:m("run-coverage",60460),runAllCoverage:m("run-all-coverage",60461),coverage:m("coverage",60462),githubProject:m("github-project",60463),mapVertical:m("map-vertical",60464),foldVertical:m("fold-vertical",60464),mapVerticalFilled:m("map-vertical-filled",60465),foldVerticalFilled:m("fold-vertical-filled",60465),goToSearch:m("go-to-search",60466),percentage:m("percentage",60467),sortPercentage:m("sort-percentage",60467),attach:m("attach",60468),goToEditingSession:m("go-to-editing-session",60469),editSession:m("edit-session",60470),codeReview:m("code-review",60471)},TL=e=>({iCubeAIBulb:e("icube-AIBulb",2e4),iCubeAIExplain:e("icube-AIExplain",20001),iCubeAIStar:e("icube-AIStar",20002),iCubeAISum:e("icube-AISum",20003),iCubeAIWrite:e("icube-AIWrite",20004),iCubeAddFile:e("icube-AddFile",20005),iCubeAddFolder:e("icube-AddFolder",20006),iCubeAddMember:e("icube-AddMember",20007),iCubeAddToTerminal:e("icube-AddToTerminal",20008),iCubeAi:e("icube-Ai",20009),iCubeAiAssistantText:e("icube-AiAssistantText",20010),iCubeAiColor:e("icube-AiColor",20011),iCubeAiColorful:e("icube-AiColorful",20012),iCubeAiSimple:e("icube-AiSimple",20013),iCubeAiSimple2:e("icube-AiSimple2",20014),iCubeAiSlashDoc:e("icube-AiSlashDoc",20015),iCubeAiSlashExplain:e("icube-AiSlashExplain",20016),iCubeAiSlashTest:e("icube-AiSlashTest",20017),iCubeAiStars:e("icube-AiStars",20018),iCubeAltN:e("icube-AltN",20019),iCubeAltY:e("icube-AltY",20020),iCubeArrowUpDown:e("icube-ArrowUpDown",20021),iCubeBackSpace:e("icube-BackSpace",20022),iCubeBranch:e("icube-Branch",20023),iCubeBranchSimple:e("icube-BranchSimple",20024),iCubeBubleTooltipFill:e("icube-BubleTooltipFill",20025),iCubeChatSessionIcon:e("icube-ChatSessionIcon",20026),iCubeCheck:e("icube-Check",20027),iCubeClean:e("icube-Clean",20028),iCubeClose:e("icube-Close",20029),iCubeCloseAll:e("icube-CloseAll",20030),iCubeCloseCircleFill:e("icube-CloseCircleFill",20031),iCubeCloseCircleSeriousFill:e("icube-CloseCircleSeriousFill",20032),iCubeCloseSimple:e("icube-CloseSimple",20033),iCubeCollapseAll:e("icube-CollapseAll",20034),iCubeCommand:e("icube-Command",20035),iCubeCommandArrowUpDown:e("icube-CommandArrowUpDown",20036),iCubeCommandBackSpace:e("icube-CommandBackSpace",20037),iCubeCommandEnter:e("icube-CommandEnter",20038),iCubeCommandK:e("icube-CommandK",20039),iCubeCommandL:e("icube-CommandL",20040),iCubeCommandN:e("icube-CommandN",20041),iCubeCommandSmall:e("icube-CommandSmall",20042),iCubeCommandY:e("icube-CommandY",20043),iCubeCompass:e("icube-Compass",20044),iCubeContextLines:e("icube-ContextLines",20045),iCubeContract:e("icube-Contract",20046),iCubeCopy:e("icube-Copy",20047),iCubeCreateFile:e("icube-CreateFile",20048),iCubeCreateFunction:e("icube-CreateFunction",20049),iCubeCtrlN:e("icube-CtrlN",20050),iCubeCtrlY:e("icube-CtrlY",20051),iCubeDebug:e("icube-Debug",20052),iCubeDebugFill:e("icube-DebugFill",20053),iCubeDelete:e("icube-Delete",20054),iCubeDelete2:e("icube-Delete2",20055),iCubeDeploy:e("icube-Deploy",20056),iCubeDescendingSorting:e("icube-DescendingSorting",20057),iCubeDiff:e("icube-Diff",20058),iCubeDock:e("icube-Dock",20059),iCubeDocumentFeedback:e("icube-DocumentFeedback",20060),iCubeDown:e("icube-Down",20061),iCubeDragDot:e("icube-DragDot",20062),iCubeESC:e("icube-ESC",20063),iCubeEdit:e("icube-Edit",20064),iCubeEnter:e("icube-Enter",20065),iCubeError:e("icube-Error",20066),iCubeErrorSimple:e("icube-ErrorSimple",20067),iCubeExpandAll:e("icube-ExpandAll",20068),iCubeFilter:e("icube-Filter",20069),iCubeFilterLine:e("icube-FilterLine",20070),iCubeFolder:e("icube-Folder",20071),iCubeFollowupArrawRight:e("icube-FollowupArrawRight",20072),iCubeFont:e("icube-Font",20073),iCubeFrame:e("icube-Frame",20074),iCubeGit:e("icube-Git",20075),iCubeGroupChat:e("icube-GroupChat",20076),iCubeHelp:e("icube-Help",20077),iCubeHistory:e("icube-History",20078),iCubeHome:e("icube-Home",20079),iCubeICubeIconNew:e("icube-ICubeIconNew",20080),iCubeInfo:e("icube-Info",20081),iCubeInfoCircleFill:e("icube-InfoCircleFill",20082),iCubeInformationSimple:e("icube-InformationSimple",20083),iCubeInsert:e("icube-Insert",20084),iCubeKeyboardShortcut:e("icube-KeyboardShortcut",20085),iCubeLeft:e("icube-Left",20086),iCubeLike:e("icube-Like",20087),iCubeLikeFill:e("icube-LikeFill",20088),iCubeLink:e("icube-Link",20089),iCubeLock:e("icube-Lock",20090),iCubeLogo:e("icube-Logo",20091),iCubeLogoFull:e("icube-LogoFull",20092),iCubeLogoNew:e("icube-LogoNew",20093),iCubeLogoText:e("icube-LogoText",20094),iCubeLogoTrae:e("icube-LogoTrae",20095),iCubeMore:e("icube-More",20096),iCubeMoreSimple:e("icube-MoreSimple",20097),iCubeNewChat:e("icube-NewChat",20098),iCubeNotification:e("icube-Notification",20099),iCubeOpenFile:e("icube-OpenFile",20100),iCubeOpenFile2:e("icube-OpenFile2",20101),iCubeOption:e("icube-Option",20102),iCubeOptionN:e("icube-OptionN",20103),iCubeOptionY:e("icube-OptionY",20104),iCubePanelLayoutIcon:e("icube-PanelLayoutIcon",20105),iCubePanelLayoutIconOff:e("icube-PanelLayoutIconOff",20106),iCubePanelLeft:e("icube-PanelLeft",20107),iCubePanelLeftOff:e("icube-PanelLeftOff",20108),iCubePanelRight:e("icube-PanelRight",20109),iCubePanelRightOff:e("icube-PanelRightOff",20110),iCubePlay:e("icube-Play",20111),iCubePlayFill:e("icube-PlayFill",20112),iCubePlus:e("icube-Plus",20113),iCubePlusCircle:e("icube-PlusCircle",20114),iCubePlusFilled:e("icube-PlusFilled",20115),iCubePlusSimple:e("icube-PlusSimple",20116),iCubePoint:e("icube-Point",20117),iCubePreserveCase:e("icube-PreserveCase",20118),iCubePreview:e("icube-Preview",20119),iCubeProAppstore:e("icube-ProAppstore",20120),iCubeProCodesearch:e("icube-ProCodesearch",20121),iCubeProDebug:e("icube-ProDebug",20122),iCubeProFile:e("icube-ProFile",20123),iCubeProFolder:e("icube-ProFolder",20124),iCubeProSetting:e("icube-ProSetting",20125),iCubeProSourcecontrol:e("icube-ProSourcecontrol",20126),iCubeQuestionMarkCircle:e("icube-QuestionMarkCircle",20127),iCubeQuotaCpu:e("icube-QuotaCpu",20128),iCubeQuotaDisk:e("icube-QuotaDisk",20129),iCubeQuotaMemory:e("icube-QuotaMemory",20130),iCubeRecordStop:e("icube-RecordStop",20131),iCubeRefresh:e("icube-Refresh",20132),iCubeRegularExpression:e("icube-RegularExpression",20133),iCubeReplace:e("icube-Replace",20134),iCubeReplaceAll:e("icube-ReplaceAll",20135),iCubeRetry:e("icube-Retry",20136),iCubeRevert:e("icube-Revert",20137),iCubeRight:e("icube-Right",20138),iCubeRotateDevice:e("icube-RotateDevice",20139),iCubeSaveFile:e("icube-SaveFile",20140),iCubeSearch:e("icube-Search",20141),iCubeSearchCommand:e("icube-SearchCommand",20142),iCubeSearchFile:e("icube-SearchFile",20143),iCubeSearchText:e("icube-SearchText",20144),iCubeSelected:e("icube-Selected",20145),iCubeSend:e("icube-Send",20146),iCubeSendFill:e("icube-SendFill",20147),iCubeSettingIgnoreFiles:e("icube-SettingIgnoreFiles",20148),iCubeSettings:e("icube-Settings",20149),iCubeSlash:e("icube-Slash",20150),iCubeSplit:e("icube-Split",20151),iCubeStop:e("icube-Stop",20152),iCubeStopFill:e("icube-StopFill",20153),iCubeSuccessSimple:e("icube-SuccessSimple",20154),iCubeSymbol:e("icube-Symbol",20155),iCubeTab:e("icube-Tab",20156),iCubeTable:e("icube-Table",20157),iCubeTerminal:e("icube-Terminal",20158),iCubeTerminalAddToTerminal:e("icube-TerminalAddToTerminal",20159),iCubeTerminalRun:e("icube-TerminalRun",20160),iCubeThumbDown:e("icube-ThumbDown",20161),iCubeThumbDownFull:e("icube-ThumbDownFull",20162),iCubeThumbUp:e("icube-ThumbUp",20163),iCubeThumbUpFull:e("icube-ThumbUpFull",20164),iCubeThumbUpSimple:e("icube-ThumbUpSimple",20165),iCubeTree:e("icube-Tree",20166),iCubeUndo:e("icube-Undo",20167),iCubeUnlike:e("icube-Unlike",20168),iCubeUnlikeFill:e("icube-UnlikeFill",20169),iCubeUnlock:e("icube-Unlock",20170),iCubeUp:e("icube-Up",20171),iCubeView:e("icube-View",20172),iCubeViewBottom:e("icube-ViewBottom",20173),iCubeViewBottomLine:e("icube-ViewBottomLine",20174),iCubeViewCopy:e("icube-ViewCopy",20175),iCubeViewCopy2:e("icube-ViewCopy2",20176),iCubeViewFilled:e("icube-ViewFilled",20177),iCubeViewLeftLine:e("icube-ViewLeftLine",20178),iCubeViewOutline:e("icube-ViewOutline",20179),iCubeViewleft:e("icube-Viewleft",20180),iCubeWarningFill:e("icube-WarningFill",20181),iCubeWarningSimple:e("icube-WarningSimple",20182)}),LL={dialogError:m("dialog-error","error"),dialogWarning:m("dialog-warning","warning"),dialogInfo:m("dialog-info","info"),dialogClose:m("dialog-close","close"),treeFilterOnTypeOn:m("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:m("tree-filter-on-type-off","list-selection"),treeFilterClear:m("tree-filter-clear","close"),treeItemLoading:m("tree-item-loading","loading"),menuSelection:m("menu-selection","check"),menuBarMore:m("menubar-more","more"),scrollbarButtonLeft:m("scrollbar-button-left","triangle-left"),scrollbarButtonRight:m("scrollbar-button-right","triangle-right"),scrollbarButtonUp:m("scrollbar-button-up","triangle-up"),scrollbarButtonDown:m("scrollbar-button-down","triangle-down"),toolBarMore:m("toolbar-more","more"),quickInputBack:m("quick-input-back","arrow-left"),dropDownButton:m("drop-down-button",60084),symbolCustomColor:m("symbol-customcolor",60252),exportIcon:m("export",60332),workspaceUnspecified:m("workspace-unspecified",60355),newLine:m("newline",60394),thumbsDownFilled:m("thumbsdown-filled",60435),thumbsUpFilled:m("thumbsup-filled",60436),gitFetch:m("git-fetch",60445),lightbulbSparkleAutofix:m("lightbulb-sparkle-autofix",60447),debugBreakpointPending:m("debug-breakpoint-pending",60377),...TL(m),treeItemExpanded:m("tree-item-expanded","icube-Down"),menuSubmenu:m("menu-submenu","icube-Right"),openPreview:m("open-preview","icube-Preview")},oe={...RL,...LL},Ca;(function(e){function t(i){return i&&typeof i=="object"&&typeof i.id=="string"}e.isThemeColor=t})(Ca||(Ca={}));var ti;(function(e){e.iconNameSegment="[A-Za-z0-9]+",e.iconNameExpression="[A-Za-z0-9-]+",e.iconModifierExpression="~[A-Za-z]+",e.iconNameCharacter="[A-Za-z0-9~-]";const t=new RegExp(`^(${e.iconNameExpression})(${e.iconModifierExpression})?$`);function i(d){const f=t.exec(d.id);if(!f)return i(oe.error);const[,g,v]=f,y=["codicon","codicon-"+g];return v&&y.push("codicon-modifier-"+v.substring(1)),y}e.asClassNameArray=i;function r(d){return i(d).join(" ")}e.asClassName=r;function s(d){return"."+i(d).join(".")}e.asCSSSelector=s;function n(d){return d&&typeof d=="object"&&typeof d.id=="string"&&(typeof d.color>"u"||Ca.isThemeColor(d.color))}e.isThemeIcon=n;const o=new RegExp(`^\\$\\((${e.iconNameExpression}(?:${e.iconModifierExpression})?)\\)$`);function a(d){const f=o.exec(d);if(!f)return;const[,g]=f;return{id:g}}e.fromString=a;function c(d){return{id:d}}e.fromId=c;function l(d,f){let g=d.id;const v=g.lastIndexOf("~");return v!==-1&&(g=g.substring(0,v)),f&&(g=`${g}~${f}`),{id:g}}e.modify=l;function u(d){const f=d.id.lastIndexOf("~");if(f!==-1)return d.id.substring(f+1)}e.getModifier=u;function h(d,f){return d.id===f.id&&d.color?.id===f.color?.id}e.isEqual=h})(ti||(ti={}));var q1=new RegExp(`\\$\\(${ti.iconNameExpression}(?:${ti.iconModifierExpression})?\\)`,"g"),NL=new RegExp(`(\\\\)?${q1.source}`,"g");function OL(e){return e.replace(NL,(t,i)=>i?t:`\\${t}`)}var lG=new RegExp(`\\\\${q1.source}`,"g"),uG=new RegExp(`(\\s)?(\\\\)?${q1.source}(\\s)?`,"g"),hG=new RegExp(`\\$\\(${ti.iconNameCharacter}+\\)`,"g"),y6;(function(e){e[e.Paragraph=0]="Paragraph",e[e.Break=1]="Break"})(y6||(y6={}));var E6=class{constructor(e="",t=!1){if(this.value=e,typeof this.value!="string")throw $e("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=t.isTrusted??void 0,this.supportThemeIcons=t.supportThemeIcons??!1,this.supportHtml=t.supportHtml??!1)}appendText(e,t=0){return this.value+=FL(this.supportThemeIcons?OL(e):e).replace(/([ \t]+)/g,(i,r)=>"&nbsp;".repeat(r.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+=`
${ML(t,e)}
`,this}appendLink(e,t,i){return this.value+="[",this.value+=this.c(t,"]"),this.value+="](",this.value+=this.c(String(e),")"),i&&(this.value+=` "${this.c(this.c(i,'"'),")")}"`),this.value+=")",this}c(e,t){const i=new RegExp(un(t),"g");return e.replace(i,(r,s)=>e.charAt(s-1)!=="\\"?`\\${r}`:r)}};function po(e){return e instanceof E6?!0:e&&typeof e=="object"?typeof e.value=="string"&&(typeof e.isTrusted=="boolean"||typeof e.isTrusted=="object"||e.isTrusted===void 0)&&(typeof e.supportThemeIcons=="boolean"||e.supportThemeIcons===void 0):!1}function FL(e){return e.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function ML(e,t){const i=e.match(/^`+/gm)?.reduce((s,n)=>s.length>n.length?s:n).length??0,r=i>=3?i+1:3;return[`${"`".repeat(r)}${t}`,e,`${"`".repeat(r)}`].join(`
`)}function UL(e){const t=[],i=e.split("|").map(s=>s.trim());e=i[0];const r=i[1];if(r){const s=/height=(\d+)/.exec(r),n=/width=(\d+)/.exec(r),o=s?s[1]:"",a=n?n[1]:"",c=isFinite(parseInt(a)),l=isFinite(parseInt(o));c&&t.push(`width="${a}"`),l&&t.push(`height="${o}"`)}return{href:e,dimensions:t}}function G1(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var go=G1();function S6(e){go=e}var x6=/[&<>"']/,_L=new RegExp(x6.source,"g"),k6=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,jL=new RegExp(k6.source,"g"),HL={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},$6=e=>HL[e];function Ki(e,t){if(t){if(x6.test(e))return e.replace(_L,$6)}else if(k6.test(e))return e.replace(jL,$6);return e}var BL=/(^|[^\[])\^/g;function pt(e,t){let i=typeof e=="string"?e:e.source;t=t||"";const r={replace:(s,n)=>{let o=typeof n=="string"?n:n.source;return o=o.replace(BL,"$1"),i=i.replace(s,o),r},getRegex:()=>new RegExp(i,t)};return r}function C6(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}var Sl={exec:()=>null};function I6(e,t){const i=e.replace(/\|/g,(n,o,a)=>{let c=!1,l=o;for(;--l>=0&&a[l]==="\\";)c=!c;return c?"|":" |"}),r=i.split(/ \|/);let s=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),t)if(r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;s<r.length;s++)r[s]=r[s].trim().replace(/\\\|/g,"|");return r}function xl(e,t,i){const r=e.length;if(r===0)return"";let s=0;for(;s<r;){const n=e.charAt(r-s-1);if(n===t&&!i)s++;else if(n!==t&&i)s++;else break}return e.slice(0,r-s)}function WL(e,t){if(e.indexOf(t[1])===-1)return-1;let i=0;for(let r=0;r<e.length;r++)if(e[r]==="\\")r++;else if(e[r]===t[0])i++;else if(e[r]===t[1]&&(i--,i<0))return r;return-1}function P6(e,t,i,r){const s=t.href,n=t.title?Ki(t.title):null,o=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){r.state.inLink=!0;const a={type:"link",raw:i,href:s,title:n,text:o,tokens:r.inlineTokens(o)};return r.state.inLink=!1,a}return{type:"image",raw:i,href:s,title:n,text:Ki(o)}}function zL(e,t){const i=e.match(/^(\s+)(?:```)/);if(i===null)return t;const r=i[1];return t.split(`
`).map(s=>{const n=s.match(/^\s+/);if(n===null)return s;const[o]=n;return o.length>=r.length?s.slice(r.length):s}).join(`
`)}var Id=class{options;rules;lexer;constructor(e){this.options=e||go}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const i=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?i:xl(i,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const i=t[0],r=zL(i,t[3]||"");return{type:"code",raw:i,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:r}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let i=t[2].trim();if(/#$/.test(i)){const r=xl(i,"#");(this.options.pedantic||!r||/ $/.test(r))&&(i=r.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:xl(t[0],`
`)}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let i=xl(t[0],`
`).split(`
`),r="",s="";const n=[];for(;i.length>0;){let o=!1;const a=[];let c;for(c=0;c<i.length;c++)if(/^ {0,3}>/.test(i[c]))a.push(i[c]),o=!0;else if(!o)a.push(i[c]);else break;i=i.slice(c);const l=a.join(`
`),u=l.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");r=r?`${r}
${l}`:l,s=s?`${s}
${u}`:u;const h=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,n,!0),this.lexer.state.top=h,i.length===0)break;const d=n[n.length-1];if(d?.type==="code")break;if(d?.type==="blockquote"){const f=d,g=f.raw+`
`+i.join(`
`),v=this.blockquote(g);n[n.length-1]=v,r=r.substring(0,r.length-f.raw.length)+v.raw,s=s.substring(0,s.length-f.text.length)+v.text;break}else if(d?.type==="list"){const f=d,g=f.raw+`
`+i.join(`
`),v=this.list(g);n[n.length-1]=v,r=r.substring(0,r.length-d.raw.length)+v.raw,s=s.substring(0,s.length-f.raw.length)+v.raw,i=g.substring(n[n.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:n,text:s}}}list(e){let t=this.rules.block.list.exec(e);if(t){let i=t[1].trim();const r=i.length>1,s={type:"list",raw:"",ordered:r,start:r?+i.slice(0,-1):"",loose:!1,items:[]};i=r?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=r?i:"[*+-]");const n=new RegExp(`^( {0,3}${i})((?:[	 ][^\\n]*)?(?:\\n|$))`);let o=!1;for(;e;){let a=!1,c="",l="";if(!(t=n.exec(e))||this.rules.block.hr.test(e))break;c=t[0],e=e.substring(c.length);let u=t[2].split(`
`,1)[0].replace(/^\t+/,y=>" ".repeat(3*y.length)),h=e.split(`
`,1)[0],d=!u.trim(),f=0;if(this.options.pedantic?(f=2,l=u.trimStart()):d?f=t[1].length+1:(f=t[2].search(/[^ ]/),f=f>4?1:f,l=u.slice(f),f+=t[1].length),d&&/^ *$/.test(h)&&(c+=h+`
`,e=e.substring(h.length+1),a=!0),!a){const y=new RegExp(`^ {0,${Math.min(3,f-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),S=new RegExp(`^ {0,${Math.min(3,f-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),x=new RegExp(`^ {0,${Math.min(3,f-1)}}(?:\`\`\`|~~~)`),P=new RegExp(`^ {0,${Math.min(3,f-1)}}#`);for(;e;){const D=e.split(`
`,1)[0];if(h=D,this.options.pedantic&&(h=h.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),x.test(h)||P.test(h)||y.test(h)||S.test(e))break;if(h.search(/[^ ]/)>=f||!h.trim())l+=`
`+h.slice(f);else{if(d||u.search(/[^ ]/)>=4||x.test(u)||P.test(u)||S.test(u))break;l+=`
`+h}!d&&!h.trim()&&(d=!0),c+=D+`
`,e=e.substring(D.length+1),u=h.slice(f)}}s.loose||(o?s.loose=!0:/\n *\n *$/.test(c)&&(o=!0));let g=null,v;this.options.gfm&&(g=/^\[[ xX]\] /.exec(l),g&&(v=g[0]!=="[ ] ",l=l.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:c,task:!!g,checked:v,loose:!1,text:l,tokens:[]}),s.raw+=c}s.items[s.items.length-1].raw=s.items[s.items.length-1].raw.trimEnd(),s.items[s.items.length-1].text=s.items[s.items.length-1].text.trimEnd(),s.raw=s.raw.trimEnd();for(let a=0;a<s.items.length;a++)if(this.lexer.state.top=!1,s.items[a].tokens=this.lexer.blockTokens(s.items[a].text,[]),!s.loose){const c=s.items[a].tokens.filter(u=>u.type==="space"),l=c.length>0&&c.some(u=>/\n.*\n/.test(u.raw));s.loose=l}if(s.loose)for(let a=0;a<s.items.length;a++)s.items[a].loose=!0;return s}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const i=t[1].toLowerCase().replace(/\s+/g," "),r=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:i,raw:t[0],href:r,title:s}}}table(e){const t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;const i=I6(t[1]),r=t[2].replace(/^\||\| *$/g,"").split("|"),s=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],n={type:"table",raw:t[0],header:[],align:[],rows:[]};if(i.length===r.length){for(const o of r)/^ *-+: *$/.test(o)?n.align.push("right"):/^ *:-+: *$/.test(o)?n.align.push("center"):/^ *:-+ *$/.test(o)?n.align.push("left"):n.align.push(null);for(let o=0;o<i.length;o++)n.header.push({text:i[o],tokens:this.lexer.inline(i[o]),header:!0,align:n.align[o]});for(const o of s)n.rows.push(I6(o,n.header.length).map((a,c)=>({text:a,tokens:this.lexer.inline(a),header:!1,align:n.align[c]})));return n}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const i=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:i,tokens:this.lexer.inline(i)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:Ki(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const i=t[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const n=xl(i.slice(0,-1),"\\");if((i.length-n.length)%2===0)return}else{const n=WL(t[2],"()");if(n>-1){const a=(t[0].indexOf("!")===0?5:4)+t[1].length+n;t[2]=t[2].substring(0,n),t[0]=t[0].substring(0,a).trim(),t[3]=""}}let r=t[2],s="";if(this.options.pedantic){const n=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);n&&(r=n[1],s=n[3])}else s=t[3]?t[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(this.options.pedantic&&!/>$/.test(i)?r=r.slice(1):r=r.slice(1,-1)),P6(t,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}reflink(e,t){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){const r=(i[2]||i[1]).replace(/\s+/g," "),s=t[r.toLowerCase()];if(!s){const n=i[0].charAt(0);return{type:"text",raw:n,text:n}}return P6(i,s,i[0],this.lexer)}}emStrong(e,t,i=""){let r=this.rules.inline.emStrongLDelim.exec(e);if(!r||r[3]&&i.match(/[\p{L}\p{N}]/u))return;if(!(r[1]||r[2]||"")||!i||this.rules.inline.punctuation.exec(i)){const n=[...r[0]].length-1;let o,a,c=n,l=0;const u=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,t=t.slice(-1*e.length+n);(r=u.exec(t))!=null;){if(o=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!o)continue;if(a=[...o].length,r[3]||r[4]){c+=a;continue}else if((r[5]||r[6])&&n%3&&!((n+a)%3)){l+=a;continue}if(c-=a,c>0)continue;a=Math.min(a,a+c+l);const h=[...r[0]][0].length,d=e.slice(0,n+r.index+h+a);if(Math.min(n,a)%2){const g=d.slice(1,-1);return{type:"em",raw:d,text:g,tokens:this.lexer.inlineTokens(g)}}const f=d.slice(2,-2);return{type:"strong",raw:d,text:f,tokens:this.lexer.inlineTokens(f)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let i=t[2].replace(/\n/g," ");const r=/[^ ]/.test(i),s=/^ /.test(i)&&/ $/.test(i);return r&&s&&(i=i.substring(1,i.length-1)),i=Ki(i,!0),{type:"codespan",raw:t[0],text:i}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let i,r;return t[2]==="@"?(i=Ki(t[1]),r="mailto:"+i):(i=Ki(t[1]),r=i),{type:"link",raw:t[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let i,r;if(t[2]==="@")i=Ki(t[0]),r="mailto:"+i;else{let s;do s=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(s!==t[0]);i=Ki(t[0]),t[1]==="www."?r="http://"+t[0]:r=t[0]}return{type:"link",raw:t[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let i;return this.lexer.state.inRawBlock?i=t[0]:i=Ki(t[0]),{type:"text",raw:t[0],text:i}}}},VL=/^(?: *(?:\n|$))+/,qL=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,GL=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,kl=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,JL=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,D6=/(?:[*+-]|\d{1,9}[.)])/,A6=pt(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,D6).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),J1=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,QL=/^[^\n]+/,Q1=/(?!\s*\])(?:\\.|[^\[\]\\])+/,YL=pt(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",Q1).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),XL=pt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,D6).getRegex(),Pd="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Y1=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,ZL=pt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",Y1).replace("tag",Pd).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),R6=pt(J1).replace("hr",kl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Pd).getRegex(),KL=pt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",R6).getRegex(),X1={blockquote:KL,code:qL,def:YL,fences:GL,heading:JL,hr:kl,html:ZL,lheading:A6,list:XL,newline:VL,paragraph:R6,table:Sl,text:QL},T6=pt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",kl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Pd).getRegex(),eN={...X1,table:T6,paragraph:pt(J1).replace("hr",kl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",T6).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Pd).getRegex()},tN={...X1,html:pt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Y1).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Sl,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:pt(J1).replace("hr",kl).replace("heading",` *#{1,6} *[^
]`).replace("lheading",A6).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},L6=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,iN=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,N6=/^( {2,}|\\)\n(?!\s*$)/,rN=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,$l="\\p{P}\\p{S}",sN=pt(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,$l).getRegex(),nN=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,oN=pt(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,$l).getRegex(),aN=pt("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,$l).getRegex(),cN=pt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,$l).getRegex(),lN=pt(/\\([punct])/,"gu").replace(/punct/g,$l).getRegex(),uN=pt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),hN=pt(Y1).replace("(?:-->|$)","-->").getRegex(),dN=pt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",hN).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Dd=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,fN=pt(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Dd).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),O6=pt(/^!?\[(label)\]\[(ref)\]/).replace("label",Dd).replace("ref",Q1).getRegex(),F6=pt(/^!?\[(ref)\](?:\[\])?/).replace("ref",Q1).getRegex(),pN=pt("reflink|nolink(?!\\()","g").replace("reflink",O6).replace("nolink",F6).getRegex(),Z1={_backpedal:Sl,anyPunctuation:lN,autolink:uN,blockSkip:nN,br:N6,code:iN,del:Sl,emStrongLDelim:oN,emStrongRDelimAst:aN,emStrongRDelimUnd:cN,escape:L6,link:fN,nolink:F6,punctuation:sN,reflink:O6,reflinkSearch:pN,tag:dN,text:rN,url:Sl},gN={...Z1,link:pt(/^!?\[(label)\]\((.*?)\)/).replace("label",Dd).getRegex(),reflink:pt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Dd).getRegex()},K1={...Z1,escape:pt(L6).replace("])","~|])").getRegex(),url:pt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},mN={...K1,br:pt(N6).replace("{2,}","*").getRegex(),text:pt(K1.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Ad={normal:X1,gfm:eN,pedantic:tN},Cl={normal:Z1,gfm:K1,breaks:mN,pedantic:gN},mo=class v4{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||go,this.options.tokenizer=this.options.tokenizer||new Id,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const i={block:Ad.normal,inline:Cl.normal};this.options.pedantic?(i.block=Ad.pedantic,i.inline=Cl.pedantic):this.options.gfm&&(i.block=Ad.gfm,this.options.breaks?i.inline=Cl.breaks:i.inline=Cl.gfm),this.tokenizer.rules=i,this.options.customInlineRules&&merge(this.tokenizer.rules.inline,this.options.customInlineRules)}static get rules(){return{block:Ad,inline:Cl}}static lex(t,i){return new v4(i).lex(t)}static lexInline(t,i){return new v4(i).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);for(let i=0;i<this.inlineQueue.length;i++){const r=this.inlineQueue[i];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,i=[],r=!1){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(a,c,l)=>c+"    ".repeat(l.length));let s,n,o;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(s=a.call({lexer:this},t,i))?(t=t.substring(s.raw.length),i.push(s),!0):!1))){if(s=this.tokenizer.space(t)){t=t.substring(s.raw.length),s.raw.length===1&&i.length>0?i[i.length-1].raw+=`
`:i.push(s);continue}if(s=this.tokenizer.code(t)){t=t.substring(s.raw.length),n=i[i.length-1],n&&(n.type==="paragraph"||n.type==="text")?(n.raw+=`
`+s.raw,n.text+=`
`+s.text,this.inlineQueue[this.inlineQueue.length-1].src=n.text):i.push(s);continue}if(s=this.tokenizer.fences(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.heading(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.hr(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.blockquote(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.list(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.html(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.def(t)){t=t.substring(s.raw.length),n=i[i.length-1],n&&(n.type==="paragraph"||n.type==="text")?(n.raw+=`
`+s.raw,n.text+=`
`+s.raw,this.inlineQueue[this.inlineQueue.length-1].src=n.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title});continue}if(s=this.tokenizer.table(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.lheading(t)){t=t.substring(s.raw.length),i.push(s);continue}if(o=t,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const c=t.slice(1);let l;this.options.extensions.startBlock.forEach(u=>{l=u.call({lexer:this},c),typeof l=="number"&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(o=t.substring(0,a+1))}if(this.state.top&&(s=this.tokenizer.paragraph(o))){n=i[i.length-1],r&&n?.type==="paragraph"?(n.raw+=`
`+s.raw,n.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):i.push(s),r=o.length!==t.length,t=t.substring(s.raw.length);continue}if(s=this.tokenizer.text(t)){t=t.substring(s.raw.length),n=i[i.length-1],n&&n.type==="text"?(n.raw+=`
`+s.raw,n.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):i.push(s);continue}if(t){const a="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,i}inline(t,i=[]){return this.inlineQueue.push({src:t,tokens:i}),i}inlineTokens(t,i=[]){let r,s,n,o=t,a,c,l;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)u.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(c||(l=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(r=u.call({lexer:this},t,i))?(t=t.substring(r.raw.length),i.push(r),!0):!1))){if(r=this.tokenizer.escape(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.tag(t)){t=t.substring(r.raw.length),s=i[i.length-1],s&&r.type==="text"&&s.type==="text"?(s.raw+=r.raw,s.text+=r.text):i.push(r);continue}if(r=this.tokenizer.link(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(r.raw.length),s=i[i.length-1],s&&r.type==="text"&&s.type==="text"?(s.raw+=r.raw,s.text+=r.text):i.push(r);continue}if(r=this.tokenizer.emStrong(t,o,l)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.codespan(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.br(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.del(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.autolink(t)){t=t.substring(r.raw.length),i.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(t))){t=t.substring(r.raw.length),i.push(r);continue}if(n=t,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const h=t.slice(1);let d;this.options.extensions.startInline.forEach(f=>{d=f.call({lexer:this},h),typeof d=="number"&&d>=0&&(u=Math.min(u,d))}),u<1/0&&u>=0&&(n=t.substring(0,u+1))}if(r=this.tokenizer.inlineText(n)){t=t.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(l=r.raw.slice(-1)),c=!0,s=i[i.length-1],s&&s.type==="text"?(s.raw+=r.raw,s.text+=r.text):i.push(r);continue}if(t){const u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return i}},Rd=class{options;parser;constructor(e){this.options=e||go}space(e){return""}code({text:e,lang:t,escaped:i}){const r=(t||"").match(/^\S*/)?.[0],s=e.replace(/\n$/,"")+`
`;return r?'<pre><code class="language-'+Ki(r)+'">'+(i?s:Ki(s,!0))+`</code></pre>
`:"<pre><code>"+(i?s:Ki(s,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){const t=e.ordered,i=e.start;let r="";for(let o=0;o<e.items.length;o++){const a=e.items[o];r+=this.listitem(a)}const s=t?"ol":"ul",n=t&&i!==1?' start="'+i+'"':"";return"<"+s+n+`>
`+r+"</"+s+`>
`}listitem(e){let t="";if(e.task){const i=this.checkbox({checked:!!e.checked});e.loose?e.tokens.length>0&&e.tokens[0].type==="paragraph"?(e.tokens[0].text=i+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=i+" "+e.tokens[0].tokens[0].text)):e.tokens.unshift({type:"text",raw:i+" ",text:i+" "}):t+=i+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",i="";for(let s=0;s<e.header.length;s++)i+=this.tablecell(e.header[s]);t+=this.tablerow({text:i});let r="";for(let s=0;s<e.rows.length;s++){const n=e.rows[s];i="";for(let o=0;o<n.length;o++)i+=this.tablecell(n[o]);r+=this.tablerow({text:i})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+r+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const t=this.parser.parseInline(e.tokens),i=e.header?"th":"td";return(e.align?`<${i} align="${e.align}">`:`<${i}>`)+t+`</${i}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${e}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:i}){const r=this.parser.parseInline(i),s=C6(e);if(s===null)return r;e=s;let n='<a href="'+e+'"';return t&&(n+=' title="'+t+'"'),n+=">"+r+"</a>",n}image({href:e,title:t,text:i}){const r=C6(e);if(r===null)return i;e=r;let s=`<img src="${e}" alt="${i}"`;return t&&(s+=` title="${t}"`),s+=">",s}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):e.text}},ev=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},vo=class w4{options;renderer;textRenderer;constructor(t){this.options=t||go,this.options.renderer=this.options.renderer||new Rd,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new ev}static parse(t,i){return new w4(i).parse(t)}static parseInline(t,i){return new w4(i).parseInline(t)}parse(t,i=!0){let r="";for(let s=0;s<t.length;s++){const n=t[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[n.type]){const a=n,c=this.options.extensions.renderers[a.type].call({parser:this},a);if(c!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(a.type)){r+=c||"";continue}}const o=n;switch(o.type){case"space":{r+=this.renderer.space(o);continue}case"hr":{r+=this.renderer.hr(o);continue}case"heading":{r+=this.renderer.heading(o);continue}case"code":{r+=this.renderer.code(o);continue}case"table":{r+=this.renderer.table(o);continue}case"blockquote":{r+=this.renderer.blockquote(o);continue}case"list":{r+=this.renderer.list(o);continue}case"html":{r+=this.renderer.html(o);continue}case"paragraph":{r+=this.renderer.paragraph(o);continue}case"text":{let a=o,c=this.renderer.text(a);for(;s+1<t.length&&t[s+1].type==="text";)a=t[++s],c+=`
`+this.renderer.text(a);i?r+=this.renderer.paragraph({type:"paragraph",raw:c,text:c,tokens:[{type:"text",raw:c,text:c}]}):r+=c;continue}default:{const a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}parseInline(t,i){i=i||this.renderer;let r="";for(let s=0;s<t.length;s++){const n=t[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[n.type]){const a=this.options.extensions.renderers[n.type].call({parser:this},n);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(n.type)){r+=a||"";continue}}const o=n;switch(o.type){case"escape":{r+=i.text(o);break}case"html":{r+=i.html(o);break}case"link":{r+=i.link(o);break}case"image":{r+=i.image(o);break}case"strong":{r+=i.strong(o);break}case"em":{r+=i.em(o);break}case"codespan":{r+=i.codespan(o);break}case"br":{r+=i.br(o);break}case"del":{r+=i.del(o);break}case"text":{r+=i.text(o);break}default:{const a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}},Td=class{options;constructor(e){this.options=e||go}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}},vN=class{defaults=G1();options=this.setOptions;parse=this.parseMarkdown(mo.lex,vo.parse);parseInline=this.parseMarkdown(mo.lexInline,vo.parseInline);Parser=vo;Renderer=Rd;TextRenderer=ev;Lexer=mo;Tokenizer=Id;Hooks=Td;constructor(...e){this.use(...e)}walkTokens(e,t){let i=[];for(const r of e)switch(i=i.concat(t.call(this,r)),r.type){case"table":{const s=r;for(const n of s.header)i=i.concat(this.walkTokens(n.tokens,t));for(const n of s.rows)for(const o of n)i=i.concat(this.walkTokens(o.tokens,t));break}case"list":{const s=r;i=i.concat(this.walkTokens(s.items,t));break}default:{const s=r;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(n=>{const o=s[n].flat(1/0);i=i.concat(this.walkTokens(o,t))}):s.tokens&&(i=i.concat(this.walkTokens(s.tokens,t)))}}return i}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(i=>{const r={...i};if(r.async=this.defaults.async||r.async||!1,i.extensions&&(i.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const n=t.renderers[s.name];n?t.renderers[s.name]=function(...o){let a=s.renderer.apply(this,o);return a===!1&&(a=n.apply(this,o)),a}:t.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const n=t[s.level];n?n.unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&(s.level==="block"?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:s.level==="inline"&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(t.childTokens[s.name]=s.childTokens)}),r.extensions=t),i.renderer){const s=this.defaults.renderer||new Rd(this.defaults);for(const n in i.renderer){if(!(n in s))throw new Error(`renderer '${n}' does not exist`);if(["options","parser"].includes(n))continue;const o=n,a=i.renderer[o],c=s[o];s[o]=(...l)=>{let u=a.apply(s,l);return u===!1&&(u=c.apply(s,l)),u||""}}r.renderer=s}if(i.tokenizer){const s=this.defaults.tokenizer||new Id(this.defaults);for(const n in i.tokenizer){if(!(n in s))throw new Error(`tokenizer '${n}' does not exist`);if(["options","rules","lexer"].includes(n))continue;const o=n,a=i.tokenizer[o],c=s[o];s[o]=(...l)=>{let u=a.apply(s,l);return u===!1&&(u=c.apply(s,l)),u}}r.tokenizer=s}if(i.hooks){const s=this.defaults.hooks||new Td;for(const n in i.hooks){if(!(n in s))throw new Error(`hook '${n}' does not exist`);if(n==="options")continue;const o=n,a=i.hooks[o],c=s[o];Td.passThroughHooks.has(n)?s[o]=l=>{if(this.defaults.async)return Promise.resolve(a.call(s,l)).then(h=>c.call(s,h));const u=a.call(s,l);return c.call(s,u)}:s[o]=(...l)=>{let u=a.apply(s,l);return u===!1&&(u=c.apply(s,l)),u}}r.hooks=s}if(i.walkTokens){const s=this.defaults.walkTokens,n=i.walkTokens;r.walkTokens=function(o){let a=[];return a.push(n.call(this,o)),s&&(a=a.concat(s.call(this,o))),a}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return mo.lex(e,t??this.defaults)}parser(e,t){return vo.parse(e,t??this.defaults)}parseMarkdown(e,t){return(r,s)=>{const n={...s},o={...this.defaults,...n},a=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&n.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof r>"u"||r===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(r):r).then(c=>e(c,o)).then(c=>o.hooks?o.hooks.processAllTokens(c):c).then(c=>o.walkTokens?Promise.all(this.walkTokens(c,o.walkTokens)).then(()=>c):c).then(c=>t(c,o)).then(c=>o.hooks?o.hooks.postprocess(c):c).catch(a);try{o.hooks&&(r=o.hooks.preprocess(r));let c=e(r,o);o.hooks&&(c=o.hooks.processAllTokens(c)),o.walkTokens&&this.walkTokens(c,o.walkTokens);let l=t(c,o);return o.hooks&&(l=o.hooks.postprocess(l)),l}catch(c){return a(c)}}}onError(e,t){return i=>{if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const r="<p>An error occurred:</p><pre>"+Ki(i.message+"",!0)+"</pre>";return t?Promise.resolve(r):r}if(t)return Promise.reject(i);throw i}}},wo=new vN;function at(e,t){return wo.parse(e,t)}at.options=at.setOptions=function(e){return wo.setOptions(e),at.defaults=wo.defaults,S6(at.defaults),at},at.getDefaults=G1,at.defaults=go,at.use=function(...e){return wo.use(...e),at.defaults=wo.defaults,S6(at.defaults),at},at.walkTokens=function(e,t){return wo.walkTokens(e,t)},at.parseInline=wo.parseInline,at.Parser=vo,at.parser=vo.parse,at.Renderer=Rd,at.TextRenderer=ev,at.Lexer=mo,at.lexer=mo.lex,at.Tokenizer=Id,at.Hooks=Td,at.parse=at;var dG=at.options,fG=at.setOptions,pG=at.use,gG=at.walkTokens,mG=at.parseInline,vG=vo.parse,wG=mo.lex,Ds=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"}),wN=/^(.+)\/(.+?)(;.+)?$/;function M6(e,t){const i=wN.exec(e);return i?`${i[1].toLowerCase()}/${i[2].toLowerCase()}${i[3]??""}`:t?void 0:e}var Ii=Symbol("unset"),bN=class{constructor(){this.a=new tv,this.b=0}get size(){return this.b}get nodes(){return this.a.children?.values()||Qi.empty()}get entries(){return this.a.children?.entries()||Qi.empty()}insert(e,t,i){this.d(e,r=>r._value=t,i)}mutate(e,t){this.d(e,i=>i._value=t(i._value===Ii?void 0:i._value))}mutatePath(e,t){this.d(e,()=>{},i=>t(i))}delete(e){const t=this.c(e);if(!t)return;let i=t.length-1;const r=t[i].node._value;if(r!==Ii){for(this.b--,t[i].node._value=Ii;i>0;i--){const{node:s,part:n}=t[i];if(s.children?.size||s._value!==Ii)break;t[i-1].node.children.delete(n)}return r}}*deleteRecursive(e){const t=this.c(e);if(!t)return;const i=t[t.length-1].node;for(let r=t.length-1;r>0;r--){const s=t[r-1];if(s.node.children.delete(t[r].part),s.node.children.size>0||s.node._value!==Ii)break}for(const r of U6(i))r._value!==Ii&&(this.b--,yield r._value)}find(e){let t=this.a;for(const i of e){const r=t.children?.get(i);if(!r)return;t=r}return t._value===Ii?void 0:t._value}hasKeyOrParent(e){let t=this.a;for(const i of e){const r=t.children?.get(i);if(!r)return!1;if(r._value!==Ii)return!0;t=r}return!1}hasKeyOrChildren(e){let t=this.a;for(const i of e){const r=t.children?.get(i);if(!r)return!1;t=r}return!0}hasKey(e){let t=this.a;for(const i of e){const r=t.children?.get(i);if(!r)return!1;t=r}return t._value!==Ii}c(e){const t=[{part:"",node:this.a}];let i=0;for(const r of e){const s=t[i].node.children?.get(r);if(!s)return;t.push({part:r,node:s}),i++}return t}d(e,t,i){let r=this.a;for(const o of e){if(r.children)if(r.children.has(o))r=r.children.get(o);else{const a=new tv;r.children.set(o,a),r=a}else{const a=new tv;r.children=new Map([[o,a]]),r=a}i?.(r)}const s=r._value===Ii?0:1;t(r);const n=r._value===Ii?0:1;this.b+=n-s}*values(){for(const{_value:e}of U6(this.a))e!==Ii&&(yield e)}};function*U6(e){const t=[e];for(;t.length>0;){const i=t.pop();if(yield i,i.children)for(const r of i.children.values())t.push(r)}}var tv=class{constructor(){this._value=Ii}get value(){return this._value===Ii?void 0:this._value}set value(e){this._value=e===void 0?Ii:e}},er=class Ko{constructor(t,i){this.lineNumber=t,this.column=i}with(t=this.lineNumber,i=this.column){return t===this.lineNumber&&i===this.column?this:new Ko(t,i)}delta(t=0,i=0){return this.with(this.lineNumber+t,this.column+i)}equals(t){return Ko.equals(this,t)}static equals(t,i){return!t&&!i?!0:!!t&&!!i&&t.lineNumber===i.lineNumber&&t.column===i.column}isBefore(t){return Ko.isBefore(this,t)}static isBefore(t,i){return t.lineNumber<i.lineNumber?!0:i.lineNumber<t.lineNumber?!1:t.column<i.column}isBeforeOrEqual(t){return Ko.isBeforeOrEqual(this,t)}static isBeforeOrEqual(t,i){return t.lineNumber<i.lineNumber?!0:i.lineNumber<t.lineNumber?!1:t.column<=i.column}static compare(t,i){const r=t.lineNumber|0,s=i.lineNumber|0;if(r===s){const n=t.column|0,o=i.column|0;return n-o}return r-s}clone(){return new Ko(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(t){return new Ko(t.lineNumber,t.column)}static isIPosition(t){return t&&typeof t.lineNumber=="number"&&typeof t.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}},et=class Vt{constructor(t,i,r,s){t>r||t===r&&i>s?(this.startLineNumber=r,this.startColumn=s,this.endLineNumber=t,this.endColumn=i):(this.startLineNumber=t,this.startColumn=i,this.endLineNumber=r,this.endColumn=s)}isEmpty(){return Vt.isEmpty(this)}static isEmpty(t){return t.startLineNumber===t.endLineNumber&&t.startColumn===t.endColumn}containsPosition(t){return Vt.containsPosition(this,t)}static containsPosition(t,i){return!(i.lineNumber<t.startLineNumber||i.lineNumber>t.endLineNumber||i.lineNumber===t.startLineNumber&&i.column<t.startColumn||i.lineNumber===t.endLineNumber&&i.column>t.endColumn)}static strictContainsPosition(t,i){return!(i.lineNumber<t.startLineNumber||i.lineNumber>t.endLineNumber||i.lineNumber===t.startLineNumber&&i.column<=t.startColumn||i.lineNumber===t.endLineNumber&&i.column>=t.endColumn)}containsRange(t){return Vt.containsRange(this,t)}static containsRange(t,i){return!(i.startLineNumber<t.startLineNumber||i.endLineNumber<t.startLineNumber||i.startLineNumber>t.endLineNumber||i.endLineNumber>t.endLineNumber||i.startLineNumber===t.startLineNumber&&i.startColumn<t.startColumn||i.endLineNumber===t.endLineNumber&&i.endColumn>t.endColumn)}strictContainsRange(t){return Vt.strictContainsRange(this,t)}static strictContainsRange(t,i){return!(i.startLineNumber<t.startLineNumber||i.endLineNumber<t.startLineNumber||i.startLineNumber>t.endLineNumber||i.endLineNumber>t.endLineNumber||i.startLineNumber===t.startLineNumber&&i.startColumn<=t.startColumn||i.endLineNumber===t.endLineNumber&&i.endColumn>=t.endColumn)}plusRange(t){return Vt.plusRange(this,t)}static plusRange(t,i){let r,s,n,o;return i.startLineNumber<t.startLineNumber?(r=i.startLineNumber,s=i.startColumn):i.startLineNumber===t.startLineNumber?(r=i.startLineNumber,s=Math.min(i.startColumn,t.startColumn)):(r=t.startLineNumber,s=t.startColumn),i.endLineNumber>t.endLineNumber?(n=i.endLineNumber,o=i.endColumn):i.endLineNumber===t.endLineNumber?(n=i.endLineNumber,o=Math.max(i.endColumn,t.endColumn)):(n=t.endLineNumber,o=t.endColumn),new Vt(r,s,n,o)}intersectRanges(t){return Vt.intersectRanges(this,t)}static intersectRanges(t,i){let r=t.startLineNumber,s=t.startColumn,n=t.endLineNumber,o=t.endColumn;const a=i.startLineNumber,c=i.startColumn,l=i.endLineNumber,u=i.endColumn;return r<a?(r=a,s=c):r===a&&(s=Math.max(s,c)),n>l?(n=l,o=u):n===l&&(o=Math.min(o,u)),r>n||r===n&&s>o?null:new Vt(r,s,n,o)}equalsRange(t){return Vt.equalsRange(this,t)}static equalsRange(t,i){return!t&&!i?!0:!!t&&!!i&&t.startLineNumber===i.startLineNumber&&t.startColumn===i.startColumn&&t.endLineNumber===i.endLineNumber&&t.endColumn===i.endColumn}getEndPosition(){return Vt.getEndPosition(this)}static getEndPosition(t){return new er(t.endLineNumber,t.endColumn)}getStartPosition(){return Vt.getStartPosition(this)}static getStartPosition(t){return new er(t.startLineNumber,t.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(t,i){return new Vt(this.startLineNumber,this.startColumn,t,i)}setStartPosition(t,i){return new Vt(t,i,this.endLineNumber,this.endColumn)}collapseToStart(){return Vt.collapseToStart(this)}static collapseToStart(t){return new Vt(t.startLineNumber,t.startColumn,t.startLineNumber,t.startColumn)}collapseToEnd(){return Vt.collapseToEnd(this)}static collapseToEnd(t){return new Vt(t.endLineNumber,t.endColumn,t.endLineNumber,t.endColumn)}delta(t){return new Vt(this.startLineNumber+t,this.startColumn,this.endLineNumber+t,this.endColumn)}static fromPositions(t,i=t){return new Vt(t.lineNumber,t.column,i.lineNumber,i.column)}static lift(t){return t?new Vt(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):null}static isIRange(t){return t&&typeof t.startLineNumber=="number"&&typeof t.startColumn=="number"&&typeof t.endLineNumber=="number"&&typeof t.endColumn=="number"}static areIntersectingOrTouching(t,i){return!(t.endLineNumber<i.startLineNumber||t.endLineNumber===i.startLineNumber&&t.endColumn<i.startColumn||i.endLineNumber<t.startLineNumber||i.endLineNumber===t.startLineNumber&&i.endColumn<t.startColumn)}static areIntersecting(t,i){return!(t.endLineNumber<i.startLineNumber||t.endLineNumber===i.startLineNumber&&t.endColumn<=i.startColumn||i.endLineNumber<t.startLineNumber||i.endLineNumber===t.startLineNumber&&i.endColumn<=t.startColumn)}static compareRangesUsingStarts(t,i){if(t&&i){const n=t.startLineNumber|0,o=i.startLineNumber|0;if(n===o){const a=t.startColumn|0,c=i.startColumn|0;if(a===c){const l=t.endLineNumber|0,u=i.endLineNumber|0;if(l===u){const h=t.endColumn|0,d=i.endColumn|0;return h-d}return l-u}return a-c}return n-o}return(t?1:0)-(i?1:0)}static compareRangesUsingEnds(t,i){return t.endLineNumber===i.endLineNumber?t.endColumn===i.endColumn?t.startLineNumber===i.startLineNumber?t.startColumn-i.startColumn:t.startLineNumber-i.startLineNumber:t.endColumn-i.endColumn:t.endLineNumber-i.endLineNumber}static spansMultipleLines(t){return t.endLineNumber>t.startLineNumber}toJSON(){return this}},_6=class{constructor(){this.a=new Map,this.b=new Map,this.c=new I,this.onDidChange=this.c.event,this.d=null}handleChange(e){this.c.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this.a.set(e,t),this.handleChange([e]),ee(()=>{this.a.get(e)===t&&(this.a.delete(e),this.handleChange([e]))})}get(e){return this.a.get(e)||null}registerFactory(e,t){this.b.get(e)?.dispose();const i=new yN(this,e,t);return this.b.set(e,i),ee(()=>{const r=this.b.get(e);!r||r!==i||(this.b.delete(e),r.dispose())})}async getOrCreate(e){const t=this.get(e);if(t)return t;const i=this.b.get(e);return!i||i.isResolved?null:(await i.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;const i=this.b.get(e);return!!(!i||i.isResolved)}setColorMap(e){this.d=e,this.c.fire({changedLanguages:Array.from(this.a.keys()),changedColorMap:!0})}getColorMap(){return this.d}getDefaultBackground(){return this.d&&this.d.length>2?this.d[2]:null}},yN=class extends X{get isResolved(){return this.c}constructor(e,t,i){super(),this.f=e,this.g=t,this.h=i,this.a=!1,this.b=null,this.c=!1}dispose(){this.a=!0,super.dispose()}async resolve(){return this.b||(this.b=this.j()),this.b}async j(){const e=await this.h.tokenizationSupport;this.c=!0,e&&!this.a&&this.B(this.f.register(this.g,e))}},j6;(function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"})(j6||(j6={}));var H6;(function(e){e[e.Method=0]="Method",e[e.Function=1]="Function",e[e.Constructor=2]="Constructor",e[e.Field=3]="Field",e[e.Variable=4]="Variable",e[e.Class=5]="Class",e[e.Struct=6]="Struct",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Event=10]="Event",e[e.Operator=11]="Operator",e[e.Unit=12]="Unit",e[e.Value=13]="Value",e[e.Constant=14]="Constant",e[e.Enum=15]="Enum",e[e.EnumMember=16]="EnumMember",e[e.Keyword=17]="Keyword",e[e.Text=18]="Text",e[e.Color=19]="Color",e[e.File=20]="File",e[e.Reference=21]="Reference",e[e.Customcolor=22]="Customcolor",e[e.Folder=23]="Folder",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue",e[e.Snippet=27]="Snippet"})(H6||(H6={}));var B6;(function(e){const t=new Map;t.set(0,oe.symbolMethod),t.set(1,oe.symbolFunction),t.set(2,oe.symbolConstructor),t.set(3,oe.symbolField),t.set(4,oe.symbolVariable),t.set(5,oe.symbolClass),t.set(6,oe.symbolStruct),t.set(7,oe.symbolInterface),t.set(8,oe.symbolModule),t.set(9,oe.symbolProperty),t.set(10,oe.symbolEvent),t.set(11,oe.symbolOperator),t.set(12,oe.symbolUnit),t.set(13,oe.symbolValue),t.set(15,oe.symbolEnum),t.set(14,oe.symbolConstant),t.set(15,oe.symbolEnum),t.set(16,oe.symbolEnumMember),t.set(17,oe.symbolKeyword),t.set(27,oe.symbolSnippet),t.set(18,oe.symbolText),t.set(19,oe.symbolColor),t.set(20,oe.symbolFile),t.set(21,oe.symbolReference),t.set(22,oe.symbolCustomColor),t.set(23,oe.symbolFolder),t.set(24,oe.symbolTypeParameter),t.set(25,oe.account),t.set(26,oe.issues);function i(n){let o=t.get(n);return o||(console.info("No codicon found for CompletionItemKind "+n),o=oe.symbolProperty),o}e.toIcon=i;const r=new Map;r.set("method",0),r.set("function",1),r.set("constructor",2),r.set("field",3),r.set("variable",4),r.set("class",5),r.set("struct",6),r.set("interface",7),r.set("module",8),r.set("property",9),r.set("event",10),r.set("operator",11),r.set("unit",12),r.set("value",13),r.set("constant",14),r.set("enum",15),r.set("enum-member",16),r.set("enumMember",16),r.set("keyword",17),r.set("snippet",27),r.set("text",18),r.set("color",19),r.set("file",20),r.set("reference",21),r.set("customcolor",22),r.set("folder",23),r.set("type-parameter",24),r.set("typeParameter",24),r.set("account",25),r.set("issue",26);function s(n,o){let a=r.get(n);return typeof a>"u"&&!o&&(a=9),a}e.fromString=s})(B6||(B6={}));var W6;(function(e){e[e.Deprecated=1]="Deprecated"})(W6||(W6={}));var z6;(function(e){e[e.None=0]="None",e[e.KeepWhitespace=1]="KeepWhitespace",e[e.InsertAsSnippet=4]="InsertAsSnippet"})(z6||(z6={}));var V6;(function(e){e[e.Word=0]="Word",e[e.Line=1]="Line",e[e.Suggest=2]="Suggest"})(V6||(V6={}));var q6;(function(e){e[e.Invoke=0]="Invoke",e[e.TriggerCharacter=1]="TriggerCharacter",e[e.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(q6||(q6={}));var Ld;(function(e){e[e.Automatic=0]="Automatic",e[e.Explicit=1]="Explicit"})(Ld||(Ld={}));var G6;(function(e){e[e.Invoke=1]="Invoke",e[e.Auto=2]="Auto"})(G6||(G6={}));var J6;(function(e){e[e.Automatic=0]="Automatic",e[e.PasteAs=1]="PasteAs"})(J6||(J6={}));var Q6;(function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"})(Q6||(Q6={}));var Y6;(function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"})(Y6||(Y6={}));function EN(e){return e&&E.isUri(e.uri)&&et.isIRange(e.range)&&(et.isIRange(e.originSelectionRange)||et.isIRange(e.targetSelectionRange))}var X6;(function(e){e[e.File=0]="File",e[e.Module=1]="Module",e[e.Namespace=2]="Namespace",e[e.Package=3]="Package",e[e.Class=4]="Class",e[e.Method=5]="Method",e[e.Property=6]="Property",e[e.Field=7]="Field",e[e.Constructor=8]="Constructor",e[e.Enum=9]="Enum",e[e.Interface=10]="Interface",e[e.Function=11]="Function",e[e.Variable=12]="Variable",e[e.Constant=13]="Constant",e[e.String=14]="String",e[e.Number=15]="Number",e[e.Boolean=16]="Boolean",e[e.Array=17]="Array",e[e.Object=18]="Object",e[e.Key=19]="Key",e[e.Null=20]="Null",e[e.EnumMember=21]="EnumMember",e[e.Struct=22]="Struct",e[e.Event=23]="Event",e[e.Operator=24]="Operator",e[e.TypeParameter=25]="TypeParameter"})(X6||(X6={}));var bG={17:p(804,null),16:p(805,null),4:p(806,null),13:p(807,null),8:p(808,null),9:p(809,null),21:p(810,null),23:p(811,null),7:p(812,null),0:p(813,null),11:p(814,null),10:p(815,null),19:p(816,null),5:p(817,null),1:p(818,null),2:p(819,null),20:p(820,null),15:p(821,null),18:p(822,null),24:p(823,null),3:p(824,null),6:p(825,null),14:p(826,null),22:p(827,null),25:p(828,null),12:p(829,null)},Z6;(function(e){e[e.Deprecated=1]="Deprecated"})(Z6||(Z6={}));var K6;(function(e){const t=new Map;t.set(0,oe.symbolFile),t.set(1,oe.symbolModule),t.set(2,oe.symbolNamespace),t.set(3,oe.symbolPackage),t.set(4,oe.symbolClass),t.set(5,oe.symbolMethod),t.set(6,oe.symbolProperty),t.set(7,oe.symbolField),t.set(8,oe.symbolConstructor),t.set(9,oe.symbolEnum),t.set(10,oe.symbolInterface),t.set(11,oe.symbolFunction),t.set(12,oe.symbolVariable),t.set(13,oe.symbolConstant),t.set(14,oe.symbolString),t.set(15,oe.symbolNumber),t.set(16,oe.symbolBoolean),t.set(17,oe.symbolArray),t.set(18,oe.symbolObject),t.set(19,oe.symbolKey),t.set(20,oe.symbolNull),t.set(21,oe.symbolEnumMember),t.set(22,oe.symbolStruct),t.set(23,oe.symbolEvent),t.set(24,oe.symbolOperator),t.set(25,oe.symbolTypeParameter);function i(r){let s=t.get(r);return s||(console.info("No codicon found for SymbolKind "+r),s=oe.symbolProperty),s}e.toIcon=i})(K6||(K6={}));var Ia=class Jn{static{this.Comment=new Jn("comment")}static{this.Imports=new Jn("imports")}static{this.Region=new Jn("region")}static fromValue(t){switch(t){case"comment":return Jn.Comment;case"imports":return Jn.Imports;case"region":return Jn.Region}return new Jn(t)}constructor(t){this.value=t}},e7;(function(e){e[e.AIGenerated=1]="AIGenerated"})(e7||(e7={}));var Nd;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(Nd||(Nd={}));var iv;(function(e){function t(i){return!i||typeof i!="object"?!1:typeof i.id=="string"&&typeof i.title=="string"}e.is=t})(iv||(iv={}));var Pa;(function(e){e[e.Collapsed=0]="Collapsed",e[e.Expanded=1]="Expanded"})(Pa||(Pa={}));var Il;(function(e){e[e.Unresolved=0]="Unresolved",e[e.Resolved=1]="Resolved"})(Il||(Il={}));var Pl;(function(e){e[e.Current=0]="Current",e[e.Outdated=1]="Outdated"})(Pl||(Pl={}));var t7;(function(e){e[e.Editing=0]="Editing",e[e.Preview=1]="Preview"})(t7||(t7={}));var i7;(function(e){e[e.Published=0]="Published",e[e.Draft=1]="Draft"})(i7||(i7={}));var r7;(function(e){e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"})(r7||(r7={}));var yG=new _6,EG=new _6,s7;(function(e){e[e.None=0]="None",e[e.Option=1]="Option",e[e.Default=2]="Default",e[e.Preferred=3]="Preferred"})(s7||(s7={}));var Od;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(Od||(Od={}));var n7;(function(e){e[e.Unnecessary=1]="Unnecessary",e[e.Deprecated=2]="Deprecated"})(n7||(n7={}));var Pi;(function(e){e[e.Hint=1]="Hint",e[e.Info=2]="Info",e[e.Warning=4]="Warning",e[e.Error=8]="Error"})(Pi||(Pi={})),function(e){function t(o,a){return a-o}e.compare=t;const i=Object.create(null);i[e.Error]=p(2030,null),i[e.Warning]=p(2031,null),i[e.Info]=p(2032,null);function r(o){return i[o]||""}e.toString=r;function s(o){switch(o){case Lt.Error:return e.Error;case Lt.Warning:return e.Warning;case Lt.Info:return e.Info;case Lt.Ignore:return e.Hint}}e.fromSeverity=s;function n(o){switch(o){case e.Error:return Lt.Error;case e.Warning:return Lt.Warning;case e.Info:return Lt.Info;case e.Hint:return Lt.Ignore}}e.toSeverity=n}(Pi||(Pi={}));var o7;(function(e){const t="";function i(s){return r(s,!0)}e.makeKey=i;function r(s,n){const o=[t];return s.source?o.push(s.source.replace("\xA6","\\\xA6")):o.push(t),s.code?typeof s.code=="string"?o.push(s.code.replace("\xA6","\\\xA6")):o.push(s.code.value.replace("\xA6","\\\xA6")):o.push(t),s.severity!==void 0&&s.severity!==null?o.push(Pi.toString(s.severity)):o.push(t),s.message&&n?o.push(s.message.replace("\xA6","\\\xA6")):o.push(t),s.startLineNumber!==void 0&&s.startLineNumber!==null?o.push(s.startLineNumber.toString()):o.push(t),s.startColumn!==void 0&&s.startColumn!==null?o.push(s.startColumn.toString()):o.push(t),s.endLineNumber!==void 0&&s.endLineNumber!==null?o.push(s.endLineNumber.toString()):o.push(t),s.endColumn!==void 0&&s.endColumn!==null?o.push(s.endColumn.toString()):o.push(t),o.push(t),o.join("\xA6")}e.makeKeyOptionalMessage=r})(o7||(o7={}));var SG=V("markerService");function Wi(e,t){if(!e)throw new Error(t?`Assertion failed (${t})`:"Assertion Failed")}function SN(e,t="Unreachable"){throw new Error(t)}function a7(e){if(!e()){debugger;e(),Et(new ua("Assertion Failed"))}}var xN=class{constructor(){this.a=new Map}add(e,t){Wi(De(e)),Wi(St(t)),Wi(!this.a.has(e),"There is already an extension with this id"),this.a.set(e,t)}knows(e){return this.a.has(e)}as(e){return this.a.get(e)||null}},ai=new xN,kN=V("fileService"),xG=V("remoteFileService");function Dl(e){return e.create===!0}var zi;(function(e){e[e.Unknown=0]="Unknown",e[e.File=1]="File",e[e.Directory=2]="Directory",e[e.SymbolicLink=64]="SymbolicLink"})(zi||(zi={}));var bn;(function(e){e[e.Readonly=1]="Readonly",e[e.Locked=2]="Locked"})(bn||(bn={}));var c7;(function(e){e[e.UPDATED=2]="UPDATED",e[e.ADDED=4]="ADDED",e[e.DELETED=8]="DELETED"})(c7||(c7={}));var l7;(function(e){e[e.None=0]="None",e[e.FileReadWrite=2]="FileReadWrite",e[e.FileOpenReadWriteClose=4]="FileOpenReadWriteClose",e[e.FileReadStream=16]="FileReadStream",e[e.FileFolderCopy=8]="FileFolderCopy",e[e.PathCaseSensitive=1024]="PathCaseSensitive",e[e.Readonly=2048]="Readonly",e[e.Trash=4096]="Trash",e[e.FileWriteUnlock=8192]="FileWriteUnlock",e[e.FileAtomicRead=16384]="FileAtomicRead",e[e.FileAtomicWrite=32768]="FileAtomicWrite",e[e.FileAtomicDelete=65536]="FileAtomicDelete",e[e.FileClone=131072]="FileClone"})(l7||(l7={}));var se;(function(e){e.FileExists="EntryExists",e.FileNotFound="EntryNotFound",e.FileNotADirectory="EntryNotADirectory",e.FileIsADirectory="EntryIsADirectory",e.FileExceedsStorageQuota="EntryExceedsStorageQuota",e.FileTooLarge="EntryTooLarge",e.FileWriteLocked="EntryWriteLocked",e.NoPermissions="NoPermissions",e.Unavailable="Unavailable",e.Unknown="Unknown"})(se||(se={}));var Fd=class II extends Error{static create(t,i){const r=new II(t.toString(),i);return u7(r,i),r}constructor(t,i){super(t),this.code=i}};function As(e,t){return Fd.create(e,t)}function $N(e){return e||As(p(1907,null),se.Unknown)}function u7(e,t){return e.name=t?`${t} (FileSystemError)`:"FileSystemError",e}function Md(e){if(!e)return se.Unknown;if(e instanceof Fd)return e.code;const t=/^(.+) \(FileSystemError\)$/.exec(e.name);if(!t)return se.Unknown;switch(t[1]){case se.FileExists:return se.FileExists;case se.FileIsADirectory:return se.FileIsADirectory;case se.FileNotADirectory:return se.FileNotADirectory;case se.FileNotFound:return se.FileNotFound;case se.FileTooLarge:return se.FileTooLarge;case se.FileWriteLocked:return se.FileWriteLocked;case se.NoPermissions:return se.NoPermissions;case se.Unavailable:return se.Unavailable}return se.Unknown}function CN(e){if(e instanceof rv)return e.fileOperationResult;switch(Md(e)){case se.FileNotFound:return 1;case se.FileIsADirectory:return 0;case se.FileNotADirectory:return 9;case se.FileWriteLocked:return 5;case se.NoPermissions:return 6;case se.FileExists:return 4;case se.FileTooLarge:return 7;default:return 10}}var h7;(function(e){e[e.CREATE=0]="CREATE",e[e.DELETE=1]="DELETE",e[e.MOVE=2]="MOVE",e[e.COPY=3]="COPY",e[e.WRITE=4]="WRITE"})(h7||(h7={}));var d7;(function(e){e[e.UPDATED=0]="UPDATED",e[e.ADDED=1]="ADDED",e[e.DELETED=2]="DELETED"})(d7||(d7={}));var kG=class wm{static{this.a=null}constructor(t,i){this.c=i,this.b=void 0,this.d=new Hi(()=>{const r=wn.forUris(()=>this.c);return r.fill(this.rawAdded.map(s=>[s,!0])),r}),this.f=new Hi(()=>{const r=wn.forUris(()=>this.c);return r.fill(this.rawUpdated.map(s=>[s,!0])),r}),this.g=new Hi(()=>{const r=wn.forUris(()=>this.c);return r.fill(this.rawDeleted.map(s=>[s,!0])),r}),this.rawAdded=[],this.rawUpdated=[],this.rawDeleted=[];for(const r of t){switch(r.type){case 1:this.rawAdded.push(r.resource);break;case 0:this.rawUpdated.push(r.resource);break;case 2:this.rawDeleted.push(r.resource);break}this.b!==wm.a&&(typeof r.cId=="number"?this.b===void 0?this.b=r.cId:this.b!==r.cId&&(this.b=wm.a):this.b!==void 0&&(this.b=wm.a))}}contains(t,...i){return this.h(t,{includeChildren:!1},...i)}affects(t,...i){return this.h(t,{includeChildren:!0},...i)}h(t,i,...r){if(!t)return!1;const s=r.length>0;return!!((!s||r.includes(1))&&(this.d.value.get(t)||i.includeChildren&&this.d.value.findSuperstr(t))||(!s||r.includes(0))&&(this.f.value.get(t)||i.includeChildren&&this.f.value.findSuperstr(t))||(!s||r.includes(2))&&(this.g.value.findSubstr(t)||i.includeChildren&&this.g.value.findSuperstr(t)))}gotAdded(){return this.rawAdded.length>0}gotDeleted(){return this.rawDeleted.length>0}gotUpdated(){return this.rawUpdated.length>0}correlates(t){return this.b===t}hasCorrelation(){return typeof this.b=="number"}};function IN(e,t,i){return!e||!t||e===t||t.length>e.length?!1:(t.charAt(t.length-1)!==ft&&(t+=ft),i?ed(e,t):e.indexOf(t)===0)}var rv=class extends Error{constructor(e,t,i){super(e),this.fileOperationResult=t,this.options=i}},f7;(function(e){e[e.FILE_IS_DIRECTORY=0]="FILE_IS_DIRECTORY",e[e.FILE_NOT_FOUND=1]="FILE_NOT_FOUND",e[e.FILE_NOT_MODIFIED_SINCE=2]="FILE_NOT_MODIFIED_SINCE",e[e.FILE_MODIFIED_SINCE=3]="FILE_MODIFIED_SINCE",e[e.FILE_MOVE_CONFLICT=4]="FILE_MOVE_CONFLICT",e[e.FILE_WRITE_LOCKED=5]="FILE_WRITE_LOCKED",e[e.FILE_PERMISSION_DENIED=6]="FILE_PERMISSION_DENIED",e[e.FILE_TOO_LARGE=7]="FILE_TOO_LARGE",e[e.FILE_INVALID_PATH=8]="FILE_INVALID_PATH",e[e.FILE_NOT_DIRECTORY=9]="FILE_NOT_DIRECTORY",e[e.FILE_OTHER_ERROR=10]="FILE_OTHER_ERROR"})(f7||(f7={}));var p7;(function(e){e[e.FILE=0]="FILE",e[e.FOLDER=1]="FOLDER",e[e.ROOT_FOLDER=2]="ROOT_FOLDER"})(p7||(p7={}));var PN="";function g7(e){if(!(typeof e.size!="number"||typeof e.mtime!="number"))return e.mtime.toString(29)+e.size.toString(31)}var m7=class Mi{static{this.KB=1024}static{this.MB=Mi.KB*Mi.KB}static{this.GB=Mi.MB*Mi.KB}static{this.TB=Mi.GB*Mi.KB}static formatSize(t){return Xi(t)||(t=0),t<Mi.KB?p(1908,null,t.toFixed(0)):t<Mi.MB?p(1909,null,(t/Mi.KB).toFixed(2)):t<Mi.GB?p(1910,null,(t/Mi.MB).toFixed(2)):t<Mi.TB?p(1911,null,(t/Mi.GB).toFixed(2)):p(1912,null,(t/Mi.TB).toFixed(2))}},DN=class extends X{constructor(e,t="",i="",r=!0,s){super(),this.j=this.B(new I),this.onDidChange=this.j.event,this.C=!0,this.m=e,this.n=t,this.z=i,this.C=r,this.F=s}get id(){return this.m}get label(){return this.n}set label(e){this.G(e)}G(e){this.n!==e&&(this.n=e,this.j.fire({label:e}))}get tooltip(){return this.u||""}set tooltip(e){this.H(e)}H(e){this.u!==e&&(this.u=e,this.j.fire({tooltip:e}))}get class(){return this.z}set class(e){this.I(e)}I(e){this.z!==e&&(this.z=e,this.j.fire({class:e}))}get enabled(){return this.C}set enabled(e){this.J(e)}J(e){this.C!==e&&(this.C=e,this.j.fire({enabled:e}))}get checked(){return this.D}set checked(e){this.L(e)}L(e){this.D!==e&&(this.D=e,this.j.fire({checked:e}))}async run(e,t){this.F&&await this.F(e)}},$G=class b4{constructor(){this.id=b4.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(...t){let i=[];for(const r of t)r.length&&(i.length?i=[...i,new b4,...r]:i=r);return i}static{this.ID="vs.actions.separator"}async run(){}},CG=class PI extends DN{static{this.ID="vs.actions.empty"}constructor(){super(PI.ID,p(46,null),void 0,!1)}},AN={EditorPane:"workbench.contributions.editors",EditorFactory:"workbench.contributions.editor.inputFactories"},RN={id:"default",displayName:p(4353,null),providerDisplayName:p(4354,null)},v7;(function(e){e[e.PROGRAMMATIC=1]="PROGRAMMATIC",e[e.USER=2]="USER",e[e.EDIT=3]="EDIT",e[e.NAVIGATION=4]="NAVIGATION",e[e.JUMP=5]="JUMP"})(v7||(v7={}));var w7;(function(e){e[e.IDENTICAL=1]="IDENTICAL",e[e.SIMILAR=2]="SIMILAR",e[e.DIFFERENT=3]="DIFFERENT"})(w7||(w7={}));function Ud(e){if(yn(e))return!1;const t=e;return t?.original!==void 0&&t.modified!==void 0}function b7(e){if(yn(e))return!1;const t=e;return!t||t.resources&&!Array.isArray(t.resources)?!1:!!t.resources||!!t.multiDiffSource}function sv(e){if(yn(e)||Ud(e))return!1;const t=e;return t?.primary!==void 0&&t.secondary!==void 0}function _d(e){if(yn(e))return!1;const t=e;return E.isUri(t?.base?.resource)&&E.isUri(t?.input1?.resource)&&E.isUri(t?.input2?.resource)&&E.isUri(t?.result?.resource)}var y7;(function(e){e[e.SHORT=0]="SHORT",e[e.MEDIUM=1]="MEDIUM",e[e.LONG=2]="LONG"})(y7||(y7={}));var E7;(function(e){e[e.EXPLICIT=1]="EXPLICIT",e[e.AUTO=2]="AUTO",e[e.FOCUS_CHANGE=3]="FOCUS_CHANGE",e[e.WINDOW_CHANGE=4]="WINDOW_CHANGE"})(E7||(E7={}));var TN=class{constructor(){this.a=new Map}registerSource(e,t){let i=this.a.get(e);return i||(i={source:e,label:t},this.a.set(e,i)),i.source}getSourceLabel(e){return this.a.get(e)?.label??e}},IG=new TN,S7;(function(e){e[e.None=0]="None",e[e.Readonly=2]="Readonly",e[e.Untitled=4]="Untitled",e[e.Singleton=8]="Singleton",e[e.RequiresTrust=16]="RequiresTrust",e[e.CanSplitInGroup=32]="CanSplitInGroup",e[e.ForceDescription=64]="ForceDescription",e[e.CanDropIntoEditor=128]="CanDropIntoEditor",e[e.MultipleEditors=256]="MultipleEditors",e[e.Scratchpad=512]="Scratchpad"})(S7||(S7={}));var LN=class extends X{};function yn(e){return e instanceof LN}function NN(e){const t=e;return E.isUri(t?.preferredResource)}function ON(e){const t=e;return yn(t?.primary)&&yn(t?.secondary)}function FN(e){const t=e;return yn(t?.modified)&&yn(t?.original)}var x7;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.REPLACE=1]="REPLACE",e[e.MOVE=2]="MOVE",e[e.UNPIN=3]="UNPIN"})(x7||(x7={}));var k7;(function(e){e[e.GROUP_ACTIVE=0]="GROUP_ACTIVE",e[e.GROUP_INDEX=1]="GROUP_INDEX",e[e.GROUP_LABEL=2]="GROUP_LABEL",e[e.GROUP_LOCKED=3]="GROUP_LOCKED",e[e.EDITORS_SELECTION=4]="EDITORS_SELECTION",e[e.EDITOR_OPEN=5]="EDITOR_OPEN",e[e.EDITOR_CLOSE=6]="EDITOR_CLOSE",e[e.EDITOR_MOVE=7]="EDITOR_MOVE",e[e.EDITOR_ACTIVE=8]="EDITOR_ACTIVE",e[e.EDITOR_LABEL=9]="EDITOR_LABEL",e[e.EDITOR_CAPABILITIES=10]="EDITOR_CAPABILITIES",e[e.EDITOR_PIN=11]="EDITOR_PIN",e[e.EDITOR_TRANSIENT=12]="EDITOR_TRANSIENT",e[e.EDITOR_STICKY=13]="EDITOR_STICKY",e[e.EDITOR_DIRTY=14]="EDITOR_DIRTY",e[e.EDITOR_WILL_DISPOSE=15]="EDITOR_WILL_DISPOSE"})(k7||(k7={}));var En;(function(e){e[e.PRIMARY=1]="PRIMARY",e[e.SECONDARY=2]="SECONDARY",e[e.BOTH=3]="BOTH",e[e.ANY=4]="ANY"})(En||(En={}));var MN=class{getOriginalUri(e,t){if(!e)return;if(_d(e))return C7.getOriginalUri(e.result,t);if(t?.supportSideBySide){const{primary:r,secondary:s}=this.a(e);if(r&&s){if(t?.supportSideBySide===En.BOTH)return{primary:this.getOriginalUri(r,{filterByScheme:t.filterByScheme}),secondary:this.getOriginalUri(s,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===En.ANY)return this.getOriginalUri(r,{filterByScheme:t.filterByScheme})??this.getOriginalUri(s,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===En.PRIMARY?r:s}}if(Ud(e)||b7(e)||sv(e)||_d(e))return;const i=NN(e)?e.preferredResource:e.resource;return!i||!t||!t.filterByScheme?i:this.b(i,t.filterByScheme)}a(e){return ON(e)||sv(e)?{primary:e.primary,secondary:e.secondary}:FN(e)||Ud(e)?{primary:e.modified,secondary:e.original}:{primary:void 0,secondary:void 0}}getCanonicalUri(e,t){if(!e)return;if(_d(e))return C7.getCanonicalUri(e.result,t);if(t?.supportSideBySide){const{primary:r,secondary:s}=this.a(e);if(r&&s){if(t?.supportSideBySide===En.BOTH)return{primary:this.getCanonicalUri(r,{filterByScheme:t.filterByScheme}),secondary:this.getCanonicalUri(s,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===En.ANY)return this.getCanonicalUri(r,{filterByScheme:t.filterByScheme})??this.getCanonicalUri(s,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===En.PRIMARY?r:s}}if(Ud(e)||b7(e)||sv(e)||_d(e))return;const i=e.resource;return!i||!t||!t.filterByScheme?i:this.b(i,t.filterByScheme)}b(e,t){if(Array.isArray(t)){if(t.some(i=>e.scheme===i))return e}else if(t===e.scheme)return e}},$7;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.KEYBOARD=1]="KEYBOARD",e[e.MOUSE=2]="MOUSE"})($7||($7={}));var C7=new MN,I7;(function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"})(I7||(I7={}));var UN=class{constructor(){this.c=new Map,this.d=new Map}start(e){const t=this.a=e.get(Sd);for(const[i,r]of this.c)this.e(i,r,t);this.c.clear()}e(e,t,i){const r=i.createInstance(t);this.d.set(e,r)}registerFileEditorFactory(e){if(this.b)throw new Error("Can only register one file editor factory.");this.b=e}getFileEditorFactory(){return ga(this.b)}registerEditorSerializer(e,t){if(this.c.has(e)||this.d.has(e))throw new Error(`A editor serializer with type ID '${e}' was already registered.`);return this.a?this.e(e,t,this.a):this.c.set(e,t),ee(()=>{this.c.delete(e),this.d.delete(e)})}getEditorSerializer(e){return this.d.get(typeof e=="string"?e:e.typeId)}};ai.add(AN.EditorFactory,new UN);var P7;(function(e){e[e.MOST_RECENTLY_ACTIVE=0]="MOST_RECENTLY_ACTIVE",e[e.SEQUENTIAL=1]="SEQUENTIAL"})(P7||(P7={}));var Al=class{constructor(e,t,i){this.owner=e,this.debugNameSource=t,this.referenceFn=i}getDebugName(e){return _N(e,this)}},D7=new Map,nv=new WeakMap;function _N(e,t){const i=nv.get(e);if(i)return i;const r=jN(e,t);if(r){let s=D7.get(r)??0;s++,D7.set(r,s);const n=s===1?r:`${r}#${s}`;return nv.set(e,n),n}}function jN(e,t){const i=nv.get(e);if(i)return i;const r=t.owner?BN(t.owner)+".":"";let s;const n=t.debugNameSource;if(n!==void 0)if(typeof n=="function"){if(s=n(),s!==void 0)return r+s}else return r+n;const o=t.referenceFn;if(o!==void 0&&(s=ov(o),s!==void 0))return r+s;if(t.owner!==void 0){const a=HN(t.owner,e);if(a!==void 0)return r+a}}function HN(e,t){for(const i in e)if(e[i]===t)return i}var A7=new Map,R7=new WeakMap;function BN(e){const t=R7.get(e);if(t)return t;const i=WN(e);let r=A7.get(i)??0;r++,A7.set(i,r);const s=r===1?i:`${i}#${r}`;return R7.set(e,s),s}function WN(e){const t=e.constructor;return t?t.name:"Object"}function ov(e){const t=e.toString(),r=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(t);return(r?r[1]:void 0)?.trim()}var av=(e,t)=>e===t;function cv(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!cv(e[i],t[i]))return!1;return!0}if(e&&typeof e=="object"&&t&&typeof t=="object"&&Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(t)===Object.prototype){const i=e,r=t,s=Object.keys(i),n=Object.keys(r),o=new Set(n);if(s.length!==n.length)return!1;for(const a of s)if(!o.has(a)||!cv(i[a],r[a]))return!1;return!0}return!1}var T7;function zN(e){T7=e}function es(){return T7}var VN=class{constructor(){this.a=0,this.d=new WeakMap}b(e){return qN([Da(QN("|  ",this.a)),e])}c(e){return e.hadValue?e.didChange?[Da(" "),Ar(Tl(e.oldValue,70),{color:"red",strikeThrough:!0}),Da(" "),Ar(Tl(e.newValue,60),{color:"green"})]:[Da(" (unchanged)")]:[Da(" "),Ar(Tl(e.newValue,60),{color:"green"}),Da(" (initial)")]}handleObservableChanged(e,t){console.log(...this.b([Rl("observable value changed"),Ar(e.debugName,{color:"BlueViolet"}),...this.c(t)]))}formatChanges(e){if(e.size!==0)return Ar(" (changed deps: "+[...e].map(t=>t.debugName).join(", ")+")",{color:"gray"})}handleDerivedCreated(e){const t=e.handleChange;this.d.set(e,new Set),e.handleChange=(i,r)=>(this.d.get(e).add(i),t.apply(e,[i,r]))}handleDerivedRecomputed(e,t){const i=this.d.get(e);console.log(...this.b([Rl("derived recomputed"),Ar(e.debugName,{color:"BlueViolet"}),...this.c(t),this.formatChanges(i),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),i.clear()}handleFromEventObservableTriggered(e,t){console.log(...this.b([Rl("observable from event triggered"),Ar(e.debugName,{color:"BlueViolet"}),...this.c(t),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){const t=e.handleChange;this.d.set(e,new Set),e.handleChange=(i,r)=>(this.d.get(e).add(i),t.apply(e,[i,r]))}handleAutorunTriggered(e){const t=this.d.get(e);console.log(...this.b([Rl("autorun"),Ar(e.debugName,{color:"BlueViolet"}),this.formatChanges(t),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),t.clear(),this.a++}handleAutorunFinished(e){this.a--}handleBeginTransaction(e){let t=e.getDebugName();t===void 0&&(t=""),console.log(...this.b([Rl("transaction"),Ar(t,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.a++}handleEndTransaction(){this.a--}};function qN(e){const t=new Array,i=[];let r="";function s(o){if("length"in o)for(const a of o)a&&s(a);else"text"in o?(r+=`%c${o.text}`,t.push(o.style),o.data&&i.push(...o.data)):"data"in o&&i.push(...o.data)}s(e);const n=[r,...t];return n.push(...i),n}function Da(e){return Ar(e,{color:"black"})}function Rl(e){return Ar(YN(`${e}: `,10),{color:"black",bold:!0})}function Ar(e,t={color:"black"}){function i(s){return Object.entries(s).reduce((n,[o,a])=>`${n}${o}:${a};`,"")}const r={color:t.color};return t.strikeThrough&&(r["text-decoration"]="line-through"),t.bold&&(r["font-weight"]="bold"),{text:e,style:i(r)}}function Tl(e,t){switch(typeof e){case"number":return""+e;case"string":return e.length+2<=t?`"${e}"`:`"${e.substr(0,t-7)}"+...`;case"boolean":return e?"true":"false";case"undefined":return"undefined";case"object":return e===null?"null":Array.isArray(e)?GN(e,t):JN(e,t);case"symbol":return e.toString();case"function":return`[[Function${e.name?" "+e.name:""}]]`;default:return""+e}}function GN(e,t){let i="[ ",r=!0;for(const s of e){if(r||(i+=", "),i.length-5>t){i+="...";break}r=!1,i+=`${Tl(s,t-i.length)}`}return i+=" ]",i}function JN(e,t){let i="{ ",r=!0;for(const[s,n]of Object.entries(e)){if(r||(i+=", "),i.length-5>t){i+="...";break}r=!1,i+=`${s}: ${Tl(n,t-i.length)}`}return i+=" }",i}function QN(e,t){let i="";for(let r=1;r<=t;r++)i+=e;return i}function YN(e,t){for(;e.length<t;)e+=" ";return e}var L7;function XN(e){L7=e}var N7;function ZN(e){N7=e}var lv;function KN(e){lv=e}var eO=class{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t){const i=t===void 0?void 0:e,r=t===void 0?e:t;return lv({owner:i,debugName:()=>{const s=ov(r);if(s!==void 0)return s;const o=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(r.toString());if(o)return`${this.debugName}.${o[2]}`;if(!i)return`${this.debugName} (mapped)`},debugReferenceFn:r},s=>r(this.read(s),s))}flatten(){return lv({owner:void 0,debugName:()=>`${this.debugName} (flattened)`},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,t){return e.add(L7(this,t)),this}keepObserved(e){return e.add(N7(this)),this}get a(){return this.get()}},uv=class extends eO{constructor(){super(...arguments),this.b=new Set}addObserver(e){const t=this.b.size;this.b.add(e),t===0&&this.c()}removeObserver(e){this.b.delete(e)&&this.b.size===0&&this.f()}c(){}f(){}};function tO(e,t){const i=new O7(e,t);try{e(i)}finally{i.finish()}}function iO(e,t,i){e?t(e):tO(t,i)}var O7=class{constructor(e,t){this._fn=e,this.b=t,this.a=[],es()?.handleBeginTransaction(this)}getDebugName(){return this.b?this.b():ov(this._fn)}updateObserver(e,t){this.a.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){const e=this.a;for(let t=0;t<e.length;t++){const{observer:i,observable:r}=e[t];i.endUpdate(r)}this.a=null,es()?.handleEndTransaction()}};function rO(e,t){let i;return typeof e=="string"?i=new Al(void 0,e,void 0):i=new Al(e,void 0,void 0),new sO(i,t,av)}var sO=class extends uv{get debugName(){return this.e.getDebugName(this)??"ObservableValue"}constructor(e,t,i){super(),this.e=e,this.g=i,this.d=t}get(){return this.d}set(e,t,i){if(i===void 0&&this.g(this.d,e))return;let r;t||(t=r=new O7(()=>{},()=>`Setting ${this.debugName}`));try{const s=this.d;this.h(e),es()?.handleObservableChanged(this,{oldValue:s,newValue:e,change:i,didChange:!0,hadValue:!0});for(const n of this.b)t.updateObserver(n,this),n.handleChange(this,i)}finally{r&&r.finish()}}toString(){return`${this.debugName}: ${this.d}`}h(e){this.d=e}};function F7(e){return new U7(new Al(void 0,void 0,e),e,void 0,void 0)}var M7;(function(e){e[e.dependenciesMightHaveChanged=1]="dependenciesMightHaveChanged",e[e.stale=2]="stale",e[e.upToDate=3]="upToDate"})(M7||(M7={}));var U7=class{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,i,r){this._debugNameData=e,this._runFn=t,this.i=i,this.j=r,this.a=2,this.b=0,this.c=!1,this.f=new Set,this.g=new Set,this.l=!1,this.h=this.i?.(),es()?.handleAutorunCreated(this),this.k(),fa(this)}dispose(){this.c=!0;for(const e of this.f)e.removeObserver(this);this.f.clear(),pa(this)}k(){if(this.a===3)return;const e=this.g;this.g=this.f,this.f=e,this.a=3;const t=this.c;try{if(!t){es()?.handleAutorunTriggered(this);const i=this.h;try{this.h=this.i?.(),this.l=!0,this._runFn(this,i)}catch(r){Uh(r)}finally{this.l=!1}}}finally{t||es()?.handleAutorunFinished(this);for(const i of this.g)i.removeObserver(this);this.g.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(){this.a===3&&(this.a=1),this.b++}endUpdate(){try{if(this.b===1)do{if(this.a===1){this.a=3;for(const e of this.f)if(e.reportChanges(),this.a===2)break}this.k()}while(this.a!==3)}finally{this.b--}a7(()=>this.b>=0)}handlePossibleChange(e){this.a===3&&this.f.has(e)&&!this.g.has(e)&&(this.a=1)}handleChange(e,t){if(this.f.has(e)&&!this.g.has(e))try{(this.j?this.j({changedObservable:e,change:t,didChange:r=>r===e},this.h):!0)&&(this.a=2)}catch(i){Uh(i)}}readObservable(e){if(!this.l)throw new ua("The reader object cannot be used outside its compute function!");if(this.c)return e.get();e.addObserver(this);const t=e.get();return this.f.add(e),this.g.delete(e),t}};(function(e){e.Observer=U7})(F7||(F7={}));function nO(e,t){return new oO(new Al(e.owner,e.debugName,e.debugReferenceFn),t,void 0,void 0,e.onLastObserverRemoved,e.equalsFn??av)}KN(nO);var _7;(function(e){e[e.initial=0]="initial",e[e.dependenciesMightHaveChanged=1]="dependenciesMightHaveChanged",e[e.stale=2]="stale",e[e.upToDate=3]="upToDate"})(_7||(_7={}));var oO=class extends uv{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,i,r,s=void 0,n){super(),this._debugNameData=e,this._computeFn=t,this.q=i,this.s=r,this.t=s,this.u=n,this.g=0,this.h=void 0,this.j=0,this.k=new Set,this.l=new Set,this.m=void 0,this.n=!1,this.p=!1,this.x=!1,this.m=this.q?.(),es()?.handleDerivedCreated(this)}f(){this.g=0,this.h=void 0;for(const e of this.k)e.removeObserver(this);this.k.clear(),this.t?.()}get(){if(this.p)throw new ua("Cyclic deriveds are not supported yet!");if(this.b.size===0){let e;try{this.x=!0,e=this._computeFn(this,this.q?.())}finally{this.x=!1}return this.f(),e}else{do{if(this.g===1){for(const e of this.k)if(e.reportChanges(),this.g===2)break}this.g===1&&(this.g=3),this.w()}while(this.g!==3);return this.h}}w(){if(this.g===3)return;const e=this.l;this.l=this.k,this.k=e;const t=this.g!==0,i=this.h;this.g=3;let r=!1;this.p=!1;try{const s=this.m;this.m=this.q?.();try{this.x=!0,this.h=this._computeFn(this,s)}finally{this.x=!1;for(const n of this.l)n.removeObserver(this);this.l.clear()}r=t&&!this.u(i,this.h),es()?.handleDerivedRecomputed(this,{oldValue:i,newValue:this.h,change:void 0,didChange:r,hadValue:t})}catch(s){Uh(s)}if(this.p=!1,r)for(const s of this.b)s.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(e){if(this.n)throw new ua("Cyclic deriveds are not supported yet!");this.j++,this.n=!0;try{const t=this.j===1;if(this.g===3&&(this.g=1,!t))for(const i of this.b)i.handlePossibleChange(this);if(t)for(const i of this.b)i.beginUpdate(this)}finally{this.n=!1}}endUpdate(e){if(this.j--,this.j===0){const t=[...this.b];for(const i of t)i.endUpdate(this)}a7(()=>this.j>=0)}handlePossibleChange(e){if(this.g===3&&this.k.has(e)&&!this.l.has(e)){this.g=1;for(const t of this.b)t.handlePossibleChange(this)}}handleChange(e,t){if(this.k.has(e)&&!this.l.has(e)){let i=!1;try{i=this.s?this.s({changedObservable:e,change:t,didChange:s=>s===e},this.m):!0}catch(s){Uh(s)}const r=this.g===3;if(i&&(this.g===1||r)&&(this.g=2,r))for(const s of this.b)s.handlePossibleChange(this)}}readObservable(e){if(!this.x)throw new ua("The reader object cannot be used outside its compute function!");e.addObserver(this);const t=e.get();return this.k.add(e),this.l.delete(e),t}addObserver(e){const t=!this.b.has(e)&&this.j>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){const t=this.b.has(e)&&this.j>0;super.removeObserver(e),t&&e.endUpdate(this)}};function j7(...e){let t,i,r;return e.length===3?[t,i,r]=e:[i,r]=e,new Aa(new Al(t,void 0,r),i,r,()=>Aa.globalTransaction,av)}var Aa=class extends uv{constructor(e,t,i,r,s){super(),this.k=e,this.l=t,this._getValue=i,this.n=r,this.p=s,this.h=!1,this.s=n=>{const o=this._getValue(n),a=this.g,c=!this.h||!this.p(a,o);let l=!1;c&&(this.g=o,this.h&&(l=!0,iO(this.n(),u=>{es()?.handleFromEventObservableTriggered(this,{oldValue:a,newValue:o,change:void 0,didChange:c,hadValue:this.h});for(const h of this.b)u.updateObserver(h,this),h.handleChange(this,void 0)},()=>{const u=this.q();return"Event fired"+(u?`: ${u}`:"")})),this.h=!0),l||es()?.handleFromEventObservableTriggered(this,{oldValue:a,newValue:o,change:void 0,didChange:c,hadValue:this.h})}}q(){return this.k.getDebugName(this)}get debugName(){const e=this.q();return"From Event"+(e?`: ${e}`:"")}c(){this.j=this.l(this.s)}f(){this.j.dispose(),this.j=void 0,this.h=!1,this.g=void 0}get(){return this.j?(this.h||this.s(void 0),this.g):this._getValue(void 0)}};(function(e){e.Observer=Aa;function t(i,r){let s=!1;Aa.globalTransaction===void 0&&(Aa.globalTransaction=i,s=!0);try{r()}finally{s&&(Aa.globalTransaction=void 0)}}e.batchEventsGlobally=t})(j7||(j7={}));function aO(e){const t=new H7(!1,void 0);return e.addObserver(t),ee(()=>{e.removeObserver(t)})}ZN(aO);function cO(e,t){const i=new H7(!0,t);return e.addObserver(i),t?t(e.get()):e.reportChanges(),ee(()=>{e.removeObserver(i)})}XN(cO);var H7=class{constructor(e,t){this.b=e,this.c=t,this.a=0}beginUpdate(e){this.a++}endUpdate(e){this.a--,this.a===0&&this.b&&(this.c?this.c(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,t){}},lO=!1;lO&&zN(new VN);function hv(e){if(!e)return;const t=e.indexOf("+");return t<0?e:e.substr(0,t)}var uO=["AI","Azure","Chat","Data Science","Debuggers","Extension Packs","Education","Formatters","Keymaps","Language Packs","Linters","Machine Learning","Notebooks","Programming Languages","SCM Providers","Snippets","Testing","Themes","Visualization","Other"],B7;(function(e){e[e.System=0]="System",e[e.User=1]="User"})(B7||(B7={}));var W7;(function(e){e.WIN32_X64="win32-x64",e.WIN32_ARM64="win32-arm64",e.LINUX_X64="linux-x64",e.LINUX_ARM64="linux-arm64",e.LINUX_ARMHF="linux-armhf",e.ALPINE_X64="alpine-x64",e.ALPINE_ARM64="alpine-arm64",e.DARWIN_X64="darwin-x64",e.DARWIN_ARM64="darwin-arm64",e.WEB="web",e.UNIVERSAL="universal",e.UNKNOWN="unknown",e.UNDEFINED="undefined"})(W7||(W7={}));var Xe=class{constructor(e){this.value=e,this._lower=e.toLowerCase()}static equals(e,t){if(typeof e>"u"||e===null)return typeof t>"u"||t===null;if(typeof t>"u"||t===null)return!1;if(typeof e=="string"||typeof t=="string"){const i=typeof e=="string"?e:e.value,r=typeof t=="string"?t:t.value;return xr(i,r)}return e._lower===t._lower}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}},bo=class{get size(){return this.c.size}constructor(e){if(this.c=new Set,e)for(const t of e)this.add(t)}add(e){this.c.add(Xe.toKey(e))}delete(e){return this.c.delete(Xe.toKey(e))}has(e){return this.c.has(Xe.toKey(e))}},Rs=class{constructor(){this.c=new Map}clear(){this.c.clear()}delete(e){this.c.delete(Xe.toKey(e))}get(e){return this.c.get(Xe.toKey(e))}has(e){return this.c.has(Xe.toKey(e))}set(e,t){this.c.set(Xe.toKey(e),t)}values(){return this.c.values()}forEach(e){this.c.forEach(e)}[Symbol.iterator](){return this.c[Symbol.iterator]()}},PG=V("IBuiltinExtensionsScannerService"),jd=V("productService"),hO="vscode://schemas/vscode-product",Sn=V("configurationService"),z7;(function(e){e[e.APPLICATION=1]="APPLICATION",e[e.USER=2]="USER",e[e.USER_LOCAL=3]="USER_LOCAL",e[e.USER_REMOTE=4]="USER_REMOTE",e[e.WORKSPACE=5]="WORKSPACE",e[e.WORKSPACE_FOLDER=6]="WORKSPACE_FOLDER",e[e.DEFAULT=7]="DEFAULT",e[e.MEMORY=8]="MEMORY"})(z7||(z7={}));function dv(e,t){const i=Object.create(null);for(const r in e)V7(i,r,e[r],t);return i}function V7(e,t,i,r){const s=t.split("."),n=s.pop();let o=e;for(let a=0;a<s.length;a++){const c=s[a];let l=o[c];switch(typeof l){case"undefined":l=o[c]=Object.create(null);break;case"object":if(l===null){r(`Ignoring ${t} as ${s.slice(0,a+1).join(".")} is null`);return}break;default:r(`Ignoring ${t} as ${s.slice(0,a+1).join(".")} is ${JSON.stringify(l)}`);return}o=l}if(typeof o=="object"&&o!==null)try{o[n]=i}catch{r(`Ignoring ${t} as ${s.join(".")} is ${JSON.stringify(o)}`)}else r(`Ignoring ${t} as ${s.join(".")} is ${JSON.stringify(o)}`)}function dO(e,t){const i=t.split(".");q7(e,i)}function q7(e,t){const i=t.shift();if(t.length===0){delete e[i];return}if(Object.keys(e).indexOf(i)!==-1){const r=e[i];typeof r=="object"&&!Array.isArray(r)&&(q7(r,t),Object.keys(r).length===0&&delete e[i])}}function Hd(e,t,i){function r(o,a){let c=o;for(const l of a){if(typeof c!="object"||c===null)return;c=c[l]}return c}const s=t.split("."),n=r(e,s);return typeof n>"u"?i:n}function fO(e){return e.replace(/[\[\]]/g,"")}function pO(e){let t=!1;const i=new Map,r=new Map;if(gO(e,u=>{if(e===u)return!0;const h=JSON.stringify(u);if(h.length<30)return!0;const d=i.get(h);if(!d){const f={schemas:[u]};return i.set(h,f),r.set(u,f),!0}return d.schemas.push(u),r.set(u,d),t=!0,!1}),i.clear(),!t)return JSON.stringify(e);let n="$defs";for(;e.hasOwnProperty(n);)n+="_";const o=[];function a(u){return JSON.stringify(u,(h,d)=>{if(d!==u){const f=r.get(d);if(f&&f.schemas.length>1)return f.id||(f.id=`_${o.length}`,o.push(f.schemas[0])),{$ref:`#/${n}/${f.id}`}}return d})}const c=a(e),l=[];for(let u=0;u<o.length;u++)l.push(`"_${u}":${a(o[u])}`);return l.length?`${c.substring(0,c.length-1)},"${n}":{${l.join(",")}}}`:c}function Ra(e){return typeof e=="object"&&e!==null}function gO(e,t){if(!e||typeof e!="object")return;const i=(...c)=>{for(const l of c)Ra(l)&&o.push(l)},r=(...c)=>{for(const l of c)if(Ra(l))for(const u in l){const h=l[u];Ra(h)&&o.push(h)}},s=(...c)=>{for(const l of c)if(Array.isArray(l))for(const u of l)Ra(u)&&o.push(u)},n=c=>{if(Array.isArray(c))for(const l of c)Ra(l)&&o.push(l);else Ra(c)&&o.push(c)},o=[e];let a=o.pop();for(;a;)t(a)&&(i(a.additionalItems,a.additionalProperties,a.not,a.contains,a.propertyNames,a.if,a.then,a.else,a.unevaluatedItems,a.unevaluatedProperties),r(a.definitions,a.$defs,a.properties,a.patternProperties,a.dependencies,a.dependentSchemas),s(a.anyOf,a.allOf,a.oneOf,a.prefixItems),n(a.items)),a=o.pop()}var Bd={JSONContribution:"base.contributions.json"};function mO(e){return e.length>0&&e.charAt(e.length-1)==="#"?e.substring(0,e.length-1):e}var vO=class{constructor(){this.b=new I,this.onDidChangeSchema=this.b.event,this.a={}}registerSchema(e,t){this.a[mO(e)]=t,this.b.fire(e)}notifySchemaChanged(e){this.b.fire(e)}getSchemaContributions(){return{schemas:this.a}}getSchemaContent(e){const t=this.a[e];return t?pO(t):void 0}hasSchemaContent(e){return!!this.a[e]}},wO=new vO;ai.add(Bd.JSONContribution,wO);var G7;(function(e){e.Multiline="multilineText",e.Singleline="singlelineText"})(G7||(G7={}));var Ta={Configuration:"base.contributions.configuration"},J7;(function(e){e[e.APPLICATION=1]="APPLICATION",e[e.MACHINE=2]="MACHINE",e[e.WINDOW=3]="WINDOW",e[e.RESOURCE=4]="RESOURCE",e[e.LANGUAGE_OVERRIDABLE=5]="LANGUAGE_OVERRIDABLE",e[e.MACHINE_OVERRIDABLE=6]="MACHINE_OVERRIDABLE"})(J7||(J7={}));var Wd={properties:{},patternProperties:{}},zd={properties:{},patternProperties:{}},Vd={properties:{},patternProperties:{}},qd={properties:{},patternProperties:{}},Gd={properties:{},patternProperties:{}},Ll={properties:{},patternProperties:{}},yo="vscode://schemas/settings/resourceLanguage",Jd=ai.as(Bd.JSONContribution),bO=class{constructor(){this.a=[],this.i=new Set,this.j=new I,this.onDidSchemaChange=this.j.event,this.k=new I,this.onDidUpdateConfiguration=this.k.event,this.b=new Map,this.c={id:"defaultOverrides",title:p(1696,null),properties:{}},this.d=[this.c],this.h={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.e={},this.f=new Map,this.g={},Jd.registerSchema(yo,this.h),this.z()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const i=new Set;this.r(e,t,i),Jd.registerSchema(yo,this.h),this.j.fire(),this.k.fire({properties:i})}deregisterConfigurations(e){const t=new Set;this.s(e,t),Jd.registerSchema(yo,this.h),this.j.fire(),this.k.fire({properties:t})}updateConfigurations({add:e,remove:t}){const i=new Set;this.s(t,i),this.r(e,!1,i),Jd.registerSchema(yo,this.h),this.j.fire(),this.k.fire({properties:i})}registerDefaultConfigurations(e){const t=new Set;this.l(e,t),this.j.fire(),this.k.fire({properties:t,defaultsOverrides:!0})}l(e,t){this.a.push(...e);const i=[];for(const{overrides:r,source:s}of e)for(const n in r){t.add(n);const o=this.b.get(n)??this.b.set(n,{configurationDefaultOverrides:[]}).get(n),a=r[n];if(o.configurationDefaultOverrides.push({value:a,source:s}),ts.test(n)){const c=this.o(n,a,s,o.configurationDefaultOverrideValue);if(!c)continue;o.configurationDefaultOverrideValue=c,this.n(n,c,s),i.push(...Nl(n))}else{const c=this.p(n,a,s,o.configurationDefaultOverrideValue);if(!c)continue;o.configurationDefaultOverrideValue=c;const l=this.e[n];l&&(this.A(n,l),this.w(n,l))}}this.q(i)}deregisterDefaultConfigurations(e){const t=new Set;this.m(e,t),this.j.fire(),this.k.fire({properties:t,defaultsOverrides:!0})}m(e,t){for(const i of e){const r=this.a.indexOf(i);r!==-1&&this.a.splice(r,1)}for(const{overrides:i,source:r}of e)for(const s in i){const n=this.b.get(s);if(!n)continue;const o=n.configurationDefaultOverrides.findIndex(a=>r?a.source?.id===r.id:a.value===i[s]);if(o!==-1){if(n.configurationDefaultOverrides.splice(o,1),n.configurationDefaultOverrides.length===0&&this.b.delete(s),ts.test(s)){let a;for(const c of n.configurationDefaultOverrides)a=this.o(s,c.value,c.source,a);a&&!H5(a.value)?(n.configurationDefaultOverrideValue=a,this.n(s,a,r)):(this.b.delete(s),delete this.e[s],delete this.c.properties[s])}else{let a;for(const l of n.configurationDefaultOverrides)a=this.p(s,l.value,l.source,a);n.configurationDefaultOverrideValue=a;const c=this.e[s];c&&(this.A(s,c),this.w(s,c))}t.add(s)}}this.y()}n(e,t,i){const r={type:"object",default:t.value,description:p(1697,null,fO(e)),$ref:yo,defaultDefaultValue:t.value,source:i,defaultValueSource:i};this.e[e]=r,this.c.properties[e]=r}o(e,t,i,r){const s=r?.value||{},n=r?.source??new Map;if(!(n instanceof Map)){console.error("objectConfigurationSources is not a Map");return}for(const o of Object.keys(t)){const a=t[o];if(St(a)&&(ol(s[o])||St(s[o]))){if(s[o]={...s[o]??{},...a},i)for(const l in a)n.set(`${o}.${l}`,i)}else s[o]=a,i?n.set(o,i):n.delete(o)}return{value:s,source:n}}p(e,t,i,r){const s=this.e[e],n=r?.value??s?.defaultDefaultValue;let o=i;if(St(t)&&(s!==void 0&&s.type==="object"||s===void 0&&(ol(n)||St(n)))){if(o=r?.source??new Map,!(o instanceof Map)){console.error("defaultValueSource is not a Map");return}for(const c in t)i&&o.set(`${e}.${c}`,i);t={...St(n)?n:{},...t}}return{value:t,source:o}}deltaConfiguration(e){let t=!1;const i=new Set;e.removedDefaults&&(this.m(e.removedDefaults,i),t=!0),e.addedDefaults&&(this.l(e.addedDefaults,i),t=!0),e.removedConfigurations&&this.s(e.removedConfigurations,i),e.addedConfigurations&&this.r(e.addedConfigurations,!1,i),this.j.fire(),this.k.fire({properties:i,defaultsOverrides:t})}notifyConfigurationSchemaUpdated(...e){this.j.fire()}registerOverrideIdentifiers(e){this.q(e),this.j.fire()}q(e){for(const t of e)this.i.add(t);this.y()}r(e,t,i){e.forEach(r=>{this.u(r,t,r.extensionInfo,r.restrictedProperties,void 0,i),this.d.push(r),this.v(r)})}s(e,t){const i=r=>{if(r.properties)for(const s in r.properties){t.add(s);const n=this.e[s];n?.policy?.name&&this.f.delete(n.policy.name),delete this.e[s],this.x(s,r.properties[s])}r.allOf?.forEach(s=>i(s))};for(const r of e){i(r);const s=this.d.indexOf(r);s!==-1&&this.d.splice(s,1)}}u(e,t=!0,i,r,s=3,n){s=$t(e.scope)?s:e.scope;const o=e.properties;if(o)for(const c in o){const l=o[c];if(t&&EO(c,l)){delete o[c];continue}if(l.source=i,l.defaultDefaultValue=o[c].default,this.A(c,l),ts.test(c)?l.scope=void 0:(l.scope=$t(l.scope)?s:l.scope,l.restricted=$t(l.restricted)?!!r?.includes(c):l.restricted),o[c].hasOwnProperty("included")&&!o[c].included){this.g[c]=o[c],delete o[c];continue}else this.e[c]=o[c],o[c].policy?.name&&this.f.set(o[c].policy.name,c);!o[c].deprecationMessage&&o[c].markdownDeprecationMessage&&(o[c].deprecationMessage=o[c].markdownDeprecationMessage),n.add(c)}const a=e.allOf;if(a)for(const c of a)this.u(c,t,i,r,s,n)}getConfigurations(){return this.d}getConfigurationProperties(){return this.e}getPolicyConfigurations(){return this.f}getExcludedConfigurationProperties(){return this.g}getRegisteredDefaultConfigurations(){return[...this.a]}getConfigurationDefaultsOverrides(){const e=new Map;for(const[t,i]of this.b)i.configurationDefaultOverrideValue&&e.set(t,i.configurationDefaultOverrideValue);return e}v(e){const t=i=>{const r=i.properties;if(r)for(const n in r)this.w(n,r[n]);i.allOf?.forEach(t)};t(e)}w(e,t){switch(Wd.properties[e]=t,t.scope){case 1:zd.properties[e]=t;break;case 2:Vd.properties[e]=t;break;case 6:qd.properties[e]=t;break;case 3:Gd.properties[e]=t;break;case 4:Ll.properties[e]=t;break;case 5:Ll.properties[e]=t,this.h.properties[e]=t;break}}x(e,t){switch(delete Wd.properties[e],t.scope){case 1:delete zd.properties[e];break;case 2:delete Vd.properties[e];break;case 6:delete qd.properties[e];break;case 3:delete Gd.properties[e];break;case 4:case 5:delete Ll.properties[e],delete this.h.properties[e];break}}y(){for(const e of this.i.values()){const t=`[${e}]`,i={type:"object",description:p(1698,null),errorMessage:p(1699,null),$ref:yo};this.A(t,i),Wd.properties[t]=i,zd.properties[t]=i,Vd.properties[t]=i,qd.properties[t]=i,Gd.properties[t]=i,Ll.properties[t]=i}}z(){const e={type:"object",description:p(1700,null),errorMessage:p(1701,null),$ref:yo};Wd.patternProperties[Eo]=e,zd.patternProperties[Eo]=e,Vd.patternProperties[Eo]=e,qd.patternProperties[Eo]=e,Gd.patternProperties[Eo]=e,Ll.patternProperties[Eo]=e,this.j.fire()}A(e,t){const i=this.b.get(e)?.configurationDefaultOverrideValue;let r,s;i&&(!t.disallowConfigurationDefault||!i.source)&&(r=i.value,s=i.source),ol(r)&&(r=t.defaultDefaultValue,s=void 0),ol(r)&&(r=yO(t.type)),t.default=r,t.defaultValueSource=s}},Q7="\\[([^\\]]+)\\]",Y7=new RegExp(Q7,"g"),Eo=`^(${Q7})+$`,ts=new RegExp(Eo);function Nl(e){const t=[];if(ts.test(e)){let i=Y7.exec(e);for(;i?.length;){const r=i[1].trim();r&&t.push(r),i=Y7.exec(e)}}return ha(t)}function yO(e){switch(Array.isArray(e)?e[0]:e){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}var Qd=new bO;ai.add(Ta.Configuration,Qd);function EO(e,t){return e.trim()?ts.test(e)?p(1703,null,e):Qd.getConfigurationProperties()[e]!==void 0?p(1704,null,e):t.policy?.name&&Qd.getPolicyConfigurations().get(t.policy?.name)!==void 0?p(1705,null,e,t.policy?.name,Qd.getPolicyConfigurations().get(t.policy?.name)):null:p(1702,null)}var SO=V("requestService");function xO(e){return e.res.statusCode&&e.res.statusCode>=200&&e.res.statusCode<300||e.res.statusCode===1223}function kO(e){return e.res.statusCode===204}async function $O(e){if(!xO(e))throw new Error("Server returned "+e.res.statusCode);if(kO(e))return null;const i=(await PR(e.stream)).toString();try{return JSON.parse(i)}catch(r){throw r.message+=`:
`+i,r}}var fv;function CO(e){const t=ai.as(Ta.Configuration),i=fv;fv={id:"http",order:15,title:p(2118,null),type:"object",scope:e,properties:{"http.proxy":{type:"string",pattern:"^(https?|socks|socks4a?|socks5h?)://([^:]*(:[^@]*)?@)?([^:]+|\\[[:0-9a-fA-F]+\\])(:\\d+)?/?$|^$",markdownDescription:p(2119,null),restricted:!0},"http.proxyStrictSSL":{type:"boolean",default:!0,description:p(2120,null),restricted:!0},"http.proxyKerberosServicePrincipal":{type:"string",markdownDescription:p(2121,null),restricted:!0},"http.noProxy":{type:"array",items:{type:"string"},markdownDescription:p(2122,null),restricted:!0},"http.proxyAuthorization":{type:["null","string"],default:null,markdownDescription:p(2123,null),restricted:!0},"http.proxySupport":{type:"string",enum:["off","on","fallback","override"],enumDescriptions:[p(2124,null),p(2125,null),p(2126,null),p(2127,null)],default:"override",description:p(2128,null),restricted:!0},"http.systemCertificates":{type:"boolean",default:!0,description:p(2129,null),restricted:!0},"http.experimental.systemCertificatesV2":{type:"boolean",tags:["experimental"],default:!1,description:p(2130,null),restricted:!0},"http.electronFetch":{type:"boolean",default:!1,description:p(2131,null),restricted:!0}}},t.updateConfigurations({add:[fv],remove:i?[i]:[]})}CO(1);var Ol;(function(e){e[e.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",e[e.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(Ol||(Ol={}));var Rr;(function(e){e[e.None=0]="None",e[e.Initialized=1]="Initialized",e[e.Closed=2]="Closed"})(Rr||(Rr={}));var IO=["workbench.auxiliaryBar.size","workbench.sideBar.size","workbench.panel.size"],DG=class DI extends X{static{this.a=100}constructor(t,i=Object.create(null)){super(),this.r=t,this.s=i,this.b=this.B(new tl),this.onDidChangeStorage=this.b.event,this.c=Rr.None,this.f=new Map,this.g=this.B(new ad(DI.a)),this.h=new Set,this.j=new Map,this.m=void 0,this.n=[],this.t()}t(){this.B(this.r.onDidChangeItemsExternal(t=>this.u(t)))}u(t){this.b.pause();try{t.changed?.forEach((i,r)=>this.w(r,i)),t.deleted?.forEach(i=>this.w(i,void 0))}finally{this.b.resume()}}w(t,i){if(this.c===Rr.Closed)return;let r=!1;$t(i)?r=this.f.delete(t):this.f.get(t)!==i&&(this.f.set(t,i),r=!0),r&&this.b.fire({key:t,external:!0})}get items(){return this.f}get size(){return this.f.size}async init(){this.c===Rr.None&&(this.c=Rr.Initialized,this.s.hint!==Ol.STORAGE_DOES_NOT_EXIST&&(this.f=await this.r.getItems()))}get(t,i){const r=this.f.get(t);return $t(r)?i:r}getBoolean(t,i){const r=this.get(t);return $t(r)?i:r==="true"}getNumber(t,i){const r=this.get(t);return $t(r)?i:parseInt(r,10)}getObject(t,i){const r=this.get(t);return $t(r)?i:DE(r)}async set(t,i,r=!1){if(this.c===Rr.Closed)return;if($t(i))return this.delete(t,r);const s=St(i)||Array.isArray(i)?t2(i):String(i);if(this.f.get(t)!==s)return this.f.set(t,s),this.j.set(t,s),this.h.delete(t),this.b.fire({key:t,external:r}),IO.includes(t)?this.C():this.D()}async delete(t,i=!1){if(!(this.c===Rr.Closed||!this.f.delete(t)))return this.h.has(t)||this.h.add(t),this.j.delete(t),this.b.fire({key:t,external:i}),this.D()}async optimize(){if(this.c!==Rr.Closed)return await this.flush(0),this.r.optimize()}async close(){return this.m||(this.m=this.y()),this.m}async y(){this.c=Rr.Closed;try{await this.D(0)}catch{}await this.r.close(()=>this.f)}get z(){return this.j.size>0||this.h.size>0}async C(){if(!this.z)return;const t={insert:this.j,delete:this.h};return this.h=new Set,this.j=new Map,this.r.updateItems(t).finally(()=>{if(!this.z)for(;this.n.length;)this.n.pop()?.()})}async flush(t){if(!(this.c===Rr.Closed||this.m))return this.D(t)}async D(t){return this.s.hint===Ol.STORAGE_IN_MEMORY?this.C():this.g.trigger(()=>this.C(),t)}async whenFlushed(){if(this.z)return new Promise(t=>this.n.push(t))}isInMemory(){return this.s.hint===Ol.STORAGE_IN_MEMORY}},pv=V("environmentService"),AG=pv,X7=V("IUriIdentityService"),Z7;(function(e){e.Settings="settings",e.Keybindings="keybindings",e.Snippets="snippets",e.Tasks="tasks",e.Extensions="extensions",e.GlobalState="globalState"})(Z7||(Z7={}));function PO(e){const t=e;return!!(t&&typeof t=="object"&&typeof t.id=="string"&&typeof t.isDefault=="boolean"&&typeof t.name=="string"&&E.isUri(t.location)&&E.isUri(t.globalStorageHome)&&E.isUri(t.settingsResource)&&E.isUri(t.keybindingsResource)&&E.isUri(t.tasksResource)&&E.isUri(t.snippetsHome)&&E.isUri(t.extensionsResource))}var DO=V("IUserDataProfilesService");function Yd(e,t,i,r,s,n){return{id:e,name:t,location:i,isDefault:!1,icon:s?.icon,globalStorageHome:n&&s?.useDefaultFlags?.globalState?n.globalStorageHome:Rt(i,"globalStorage"),settingsResource:n&&s?.useDefaultFlags?.settings?n.settingsResource:Rt(i,"settings.json"),keybindingsResource:n&&s?.useDefaultFlags?.keybindings?n.keybindingsResource:Rt(i,"keybindings.json"),tasksResource:n&&s?.useDefaultFlags?.tasks?n.tasksResource:Rt(i,"tasks.json"),snippetsHome:n&&s?.useDefaultFlags?.snippets?n.snippetsHome:Rt(i,"snippets"),extensionsResource:n&&s?.useDefaultFlags?.extensions?n.extensionsResource:Rt(i,"extensions.json"),cacheHome:Rt(r,e),useDefaultFlags:s?.useDefaultFlags,isTransient:s?.transient,workspaces:s?.workspaces}}var K7=class extends X{static{this.b="userDataProfiles"}static{this.c="profileAssociations"}get defaultProfile(){return this.profiles[0]}get profiles(){return[...this.C.profiles,...this.r.profiles]}constructor(t,i,r,s){super(),this.s=t,this.t=i,this.u=r,this.y=s,this.g=this.B(new I),this.onDidChangeProfiles=this.g.event,this.h=this.B(new I),this.onWillCreateProfile=this.h.event,this.j=this.B(new I),this.onWillRemoveProfile=this.j.event,this.m=this.B(new I),this.onDidResetWorkspaces=this.m.event,this.n=new Map,this.r={profiles:[],emptyWindows:new Map},this.profilesHome=Rt(this.s.userRoamingDataHome,"profiles"),this.f=Rt(this.s.cacheHome,"CachedProfilesData")}init(){this.z=void 0}get C(){if(!this.z){const t=this.D(),i=[t];try{for(const s of this.N()){if(!s.name||!De(s.name)||!s.location){this.y.warn("Skipping the invalid stored profile",s.location||s.name);continue}i.push(Yd(Jr(s.location),s.name,s.location,this.f,{icon:s.icon,useDefaultFlags:s.useDefaultFlags},t))}}catch(s){this.y.error(s)}const r=new Map;if(i.length)try{const s=this.P();if(s.workspaces)for(const[n,o]of Object.entries(s.workspaces)){const a=E.parse(n),c=i.find(l=>l.id===o);if(c){const l=c.workspaces?c.workspaces.slice(0):[];l.push(a),c.workspaces=l}}if(s.emptyWindows)for(const[n,o]of Object.entries(s.emptyWindows)){const a=i.find(c=>c.id===o);a&&r.set(n,a)}}catch(s){this.y.error(s)}this.z={profiles:i,emptyWindows:r}}return this.z}D(){const t=Yd("__default__profile__",p(2746,null),this.s.userRoamingDataHome,this.f);return{...t,extensionsResource:this.R()??t.extensionsResource,isDefault:!0}}async createTransientProfile(t){const i="Temp",r=new RegExp(`${un(i)}\\s(\\d+)`);let s=0;for(const o of this.profiles){const a=r.exec(o.name),c=a?parseInt(a[1]):0;s=c>s?c:s}const n=`${i} ${s+1}`;return this.createProfile(Is(Ht()).toString(16),n,{transient:!0},t)}async createNamedProfile(t,i,r){return this.createProfile(Is(Ht()).toString(16),t,i,r)}async createProfile(t,i,r,s){return await this.F(t,i,r,s)}async F(t,i,r,s){if(!De(i)||!i)throw new Error("Name of the profile is mandatory and must be of type `string`");let n=this.n.get(i);return n||(n=(async()=>{try{if(this.profiles.find(u=>u.id===t||!u.isTransient&&!r?.transient&&u.name===i))throw new Error(`Profile with ${i} name already exists`);const a=s?this.G(s):void 0;E.isUri(a)&&(r={...r,workspaces:[a]});const c=Yd(t,i,Rt(this.profilesHome,t),this.f,r,this.defaultProfile);await this.t.createFolder(c.location);const l=[];return this.h.fire({profile:c,join(u){l.push(u)}}),await va.settled(l),a&&!E.isUri(a)&&this.L(a,c,!!c.isTransient),this.I([c],[],[]),c}finally{this.n.delete(i)}})(),this.n.set(i,n)),n}async updateProfile(t,i){const r=[];for(const n of this.profiles){let o;if(t.id===n.id)n.isDefault?i.workspaces&&(o=n,o.workspaces=i.workspaces):o=Yd(n.id,i.name??n.name,n.location,this.f,{icon:i.icon===null?void 0:i.icon??n.icon,transient:i.transient??n.isTransient,useDefaultFlags:i.useDefaultFlags??n.useDefaultFlags,workspaces:i.workspaces??n.workspaces},this.defaultProfile);else if(i.workspaces){const a=n.workspaces?.filter(c=>!i.workspaces?.some(l=>this.u.extUri.isEqual(c,l)));n.workspaces?.length!==a?.length&&(o=n,o.workspaces=a)}o&&r.push(o)}if(!r.length)throw t.isDefault?new Error("Cannot update default profile"):new Error(`Profile '${t.name}' does not exist`);this.I([],[],r);const s=this.profiles.find(n=>n.id===t.id);if(!s)throw new Error(`Profile '${t.name}' was not updated`);return s}async removeProfile(t){if(t.isDefault)throw new Error("Cannot remove default profile");const i=this.profiles.find(s=>s.id===t.id);if(!i)throw new Error(`Profile '${t.name}' does not exist`);const r=[];this.j.fire({profile:i,join(s){r.push(s)}});try{await Promise.allSettled(r)}catch(s){this.y.error(s)}this.I([],[i],[]);try{await this.t.del(i.cacheHome,{recursive:!0})}catch(s){CN(s)!==1&&this.y.error(s)}}async setProfileForWorkspace(t,i){const r=this.profiles.find(n=>n.id===i.id);if(!r)throw new Error(`Profile '${i.name}' does not exist`);const s=this.G(t);if(E.isUri(s)){const n=r.workspaces?[...r.workspaces]:[];n.some(o=>this.u.extUri.isEqual(o,s))||(n.push(s),await this.updateProfile(r,{workspaces:n}))}else this.L(s,r,!1),this.M(this.profiles)}unsetWorkspace(t,i=!1){const r=this.G(t);if(E.isUri(r)){const s=this.getProfileForWorkspace(t);s&&this.updateProfile(s,{workspaces:s.workspaces?.filter(n=>!this.u.extUri.isEqual(n,r))})}else this.L(r,void 0,i),this.M(this.profiles)}async resetWorkspaces(){this.r.emptyWindows.clear(),this.C.emptyWindows.clear();for(const t of this.profiles)t.workspaces=void 0;this.I([],[],this.profiles),this.m.fire()}async cleanUp(){if(await this.t.exists(this.profilesHome)){const t=await this.t.resolve(this.profilesHome);await Promise.all((t.children||[]).filter(i=>i.isDirectory&&this.profiles.every(r=>!this.u.extUri.isEqual(r.location,i.resource))).map(i=>this.t.del(i.resource,{recursive:!0})))}}async cleanUpTransientProfiles(){const t=this.r.profiles.filter(i=>!this.H(i));await Promise.allSettled(t.map(i=>this.removeProfile(i)))}getProfileForWorkspace(t){const i=this.G(t);return E.isUri(i)?this.profiles.find(r=>r.workspaces?.some(s=>this.u.extUri.isEqual(s,i))):this.C.emptyWindows.get(i)??this.r.emptyWindows.get(i)}G(t){return mL(t)?t.uri:vL(t)?t.configPath:t.id}H(t){return!!(t.workspaces?.length||[...this.C.emptyWindows.values()].some(i=>this.u.extUri.isEqual(i.location,t.location))||[...this.r.emptyWindows.values()].some(i=>this.u.extUri.isEqual(i.location,t.location)))}I(t,i,r){const s=[...this.profiles,...t],n=this.r.profiles;this.r.profiles=[];const o=[];for(let a of s){if(i.some(c=>a.id===c.id)){for(const c of[...this.C.emptyWindows.keys()])a.id===this.C.emptyWindows.get(c)?.id&&this.C.emptyWindows.delete(c);continue}if(!a.isDefault){a=r.find(l=>a.id===l.id)??a;const c=n.find(l=>a.id===l.id);if(a.isTransient)this.r.profiles.push(a);else if(c){for(const[l,u]of this.r.emptyWindows.entries())if(a.id===u.id){this.r.emptyWindows.delete(l),this.C.emptyWindows.set(l,a);break}}}a.workspaces?.length===0&&(a.workspaces=void 0),o.push(a)}this.M(o),this.J(t,i,r)}J(t,i,r){this.g.fire({added:t,removed:i,updated:r,all:this.profiles})}L(t,i,r){r=i?.isTransient?!0:r,r?i?this.r.emptyWindows.set(t,i):this.r.emptyWindows.delete(t):(this.r.emptyWindows.delete(t),i?this.C.emptyWindows.set(t,i):this.C.emptyWindows.delete(t))}M(t){const i=[],r={},s={};for(const n of t)if(!n.isTransient&&(n.isDefault||i.push({location:n.location,name:n.name,icon:n.icon,useDefaultFlags:n.useDefaultFlags}),n.workspaces))for(const o of n.workspaces)r[o.toString()]=n.id;for(const[n,o]of this.C.emptyWindows.entries())s[n.toString()]=o.id;this.Q({workspaces:r,emptyWindows:s}),this.O(i),this.z=void 0}N(){return[]}O(t){throw new Error("not implemented")}P(){return{}}Q(t){throw new Error("not implemented")}R(){}};K7=__decorate([__param(0,pv),__param(1,kN),__param(2,X7),__param(3,Ce)],K7);var AO="__$__isNewStorageMarker",Xd="__$__targetStorageMarker",e9=V("storageService"),La;(function(e){e[e.NONE=0]="NONE",e[e.SHUTDOWN=1]="SHUTDOWN"})(La||(La={}));var t9;(function(e){e[e.APPLICATION=-1]="APPLICATION",e[e.PROFILE=0]="PROFILE",e[e.WORKSPACE=1]="WORKSPACE",e[e.ICUBE_PROFILE=2]="ICUBE_PROFILE"})(t9||(t9={}));var i9;(function(e){e[e.USER=0]="USER",e[e.MACHINE=1]="MACHINE"})(i9||(i9={}));function RO(e){const t=e.get(Xd);if(t)try{return JSON.parse(t)}catch{}return Object.create(null)}var TG=class AI extends X{static{this.a=60*1e3}constructor(t={flushInterval:AI.a}){super(),this.m=t,this.b=this.B(new tl),this.c=this.B(new tl),this.onDidChangeTarget=this.c.event,this.f=this.B(new I),this.onWillSaveState=this.f.event,this.h=this.B(new Es(()=>this.n(),this.m.flushInterval)),this.j=this.B(new vs),this.C=void 0,this.F=void 0,this.H=void 0,this.J=void 0}onDidChangeValue(t,i,r){return ze.filter(this.b.event,s=>s.scope===t&&(i===void 0||s.key===i),r)}n(){this.j.value=fE(()=>{this.r()&&this.flush(),this.h.schedule()})}r(){return!0}t(){Sr([this.j,this.h])}initialize(){return this.g||(this.g=(async()=>{Ct("code/willInitStorage");try{await this.Q()}finally{Ct("code/didInitStorage")}this.h.schedule()})()),this.g}u(t,i){const{key:r,external:s}=i;if(r===Xd){switch(t){case-1:this.H=void 0;break;case 0:this.F=void 0;break;case 1:this.C=void 0;break;case 2:this.J=void 0;break}this.c.fire({scope:t})}else this.b.fire({scope:t,key:r,target:this.M(t)[r],external:s})}w(t){this.f.fire({reason:t})}get(t,i,r){return this.R(i)?.get(t,r)}getBoolean(t,i,r){return this.R(i)?.getBoolean(t,r)}getNumber(t,i,r){return this.R(i)?.getNumber(t,r)}getObject(t,i,r){return this.R(i)?.getObject(t,r)}storeAll(t,i){this.y(()=>{for(const r of t)this.store(r.key,r.value,r.scope,r.target,i)})}store(t,i,r,s,n=!1){if($t(i)){this.remove(t,r,n);return}this.y(()=>{this.z(t,r,s),this.R(r)?.set(t,i,n)})}remove(t,i,r=!1){this.y(()=>{this.z(t,i,void 0),this.R(i)?.delete(t,r)})}y(t){this.b.pause(),this.c.pause();try{t()}finally{this.b.resume(),this.c.resume()}}keys(t,i){const r=[],s=this.M(t);for(const n of Object.keys(s))s[n]===i&&r.push(n);return r}z(t,i,r,s=!1){const n=this.M(i);typeof r=="number"?n[t]!==r&&(n[t]=r,this.R(i)?.set(Xd,JSON.stringify(n),s)):typeof n[t]=="number"&&(delete n[t],this.R(i)?.set(Xd,JSON.stringify(n),s))}get D(){return this.C||(this.C=this.N(1)),this.C}get G(){return this.F||(this.F=this.N(0)),this.F}get I(){return this.H||(this.H=this.N(-1)),this.H}get L(){return this.J||(this.J=this.N(2)),this.J}M(t){switch(t){case-1:return this.I;case 0:return this.G;case 2:return this.L;default:return this.D}}N(t){const i=this.R(t);return i?RO(i):Object.create(null)}isNew(t){return this.getBoolean(AO,t)===!0}async flush(t=La.NONE){this.f.fire({reason:t});const i=this.R(-1),r=this.R(0),s=this.R(1);switch(t){case La.NONE:await va.settled([i?.whenFlushed()??Promise.resolve(),r?.whenFlushed()??Promise.resolve(),s?.whenFlushed()??Promise.resolve()]);break;case La.SHUTDOWN:await va.settled([i?.flush(0)??Promise.resolve(),r?.flush(0)??Promise.resolve(),s?.flush(0)??Promise.resolve()]);break}}async log(){const t=this.R(-1)?.items??new Map,i=this.R(0)?.items??new Map,r=this.R(1)?.items??new Map;return TO(t,i,r,this.S(-1)??"",this.S(0)??"",this.S(1)??"")}async optimize(t){return await this.flush(),this.R(t)?.optimize()}async switch(t,i){return this.w(La.NONE),PO(t)?this.U(t,i):this.W(t,i)}O(t,i){return!(t.id===i.id||r9(i)&&r9(t))}P(t,i,r){this.y(()=>{const s=new Set;for(const[n,o]of t)s.add(n),i.get(n)!==o&&this.u(r,{key:n,external:!0});for(const[n]of i.items)s.has(n)||this.u(r,{key:n,external:!0})})}};function r9(e){return e.isDefault||!!e.useDefaultFlags?.globalState}async function TO(e,t,i,r,s,n){const o=v=>{try{return JSON.parse(v)}catch{return v}},a=new Map,c=new Map;e.forEach((v,y)=>{a.set(y,v),c.set(y,o(v))});const l=new Map,u=new Map;t.forEach((v,y)=>{l.set(y,v),u.set(y,o(v))});const h=new Map,d=new Map;i.forEach((v,y)=>{h.set(y,v),d.set(y,o(v))}),console.group(r!==s?`Storage: Application (path: ${r})`:`Storage: Application & Profile (path: ${r}, default profile)`);const f=[];if(a.forEach((v,y)=>{f.push({key:y,value:v})}),console.table(f),console.groupEnd(),console.log(c),r!==s){console.group(`Storage: Profile (path: ${s}, profile specific)`);const v=[];l.forEach((y,S)=>{v.push({key:S,value:y})}),console.table(v),console.groupEnd(),console.log(u)}console.group(`Storage: Workspace (path: ${n})`);const g=[];h.forEach((v,y)=>{g.push({key:y,value:v})}),console.table(g),console.groupEnd(),console.log(d)}var LG=V("remoteStorageService"),NG=new j("chatSessionResponseVote","",{type:"string",description:p(5212,null)}),OG=new j("chatSessionResponseDetectedAgentOrCommand",!1,{type:"boolean",description:p(5213,null)}),FG=new j("chatResponseSupportsIssueReporting",!1,{type:"boolean",description:p(5214,null)}),MG=new j("chatSessionResponseFiltered",!1,{type:"boolean",description:p(5215,null)}),UG=new j("chatSessionResponseError",!1,{type:"boolean",description:p(5216,null)}),_G=new j("chatSessionRequestInProgress",!1,{type:"boolean",description:p(5217,null)}),jG=new j("chatResponse",!1,{type:"boolean",description:p(5218,null)}),HG=new j("chatRequest",!1,{type:"boolean",description:p(5219,null)}),BG=new j("chatItemId","",{type:"string",description:p(5220,null)}),WG=new j("chatLastItemId",[],{type:"string",description:p(5221,null)}),zG=new j("chatEditApplied",!1,{type:"boolean",description:p(5222,null)}),VG=new j("chatInputHasText",!1,{type:"boolean",description:p(5223,null)}),qG=new j("chatInputHasFocus",!1,{type:"boolean",description:p(5224,null)}),GG=new j("inChatInput",!1,{type:"boolean",description:p(5225,null)}),JG=new j("inChat",!1,{type:"boolean",description:p(5226,null)}),LO=new j("chatIsEnabled",!1,{type:"boolean",description:p(5227,null)}),NO=new j("chatPanelParticipantRegistered",!1,{type:"boolean",description:p(5228,null)}),OO=new j("chatEditingParticipantRegistered",!1,{type:"boolean",description:p(5229,null)}),QG=new j("chatEditingCanUndo",!1,{type:"boolean",description:p(5230,null)}),YG=new j("chatEditingCanRedo",!1,{type:"boolean",description:p(5231,null)}),XG=new j("chatExtensionInvalid",!1,{type:"boolean",description:p(5232,null)}),ZG=new j("chatCursorAtTop",!1),KG=new j("chatInputHasAgent",!1),eJ=new j("chatLocation",void 0),tJ=new j("quickChatHasFocus",!1,{type:"boolean",description:p(5233,null)}),iJ=new j("chatHasFileAttachments",!1,{type:"boolean",description:p(5234,null)}),rJ=new j("chatModelsAreUserSelectable",!1,{type:"boolean",description:p(5235,null)}),sJ=new j("chatInstallEntitled",!1,{type:"boolean",description:p(5236,null)}),nJ=new j("chatShouldShowMovedViewWelcome",!1,{type:"boolean",description:p(5237,null)}),Fl,ci;(function(e){e.Panel="panel",e.Terminal="terminal",e.Notebook="notebook",e.Editor="editor",e.EditingSession="editing-session"})(ci||(ci={})),function(e){function t(i){switch(i){case"panel":return e.Panel;case"terminal":return e.Terminal;case"notebook":return e.Notebook;case"editor":return e.Editor;case"editing-session":return e.EditingSession}return e.Panel}e.fromRaw=t}(ci||(ci={}));var oJ=V("chatAgentService"),s9=class extends X{static{this.AGENT_LEADER="@"}constructor(t){super(),this.n=t,this.b=new Map,this.f=new I,this.onDidChangeAgents=this.f.event,this.g=new Set,this.t=new Map,this.w=new Map,this.h=LO.bindTo(this.n),this.j=NO.bindTo(this.n),this.m=OO.bindTo(this.n),this.B(t.onDidChangeContext(i=>{i.affectsSome(this.g)&&this.s()}))}registerAgent(t,i){if(this.getAgent(t))throw new Error(`Agent already registered: ${JSON.stringify(t)}`);const s=this,n=i.slashCommands;i={...i,get slashCommands(){return n.filter(a=>!a.when||s.n.contextMatchesRules(Jt.deserialize(a.when)))}};const o={data:i};return this.b.set(t,o),this.r(),this.s(),this.f.fire(void 0),ee(()=>{this.b.delete(t),this.r(),this.s(),this.f.fire(void 0)})}r(){this.g.clear();for(const t of this.b.values())if(t.data.when){const i=Jt.deserialize(t.data.when);for(const r of i?.keys()||[])this.g.add(r)}}s(){let t=!1,i=!1;for(const r of this.getAgents())r.isDefault&&r.locations.includes(ci.EditingSession)?t=!0:r.isDefault&&(i=!0);this.m.set(t),this.j.set(i)}registerAgentImplementation(t,i){const r=this.b.get(t);if(!r)throw new Error(`Unknown agent: ${JSON.stringify(t)}`);if(r.impl)throw new Error(`Agent already has implementation: ${JSON.stringify(t)}`);return r.data.isDefault&&this.h.set(!0),r.impl=i,this.f.fire(new Zd(r.data,i)),ee(()=>{r.impl=void 0,this.f.fire(void 0),r.data.isDefault&&this.h.set(!1)})}registerDynamicAgent(t,i){t.isDynamic=!0;const r={data:t,impl:i};return this.b.set(t.id,r),this.f.fire(new Zd(t,i)),ee(()=>{this.b.delete(t.id),this.f.fire(void 0)})}registerAgentCompletionProvider(t,i){return this.t.set(t,i),{dispose:()=>{this.t.delete(t)}}}async getAgentCompletionItems(t,i,r){return await this.t.get(t)?.(i,r)??[]}updateAgent(t,i){const r=this.b.get(t);if(!r?.impl)throw new Error(`No activated agent with id ${JSON.stringify(t)} registered`);r.data.metadata={...r.data.metadata,...i},this.f.fire(new Zd(r.data,r.impl))}getDefaultAgent(t){return tD(this.getActivatedAgents(),i=>!!i.isDefault&&i.locations.includes(t))}getContributedDefaultAgent(t){return this.getAgents().find(i=>!!i.isDefault&&i.locations.includes(t))}getSecondaryAgent(){return Qi.find(this.b.values(),t=>!!t.data.metadata.isSecondary)?.data}getAgent(t,i=!1){if(!(!this.u(t)&&!i))return this.b.get(t)?.data}u(t){const i=this.b.get(t);return!i?.data.when||this.n.contextMatchesRules(Jt.deserialize(i.data.when))}getAgentByFullyQualifiedId(t){const i=Qi.find(this.b.values(),r=>FO(r.data)===t)?.data;if(!(i&&!this.u(i.id)))return i}getAgents(){return Array.from(this.b.values()).map(t=>t.data).filter(t=>this.u(t.id))}getActivatedAgents(){return Array.from(this.b.values()).filter(t=>!!t.impl).filter(t=>this.u(t.data.id)).map(t=>new Zd(t.data,t.impl))}getAgentsByName(t){return this.getAgents().filter(i=>i.name===t)}agentHasDupeName(t){const i=this.getAgent(t);return i?this.getAgentsByName(i.name).filter(r=>r.extensionId.value!==i.extensionId.value).length>0:!1}async invokeAgent(t,i,r,s,n){const o=this.b.get(t);if(!o?.impl)throw new Error(`No activated agent with id "${t}"`);return await o.impl.invoke(i,r,s,n)}async getFollowups(t,i,r,s,n){const o=this.b.get(t);if(!o?.impl)throw new Error(`No activated agent with id "${t}"`);return o.impl?.provideFollowups?o.impl.provideFollowups(i,r,s,n):[]}async getChatTitle(t,i,r){const s=this.b.get(t);if(!s?.impl)throw new Error(`No activated agent with id "${t}"`);if(s.impl?.provideChatTitle)return s.impl.provideChatTitle(i,r)}registerChatParticipantDetectionProvider(t,i){return this.w.set(t,i),ee(()=>{this.w.delete(t)})}hasChatParticipantDetectionProviders(){return this.w.size>0}async detectAgentOrCommand(t,i,r,s){const n=Qi.first(this.w.values());if(!n)return;const o=this.getAgents().reduce((u,h)=>{u.push({participant:h.id,disambiguation:h.disambiguation??[]});for(const d of h.slashCommands)u.push({participant:h.id,command:d.name,disambiguation:d.disambiguation??[]});return u},[]),a=await n.provideParticipantDetection(t,i,{...r,participants:o},s);if(!a)return;const c=this.getAgent(a.participant);if(!c)return;if(!a.command)return{agent:c};const l=c?.slashCommands.find(u=>u.name===a.command);if(l)return{agent:c,command:l}}};s9=__decorate([__param(0,zS)],s9);var Zd=class{constructor(e,t){this.b=e,this.d=t}get id(){return this.b.id}get name(){return this.b.name??""}get fullName(){return this.b.fullName??""}get description(){return this.b.description??""}get extensionId(){return this.b.extensionId}get extensionPublisherId(){return this.b.extensionPublisherId}get extensionPublisherDisplayName(){return this.b.publisherDisplayName}get extensionDisplayName(){return this.b.extensionDisplayName}get isDefault(){return this.b.isDefault}get metadata(){return this.b.metadata}get slashCommands(){return this.b.slashCommands}get locations(){return this.b.locations}get disambiguation(){return this.b.disambiguation}async invoke(e,t,i,r){return this.d.invoke(e,t,i,r)}async provideFollowups(e,t,i,r){return this.d.provideFollowups?this.d.provideFollowups(e,t,i,r):[]}provideWelcomeMessage(e){if(this.d.provideWelcomeMessage)return this.d.provideWelcomeMessage(e)}provideSampleQuestions(e,t){if(this.d.provideSampleQuestions)return this.d.provideSampleQuestions(e,t)}toJSON(){return this.b}},cJ=V("chatAgentNameService"),n9=class{static{Fl=this}static{this.b="chat.participantNameRegistry"}constructor(t,i,r,s){if(this.h=i,this.i=r,this.j=s,this.f=rO(this,Object.create(null)),this.g=!1,!t.chatParticipantRegistry)return;this.d=t.chatParticipantRegistry;const n=s.get(Fl.b,-1);try{this.f.set(JSON.parse(n??"{}"),void 0)}catch{s.remove(Fl.b,-1)}this.k()}k(){this.g||this.l().catch(t=>this.i.warn("Failed to fetch chat participant registry",t)).then(()=>bi(5*60*1e3)).then(()=>this.k())}async l(){const t=await this.h.request({type:"GET",url:this.d},Ge.None);if(t.res.statusCode!==200)throw new Error("Could not get extensions report.");const i=await $O(t);if(!i||i.version!==1)throw new Error("Unexpected chat participant registry response.");const r=i.restrictedChatParticipants;this.f.set(r,void 0),this.j.store(Fl.b,JSON.stringify(r),-1,1)}getAgentNameRestriction(t){const i=this.m(t.name,t).get(),r=!t.fullName||this.m(t.fullName.replace(/\s/g,""),t).get();return i&&r}m(t,i){return this.f.map(s=>s[t.toLowerCase()]).map(s=>s?s.some(n=>xr(n,n.includes(".")?i.extensionId.value:i.extensionPublisherId)):!0)}dispose(){this.g=!0}};n9=Fl=__decorate([__param(0,jd),__param(1,SO),__param(2,Ce),__param(3,e9)],n9);function FO(e){return`${e.extensionId.value}.${e.id}`}function Kd(){return Object.create(null)}var So="**",gv="/",ef="[/\\\\]",tf="[^/\\\\]",MO=/\//g;function o9(e,t){switch(e){case 0:return"";case 1:return`${tf}*?`;default:return`(?:${ef}|${tf}+${ef}${t?`|${ef}${tf}+`:""})*?`}}function Ml(e,t){if(!e)return[];const i=[];let r=!1,s=!1,n="";for(const o of e){switch(o){case t:if(!r&&!s){i.push(n),n="";continue}break;case"{":r=!0;break;case"}":r=!1;break;case"[":s=!0;break;case"]":s=!1;break}n+=o}return n&&i.push(n),i}function a9(e){if(!e)return"";let t="";const i=Ml(e,gv);if(i.every(r=>r===So))t=".*";else{let r=!1;i.forEach((s,n)=>{if(s===So){if(r)return;t+=o9(2,n===i.length-1)}else{let o=!1,a="",c=!1,l="";for(const u of s){if(u!=="}"&&o){a+=u;continue}if(c&&(u!=="]"||!l)){let h;u==="-"?h=u:(u==="^"||u==="!")&&!l?h="^":u===gv?h="":h=un(u),l+=h;continue}switch(u){case"{":o=!0;continue;case"[":c=!0;continue;case"}":{const d=`(?:${Ml(a,",").map(f=>a9(f)).join("|")})`;t+=d,o=!1,a="";break}case"]":{t+="["+l+"]",c=!1,l="";break}case"?":t+=tf;continue;case"*":t+=o9(1);continue;default:t+=un(u)}}n<i.length-1&&(i[n+1]!==So||n+2<i.length)&&(t+=ef)}r=s===So})}return t}var UO=/^\*\*\/\*\.[\w\.-]+$/,_O=/^\*\*\/([\w\.-]+)\/?$/,jO=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,HO=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,BO=/^\*\*((\/[\w\.-]+)+)\/?$/,WO=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,c9=new Xc(1e4),l9=function(){return!1},is=function(){return null};function mv(e,t){if(!e)return is;let i;typeof e!="string"?i=e.pattern:i=e,i=i.trim();const r=`${i}_${!!t.trimForExclusions}`;let s=c9.get(r);if(s)return u9(s,e);let n;return UO.test(i)?s=zO(i.substr(4),i):(n=_O.exec(vv(i,t)))?s=VO(n[1],i):(t.trimForExclusions?HO:jO).test(i)?s=qO(i,t):(n=BO.exec(vv(i,t)))?s=h9(n[1].substr(1),i,!0):(n=WO.exec(vv(i,t)))?s=h9(n[1],i,!1):s=GO(i),c9.set(r,s),u9(s,e)}function u9(e,t){if(typeof t=="string")return e;const i=function(r,s){return dn(r,t.base,!At)?e(uA(r.substr(t.base.length),ft),s):null};return i.allBasenames=e.allBasenames,i.allPaths=e.allPaths,i.basenames=e.basenames,i.patterns=e.patterns,i}function vv(e,t){return t.trimForExclusions&&e.endsWith("/**")?e.substr(0,e.length-2):e}function zO(e,t){return function(i,r){return typeof i=="string"&&i.endsWith(e)?t:null}}function VO(e,t){const i=`/${e}`,r=`\\${e}`,s=function(o,a){return typeof o!="string"?null:a?a===e?t:null:o===e||o.endsWith(i)||o.endsWith(r)?t:null},n=[e];return s.basenames=n,s.patterns=[t],s.allBasenames=n,s}function qO(e,t){const i=d9(e.slice(1,-1).split(",").map(a=>mv(a,t)).filter(a=>a!==is),e),r=i.length;if(!r)return is;if(r===1)return i[0];const s=function(a,c){for(let l=0,u=i.length;l<u;l++)if(i[l](a,c))return e;return null},n=i.find(a=>!!a.allBasenames);n&&(s.allBasenames=n.allBasenames);const o=i.reduce((a,c)=>c.allPaths?a.concat(c.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function h9(e,t,i){const r=ft===Le.sep,s=r?e:e.replace(MO,ft),n=ft+s,o=Le.sep+e;let a;return i?a=function(c,l){return typeof c=="string"&&(c===s||c.endsWith(n)||!r&&(c===e||c.endsWith(o)))?t:null}:a=function(c,l){return typeof c=="string"&&(c===s||!r&&c===e)?t:null},a.allPaths=[(i?"*/":"./")+e],a}function GO(e){try{const t=new RegExp(`^${a9(e)}$`);return function(i){return t.lastIndex=0,typeof i=="string"&&t.test(i)?e:null}}catch{return is}}function Na(e,t,i){return!e||typeof t!="string"?!1:Di(e)(t,void 0,i)}function Di(e,t={}){if(!e)return l9;if(typeof e=="string"||JO(e)){const i=mv(e,t);if(i===is)return l9;const r=function(s,n){return!!i(s,n)};return i.allBasenames&&(r.allBasenames=i.allBasenames),i.allPaths&&(r.allPaths=i.allPaths),r}return QO(e,t)}function JO(e){const t=e;return t?typeof t.base=="string"&&typeof t.pattern=="string":!1}function rf(e){return e.allBasenames||[]}function sf(e){return e.allPaths||[]}function QO(e,t){const i=d9(Object.getOwnPropertyNames(e).map(a=>YO(a,e[a],t)).filter(a=>a!==is)),r=i.length;if(!r)return is;if(!i.some(a=>!!a.requiresSiblings)){if(r===1)return i[0];const a=function(u,h){let d;for(let f=0,g=i.length;f<g;f++){const v=i[f](u,h);if(typeof v=="string")return v;fn(v)&&(d||(d=[]),d.push(v))}return d?(async()=>{for(const f of d){const g=await f;if(typeof g=="string")return g}return null})():null},c=i.find(u=>!!u.allBasenames);c&&(a.allBasenames=c.allBasenames);const l=i.reduce((u,h)=>h.allPaths?u.concat(h.allPaths):u,[]);return l.length&&(a.allPaths=l),a}const s=function(a,c,l){let u,h;for(let d=0,f=i.length;d<f;d++){const g=i[d];g.requiresSiblings&&l&&(c||(c=ut(a)),u||(u=c.substr(0,c.length-Zh(a).length)));const v=g(a,c,u,l);if(typeof v=="string")return v;fn(v)&&(h||(h=[]),h.push(v))}return h?(async()=>{for(const d of h){const f=await d;if(typeof f=="string")return f}return null})():null},n=i.find(a=>!!a.allBasenames);n&&(s.allBasenames=n.allBasenames);const o=i.reduce((a,c)=>c.allPaths?a.concat(c.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function YO(e,t,i){if(t===!1)return is;const r=mv(e,i);if(r===is)return is;if(typeof t=="boolean")return r;if(t){const s=t.when;if(typeof s=="string"){const n=(o,a,c,l)=>{if(!l||!r(o,a))return null;const u=s.replace("$(basename)",()=>c),h=l(u);return fn(h)?h.then(d=>d?e:null):h?e:null};return n.requiresSiblings=!0,n}}return r}function d9(e,t){const i=e.filter(a=>!!a.basenames);if(i.length<2)return e;const r=i.reduce((a,c)=>{const l=c.basenames;return l?a.concat(l):a},[]);let s;if(t){s=[];for(let a=0,c=r.length;a<c;a++)s.push(t)}else s=i.reduce((a,c)=>{const l=c.patterns;return l?a.concat(l):a},[]);const n=function(a,c){if(typeof a!="string")return null;if(!c){let u;for(u=a.length;u>0;u--){const h=a.charCodeAt(u-1);if(h===47||h===92)break}c=a.substr(u)}const l=r.indexOf(c);return l!==-1?s[l]:null};n.basenames=r,n.patterns=s,n.allBasenames=r;const o=e.filter(a=>!a.basenames);return o.push(n),o}function f9(e,t){return Vr(e,t,(i,r)=>typeof i=="string"&&typeof r=="string"?i===r:typeof i!="string"&&typeof r!="string"?i.base===r.base&&i.pattern===r.pattern:!1)}var XO=V("notebookDocumentService"),wv=["W","X","Y","Z","a","b","c","d","e","f"],ZO=new RegExp(`^[${wv.join("")}]+`),p9=7;function g9(e){if(e.scheme!==z.vscodeNotebookCell)return;const t=e.fragment.indexOf("s");if(t<0)return;const i=parseInt(e.fragment.substring(0,t).replace(ZO,""),p9),r=mE(e.fragment.substring(t+1)).toString();if(!isNaN(i))return{handle:i,notebook:e.with({scheme:r,fragment:null})}}function KO(e,t){const i=t.toString(p9),s=`${i.length<wv.length?wv[i.length-1]:"z"}${i}s${dd(J.fromString(e.scheme),!0,!0)}`;return e.with({scheme:z.vscodeNotebookCell,fragment:s})}function eF(e){if(e.scheme!==z.vscodeNotebookMetadata)return;const t=mE(e.fragment).toString();return e.with({scheme:t,fragment:null})}function tF(e){const t=`${dd(J.fromString(e.scheme),!0,!0)}`;return e.with({scheme:z.vscodeNotebookMetadata,fragment:t})}var iF=class{constructor(){this.a=new Gt}getNotebook(e){if(e.scheme===z.vscodeNotebookCell){const t=g9(e);if(t){const i=this.a.get(t.notebook);if(i)return i}}return this.a.get(e)}addNotebookDocument(e){this.a.set(e.uri,e)}removeNotebookDocument(e){this.a.delete(e.uri)}};Ae(XO,iF,1);var Oa;(function(e){e[e.Markup=1]="Markup",e[e.Code=2]="Code"})(Oa||(Oa={}));var uJ=["application/json","application/javascript","text/html","image/svg+xml",Ds.latex,Ds.markdown,"image/png","image/jpeg",Ds.text],hJ=[Ds.latex,Ds.markdown,"application/json","text/html","image/svg+xml","image/png","image/jpeg",Ds.text],m9;(function(e){e[e.Running=1]="Running",e[e.Idle=2]="Idle"})(m9||(m9={}));var Ul;(function(e){e[e.Unconfirmed=1]="Unconfirmed",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(Ul||(Ul={}));var v9;(function(e){e[e.Unconfirmed=1]="Unconfirmed",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(v9||(v9={}));var w9;(function(e){e[e.WithHardKernelDependency=0]="WithHardKernelDependency",e[e.WithOptionalKernelDependency=1]="WithOptionalKernelDependency",e[e.Pure=2]="Pure",e[e.Never=3]="Never"})(w9||(w9={}));var b9;(function(e){e.Always="always",e.Never="never",e.Optional="optional"})(b9||(b9={}));var Tr;(function(e){e[e.ModelChange=1]="ModelChange",e[e.Move=2]="Move",e[e.ChangeCellLanguage=5]="ChangeCellLanguage",e[e.Initialize=6]="Initialize",e[e.ChangeCellMetadata=7]="ChangeCellMetadata",e[e.Output=8]="Output",e[e.OutputItem=9]="OutputItem",e[e.ChangeCellContent=10]="ChangeCellContent",e[e.ChangeDocumentMetadata=11]="ChangeDocumentMetadata",e[e.ChangeCellInternalMetadata=12]="ChangeCellInternalMetadata",e[e.ChangeCellMime=13]="ChangeCellMime",e[e.Unknown=100]="Unknown"})(Tr||(Tr={}));var y9;(function(e){e[e.Handle=0]="Handle",e[e.Index=1]="Index"})(y9||(y9={}));var E9;(function(e){e[e.Replace=1]="Replace",e[e.Output=2]="Output",e[e.Metadata=3]="Metadata",e[e.CellLanguage=4]="CellLanguage",e[e.DocumentMetadata=5]="DocumentMetadata",e[e.Move=6]="Move",e[e.OutputItems=7]="OutputItems",e[e.PartialMetadata=8]="PartialMetadata",e[e.PartialInternalMetadata=9]="PartialInternalMetadata"})(E9||(E9={}));var S9;(function(e){e.scheme=z.vscodeNotebookMetadata;function t(r){return tF(r)}e.generate=t;function i(r){return eF(r)}e.parse=i})(S9||(S9={}));var x9;(function(e){e.scheme=z.vscodeNotebookCell;function t(a,c){return KO(a,c)}e.generate=t;function i(a){return g9(a)}e.parse=i;function r(a,c){return a.with({scheme:z.vscodeNotebookCellOutput,fragment:`op${c??""},${a.scheme!==z.file?a.scheme:""}`})}e.generateCellOutputUri=r;function s(a){if(a.scheme!==z.vscodeNotebookCellOutput)return;const c=/^op([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})?\,(.*)$/i.exec(a.fragment);if(!c)return;const l=c[1]&&c[1]!==""?c[1]:void 0,u=c[2];return{outputId:l,notebook:a.with({scheme:u||z.file,fragment:null})}}e.parseCellOutputUri=s;function n(a,c,l){return e.generate(a,c).with({scheme:l})}e.generateCellPropertyUri=n;function o(a,c){if(a.scheme===c)return e.parse(a.with({scheme:e.scheme}))}e.parseCellPropertyUri=o})(x9||(x9={}));var dJ=new j("notebookEditorCursorAtBoundary","none"),fJ=new j("notebookEditorCursorAtLineBoundary","none"),k9;(function(e){e.default="default",e.option="option"})(k9||(k9={}));var $9;(function(e){e.Cells="cells",e.Text="text",e.None="none"})($9||($9={}));var C9;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(C9||(C9={}));var pJ=class bm{static{this.d="notebook/"}static create(t,i){return`${bm.d}${t}/${i??t}`}static parse(t){if(t.startsWith(bm.d)){const i=t.substring(bm.d.length).split("/");if(i.length===2)return{notebookType:i[0],viewType:i[1]}}}};function I9(e){return["application/vnd.code.notebook.stdout","application/vnd.code.notebook.stderr"].includes(e)}var rF=new TextDecoder;function sF(e){const t=[];let i=!1;for(const o of e)(t.length===0||i)&&(t.push(o),i=!0);let r=oF(t);const s=J.concat(t.map(o=>J.wrap(o))),n=hF(s);return r=r||n.byteLength!==s.byteLength,{data:n,didCompression:r}}var nf="\x1B[A",bv=nf.split("").map(e=>e.charCodeAt(0)),nF=10;function oF(e){let t=!1;return e.forEach((i,r)=>{if(r===0||i.length<nf.length)return;const s=e[r-1],n=i.subarray(0,nf.length);if(n[0]===bv[0]&&n[1]===bv[1]&&n[2]===bv[2]){const o=s.lastIndexOf(nF);if(o===-1)return;t=!0,e[r-1]=s.subarray(0,o),e[r]=i.subarray(nf.length)}}),t}function aF(e){let t=e;do e=t,t=e.replace(/[^\n]\x08/gm,"");while(t.length<e.length);return e}function cF(e){for(e=e.replace(/\r+\n/gm,`
`);e.search(/\r[^$]/g)>-1;){const t=e.match(/^(.*)\r+/m)[1];let i=e.match(/\r+(.*)$/m)[1];i=i+t.slice(i.length,t.length),e=e.replace(/\r+.*$/m,"\r").replace(/^.*\r/m,i)}return e}var lF=8,uF=13;function hF(e){return!e.buffer.includes(lF)&&!e.buffer.includes(uF)?e:J.fromString(cF(aF(rF.decode(e.buffer))))}var P9;(function(e){e.Delimiter="\0"})(P9||(P9={}));var D9;(function(e){e[e.IsSame=0]="IsSame",e[e.Disconnected=1]="Disconnected",e[e.IsChild=2]="IsChild",e[e.IsParent=3]="IsParent"})(D9||(D9={}));var Ne=class wr{static fromExtHostTestItem(t,i,r=t.parent){if(t._isRoot)return new wr([i]);const s=[t.id];for(let n=r;n&&n.id!==i;n=n.parent)s.push(n.id);return s.push(i),new wr(s.reverse())}static isRoot(t){return!t.includes("\0")}static root(t){const i=t.indexOf("\0");return i===-1?t:t.slice(0,i)}static fromString(t){return new wr(t.split("\0"))}static join(t,i){return new wr([...t.path,i])}static joinToString(t,i){return t.toString()+"\0"+i}static parentId(t){const i=t.lastIndexOf("\0");return i===-1?void 0:t.slice(0,i)}static localId(t){const i=t.lastIndexOf("\0");return i===-1?t:t.slice(i+1)}static isChild(t,i){return i[t.length]==="\0"&&i.startsWith(t)}static compare(t,i){return t===i?0:wr.isChild(t,i)?2:wr.isChild(i,t)?3:1}static getLengthOfCommonPrefix(t,i){if(t===0)return 0;let r=0;for(;r<t-1;){for(let s=1;s<t;s++){const n=i(s-1),o=i(s);if(n.path[r]!==o.path[r])return r}r++}return r}constructor(t,i=t.length){if(this.path=t,this.d=i,t.length===0||i<1)throw new Error("cannot create test with empty path")}get rootId(){return new wr(this.path,1)}get parentId(){return this.d>1?new wr(this.path,this.d-1):void 0}get localId(){return this.path[this.d-1]}get controllerId(){return this.path[0]}get isRoot(){return this.d===1}*idsFromRoot(){for(let t=1;t<=this.d;t++)yield new wr(this.path,t)}*idsToRoot(){for(let t=this.d;t>0;t--)yield new wr(this.path,t)}compare(t){if(typeof t=="string")return wr.compare(this.toString(),t);for(let i=0;i<t.d&&i<this.d;i++)if(t.path[i]!==this.path[i])return 1;return t.d>this.d?2:t.d<this.d?3:0}toJSON(){return this.toString()}toString(){if(!this.c){this.c=this.path[0];for(let t=1;t<this.d;t++)this.c+="\0",this.c+=this.path[t]}return this.c}},A9;(function(e){e[e.Unset=0]="Unset",e[e.Queued=1]="Queued",e[e.Running=2]="Running",e[e.Passed=3]="Passed",e[e.Failed=4]="Failed",e[e.Skipped=5]="Skipped",e[e.Errored=6]="Errored"})(A9||(A9={}));var R9;(function(e){e[e.Run=1]="Run",e[e.Debug=2]="Debug",e[e.Coverage=3]="Coverage"})(R9||(R9={}));var T9;(function(e){e[e.Refresh=2]="Refresh",e[e.CodeRelatedToTest=4]="CodeRelatedToTest",e[e.TestRelatedToCode=8]="TestRelatedToCode"})(T9||(T9={}));var L9;(function(e){e[e.Run=2]="Run",e[e.Debug=4]="Debug",e[e.Coverage=8]="Coverage",e[e.HasNonDefaultProfile=16]="HasNonDefaultProfile",e[e.HasConfigurable=32]="HasConfigurable",e[e.SupportsContinuousRun=64]="SupportsContinuousRun"})(L9||(L9={}));var dF=e=>"runId"in e,Fa;(function(e){e.serialize=t=>({range:t.range.toJSON(),uri:t.uri.toJSON()}),e.deserialize=(t,i)=>({range:et.lift(i.range),uri:t.asCanonicalUri(E.revive(i.uri))})})(Fa||(Fa={}));var N9;(function(e){e[e.Error=0]="Error",e[e.Output=1]="Output"})(N9||(N9={}));var of;(function(e){e.serialize=t=>({label:t.label,uri:t.uri?.toJSON(),position:t.position?.toJSON()}),e.deserialize=(t,i)=>({label:i.label,uri:i.uri?t.asCanonicalUri(E.revive(i.uri)):void 0,position:i.position?er.lift(i.position):void 0})})(of||(of={}));var af;(function(e){e.serialize=t=>({message:t.message,type:0,expected:t.expected,actual:t.actual,contextValue:t.contextValue,location:t.location&&Fa.serialize(t.location),stackTrace:t.stackTrace?.map(of.serialize)}),e.deserialize=(t,i)=>({message:i.message,type:0,expected:i.expected,actual:i.actual,contextValue:i.contextValue,location:i.location&&Fa.deserialize(t,i.location),stackTrace:i.stackTrace&&i.stackTrace.map(r=>of.deserialize(t,r))})})(af||(af={}));var cf;(function(e){e.serialize=t=>({message:t.message,type:1,offset:t.offset,length:t.length,location:t.location&&Fa.serialize(t.location)}),e.deserialize=(t,i)=>({message:i.message,type:1,offset:i.offset,length:i.length,location:i.location&&Fa.deserialize(t,i.location)})})(cf||(cf={}));var lf;(function(e){e.serialize=t=>t.type===0?af.serialize(t):cf.serialize(t),e.deserialize=(t,i)=>i.type===0?af.deserialize(t,i):cf.deserialize(t,i),e.isDiffable=t=>t.type===0&&t.actual!==void 0&&t.expected!==void 0})(lf||(lf={}));var _l;(function(e){e.serializeWithoutMessages=t=>({state:t.state,duration:t.duration,messages:[]}),e.serialize=t=>({state:t.state,duration:t.duration,messages:t.messages.map(lf.serialize)}),e.deserialize=(t,i)=>({state:i.state,duration:i.duration,messages:i.messages.map(r=>lf.deserialize(t,r))})})(_l||(_l={}));var O9="\0",uf=(e,t)=>e+O9+t,F9=e=>{const t=e.indexOf(O9);return{ctrlId:e.slice(0,t),tagId:e.slice(t+1)}},hf;(function(e){e.serialize=t=>({extId:t.extId,label:t.label,tags:t.tags,busy:t.busy,children:void 0,uri:t.uri?.toJSON(),range:t.range?.toJSON()||null,description:t.description,error:t.error,sortText:t.sortText}),e.deserialize=(t,i)=>({extId:i.extId,label:i.label,tags:i.tags,busy:i.busy,children:void 0,uri:i.uri?t.asCanonicalUri(E.revive(i.uri)):void 0,range:i.range?et.lift(i.range):null,description:i.description,error:i.error,sortText:i.sortText})})(hf||(hf={}));var M9;(function(e){e[e.NotExpandable=0]="NotExpandable",e[e.Expandable=1]="Expandable",e[e.BusyExpanding=2]="BusyExpanding",e[e.Expanded=3]="Expanded"})(M9||(M9={}));var xn;(function(e){e.serialize=t=>({expand:t.expand,item:hf.serialize(t.item)}),e.deserialize=(t,i)=>({controllerId:Ne.root(i.item.extId),expand:i.expand,item:hf.deserialize(t,i.item)})})(xn||(xn={}));var jl;(function(e){e.serialize=t=>{let i;return t.item&&(i={},t.item.label!==void 0&&(i.label=t.item.label),t.item.tags!==void 0&&(i.tags=t.item.tags),t.item.busy!==void 0&&(i.busy=t.item.busy),t.item.uri!==void 0&&(i.uri=t.item.uri?.toJSON()),t.item.range!==void 0&&(i.range=t.item.range?.toJSON()),t.item.description!==void 0&&(i.description=t.item.description),t.item.error!==void 0&&(i.error=t.item.error),t.item.sortText!==void 0&&(i.sortText=t.item.sortText)),{extId:t.extId,expand:t.expand,item:i}},e.deserialize=t=>{let i;return t.item&&(i={},t.item.label!==void 0&&(i.label=t.item.label),t.item.tags!==void 0&&(i.tags=t.item.tags),t.item.busy!==void 0&&(i.busy=t.item.busy),t.item.range!==void 0&&(i.range=t.item.range?et.lift(t.item.range):null),t.item.description!==void 0&&(i.description=t.item.description),t.item.error!==void 0&&(i.error=t.item.error),t.item.sortText!==void 0&&(i.sortText=t.item.sortText)),{extId:t.extId,expand:t.expand,item:i}}})(jl||(jl={}));var yv=(e,t)=>{t.expand!==void 0&&(e.expand=t.expand),t.item!==void 0&&(e.item=e.item?Object.assign(e.item,t.item):t.item)},U9;(function(e){e.serializeWithoutMessages=t=>({...xn.serialize(t),ownComputedState:t.ownComputedState,computedState:t.computedState,tasks:t.tasks.map(_l.serializeWithoutMessages)}),e.serialize=t=>({...xn.serialize(t),ownComputedState:t.ownComputedState,computedState:t.computedState,tasks:t.tasks.map(_l.serialize)}),e.deserialize=(t,i)=>({...xn.deserialize(t,i),ownComputedState:i.ownComputedState,computedState:i.computedState,tasks:i.tasks.map(r=>_l.deserialize(t,r)),retired:!0})})(U9||(U9={}));var Ev;(function(e){e.empty=()=>({covered:0,total:0}),e.sum=(t,i)=>{t.covered+=i.covered,t.total+=i.total}})(Ev||(Ev={}));var _9;(function(e){e.serialize=t=>({id:t.id,statement:t.statement,branch:t.branch,declaration:t.declaration,testIds:t.testIds,uri:t.uri.toJSON()}),e.deserialize=(t,i)=>({id:i.id,statement:i.statement,branch:i.branch,declaration:i.declaration,testIds:i.testIds,uri:t.asCanonicalUri(E.revive(i.uri))}),e.empty=(t,i)=>({id:t,uri:i,statement:Ev.empty()})})(_9||(_9={}));function Sv(e){return{...e,location:e.location?.toJSON()}}function xv(e){return e.location=e.location?er.isIPosition(e.location)?er.lift(e.location):et.lift(e.location):void 0,e}var j9;(function(e){e[e.Declaration=0]="Declaration",e[e.Statement=1]="Statement",e[e.Branch=2]="Branch"})(j9||(j9={}));var H9;(function(e){e.serialize=t=>t.type===0?ff.serialize(t):pf.serialize(t),e.deserialize=t=>t.type===0?ff.deserialize(t):pf.deserialize(t)})(H9||(H9={}));var df;(function(e){e.serialize=Sv,e.deserialize=xv})(df||(df={}));var ff;(function(e){e.serialize=Sv,e.deserialize=xv})(ff||(ff={}));var pf;(function(e){e.serialize=t=>({...Sv(t),branches:t.branches?.map(df.serialize)}),e.deserialize=t=>({...xv(t),branches:t.branches?.map(df.deserialize)})})(pf||(pf={}));var B9;(function(e){e[e.Add=0]="Add",e[e.Update=1]="Update",e[e.DocumentSynced=2]="DocumentSynced",e[e.Remove=3]="Remove",e[e.IncrementPendingExtHosts=4]="IncrementPendingExtHosts",e[e.Retire=5]="Retire",e[e.AddTag=6]="AddTag",e[e.RemoveTag=7]="RemoveTag"})(B9||(B9={}));var gf;(function(e){e.deserialize=(t,i)=>i.op===0?{op:i.op,item:xn.deserialize(t,i.item)}:i.op===1?{op:i.op,item:jl.deserialize(i.item)}:i.op===2?{op:i.op,uri:t.asCanonicalUri(E.revive(i.uri)),docv:i.docv}:i,e.serialize=t=>t.op===0?{op:t.op,item:xn.serialize(t.item)}:t.op===1?{op:t.op,item:jl.serialize(t.item)}:t})(gf||(gf={}));var fF=class{constructor(e){this.l=e,this.f=new Map,this.g=new Map,this.h=new Set,this.j=0,this.k=0,this.tags=this.f}apply(e){const t=this.x();for(const i of e)switch(i.op){case 0:this.p(xn.deserialize(this.l,i.item),t);break;case 1:this.q(jl.deserialize(i.item),t);break;case 3:this.v(i.itemId,t);break;case 5:this.w(i.itemId);break;case 4:this.updatePendingRoots(i.amount);break;case 6:this.f.set(i.tag.id,i.tag);break;case 7:this.f.delete(i.id);break}t.complete?.()}p(e,t){const i=Ne.parentId(e.item.extId)?.toString();let r;if(!i)r=this.y(e),this.h.add(r),this.g.set(e.item.extId,r);else if(this.g.has(i)){const s=this.g.get(i);s.children.add(e.item.extId),r=this.y(e,s),this.g.set(e.item.extId,r)}else{console.error(`Test with unknown parent ID: ${JSON.stringify(e)}`);return}return t.add?.(r),e.expand===2&&this.j++,r}q(e,t){const i=this.g.get(e.extId);if(i)return e.expand!==void 0&&(i.expand===2&&this.j--,e.expand===2&&this.j++),yv(i,e),t.update?.(i),i}v(e,t){const i=this.g.get(e);if(!i)return;const r=Ne.parentId(i.item.extId)?.toString();r?this.g.get(r).children.delete(i.item.extId):this.h.delete(i);const s=[[e]];for(;s.length;)for(const n of s.pop()){const o=this.g.get(n);o&&(s.push(o.children),this.g.delete(n),t.remove?.(o,o!==i),o.expand===2&&this.j--)}}w(e){}updatePendingRoots(e){this.k+=e}x(){return{}}},pF=V("editorGroupsService"),W9;(function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"})(W9||(W9={}));var z9;(function(e){e[e.HORIZONTAL=0]="HORIZONTAL",e[e.VERTICAL=1]="VERTICAL"})(z9||(z9={}));var V9;(function(e){e[e.FIRST=0]="FIRST",e[e.LAST=1]="LAST",e[e.NEXT=2]="NEXT",e[e.PREVIOUS=3]="PREVIOUS"})(V9||(V9={}));var q9;(function(e){e[e.MAXIMIZE=0]="MAXIMIZE",e[e.EXPAND=1]="EXPAND",e[e.EVEN=2]="EVEN"})(q9||(q9={}));var G9;(function(e){e[e.COPY_EDITORS=0]="COPY_EDITORS",e[e.MOVE_EDITORS=1]="MOVE_EDITORS"})(G9||(G9={}));var J9;(function(e){e[e.CREATION_TIME=0]="CREATION_TIME",e[e.MOST_RECENTLY_ACTIVE=1]="MOST_RECENTLY_ACTIVE",e[e.GRID_APPEARANCE=2]="GRID_APPEARANCE"})(J9||(J9={}));var Q9;(function(e){e[e.NEW_EDITOR=1]="NEW_EDITOR",e[e.MOVE_EDITOR=2]="MOVE_EDITOR",e[e.COPY_EDITOR=3]="COPY_EDITOR"})(Q9||(Q9={}));var gJ=V("editorService"),gF=-1,mF=-2,Y9;(function(e){e[e.Upsert=0]="Upsert",e[e.SetTags=1]="SetTags",e[e.UpdateCanResolveChildren=2]="UpdateCanResolveChildren",e[e.RemoveChild=3]="RemoveChild",e[e.SetProp=4]="SetProp",e[e.Bulk=5]="Bulk",e[e.DocumentSynced=6]="DocumentSynced"})(Y9||(Y9={}));var Hl=(e,t)=>e===t,vF={range:(e,t)=>e===t?!0:!e||!t?!1:e.equalsRange(t),busy:Hl,label:Hl,description:Hl,error:Hl,sortText:Hl,tags:(e,t)=>!(e.length!==t.length||e.some(i=>!t.includes(i)))},wF=Object.entries(vF),bF=(e,t)=>{let i;for(const[r,s]of wF)s(e[r],t[r])||(i?i[r]=t[r]:i={[r]:t[r]});return i},yF=class extends X{get root(){return this.s.root}constructor(e){super(),this.s=e,this.f=this.B(new Es(()=>this.flushDiff(),200)),this.g=this.B(new I),this.tree=new Map,this.j=new Map,this.m=[],this.onDidGenerateDiff=this.g.event,this.root.canResolveChildren=!0,this.z(this.root,void 0)}set resolveHandler(e){this.h=e;for(const t of this.tree.values())this.J(t)}get resolveHandler(){return this.h}collectDiff(){const e=this.m;return this.m=[],e}pushDiff(e){switch(e.op){case 2:{for(const t of this.m)if(t.op===2&&t.uri===e.uri){t.docv=e.docv;return}break}case 1:{const t=this.m[this.m.length-1];if(t){if(t.op===1&&t.item.extId===e.item.extId){yv(t.item,e.item);return}if(t.op===0&&t.item.item.extId===e.item.extId){yv(t.item,e.item);return}}break}}this.m.push(e),this.f.isScheduled()||this.f.schedule()}expand(e,t){const i=this.tree.get(e);if(i){if((i.expandLevels===void 0||t>i.expandLevels)&&(i.expandLevels=t),i.expand===1){const r=this.M(i);return r.isOpen()?this.L(i,t-1):r.wait().then(()=>this.L(i,t-1))}else if(i.expand===3)return i.resolveBarrier?.isOpen()===!1?i.resolveBarrier.wait().then(()=>this.L(i,t-1)):this.L(i,t-1)}}dispose(){for(const e of this.tree.values())this.s.getApiFor(e.actual).listener=void 0;this.tree.clear(),this.m=[],super.dispose()}w(e,t){switch(t.op){case 3:this.O(Ne.joinToString(e.fullId,t.id));break;case 0:this.z(t.item,e);break;case 5:for(const i of t.ops)this.w(e,i);break;case 1:this.C(t.new,t.old,e.fullId.toString());break;case 2:this.J(e);break;case 4:this.pushDiff({op:1,item:{extId:e.fullId.toString(),item:t.update}});break;case 6:this.y(e.actual.uri);break;default:SN(t)}}y(e){e&&this.pushDiff({op:2,uri:e,docv:this.s.getDocumentVersion(e)})}z(e,t){const i=Ne.fromExtHostTestItem(e,this.root.id,t?.actual),r=this.s.getApiFor(e);r.parent&&r.parent!==t?.actual&&this.s.getChildren(r.parent).delete(e.id);let s=this.tree.get(i.toString());if(!s){s={fullId:i,actual:e,expandLevels:t?.expandLevels?t.expandLevels-1:void 0,expand:0},e.tags.forEach(this.D,this),this.tree.set(s.fullId.toString(),s),this.G(e,t),this.pushDiff({op:0,item:{controllerId:this.s.controllerId,expand:s.expand,item:this.s.toITestItem(e)}}),this.I(e,s,t);return}if(s.actual===e){this.H(e,s,t);return}if(s.actual.uri?.toString()!==e.uri?.toString())return this.O(i.toString()),this.z(e,t);const n=this.s.getChildren(s.actual),o=s.actual,a=bF(this.s.toITestItem(o),this.s.toITestItem(e));this.s.getApiFor(o).listener=void 0,s.actual=e,s.resolveBarrier=void 0,s.expand=0,a&&(a.hasOwnProperty("tags")&&(this.C(e.tags,o.tags,i.toString()),delete a.tags),this.w(s,{op:4,update:a})),this.I(e,s,t);for(const[l,u]of n)this.s.getChildren(e).get(u.id)||this.O(Ne.joinToString(i,u.id));const c=s.expandLevels;c!==void 0&&queueMicrotask(()=>{s.expand===1&&(s.expandLevels=void 0,this.expand(i.toString(),c))}),this.y(s.actual.uri)}C(e,t,i){const r=new Set(t.map(s=>s.id));for(const s of e)r.delete(s.id)||this.D(s);this.pushDiff({op:1,item:{extId:i,item:{tags:e.map(s=>uf(this.s.controllerId,s.id))}}}),r.forEach(this.F,this)}D(e){const t=this.j.get(e.id);t?t.refCount++:(this.j.set(e.id,{refCount:1}),this.pushDiff({op:6,tag:{id:uf(this.s.controllerId,e.id)}}))}F(e){const t=this.j.get(e);t&&!--t.refCount&&(this.j.delete(e),this.pushDiff({op:7,id:uf(this.s.controllerId,e)}))}G(e,t){this.s.getApiFor(e).parent=t&&t.actual!==this.root?t.actual:void 0}H(e,t,i){this.G(e,i);const r=this.s.getApiFor(e);r.parent=i?.actual,r.listener=s=>this.w(t,s),this.J(t)}I(e,t,i){this.H(e,t,i);for(const[r,s]of this.s.getChildren(e))this.z(s,t)}J(e){let t;this.h?e.resolveBarrier?t=e.resolveBarrier.isOpen()?3:2:t=e.actual.canResolveChildren?1:0:t=0,t!==e.expand&&(e.expand=t,this.pushDiff({op:1,item:{extId:e.fullId.toString(),expand:t}}),t===1&&e.expandLevels!==void 0&&this.M(e))}L(e,t){if(t<0)return;const i=[];for(const[r,s]of this.s.getChildren(e.actual)){const n=this.expand(Ne.joinToString(e.fullId,s.id),t);fn(n)&&i.push(n)}if(i.length)return Promise.all(i).then(()=>{})}M(e){if(e.resolveBarrier)return e.resolveBarrier;if(!this.h){const s=new ur;return s.open(),s}e.expand=2,this.N(e);const t=e.resolveBarrier=new ur,i=s=>{console.error(`Unhandled error in resolveHandler of test controller "${this.s.controllerId}"`,s)};let r;try{r=this.h(e.actual===this.root?void 0:e.actual)}catch(s){i(s)}return fn(r)?r.catch(i).then(()=>{t.open(),this.J(e)}):(t.open(),this.J(e)),e.resolveBarrier}N(e){this.pushDiff({op:1,item:{extId:e.fullId.toString(),expand:e.expand}})}O(e){const t=this.tree.get(e);if(!t)throw new Error("attempting to remove non-existent child");this.pushDiff({op:3,itemId:e});const i=[t];for(;i.length;){const r=i.pop();if(r){this.s.getApiFor(r.actual).listener=void 0;for(const s of r.actual.tags)this.F(s.id);this.tree.delete(r.fullId.toString());for(const[s,n]of this.s.getChildren(r.actual))i.push(this.tree.get(Ne.joinToString(r.fullId,n.id)))}}}flushDiff(){const e=this.collectDiff();e.length&&this.g.fire(e)}},EF=class extends Error{constructor(e){super(`Attempted to insert a duplicate test item ID ${e}`)}},mf=class extends Error{constructor(e){super(`TestItem with ID "${e}" is invalid. Make sure to create it from the createTestItem method.`)}},SF=class extends Error{constructor(e,t,i){super(`TestItem with ID "${e}" is from controller "${t}" and cannot be added as a child of an item from controller "${i}".`)}},xF=(e,t,i)=>{let r=new Map;return{get size(){return r.size},forEach(s,n){for(const o of r.values())s.call(n,o,this)},[Symbol.iterator](){return r.entries()},replace(s){const n=new Map,o=new Set(r.keys()),a={op:5,ops:[]};for(const c of s){if(!(c instanceof i))throw new mf(c.id);const l=t(c).controllerId;if(l!==e.controllerId)throw new SF(c.id,l,e.controllerId);if(n.has(c.id))throw new EF(c.id);n.set(c.id,c),o.delete(c.id),a.ops.push({op:0,item:c})}for(const c of o.keys())a.ops.push({op:3,id:c});e.listener?.(a),r=n},add(s){if(!(s instanceof i))throw new mf(s.id);r.set(s.id,s),e.listener?.({op:0,item:s})},delete(s){r.delete(s)&&e.listener?.({op:3,id:s})},get(s){return r.get(s)},toJSON(){return Array.from(r.values())}}},X9=new WeakMap,kF=(e,t)=>{const i={controllerId:t};return X9.set(e,i),i},vf=e=>{const t=X9.get(e);if(!t)throw new mf(e?.id||"<unknown>");return t},kv="__ICUBE_LIGHT_RESOLVER_PERMANENT_CLOSE__",$F=V("remoteAuthorityResolverService"),Z9;(function(e){e[e.WebSocket=0]="WebSocket",e[e.Managed=1]="Managed"})(Z9||(Z9={}));var K9=class{static{this.WEB_MANAGED_ID=Number.MAX_SAFE_INTEGER}constructor(e){this.id=e,this.type=1}toString(){return`Managed(${this.id})`}},CF=class{constructor(e,t){this.host=e,this.port=t,this.type=0}toString(){return`WebSocket(${this.host}:${this.port})`}},Ai;(function(e){e.Unknown="Unknown",e.NotAvailable="NotAvailable",e.TemporarilyNotAvailable="TemporarilyNotAvailable",e.NoResolverFound="NoResolverFound",e.InvalidAuthority="InvalidAuthority"})(Ai||(Ai={}));var kn=class ea extends yr{static isNotAvailable(t){return t instanceof ea&&t._code===Ai.NotAvailable}static isTemporarilyNotAvailable(t){return t instanceof ea&&t._code===Ai.TemporarilyNotAvailable}static isNoResolverFound(t){return t instanceof ea&&t._code===Ai.NoResolverFound}static isInvalidAuthority(t){return t instanceof ea&&t._code===Ai.InvalidAuthority}static isHandled(t){return t?.message?.includes(kv)||t instanceof ea&&t.isHandled}constructor(t,i=Ai.Unknown,r){super(t),this._message=t,this._code=i,this._detail=r,this.isHandled=i===Ai.NotAvailable&&r===!0,Object.setPrototypeOf(this,ea.prototype)}};function ex(e){const t=e.indexOf("+");return t===-1?e:e.substring(0,t)}var $v,xo,Ts,Cv,ko,$n,$o,Iv,Pv,wf,Bl,Dv,rs,ss,Av,Ri,Rv;function ie(e){return Object.assign(e,{apply:function(...i){if(i.length===0)return Reflect.construct(e,[]);{const r=i.length===1?[]:i[1];return Reflect.construct(e,r,i[0].constructor)}},call:function(...i){if(i.length===0)return Reflect.construct(e,[]);{const[r,...s]=i;return Reflect.construct(e,s,r.constructor)}}})}var Tv;(function(e){e[e.Top=0]="Top",e[e.Bottom=1]="Bottom"})(Tv||(Tv={}));var tx;(function(e){e[e.TerminalCommand=0]="TerminalCommand",e[e.Opener=1]="Opener",e[e.Command=3]="Command"})(tx||(tx={}));var Oe=$v=class{static from(...t){let i=t;return new $v(function(){if(i){for(const r of i)r&&typeof r.dispose=="function"&&r.dispose();i=void 0}})}#e;constructor(t){this.#e=t}dispose(){typeof this.#e=="function"&&(this.#e(),this.#e=void 0)}};Oe=$v=__decorate([ie],Oe);var Pe=xo=class{static Min(...t){if(t.length===0)throw new TypeError;let i=t[0];for(let r=1;r<t.length;r++){const s=t[r];s.isBefore(i)&&(i=s)}return i}static Max(...t){if(t.length===0)throw new TypeError;let i=t[0];for(let r=1;r<t.length;r++){const s=t[r];s.isAfter(i)&&(i=s)}return i}static isPosition(t){if(!t)return!1;if(t instanceof xo)return!0;const{line:i,character:r}=t;return typeof i=="number"&&typeof r=="number"}static of(t){if(t instanceof xo)return t;if(this.isPosition(t))return new xo(t.line,t.character);throw new Error("Invalid argument, is NOT a position-like object")}get line(){return this.c}get character(){return this.e}constructor(t,i){if(t<0)throw $e("line must be non-negative");if(i<0)throw $e("character must be non-negative");this.c=t,this.e=i}isBefore(t){return this.c<t.c?!0:t.c<this.c?!1:this.e<t.e}isBeforeOrEqual(t){return this.c<t.c?!0:t.c<this.c?!1:this.e<=t.e}isAfter(t){return!this.isBeforeOrEqual(t)}isAfterOrEqual(t){return!this.isBefore(t)}isEqual(t){return this.c===t.c&&this.e===t.e}compareTo(t){return this.c<t.c?-1:this.c>t.line?1:this.e<t.e?-1:this.e>t.e?1:0}translate(t,i=0){if(t===null||i===null)throw $e();let r;return typeof t>"u"?r=0:typeof t=="number"?r=t:(r=typeof t.lineDelta=="number"?t.lineDelta:0,i=typeof t.characterDelta=="number"?t.characterDelta:0),r===0&&i===0?this:new xo(this.line+r,this.character+i)}with(t,i=this.character){if(t===null||i===null)throw $e();let r;return typeof t>"u"?r=this.line:typeof t=="number"?r=t:(r=typeof t.line=="number"?t.line:this.line,i=typeof t.character=="number"?t.character:this.character),r===this.line&&i===this.character?this:new xo(r,i)}toJSON(){return{line:this.line,character:this.character}}[Symbol.for("debug.description")](){return`(${this.line}:${this.character})`}};Pe=xo=__decorate([ie],Pe);var Se=Ts=class{static isRange(t){return t instanceof Ts?!0:t?Pe.isPosition(t.start)&&Pe.isPosition(t.end):!1}static of(t){if(t instanceof Ts)return t;if(this.isRange(t))return new Ts(t.start,t.end);throw new Error("Invalid argument, is NOT a range-like object")}get start(){return this.c}get end(){return this.e}constructor(t,i,r,s){let n,o;if(typeof t=="number"&&typeof i=="number"&&typeof r=="number"&&typeof s=="number"?(n=new Pe(t,i),o=new Pe(r,s)):Pe.isPosition(t)&&Pe.isPosition(i)&&(n=Pe.of(t),o=Pe.of(i)),!n||!o)throw new Error("Invalid arguments");n.isBefore(o)?(this.c=n,this.e=o):(this.c=o,this.e=n)}contains(t){return Ts.isRange(t)?this.contains(t.start)&&this.contains(t.end):Pe.isPosition(t)?!(Pe.of(t).isBefore(this.c)||this.e.isBefore(t)):!1}isEqual(t){return this.c.isEqual(t.c)&&this.e.isEqual(t.e)}intersection(t){const i=Pe.Max(t.start,this.c),r=Pe.Min(t.end,this.e);if(!i.isAfter(r))return new Ts(i,r)}union(t){if(this.contains(t))return this;if(t.contains(this))return t;const i=Pe.Min(t.start,this.c),r=Pe.Max(t.end,this.end);return new Ts(i,r)}get isEmpty(){return this.c.isEqual(this.e)}get isSingleLine(){return this.c.line===this.e.line}with(t,i=this.end){if(t===null||i===null)throw $e();let r;return t?Pe.isPosition(t)?r=t:(r=t.start||this.start,i=t.end||this.end):r=this.start,r.isEqual(this.c)&&i.isEqual(this.end)?this:new Ts(r,i)}toJSON(){return[this.start,this.end]}[Symbol.for("debug.description")](){return ix(this)}};Se=Ts=__decorate([ie],Se);var Ls=Cv=class extends Se{static isSelection(t){return t instanceof Cv?!0:t?Se.isRange(t)&&Pe.isPosition(t.anchor)&&Pe.isPosition(t.active)&&typeof t.isReversed=="boolean":!1}get anchor(){return this.f}get active(){return this.g}constructor(t,i,r,s){let n,o;if(typeof t=="number"&&typeof i=="number"&&typeof r=="number"&&typeof s=="number"?(n=new Pe(t,i),o=new Pe(r,s)):Pe.isPosition(t)&&Pe.isPosition(i)&&(n=Pe.of(t),o=Pe.of(i)),!n||!o)throw new Error("Invalid arguments");super(n,o),this.f=n,this.g=o}get isReversed(){return this.f===this.e}toJSON(){return{start:this.start,end:this.end,active:this.active,anchor:this.anchor}}[Symbol.for("debug.description")](){return IF(this)}};Ls=Cv=__decorate([ie],Ls);function ix(e){return e.isEmpty?`[${e.start.line}:${e.start.character})`:`[${e.start.line}:${e.start.character} -> ${e.end.line}:${e.end.character})`}function IF(e){let t=ix(e);return e.isEmpty||(e.active.isEqual(e.start)?t=`|${t}`:t=`${t}|`),t}var rx=e=>{if(typeof e!="string"||e.length===0||!/^[0-9A-Za-z_\-]+$/.test(e))throw $e("connectionToken")},PF=class{static isResolvedAuthority(e){return e&&typeof e=="object"&&typeof e.host=="string"&&typeof e.port=="number"&&(e.connectionToken===void 0||typeof e.connectionToken=="string")}constructor(e,t,i){if(typeof e!="string"||e.length===0)throw $e("host");if(typeof t!="number"||t===0||Math.round(t)!==t)throw $e("port");typeof i<"u"&&rx(i),this.host=e,this.port=Math.round(t),this.connectionToken=i}},bf=class{static isManagedResolvedAuthority(e){return e&&typeof e=="object"&&typeof e.makeConnection=="function"&&(e.connectionToken===void 0||typeof e.connectionToken=="string")}constructor(e,t){this.makeConnection=e,this.connectionToken=t,typeof t<"u"&&rx(t)}},Ma=class ym extends Error{static NotAvailable(t,i){return new ym(t,Ai.NotAvailable,i)}static TemporarilyNotAvailable(t){return new ym(t,Ai.TemporarilyNotAvailable)}constructor(t,i=Ai.Unknown,r){super(t),this._message=t,this._code=i,this._detail=r,Object.setPrototypeOf(this,ym.prototype)}},Lr;(function(e){e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(Lr||(Lr={}));var Ua;(function(e){e[e.Replace=1]="Replace",e[e.Append=2]="Append",e[e.Prepend=3]="Prepend"})(Ua||(Ua={}));var Cn=ko=class{static isTextEdit(t){return t instanceof ko?!0:t?Se.isRange(t)&&typeof t.newText=="string":!1}static replace(t,i){return new ko(t,i)}static insert(t,i){return ko.replace(new Se(t,t),i)}static delete(t){return ko.replace(t,"")}static setEndOfLine(t){const i=new ko(new Se(new Pe(0,0),new Pe(0,0)),"");return i.newEol=t,i}get range(){return this.c}set range(t){if(t&&!Se.isRange(t))throw $e("range");this.c=t}get newText(){return this.e||""}set newText(t){if(t&&typeof t!="string")throw $e("newText");this.e=t}get newEol(){return this.f}set newEol(t){if(t&&typeof t!="number")throw $e("newEol");this.f=t}constructor(t,i){this.c=t,this.e=i}toJSON(){return{range:this.range,newText:this.newText,newEol:this.f}}};Cn=ko=__decorate([ie],Cn);var yf=$n=class{static isNotebookCellEdit(t){return t instanceof $n?!0:t?Os.isNotebookRange(t)&&Array.isArray(t.newCells):!1}static replaceCells(t,i){return new $n(t,i)}static insertCells(t,i){return new $n(new Os(t,t),i)}static deleteCells(t){return new $n(t,[])}static updateCellMetadata(t,i){const r=new $n(new Os(t,t),[]);return r.newCellMetadata=i,r}static updateNotebookMetadata(t){const i=new $n(new Os(0,0),[]);return i.newNotebookMetadata=t,i}constructor(t,i){this.range=t,this.newCells=i}};yf=$n=__decorate([ie],yf);var Lv=class Em{static isSnippetTextEdit(t){return t instanceof Em?!0:t?Se.isRange(t.range)&&Co.isSnippetString(t.snippet):!1}static replace(t,i){return new Em(t,i)}static insert(t,i){return Em.replace(new Se(t,t),i)}constructor(t,i){this.range=t,this.snippet=i}},sx;(function(e){e[e.File=1]="File",e[e.Text=2]="Text",e[e.Cell=3]="Cell",e[e.CellReplace=5]="CellReplace",e[e.Snippet=6]="Snippet"})(sx||(sx={}));var In=class{constructor(){this.c=[]}_allEntries(){return this.c}renameFile(t,i,r,s){this.c.push({_type:1,from:t,to:i,options:r,metadata:s})}createFile(t,i,r){this.c.push({_type:1,from:void 0,to:t,options:i,metadata:r})}deleteFile(t,i,r){this.c.push({_type:1,from:t,to:void 0,options:i,metadata:r})}e(t,i,r){this.c.push({_type:3,metadata:r,uri:t,edit:{editType:5,metadata:i}})}f(t,i,r,s){const n=i.start,o=i.end;(n!==o||r.length>0)&&this.c.push({_type:5,uri:t,index:n,count:o-n,cells:r,metadata:s})}g(t,i,r,s){this.c.push({_type:3,metadata:s,uri:t,edit:{editType:3,index:i,metadata:r}})}replace(t,i,r,s){this.c.push({_type:2,uri:t,edit:new Cn(i,r),metadata:s})}insert(t,i,r,s){this.replace(t,new Se(i,i),r,s)}delete(t,i,r){this.replace(t,i,"",r)}has(t){return this.c.some(i=>i._type===2&&i.uri.toString()===t.toString())}set(t,i){if(i)for(const r of i){if(!r)continue;let s,n;Array.isArray(r)?(s=r[0],n=r[1]):s=r,yf.isNotebookCellEdit(s)?s.newCellMetadata?this.g(t,s.range.start,s.newCellMetadata,n):s.newNotebookMetadata?this.e(t,s.newNotebookMetadata,n):this.f(t,s.range,s.newCells,n):Lv.isSnippetTextEdit(s)?this.c.push({_type:6,uri:t,range:s.range,edit:s.snippet,metadata:n}):this.c.push({_type:2,uri:t,edit:s,metadata:n})}else{for(let r=0;r<this.c.length;r++){const s=this.c[r];switch(s._type){case 2:case 6:case 3:case 5:s.uri.toString()===t.toString()&&(this.c[r]=void 0);break}}lD(this.c)}}get(t){const i=[];for(const r of this.c)r._type===2&&r.uri.toString()===t.toString()&&i.push(r.edit);return i}entries(){const t=new Gt;for(const i of this.c)if(i._type===2){let r=t.get(i.uri);r||(r=[i.uri,[]],t.set(i.uri,r)),r[1].push(i.edit)}return[...t.values()]}get size(){return this.entries().length}toJSON(){return this.entries()}};In=__decorate([ie],In);var Co=$o=class{static isSnippetString(t){return t instanceof $o?!0:t?typeof t.value=="string":!1}static c(t){return t.replace(/\$|}|\\/g,"\\$&")}constructor(t){this.e=1,this.value=t||""}appendText(t){return this.value+=$o.c(t),this}appendTabstop(t=this.e++){return this.value+="$",this.value+=t,this}appendPlaceholder(t,i=this.e++){if(typeof t=="function"){const r=new $o;r.e=this.e,t(r),this.e=r.e,t=r.value}else t=$o.c(t);return this.value+="${",this.value+=i,this.value+=":",this.value+=t,this.value+="}",this}appendChoice(t,i=this.e++){const r=t.map(s=>s.replaceAll(/[|\\,]/g,"\\$&")).join(",");return this.value+="${",this.value+=i,this.value+="|",this.value+=r,this.value+="|}",this}appendVariable(t,i){if(typeof i=="function"){const r=new $o;r.e=this.e,i(r),this.e=r.e,i=r.value}else typeof i=="string"&&(i=i.replace(/\$|}/g,"\\$&"));return this.value+="${",this.value+=t,i&&(this.value+=":",this.value+=i),this.value+="}",this}};Co=$o=__decorate([ie],Co);var Io;(function(e){e[e.Unnecessary=1]="Unnecessary",e[e.Deprecated=2]="Deprecated"})(Io||(Io={}));var li;(function(e){e[e.Hint=3]="Hint",e[e.Information=2]="Information",e[e.Warning=1]="Warning",e[e.Error=0]="Error"})(li||(li={}));var tr=Iv=class{static isLocation(t){return t instanceof Iv?!0:t?Se.isRange(t.range)&&E.isUri(t.uri):!1}constructor(t,i){if(this.uri=t,i)if(Se.isRange(i))this.range=Se.of(i);else if(Pe.isPosition(i))this.range=new Se(i,i);else throw new Error("Illegal argument")}toJSON(){return{uri:this.uri,range:this.range}}};tr=Iv=__decorate([ie],tr);var Wl=class{static is(t){return t?typeof t.message=="string"&&t.location&&Se.isRange(t.location.range)&&E.isUri(t.location.uri):!1}constructor(t,i){this.location=t,this.message=i}static isEqual(t,i){return t===i?!0:!t||!i?!1:t.message===i.message&&t.location.range.isEqual(i.location.range)&&t.location.uri.toString()===i.location.uri.toString()}};Wl=__decorate([ie],Wl);var Ef=class{constructor(t,i,r=li.Error,s){if(!Se.isRange(t))throw new TypeError("range must be set");if(!i)throw new TypeError("message must be set");this.range=t,this.message=i,this.severity=r,this.extensionID=s}toJSON(){return{severity:li[this.severity],message:this.message,range:this.range,source:this.source,code:this.code,extensionID:this.extensionID}}static isEqual(t,i){return t===i?!0:!t||!i?!1:t.message===i.message&&t.severity===i.severity&&t.code===i.code&&t.severity===i.severity&&t.source===i.source&&t.range.isEqual(i.range)&&Vr(t.tags,i.tags)&&Vr(t.relatedInformation,i.relatedInformation,Wl.isEqual)}};Ef=__decorate([ie],Ef);var Sf=class{constructor(t,i){if(!t)throw new Error("Illegal argument, contents must be defined");Array.isArray(t)?this.contents=t:this.contents=[t],this.range=i}};Sf=__decorate([ie],Sf);var xf=class extends Sf{constructor(t,i,r,s){super(t,i),this.canIncreaseVerbosity=r,this.canDecreaseVerbosity=s}};xf=__decorate([ie],xf);var Nv;(function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"})(Nv||(Nv={}));var zl;(function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"})(zl||(zl={}));var kf=class{constructor(t,i=zl.Text){this.range=t,this.kind=i}toJSON(){return{range:this.range,kind:zl[this.kind]}}};kf=__decorate([ie],kf);var $f=class{constructor(t,i){this.uri=t,this.highlights=i}toJSON(){return{uri:this.uri,highlights:this.highlights.map(t=>t.toJSON())}}};$f=__decorate([ie],$f);var nt;(function(e){e[e.File=0]="File",e[e.Module=1]="Module",e[e.Namespace=2]="Namespace",e[e.Package=3]="Package",e[e.Class=4]="Class",e[e.Method=5]="Method",e[e.Property=6]="Property",e[e.Field=7]="Field",e[e.Constructor=8]="Constructor",e[e.Enum=9]="Enum",e[e.Interface=10]="Interface",e[e.Function=11]="Function",e[e.Variable=12]="Variable",e[e.Constant=13]="Constant",e[e.String=14]="String",e[e.Number=15]="Number",e[e.Boolean=16]="Boolean",e[e.Array=17]="Array",e[e.Object=18]="Object",e[e.Key=19]="Key",e[e.Null=20]="Null",e[e.EnumMember=21]="EnumMember",e[e.Struct=22]="Struct",e[e.Event=23]="Event",e[e.Operator=24]="Operator",e[e.TypeParameter=25]="TypeParameter"})(nt||(nt={}));var Vl;(function(e){e[e.Deprecated=1]="Deprecated"})(Vl||(Vl={}));var ql=Pv=class{static validate(t){if(!t.name)throw new Error("name must not be falsy")}constructor(t,i,r,s,n){this.name=t,this.kind=i,this.containerName=n,typeof r=="string"&&(this.containerName=r),s instanceof tr?this.location=s:r instanceof Se&&(this.location=new tr(s,r)),Pv.validate(this)}toJSON(){return{name:this.name,kind:nt[this.kind],location:this.location,containerName:this.containerName}}};ql=Pv=__decorate([ie],ql);var Gl=wf=class{static validate(t){if(!t.name)throw new Error("name must not be falsy");if(!t.range.contains(t.selectionRange))throw new Error("selectionRange must be contained in fullRange");t.children?.forEach(wf.validate)}constructor(t,i,r,s,n){this.name=t,this.detail=i,this.kind=r,this.range=s,this.selectionRange=n,this.children=[],wf.validate(this)}};Gl=wf=__decorate([ie],Gl);var Jl;(function(e){e[e.Invoke=1]="Invoke",e[e.Automatic=2]="Automatic"})(Jl||(Jl={}));var Cf=class{constructor(t,i){this.title=t,this.kind=i}};Cf=__decorate([ie],Cf);var bt=class{static{Bl=this}static{this.c="."}constructor(t){this.value=t}append(t){return new Bl(this.value?this.value+Bl.c+t:t)}intersects(t){return this.contains(t)||t.contains(this)}contains(t){return this.value===t.value||t.value.startsWith(this.value+Bl.c)}};bt=Bl=__decorate([ie],bt),bt.Empty=new bt(""),bt.QuickFix=bt.Empty.append("quickfix"),bt.Refactor=bt.Empty.append("refactor"),bt.RefactorExtract=bt.Refactor.append("extract"),bt.RefactorInline=bt.Refactor.append("inline"),bt.RefactorMove=bt.Refactor.append("move"),bt.RefactorRewrite=bt.Refactor.append("rewrite"),bt.Source=bt.Empty.append("source"),bt.SourceOrganizeImports=bt.Source.append("organizeImports"),bt.SourceFixAll=bt.Source.append("fixAll"),bt.Notebook=bt.Empty.append("notebook");var Ql=class{constructor(t,i){if(this.range=t,this.parent=i,i&&!i.range.contains(this.range))throw new Error("Invalid argument: parent must contain this range")}};Ql=__decorate([ie],Ql);var Ov=class{constructor(e,t,i,r,s,n){this.kind=e,this.name=t,this.detail=i,this.uri=r,this.range=s,this.selectionRange=n}},nx=class{constructor(e,t){this.fromRanges=t,this.from=e}},ox=class{constructor(e,t){this.fromRanges=t,this.to=e}},_a;(function(e){e[e.Information=0]="Information",e[e.Warning=1]="Warning",e[e.Error=2]="Error"})(_a||(_a={}));var If=class{constructor(t,i){this.range=t,this.command=i}get isResolved(){return!!this.command}};If=__decorate([ie],If);var Si=Dv=class{#e;static isMarkdownString(t){return t instanceof Dv?!0:t&&t.appendCodeblock&&t.appendMarkdown&&t.appendText&&t.value!==void 0}constructor(t,i=!1){this.#e=new E6(t,{supportThemeIcons:i})}get value(){return this.#e.value}set value(t){this.#e.value=t}get isTrusted(){return this.#e.isTrusted}set isTrusted(t){this.#e.isTrusted=t}get supportThemeIcons(){return this.#e.supportThemeIcons}set supportThemeIcons(t){this.#e.supportThemeIcons=t}get supportHtml(){return this.#e.supportHtml}set supportHtml(t){this.#e.supportHtml=t}get baseUri(){return this.#e.baseUri}set baseUri(t){this.#e.baseUri=t}appendText(t){return this.#e.appendText(t),this}appendMarkdown(t){return this.#e.appendMarkdown(t),this}appendCodeblock(t,i){return this.#e.appendCodeblock(i??"",t),this}};Si=Dv=__decorate([ie],Si);var Fv=class{constructor(t,i){this.label=t,this.documentation=i}};Fv=__decorate([ie],Fv);var Mv=class{constructor(t,i){this.label=t,this.documentation=i,this.parameters=[]}};Mv=__decorate([ie],Mv);var Uv=class{constructor(){this.activeSignature=0,this.activeParameter=0,this.signatures=[]}};Uv=__decorate([ie],Uv);var _v;(function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"})(_v||(_v={}));var jv;(function(e){e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"})(jv||(jv={}));var Pf=class{constructor(t){this.value=t}};Pf=__decorate([ie],Pf);var Df=class{constructor(t,i,r){this.position=t,this.label=i,this.kind=r}};Df=__decorate([ie],Df);var ja;(function(e){e[e.Invoke=0]="Invoke",e[e.TriggerCharacter=1]="TriggerCharacter",e[e.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(ja||(ja={}));var pe;(function(e){e[e.Text=0]="Text",e[e.Method=1]="Method",e[e.Function=2]="Function",e[e.Constructor=3]="Constructor",e[e.Field=4]="Field",e[e.Variable=5]="Variable",e[e.Class=6]="Class",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Unit=10]="Unit",e[e.Value=11]="Value",e[e.Enum=12]="Enum",e[e.Keyword=13]="Keyword",e[e.Snippet=14]="Snippet",e[e.Color=15]="Color",e[e.File=16]="File",e[e.Reference=17]="Reference",e[e.Folder=18]="Folder",e[e.EnumMember=19]="EnumMember",e[e.Constant=20]="Constant",e[e.Struct=21]="Struct",e[e.Event=22]="Event",e[e.Operator=23]="Operator",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue"})(pe||(pe={}));var Yl;(function(e){e[e.Deprecated=1]="Deprecated"})(Yl||(Yl={}));var Af=class{constructor(t,i){this.label=t,this.kind=i}toJSON(){return{label:this.label,kind:this.kind&&pe[this.kind],detail:this.detail,documentation:this.documentation,sortText:this.sortText,filterText:this.filterText,preselect:this.preselect,insertText:this.insertText,textEdit:this.textEdit}}};Af=__decorate([ie],Af);var Ha=class{constructor(t=[],i=!1){this.items=t,this.isIncomplete=i}};Ha=__decorate([ie],Ha);var Hv=class{constructor(t,i,r){this.insertText=t,this.range=i,this.command=r}};Hv=__decorate([ie],Hv);var Bv=class{constructor(t){this.commands=void 0,this.suppressSuggestions=void 0,this.items=t}};Bv=__decorate([ie],Bv);var Po;(function(e){e[e.Unknown=0]="Unknown",e[e.Word=1]="Word",e[e.Line=2]="Line",e[e.Suggest=3]="Suggest"})(Po||(Po={}));var Xl;(function(e){e[e.Active=-1]="Active",e[e.Beside=-2]="Beside",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three",e[e.Four=4]="Four",e[e.Five=5]="Five",e[e.Six=6]="Six",e[e.Seven=7]="Seven",e[e.Eight=8]="Eight",e[e.Nine=9]="Nine"})(Xl||(Xl={}));var Pn;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(Pn||(Pn={}));function DF(e,t){return`${Xe.toKey(e)}.${t}`}var Nr;(function(e){e[e.Off=0]="Off",e[e.On=1]="On",e[e.Relative=2]="Relative",e[e.Interval=3]="Interval"})(Nr||(Nr={}));var Ba;(function(e){e[e.Manual=1]="Manual",e[e.AfterDelay=2]="AfterDelay",e[e.FocusOut=3]="FocusOut"})(Ba||(Ba={}));var Rf;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(Rf||(Rf={}));var Wa;(function(e){e[e.Keyboard=1]="Keyboard",e[e.Mouse=2]="Mouse",e[e.Command=3]="Command"})(Wa||(Wa={}));var Zl;(function(e){e[e.Undo=1]="Undo",e[e.Redo=2]="Redo"})(Zl||(Zl={}));var Do;(function(e){e[e.OpenOpen=0]="OpenOpen",e[e.ClosedClosed=1]="ClosedClosed",e[e.OpenClosed=2]="OpenClosed",e[e.ClosedOpen=3]="ClosedOpen"})(Do||(Do={})),function(e){function t(i){switch(i){case"keyboard":return e.Keyboard;case"mouse":return e.Mouse;case"api":return e.Command}}e.fromValue=t}(Wa||(Wa={}));var za;(function(e){e[e.Other=0]="Other",e[e.Comment=1]="Comment",e[e.String=2]="String",e[e.RegEx=3]="RegEx"})(za||(za={})),function(e){function t(i){switch(i){case e.Other:return"other";case e.Comment:return"comment";case e.String:return"string";case e.RegEx:return"regex"}return"other"}e.toString=t}(za||(za={}));var Tf=class{constructor(t,i){if(i&&!E.isUri(i))throw $e("target");if(!Se.isRange(t)||t.isEmpty)throw $e("range");this.range=t,this.target=i}};Tf=__decorate([ie],Tf);var Va=class{constructor(t,i,r,s){this.red=t,this.green=i,this.blue=r,this.alpha=s}};Va=__decorate([ie],Va);var Lf=class{constructor(t,i){if(i&&!(i instanceof Va))throw $e("color");if(!Se.isRange(t)||t.isEmpty)throw $e("range");this.range=t,this.color=i}};Lf=__decorate([ie],Lf);var Nf=class{constructor(t){if(!t||typeof t!="string")throw $e("label");this.label=t}};Nf=__decorate([ie],Nf);var ax;(function(e){e[e.RGB=0]="RGB",e[e.HEX=1]="HEX",e[e.HSL=2]="HSL"})(ax||(ax={}));var Wv;(function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Information=2]="Information"})(Wv||(Wv={}));var zv;(function(e){e[e.Unknown=0]="Unknown",e[e.Shutdown=1]="Shutdown",e[e.Process=2]="Process",e[e.User=3]="User",e[e.Extension=4]="Extension"})(zv||(zv={}));var Of;(function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"})(Of||(Of={}));var AF=class{constructor(e,t,i){if(this.startIndex=e,this.length=t,this.tooltip=i,typeof e!="number"||e<0)throw $e("startIndex");if(typeof t!="number"||t<1)throw $e("length");if(i!==void 0&&typeof i!="string")throw $e("tooltip")}},RF=class{constructor(e){this.uri=e}},TF=class{constructor(e){this.terminalCommand=e}},Vv;(function(e){e[e.Panel=1]="Panel",e[e.Editor=2]="Editor"})(Vv||(Vv={}));var LF=class{constructor(e){if(this.options=e,typeof e!="object")throw $e("options")}},qv;(function(e){e[e.Always=1]="Always",e[e.Silent=2]="Silent",e[e.Never=3]="Never"})(qv||(qv={}));var Gv;(function(e){e[e.Shared=1]="Shared",e[e.Dedicated=2]="Dedicated",e[e.New=3]="New"})(Gv||(Gv={}));var Kl=class{static{rs=this}static{this.Clean=new rs("clean","Clean")}static{this.Build=new rs("build","Build")}static{this.Rebuild=new rs("rebuild","Rebuild")}static{this.Test=new rs("test","Test")}static from(t){switch(t){case"clean":return rs.Clean;case"build":return rs.Build;case"rebuild":return rs.Rebuild;case"test":return rs.Test;default:return}}constructor(t,i){if(this.label=i,typeof t!="string"||typeof i!="string")throw $e("name");this.c=t}get id(){return this.c}};Kl=rs=__decorate([ie],Kl);function cx(e){let t="";for(let i=0;i<e.length;i++)t+=e[i].replace(/,/g,",,")+",";return t}var qa=class{constructor(t,i,r){if(typeof t!="string")throw $e("process");this.e=[],this.c=t,i!==void 0&&(Array.isArray(i)?(this.e=i,this.f=r):this.f=i)}get process(){return this.c}set process(t){if(typeof t!="string")throw $e("process");this.c=t}get args(){return this.e}set args(t){Array.isArray(t)||(t=[]),this.e=t}get options(){return this.f}set options(t){this.f=t}computeId(){const t=[];if(t.push("process"),this.c!==void 0&&t.push(this.c),this.e&&this.e.length>0)for(const i of this.e)t.push(i);return cx(t)}};qa=__decorate([ie],qa);var Ao=class{constructor(t,i,r){if(this.f=[],Array.isArray(i)){if(!t)throw $e("command can't be undefined or null");if(typeof t!="string"&&typeof t.value!="string")throw $e("command");this.e=t,this.f=i,this.g=r}else{if(typeof t!="string")throw $e("commandLine");this.c=t,this.g=i}}get commandLine(){return this.c}set commandLine(t){if(typeof t!="string")throw $e("commandLine");this.c=t}get command(){return this.e?this.e:""}set command(t){if(typeof t!="string"&&typeof t.value!="string")throw $e("command");this.e=t}get args(){return this.f}set args(t){this.f=t||[]}get options(){return this.g}set options(t){this.g=t}computeId(){const t=[];if(t.push("shell"),this.c!==void 0&&t.push(this.c),this.e!==void 0&&t.push(typeof this.e=="string"?this.e:this.e.value),this.f&&this.f.length>0)for(const i of this.f)t.push(typeof i=="string"?i:i.value);return cx(t)}};Ao=__decorate([ie],Ao);var Jv;(function(e){e[e.Escape=1]="Escape",e[e.Strong=2]="Strong",e[e.Weak=3]="Weak"})(Jv||(Jv={}));var Dn;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace"})(Dn||(Dn={}));var Qv=class{constructor(e){this.c=e}computeId(){return"customExecution"+Ht()}set callback(e){this.c=e}get callback(){return this.c}},Ff=class{static{ss=this}static{this.c="customExecution"}static{this.e="process"}static{this.f="shell"}static{this.g="$empty"}constructor(t,i,r,s,n,o){this.k=!1,this.l=this.definition=t;let a;typeof i=="string"?(this.o=this.name=i,this.w=this.source=r,this.execution=s,a=n,this.k=!0):i===Dn.Global||i===Dn.Workspace?(this.target=i,this.o=this.name=r,this.w=this.source=s,this.execution=n,a=o):(this.target=i,this.o=this.name=r,this.w=this.source=s,this.execution=n,a=o),typeof a=="string"?(this.r=[a],this.t=!0):Array.isArray(a)?(this.r=a,this.t=!0):(this.r=[],this.t=!1),this.u=!1,this.y=Object.create(null),this.z=Object.create(null)}get _id(){return this.j}set _id(t){this.j=t}get _deprecated(){return this.k}B(){this.j!==void 0&&(this.j=void 0,this.m=void 0,this.C())}C(){this.q instanceof qa?this.l={type:ss.e,id:this.q.computeId()}:this.q instanceof Ao?this.l={type:ss.f,id:this.q.computeId()}:this.q instanceof Qv?this.l={type:ss.c,id:this.q.computeId()}:this.l={type:ss.g,id:Ht()}}get definition(){return this.l}set definition(t){if(t==null)throw $e("Kind can't be undefined or null");this.B(),this.l=t}get scope(){return this.m}set target(t){this.B(),this.m=t}get name(){return this.o}set name(t){if(typeof t!="string")throw $e("name");this.B(),this.o=t}get execution(){return this.q}set execution(t){t===null&&(t=void 0),this.B(),this.q=t;const i=this.l.type;(ss.g===i||ss.e===i||ss.f===i||ss.c===i)&&this.C()}get problemMatchers(){return this.r}set problemMatchers(t){if(Array.isArray(t))this.B(),this.r=t,this.t=!0;else{this.B(),this.r=[],this.t=!1;return}}get hasDefinedMatchers(){return this.t}get isBackground(){return this.u}set isBackground(t){t!==!0&&t!==!1&&(t=!1),this.B(),this.u=t}get source(){return this.w}set source(t){if(typeof t!="string"||t.length===0)throw $e("source must be a string of length > 0");this.B(),this.w=t}get group(){return this.x}set group(t){t===null&&(t=void 0),this.B(),this.x=t}get detail(){return this.A}set detail(t){t===null&&(t=void 0),this.A=t}get presentationOptions(){return this.y}set presentationOptions(t){t==null&&(t=Object.create(null)),this.B(),this.y=t}get runOptions(){return this.z}set runOptions(t){t==null&&(t=Object.create(null)),this.B(),this.z=t}};Ff=ss=__decorate([ie],Ff);var Ro;(function(e){e[e.SourceControl=1]="SourceControl",e[e.Window=10]="Window",e[e.Notification=15]="Notification"})(Ro||(Ro={}));var Yv;(function(e){function t(i){const r=i;return Xi(r.value)?r.tooltip&&!De(r.tooltip)?(console.log("INVALID view badge, invalid tooltip",r.tooltip),!1):!0:(console.log("INVALID view badge, invalid value",r.value),!1)}e.isViewBadge=t})(Yv||(Yv={}));var Mf=Av=class{static isTreeItem(t,i){const r=t;if(r.checkboxState!==void 0){const s=Xi(r.checkboxState)?r.checkboxState:St(r.checkboxState)&&Xi(r.checkboxState.state)?r.checkboxState.state:void 0,n=!Xi(r.checkboxState)&&St(r.checkboxState)?r.checkboxState.tooltip:void 0;if(s===void 0||s!==ns.Checked&&s!==ns.Unchecked||n!==void 0&&!De(n))return console.log("INVALID tree item, invalid checkboxState",r.checkboxState),!1}if(t instanceof Av)return!0;if(r.label!==void 0&&!De(r.label)&&!r.label?.label)return console.log("INVALID tree item, invalid label",r.label),!1;if(r.id!==void 0&&!De(r.id))return console.log("INVALID tree item, invalid id",r.id),!1;if(r.iconPath!==void 0&&!De(r.iconPath)&&!E.isUri(r.iconPath)&&(!r.iconPath||!De(r.iconPath.id))){const s=r.iconPath;if(!s||!De(s.light)&&!E.isUri(s.light)&&!De(s.dark)&&!E.isUri(s.dark))return console.log("INVALID tree item, invalid iconPath",r.iconPath),!1}return r.description!==void 0&&!De(r.description)&&typeof r.description!="boolean"?(console.log("INVALID tree item, invalid description",r.description),!1):r.resourceUri!==void 0&&!E.isUri(r.resourceUri)?(console.log("INVALID tree item, invalid resourceUri",r.resourceUri),!1):r.tooltip!==void 0&&!De(r.tooltip)&&!(r.tooltip instanceof Si)?(console.log("INVALID tree item, invalid tooltip",r.tooltip),!1):r.command!==void 0&&!r.command.command?(console.log("INVALID tree item, invalid command",r.command),!1):r.collapsibleState!==void 0&&r.collapsibleState<To.None&&r.collapsibleState>To.Expanded?(console.log("INVALID tree item, invalid collapsibleState",r.collapsibleState),!1):r.contextValue!==void 0&&!De(r.contextValue)?(console.log("INVALID tree item, invalid contextValue",r.contextValue),!1):r.accessibilityInformation!==void 0&&!r.accessibilityInformation?.label?(console.log("INVALID tree item, invalid accessibilityInformation",r.accessibilityInformation),!1):!0}constructor(t,i=To.None){this.collapsibleState=i,E.isUri(t)?this.resourceUri=t:this.label=t}};Mf=Av=__decorate([ie],Mf);var To;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(To||(To={}));var ns;(function(e){e[e.Unchecked=0]="Unchecked",e[e.Checked=1]="Checked"})(ns||(ns={}));var Uf=class{async asString(){return typeof this.value=="string"?this.value:JSON.stringify(this.value)}asFile(){}constructor(t){this.value=t}};Uf=__decorate([ie],Uf);var _f=class extends Uf{},NF=class extends _f{#e;constructor(e){super(""),this.#e=e}asFile(){return this.#e}},OF=class{constructor(e,t,i,r){this.name=e,this.uri=t,this._itemId=i,this.c=r}data(){return this.c()}},eu=class{#e=new Map;constructor(t){for(const[i,r]of t??[]){const s=this.#e.get(this.#t(i));s?s.push(r):this.#e.set(this.#t(i),[r])}}get(t){return this.#e.get(this.#t(t))?.[0]}set(t,i){this.#e.set(this.#t(t),[i])}forEach(t,i){for(const[r,s]of this.#e)for(const n of s)t.call(i,n,r,this)}*[Symbol.iterator](){for(const[t,i]of this.#e)for(const r of i)yield[t,r]}#t(t){return t.toLowerCase()}};eu=__decorate([ie],eu);var Xv=class{constructor(t,i,r){this.insertText=t,this.title=i,this.kind=r}};Xv=__decorate([ie],Xv);var Zv;(function(e){e[e.Automatic=0]="Automatic",e[e.PasteAs=1]="PasteAs"})(Zv||(Zv={}));var jf=class Sm{static{this.c="."}constructor(t){this.value=t}append(...t){return new Sm((this.value?[this.value,...t]:t).join(Sm.c))}intersects(t){return this.contains(t)||t.contains(this)}contains(t){return this.value===t.value||t.value.startsWith(this.value+Sm.c)}};jf.Empty=new jf("");var FF=class{constructor(e,t,i){this.title=t,this.insertText=e,this.kind=i}},di=class{constructor(t,i){this.id=t,this.color=i}static isThemeIcon(t){return typeof t.id!="string"?(console.log("INVALID ThemeIcon, invalid id",t.id),!1):!0}};di=__decorate([ie],di),di.File=new di("file"),di.Folder=new di("folder");var tu=class{constructor(t){this.id=t}};tu=__decorate([ie],tu);var Ga;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace",e[e.WorkspaceFolder=3]="WorkspaceFolder"})(Ga||(Ga={}));var Ja=class{get base(){return this.c}set base(t){this.c=t,this.e=E.file(t)}get baseUri(){return this.e}set baseUri(t){this.e=t,this.c=t.fsPath}constructor(t,i){if(typeof t!="string"&&(!t||!E.isUri(t)&&!E.isUri(t.uri)))throw $e("base");if(typeof i!="string")throw $e("pattern");typeof t=="string"?this.baseUri=E.file(t):E.isUri(t)?this.baseUri=t:this.baseUri=t.uri,this.pattern=i}toJSON(){return{pattern:this.pattern,base:this.base,baseUri:this.baseUri.toJSON()}}};Ja=__decorate([ie],Ja);var lx=new WeakMap;function MF(e,t){lx.set(e,t)}var Qa=class{constructor(t,i,r,s,n){this.enabled=typeof t=="boolean"?t:!0,typeof i=="string"&&(this.condition=i),typeof r=="string"&&(this.hitCondition=r),typeof s=="string"&&(this.logMessage=s),typeof n=="string"&&(this.mode=n)}get id(){return this.c||(this.c=lx.get(this)??Ht()),this.c}};Qa=__decorate([ie],Qa);var Lo=class extends Qa{constructor(t,i,r,s,n,o){if(super(i,r,s,n,o),t===null)throw $e("location");this.location=t}};Lo=__decorate([ie],Lo);var No=class extends Qa{constructor(t,i,r,s,n,o){super(i,r,s,n,o),this.functionName=t}};No=__decorate([ie],No);var Hf=class extends Qa{constructor(t,i,r,s,n,o,a,c){if(super(s,n,o,a,c),!i)throw $e("dataId");this.label=t,this.dataId=i,this.canPersist=r}};Hf=__decorate([ie],Hf);var Ya=class{constructor(t,i,r){this.command=t,this.args=i||[],this.options=r}};Ya=__decorate([ie],Ya);var Xa=class{constructor(t,i){this.port=t,this.host=i}};Xa=__decorate([ie],Xa);var iu=class{constructor(t){this.path=t}};iu=__decorate([ie],iu);var ru=class{constructor(t){this.implementation=t}};ru=__decorate([ie],ru);var ux=class{constructor(e,t,i){this.session=e,this.threadId=t,this.frameId=i}},hx=class{constructor(e,t){this.session=e,this.threadId=t}},Bf=class{constructor(t,i){this.range=t,this.expression=i}};Bf=__decorate([ie],Bf);var su;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(su||(su={}));var Wf=class{constructor(t,i){this.range=t,this.text=i}};Wf=__decorate([ie],Wf);var zf=class{constructor(t,i,r=!0){this.range=t,this.variableName=i,this.caseSensitiveLookup=r}};zf=__decorate([ie],zf);var Vf=class{constructor(t,i){this.range=t,this.expression=i}};Vf=__decorate([ie],Vf);var Kv=class{constructor(t,i){this.frameId=t,this.stoppedLocation=i}};Kv=__decorate([ie],Kv);var e0;(function(e){e[e.AIGenerated=1]="AIGenerated"})(e0||(e0={}));var nu;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(nu||(nu={}));var UF=class{constructor(e,t){this.newSymbolName=e,this.tags=t}},Za;(function(e){e[e.Changed=1]="Changed",e[e.Created=2]="Created",e[e.Deleted=3]="Deleted"})(Za||(Za={}));var Wt=Ri=class extends Error{static FileExists(t){return new Ri(t,se.FileExists,Ri.FileExists)}static FileNotFound(t){return new Ri(t,se.FileNotFound,Ri.FileNotFound)}static FileNotADirectory(t){return new Ri(t,se.FileNotADirectory,Ri.FileNotADirectory)}static FileIsADirectory(t){return new Ri(t,se.FileIsADirectory,Ri.FileIsADirectory)}static NoPermissions(t){return new Ri(t,se.NoPermissions,Ri.NoPermissions)}static Unavailable(t){return new Ri(t,se.Unavailable,Ri.Unavailable)}constructor(t,i=se.Unknown,r){super(E.isUri(t)?t.toString(!0):t),this.code=r?.name??"Unknown",u7(this,i),Object.setPrototypeOf(this,Ri.prototype),typeof Error.captureStackTrace=="function"&&typeof r=="function"&&Error.captureStackTrace(this,r)}};Wt=Ri=__decorate([ie],Wt);var t0=class{constructor(t,i,r){this.start=t,this.end=i,this.kind=r}};t0=__decorate([ie],t0);var Ns;(function(e){e[e.Comment=1]="Comment",e[e.Imports=2]="Imports",e[e.Region=3]="Region"})(Ns||(Ns={}));var ou;(function(e){e[e.Collapsed=0]="Collapsed",e[e.Expanded=1]="Expanded"})(ou||(ou={}));var i0;(function(e){e[e.Editing=0]="Editing",e[e.Preview=1]="Preview"})(i0||(i0={}));var r0;(function(e){e[e.Published=0]="Published",e[e.Draft=1]="Draft"})(r0||(r0={}));var au;(function(e){e[e.Unresolved=0]="Unresolved",e[e.Resolved=1]="Resolved"})(au||(au={}));var cu;(function(e){e[e.Current=0]="Current",e[e.Outdated=1]="Outdated"})(cu||(cu={}));var lu;(function(e){e[e.Reply=1]="Reply",e[e.Comment=2]="Comment"})(lu||(lu={}));var s0=class{constructor(e,t=[]){this.tokenTypes=e,this.tokenModifiers=t}};function _F(e){return typeof e>"u"||IA(e)}var jF=class RI{constructor(t){if(this.c=0,this.e=0,this.f=!0,this.g=[],this.j=0,this.k=new Map,this.l=new Map,this.m=!1,t){this.m=!0;for(let i=0,r=t.tokenTypes.length;i<r;i++)this.k.set(t.tokenTypes[i],i);for(let i=0,r=t.tokenModifiers.length;i<r;i++)this.l.set(t.tokenModifiers[i],i)}}push(t,i,r,s,n){if(typeof t=="number"&&typeof i=="number"&&typeof r=="number"&&typeof s=="number"&&(typeof n=="number"||typeof n>"u"))return typeof n>"u"&&(n=0),this.q(t,i,r,s,n);if(Se.isRange(t)&&typeof i=="string"&&_F(r))return this.o(t,i,r);throw $e()}o(t,i,r){if(!this.m)throw new Error("Legend must be provided in constructor");if(t.start.line!==t.end.line)throw new Error("`range` cannot span multiple lines");if(!this.k.has(i))throw new Error("`tokenType` is not in the provided legend");const s=t.start.line,n=t.start.character,o=t.end.character-t.start.character,a=this.k.get(i);let c=0;if(r)for(const l of r){if(!this.l.has(l))throw new Error("`tokenModifier` is not in the provided legend");const u=this.l.get(l);c|=1<<u>>>0}this.q(s,n,o,a,c)}q(t,i,r,s,n){if(this.f&&(t<this.c||t===this.c&&i<this.e)){this.f=!1;const c=this.g.length/5|0;let l=0,u=0;for(let h=0;h<c;h++){let d=this.g[5*h],f=this.g[5*h+1];d===0?(d=l,f+=u):d+=l,this.g[5*h]=d,this.g[5*h+1]=f,l=d,u=f}}let o=t,a=i;this.f&&this.j>0&&(o-=this.c,o===0&&(a-=this.e)),this.g[this.j++]=o,this.g[this.j++]=a,this.g[this.j++]=r,this.g[this.j++]=s,this.g[this.j++]=n,this.c=t,this.e=i}static r(t){const i=[],r=t.length/5|0;for(let a=0;a<r;a++)i[a]=a;i.sort((a,c)=>{const l=t[5*a],u=t[5*c];if(l===u){const h=t[5*a+1],d=t[5*c+1];return h-d}return l-u});const s=new Uint32Array(t.length);let n=0,o=0;for(let a=0;a<r;a++){const c=5*i[a],l=t[c+0],u=t[c+1],h=t[c+2],d=t[c+3],f=t[c+4],g=l-n,v=g===0?u-o:u,y=5*a;s[y+0]=g,s[y+1]=v,s[y+2]=h,s[y+3]=d,s[y+4]=f,n=l,o=u}return s}build(t){return this.f?new Ka(new Uint32Array(this.g),t):new Ka(RI.r(this.g),t)}},Ka=class{constructor(e,t){this.resultId=t,this.data=e}},dx=class{constructor(e,t,i){this.start=e,this.deleteCount=t,this.data=i}},qf=class{constructor(e,t){this.resultId=t,this.edits=e}},Gf;(function(e){e[e.Separate=0]="Separate",e[e.MergeWithParent=1]="MergeWithParent"})(Gf||(Gf={}));var HF=class{constructor(e){this.name=e}},n0;(function(e){e[e.Title=1]="Title",e[e.Inline=2]="Inline"})(n0||(n0={}));var uu=class{static{this.Back={iconPath:new di("arrow-left")}}constructor(){}};uu=__decorate([ie],uu);var hu;(function(e){e[e.Separator=-1]="Separator",e[e.Default=0]="Default"})(hu||(hu={}));var ec;(function(e){e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"})(ec||(ec={}));var Oo;(function(e){e[e.UI=1]="UI",e[e.Workspace=2]="Workspace"})(Oo||(Oo={}));var o0=class{static validate(e){if(typeof e.badge=="string"){let t=R5(e.badge,0);if(t<e.badge.length&&(t+=R5(e.badge,t)),e.badge.length>t)throw new Error("The 'badge'-property must be undefined or a short character")}else if(e.badge&&!di.isThemeIcon(e.badge))throw new Error("The 'badge'-property is not a valid ThemeIcon");if(!e.color&&!e.badge&&!e.tooltip)throw new Error("The decoration is empty");return!0}constructor(e,t,i){this.badge=e,this.tooltip=t,this.color=i}},Jf=class{constructor(t){this.kind=t}};Jf=__decorate([ie],Jf);var An;(function(e){e[e.Light=1]="Light",e[e.Dark=2]="Dark",e[e.HighContrast=3]="HighContrast",e[e.HighContrastLight=4]="HighContrastLight"})(An||(An={}));var Os=class y4{static isNotebookRange(t){return t instanceof y4?!0:t?typeof t.start=="number"&&typeof t.end=="number":!1}get start(){return this.c}get end(){return this.e}get isEmpty(){return this.c===this.e}constructor(t,i){if(t<0)throw $e("start must be positive");if(i<0)throw $e("end must be positive");t<=i?(this.c=t,this.e=i):(this.c=i,this.e=t)}with(t){let i=this.c,r=this.e;return t.start!==void 0&&(i=t.start),t.end!==void 0&&(r=t.end),i===this.c&&r===this.e?this:new y4(i,r)}},Qf=class E4{static validate(t){if(typeof t.kind!="number")throw new Error("NotebookCellData MUST have 'kind' property");if(typeof t.value!="string")throw new Error("NotebookCellData MUST have 'value' property");if(typeof t.languageId!="string")throw new Error("NotebookCellData MUST have 'languageId' property")}static isNotebookCellDataArray(t){return Array.isArray(t)&&t.every(i=>E4.isNotebookCellData(i))}static isNotebookCellData(t){return!0}constructor(t,i,r,s,n,o,a){this.kind=t,this.value=i,this.languageId=r,this.mime=s,this.outputs=n??[],this.metadata=o,this.executionSummary=a,E4.validate(this)}},fx=class{constructor(e){this.cells=e}},px=class Ks{static isNotebookCellOutputItem(t){return t instanceof Ks?!0:t?typeof t.mime=="string"&&t.data instanceof Uint8Array:!1}static error(t){const i={name:t.name,message:t.message,stack:t.stack};return Ks.json(i,"application/vnd.code.notebook.error")}static stdout(t){return Ks.text(t,"application/vnd.code.notebook.stdout")}static stderr(t){return Ks.text(t,"application/vnd.code.notebook.stderr")}static bytes(t,i="application/octet-stream"){return new Ks(t,i)}static#e=new TextEncoder;static text(t,i=Ds.text){const r=Ks.#e.encode(String(t));return new Ks(r,i)}static json(t,i="text/x-json"){const r=JSON.stringify(t,void 0,"	");return Ks.text(r,i)}constructor(t,i){this.data=t,this.mime=i;const r=M6(i,!0);if(!r)throw new Error(`INVALID mime type: ${i}. Must be in the format "type/subtype[;optionalparameter]"`);this.mime=r}},Yf=class S4{static isNotebookCellOutput(t){return t instanceof S4?!0:!t||typeof t!="object"?!1:typeof t.id=="string"&&Array.isArray(t.items)}static ensureUniqueMimeTypes(t,i=!1){const r=new Set,s=new Set;for(let n=0;n<t.length;n++){const o=t[n],a=M6(o.mime);if(!r.has(a)||I9(a)){r.add(a);continue}s.add(n),i&&console.warn(`DUPLICATED mime type '${o.mime}' will be dropped`)}return s.size===0?t:t.filter((n,o)=>!s.has(o))}constructor(t,i,r){this.items=S4.ensureUniqueMimeTypes(t,!0),typeof i=="string"?(this.id=i,this.metadata=r):(this.id=Ht(),this.metadata=i??r)}},Fo;(function(e){e[e.Markup=1]="Markup",e[e.Code=2]="Code"})(Fo||(Fo={}));var tc;(function(e){e[e.Idle=1]="Idle",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(tc||(tc={}));var Xf;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(Xf||(Xf={}));var Zf;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(Zf||(Zf={}));var BF=class{constructor(e,t){this.text=e,this.alignment=t}},a0;(function(e){e[e.Default=1]="Default",e[e.Preferred=2]="Preferred"})(a0||(a0={}));var Kf;(function(e){e[e.Default=1]="Default",e[e.Preferred=2]="Preferred",e[e.Hidden=-1]="Hidden"})(Kf||(Kf={}));var gx=class{constructor(e,t=[]){this.uri=e,this.provides=Er(t)}},WF=class{constructor(e){this.label=e}},du;(function(e){e[e.Named=1]="Named",e[e.Indexed=2]="Indexed"})(du||(du={}));var c0=class{constructor(t,i){this.label=t,this.timestamp=i}};c0=__decorate([ie],c0);var ic;(function(e){e[e.Production=1]="Production",e[e.Development=2]="Development",e[e.Test=3]="Test"})(ic||(ic={}));var ep;(function(e){e[e.Node=1]="Node",e[e.Webworker=2]="Webworker"})(ep||(ep={}));var Rn;(function(e){e[e.Other=0]="Other",e[e.Comment=1]="Comment",e[e.String=2]="String",e[e.RegEx=3]="RegEx"})(Rn||(Rn={}));var zF=class{constructor(e,t){this.ranges=e,this.wordPattern=t}},VF=class{constructor(e){this.c=e}get autoForwardAction(){return this.c}},l0;(function(e){e[e.Queued=1]="Queued",e[e.Running=2]="Running",e[e.Passed=3]="Passed",e[e.Failed=4]="Failed",e[e.Skipped=5]="Skipped",e[e.Errored=6]="Errored"})(l0||(l0={}));var rc;(function(e){e[e.Run=1]="Run",e[e.Debug=2]="Debug",e[e.Coverage=3]="Coverage"})(rc||(rc={}));var tp=class{constructor(t=void 0,i=void 0,r=void 0,s=!1,n=!0){this.include=t,this.exclude=i,this.profile=r,this.continuous=s,this.preserveFocus=n}};tp=__decorate([ie],tp);var ip=Rv=class{static diff(t,i,r){const s=new Rv(t);return s.expectedOutput=i,s.actualOutput=r,s}constructor(t){this.message=t}};ip=Rv=__decorate([ie],ip);var fu=class{constructor(t){this.id=t}};fu=__decorate([ie],fu);var qF=class{constructor(e,t,i){this.label=e,this.uri=t,this.position=i}},rp=class{constructor(e,t){this.covered=e,this.total=t,sp(this)}};function sp(e){if(e){if(e.covered>e.total)throw new Error(`The total number of covered items (${e.covered}) cannot be greater than the total (${e.total})`);if(e.total<0)throw new Error(`The number of covered items (${e.total}) cannot be negative`)}}var pu=class TI{static fromDetails(t,i){const r=new rp(0,0),s=new rp(0,0),n=new rp(0,0);for(const a of i)if("branches"in a){r.total+=1,r.covered+=a.executed?1:0;for(const c of a.branches)s.total+=1,s.covered+=c.executed?1:0}else n.total+=1,n.covered+=a.executed?1:0;const o=new TI(t,r,s.total>0?s:void 0,n.total>0?n:void 0);return o.detailedCoverage=i,o}constructor(t,i,r,s,n=[]){this.uri=t,this.statementCoverage=i,this.branchCoverage=r,this.declarationCoverage=s,this.fromTests=n}},mx=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,i=[]){this.executed=e,this.location=t,this.branches=i}},vx=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,i){this.executed=e,this.location=t,this.label=i}},wx=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,i){this.name=e,this.executed=t,this.location=i}},u0;(function(e){e[e.None=0]="None",e[e.Option=1]="Option",e[e.Default=2]="Default",e[e.Preferred=3]="Preferred"})(u0||(u0={}));var h0;(function(e){e[e.Untrusted=0]="Untrusted",e[e.Trusted=1]="Trusted",e[e.Unspecified=2]="Unspecified"})(h0||(h0={}));var d0;(function(e){e[e.Notify=1]="Notify",e[e.OpenBrowser=2]="OpenBrowser",e[e.OpenPreview=3]="OpenPreview",e[e.Silent=4]="Silent",e[e.Ignore=5]="Ignore",e[e.OpenBrowserOnce=6]="OpenBrowserOnce"})(d0||(d0={}));var f0=class{constructor(e,t,i,r,s,n){this.kind=e,this.name=t,this.detail=i,this.uri=r,this.range=s,this.selectionRange=n}},p0=class{constructor(e){this.uri=e}},np=class{constructor(e,t){this.original=e,this.modified=t}},bx=class{constructor(e,t,i,r){this.base=e,this.input1=t,this.input2=i,this.result=r}},g0=class{constructor(e,t){this.uri=e,this.viewType=t}},yx=class{constructor(e){this.viewType=e}},m0=class{constructor(e,t){this.uri=e,this.notebookType=t}},v0=class{constructor(e,t,i){this.original=e,this.modified=t,this.notebookType=i}},Ex=class{constructor(){}},Sx=class{constructor(e,t){this.uri=e,this.inputBoxUri=t}},xx=class{constructor(){}},kx=class{constructor(e){this.textDiffs=e}},w0;(function(e){e[e.Down=0]="Down",e[e.Up=1]="Up"})(w0||(w0={}));var b0;(function(e){e[e.Action=1]="Action",e[e.Toolbar=2]="Toolbar"})(b0||(b0={}));var Fs;(function(e){e[e.Short=1]="Short",e[e.Medium=2]="Medium",e[e.Full=3]="Full"})(Fs||(Fs={}));var GF=class{constructor(e,t,i){this.id=e,this.label=t,this.values=i}},gu;(function(e){e[e.Accepted=1]="Accepted",e[e.Rejected=2]="Rejected"})(gu||(gu={}));var Tn;(function(e){e[e.Unhelpful=0]="Unhelpful",e[e.Helpful=1]="Helpful",e[e.Undone=2]="Undone",e[e.Accepted=3]="Accepted",e[e.Bug=4]="Bug"})(Tn||(Tn={}));var mu;(function(e){e[e.Unhelpful=0]="Unhelpful",e[e.Helpful=1]="Helpful"})(mu||(mu={}));var op=class{constructor(e){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new Si(e):e}},vu=class{constructor(e,t){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new Si(e):e,this.vulnerabilities=t}},wu=class{constructor(e,t){this.participant=e,this.command=t}},ap=class{constructor(e,t,i,r){this.title=e,this.message=t,this.data=i,this.buttons=r}},cp=class{constructor(e,t){this.value=e,this.baseUri=t}},bu=class{constructor(e,t){this.value=e,this.value2=e,this.title=t}},yu=class{constructor(e){this.value=e}},lp=class{constructor(e,t){this.value=e,this.task=t}},Eu=class{constructor(e){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new Si(e):e}},up=class{constructor(e){this.value=e}},Ms=class{constructor(e,t,i){this.value=e,this.iconPath=t,this.options=i}},hp=class{constructor(e){this.value=e}},dp=class{constructor(e,t,i){this.value=e,this.license=t,this.snippet=i}},fp=class{constructor(e,t){this.uri=e,this.range=t}},Su=class{constructor(e,t){this.uri=e,this.edits=Array.isArray(t)?t:[t]}},$x=class{constructor(e,t,i,r,s){this.prompt=e,this.command=t,this.references=i,this.participant=r,this.toolReferences=s}},Cx=class{constructor(e,t,i,r){this.response=e,this.result=t,this.participant=i,this.command=r}},ir;(function(e){e[e.Panel=1]="Panel",e[e.Terminal=2]="Terminal",e[e.Notebook=3]="Notebook",e[e.Editor=4]="Editor",e[e.EditingSession=5]="EditingSession"})(ir||(ir={}));var y0;(function(e){e[e.Complete=1]="Complete",e[e.Partial=2]="Partial",e[e.Omitted=3]="Omitted"})(y0||(y0={}));var Ix=class{constructor(e,t,i){this.document=e,this.selection=t,this.wholeRange=i}},Px=class{constructor(e){this.cell=e}},Dx=class{constructor(e,t){this.mimeType=e,this.data=t}},dr;(function(e){e[e.User=1]="User",e[e.Assistant=2]="Assistant",e[e.System=3]="System"})(dr||(dr={}));var E0=class{constructor(e,t,i){this.callId=e,this.content=t,this.isError=i??!1}},Ax=class x4{static User(t,i){return new x4(dr.User,t,i)}static Assistant(t,i){return new x4(dr.Assistant,t,i)}set content(t){typeof t=="string"?this.c=[new xi(t)]:this.c=t}get content(){return this.c}set content2(t){t&&(this.content=t.map(i=>typeof i=="string"?new xi(i):i))}get content2(){return this.content.map(t=>t instanceof xi?t.value:t)}constructor(t,i,r){this.c=[],this.role=t,this.content=i,this.name=r}},xu=class{constructor(e,t,i){this.callId=e,this.name=t,this.input=i,this.parameters=i}},xi=class{constructor(e){this.value=e}toJSON(){return{$mid:21,value:this.value}}},sc=class{constructor(e){this.value=e}toJSON(){return{$mid:22,value:this.value}}},Us=class ta extends Error{static NotFound(t){return new ta(t,ta.NotFound.name)}static NoPermissions(t){return new ta(t,ta.NoPermissions.name)}static Blocked(t){return new ta(t,ta.Blocked.name)}constructor(t,i,r){super(t,{cause:r}),this.name="LanguageModelError",this.code=i??""}},S0=class{constructor(e){this.content=e}toJSON(){return{$mid:20,content:this.content}}},x0;(function(e){e[e.Auto=1]="Auto",e[e.Required=2]="Required"})(x0||(x0={}));var k0;(function(e){e[e.SymbolInformation=1]="SymbolInformation",e[e.CommandInformation=2]="CommandInformation",e[e.SearchInformation=3]="SearchInformation",e[e.SettingInformation=4]="SettingInformation"})(k0||(k0={}));var $0;(function(e){e[e.Started=1]="Started",e[e.Recognizing=2]="Recognizing",e[e.Recognized=3]="Recognized",e[e.Stopped=4]="Stopped",e[e.Error=5]="Error"})($0||($0={}));var C0;(function(e){e[e.Started=1]="Started",e[e.Stopped=2]="Stopped",e[e.Error=3]="Error"})(C0||(C0={}));var I0;(function(e){e[e.Recognized=1]="Recognized",e[e.Stopped=2]="Stopped"})(I0||(I0={}));var JF=class{constructor(e,t){this.text=e,this.range=t}},ku;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(ku||(ku={}));var P0;(function(e){e[e.AcceptAll=1]="AcceptAll",e[e.RejectAll=2]="RejectAll",e[e.AcceptSingle=3]="AcceptSingle",e[e.RejectSingle=4]="RejectSingle",e[e.StopRequest=5]="StopRequest",e[e.Retry=6]="Retry",e[e.HelpfulFeedback=7]="HelpfulFeedback",e[e.UnhelpfulFeedback=8]="UnhelpfulFeedback",e[e.CodeCopy=9]="CodeCopy",e[e.CodeInsertIntoNewFile=10]="CodeInsertIntoNewFile",e[e.CodeInsertAtCursor=11]="CodeInsertAtCursor",e[e.CloseChat=12]="CloseChat",e[e.ReportDiffCount=13]="ReportDiffCount",e[e.ShowResponse=14]="ShowResponse",e[e.OpenView=15]="OpenView",e[e.OpenInSideChatView=16]="OpenInSideChatView",e[e.SwitchDiffRange=17]="SwitchDiffRange",e[e.CodeRunInTerminal=18]="CodeRunInTerminal",e[e.Renew=19]="Renew"})(P0||(P0={}));var D0;(function(e){e[e.Retry=1]="Retry",e[e.StopRequest=2]="StopRequest",e[e.HelpfulFeedback=3]="HelpfulFeedback",e[e.UnhelpfulFeedback=4]="UnhelpfulFeedback",e[e.CodeCopy=5]="CodeCopy",e[e.CodeInsertIntoNewFile=6]="CodeInsertIntoNewFile",e[e.CodeInsertAtCursor=7]="CodeInsertAtCursor",e[e.CodeRunInTerminal=8]="CodeRunInTerminal",e[e.CodeAddToTerminal=9]="CodeAddToTerminal",e[e.ShowResponse=14]="ShowResponse",e[e.OpenView=15]="OpenView",e[e.NewChat=16]="NewChat",e[e.DeleteChat=17]="DeleteChat",e[e.DeleteHistory=18]="DeleteHistory",e[e.OpenInEditor=19]="OpenInEditor",e[e.CloseView=20]="CloseView",e[e.SettingSet=21]="SettingSet",e[e.RunCommandLabel=22]="RunCommandLabel",e[e.SettingView=23]="SettingView"})(D0||(D0={}));var A0;(function(e){e[e.Keybinding=1]="Keybinding",e[e.TopBar=2]="TopBar",e[e.TerminalAiFix=3]="TerminalAiFix",e[e.DebugConsoleAiFix=4]="DebugConsoleAiFix",e[e.HistoryList=5]="HistoryList",e[e.FirstOpenDevspace=6]="FirstOpenDevspace",e[e.QuickEditorSelectionTip=7]="QuickEditorSelectionTip",e[e.QuickEditorFunctionTip=8]="QuickEditorFunctionTip",e[e.EmptyEditorHint=9]="EmptyEditorHint"})(A0||(A0={}));var R0;(function(e){e[e.Keybinding=1]="Keybinding",e[e.ContextMenu=2]="ContextMenu",e[e.EditorSelectionTip=3]="EditorSelectionTip",e[e.EditorLintAiFix=4]="EditorLintAiFix",e[e.EditorLintAiFixAll=5]="EditorLintAiFixAll",e[e.ProblemsFixIcon=6]="ProblemsFixIcon",e[e.ProblemsContextMenu=7]="ProblemsContextMenu",e[e.QuickEditorSelectionTip=8]="QuickEditorSelectionTip",e[e.QuickEditorFunctionTip=9]="QuickEditorFunctionTip",e[e.EmptyEditorHint=10]="EmptyEditorHint"})(R0||(R0={}));var pp;(function(e){e[e.PRO=0]="PRO",e[e.LITE=1]="LITE",e[e.UX_SIMPLE=2]="UX_SIMPLE"})(pp||(pp={}));var T0;(function(e){e[e.Unknown=0]="Unknown",e[e.Class=1]="Class",e[e.Function=2]="Function",e[e.Workspace=4]="Workspace"})(T0||(T0={}));var L0;(function(e){e[e.Action=1]="Action",e[e.Toolbar=2]="Toolbar"})(L0||(L0={}));var N0;(function(e){e[e.Unhelpful=0]="Unhelpful",e[e.Helpful=1]="Helpful"})(N0||(N0={}));var O0;(function(e){e[e.System=0]="System",e[e.User=1]="User",e[e.Assistant=2]="Assistant",e[e.Function=3]="Function"})(O0||(O0={}));var QF=class{constructor(e,t){this.role=e,this.content=t}},Ti;(function(e){function t(r){const{selectionStartLineNumber:s,selectionStartColumn:n,positionLineNumber:o,positionColumn:a}=r,c=new Pe(s-1,n-1),l=new Pe(o-1,a-1);return new Ls(c,l)}e.to=t;function i(r){const{anchor:s,active:n}=r;return{selectionStartLineNumber:s.line+1,selectionStartColumn:s.character+1,positionLineNumber:n.line+1,positionColumn:n.character+1}}e.from=i})(Ti||(Ti={}));var O;(function(e){function t(r){if(!r)return;const{start:s,end:n}=r;return{startLineNumber:s.line+1,startColumn:s.character+1,endLineNumber:n.line+1,endColumn:n.character+1}}e.from=t;function i(r){if(!r)return;const{startLineNumber:s,startColumn:n,endLineNumber:o,endColumn:a}=r;return new Se(s-1,n-1,o-1,a-1)}e.to=i})(O||(O={}));var Ln;(function(e){function t(r){return{uri:r.uri,range:O.from(r.range)}}e.from=t;function i(r){return new tr(E.revive(r.uri),O.to(r.range))}e.to=i})(Ln||(Ln={}));var F0;(function(e){function t(i){switch(i){case 1:return Rn.Comment;case 0:return Rn.Other;case 3:return Rn.RegEx;case 2:return Rn.String}}e.to=t})(F0||(F0={}));var Fe;(function(e){function t(r){return new Pe(r.lineNumber-1,r.column-1)}e.to=t;function i(r){return{lineNumber:r.line+1,column:r.character+1}}e.from=i})(Fe||(Fe={}));var nc;(function(e){function t(s,n,o){return mt(Er(s).map(a=>i(a,n,o)))}e.from=t;function i(s,n,o){if(typeof s=="string")return{$serialized:!0,language:s,isBuiltin:o?.isBuiltin};if(s)return{$serialized:!0,language:s.language,scheme:r(s.scheme,n),pattern:Vi.from(s.pattern)??void 0,exclusive:s.exclusive,notebookType:s.notebookType,isBuiltin:o?.isBuiltin}}function r(s,n){return n&&typeof s=="string"?n.transformOutgoingScheme(s):s}})(nc||(nc={}));var gp;(function(e){function t(r){switch(r){case Io.Unnecessary:return 1;case Io.Deprecated:return 2}}e.from=t;function i(r){switch(r){case 1:return Io.Unnecessary;case 2:return Io.Deprecated;default:return}}e.to=i})(gp||(gp={}));var oc;(function(e){function t(r){let s;return r.code&&(De(r.code)||Xi(r.code)?s=String(r.code):s={value:String(r.code.value),target:r.code.target}),{...O.from(r.range),message:r.message,source:r.source,code:s,severity:vp.from(r.severity),relatedInformation:r.relatedInformation&&r.relatedInformation.map(mp.from),tags:Array.isArray(r.tags)?mt(r.tags.map(gp.from)):void 0,extensionID:r.extensionID}}e.from=t;function i(r){const s=new Ef(O.to(r),r.message,vp.to(r.severity),r.extensionID);return s.source=r.source,s.code=De(r.code)?r.code:r.code?.value,s.relatedInformation=r.relatedInformation&&r.relatedInformation.map(mp.to),s.tags=r.tags&&mt(r.tags.map(gp.to)),s}e.to=i})(oc||(oc={}));var mp;(function(e){function t(r){return{...O.from(r.location.range),message:r.message,resource:r.location.uri}}e.from=t;function i(r){return new Wl(new tr(r.resource,O.to(r)),r.message)}e.to=i})(mp||(mp={}));var vp;(function(e){function t(r){switch(r){case li.Error:return Pi.Error;case li.Warning:return Pi.Warning;case li.Information:return Pi.Info;case li.Hint:return Pi.Hint}return Pi.Error}e.from=t;function i(r){switch(r){case Pi.Info:return li.Information;case Pi.Warning:return li.Warning;case Pi.Error:return li.Error;case Pi.Hint:return li.Hint;default:return li.Error}}e.to=i})(vp||(vp={}));var zt;(function(e){function t(r){return typeof r=="number"&&r>=Xl.One?r-1:r===Xl.Beside?mF:gF}e.from=t;function i(r){if(typeof r=="number"&&r>=0)return r+1;throw new Error("invalid 'EditorGroupColumn'")}e.to=i})(zt||(zt={}));function YF(e){return typeof e.range<"u"}function Rx(e){return e.length===0?!0:!!YF(e[0])}var ke;(function(e){function t(a){return a.map(e.from)}e.fromMany=t;function i(a){return a&&typeof a=="object"&&typeof a.language=="string"&&typeof a.value=="string"}function r(a){let c;if(i(a)){const{language:h,value:d}=a;c={value:"```"+h+`
`+d+"\n```\n"}}else Si.isMarkdownString(a)?c={value:a.value,isTrusted:a.isTrusted,supportThemeIcons:a.supportThemeIcons,supportHtml:a.supportHtml,baseUri:a.baseUri}:typeof a=="string"?c={value:a}:c={value:""};const l=Object.create(null);c.uris=l;const u=({href:h})=>{try{let d=E.parse(h,!0);d=d.with({query:s(d.query,l)}),l[h]=d}catch{}return""};return at.walkTokens(at.lexer(c.value),h=>{h.type==="link"?u({href:h.href}):h.type==="image"&&typeof h.href=="string"&&u(UL(h.href))}),c}e.from=r;function s(a,c){if(!a)return a;let l;try{l=DE(a)}catch{}if(!l)return a;let u=!1;return l=ya(l,h=>{if(E.isUri(h)){const d=`__uri_${Math.random().toString(16).slice(2,8)}`;return c[d]=h,u=!0,d}else return}),u?JSON.stringify(l):a}function n(a){const c=new Si(a.value,a.supportThemeIcons);return c.isTrusted=a.isTrusted,c.supportHtml=a.supportHtml,c.baseUri=a.baseUri?E.from(a.baseUri):void 0,c}e.to=n;function o(a){if(a)return typeof a=="string"?a:e.from(a)}e.fromStrict=o})(ke||(ke={}));function XF(e){return Rx(e)?e.map(t=>({range:O.from(t.range),hoverMessage:Array.isArray(t.hoverMessage)?ke.fromMany(t.hoverMessage):t.hoverMessage?ke.from(t.hoverMessage):void 0,renderOptions:t.renderOptions})):e.map(t=>({range:O.from(t)}))}function wp(e){return typeof e>"u"?e:typeof e=="string"?E.file(e):e}var ac;(function(e){function t(i){return typeof i>"u"?i:{contentText:i.contentText,contentIconPath:i.contentIconPath?wp(i.contentIconPath):void 0,border:i.border,borderColor:i.borderColor,fontStyle:i.fontStyle,fontWeight:i.fontWeight,textDecoration:i.textDecoration,color:i.color,backgroundColor:i.backgroundColor,margin:i.margin,width:i.width,height:i.height,fontFamily:i.fontFamily}}e.from=t})(ac||(ac={}));var bp;(function(e){function t(i){return typeof i>"u"?i:{backgroundColor:i.backgroundColor,outline:i.outline,outlineColor:i.outlineColor,outlineStyle:i.outlineStyle,outlineWidth:i.outlineWidth,border:i.border,borderColor:i.borderColor,borderRadius:i.borderRadius,borderSpacing:i.borderSpacing,borderStyle:i.borderStyle,borderWidth:i.borderWidth,fontStyle:i.fontStyle,fontWeight:i.fontWeight,textDecoration:i.textDecoration,cursor:i.cursor,color:i.color,opacity:i.opacity,letterSpacing:i.letterSpacing,gutterIconPath:i.gutterIconPath?wp(i.gutterIconPath):void 0,gutterIconSize:i.gutterIconSize,overviewRulerColor:i.overviewRulerColor,before:i.before?ac.from(i.before):void 0,after:i.after?ac.from(i.after):void 0}}e.from=t})(bp||(bp={}));var M0;(function(e){function t(i){if(typeof i>"u")return i;switch(i){case Do.OpenOpen:return 0;case Do.ClosedClosed:return 1;case Do.OpenClosed:return 2;case Do.ClosedOpen:return 3}}e.from=t})(M0||(M0={}));var U0;(function(e){function t(i){return{isWholeLine:i.isWholeLine,rangeBehavior:i.rangeBehavior?M0.from(i.rangeBehavior):void 0,overviewRulerLane:i.overviewRulerLane,light:i.light?bp.from(i.light):void 0,dark:i.dark?bp.from(i.dark):void 0,backgroundColor:i.backgroundColor,outline:i.outline,outlineColor:i.outlineColor,outlineStyle:i.outlineStyle,outlineWidth:i.outlineWidth,border:i.border,borderColor:i.borderColor,borderRadius:i.borderRadius,borderSpacing:i.borderSpacing,borderStyle:i.borderStyle,borderWidth:i.borderWidth,fontStyle:i.fontStyle,fontWeight:i.fontWeight,textDecoration:i.textDecoration,cursor:i.cursor,color:i.color,opacity:i.opacity,letterSpacing:i.letterSpacing,gutterIconPath:i.gutterIconPath?wp(i.gutterIconPath):void 0,gutterIconSize:i.gutterIconSize,overviewRulerColor:i.overviewRulerColor,before:i.before?ac.from(i.before):void 0,after:i.after?ac.from(i.after):void 0}}e.from=t})(U0||(U0={}));var It;(function(e){function t(r){return{text:r.newText,eol:r.newEol&&hc.from(r.newEol),range:O.from(r.range)}}e.from=t;function i(r){const s=new Cn(O.to(r.range),r.text);return s.newEol=typeof r.eol>"u"?void 0:hc.to(r.eol),s}e.to=i})(It||(It={}));var fi;(function(e){function t(r,s){const n={edits:[]};if(r instanceof In){const o=new V4;for(const a of r._allEntries())a._type===1&&E.isUri(a.to)&&a.from===void 0&&o.add(a.to);for(const a of r._allEntries())if(a._type===1){let c;a.options?.contents&&(ArrayBuffer.isView(a.options.contents)?c={type:"base64",value:dd(J.wrap(a.options.contents))}:c={type:"dataTransferItem",id:a.options.contents._itemId}),n.edits.push({oldResource:a.from,newResource:a.to,options:{...a.options,contents:c},metadata:a.metadata})}else a._type===2?n.edits.push({resource:a.uri,textEdit:It.from(a.edit),versionId:o.has(a.uri)?void 0:s?.getTextDocumentVersion(a.uri),metadata:a.metadata}):a._type===6?n.edits.push({resource:a.uri,textEdit:{range:O.from(a.range),text:a.edit.value,insertAsSnippet:!0},versionId:o.has(a.uri)?void 0:s?.getTextDocumentVersion(a.uri),metadata:a.metadata}):a._type===3?n.edits.push({metadata:a.metadata,resource:a.uri,cellEdit:a.edit,notebookVersionId:s?.getNotebookDocumentVersion(a.uri)}):a._type===5&&n.edits.push({metadata:a.metadata,resource:a.uri,notebookVersionId:s?.getNotebookDocumentVersion(a.uri),cellEdit:{editType:1,index:a.index,count:a.count,cells:a.cells.map(Ru.from)}})}return n}e.from=t;function i(r){const s=new In,n=new Gt;for(const o of r.edits)if(o.textEdit){const a=o,c=E.revive(a.resource),l=O.to(a.textEdit.range),u=a.textEdit.text,h=a.textEdit.insertAsSnippet;let d;h?d=Lv.replace(l,new Co(u)):d=Cn.replace(l,u);const f=n.get(c);f?f.push(d):n.set(c,[d])}else s.renameFile(E.revive(o.oldResource),E.revive(o.newResource),o.options);for(const[o,a]of n)s.set(o,a);return s}e.to=i})(fi||(fi={}));var fr;(function(e){const t=Object.create(null);t[nt.File]=0,t[nt.Module]=1,t[nt.Namespace]=2,t[nt.Package]=3,t[nt.Class]=4,t[nt.Method]=5,t[nt.Property]=6,t[nt.Field]=7,t[nt.Constructor]=8,t[nt.Enum]=9,t[nt.Interface]=10,t[nt.Function]=11,t[nt.Variable]=12,t[nt.Constant]=13,t[nt.String]=14,t[nt.Number]=15,t[nt.Boolean]=16,t[nt.Array]=17,t[nt.Object]=18,t[nt.Key]=19,t[nt.Null]=20,t[nt.EnumMember]=21,t[nt.Struct]=22,t[nt.Event]=23,t[nt.Operator]=24,t[nt.TypeParameter]=25;function i(s){return typeof t[s]=="number"?t[s]:6}e.from=i;function r(s){for(const n in t)if(t[n]===s)return Number(n);return nt.Property}e.to=r})(fr||(fr={}));var _s;(function(e){function t(r){switch(r){case Vl.Deprecated:return 1}}e.from=t;function i(r){switch(r){case 1:return Vl.Deprecated}}e.to=i})(_s||(_s={}));var Mo;(function(e){function t(r){return{name:r.name,kind:fr.from(r.kind),tags:r.tags&&r.tags.map(_s.from),containerName:r.containerName,location:Li.from(r.location)}}e.from=t;function i(r){const s=new ql(r.name,fr.to(r.kind),r.containerName,Li.to(r.location));return s.tags=r.tags&&r.tags.map(_s.to),s}e.to=i})(Mo||(Mo={}));var _0;(function(e){function t(r){const s={name:r.name||"!!MISSING: name!!",detail:r.detail,range:O.from(r.range),selectionRange:O.from(r.selectionRange),kind:fr.from(r.kind),tags:r.tags?.map(_s.from)??[]};return r.children&&(s.children=r.children.map(t)),s}e.from=t;function i(r){const s=new Gl(r.name,r.detail,fr.to(r.kind),O.to(r.range),O.to(r.selectionRange));return Yc(r.tags)&&(s.tags=r.tags.map(_s.to)),r.children&&(s.children=r.children.map(i)),s}e.to=i})(_0||(_0={}));var Uo;(function(e){function t(r){const s=new Ov(fr.to(r.kind),r.name,r.detail||"",E.revive(r.uri),O.to(r.range),O.to(r.selectionRange));return s._sessionId=r._sessionId,s._itemId=r._itemId,s}e.to=t;function i(r,s,n){if(s=s??r._sessionId,n=n??r._itemId,s===void 0||n===void 0)throw new Error("invalid item");return{_sessionId:s,_itemId:n,name:r.name,detail:r.detail,kind:fr.from(r.kind),uri:r.uri,range:O.from(r.range),selectionRange:O.from(r.selectionRange),tags:r.tags?.map(_s.from)}}e.from=i})(Uo||(Uo={}));var j0;(function(e){function t(i){return new nx(Uo.to(i.from),i.fromRanges.map(r=>O.to(r)))}e.to=t})(j0||(j0={}));var H0;(function(e){function t(i){return new ox(Uo.to(i.to),i.fromRanges.map(r=>O.to(r)))}e.to=t})(H0||(H0={}));var Li;(function(e){function t(r){return{range:r.range&&O.from(r.range),uri:r.uri}}e.from=t;function i(r){return new tr(E.revive(r.uri),O.to(r.range))}e.to=i})(Li||(Li={}));var $u;(function(e){function t(r){const s=r,n=r;return{originSelectionRange:s.originSelectionRange?O.from(s.originSelectionRange):void 0,uri:s.targetUri?s.targetUri:n.uri,range:O.from(s.targetRange?s.targetRange:n.range),targetSelectionRange:s.targetSelectionRange?O.from(s.targetSelectionRange):void 0}}e.from=t;function i(r){return{targetUri:E.revive(r.uri),targetRange:O.to(r.range),targetSelectionRange:r.targetSelectionRange?O.to(r.targetSelectionRange):void 0,originSelectionRange:r.originSelectionRange?O.to(r.originSelectionRange):void 0}}e.to=i})($u||($u={}));var Cu;(function(e){function t(r){return{range:O.from(r.range),contents:ke.fromMany(r.contents),canIncreaseVerbosity:r.canIncreaseVerbosity,canDecreaseVerbosity:r.canDecreaseVerbosity}}e.from=t;function i(r){const s=r.contents.map(ke.to),n=O.to(r.range),o=r.canIncreaseVerbosity,a=r.canDecreaseVerbosity;return new xf(s,n,o,a)}e.to=i})(Cu||(Cu={}));var B0;(function(e){function t(r){return{range:O.from(r.range),expression:r.expression}}e.from=t;function i(r){return new Bf(O.to(r.range),r.expression)}e.to=i})(B0||(B0={}));var yp;(function(e){function t(r){if(r instanceof Wf)return{type:"text",range:O.from(r.range),text:r.text};if(r instanceof zf)return{type:"variable",range:O.from(r.range),variableName:r.variableName,caseSensitiveLookup:r.caseSensitiveLookup};if(r instanceof Vf)return{type:"expression",range:O.from(r.range),expression:r.expression};throw new Error("Unknown 'InlineValue' type")}e.from=t;function i(r){switch(r.type){case"text":return{range:O.to(r.range),text:r.text};case"variable":return{range:O.to(r.range),variableName:r.variableName,caseSensitiveLookup:r.caseSensitiveLookup};case"expression":return{range:O.to(r.range),expression:r.expression}}}e.to=i})(yp||(yp={}));var Ep;(function(e){function t(r){return{frameId:r.frameId,stoppedLocation:O.from(r.stoppedLocation)}}e.from=t;function i(r){return new Kv(r.frameId,O.to(r.stoppedLocation))}e.to=i})(Ep||(Ep={}));var cc;(function(e){function t(r){return{range:O.from(r.range),kind:r.kind}}e.from=t;function i(r){return new kf(O.to(r.range),r.kind)}e.to=i})(cc||(cc={}));var W0;(function(e){function t(r){return{uri:r.uri,highlights:r.highlights.map(cc.from)}}e.from=t;function i(r){return new $f(E.revive(r.uri),r.highlights.map(cc.to))}e.to=i})(W0||(W0={}));var z0;(function(e){function t(i){switch(i){case 1:return ja.TriggerCharacter;case 2:return ja.TriggerForIncompleteCompletions;case 0:default:return ja.Invoke}}e.to=t})(z0||(z0={}));var V0;(function(e){function t(i){return{triggerKind:z0.to(i.triggerKind),triggerCharacter:i.triggerCharacter}}e.to=t})(V0||(V0={}));var Sp;(function(e){function t(r){switch(r){case Yl.Deprecated:return 1}}e.from=t;function i(r){switch(r){case 1:return Yl.Deprecated}}e.to=i})(Sp||(Sp={}));var Iu;(function(e){const t=new Map([[pe.Method,0],[pe.Function,1],[pe.Constructor,2],[pe.Field,3],[pe.Variable,4],[pe.Class,5],[pe.Interface,7],[pe.Struct,6],[pe.Module,8],[pe.Property,9],[pe.Unit,12],[pe.Value,13],[pe.Constant,14],[pe.Enum,15],[pe.EnumMember,16],[pe.Keyword,17],[pe.Snippet,27],[pe.Text,18],[pe.Color,19],[pe.File,20],[pe.Reference,21],[pe.Folder,23],[pe.Event,10],[pe.Operator,11],[pe.TypeParameter,24],[pe.Issue,26],[pe.User,25]]);function i(n){return t.get(n)??9}e.from=i;const r=new Map([[0,pe.Method],[1,pe.Function],[2,pe.Constructor],[3,pe.Field],[4,pe.Variable],[5,pe.Class],[7,pe.Interface],[6,pe.Struct],[8,pe.Module],[9,pe.Property],[12,pe.Unit],[13,pe.Value],[14,pe.Constant],[15,pe.Enum],[16,pe.EnumMember],[17,pe.Keyword],[27,pe.Snippet],[18,pe.Text],[19,pe.Color],[20,pe.File],[21,pe.Reference],[23,pe.Folder],[10,pe.Event],[11,pe.Operator],[24,pe.TypeParameter],[25,pe.User],[26,pe.Issue]]);function s(n){return r.get(n)??pe.Property}e.to=s})(Iu||(Iu={}));var q0;(function(e){function t(i,r){const s=new Af(i.label);return s.insertText=i.insertText,s.kind=Iu.to(i.kind),s.tags=i.tags?.map(Sp.to),s.detail=i.detail,s.documentation=po(i.documentation)?ke.to(i.documentation):i.documentation,s.sortText=i.sortText,s.filterText=i.filterText,s.preselect=i.preselect,s.commitCharacters=i.commitCharacters,et.isIRange(i.range)?s.range=O.to(i.range):typeof i.range=="object"&&(s.range={inserting:O.to(i.range.insert),replacing:O.to(i.range.replace)}),s.keepWhitespace=typeof i.insertTextRules>"u"?!1:!!(i.insertTextRules&1),typeof i.insertTextRules<"u"&&i.insertTextRules&4?s.insertText=new Co(i.insertText):(s.insertText=i.insertText,s.textEdit=s.range instanceof Se?new Cn(s.range,s.insertText):void 0),i.additionalTextEdits&&i.additionalTextEdits.length>0&&(s.additionalTextEdits=i.additionalTextEdits.map(n=>It.to(n))),s.command=r&&i.command?r.fromInternal(i.command):void 0,s}e.to=t})(q0||(q0={}));var xp;(function(e){function t(r){if(typeof r.label!="string"&&!Array.isArray(r.label))throw new TypeError("Invalid label");return{label:r.label,documentation:ke.fromStrict(r.documentation)}}e.from=t;function i(r){return{label:r.label,documentation:po(r.documentation)?ke.to(r.documentation):r.documentation}}e.to=i})(xp||(xp={}));var kp;(function(e){function t(r){return{label:r.label,documentation:ke.fromStrict(r.documentation),parameters:Array.isArray(r.parameters)?r.parameters.map(xp.from):[],activeParameter:r.activeParameter}}e.from=t;function i(r){return{label:r.label,documentation:po(r.documentation)?ke.to(r.documentation):r.documentation,parameters:Array.isArray(r.parameters)?r.parameters.map(xp.to):[],activeParameter:r.activeParameter}}e.to=i})(kp||(kp={}));var Pu;(function(e){function t(r){return{activeSignature:r.activeSignature,activeParameter:r.activeParameter,signatures:Array.isArray(r.signatures)?r.signatures.map(kp.from):[]}}e.from=t;function i(r){return{activeSignature:r.activeSignature,activeParameter:r.activeParameter,signatures:Array.isArray(r.signatures)?r.signatures.map(kp.to):[]}}e.to=i})(Pu||(Pu={}));var G0;(function(e){function t(i,r){const s=new Df(Fe.to(r.position),typeof r.label=="string"?r.label:r.label.map(J0.to.bind(void 0,i)),r.kind&&$p.to(r.kind));return s.textEdits=r.textEdits&&r.textEdits.map(It.to),s.tooltip=po(r.tooltip)?ke.to(r.tooltip):r.tooltip,s.paddingLeft=r.paddingLeft,s.paddingRight=r.paddingRight,s}e.to=t})(G0||(G0={}));var J0;(function(e){function t(i,r){const s=new Pf(r.label);return s.tooltip=po(r.tooltip)?ke.to(r.tooltip):r.tooltip,iv.is(r.command)&&(s.command=i.fromInternal(r.command)),r.location&&(s.location=Li.to(r.location)),s}e.to=t})(J0||(J0={}));var $p;(function(e){function t(r){return r}e.from=t;function i(r){return r}e.to=i})($p||($p={}));var _o;(function(e){function t(r){return{range:O.from(r.range),url:r.target,tooltip:r.tooltip}}e.from=t;function i(r){let s;if(r.url)try{s=typeof r.url=="string"?E.parse(r.url,!0):E.revive(r.url)}catch{}const n=new Tf(O.to(r.range),s);return n.tooltip=r.tooltip,n}e.to=i})(_o||(_o={}));var Cp;(function(e){function t(r){const s=new Nf(r.label);return r.textEdit&&(s.textEdit=It.to(r.textEdit)),r.additionalTextEdits&&(s.additionalTextEdits=r.additionalTextEdits.map(n=>It.to(n))),s}e.to=t;function i(r){return{label:r.label,textEdit:r.textEdit?It.from(r.textEdit):void 0,additionalTextEdits:r.additionalTextEdits?r.additionalTextEdits.map(s=>It.from(s)):void 0}}e.from=i})(Cp||(Cp={}));var lc;(function(e){function t(r){return new Va(r[0],r[1],r[2],r[3])}e.to=t;function i(r){return[r.red,r.green,r.blue,r.alpha]}e.from=i})(lc||(lc={}));var Q0;(function(e){function t(r){return{range:O.from(r.range)}}e.from=t;function i(r){return new Ql(O.to(r.range))}e.to=i})(Q0||(Q0={}));var Ip;(function(e){function t(i){switch(i){case 2:return Ba.AfterDelay;case 1:return Ba.Manual;case 3:case 4:return Ba.FocusOut}}e.to=t})(Ip||(Ip={}));var uc;(function(e){function t(r){switch(r){case Nr.Off:return 0;case Nr.Relative:return 2;case Nr.Interval:return 3;case Nr.On:default:return 1}}e.from=t;function i(r){switch(r){case 0:return Nr.Off;case 2:return Nr.Relative;case 3:return Nr.Interval;case 1:default:return Nr.On}}e.to=i})(uc||(uc={}));var hc;(function(e){function t(r){if(r===Lr.CRLF)return 1;if(r===Lr.LF)return 0}e.from=t;function i(r){if(r===1)return Lr.CRLF;if(r===0)return Lr.LF}e.to=i})(hc||(hc={}));var Y0;(function(e){function t(i){if(typeof i=="object")return i.viewId;switch(i){case Ro.SourceControl:return 3;case Ro.Window:return 10;case Ro.Notification:return 15}throw new Error("Unknown 'ProgressLocation'")}e.from=t})(Y0||(Y0={}));var Pp;(function(e){function t(r){const s={start:r.start+1,end:r.end+1};return r.kind&&(s.kind=Dp.from(r.kind)),s}e.from=t;function i(r){const s={start:r.start-1,end:r.end-1};return r.kind&&(s.kind=Dp.to(r.kind)),s}e.to=i})(Pp||(Pp={}));var Dp;(function(e){function t(r){if(r)switch(r){case Ns.Comment:return Ia.Comment;case Ns.Imports:return Ia.Imports;case Ns.Region:return Ia.Region}}e.from=t;function i(r){if(r)switch(r.value){case Ia.Comment.value:return Ns.Comment;case Ia.Imports.value:return Ns.Imports;case Ia.Region.value:return Ns.Region}}e.to=i})(Dp||(Dp={}));var Du;(function(e){function t(i){if(i)return{pinned:typeof i.preview=="boolean"?!i.preview:void 0,inactive:i.background,preserveFocus:i.preserveFocus,selection:typeof i.selection=="object"?O.from(i.selection):void 0,override:typeof i.override=="boolean"?RN.id:void 0}}e.from=t})(Du||(Du={}));var Vi;(function(e){function t(n){return n instanceof Ja?n.toJSON():typeof n=="string"?n:i(n)||r(n)?new Ja(n.baseUri??n.base,n.pattern).toJSON():n}e.from=t;function i(n){const o=n;return o?E.isUri(o.baseUri)&&typeof o.pattern=="string":!1}function r(n){const o=n;return o?typeof o.base=="string"&&typeof o.pattern=="string":!1}function s(n){return typeof n=="string"?n:new Ja(E.revive(n.baseUri),n.pattern)}e.to=s})(Vi||(Vi={}));var X0;(function(e){function t(i){if(i){if(Array.isArray(i))return i.map(t);if(typeof i=="string")return i;{const r=i;return{language:r.language,scheme:r.scheme,pattern:Vi.from(r.pattern)??void 0,exclusive:r.exclusive,notebookType:r.notebookType}}}else return}e.from=t})(X0||(X0={}));var Ap;(function(e){function t(r){return!!r&&typeof r=="object"&&"documents"in r&&Array.isArray(r.documents)&&r.documents.every(s=>Array.isArray(s)&&s.every(dc.is))}e.is=t;function i(r){return{documents:r.documents.map(s=>s.map(dc.from)),conversation:r.conversation?.map(s=>s.type==="request"?{type:"request",message:s.message}:{type:"response",message:s.message,result:s.result?Un.from(s.result):void 0,references:s.references?.map(dc.from)})}}e.from=i})(Ap||(Ap={}));var dc;(function(e){function t(s){return typeof s=="object"&&s!==null&&"uri"in s&&E.isUri(s.uri)&&"version"in s&&typeof s.version=="number"&&"ranges"in s&&Array.isArray(s.ranges)&&s.ranges.every(n=>n instanceof Se)}e.is=t;function i(s){return{uri:s.uri,version:s.version,ranges:s.ranges.map(n=>O.from(n))}}e.from=i;function r(s){return{uri:E.revive(s.uri),version:s.version,ranges:s.ranges.map(n=>O.to(n))}}e.to=r})(dc||(dc={}));var os;(function(e){function t(r){return{start:r.start,end:r.end}}e.from=t;function i(r){return new Os(r.start,r.end)}e.to=i})(os||(os={}));var fc;(function(e){function t(r){return{timing:typeof r.runStartTime=="number"&&typeof r.runEndTime=="number"?{startTime:r.runStartTime,endTime:r.runEndTime}:void 0,executionOrder:r.executionOrder,success:r.lastRunSuccess}}e.to=t;function i(r){return{lastRunSuccess:r.success,runStartTime:r.timing?.startTime,runEndTime:r.timing?.endTime,executionOrder:r.executionOrder}}e.from=i})(fc||(fc={}));var Z0;(function(e){function t(i){if(i===Ul.Unconfirmed)return tc.Pending;if(i===Ul.Pending)return;if(i===Ul.Executing)return tc.Executing;throw new Error(`Unknown state: ${i}`)}e.to=t})(Z0||(Z0={}));var Au;(function(e){function t(r){switch(r){case Fo.Markup:return Oa.Markup;case Fo.Code:default:return Oa.Code}}e.from=t;function i(r){switch(r){case Oa.Markup:return Fo.Markup;case Oa.Code:default:return Fo.Code}}e.to=i})(Au||(Au={}));var Nn;(function(e){function t(r){const s={metadata:r.metadata??Object.create(null),cells:[]};for(const n of r.cells)Qf.validate(n),s.cells.push(Ru.from(n));return s}e.from=t;function i(r){const s=new fx(r.cells.map(Ru.to));return H5(r.metadata)||(s.metadata=r.metadata),s}e.to=i})(Nn||(Nn={}));var Ru;(function(e){function t(r){return{cellKind:Au.from(r.kind),language:r.languageId,mime:r.mime,source:r.value,metadata:r.metadata,internalMetadata:fc.from(r.executionSummary??{}),outputs:r.outputs?r.outputs.map(On.from):[]}}e.from=t;function i(r){return new Qf(Au.to(r.cellKind),r.source,r.language,r.mime,r.outputs?r.outputs.map(On.to):void 0,r.metadata,r.internalMetadata?fc.to(r.internalMetadata):void 0)}e.to=i})(Ru||(Ru={}));var pc;(function(e){function t(r){return{mime:r.mime,valueBytes:J.wrap(r.data)}}e.from=t;function i(r){return new px(r.valueBytes.buffer,r.mime)}e.to=i})(pc||(pc={}));var On;(function(e){function t(r){return{outputId:r.id,items:r.items.map(pc.from),metadata:r.metadata}}e.from=t;function i(r){const s=r.items.map(pc.to);return new Yf(s,r.outputId,r.metadata)}e.to=i})(On||(On={}));var Rp;(function(e){function t(s){return r(s)?{include:Vi.from(s.include)??void 0,exclude:Vi.from(s.exclude)??void 0}:Vi.from(s)??void 0}e.from=t;function i(s){return r(s)?{include:Vi.to(s.include),exclude:Vi.to(s.exclude)}:Vi.to(s)}e.to=i;function r(s){const n=s;return n?!$t(n.include)&&!$t(n.exclude):!1}})(Rp||(Rp={}));var K0;(function(e){function t(i,r,s){const n=typeof i.command=="string"?{title:"",command:i.command}:i.command;return{alignment:i.alignment===Xf.Left?1:2,command:r.toInternal(n,s),text:i.text,tooltip:i.tooltip,accessibilityInformation:i.accessibilityInformation,priority:i.priority}}e.from=t})(K0||(K0={}));var ew;(function(e){function t(i,r,s){const n=typeof i.command=="string"?{title:"",command:i.command}:i.command;return{command:r.toInternal(n,s),label:i.label,description:i.description,detail:i.detail,documentation:i.documentation}}e.from=t})(ew||(ew={}));var tw;(function(e){function t(i){return{transientOutputs:i?.transientOutputs??!1,transientCellMetadata:i?.transientCellMetadata??{},transientDocumentMetadata:i?.transientDocumentMetadata??{},cellContentMetadata:i?.cellContentMetadata??{}}}e.from=t})(tw||(tw={}));var Tp;(function(e){function t(r){return{uri:r.uri,provides:r.provides}}e.from=t;function i(r){return new gx(E.revive(r.uri),r.provides)}e.to=i})(Tp||(Tp={}));var gc;(function(e){function t(r){return{message:ke.fromStrict(r.message)||"",type:0,expected:r.expectedOutput,actual:r.actualOutput,contextValue:r.contextValue,location:r.location&&{range:O.from(r.location.range),uri:r.location.uri},stackTrace:r.stackTrace?.map(s=>({label:s.label,position:s.position&&Fe.from(s.position),uri:s.uri&&E.revive(s.uri).toJSON()}))}}e.from=t;function i(r){const s=new ip(typeof r.message=="string"?r.message:ke.to(r.message));return s.actualOutput=r.actual,s.expectedOutput=r.expected,s.contextValue=r.contextValue,s.location=r.location?Li.to(r.location):void 0,s}e.to=i})(gc||(gc={}));var Or;(function(e){e.namespace=uf,e.denamespace=F9})(Or||(Or={}));var Fn;(function(e){function t(r){const s=vf(r).controllerId;return{extId:Ne.fromExtHostTestItem(r,s).toString(),label:r.label,uri:E.revive(r.uri),busy:r.busy,tags:r.tags.map(n=>Or.namespace(s,n.id)),range:et.lift(O.from(r.range)),description:r.description||null,sortText:r.sortText||null,error:r.error&&ke.fromStrict(r.error)||null}}e.from=t;function i(r){return{parent:void 0,error:void 0,id:Ne.fromString(r.extId).localId,label:r.label,uri:E.revive(r.uri),tags:(r.tags||[]).map(s=>{const{tagId:n}=Or.denamespace(s);return new fu(n)}),children:{add:()=>{},delete:()=>{},forEach:()=>{},*[Symbol.iterator](){},get:()=>{},replace:()=>{},size:0},range:O.to(r.range||void 0),canResolveChildren:!1,busy:r.busy,description:r.description||void 0,sortText:r.sortText||void 0}}e.toPlain=i})(Fn||(Fn={})),function(e){function t(r){return{id:r.id}}e.from=t;function i(r){return new fu(r.id)}e.to=i}(Or||(Or={}));var iw;(function(e){const t=(r,s)=>{const n=r.value;if(!n)return;const o={...Fn.toPlain(n.item),parent:s,taskStates:n.tasks.map(a=>({state:a.state,duration:a.duration,messages:a.messages.filter(c=>c.type===0).map(gc.to)})),children:[]};if(r.children)for(const a of r.children.values()){const c=t(a,o);c&&o.children.push(c)}return o};function i(r){const s=new bN;for(const a of r.items)s.insert(Ne.fromString(a.item.extId).path,a);const n=[s.nodes],o=[];for(;n.length;)for(const a of n.pop())a.value?o.push(a):a.children&&n.push(a.children.values());return{completedAt:r.completedAt,results:o.map(a=>t(a)).filter(oo)}}e.to=i})(iw||(iw={}));var Tu;(function(e){function t(a){return{covered:a.covered,total:a.total}}function i(a){return"line"in a?Fe.from(a):O.from(a)}function r(a){if(a)return"endLineNumber"in a?O.to(a):Fe.to(a)}function s(a){if(a.type===1){const c=[];if(a.branches)for(const l of a.branches)c.push({executed:l.count,location:r(l.location),label:l.label});return new mx(a.count,r(a.location),a.branches?.map(l=>new vx(l.count,r(l.location),l.label)))}else return new wx(a.name,a.count,r(a.location))}e.to=s;function n(a){if(typeof a.executed=="number"&&a.executed<0)throw new Error(`Invalid coverage count ${a.executed}`);return"branches"in a?{count:a.executed,location:i(a.location),type:1,branches:a.branches.length?a.branches.map(c=>({count:c.executed,location:c.location&&i(c.location),label:c.label})):void 0}:{type:0,name:a.name,count:a.executed,location:i(a.location)}}e.fromDetails=n;function o(a,c,l){return sp(l.statementCoverage),sp(l.branchCoverage),sp(l.declarationCoverage),{id:c,uri:l.uri,statement:t(l.statementCoverage),branch:l.branchCoverage&&t(l.branchCoverage),declaration:l.declarationCoverage&&t(l.declarationCoverage),testIds:l instanceof pu&&l.fromTests.length?l.fromTests.map(u=>Ne.fromExtHostTestItem(u,a).toString()):void 0}}e.fromFile=o})(Tu||(Tu={}));var rw;(function(e){function t(i){switch(i){case 1:return Jl.Invoke;case 2:return Jl.Automatic}}e.to=t})(rw||(rw={}));var jo;(function(e){function t(r){const s=new f0(fr.to(r.kind),r.name,r.detail||"",E.revive(r.uri),O.to(r.range),O.to(r.selectionRange));return s._sessionId=r._sessionId,s._itemId=r._itemId,s}e.to=t;function i(r,s,n){if(s=s??r._sessionId,n=n??r._itemId,s===void 0||n===void 0)throw new Error("invalid item");return{_sessionId:s,_itemId:n,kind:fr.from(r.kind),name:r.name,detail:r.detail??"",uri:r.uri,range:O.from(r.range),selectionRange:O.from(r.selectionRange),tags:r.tags?.map(_s.from)}}e.from=i})(jo||(jo={}));var Lp;(function(e){function t(i){if(i)return{value:i.value,tooltip:i.tooltip}}e.from=t})(Lp||(Lp={}));var Np;(function(e){function t(n,o,a){const c=o.fileData;return c?new NF(new OF(c.name,E.revive(c.uri),c.id,jh(()=>a(c.id)))):n===Ds.uriList&&o.uriListData?new _f(s(o.uriListData)):new _f(o.asString)}e.to=t;async function i(n,o){const a=await o.asString();if(n===Ds.uriList)return{asString:a,fileData:void 0,uriListData:r(a)};const c=o.asFile();return{asString:a,fileData:c?{name:c.name,uri:c.uri,id:c._itemId??c.id}:void 0}}e.from=i;function r(n){return U1.split(n).map(o=>{if(o.startsWith("#"))return o;try{return E.parse(o)}catch{}return o})}function s(n){return U1.create(n.map(o=>typeof o=="string"?o:E.revive(o)))}})(Np||(Np={}));var Mn;(function(e){function t(r,s){const n=r.items.map(([o,a])=>[o,Np.to(o,a,s)]);return new eu(n)}e.toDataTransfer=t;async function i(r){const s={items:[]},n=[];for(const[o,a]of r)n.push((async()=>{s.items.push([o,await Np.from(o,a)])})());return await Promise.all(n),s}e.from=i})(Mn||(Mn={}));var Lu;(function(e){function t(r,s){return{kind:"reply",agentId:r.participant??s?.agentId??"",subCommand:r.command??s?.command,message:r.prompt,title:r.label}}e.from=t;function i(r){return{prompt:r.message,label:r.title,participant:r.agentId,command:r.subCommand}}e.to=i})(Lu||(Lu={}));var Op;(function(e){function t(r){switch(r){case 0:return dr.System;case 1:return dr.User;case 2:return dr.Assistant}}e.to=t;function i(r){switch(r){case dr.System:return 0;case dr.User:return 1;case dr.Assistant:return 2}return 1}e.from=i})(Op||(Op={}));var mc;(function(e){function t(r){const s=r.content.map(a=>{if(a.type==="text")return new xi(a.value);if(a.type==="tool_result"){const c=a.value.map(l=>l.type==="text"?new xi(l.value):new sc(l.value));return new E0(a.toolCallId,c,a.isError)}else return new xu(a.toolCallId,a.name,a.parameters)}),n=Op.to(r.role);return new Ax(n,s,r.name)}e.to=t;function i(r){const s=Op.from(r.role),n=r.name;let o=r.content;typeof o=="string"&&(o=[new xi(o)]);const a=o.map(c=>{if(c instanceof E0)return{type:"tool_result",toolCallId:c.callId,value:mt(c.content.map(l=>l instanceof xi?{type:"text",value:l.value}:l instanceof sc?{type:"prompt_tsx",value:l.value}:void 0)),isError:c.isError};if(c instanceof xu)return{type:"tool_use",toolCallId:c.callId,name:c.name,parameters:c.input??c.parameters};if(c instanceof xi)return{type:"text",value:c.value};if(typeof c!="string")throw new Error("Unexpected chat message content type");return{type:"text",value:c}});return{role:s,name:n,content:a}}e.from=i})(mc||(mc={}));var Nu;(function(e){function t(r){return{kind:"markdownContent",content:ke.from(r.value)}}e.from=t;function i(r){return new op(ke.to(r.content))}e.to=i})(Nu||(Nu={}));var Fp;(function(e){function t(r){return{kind:"codeblockUri",uri:r.value}}e.from=t;function i(r){return new hp(E.revive(r.uri))}e.to=i})(Fp||(Fp={}));var Mp;(function(e){function t(r){return{kind:"markdownVuln",content:ke.from(r.value),vulnerabilities:r.vulnerabilities}}e.from=t;function i(r){return new vu(ke.to(r.content),r.vulnerabilities)}e.to=i})(Mp||(Mp={}));var Up;(function(e){function t(r){return{kind:"agentDetection",agentId:r.participant,command:r.command}}e.from=t;function i(r){return new wu(r.agentId,r.command)}e.to=i})(Up||(Up={}));var _p;(function(e){function t(i){return{kind:"confirmation",title:i.title,message:i.message,data:i.data,buttons:i.buttons}}e.from=t})(_p||(_p={}));var Ou;(function(e){function t(r){const{value:s,baseUri:n}=r;function o(a,c){return a.map(l=>{const u=E.joinPath(c,l.name);return{label:l.name,uri:u,children:l.children&&o(l.children,u)}})}return{kind:"treeData",treeData:{label:Jr(n),uri:n,children:o(s,n)}}}e.from=t;function i(r){const s=oi(r.treeData);function n(c){return c.map(l=>({name:l.label,children:l.children&&n(l.children)}))}const o=s.uri,a=s.children?n(s.children):[];return new cp(a,o)}e.to=i})(Ou||(Ou={}));var vc;(function(e){function t(r){const s=o=>E.isUri(o),n=o=>"name"in o;return{kind:"inlineReference",name:r.title,inlineReference:s(r.value)?r.value:n(r.value)?Mo.from(r.value):Ln.from(r.value)}}e.from=t;function i(r){const s=oi(r);return new bu(E.isUri(s.inlineReference)?s.inlineReference:"location"in s.inlineReference?Mo.to(s.inlineReference):Ln.to(s.inlineReference),r.name)}e.to=i})(vc||(vc={}));var Ho;(function(e){function t(r){return{kind:"progressMessage",content:ke.from(r.value)}}e.from=t;function i(r){return new yu(r.content.value)}e.to=i})(Ho||(Ho={}));var Fu;(function(e){function t(r){return{kind:"warning",content:ke.from(r.value)}}e.from=t;function i(r){return new Eu(r.content.value)}e.to=i})(Fu||(Fu={}));var sw;(function(e){function t(r){return{kind:"move",uri:r.uri,range:O.from(r.range)}}e.from=t;function i(r){return new fp(E.revive(r.uri),O.to(r.range))}e.to=i})(sw||(sw={}));var jp;(function(e){function t(i){return{kind:"progressTask",content:ke.from(i.value)}}e.from=t})(jp||(jp={}));var nw;(function(e){function t(i){return{kind:"progressTaskResult",content:typeof i=="string"?ke.from(i):void 0}}e.from=t})(nw||(nw={}));var Mu;(function(e){function t(r,s,n){return{kind:"command",command:s.toInternal(r.value,n)??{command:r.value.command,title:r.value.title}}}e.from=t;function i(r,s){return new up(s.fromInternal(r.command)??{command:r.command.id,title:r.command.title})}e.to=i})(Mu||(Mu={}));var Hp;(function(e){function t(r){return{kind:"textEdit",uri:r.uri,edits:r.edits.map(s=>It.from(s))}}e.from=t;function i(r){return new Su(E.revive(r.uri),r.edits.map(s=>It.to(s)))}e.to=i})(Hp||(Hp={}));var js;(function(e){function t(r){const s=ti.isThemeIcon(r.iconPath)?r.iconPath:E.isUri(r.iconPath)?{light:E.revive(r.iconPath)}:r.iconPath&&"light"in r.iconPath&&"dark"in r.iconPath&&E.isUri(r.iconPath.light)&&E.isUri(r.iconPath.dark)?{light:E.revive(r.iconPath.light),dark:E.revive(r.iconPath.dark)}:void 0;return typeof r.value=="object"&&"variableName"in r.value?{kind:"reference",reference:{variableName:r.value.variableName,value:E.isUri(r.value.value)||!r.value.value?r.value.value:Ln.from(r.value.value)},iconPath:s,options:r.options}:{kind:"reference",reference:E.isUri(r.value)||typeof r.value=="string"?r.value:Ln.from(r.value),iconPath:s,options:r.options}}e.from=t;function i(r){const s=oi(r),n=o=>E.isUri(o)?o:Ln.to(o);return new Ms(typeof s.reference=="string"?s.reference:"variableName"in s.reference?{variableName:s.reference.variableName,value:s.reference.value&&n(s.reference.value)}:n(s.reference))}e.to=i})(js||(js={}));var Bp;(function(e){function t(i){return{kind:"codeCitation",value:i.value,license:i.license,snippet:i.snippet}}e.from=t})(Bp||(Bp={}));var Wp;(function(e){function t(s,n,o){return s instanceof op?Nu.from(s):s instanceof bu?vc.from(s):s instanceof Ms?js.from(s):s instanceof yu?Ho.from(s):s instanceof cp?Ou.from(s):s instanceof up?Mu.from(s,n,o):s instanceof Su?Hp.from(s):s instanceof vu?Mp.from(s):s instanceof hp?Fp.from(s):s instanceof wu?Up.from(s):s instanceof Eu?Fu.from(s):s instanceof ap?_p.from(s):s instanceof dp?Bp.from(s):s instanceof fp?sw.from(s):{kind:"markdownContent",content:ke.from("")}}e.from=t;function i(s,n){switch(s.kind){case"reference":return js.to(s);case"markdownContent":case"inlineReference":case"progressMessage":case"treeData":case"command":return r(s,n)}}e.to=i;function r(s,n){switch(s.kind){case"markdownContent":return Nu.to(s);case"inlineReference":return vc.to(s);case"progressMessage":return;case"treeData":return Ou.to(s);case"command":return Mu.to(s,n)}}e.toContent=r})(Wp||(Wp={}));var zp;(function(e){function t(i,r,s){const n=i.variables.variables.filter(a=>a.isTool),o=i.variables.variables.filter(a=>!a.isTool);return{prompt:i.message,command:i.command,attempt:i.attempt??0,enableCommandDetection:i.enableCommandDetection??!0,isParticipantDetected:i.isParticipantDetected??!1,references:o.map(Vp.to),toolReferences:n.map(qp.to),location:Uu.to(i.location),acceptedConfirmationData:i.acceptedConfirmationData,rejectedConfirmationData:i.rejectedConfirmationData,location2:r,toolInvocationToken:Object.freeze({sessionId:i.sessionId}),model:s}}e.to=t})(zp||(zp={}));var Uu;(function(e){function t(r){switch(r){case ci.Notebook:return ir.Notebook;case ci.Terminal:return ir.Terminal;case ci.Panel:return ir.Panel;case ci.Editor:return ir.Editor;case ci.EditingSession:return ir.EditingSession}}e.to=t;function i(r){switch(r){case ir.Notebook:return ci.Notebook;case ir.Terminal:return ci.Terminal;case ir.Panel:return ci.Panel;case ir.Editor:return ci.Editor;case ir.EditingSession:return ci.EditingSession}}e.from=i})(Uu||(Uu={}));var Vp;(function(e){function t(i){const r=i.value;if(!r)throw new Error("Invalid value reference");return{id:i.id,name:i.name,range:i.range&&[i.range.start,i.range.endExclusive],value:q5(r)?E.revive(r):r&&typeof r=="object"&&"uri"in r&&"range"in r&&q5(r.uri)?Ln.to(oi(r)):i.isImage?new Dx(i.mimeType??"image/png",()=>Promise.resolve(new Uint8Array(Object.values(r)))):r,modelDescription:i.modelDescription}}e.to=t})(Vp||(Vp={}));var qp;(function(e){function t(i){if(i.value)throw new Error("Invalid tool reference");return{name:i.id,range:i.range&&[i.range.start,i.range.endExclusive]}}e.to=t})(qp||(qp={}));var ow;(function(e){function t(i,r,s){return{id:i.id,label:i.label,fullName:i.fullName,icon:i.icon?.id,value:i.values[0].value,insertText:i.insertText,detail:i.detail,documentation:i.documentation,command:r.toInternal(i.command,s)}}e.from=t})(ow||(ow={}));var Un;(function(e){function t(s){return{errorDetails:s.errorDetails,metadata:r(s.metadata),nextQuestion:s.nextQuestion}}e.to=t;function i(s){return{errorDetails:s.errorDetails,metadata:s.metadata,nextQuestion:s.nextQuestion}}e.from=i;function r(s){return ya(s,n=>{if(n.$mid===20)return new S0(ya(n.content,r));if(n.$mid===21)return new xi(n.value);if(n.$mid===22)return new sc(n.value)})}})(Un||(Un={}));var aw;(function(e){function t(i,r,s){if(r.action.kind==="vote")return;const n=Un.to(i);if(r.action.kind==="command"){const o=r.action.commandButton.command;return{action:{kind:"command",commandButton:{command:s.fromInternal(o)??{command:o.id,title:o.title}}},result:n}}else return r.action.kind==="followUp"?{action:{kind:"followUp",followup:Lu.to(r.action.followup)},result:n}:r.action.kind==="inlineChat"?{action:{kind:"editor",accepted:r.action.action==="accepted"},result:n}:r.action.kind==="chatEditingSessionAction"?{action:{kind:"chatEditingSessionAction",outcome:r.action.outcome==="accepted"?gu.Accepted:gu.Rejected,uri:E.revive(r.action.uri),hasRemainingEdits:r.action.hasRemainingEdits},result:n}:{action:r.action,result:n}}e.to=t})(aw||(aw={}));var Gp;(function(e){function t(i,r,s){return"terminalCommand"in i?{terminalCommand:i.terminalCommand,shouldExecute:i.shouldExecute}:"uri"in i?{uri:i.uri}:r.toInternal(i,s)}e.from=t})(Gp||(Gp={}));var cw;(function(e){function t(i){return{kind:lw.to(i.kind)}}e.to=t})(cw||(cw={}));var lw;(function(e){function t(i){switch(i){case 0:return Po.Word;case 1:return Po.Line;case 2:return Po.Suggest;default:return Po.Unknown}}e.to=t})(lw||(lw={}));var uw;(function(e){function t(i,r){return{id:r,label:i.label,description:i.description,canEdit:i.canEdit,collapsibleState:i.collapsibleState||0,contextValue:i.contextValue}}e.from=t})(uw||(uw={}));var hw;(function(e){function t(i){return{name:i.id,description:i.modelDescription,inputSchema:i.inputSchema,parametersSchema:i.inputSchema,tags:i.tags??[]}}e.to=t})(hw||(hw={}));var Jp;(function(e){function t(r){return new S0(r.content.map(s=>s.kind==="text"?new xi(s.value):new sc(s.value)))}e.to=t;function i(r){return{content:r.content.map(s=>{if(s instanceof xi)return{kind:"text",value:s.value};if(s instanceof sc)return{kind:"promptTsx",value:s.value};throw new Error("Unknown LanguageModelToolResult part type")})}}e.from=i})(Jp||(Jp={}));var _u;(function(e){function t(r){return{message:r.message,metadata:r.metadata,title:r.title,tooltip:r.tooltip}}e.to=t;function i(r){return{kind:"reply",message:r.message,metadata:r.metadata,title:r.title,tooltip:r.tooltip}}e.from=i})(_u||(_u={}));var dw;(function(e){function t(i){switch(i){case 1:return Tn.Helpful;case 0:return Tn.Unhelpful;case 2:return Tn.Undone;case 3:return Tn.Accepted;case 4:return Tn.Bug}}e.to=t})(dw||(dw={}));var fw;(function(e){function t(i){return typeof i=="string"?{title:i,message:i,kind:"reply"}:"commandId"in i?{kind:"command",title:i.title??"",commandId:i.commandId??"",when:i.when??"",args:i.args}:_u.from(i)}e.from=t})(fw||(fw={}));var Qp;(function(e){function t(i,r){return"placeholder"in r&&"resolvedContent"in r?{placeholder:r.placeholder}:"responseId"in r?{requestId:r.responseId}:"markdownContent"in r?{content:ke.from(r.markdownContent)}:"content"in r?typeof r.content=="string"?r:{content:ke.from(r.content)}:"documents"in r?{documents:r.documents.map(s=>({uri:s.uri,version:s.version,ranges:s.ranges.map(n=>O.from(n))}))}:"reference"in r?{reference:"uri"in r.reference&&"range"in r.reference?{uri:r.reference.uri,range:O.from(r.reference.range)}:r.reference,referenceType:r.referenceType}:"inlineReference"in r?{inlineReference:"uri"in r.inlineReference&&"range"in r.inlineReference?{uri:r.inlineReference.uri,range:O.from(r.inlineReference.range)}:r.inlineReference,title:r.title}:("agentName"in r||"status"in r,r)}e.from=t})(Qp||(Qp={}));var Yp;(function(e){function t(r){switch(r){case"short":return Fs.Short;case"medium":return Fs.Medium;case"full":default:return Fs.Full}}e.to=t;function i(r){switch(r){case Fs.Short:return"short";case Fs.Medium:return"medium";case Fs.Full:default:return"full"}}e.from=i})(Yp||(Yp={}));var Xp;(function(e){function t(s){const n={};for(const o of Object.keys(s))n[o]=s[o].map(e.to);return n}e.objectTo=t;function i(s){return{level:Yp.to(s.level),value:s.value,description:s.description}}e.to=i;function r(s){return{level:Yp.from(s.level),value:s.value.toString(),description:s.description}}e.from=r})(Xp||(Xp={}));var Tx=class k4{constructor(t,i){this.line=t,this.character=i}isBefore(t){return!1}isBeforeOrEqual(t){return!1}isAfter(t){return!1}isAfterOrEqual(t){return!1}isEqual(t){return!1}compareTo(t){return 0}translate(t,i){return new k4(0,0)}with(t){return new k4(0,0)}},Lx=class $4{constructor(t,i,r,s){this.isEmpty=!1,this.isSingleLine=!1,this.start=new Tx(t,i),this.end=new Tx(r,s)}contains(t){return!1}isEqual(t){return!1}intersection(t){}union(t){return new $4(0,0,0,0)}with(t){return new $4(0,0,0,0)}},Hs=class{constructor(e,t,i){this.uri=e,this.ranges=t,this.previewText=i}},Zp=class{constructor(e,t,i){this.uri=e,this.text=t,this.lineNumber=i}},pr;(function(e){e[e.None=1]="None",e[e.FilesExclude=2]="FilesExclude",e[e.SearchAndFilesExclude=3]="SearchAndFilesExclude"})(pr||(pr={}));var Kp;(function(e){e[e.Information=1]="Information",e[e.Warning=2]="Warning"})(Kp||(Kp={}));var eg=2e4,Nx="\u27EA ",Ox=" characters skipped \u27EB",ZF=(Nx.length+Ox.length+5)*2,DQ=V("searchService"),Fx;(function(e){e[e.file=0]="file",e[e.text=1]="text",e[e.aiText=2]="aiText",e.folder="folder"})(Fx||(Fx={}));var Mx;(function(e){e[e.File=1]="File",e[e.Text=2]="Text",e[e.aiText=3]="aiText",e[e.Folder=4]="Folder",e[e.FdFile=5]="FdFile",e[e.FdFileAndFolder=6]="FdFileAndFolder"})(Mx||(Mx={}));function pw(e){return!!e.rangeLocations&&!!e.previewText}var Ux;(function(e){e[e.Normal=0]="Normal",e[e.NewSearchStarted=1]="NewSearchStarted"})(Ux||(Ux={}));var _x=class{constructor(e,t,i,r){this.rangeLocations=[],this.webviewIndex=r;const s=Array.isArray(t)?t:[t];if(i&&i.matchLines===1&&KF(s)){e=$A(e,i.matchLines);let n="",o=0,a=0;const c=Math.floor(i.charsPerLine/5);for(const l of s){const u=Math.max(l.startColumn-c,0),h=l.startColumn+i.charsPerLine;if(u>a+c+ZF){const d=Nx+(u-a)+Ox;n+=d+e.slice(u,h),o+=u-(a+d.length)}else n+=e.slice(a,h);a=h,this.rangeLocations.push({source:l,preview:new eM(0,l.startColumn-o,l.endColumn-o)})}this.previewText=n}else{const n=Array.isArray(t)?t[0].startLineNumber:t.startLineNumber,o=Hh(t,a=>({preview:new gw(a.startLineNumber-n,a.startColumn,a.endLineNumber-n,a.endColumn),source:a}));this.rangeLocations=Array.isArray(o)?o:[o],this.previewText=e}}};function KF(e){const t=e[0].startLineNumber;for(const i of e)if(i.startLineNumber!==t||i.endLineNumber!==t)return!1;return!0}var gw=class{constructor(e,t,i,r){this.startLineNumber=e,this.startColumn=t,this.endLineNumber=i,this.endColumn=r}},eM=class extends gw{constructor(e,t,i){super(e,t,e,i)}},jx;(function(e){e.List="list",e.Tree="tree"})(jx||(jx={}));var Hx;(function(e){e.Default="default",e.FileNames="fileNames",e.Type="type",e.Modified="modified",e.CountDescending="countDescending",e.CountAscending="countAscending"})(Hx||(Hx={}));function tM(e,t=!0){const i=e&&e.files&&e.files.exclude,r=t&&e&&e.search&&e.search.exclude;if(!i&&!r)return;if(!i||!r)return i||r||void 0;let s=Object.create(null);return s=xs(s,ot(i)),s=xs(s,ot(r),!0),s}function Bx(e,t){return e.excludePattern&&Na(e.excludePattern,t)?!1:e.includePattern||e.usingSearchPaths?e.includePattern&&Na(e.includePattern,t)?!0:e.usingSearchPaths?!!e.folderQueries&&e.folderQueries.some(i=>{const r=i.folder.fsPath;if(dn(t,r)){const s=so(r,t);return!i.includePattern||!!Na(i.includePattern,s)}else return!1}):!1:!0}var _n;(function(e){e[e.unknownEncoding=1]="unknownEncoding",e[e.regexParseError=2]="regexParseError",e[e.globParseError=3]="globParseError",e[e.invalidLiteral=4]="invalidLiteral",e[e.rgProcessError=5]="rgProcessError",e[e.other=6]="other",e[e.canceled=7]="canceled"})(_n||(_n={}));var Bo=class extends Error{constructor(e,t){super(e),this.code=t}};function Wx(e){const t={message:e.message,code:e.code};return new Error(JSON.stringify(t))}function zx(e){return!!e.path}function ju(e,t,i=!0){const r=e.searchPath?e.searchPath:e.relativePath;return i?kA(r,t):Na(t,r)}function wc(e,t){const i={...e||{},...t||{}};return Object.keys(i).filter(r=>{const s=i[r];return typeof s=="boolean"&&s})}var Vx=class{constructor(e,t){this.c=null,this.a=t.excludePattern?.map(r=>({...e.excludePattern||{},...r.pattern||{}}))??[],this.a.length===0&&(this.a=[e.excludePattern||{}]),this.b=this.a.map(r=>Di(r));let i=e.includePattern;t.includePattern&&(i?i={...i,...t.includePattern}:i=t.includePattern),i&&(this.c=Di(i))}d(e,t,i){let r=null;for(const s of this.b){const n=s(e,t,i);if(typeof n=="string"){r=n;break}}return r}matchesExcludesSync(e,t,i){return!!(this.b&&this.d(e,t,i))}includedInQuerySync(e,t,i){return!(this.b&&this.d(e,t,i)||this.c&&!this.c(e,t,i))}includedInQuery(e,t,i){const r=()=>this.c?!!this.c(e,t,i):!0;return Promise.all(this.b.map(s=>{const n=s(e,t,i);return fn(n)?n.then(o=>o?!1:r()):r()})).then(s=>s.some(n=>!!n))}hasSiblingExcludeClauses(){return this.a.reduce((e,t)=>iM(t)||e,!1)}};function iM(e){for(const t in e)if(typeof e[t]!="boolean")return!0;return!1}function rM(e){if(!e)return;let t;return i=>(t||(t=(e()||Promise.resolve([])).then(r=>r?qx(r):{})),t.then(r=>!!r[i]))}function Hu(e){if(!e)return;let t;return i=>{if(!t){const r=e();t=r?qx(r):{}}return!!t[i]}}function qx(e){const t={};for(const i of e)t[i]=!0;return t}function Gx(e){return e.flatMap(t=>t.patterns.map(i=>t.baseUri?{baseUri:t.baseUri,pattern:i}:i))}var mw={matchLines:100,charsPerLine:1e4};function Bu(e,t,i){return new al(r=>vw(r,i)).isEqual(e,t)}function sM(e,t,i){return Bu(e.uri,t.uri,i)?0:no(e.uri.toString(),t.uri.toString())}function nM(e,t,i){return e.index!==t.index?e.index<t.index?-1:1:Bu(e.uri,t.uri,i)?no(e.name,t.name):no(e.uri.toString(),t.uri.toString())}function Jx(e,t,i,r){const s=e.slice(0).sort((o,a)=>i(o,a,r)),n=t.slice(0).sort((o,a)=>i(o,a,r));return oD(s,n,(o,a)=>i(o,a,r))}function vw(e,t){const i=t.getCapabilities(e.scheme);return!(i&&i&1024)}var ww=class C4 extends wL{static toExtHostWorkspace(t,i,r,s){if(!t)return{workspace:null,added:[],removed:[]};const{id:n,name:o,folders:a,configuration:c,transient:l,isUntitled:u}=t,h=[],d=i;i?a.forEach((y,S)=>{const x=E.revive(y.uri),P=C4.o(r||i,x,s);P?(P.name=y.name,P.index=y.index,h.push(P)):h.push({uri:x,name:y.name,index:S})}):h.push(...a.map(({uri:y,name:S,index:x})=>({uri:E.revive(y),name:S,index:x}))),h.sort((y,S)=>y.index<S.index?-1:1);const f=new C4(n,o,h,!!l,c?E.revive(c):null,!!u,y=>vw(y,s)),{added:g,removed:v}=Jx(d?d.workspaceFolders:[],f.workspaceFolders,sM,s);return{workspace:f,added:g,removed:v}}static o(t,i,r){for(let s=0;s<t.folders.length;s++){const n=t.workspaceFolders[s];if(Bu(n.uri,i,r))return n}}constructor(t,i,r,s,n,o,a){super(t,r.map(c=>new F1(c)),s,n,a),this.t=i,this.u=o,this.q=[],this.s=wn.forUris(a,()=>!0),r.forEach(c=>{this.q.push(c),this.s.set(c.uri,c)})}get name(){return this.t}get isUntitled(){return this.u}get workspaceFolders(){return this.q.slice(0)}getWorkspaceFolder(t,i){return i&&this.s.get(t)&&(t=od(t)),this.s.findSubstr(t)}resolveWorkspaceFolder(t){return this.s.get(t)}},bw=class{constructor(t,i,r,s,n){this.c=new I,this.onDidChangeWorkspace=this.c.event,this.g=new I,this.onDidGrantWorkspaceTrust=this.g.event,this.u=[],this.v=!1,this.w=new Map,this.B=0,this.C=new el,this.D=new Map,this.h=s,this.s=r,this.t=n,this.j=new fL,this.k=new ur,this.o=t.getProxy(q.MainThreadWorkspace),this.q=t.getProxy(q.MainThreadMessageService);const o=i.workspace;this.l=o?new ww(o.id,o.name,[],!!o.transient,o.configuration?E.revive(o.configuration):null,!!o.isUntitled,a=>vw(a,r)):void 0}$initializeWorkspace(t,i){this.v=i,this.$acceptWorkspaceData(t),this.k.open()}waitForInitializeCall(){return this.k.wait()}get workspace(){return this.x}get name(){return this.x?this.x.name:void 0}get workspaceFile(){if(this.x&&this.x.configuration)return this.x.isUntitled?E.from({scheme:z.untitled,path:Jr(od(this.x.configuration))}):this.x.configuration}get x(){return this.n||this.l}getWorkspaceId(){if(this.x)return this.x.id}getWorkspaceFolders(){if(this.x)return this.x.workspaceFolders.slice(0)}async getWorkspaceFolders2(){if(await this.k.wait(),!!this.x)return this.x.workspaceFolders.slice(0)}updateWorkspaceFolders(t,i,r,...s){const n=[];if(Array.isArray(s)&&s.forEach(u=>{E.isUri(u.uri)&&!n.some(h=>Bu(h.uri,u.uri,this.s))&&n.push({uri:u.uri,name:u.name||i1(u.uri)})}),this.n||[i,r].some(u=>typeof u!="number"||u<0)||r===0&&n.length===0)return!1;const o=this.x?this.x.workspaceFolders:[];if(i+r>o.length)return!1;const a=o.slice(0);a.splice(i,r,...n.map(u=>({uri:u.uri,name:u.name||i1(u.uri),index:void 0})));for(let u=0;u<a.length;u++){const h=a[u];if(a.some((d,f)=>f!==u&&Bu(h.uri,d.uri,this.s)))return!1}a.forEach((u,h)=>u.index=h);const{added:c,removed:l}=Jx(o,a,nM,this.s);if(c.length===0&&l.length===0)return!1;if(this.o){const u=t.displayName||t.name;this.o.$updateWorkspaceFolders(u,i,r,n).then(void 0,h=>{this.n=void 0;const d={source:{identifier:t.identifier,label:t.displayName||t.name}};this.q.$showMessage(gL.Error,p(3025,null,u,h.toString()),d,[])})}return this.y(a),!0}getWorkspaceFolder(t,i){if(this.x)return this.x.getWorkspaceFolder(t,i)}async getWorkspaceFolder2(t,i){if(await this.k.wait(),!!this.x)return this.x.getWorkspaceFolder(t,i)}async resolveWorkspaceFolder(t){if(await this.k.wait(),!!this.x)return this.x.resolveWorkspaceFolder(t)}getPath(){if(!this.x)return;const{folders:t}=this.x;if(t.length!==0)return t[0].uri.fsPath}getRelativePath(t,i){let r,s="";if(typeof t=="string"?(r=E.file(t),s=t):typeof t<"u"&&(r=t,s=t.fsPath),!r)return s;const n=this.getWorkspaceFolder(r,!0);if(!n)return s;typeof i>"u"&&this.x&&(i=this.x.folders.length>1);let o=rE(n.uri,r);return i&&n.name&&(o=`${n.name}/${o}`),o}y(t){this.x&&(this.n=ww.toExtHostWorkspace({id:this.x.id,name:this.x.name,configuration:this.x.configuration,folders:t,isUntitled:this.x.isUntitled},this.x,void 0,this.s).workspace||void 0)}$acceptWorkspaceData(t){const{workspace:i,added:r,removed:s}=ww.toExtHostWorkspace(t,this.l,this.n,this.s);this.l=i||void 0,this.n=void 0,this.c.fire(Object.freeze({added:r,removed:s}))}async getICubeRuntimeContext(){return await this.o.$getRuntimeContext()}findFiles(t,i,r,s,n=Ge.None){this.h.trace(`extHostWorkspace#findFiles: fileSearch, extension: ${s.value}, entryPoint: findFiles`);let o="",a=!0;return i===null?a=!1:i!==void 0&&(typeof i=="string"?o=i:o=i.pattern),this.z(t,void 0,{exclude:[o],maxResults:r,useExcludeSettings:a?pr.FilesExclude:pr.None,useIgnoreFiles:{local:!1}},n)}findFiles2(t,i={},r,s=Ge.None){this.h.trace(`extHostWorkspace#findFiles2: fileSearch, extension: ${r.value}, entryPoint: findFiles2`);const n=i.useDefaultExcludes??!0,o=i.useDefaultSearchExcludes??!0,a=n?o?pr.SearchAndFilesExclude:pr.FilesExclude:pr.None,c={exclude:i.exclude?[i.exclude]:void 0,useIgnoreFiles:{local:i.useIgnoreFiles,global:i.useGlobalIgnoreFiles,parent:i.useParentIgnoreFiles},useExcludeSettings:a,followSymlinks:i.followSymlinks,maxResults:i.maxResults};return this.z(void 0,t!==void 0?[t]:[],c,s)}findFiles2New(t,i={},r,s=Ge.None){return this.h.trace(`extHostWorkspace#findFiles2New: fileSearch, extension: ${r.value}, entryPoint: findFiles2New`),this.z(void 0,t,i,s)}async z(t,i,r,s=Ge.None){if(s&&s.isCancellationRequested)return Promise.resolve([]);const o=(t!==void 0?[t]:i)?.map(a=>{const c=Qx(r.exclude),l={ignoreSymlinks:typeof r.followSymlinks=="boolean"?!r.followSymlinks:void 0,disregardIgnoreFiles:typeof r.useIgnoreFiles?.local=="boolean"?!r.useIgnoreFiles.local:void 0,disregardGlobalIgnoreFiles:typeof r.useIgnoreFiles?.global=="boolean"?!r.useIgnoreFiles.global:void 0,disregardParentIgnoreFiles:typeof r.useIgnoreFiles?.parent=="boolean"?!r.useIgnoreFiles.parent:void 0,disregardExcludeSettings:r.useExcludeSettings!==void 0&&r.useExcludeSettings===pr.None,disregardSearchExcludeSettings:r.useExcludeSettings!==void 0&&r.useExcludeSettings!==pr.SearchAndFilesExclude,maxResults:r.maxResults,excludePattern:c.length>0?c:void 0,_reason:"startFileSearch",shouldGlobSearch:t?void 0:!0},u=tg(Vi.from(a)),h=u?.folder;return t?l.includePattern=u?.pattern:l.filePattern=u?.pattern,{folder:h,options:l}})??[];return this.A(o,s)}async A(t,i){return(await Promise.all(t?.map(s=>this.o.$startFileSearch(s.folder??null,s.options,i).then(n=>Array.isArray(n)?n.map(o=>E.revive(o)):[]))??[])).flat()}findTextInFilesNew(t,i,r,s=Ge.None){this.h.trace(`extHostWorkspace#findTextInFilesNew: textSearch, extension: ${r.value}, entryPoint: findTextInFilesNew`);const n=d=>{if(!i)return{folder:void 0,options:{}};const f=d?tg(Vi.from(d)):void 0,g=i.exclude?Qx(i.exclude):void 0;return{options:{ignoreSymlinks:typeof i.followSymlinks=="boolean"?!i.followSymlinks:void 0,disregardIgnoreFiles:typeof i.useIgnoreFiles=="boolean"?!i.useIgnoreFiles:void 0,disregardGlobalIgnoreFiles:typeof i.useIgnoreFiles?.global=="boolean"?!i.useIgnoreFiles?.global:void 0,disregardParentIgnoreFiles:typeof i.useIgnoreFiles?.parent=="boolean"?!i.useIgnoreFiles?.parent:void 0,disregardExcludeSettings:i.useExcludeSettings!==void 0&&i.useExcludeSettings===pr.None,disregardSearchExcludeSettings:i.useExcludeSettings!==void 0&&i.useExcludeSettings!==pr.SearchAndFilesExclude,fileEncoding:i.encoding,maxResults:i.maxResults,previewOptions:i.previewOptions?{matchLines:i.previewOptions?.numMatchLines??100,charsPerLine:i.previewOptions?.charsPerLine??1e4}:void 0,surroundingContext:i.surroundingContext,includePattern:f?.pattern,excludePattern:g},folder:f?.folder}},a=(i?.include?.map(d=>n(d))??[n(void 0)]).filter(d=>!!d),c=new ue,l=c.add(new I),u=this.findTextInFilesBase(t,a,(d,f)=>l.fire({result:d,uri:f}),s);return{results:new cl(async d=>{c.add(l.event(f=>{const g=f.result,v=f.uri;pw(g)?d.emitOne(new Hs(v,g.rangeLocations.map(y=>({previewRange:new Se(y.preview.startLineNumber,y.preview.startColumn,y.preview.endLineNumber,y.preview.endColumn),sourceRange:new Se(y.source.startLineNumber,y.source.startColumn,y.source.endLineNumber,y.source.endColumn)})),g.previewText)):d.emitOne(new Zp(v,g.text,g.lineNumber))})),await u}),complete:u.then(d=>(c.dispose(),{limitHit:d?.limitHit??!1}))}}async findTextInFilesBase(t,i,r,s=Ge.None){const n=this.j.getNext();let o=!1;if(s.onCancellationRequested(a=>{o=!0}),this.u[n]=a=>{if(o)return;const c=E.revive(a.resource);a.results.forEach(l=>{const u=oi(l);r(u,c)})},s.isCancellationRequested)return{};try{const a=await Promise.all(i?.map(c=>this.o.$startTextSearch(t,c.folder??null,c.options,n,s)||{})??[]);return delete this.u[n],a.reduce((c,l)=>({limitHit:c?.limitHit||(l?.limitHit??!1),message:[c?.message??[],l?.message??[]].flat()}),{})??{limitHit:!1}}catch(a){throw delete this.u[n],a}}async findTextInFiles(t,i,r,s,n=Ge.None){this.h.trace(`extHostWorkspace#findTextInFiles: textSearch, extension: ${s.value}, entryPoint: findTextInFiles`);const o=typeof i.previewOptions>"u"?{matchLines:100,charsPerLine:1e4}:i.previewOptions,a=tg(Vi.from(i.include)),c=typeof i.exclude=="string"?i.exclude:i.exclude?i.exclude.pattern:void 0,l={ignoreSymlinks:typeof i.followSymlinks=="boolean"?!i.followSymlinks:void 0,disregardIgnoreFiles:typeof i.useIgnoreFiles=="boolean"?!i.useIgnoreFiles:void 0,disregardGlobalIgnoreFiles:typeof i.useGlobalIgnoreFiles=="boolean"?!i.useGlobalIgnoreFiles:void 0,disregardParentIgnoreFiles:typeof i.useParentIgnoreFiles=="boolean"?!i.useParentIgnoreFiles:void 0,disregardExcludeSettings:typeof i.useDefaultExcludes=="boolean"?!i.useDefaultExcludes:!0,disregardSearchExcludeSettings:typeof i.useSearchExclude=="boolean"?!i.useSearchExclude:!0,fileEncoding:i.encoding,maxResults:i.maxResults,previewOptions:o,surroundingContext:i.afterContext,includePattern:a?.pattern,excludePattern:c?[{pattern:c}]:void 0},u=(h,d)=>{pw(h)?r({uri:d,preview:{text:h.previewText,matches:Hh(h.rangeLocations,f=>new Se(f.preview.startLineNumber,f.preview.startColumn,f.preview.endLineNumber,f.preview.endColumn))},ranges:Hh(h.rangeLocations,f=>new Se(f.source.startLineNumber,f.source.startColumn,f.source.endLineNumber,f.source.endColumn))}):r({uri:d,text:h.text,lineNumber:h.lineNumber})};return this.findTextInFilesBase(t,[{options:l,folder:a?.folder}],u,n)}$handleTextSearchResult(t,i){this.u[i]?.(t)}async save(t){const i=await this.o.$save(t,{saveAs:!1});return E.revive(i)}async saveAs(t){const i=await this.o.$save(t,{saveAs:!0});return E.revive(i)}saveAll(t){return this.o.$saveAll(t)}resolveProxy(t){return this.o.$resolveProxy(t)}lookupAuthorization(t){return this.o.$lookupAuthorization(t)}lookupKerberosAuthorization(t){return this.o.$lookupKerberosAuthorization(t)}loadCertificates(){return this.o.$loadCertificates()}get trusted(){return this.v}requestWorkspaceTrust(t){return this.o.$requestWorkspaceTrust(t)}$onDidGrantWorkspaceTrust(){this.v||(this.v=!0,this.g.fire())}registerEditSessionIdentityProvider(t,i){if(this.w.has(t))throw new Error(`A provider has already been registered for scheme ${t}`);this.w.set(t,i);const r=this.t.transformOutgoingScheme(t),s=this.B++;return this.o.$registerEditSessionIdentityProvider(s,r),ee(()=>{this.w.delete(t),this.o.$unregisterEditSessionIdentityProvider(s)})}async $getEditSessionIdentifier(t,i){this.h.info("Getting edit session identifier for workspaceFolder",t);const r=await this.resolveWorkspaceFolder(E.revive(t));if(!r){this.h.warn("Unable to resolve workspace folder");return}this.h.info("Invoking #provideEditSessionIdentity for workspaceFolder",r);const s=this.w.get(r.uri.scheme);if(this.h.info(`Provider for scheme ${r.uri.scheme} is defined: `,!!s),!s)return;const n=await s.provideEditSessionIdentity(r,i);if(this.h.info("Provider returned edit session identifier: ",n),!!n)return n}async $provideEditSessionIdentityMatch(t,i,r,s){this.h.info("Getting edit session identifier for workspaceFolder",t);const n=await this.resolveWorkspaceFolder(E.revive(t));if(!n){this.h.warn("Unable to resolve workspace folder");return}this.h.info("Invoking #provideEditSessionIdentity for workspaceFolder",n);const o=this.w.get(n.uri.scheme);if(this.h.info(`Provider for scheme ${n.uri.scheme} is defined: `,!!o),!o)return;const a=await o.provideEditSessionIdentityMatch?.(i,r,s);if(this.h.info("Provider returned edit session identifier match result: ",a),!!a)return a}getOnWillCreateEditSessionIdentityEvent(t){return(i,r,s)=>{const n=function(a){i.call(r,a)};return n.extension=t,this.C.event(n,void 0,s)}}async $onWillCreateEditSessionIdentity(t,i,r){const s=await this.resolveWorkspaceFolder(E.revive(t));if(s===void 0)throw new Error("Unable to resolve workspace folder");await this.C.fireAsync({workspaceFolder:s},i,async(n,o)=>{const a=Date.now();await Promise.resolve(n),Date.now()-a>r&&this.h.warn("SLOW edit session create-participant",o.extension.identifier)}),i.isCancellationRequested}registerCanonicalUriProvider(t,i){if(this.D.has(t))throw new Error(`A provider has already been registered for scheme ${t}`);this.D.set(t,i);const r=this.t.transformOutgoingScheme(t),s=this.B++;return this.o.$registerCanonicalUriProvider(s,r),ee(()=>{this.D.delete(t),this.o.$unregisterCanonicalUriProvider(s)})}async provideCanonicalUri(t,i,r){const s=this.D.get(t.scheme);if(!s)return;const n=await s.provideCanonicalUri?.(E.revive(t),i,r);if(n)return n}async $provideCanonicalUri(t,i,r){return this.provideCanonicalUri(E.revive(t),{targetScheme:i},r)}};bw=__decorate([__param(0,Ie),__param(1,Qt),__param(2,$a),__param(3,Ce),__param(4,bl)],bw);var Fr=V("IExtHostWorkspace");function tg(e){let t,i;if(e)return typeof e=="string"?t=e:(t=e.pattern,i=E.revive(e.baseUri)),{pattern:t,folder:i}}function Qx(e){return(e?.map(t=>{if(typeof t=="string")return t===""?void 0:{pattern:t,uri:void 0};{const i=tg(t);return i?{pattern:i.pattern,uri:i.folder}:void 0}})??[]).filter(t=>!!t)}var Yx;(function(e){e[e.None=0]="None",e[e.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=2]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",e[e.InvalidUnicode=4]="InvalidUnicode",e[e.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",e[e.InvalidCharacter=6]="InvalidCharacter"})(Yx||(Yx={}));var Xx;(function(e){e[e.OpenBraceToken=1]="OpenBraceToken",e[e.CloseBraceToken=2]="CloseBraceToken",e[e.OpenBracketToken=3]="OpenBracketToken",e[e.CloseBracketToken=4]="CloseBracketToken",e[e.CommaToken=5]="CommaToken",e[e.ColonToken=6]="ColonToken",e[e.NullKeyword=7]="NullKeyword",e[e.TrueKeyword=8]="TrueKeyword",e[e.FalseKeyword=9]="FalseKeyword",e[e.StringLiteral=10]="StringLiteral",e[e.NumericLiteral=11]="NumericLiteral",e[e.LineCommentTrivia=12]="LineCommentTrivia",e[e.BlockCommentTrivia=13]="BlockCommentTrivia",e[e.LineBreakTrivia=14]="LineBreakTrivia",e[e.Trivia=15]="Trivia",e[e.Unknown=16]="Unknown",e[e.EOF=17]="EOF"})(Xx||(Xx={}));var Zx;(function(e){e[e.InvalidSymbol=1]="InvalidSymbol",e[e.InvalidNumberFormat=2]="InvalidNumberFormat",e[e.PropertyNameExpected=3]="PropertyNameExpected",e[e.ValueExpected=4]="ValueExpected",e[e.ColonExpected=5]="ColonExpected",e[e.CommaExpected=6]="CommaExpected",e[e.CloseBraceExpected=7]="CloseBraceExpected",e[e.CloseBracketExpected=8]="CloseBracketExpected",e[e.EndOfFileExpected=9]="EndOfFileExpected",e[e.InvalidCommentToken=10]="InvalidCommentToken",e[e.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=12]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",e[e.InvalidUnicode=14]="InvalidUnicode",e[e.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",e[e.InvalidCharacter=16]="InvalidCharacter"})(Zx||(Zx={}));var yw;(function(e){e.DEFAULT={allowTrailingComma:!0}})(yw||(yw={}));function oM(e,t=!1){let i=0;const r=e.length;let s="",n=0,o=16,a=0;function c(v){let y=0,S=0;for(;y<v;){const x=e.charCodeAt(i);if(x>=48&&x<=57)S=S*16+x-48;else if(x>=65&&x<=70)S=S*16+x-65+10;else if(x>=97&&x<=102)S=S*16+x-97+10;else break;i++,y++}return y<v&&(S=-1),S}function l(v){i=v,s="",n=0,o=16,a=0}function u(){const v=i;if(e.charCodeAt(i)===48)i++;else for(i++;i<e.length&&bc(e.charCodeAt(i));)i++;if(i<e.length&&e.charCodeAt(i)===46)if(i++,i<e.length&&bc(e.charCodeAt(i)))for(i++;i<e.length&&bc(e.charCodeAt(i));)i++;else return a=3,e.substring(v,i);let y=i;if(i<e.length&&(e.charCodeAt(i)===69||e.charCodeAt(i)===101))if(i++,(i<e.length&&e.charCodeAt(i)===43||e.charCodeAt(i)===45)&&i++,i<e.length&&bc(e.charCodeAt(i))){for(i++;i<e.length&&bc(e.charCodeAt(i));)i++;y=i}else a=3;return e.substring(v,y)}function h(){let v="",y=i;for(;;){if(i>=r){v+=e.substring(y,i),a=2;break}const S=e.charCodeAt(i);if(S===34){v+=e.substring(y,i),i++;break}if(S===92){if(v+=e.substring(y,i),i++,i>=r){a=2;break}switch(e.charCodeAt(i++)){case 34:v+='"';break;case 92:v+="\\";break;case 47:v+="/";break;case 98:v+="\b";break;case 102:v+="\f";break;case 110:v+=`
`;break;case 114:v+="\r";break;case 116:v+="	";break;case 117:{const P=c(4);P>=0?v+=String.fromCharCode(P):a=4;break}default:a=5}y=i;continue}if(S>=0&&S<=31)if(ig(S)){v+=e.substring(y,i),a=2;break}else a=6;i++}return v}function d(){if(s="",a=0,n=i,i>=r)return n=r,o=17;let v=e.charCodeAt(i);if(Ew(v)){do i++,s+=String.fromCharCode(v),v=e.charCodeAt(i);while(Ew(v));return o=15}if(ig(v))return i++,s+=String.fromCharCode(v),v===13&&e.charCodeAt(i)===10&&(i++,s+=`
`),o=14;switch(v){case 123:return i++,o=1;case 125:return i++,o=2;case 91:return i++,o=3;case 93:return i++,o=4;case 58:return i++,o=6;case 44:return i++,o=5;case 34:return i++,s=h(),o=10;case 47:{const y=i-1;if(e.charCodeAt(i+1)===47){for(i+=2;i<r&&!ig(e.charCodeAt(i));)i++;return s=e.substring(y,i),o=12}if(e.charCodeAt(i+1)===42){i+=2;const S=r-1;let x=!1;for(;i<S;){if(e.charCodeAt(i)===42&&e.charCodeAt(i+1)===47){i+=2,x=!0;break}i++}return x||(i++,a=1),s=e.substring(y,i),o=13}return s+=String.fromCharCode(v),i++,o=16}case 45:if(s+=String.fromCharCode(v),i++,i===r||!bc(e.charCodeAt(i)))return o=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return s+=u(),o=11;default:for(;i<r&&f(v);)i++,v=e.charCodeAt(i);if(n!==i){switch(s=e.substring(n,i),s){case"true":return o=8;case"false":return o=9;case"null":return o=7}return o=16}return s+=String.fromCharCode(v),i++,o=16}}function f(v){if(Ew(v)||ig(v))return!1;switch(v){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function g(){let v;do v=d();while(v>=12&&v<=15);return v}return{setPosition:l,getPosition:()=>i,scan:t?g:d,getToken:()=>o,getTokenValue:()=>s,getTokenOffset:()=>n,getTokenLength:()=>i-n,getTokenError:()=>a}}function Ew(e){return e===32||e===9||e===11||e===12||e===160||e===5760||e>=8192&&e<=8203||e===8239||e===8287||e===12288||e===65279}function ig(e){return e===10||e===13||e===8232||e===8233}function bc(e){return e>=48&&e<=57}var Kx;(function(e){e[e.nullCharacter=0]="nullCharacter",e[e.maxAsciiCharacter=127]="maxAsciiCharacter",e[e.lineFeed=10]="lineFeed",e[e.carriageReturn=13]="carriageReturn",e[e.lineSeparator=8232]="lineSeparator",e[e.paragraphSeparator=8233]="paragraphSeparator",e[e.nextLine=133]="nextLine",e[e.space=32]="space",e[e.nonBreakingSpace=160]="nonBreakingSpace",e[e.enQuad=8192]="enQuad",e[e.emQuad=8193]="emQuad",e[e.enSpace=8194]="enSpace",e[e.emSpace=8195]="emSpace",e[e.threePerEmSpace=8196]="threePerEmSpace",e[e.fourPerEmSpace=8197]="fourPerEmSpace",e[e.sixPerEmSpace=8198]="sixPerEmSpace",e[e.figureSpace=8199]="figureSpace",e[e.punctuationSpace=8200]="punctuationSpace",e[e.thinSpace=8201]="thinSpace",e[e.hairSpace=8202]="hairSpace",e[e.zeroWidthSpace=8203]="zeroWidthSpace",e[e.narrowNoBreakSpace=8239]="narrowNoBreakSpace",e[e.ideographicSpace=12288]="ideographicSpace",e[e.mathematicalSpace=8287]="mathematicalSpace",e[e.ogham=5760]="ogham",e[e._=95]="_",e[e.$=36]="$",e[e._0=48]="_0",e[e._1=49]="_1",e[e._2=50]="_2",e[e._3=51]="_3",e[e._4=52]="_4",e[e._5=53]="_5",e[e._6=54]="_6",e[e._7=55]="_7",e[e._8=56]="_8",e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.ampersand=38]="ampersand",e[e.asterisk=42]="asterisk",e[e.at=64]="at",e[e.backslash=92]="backslash",e[e.bar=124]="bar",e[e.caret=94]="caret",e[e.closeBrace=125]="closeBrace",e[e.closeBracket=93]="closeBracket",e[e.closeParen=41]="closeParen",e[e.colon=58]="colon",e[e.comma=44]="comma",e[e.dot=46]="dot",e[e.doubleQuote=34]="doubleQuote",e[e.equals=61]="equals",e[e.exclamation=33]="exclamation",e[e.greaterThan=62]="greaterThan",e[e.lessThan=60]="lessThan",e[e.minus=45]="minus",e[e.openBrace=123]="openBrace",e[e.openBracket=91]="openBracket",e[e.openParen=40]="openParen",e[e.percent=37]="percent",e[e.plus=43]="plus",e[e.question=63]="question",e[e.semicolon=59]="semicolon",e[e.singleQuote=39]="singleQuote",e[e.slash=47]="slash",e[e.tilde=126]="tilde",e[e.backspace=8]="backspace",e[e.formFeed=12]="formFeed",e[e.byteOrderMark=65279]="byteOrderMark",e[e.tab=9]="tab",e[e.verticalTab=11]="verticalTab"})(Kx||(Kx={}));function aM(e,t,i=yw.DEFAULT){const r=oM(e,!1);function s(M){return M?()=>M(r.getTokenOffset(),r.getTokenLength()):()=>!0}function n(M){return M?re=>M(re,r.getTokenOffset(),r.getTokenLength()):()=>!0}const o=s(t.onObjectBegin),a=n(t.onObjectProperty),c=s(t.onObjectEnd),l=s(t.onArrayBegin),u=s(t.onArrayEnd),h=n(t.onLiteralValue),d=n(t.onSeparator),f=s(t.onComment),g=n(t.onError),v=i&&i.disallowComments,y=i&&i.allowTrailingComma;function S(){for(;;){const M=r.scan();switch(r.getTokenError()){case 4:x(14);break;case 5:x(15);break;case 3:x(13);break;case 1:v||x(11);break;case 2:x(12);break;case 6:x(16);break}switch(M){case 12:case 13:v?x(10):f();break;case 16:x(1);break;case 15:case 14:break;default:return M}}}function x(M,re=[],ae=[]){if(g(M),re.length+ae.length>0){let fe=r.getToken();for(;fe!==17;){if(re.indexOf(fe)!==-1){S();break}else if(ae.indexOf(fe)!==-1)break;fe=S()}}}function P(M){const re=r.getTokenValue();return M?h(re):a(re),S(),!0}function D(){switch(r.getToken()){case 11:{let M=0;try{M=JSON.parse(r.getTokenValue()),typeof M!="number"&&(x(2),M=0)}catch{x(2)}h(M);break}case 7:h(null);break;case 8:h(!0);break;case 9:h(!1);break;default:return!1}return S(),!0}function N(){return r.getToken()!==10?(x(3,[],[2,5]),!1):(P(!1),r.getToken()===6?(d(":"),S(),B()||x(4,[],[2,5])):x(5,[],[2,5]),!0)}function H(){o(),S();let M=!1;for(;r.getToken()!==2&&r.getToken()!==17;){if(r.getToken()===5){if(M||x(4,[],[]),d(","),S(),r.getToken()===2&&y)break}else M&&x(6,[],[]);N()||x(4,[],[2,5]),M=!0}return c(),r.getToken()!==2?x(7,[2],[]):S(),!0}function Y(){l(),S();let M=!1;for(;r.getToken()!==4&&r.getToken()!==17;){if(r.getToken()===5){if(M||x(4,[],[]),d(","),S(),r.getToken()===4&&y)break}else M&&x(6,[],[]);B()||x(4,[],[4,5]),M=!0}return u(),r.getToken()!==4?x(8,[4],[]):S(),!0}function B(){switch(r.getToken()){case 3:return Y();case 1:return H();case 10:return P(!0);default:return D()}}return S(),r.getToken()===17?i.allowEmptyContent?!0:(x(4,[],[]),!1):B()?(r.getToken()!==17&&x(9,[],[]),!0):(x(4,[],[]),!1)}function Wu(e){return Object.isFrozen(e)?e:GE(e)}var yc=class ia{static createEmptyModel(t){return new ia({},[],[],void 0,t)}constructor(t,i,r,s,n){this.b=t,this.c=i,this.d=r,this.raw=s,this.f=n,this.a=new Map}get rawConfiguration(){if(!this.g)if(this.raw?.length){const t=this.raw.map(i=>{if(i instanceof ia)return i;const r=new cM("",this.f);return r.parseRaw(i),r.configurationModel});this.g=t.reduce((i,r)=>r===i?r:i.merge(r),t[0])}else this.g=this;return this.g}get contents(){return this.b}get overrides(){return this.d}get keys(){return this.c}isEmpty(){return this.c.length===0&&Object.keys(this.b).length===0&&this.d.length===0}getValue(t){return t?Hd(this.contents,t):this.contents}inspect(t,i){const r=this;return{get value(){return Wu(r.rawConfiguration.getValue(t))},get override(){return i?Wu(r.rawConfiguration.getOverrideValue(t,i)):void 0},get merged(){return Wu(i?r.rawConfiguration.override(i).getValue(t):r.rawConfiguration.getValue(t))},get overrides(){const s=[];for(const{contents:n,identifiers:o,keys:a}of r.rawConfiguration.overrides){const c=new ia(n,a,[],void 0,r.f).getValue(t);c!==void 0&&s.push({identifiers:o,value:c})}return s.length?Wu(s):void 0}}}getOverrideValue(t,i){const r=this.j(i);return r?t?Hd(r,t):r:void 0}getKeysForOverrideIdentifier(t){const i=[];for(const r of this.overrides)r.identifiers.includes(t)&&i.push(...r.keys);return ha(i)}getAllOverrideIdentifiers(){const t=[];for(const i of this.overrides)t.push(...i.identifiers);return ha(t)}override(t){let i=this.a.get(t);return i||(i=this.h(t),this.a.set(t,i)),i}merge(...t){const i=ot(this.contents),r=ot(this.overrides),s=[...this.keys],n=this.raw?.length?[...this.raw]:[this];for(const o of t)if(n.push(...o.raw?.length?o.raw:[o]),!o.isEmpty()){this.i(i,o.contents);for(const a of o.overrides){const[c]=r.filter(l=>Vr(l.identifiers,a.identifiers));c?(this.i(c.contents,a.contents),c.keys.push(...a.keys),c.keys=ha(c.keys)):r.push(ot(a))}for(const a of o.keys)s.indexOf(a)===-1&&s.push(a)}return new ia(i,s,r,n.every(o=>o instanceof ia)?void 0:n,this.f)}h(t){const i=this.j(t);if(!i||typeof i!="object"||!Object.keys(i).length)return this;const r={};for(const s of ha([...Object.keys(this.contents),...Object.keys(i)])){let n=this.contents[s];const o=i[s];o&&(typeof n=="object"&&typeof o=="object"?(n=ot(n),this.i(n,o)):n=o),r[s]=n}return new ia(r,this.keys,this.overrides,void 0,this.f)}i(t,i){for(const r of Object.keys(i)){if(r in t&&St(t[r])&&St(i[r])){this.i(t[r],i[r]);continue}t[r]=ot(i[r])}}j(t){let i=null,r=null;const s=n=>{n&&(r?this.i(r,n):r=ot(n))};for(const n of this.overrides)n.identifiers.length===1&&n.identifiers[0]===t?i=n.contents:n.identifiers.includes(t)&&s(n.contents);return s(i),r}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}addValue(t,i){this.k(t,i,!0)}setValue(t,i){this.k(t,i,!1)}removeValue(t){const i=this.keys.indexOf(t);i!==-1&&(this.keys.splice(i,1),dO(this.contents,t),ts.test(t)&&this.overrides.splice(this.overrides.findIndex(r=>Vr(r.identifiers,Nl(t))),1))}k(t,i,r){if(V7(this.contents,t,i,s=>this.f.error(s)),r=r||this.keys.indexOf(t)===-1,r&&this.keys.push(t),ts.test(t)){const s=Nl(t),n={identifiers:s,keys:Object.keys(this.contents[t]),contents:dv(this.contents[t],a=>this.f.error(a))},o=this.overrides.findIndex(a=>Vr(a.identifiers,s));o!==-1?this.overrides[o]=n:this.overrides.push(n)}}},cM=class{constructor(e,t){this.f=e,this.g=t,this.a=null,this.b=null,this.c=[],this.d=[]}get configurationModel(){return this.b||yc.createEmptyModel(this.g)}get restrictedConfigurations(){return this.c}get errors(){return this.d}parse(e,t){if(!$t(e)){const i=this.h(e);this.parseRaw(i,t)}}reparse(e){this.a&&this.parseRaw(this.a,e)}parseRaw(e,t){this.a=e;const{contents:i,keys:r,overrides:s,restricted:n,hasExcludedProperties:o}=this.i(e,t);this.b=new yc(i,r,s,o?[e]:void 0,this.g),this.c=n||[]}h(e){let t={},i=null,r=[];const s=[],n=[];function o(c){Array.isArray(r)?r.push(c):i!==null&&(r[i]=c)}const a={onObjectBegin:()=>{const c={};o(c),s.push(r),r=c,i=null},onObjectProperty:c=>{i=c},onObjectEnd:()=>{r=s.pop()},onArrayBegin:()=>{const c=[];o(c),s.push(r),r=c,i=null},onArrayEnd:()=>{r=s.pop()},onLiteralValue:o,onError:(c,l,u)=>{n.push({error:c,offset:l,length:u})}};if(e)try{aM(e,a),t=r[0]||{}}catch(c){this.g.error(`Error while parsing settings file ${this.f}: ${c}`),this.d=[c]}return t}i(e,t){const i=ai.as(Ta.Configuration).getConfigurationProperties(),r=this.j(e,i,!0,t);e=r.raw;const s=dv(e,a=>this.g.error(`Conflict in settings file ${this.f}: ${a}`)),n=Object.keys(e),o=this.l(e,a=>this.g.error(`Conflict in settings file ${this.f}: ${a}`));return{contents:s,keys:n,overrides:o,restricted:r.restricted,hasExcludedProperties:r.hasExcludedProperties}}j(e,t,i,r){let s=!1;if(!r?.scopes&&!r?.skipRestricted&&!r?.exclude?.length)return{raw:e,restricted:[],hasExcludedProperties:s};const n={},o=[];for(const a in e)if(ts.test(a)&&i){const c=this.j(e[a],t,!1,r);n[a]=c.raw,s=s||c.hasExcludedProperties,o.push(...c.restricted)}else{const c=t[a],l=c?typeof c.scope<"u"?c.scope:3:void 0;c?.restricted&&o.push(a),!r.exclude?.includes(a)&&(r.include?.includes(a)||(l===void 0||r.scopes===void 0||r.scopes.includes(l))&&!(r.skipRestricted&&c?.restricted))?n[a]=e[a]:s=!0}return{raw:n,restricted:o,hasExcludedProperties:s}}l(e,t){const i=[];for(const r of Object.keys(e))if(ts.test(r)){const s={};for(const n in e[r])s[n]=e[r][n];i.push({identifiers:Nl(r),keys:Object.keys(s),contents:dv(s,t)})}return i}},lM=class{constructor(e,t,i,r,s,n,o,a,c,l,u,h,d){this.a=e,this.b=t,this.c=i,this.overrideIdentifiers=r,this.d=s,this.f=n,this.g=o,this.h=a,this.i=c,this.j=l,this.k=u,this.l=h,this.m=d}get value(){return Wu(this.c)}n(e){return e?.value!==void 0||e?.override!==void 0||e?.overrides!==void 0?e:void 0}get q(){return this.p||(this.p=this.d.inspect(this.a,this.b.overrideIdentifier)),this.p}get defaultValue(){return this.q.merged}get default(){return this.n(this.q)}get s(){return this.r===void 0&&(this.r=this.f?this.f.inspect(this.a):null),this.r}get policyValue(){return this.s?.merged}get policy(){return this.s?.value!==void 0?{value:this.s.value}:void 0}get u(){return this.t===void 0&&(this.t=this.g?this.g.inspect(this.a):null),this.t}get applicationValue(){return this.u?.merged}get application(){return this.n(this.u)}get w(){return this.v||(this.v=this.h.inspect(this.a,this.b.overrideIdentifier)),this.v}get userValue(){return this.w.merged}get user(){return this.n(this.w)}get y(){return this.x||(this.x=this.i.inspect(this.a,this.b.overrideIdentifier)),this.x}get userLocalValue(){return this.y.merged}get userLocal(){return this.n(this.y)}get A(){return this.z||(this.z=this.j.inspect(this.a,this.b.overrideIdentifier)),this.z}get userRemoteValue(){return this.A.merged}get userRemote(){return this.n(this.A)}get D(){return this.B===void 0&&(this.B=this.k?this.k.inspect(this.a,this.b.overrideIdentifier):null),this.B}get workspaceValue(){return this.D?.merged}get workspace(){return this.n(this.D)}get F(){return this.E===void 0&&(this.E=this.l?this.l.inspect(this.a,this.b.overrideIdentifier):null),this.E}get workspaceFolderValue(){return this.F?.merged}get workspaceFolder(){return this.n(this.F)}get H(){return this.G===void 0&&(this.G=this.m.inspect(this.a,this.b.overrideIdentifier)),this.G}get memoryValue(){return this.H.merged}get memory(){return this.n(this.H)}},Sw=class LI{constructor(t,i,r,s,n,o,a,c,l,u){this.j=t,this.l=i,this.m=r,this.n=s,this.p=n,this.q=o,this.r=a,this.s=c,this.t=l,this.u=u,this.h=null,this.i=new Gt,this.v=null}getValue(t,i,r){return this.w(t,i,r).getValue(t)}updateValue(t,i,r={}){let s;r.resource?(s=this.t.get(r.resource),s||(s=yc.createEmptyModel(this.u),this.t.set(r.resource,s))):s=this.s,i===void 0?s.removeValue(t):s.setValue(t,i),r.resource||(this.h=null)}inspect(t,i,r){const s=this.w(t,i,r),n=this.A(i.resource,r),o=i.resource?this.t.get(i.resource)||this.s:this.s,a=new Set;for(const c of s.overrides)for(const l of c.identifiers)s.getOverrideValue(t,l)!==void 0&&a.add(l);return new lM(t,i,s.getValue(t),a.size?[...a]:void 0,this.j,this.l.isEmpty()?void 0:this.l,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,r?this.q:void 0,n||void 0,o)}keys(t){const i=this.A(void 0,t);return{default:this.j.keys.slice(0),user:this.userConfiguration.keys.slice(0),workspace:this.q.keys.slice(0),workspaceFolder:i?i.keys.slice(0):[]}}updateDefaultConfiguration(t){this.j=t,this.h=null,this.i.clear()}updatePolicyConfiguration(t){this.l=t}updateApplicationConfiguration(t){this.m=t,this.h=null,this.i.clear()}updateLocalUserConfiguration(t){this.n=t,this.v=null,this.h=null,this.i.clear()}updateRemoteUserConfiguration(t){this.p=t,this.v=null,this.h=null,this.i.clear()}updateWorkspaceConfiguration(t){this.q=t,this.h=null,this.i.clear()}updateFolderConfiguration(t,i){this.r.set(t,i),this.i.delete(t)}deleteFolderConfiguration(t){this.folderConfigurations.delete(t),this.i.delete(t)}compareAndUpdateDefaultConfiguration(t,i){const r=[];if(!i){const{added:s,updated:n,removed:o}=jn(this.j,t);i=[...s,...n,...o]}for(const s of i)for(const n of Nl(s)){const o=this.j.getKeysForOverrideIdentifier(n),a=t.getKeysForOverrideIdentifier(n),c=[...a.filter(l=>o.indexOf(l)===-1),...o.filter(l=>a.indexOf(l)===-1),...o.filter(l=>!Ir(this.j.override(n).getValue(l),t.override(n).getValue(l)))];r.push([n,c])}return this.updateDefaultConfiguration(t),{keys:i,overrides:r}}compareAndUpdatePolicyConfiguration(t){const{added:i,updated:r,removed:s}=jn(this.l,t),n=[...i,...r,...s];return n.length&&this.updatePolicyConfiguration(t),{keys:n,overrides:[]}}compareAndUpdateApplicationConfiguration(t){const{added:i,updated:r,removed:s,overrides:n}=jn(this.applicationConfiguration,t),o=[...i,...r,...s];return o.length&&this.updateApplicationConfiguration(t),{keys:o,overrides:n}}compareAndUpdateLocalUserConfiguration(t){const{added:i,updated:r,removed:s,overrides:n}=jn(this.localUserConfiguration,t),o=[...i,...r,...s];return o.length&&this.updateLocalUserConfiguration(t),{keys:o,overrides:n}}compareAndUpdateRemoteUserConfiguration(t){const{added:i,updated:r,removed:s,overrides:n}=jn(this.remoteUserConfiguration,t),o=[...i,...r,...s];return o.length&&this.updateRemoteUserConfiguration(t),{keys:o,overrides:n}}compareAndUpdateWorkspaceConfiguration(t){const{added:i,updated:r,removed:s,overrides:n}=jn(this.workspaceConfiguration,t),o=[...i,...r,...s];return o.length&&this.updateWorkspaceConfiguration(t),{keys:o,overrides:n}}compareAndUpdateFolderConfiguration(t,i){const r=this.folderConfigurations.get(t),{added:s,updated:n,removed:o,overrides:a}=jn(r,i),c=[...s,...n,...o];return(c.length||!r)&&this.updateFolderConfiguration(t,i),{keys:c,overrides:a}}compareAndDeleteFolderConfiguration(t){const i=this.folderConfigurations.get(t);if(!i)throw new Error("Unknown folder");this.deleteFolderConfiguration(t);const{added:r,updated:s,removed:n,overrides:o}=jn(i,void 0);return{keys:[...r,...s,...n],overrides:o}}get defaults(){return this.j}get applicationConfiguration(){return this.m}get userConfiguration(){return this.v||(this.v=this.p.isEmpty()?this.n:this.n.merge(this.p)),this.v}get localUserConfiguration(){return this.n}get remoteUserConfiguration(){return this.p}get workspaceConfiguration(){return this.q}get folderConfigurations(){return this.r}w(t,i,r){let s=this.x(i,r);return i.overrideIdentifier&&(s=s.override(i.overrideIdentifier)),!this.l.isEmpty()&&this.l.getValue(t)!==void 0&&(s=s.merge(this.l)),s}x({resource:t},i){let r=this.y();if(i&&t){const s=i.getFolder(t);s&&(r=this.z(s.uri)||r);const n=this.t.get(t);n&&(r=r.merge(n))}return r}y(){return this.h||(this.h=this.j.merge(this.applicationConfiguration,this.userConfiguration,this.q,this.s)),this.h}z(t){let i=this.i.get(t);if(!i){const r=this.y(),s=this.r.get(t);s?(i=r.merge(s),this.i.set(t,i)):i=r}return i}A(t,i){if(i&&t){const r=i.getFolder(t);if(r)return this.r.get(r.uri)}}toData(){return{defaults:{contents:this.j.contents,overrides:this.j.overrides,keys:this.j.keys},policy:{contents:this.l.contents,overrides:this.l.overrides,keys:this.l.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this.q.contents,overrides:this.q.overrides,keys:this.q.keys},folders:[...this.r.keys()].reduce((t,i)=>{const{contents:r,overrides:s,keys:n}=this.r.get(i);return t.push([i,{contents:r,overrides:s,keys:n}]),t},[])}}allKeys(){const t=new Set;return this.j.keys.forEach(i=>t.add(i)),this.userConfiguration.keys.forEach(i=>t.add(i)),this.q.keys.forEach(i=>t.add(i)),this.r.forEach(i=>i.keys.forEach(r=>t.add(r))),[...t.values()]}B(){const t=new Set;return this.j.getAllOverrideIdentifiers().forEach(i=>t.add(i)),this.userConfiguration.getAllOverrideIdentifiers().forEach(i=>t.add(i)),this.q.getAllOverrideIdentifiers().forEach(i=>t.add(i)),this.r.forEach(i=>i.getAllOverrideIdentifiers().forEach(r=>t.add(r))),[...t.values()]}D(t){const i=new Set;return this.j.getKeysForOverrideIdentifier(t).forEach(r=>i.add(r)),this.userConfiguration.getKeysForOverrideIdentifier(t).forEach(r=>i.add(r)),this.q.getKeysForOverrideIdentifier(t).forEach(r=>i.add(r)),this.r.forEach(r=>r.getKeysForOverrideIdentifier(t).forEach(s=>i.add(s))),[...i.values()]}static parse(t,i){const r=this.E(t.defaults,i),s=this.E(t.policy,i),n=this.E(t.application,i),o=this.E(t.user,i),a=this.E(t.workspace,i),c=t.folders.reduce((l,u)=>(l.set(E.revive(u[0]),this.E(u[1],i)),l),new Gt);return new LI(r,s,n,o,yc.createEmptyModel(i),a,c,yc.createEmptyModel(i),new Gt,i)}static E(t,i){return new yc(t.contents,t.keys,t.overrides,void 0,i)}},uM=class{constructor(e,t,i,r,s){this.change=e,this.f=t,this.g=i,this.h=r,this.i=s,this.a=`
`,this.b=this.a.charCodeAt(0),this.c=46,this.affectedKeys=new Set,this.j=void 0;for(const n of e.keys)this.affectedKeys.add(n);for(const[,n]of e.overrides)for(const o of n)this.affectedKeys.add(o);this.d=this.a;for(const n of this.affectedKeys)this.d+=n+this.a}get previousConfiguration(){return!this.j&&this.f&&(this.j=Sw.parse(this.f.data,this.i)),this.j}affectsConfiguration(e,t){const i=this.a+e,r=this.d.indexOf(i);if(r<0)return!1;const s=r+i.length;if(s>=this.d.length)return!1;const n=this.d.charCodeAt(s);if(n!==this.b&&n!==this.c)return!1;if(t){const o=this.previousConfiguration?this.previousConfiguration.getValue(e,t,this.f?.workspace):void 0,a=this.g.getValue(e,t,this.h);return!Ir(o,a)}return!0}};function jn(e,t){const{added:i,removed:r,updated:s}=ek(t?.rawConfiguration,e?.rawConfiguration),n=[],o=e?.getAllOverrideIdentifiers()||[],a=t?.getAllOverrideIdentifiers()||[];if(t){const c=a.filter(l=>!o.includes(l));for(const l of c)n.push([l,t.getKeysForOverrideIdentifier(l)])}if(e){const c=o.filter(l=>!a.includes(l));for(const l of c)n.push([l,e.getKeysForOverrideIdentifier(l)])}if(t&&e){for(const c of o)if(a.includes(c)){const l=ek({contents:e.getOverrideValue(void 0,c)||{},keys:e.getKeysForOverrideIdentifier(c)},{contents:t.getOverrideValue(void 0,c)||{},keys:t.getKeysForOverrideIdentifier(c)});n.push([c,[...l.added,...l.removed,...l.updated]])}}return{added:i,removed:r,updated:s,overrides:n}}function ek(e,t){const i=e?t?e.keys.filter(n=>t.keys.indexOf(n)===-1):[...e.keys]:[],r=t?e?t.keys.filter(n=>e.keys.indexOf(n)===-1):[...t.keys]:[],s=[];if(e&&t){for(const n of t.keys)if(e.keys.indexOf(n)!==-1){const o=Hd(t.contents,n),a=Hd(e.contents,n);Ir(o,a)||s.push(n)}}return{added:i,removed:r,updated:s}}function zu(e,t){if(t){const i=t.split(".");let r=e;for(let s=0;r&&s<i.length;s++)r=r[i[s]];return r}}function hM(e){return e instanceof E}function dM(e){return e&&e.uri instanceof E&&e.languageId&&typeof e.languageId=="string"}function fM(e){return e&&!e.uri&&e.languageId&&typeof e.languageId=="string"}function pM(e){return e&&e.uri instanceof E&&(!e.name||typeof e.name=="string")&&(!e.index||typeof e.index=="number")}function tk(e){if(hM(e))return{resource:e};if(dM(e))return{resource:e.uri,overrideIdentifier:e.languageId};if(fM(e))return{overrideIdentifier:e.languageId};if(pM(e))return{resource:e.uri};if(e===null)return{resource:null}}var xw=class{constructor(t,i,r){this.a=t.getProxy(q.MainThreadConfiguration),this.c=i,this.b=r,this.d=new ur,this.e=null}getConfigProvider(){return this.d.wait().then(t=>this.e)}$initializeConfiguration(t){this.e=new gM(this.a,this.c,t,this.b),this.d.open()}$acceptConfigurationChanged(t,i){this.getConfigProvider().then(r=>r.$acceptConfigurationChanged(t,i))}};xw=__decorate([__param(0,Ie),__param(1,Fr),__param(2,Ce)],xw);var gM=class{constructor(e,t,i,r){this.a=new I,this.b=e,this.f=r,this.c=t,this.e=Sw.parse(i,r),this.d=this.k(i.configurationScopes)}get onDidChangeConfiguration(){return this.a&&this.a.event}$acceptConfigurationChanged(e,t){const i={data:this.e.toData(),workspace:this.c.workspace};this.e=Sw.parse(e,this.f),this.d=this.k(e.configurationScopes),this.a.fire(this.j(t,i))}getConfiguration(e,t,i){const r=tk(t)||{},s=this.g(e?zu(this.e.getValue(void 0,r,this.c.workspace),e):this.e.getValue(void 0,r,this.c.workspace));e&&this.h(e,r,i?.identifier);function n(a){if(a==null)return null;if(typeof a=="boolean")return a?2:5;switch(a){case Ga.Global:return 2;case Ga.Workspace:return 5;case Ga.WorkspaceFolder:return 6}}const o={has(a){return typeof zu(s,a)<"u"},get:(a,c)=>{this.h(e?`${e}.${a}`:a,r,i?.identifier);let l=zu(s,a);if(typeof l>"u")l=c;else{let u;const h=(d,f)=>{if(St(d)){let g;const v=()=>{u=u||ot(s),g=g||zu(u,f)};return new Proxy(d,{get:(y,S)=>{if(typeof S=="string"&&S.toLowerCase()==="tojson")return v(),()=>g;if(u)return g=g||zu(u,f),g[S];const x=y[S];return typeof S=="string"?h(x,`${f}.${S}`):x},set:(y,S,x)=>(v(),g&&(g[S]=x),!0),deleteProperty:(y,S)=>(v(),g&&delete g[S],!0),defineProperty:(y,S,x)=>(v(),g&&Object.defineProperty(g,S,x),!0)})}return Array.isArray(d)?ot(d):d};l=h(l,a)}return l},update:(a,c,l,u)=>{a=e?`${e}.${a}`:a;const h=n(l);return c!==void 0?this.b.$updateConfigurationOption(h,a,c,r,u):this.b.$removeConfigurationOption(h,a,r,u)},inspect:a=>{a=e?`${e}.${a}`:a;const c=this.e.inspect(a,r,this.c.workspace);if(c)return{key:a,defaultValue:ot(c.policy?.value??c.default?.value),globalValue:ot(c.user?.value??c.application?.value),workspaceValue:ot(c.workspace?.value),workspaceFolderValue:ot(c.workspaceFolder?.value),defaultLanguageValue:ot(c.default?.override),globalLanguageValue:ot(c.user?.override??c.application?.override),workspaceLanguageValue:ot(c.workspace?.override),workspaceFolderLanguageValue:ot(c.workspaceFolder?.override),languageIds:ot(c.overrideIdentifiers)}}};return typeof s=="object"&&xs(o,s,!1),Object.freeze(o)}g(e){const t=i=>St(i)?new Proxy(i,{get:(r,s)=>t(r[s]),set:(r,s,n)=>{throw new Error(`TypeError: Cannot assign to read only property '${String(s)}' of object`)},deleteProperty:(r,s)=>{throw new Error(`TypeError: Cannot delete read only property '${String(s)}' of object`)},defineProperty:(r,s)=>{throw new Error(`TypeError: Cannot define property '${String(s)}' for a readonly object`)},setPrototypeOf:r=>{throw new Error("TypeError: Cannot set prototype for a readonly object")},isExtensible:()=>!1,preventExtensions:()=>!0}):i;return t(e)}h(e,t,i){const r=ts.test(e)?4:this.d.get(e),s=i?`[${i.value}] `:"";if(r===4){typeof t?.resource>"u"&&this.f.warn(`${s}Accessing a resource scoped configuration without providing a resource is not expected. To get the effective value for '${e}', provide the URI of a resource or 'null' for any resource.`);return}if(r===3){t?.resource&&this.f.warn(`${s}Accessing a window scoped configuration for a resource is not expected. To associate '${e}' to a resource, define its scope to 'resource' in configuration contributions in 'package.json'.`);return}}j(e,t){const i=new uM(e,t,this.e,this.c.workspace,this.f);return Object.freeze({affectsConfiguration:(r,s)=>i.affectsConfiguration(r,tk(s))})}k(e){return e.reduce((t,i)=>(t.set(i[0],i[1]),t),new Map)}},gr=V("IExtHostConfiguration"),mM=class{constructor(e,t){this.versionId=e,this.removedDueToLooping=t}},Vu=class NI{static isHostExtension(t,i,r){if(i.getExtensionDescription(t))return!1;const s=r.getExtensionDescription(t);return s?!!(process.env.ICUBE_MULTI_CONTAINER?.toLowerCase()==="true"&&process.env.ICUBE_EXT_MULTI_CONTAINER?.toLowerCase()!=="false"||(s.main||s.browser)&&s.api==="none"):!1}constructor(t,i){this.j=t,this.c=new I,this.onDidChange=this.c.event,this.d=0,this.e=i,this.k()}k(){this.e.sort(wM),this.f=new Rs,this.g=[],this.h=new Map;for(const t of this.e){if(this.f.has(t.identifier)){console.error("Extension `"+t.identifier.value+"` is already registered");continue}this.f.set(t.identifier,t),this.g.push(t);const i=this.j.readActivationEvents(t);for(const r of i)this.h.has(r)||this.h.set(r,[]),this.h.get(r).push(t)}}set(t){return this.e=t,this.k(),this.d++,this.c.fire(void 0),{versionId:this.d}}deltaExtensions(t,i){this.e=rk(this.e,i),this.e=this.e.concat(t);const r=NI.l(this.e);return this.e=rk(this.e,r.map(s=>s.identifier)),this.k(),this.d++,this.c.fire(void 0),new mM(this.d,r)}static l(t){const i=new class{constructor(){this.c=new Map,this.d=new Set,this.e=[]}addNode(a){this.d.has(a)||(this.d.add(a),this.e.push(a))}addArc(a,c){this.addNode(a),this.addNode(c),this.c.has(a)?this.c.get(a).push(c):this.c.set(a,[c])}getArcs(a){return this.c.has(a)?this.c.get(a):[]}hasOnlyGoodArcs(a,c){const l=i.getArcs(a);for(let u=0;u<l.length;u++)if(!c.has(l[u]))return!1;return!0}getNodes(){return this.e}},r=new Rs;for(const a of t)if(r.set(a.identifier,a),a.extensionDependencies)for(const c of a.extensionDependencies)i.addArc(Xe.toKey(a.identifier),Xe.toKey(c));const s=new Set;i.getNodes().filter(a=>i.getArcs(a).length===0).forEach(a=>s.add(a));const n=i.getNodes().filter(a=>!s.has(a));let o;do{o=!1;for(let a=0;a<n.length;a++){const c=n[a];i.hasOnlyGoodArcs(c,s)&&(n.splice(a,1),a--,s.add(c),o=!0)}}while(o);return n.map(a=>r.get(a))}containsActivationEvent(t){return this.h.has(t)}containsExtension(t){return this.f.has(t)}getExtensionDescriptionsForActivationEvent(t){const i=this.h.get(t);return i?i.slice(0):[]}getAllExtensionDescriptions(){return this.g.slice(0)}getSnapshot(){return new vM(this.d,this.getAllExtensionDescriptions())}getExtensionDescription(t){const i=this.f.get(t);return i||void 0}getExtensionDescriptionByUUID(t){for(const i of this.g)if(i.uuid===t)return i}getExtensionDescriptionByIdOrUUID(t,i){return this.getExtensionDescription(t)??(i?this.getExtensionDescriptionByUUID(i):void 0)}},vM=class{constructor(e,t){this.versionId=e,this.extensions=t}},ik;(function(e){e[e.Builtin=0]="Builtin",e[e.User=1]="User",e[e.Dev=2]="Dev"})(ik||(ik={}));function wM(e,t){const i=e.isBuiltin?0:e.isUnderDevelopment?2:1,r=t.isBuiltin?0:t.isUnderDevelopment?2:1;if(i!==r)return i-r;const s=Le.basename(e.extensionLocation.path),n=Le.basename(t.extensionLocation.path);return s<n?-1:s>n?1:0}function rk(e,t){const i=new bo(t);return e.filter(r=>!i.has(r.identifier))}var kw="^([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$",TQ=new RegExp(kw),sk;(function(e){e.COMMAND="command",e.SETTINGS_SYNC="settingsSync"})(sk||(sk={}));var nk;(function(e){e[e.NoneOrRelevance=0]="NoneOrRelevance",e[e.LastUpdatedDate=1]="LastUpdatedDate",e[e.Title=2]="Title",e[e.PublisherName=3]="PublisherName",e[e.InstallCount=4]="InstallCount",e[e.PublishedDate=10]="PublishedDate",e[e.AverageRating=6]="AverageRating",e[e.WeightedRating=12]="WeightedRating"})(nk||(nk={}));var ok;(function(e){e[e.Default=0]="Default",e[e.Ascending=1]="Ascending",e[e.Descending=2]="Descending"})(ok||(ok={}));var ak;(function(e){e.Install="install",e.Uninstall="uninstall"})(ak||(ak={}));var ck;(function(e){e[e.None=1]="None",e[e.Install=2]="Install",e[e.Update=3]="Update",e[e.Migrate=4]="Migrate"})(ck||(ck={}));var LQ=V("extensionGalleryService"),lk;(function(e){e.Timeout="Timeout",e.Cancelled="Cancelled",e.Failed="Failed",e.DownloadFailedWriting="DownloadFailedWriting",e.Offline="Offline"})(lk||(lk={}));var uk;(function(e){e.Unsupported="Unsupported",e.Deprecated="Deprecated",e.Malicious="Malicious",e.Incompatible="Incompatible",e.IncompatibleApi="IncompatibleApi",e.IncompatibleTargetPlatform="IncompatibleTargetPlatform",e.ReleaseVersionNotFound="ReleaseVersionNotFound",e.Invalid="Invalid",e.Download="Download",e.DownloadSignature="DownloadSignature",e.DownloadFailedWriting="DownloadFailedWriting",e.UpdateMetadata="UpdateMetadata",e.Extract="Extract",e.Scanning="Scanning",e.ScanningExtension="ScanningExtension",e.ReadUninstalled="ReadUninstalled",e.UnsetUninstalled="UnsetUninstalled",e.Delete="Delete",e.Rename="Rename",e.IntializeDefaultProfile="IntializeDefaultProfile",e.AddToProfile="AddToProfile",e.InstalledExtensionNotFound="InstalledExtensionNotFound",e.PostInstall="PostInstall",e.CorruptZip="CorruptZip",e.IncompleteZip="IncompleteZip",e.PackageNotSigned="PackageNotSigned",e.SignatureVerificationInternal="SignatureVerificationInternal",e.SignatureVerificationFailed="SignatureVerificationFailed",e.NotAllowed="NotAllowed",e.Gallery="Gallery",e.Cancelled="Cancelled",e.Unknown="Unknown",e.Internal="Internal"})(uk||(uk={}));var hk;(function(e){e.Success="Success",e.RequiredArgumentMissing="RequiredArgumentMissing",e.InvalidArgument="InvalidArgument",e.PackageIsUnreadable="PackageIsUnreadable",e.UnhandledException="UnhandledException",e.SignatureManifestIsMissing="SignatureManifestIsMissing",e.SignatureManifestIsUnreadable="SignatureManifestIsUnreadable",e.SignatureIsMissing="SignatureIsMissing",e.SignatureIsUnreadable="SignatureIsUnreadable",e.CertificateIsUnreadable="CertificateIsUnreadable",e.SignatureArchiveIsUnreadable="SignatureArchiveIsUnreadable",e.FileAlreadyExists="FileAlreadyExists",e.SignatureArchiveIsInvalidZip="SignatureArchiveIsInvalidZip",e.SignatureArchiveHasSameSignatureFile="SignatureArchiveHasSameSignatureFile",e.PackageIntegrityCheckFailed="PackageIntegrityCheckFailed",e.SignatureIsInvalid="SignatureIsInvalid",e.SignatureManifestIsInvalid="SignatureManifestIsInvalid",e.SignatureIntegrityCheckFailed="SignatureIntegrityCheckFailed",e.EntryIsMissing="EntryIsMissing",e.EntryIsTampered="EntryIsTampered",e.Untrusted="Untrusted",e.CertificateRevoked="CertificateRevoked",e.SignatureIsNotValid="SignatureIsNotValid",e.UnknownError="UnknownError",e.PackageIsInvalidZip="PackageIsInvalidZip",e.SignatureArchiveHasTooManyEntries="SignatureArchiveHasTooManyEntries"})(hk||(hk={}));var NQ=V("extensionManagementService"),OQ=V("IGlobalExtensionEnablementService"),FQ=V("IExtensionTipsService"),MQ=Hm(1816,"Extensions"),UQ=Hm(1817,"Preferences"),bM=V("telemetryService"),_Q=V("customEndpointTelemetryService"),dk;(function(e){e[e.NONE=0]="NONE",e[e.CRASH=1]="CRASH",e[e.ERROR=2]="ERROR",e[e.USAGE=3]="USAGE"})(dk||(dk={}));var fk;(function(e){e.OFF="off",e.CRASH="crash",e.ERROR="error",e.ON="all"})(fk||(fk={}));var $w=class{constructor(e){this.value=e,this.isTrustedTelemetryValue=!0}},yM=class{constructor(){this.telemetryLevel=0,this.sessionId="someValue.sessionId",this.machineId="someValue.machineId",this.sqmId="someValue.sqmId",this.devDeviceId="someValue.devDeviceId",this.firstSessionDate="someValue.firstSessionDate",this.sendErrorTelemetry=!1}publicLog(){}publicLog2(){}publicLogError(){}publicLogError2(){}setExperimentProperty(){}},jQ=new yM,EM="extensionTelemetryLog",SM=new Set(["ssh-remote","dev-container","attached-container","wsl","tunnel","codespaces","amlext"]);function xM(e){if(!e)return"none";const t=hv(e);return SM.has(t)?t:"other"}function kM(e,t){if(!e||!e.includes("/")&&!e.includes("\\"))return e;let i=e;const r=[];for(const a of t)for(;;){const c=a.exec(e);if(!c)break;r.push([c.index,a.lastIndex])}const s=/^[\\\/]?(node_modules|node_modules\.asar)[\\\/]/,n=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-\._]+(\\\\|\\|\/))+[\w-\._]*/g;let o=0;for(i="";;){const a=n.exec(e);if(!a)break;const c=r.some(([l,u])=>a.index<u&&l<n.lastIndex);!s.test(a[0])&&!c&&(i+=e.substring(o,a.index)+"<REDACTED: user-file-path>",o=n.lastIndex)}return o<e.length&&(i+=e.substr(o)),i}function $M(e){if(!e)return e;const t=[{label:"Google API Key",regex:/AIza[A-Za-z0-9_\\\-]{35}/},{label:"Slack Token",regex:/xox[pbar]\-[A-Za-z0-9]/},{label:"GitHub Token",regex:/(gh[psuro]_[a-zA-Z0-9]{36}|github_pat_[a-zA-Z0-9]{22}_[a-zA-Z0-9]{59})/},{label:"Generic Secret",regex:/(key|token|sig|secret|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/i},{label:"CLI Credentials",regex:/((login|psexec|(certutil|psexec)\.exe).{1,50}(\s-u(ser(name)?)?\s+.{3,100})?\s-(admin|user|vm|root)?p(ass(word)?)?\s+["']?[^$\-\/\s]|(^|[\s\r\n\\])net(\.exe)?.{1,5}(user\s+|share\s+\/user:| user -? secrets ? set) \s + [^ $\s \/])/},{label:"Microsoft Entra ID",regex:/eyJ(?:0eXAiOiJKV1Qi|hbGci|[a-zA-Z0-9\-_]+\.[a-zA-Z0-9\-_]+\.)/},{label:"Email",regex:/@[a-zA-Z0-9-]+\.[a-zA-Z0-9-]+/}];for(const i of t)if(i.regex.test(e))return`<REDACTED: ${i.label}>`;return e}function pk(e,t){return ya(e,i=>{if(i instanceof $w||Object.hasOwnProperty.call(i,"isTrustedTelemetryValue"))return i.value;if(typeof i=="string"){let r=i.replaceAll("%20"," ");r=kM(r,t);for(const s of t)r=r.replace(s,"");return r=$M(r),r}})}var HQ=new Xe("pprice.better-merge"),CM=class{constructor(){this.a=new Map,this.b=new WeakMap}register(e,t){this.a.set(e,t)}readActivationEvents(e){return this.b.has(e)||this.b.set(e,this.c(e)),this.b.get(e)}createActivationEventsMap(e){const t=Object.create(null);for(const i of e){const r=this.readActivationEvents(i);r.length>0&&(t[Xe.toKey(i.identifier)]=r)}return t}c(e){if(typeof e.main>"u"&&typeof e.browser>"u")return[];const t=Array.isArray(e.activationEvents)?e.activationEvents.slice(0):[];for(let i=0;i<t.length;i++)t[i]==="onUri"&&(t[i]=`onUri:${Xe.toKey(e.identifier)}`);if(!e.contributes)return t;for(const i in e.contributes){const r=this.a.get(i);if(!r)continue;const s=e.contributes[i],n=Array.isArray(s)?s:[s];try{r(n,t)}catch(o){Et(o)}}return t}},IM=new CM,PM=Object.freeze({identifier:new Xe("nullExtensionDescription"),name:"Null Extension Description",version:"0.0.0",publisher:"vscode",engines:{vscode:""},extensionLocation:E.parse("void:location"),isBuiltin:!1,targetPlatform:"undefined",isUserBuiltin:!1,isUnderDevelopment:!1}),DM=V("extensionService"),gk=class{constructor(e){this.dependency=e}},mk;(function(e){e[e.EagerAutoStart=1]="EagerAutoStart",e[e.EagerManualStart=2]="EagerManualStart",e[e.Lazy=3]="Lazy"})(mk||(mk={}));function Yt(e,t){return!0}function A(e,t){if(!Yt(e,t))throw new Error(`Extension '${e.identifier.value}' CANNOT use API proposal: ${t}.
Its package.json#enabledApiProposals-property declares: ${e.enabledApiProposals?.join(", ")??"[]"} but NOT ${t}.
 The missing proposal MUST be added and you must start in extension development mode or use the following command line switch: --enable-proposed-api ${e.identifier.value}`)}var vk;(function(e){e[e.Normal=0]="Normal",e[e.Immediate=1]="Immediate"})(vk||(vk={}));var rg=class OI{static{this.NONE=new OI(!1,-1,-1,-1)}constructor(t,i,r,s){this.startup=t,this.codeLoadingTime=i,this.activateCallTime=r,this.activateResolvedTime=s}},wk=class{constructor(e){this.a=e,this.b=-1,this.c=-1,this.d=-1,this.f=-1,this.g=-1,this.h=-1}j(e,t){return e===-1||t===-1?-1:t-e}build(){return new rg(this.a,this.j(this.b,this.c),this.j(this.d,this.f),this.j(this.g,this.h))}codeLoadingStart(){this.b=Date.now()}codeLoadingStop(){this.c=Date.now()}activateCallStart(){this.d=Date.now()}activateCallStop(){this.f=Date.now()}activateResolveStart(){this.g=Date.now()}activateResolveStop(){this.h=Date.now()}},sg=class{constructor(e,t,i,r,s,n){this.activationFailed=e,this.activationFailedError=t,this.activationTimes=i,this.module=r,this.exports=s,this.disposable=n}},AM=class extends sg{constructor(e){super(!1,null,e,{activate:void 0,deactivate:void 0},void 0,X.None)}},RM=class extends sg{constructor(){super(!1,null,rg.NONE,{activate:void 0,deactivate:void 0},void 0,X.None)}},ng=class extends sg{constructor(e){super(!0,e,rg.NONE,{activate:void 0,deactivate:void 0},void 0,X.None)}},Cw=class{constructor(t,i,r,s){this.g=s,this.a=t,this.b=i,this.c=r,this.d=new Rs,this.f=Object.create(null)}dispose(){for(const[t,i]of this.d)i.dispose()}async waitForActivatingExtensions(){const t=[];for(const[i,r]of this.d)t.push(r.wait());await Promise.all(t)}isActivated(t){const i=this.d.get(t);return!!(i&&i.value)}getActivatedExtension(t){const i=this.d.get(t);if(!i||!i.value)throw new Error(`Extension '${t.value}' is not known or not activated`);return i.value}async activateByEvent(t,i){if(this.f[t])return;const r=this.a.getExtensionDescriptionsForActivationEvent(t);await this.h(r.map(s=>({id:s.identifier,reason:{startup:i,extensionId:s.identifier,activationEvent:t}}))),this.f[t]=!0}activateById(t,i){const r=this.a.getExtensionDescription(t);if(!r)throw new Error(`Extension '${t.value}' is not known`);return this.h([{id:r.identifier,reason:i}])}async h(t){const i=t.filter(r=>!this.isActivated(r.id)).map(r=>this.j(r));await Promise.all(i.map(r=>r.wait()))}j(t){if(this.d.has(t.id))return this.d.get(t.id);if(this.l(t.id))return this.k(t,null,[],null);const i=this.a.getExtensionDescription(t.id);if(!i){const n=new Error(`Cannot activate unknown extension '${t.id.value}'`),o=this.k(t,null,[],new ng(n));return this.c.onExtensionActivationError(t.id,n,new gk(t.id.value)),o}const r=[],s=typeof i.extensionDependencies>"u"?[]:i.extensionDependencies;for(const n of s){if(this.m(n))continue;const o=this.d.get(n);if(o){r.push(o);continue}if(this.l(n)){r.push(this.j({id:this.b.getExtensionDescription(n).identifier,reason:t.reason}));continue}const a=this.a.getExtensionDescription(n);if(a){if(!a.main&&!a.browser)continue;r.push(this.j({id:a.identifier,reason:t.reason}));continue}const c=i.displayName||i.identifier.value,l=new Error(`Cannot activate the '${c}' extension because it depends on unknown extension '${n}'`),u=this.k(t,i.displayName,[],new ng(l));return this.c.onExtensionActivationError(i.identifier,l,new gk(n)),u}return this.k(t,i.displayName,r,null)}k(t,i,r,s){const n=new Iw(t.id,i,t.reason,r,s,this.c,this.g);return this.d.set(t.id,n),n}l(t){return Vu.isHostExtension(t,this.a,this.b)}m(t){const i=this.b.getExtensionDescription(t);return i?!i.main&&!i.browser:!1}};Cw=__decorate([__param(3,Ce)],Cw);var Iw=class{get value(){return this.h}get friendlyName(){return this.d||this.c.value}constructor(t,i,r,s,n,o,a){this.c=t,this.d=i,this.f=r,this.g=s,this.h=n,this.j=o,this.k=a,this.a=new ur,this.b=!1,this.l()}dispose(){this.b=!0}wait(){return this.a.wait()}async l(){await this.m(),this.a.open()}async m(){if(!this.h){for(;this.g.length>0;){for(let t=0;t<this.g.length;t++){const i=this.g[t];if(i.value&&!i.value.activationFailed){this.g.splice(t,1),t--;continue}if(i.value&&i.value.activationFailed){const r=new Error(`Cannot activate the '${this.friendlyName}' extension because its dependency '${i.friendlyName}' failed to activate`);r.detail=i.value.activationFailedError,this.h=new ng(r),this.j.onExtensionActivationError(this.c,r,null);return}}this.g.length>0&&await Promise.race(this.g.map(t=>t.wait()))}await this.n()}}async n(){try{this.h=await this.j.actualActivateExtension(this.c,this.f)}catch(t){const i=new Error;if(t&&t.name&&(i.name=t.name),t&&t.message?i.message=`Activating extension '${this.c.value}' failed: ${t.message}.`:i.message=`Activating extension '${this.c.value}' failed: ${t}.`,t&&t.stack&&(i.stack=t.stack),this.h=new ng(i),this.b&&zr(t))return;this.j.onExtensionActivationError(this.c,i,null),this.k.error(`Activating extension ${this.c.value} failed due to an error:`),this.k.error(t)}}};Iw=__decorate([__param(6,Ce)],Iw);var bk=class{constructor(e,t){this.c=t,this.b=new I,this.onDidChangeStorage=this.b.event,this.a=e.getProxy(q.MainThreadStorage)}registerExtensionStorageKeysToSync(e,t){this.a.$registerExtensionStorageKeysToSync(e,t)}async initializeExtensionStorage(e,t,i){const r=await this.a.$initializeExtensionStorage(e,t);let s;return r&&(s=this.d(e,t,r)),s||i}setValue(e,t,i){return this.a.$setValue(e,t,i)}$acceptValue(e,t,i){const r=this.d(e,t,i);r&&this.b.fire({shared:e,key:t,value:r})}d(e,t,i){try{return JSON.parse(i)}catch(r){this.c.error(`[extHostStorage] unexpected error parsing storage contents (extensionId: ${t}, global: ${e}): ${r}`)}}},Pw=V("IExtHostStorage"),yk=class{constructor(e,t,i){this.h=new Map,this.a=e,this.b=t,this.c=i,this.d=this.c.initializeExtensionStorage(this.b,this.a,Object.create(null)).then(r=>(this.f=r,this)),this.g=this.c.onDidChangeStorage(r=>{r.shared===this.b&&r.key===this.a&&(this.f=r.value)}),this.i=new Es(()=>{const r=this.h;this.h=new Map,(async()=>{try{await this.c.setValue(this.b,this.a,this.f);for(const s of r.values())s.complete()}catch(s){for(const n of r.values())n.error(s)}})()},0)}keys(){return Object.entries(this.f??{}).filter(([,e])=>e!==void 0).map(([e])=>e)}get whenReady(){return this.d}get(e,t){let i=this.f[e];return typeof i>"u"&&(i=t),i}update(e,t){this.f[e]=t;const i=this.h.get(e);if(i!==void 0)return i.p;const r=new Ss;return this.h.set(e,r),this.i.isScheduled()||this.i.schedule(),r.p}dispose(){this.g.dispose()}},TM=class extends yk{setKeysForSync(e){this.c.registerExtensionStorageKeysToSync({id:this.a,version:this.j.version},e)}constructor(e,t){super(e.identifier.value,!0,t),this.j=e}},as,Dw=as=class{constructor(t,i){this.b=new Map,this.c=new uE,this.a=t.getProxy(q.MainThreadFileSystem);const r=this;this.value=Object.freeze({async stat(s){try{let n;const o=r.b.get(s.scheme);return o?(await r.a.$ensureActivation(s.scheme),n=await o.impl.stat(s)):n=await r.a.$stat(s),{type:n.type,ctime:n.ctime,mtime:n.mtime,size:n.size,permissions:n.permissions===bn.Readonly?1:void 0}}catch(n){as.e(n)}},async readDirectory(s){try{const n=r.b.get(s.scheme);return n?(await r.a.$ensureActivation(s.scheme),(await n.impl.readDirectory(s)).slice()):await r.a.$readdir(s)}catch(n){return as.e(n)}},async createDirectory(s){try{const n=r.b.get(s.scheme);return n&&!n.isReadonly?(await r.a.$ensureActivation(s.scheme),await r.d(n.impl,n.extUri,s)):await r.a.$mkdir(s)}catch(n){return as.e(n)}},async readFile(s){try{const n=r.b.get(s.scheme);return n?(await r.a.$ensureActivation(s.scheme),(await n.impl.readFile(s)).slice()):(await r.a.$readFile(s)).buffer}catch(n){return as.e(n)}},async writeFile(s,n){try{const o=r.b.get(s.scheme);return o&&!o.isReadonly?(await r.a.$ensureActivation(s.scheme),await r.d(o.impl,o.extUri,o.extUri.dirname(s)),await r.c.queueFor(s,()=>Promise.resolve(o.impl.writeFile(s,n,{create:!0,overwrite:!0})))):await r.a.$writeFile(s,J.wrap(n))}catch(o){return as.e(o)}},async delete(s,n){try{const o=r.b.get(s.scheme);return o&&!o.isReadonly&&!n?.useTrash?(await r.a.$ensureActivation(s.scheme),await o.impl.delete(s,{recursive:!1,...n})):await r.a.$delete(s,{recursive:!1,useTrash:!1,atomic:!1,...n})}catch(o){return as.e(o)}},async rename(s,n,o){try{return await r.a.$rename(s,n,{overwrite:!1,...o})}catch(a){return as.e(a)}},async copy(s,n,o){try{return await r.a.$copy(s,n,{overwrite:!1,...o})}catch(a){return as.e(a)}},isWritableFileSystem(s){const n=i.getCapabilities(s);if(typeof n=="number")return!(n&2048)}})}async d(t,i,r){const s=[];for(;!i.isEqual(r,i.dirname(r));)try{if(!((await t.stat(r)).type&zi.Directory))throw Wt.FileExists(`Unable to create folder '${r.scheme===z.file?r.fsPath:r.toString(!0)}' that already exists but is not a directory`);break}catch(n){if(Md(n)!==se.FileNotFound)throw n;s.push(i.basename(r)),r=i.dirname(r)}for(let n=s.length-1;n>=0;n--){r=i.joinPath(r,s[n]);try{await t.createDirectory(r)}catch(o){if(Md(o)!==se.FileExists)throw o}}}static e(t){if(t instanceof Wt)throw t;if(t instanceof Fd)switch(t.code){case se.FileExists:throw Wt.FileExists(t.message);case se.FileNotFound:throw Wt.FileNotFound(t.message);case se.FileNotADirectory:throw Wt.FileNotADirectory(t.message);case se.FileIsADirectory:throw Wt.FileIsADirectory(t.message);case se.NoPermissions:throw Wt.NoPermissions(t.message);case se.Unavailable:throw Wt.Unavailable(t.message);default:throw new Wt(t.message,t.name)}if(!(t instanceof Error))throw new Wt(String(t));if(t.name==="ENOPRO"||t.message.includes("ENOPRO"))throw Wt.Unavailable(t.message);switch(t.name){case se.FileExists:throw Wt.FileExists(t.message);case se.FileNotFound:throw Wt.FileNotFound(t.message);case se.FileNotADirectory:throw Wt.FileNotADirectory(t.message);case se.FileIsADirectory:throw Wt.FileIsADirectory(t.message);case se.NoPermissions:throw Wt.NoPermissions(t.message);case se.Unavailable:throw Wt.Unavailable(t.message);default:throw new Wt(t.message,t.name)}}addFileSystemProvider(t,i,r){return this.b.set(t,{impl:i,extUri:r?.isCaseSensitive?Ve:eR,isReadonly:!!r?.isReadonly}),ee(()=>this.b.delete(t))}getFileSystemProviderExtUri(t){return this.b.get(t)?.extUri??Ve}};Dw=as=__decorate([__param(0,Ie),__param(1,$a)],Dw);var qu=V("IExtHostConsumerFileSystem"),Aw=V("IExtensionStoragePaths"),Rw=class{constructor(t,i,r){this.d=i,this.f=r,this.a=t.workspace??void 0,this.b=t.environment,this.whenReady=this.h().then(s=>this.c=s)}async g(t){return E.joinPath(this.b.workspaceStorageHome,t)}async h(){if(!this.a)return Promise.resolve(void 0);const t=this.a.id,i=await this.g(t);try{return await this.f.value.stat(i),this.d.trace("[ExtHostStorage] storage dir already exists",i),i}catch{}try{return this.d.trace("[ExtHostStorage] creating dir and metadata-file",i),await this.f.value.createDirectory(i),await this.f.value.writeFile(E.joinPath(i,"meta.json"),new TextEncoder().encode(JSON.stringify({id:this.a.id,configuration:E.revive(this.a.configuration)?.toString(),name:this.a.name},void 0,2))),i}catch(r){this.d.error("[ExtHostStorage]",r);return}}workspaceValue(t){if(this.c)return E.joinPath(this.c,t.identifier.value)}globalValue(t){return E.joinPath(this.b.globalStorageHome,t.identifier.value.toLowerCase())}onWillDeactivateAll(){}};Rw=__decorate([__param(0,Qt),__param(1,Ce),__param(2,qu)],Rw);var LM=V("tunnelService"),qQ=V("sharedTunnelsService"),mr;(function(e){e.Http="http",e.Https="https"})(mr||(mr={}));var cs;(function(e){e.ConstantPrivate="constantPrivate",e.Private="private",e.Public="public"})(cs||(cs={}));function NM(e){return!!e.forwardPort}var Hn;(function(e){e[e.Notify=1]="Notify",e[e.OpenBrowser=2]="OpenBrowser",e[e.OpenPreview=3]="OpenPreview",e[e.Silent=4]="Silent",e[e.Ignore=5]="Ignore",e[e.OpenBrowserOnce=6]="OpenBrowserOnce"})(Hn||(Hn={}));function OM(e){if(e.scheme!=="http"&&e.scheme!=="https")return;const t=/^(localhost|127\.0\.0\.1|0\.0\.0\.0):(\d+)$/.exec(e.authority);if(t)return{address:t[1],port:+t[2]}}var Gu=["localhost","127.0.0.1","0:0:0:0:0:0:0:1","::1"];function Wo(e){return Gu.indexOf(e)>=0}var og=["0.0.0.0","0:0:0:0:0:0:0:0","::"];function Bs(e){return og.indexOf(e)>=0}function FM(e,t,i,r){if(i===1)return!1;if(i===2&&Bs(t)){const s=/(\d+)\.(\d+)\.(\d+)/g.exec(r);if(s?.length===4&&parseInt(s[1])>=18)return!1}return e<1024}var MM=class{constructor(e,t,i){this.remoteAddress=e,this.localAddress=t,this.b=i,this.a=new I,this.onDidDispose=this.a.event}dispose(){return this.a.fire(),this.b()}},Tw=class extends X{constructor(t,i){super(),this.r=t,this.s=i,this.a=new I,this.onTunnelOpened=this.a.event,this.b=new I,this.onTunnelClosed=this.b.event,this.c=new I,this.onAddedTunnelProvider=this.c.event,this.f=new Map,this.h=!1,this.j=!0,this.m=[],this.n=new Set}get hasTunnelProvider(){return!!this.g}get t(){const t=this.s.getValue("remote.localPortHost");return!t||t==="localhost"?"127.0.0.1":"0.0.0.0"}setTunnelProvider(t){return this.g=t,t?(this.c.fire(),{dispose:()=>{this.g=void 0,this.h=!1,this.m=[]}}):(this.h=!1,this.m=[],this.c.fire(),{dispose:()=>{}})}setTunnelFeatures(t){this.h=t.elevation,this.m=t.privacyOptions,this.j=t.protocol}get canChangeProtocol(){return this.j}get canElevate(){return this.h}get canChangePrivacy(){return this.m.length>0}get privacyOptions(){return this.m}get tunnels(){return this.u()}async u(){const t=[],i=Array.from(this.f.values());for(const r of i){const s=Array.from(r.values());for(const n of s){const o=await n.value;o&&typeof o!="string"&&t.push(o)}}return t}async dispose(){super.dispose();for(const t of this.f.values()){for(const{value:i}of t.values())await i.then(r=>typeof r!="string"?r?.dispose():void 0);t.clear()}this.f.clear()}setEnvironmentTunnel(t,i,r,s,n){this.z(t,i,Promise.resolve({tunnelRemoteHost:t,tunnelRemotePort:i,localAddress:r,privacy:s,protocol:n,dispose:()=>Promise.resolve()}))}async getExistingTunnel(t,i){(Bs(t)||Wo(t))&&(t=Gu[0]);const r=this.D(t,i);if(r)return++r.refcount,r.value}openTunnel(t,i,r,s,n,o=!1,a,c){this.r.trace(`ForwardedPorts: (TunnelService) openTunnel request for ${i}:${r} on local port ${n}.`);const l=this.g??t;if(!l)return;if(i||(i="localhost"),s||(s=this.t),this.g&&this.n.has(r)){this.r.debug("ForwardedPorts: (TunnelService) Another call to create a tunnel with the same address has occurred before the last one completed. This call will be ignored.");return}const u=this.F(l,i,r,s,n,o,a,c);return u?u.then(h=>{if(h){if(typeof h=="string")return this.r.trace("ForwardedPorts: (TunnelService) The tunnel provider returned an error when creating the tunnel."),this.C(i,r),h}else{this.r.trace("ForwardedPorts: (TunnelService) New tunnel is undefined."),this.C(i,r);return}this.r.trace("ForwardedPorts: (TunnelService) New tunnel established.");const d=this.w(h);return(h.tunnelRemoteHost!==i||h.tunnelRemotePort!==r)&&this.r.warn("ForwardedPorts: (TunnelService) Created tunnel does not match requirements of requested tunnel. Host or port mismatch."),a&&h.privacy!==a&&this.r.warn("ForwardedPorts: (TunnelService) Created tunnel does not match requirements of requested tunnel. Privacy mismatch."),this.a.fire(d),d}):(this.r.trace("ForwardedPorts: (TunnelService) Tunnel was not created."),u)}w(t){return{tunnelRemotePort:t.tunnelRemotePort,tunnelRemoteHost:t.tunnelRemoteHost,tunnelLocalPort:t.tunnelLocalPort,localAddress:t.localAddress,privacy:t.privacy,protocol:t.protocol,dispose:async()=>{this.r.trace(`ForwardedPorts: (TunnelService) dispose request for ${t.tunnelRemoteHost}:${t.tunnelRemotePort} `);const i=this.f.get(t.tunnelRemoteHost);if(i){const r=i.get(t.tunnelRemotePort);r&&(r.refcount--,await this.y(t.tunnelRemoteHost,t.tunnelRemotePort,r))}}}}async y(t,i,r){if(r.refcount<=0){this.r.trace(`ForwardedPorts: (TunnelService) Tunnel is being disposed ${t}:${i}.`);const s=r.value.then(async n=>{n&&typeof n!="string"&&(await n.dispose(!0),this.b.fire({host:n.tunnelRemoteHost,port:n.tunnelRemotePort}))});return this.f.has(t)&&this.f.get(t).delete(i),s}}async closeTunnel(t,i){this.r.trace(`ForwardedPorts: (TunnelService) close request for ${t}:${i} `);const r=this.f.get(t);if(r&&r.has(i)){const s=r.get(i);s.refcount=0,await this.y(t,i,s)}}z(t,i,r){this.f.has(t)||this.f.set(t,new Map),this.f.get(t).set(i,{refcount:1,value:r})}async C(t,i){const r=this.f.get(t);if(r){const s=r.get(i),n=s?await s.value:void 0;(!n||typeof n=="string")&&r.delete(i),r.size===0&&this.f.delete(t)}}D(t,i){const r=[t];Wo(t)?(r.push(...Gu),r.push(...og)):Bs(t)&&r.push(...og);const s=r.map(n=>this.f.get(n));for(const n of s){const o=n?.get(i);if(o)return o}}canTunnel(t){return!!OM(t)}G(t,i,r,s,n,o,a){this.r.trace(`ForwardedPorts: (TunnelService) Creating tunnel with provider ${i}:${r} on local port ${s}.`);const c=r;this.n.add(c);const l=s===void 0?r:s,u={elevationRequired:n?this.isPortPrivileged(l):!1},h={remoteAddress:{host:i,port:r},localAddressPort:s,privacy:o,public:o?o!==cs.Private:void 0,protocol:a},d=t.forwardPort(h,u);return d?(this.z(i,r,d),d.finally(()=>{this.r.trace("ForwardedPorts: (TunnelService) Tunnel created by provider."),this.n.delete(c)})):this.n.delete(c),d}};Tw=__decorate([__param(0,Ce),__param(1,Sn)],Tw);var UM=class extends MM{},Lw;(function(e){function t(r){return{remoteAddress:r.remoteAddress,localAddress:r.localAddress,public:!!r.public,privacy:r.privacy??(r.public?cs.Public:cs.Private),protocol:r.protocol}}e.fromApiTunnel=t;function i(r){return{remoteAddress:{host:r.tunnelRemoteHost,port:r.tunnelRemotePort},localAddress:r.localAddress,public:r.privacy!==cs.ConstantPrivate&&r.privacy!==cs.ConstantPrivate,privacy:r.privacy,protocol:r.protocol}}e.fromServiceTunnel=i})(Lw||(Lw={}));var ag=V("IExtHostTunnelService"),cg=class extends X{constructor(t,i,r){super(),this.s=r,this.f=()=>Promise.resolve(!0),this.g=new Map,this.h=new I,this.onDidChangeTunnels=this.h.event,this.n=0,this.r=new Map,this.a=t.getProxy(q.MainThreadTunnelService)}async openTunnel(t,i){this.s.trace(`ForwardedPorts: (ExtHostTunnelService) ${t.identifier.value} called openTunnel API for ${i.remoteAddress.host}:${i.remoteAddress.port}.`);const r=await this.a.$openTunnel(i,t.displayName);if(r){const s=new UM(r.remoteAddress,r.localAddress,()=>this.a.$closeTunnel(r.remoteAddress));return this.B(s),s}}async getTunnels(){return this.a.$getTunnels()}u(){return this.n++}registerPortsAttributesProvider(t,i){t.portRange===void 0&&t.commandPattern===void 0&&this.s.error("PortAttributesProvider must specify either a portRange or a commandPattern");const r=this.u();return this.r.set(r,{selector:t,provider:i}),this.a.$registerPortsAttributesProvider(t,r),new Oe(()=>{this.r.delete(r),this.a.$unregisterPortsAttributesProvider(r)})}async $providePortAttributes(t,i,r,s,n){const o=[];for(const c of t){const l=this.r.get(c);if(!l)return[];o.push(...await Promise.all(i.map(async u=>{let h;try{h=await l.provider.providePortAttributes({port:u,pid:r,commandLine:s},n)}catch{h=await l.provider.providePortAttributes(u,r,s,n)}return{providedAttributes:h,port:u}})))}const a=o.filter(c=>!!c.providedAttributes);return a.length>0?a.map(c=>({autoForwardAction:c.providedAttributes.autoForwardAction,port:c.port})):[]}async $registerCandidateFinder(t){}registerTunnelProvider(t,i){if(this.b)throw new Error("A tunnel provider has already been registered. Only the first tunnel provider to be registered will be used.");this.b=async(s,n)=>await t.provideTunnel(s,n,Ge.None)??void 0;const r=i.tunnelFeatures?{elevation:!!i.tunnelFeatures?.elevation,privacyOptions:i.tunnelFeatures?.privacyOptions,protocol:i.tunnelFeatures.protocol===void 0?!0:i.tunnelFeatures.protocol}:void 0;return this.a.$setTunnelProvider(r,!0),Promise.resolve(ee(()=>{this.b=void 0,this.a.$setTunnelProvider(void 0,!1)}))}async setTunnelFactory(t,i){if(t){t.candidatePortSource!==void 0&&this.a.$setCandidatePortSource(t.candidatePortSource),t.showCandidatePort&&(this.f=t.showCandidatePort,this.a.$setCandidateFilter());const r=t.tunnelFactory??(i?this.w(i):void 0);if(r){this.b=r;let s=t.tunnelFeatures?.privacyOptions??[];t.tunnelFeatures?.public&&s.length===0&&(s=[{id:"private",label:p(3023,null),themeIcon:"lock"},{id:"public",label:p(3024,null),themeIcon:"eye"}]);const n=t.tunnelFeatures?{elevation:!!t.tunnelFeatures?.elevation,public:!!t.tunnelFeatures?.public,privacyOptions:s,protocol:!0}:void 0;this.a.$setTunnelProvider(n,!!t.tunnelFactory)}}else this.b=void 0;return ee(()=>{this.b=void 0})}w(t){}async $closeTunnel(t,i){if(this.g.has(t.host)){const r=this.g.get(t.host);r.has(t.port)&&(i&&r.get(t.port).disposeListener.dispose(),await r.get(t.port).tunnel.dispose(),r.delete(t.port))}}async $onDidTunnelsChange(){this.h.fire()}async $forwardPort(t,i){if(this.b)try{this.s.trace("ForwardedPorts: (ExtHostTunnelService) Getting tunnel from provider.");const r=this.b(t,i);if(this.s.trace("ForwardedPorts: (ExtHostTunnelService) Got tunnel promise from provider."),r!==void 0){const s=await r;if(this.s.trace("ForwardedPorts: (ExtHostTunnelService) Successfully awaited tunnel from provider."),s===void 0){this.s.error("ForwardedPorts: (ExtHostTunnelService) Resolved tunnel is undefined");return}this.g.has(t.remoteAddress.host)||this.g.set(t.remoteAddress.host,new Map);const n=this.B(s.onDidDispose(()=>(this.s.trace("ForwardedPorts: (ExtHostTunnelService) Extension fired tunnel's onDidDispose."),this.a.$closeTunnel(s.remoteAddress))));return this.g.get(t.remoteAddress.host).set(t.remoteAddress.port,{tunnel:s,disposeListener:n}),Lw.fromApiTunnel(s)}else this.s.trace("ForwardedPorts: (ExtHostTunnelService) Tunnel is undefined")}catch(r){if(this.s.trace("ForwardedPorts: (ExtHostTunnelService) tunnel provider error"),r instanceof Error)return r.message}}async $applyCandidateFilter(t){const i=await Promise.all(t.map(s=>this.f(s.host,s.port,s.detail??""))),r=t.filter((s,n)=>i[n]);return this.s.trace(`ForwardedPorts: (ExtHostTunnelService) filtered from ${t.map(s=>s.port).join(", ")} to ${r.map(s=>s.port).join(", ")}`),r}};cg=__decorate([__param(0,Ie),__param(1,Qt),__param(2,Ce)],cg);function _M(e){return[...e.entries()]}function jM(e){return e?[...e.entries()]:[]}var HM=class{constructor(e){this.b=e,this.a=new Map}dispose(){for(const e of this.a.values())e.dispose()}startBuffering(e,t,i=5){const r=t(s=>{const n=typeof s=="string"?s:s.data;let o=this.a.get(e);if(o){o.data.push(n);return}const a=setTimeout(()=>this.flushBuffer(e),i);o={data:[n],timeoutId:a,dispose:()=>{clearTimeout(a),this.flushBuffer(e),r.dispose()}},this.a.set(e,o)});return r}stopBuffering(e){this.a.get(e)?.dispose()}flushBuffer(e){const t=this.a.get(e);t&&(this.a.delete(e),this.b(e,t.data.join("")))}},zo=(e,t,i,r)=>{let s=t;return{enumerable:!0,configurable:!1,get(){return s},set(n){if(!i(s,n)){const o=s;s=n,e.listener?.(r(n,o))}}}},Ec=(e,t)=>e===t,Bn={range:(e,t)=>e===t?!0:!e||!t?!1:e.isEqual(t),label:Ec,description:Ec,sortText:Ec,busy:Ec,error:Ec,canResolveChildren:Ec,tags:(e,t)=>!(e.length!==t.length||e.some(i=>!t.find(r=>i.id===r.id)))},Sc=e=>t=>({op:4,update:e(t)}),BM=(e,t)=>({range:(()=>{let i;const r=Sc(s=>({range:et.lift(O.from(s))}));return{enumerable:!0,configurable:!1,get(){return i},set(s){e.listener?.({op:6}),Bn.range(i,s)||(i=s,e.listener?.(r(s)))}}})(),label:zo(e,t,Bn.label,Sc(i=>({label:i}))),description:zo(e,void 0,Bn.description,Sc(i=>({description:i}))),sortText:zo(e,void 0,Bn.sortText,Sc(i=>({sortText:i}))),canResolveChildren:zo(e,!1,Bn.canResolveChildren,i=>({op:2,state:i})),busy:zo(e,!1,Bn.busy,Sc(i=>({busy:i}))),error:zo(e,void 0,Bn.error,Sc(i=>({error:ke.fromStrict(i)||null}))),tags:zo(e,[],Bn.tags,(i,r)=>({op:1,new:i.map(Or.from),old:r.map(Or.from)}))}),WM=e=>{const t=Ne.fromString(e.extId),i=new Ju(t.controllerId,t.localId,e.label,E.revive(e.uri)||void 0);return i.range=O.to(e.range||void 0),i.description=e.description||void 0,i.sortText=e.sortText||void 0,i.tags=e.tags.map(r=>Or.to({id:F9(r).tagId})),i},Ek=e=>{let t;for(const i of e.tests){const r=WM(i.item);vf(r).parent=t,t=r}return t},Ju=class FI{constructor(t,i,r,s){if(i.includes("\0"))throw new Error(`Test IDs may not include the ${JSON.stringify(i)} symbol`);const n=kF(this,t);Object.defineProperties(this,{id:{value:i,enumerable:!0,writable:!1},uri:{value:s,enumerable:!0,writable:!1},parent:{enumerable:!1,get(){return n.parent instanceof Nw?void 0:n.parent}},children:{value:xF(n,vf,FI),enumerable:!0,writable:!1},...BM(n,r)})}},Nw=class extends Ju{constructor(e,t){super(e,e,t,void 0),this._isRoot=!0}},zM=class extends yF{constructor(e,t,i){super({controllerId:e,getDocumentVersion:r=>r&&i.getDocument(r)?.version,getApiFor:vf,getChildren:r=>r.children,root:new Nw(e,t),toITestItem:Fn.from})}},Qu;(function(e){e[e.Desktop=1]="Desktop",e[e.Web=2]="Web"})(Qu||(Qu={}));var Sk;(function(e){e[e.VersionMismatch=55]="VersionMismatch",e[e.UnexpectedError=81]="UnexpectedError"})(Sk||(Sk={}));var xk;(function(e){e[e.Initialized=0]="Initialized",e[e.Ready=1]="Ready",e[e.Terminate=2]="Terminate"})(xk||(xk={}));function kk(e){const t=J.alloc(1);switch(e){case 0:t.writeUInt8(1,0);break;case 1:t.writeUInt8(2,0);break;case 2:t.writeUInt8(3,0);break}return t}function VM(e,t){if(e.byteLength!==1)return!1;switch(e.readUInt8(0)){case 1:return t===0;case 2:return t===1;case 3:return t===2;default:return!1}}var $k;(function(e){e.Start="START_NATIVE_LOG",e.End="END_NATIVE_LOG"})($k||($k={}));var Ow=class extends X{constructor(t,i){super(),this.s=t,this.t=i,this.a=this.B(new I),this.onDidChangeTelemetryEnabled=this.a.event,this.b=this.B(new I),this.onDidChangeTelemetryConfiguration=this.b.event,this.c={usage:!0,error:!0},this.f=0,this.g=!1,this.j=!1,this.r=new Map,this.m=E.revive(this.s.environment.extensionTelemetryLogResource),this.j=this.s.environment.isExtensionTelemetryLoggingOnly,this.n=i.createLogger(this.m,{id:EM,name:p(3020,null,this.j?" (Not Sent)":""),hidden:!0}),this.B(this.n),this.B(i.onDidChangeLogLevel(r=>{ZT(r)&&this.u()})),this.n.info("Below are logs for extension telemetry events sent to the telemetry output channel API once the log level is set to trace."),this.n.info("===========================================================")}u(){this.t.setVisibility(this.m,this.g&&this.t.getLogLevel()===de.Trace)}getTelemetryConfiguration(){return this.f===3}getTelemetryDetails(){return{isCrashEnabled:this.f>=1,isErrorsEnabled:this.c.error?this.f>=2:!1,isUsageEnabled:this.c.usage?this.f>=3:!1}}instantiateLogger(t,i,r){const s=this.getTelemetryDetails(),n=new Ck(i,r,t,this.n,this.j,this.getBuiltInCommonProperties(t),{isUsageEnabled:s.isUsageEnabled,isErrorsEnabled:s.isErrorsEnabled}),o=this.r.get(t.identifier.value)??[];return this.r.set(t.identifier.value,[...o,n]),n.apiTelemetryLogger}$initializeTelemetryLevel(t,i,r){this.f=t,this.g=i,this.c=r??{usage:!0,error:!0},this.u()}getBuiltInCommonProperties(t){const i=Object.create(null);switch(i["common.extname"]=`${t.publisher}.${t.name}`,i["common.extversion"]=t.version,i["common.vscodemachineid"]=this.s.telemetryInfo.machineId,i["common.vscodesessionid"]=this.s.telemetryInfo.sessionId,i["common.sqmid"]=this.s.telemetryInfo.sqmId,i["common.devDeviceId"]=this.s.telemetryInfo.devDeviceId,i["common.vscodeversion"]=this.s.version,i["common.isnewappinstall"]=Ik(this.s.telemetryInfo.firstSessionDate),i["common.product"]=this.s.environment.appHost,this.s.uiKind){case Qu.Web:i["common.uikind"]="web";break;case Qu.Desktop:i["common.uikind"]="desktop";break;default:i["common.uikind"]="unknown"}return i["common.remotename"]=hv(xM(this.s.remote.authority)),i}$onDidChangeTelemetryLevel(t){this.h=this.getTelemetryConfiguration(),this.f=t;const i=this.getTelemetryDetails();this.r.forEach((r,s)=>{const n=r.filter(o=>!o.isDisposed);n.length===0?this.r.delete(s):this.r.set(s,n)}),this.r.forEach(r=>{for(const s of r)s.updateTelemetryEnablements(i.isUsageEnabled,i.isErrorsEnabled)}),this.h!==this.getTelemetryConfiguration()&&this.a.fire(this.getTelemetryConfiguration()),this.b.fire(this.getTelemetryDetails()),this.u()}onExtensionError(t,i){const s=this.r.get(t.value)?.filter(o=>!o.isDisposed);if(!s)return this.r.delete(t.value),!1;let n=!1;for(const o of s)o.ignoreUnhandledExtHostErrors||(o.logError(i),n=!0);return n}};Ow=__decorate([__param(0,Qt),__param(1,xa)],Ow);var Ck=class{static validateSender(e){if(typeof e!="object")throw new TypeError("TelemetrySender argument is invalid");if(typeof e.sendEventData!="function")throw new TypeError("TelemetrySender.sendEventData must be a function");if(typeof e.sendErrorData!="function")throw new TypeError("TelemetrySender.sendErrorData must be a function");if(typeof e.flush<"u"&&typeof e.flush!="function")throw new TypeError("TelemetrySender.flush must be a function or undefined")}constructor(e,t,i,r,s,n,o){this.g=i,this.h=r,this.i=s,this.j=n,this.a=new I,this.ignoreUnhandledExtHostErrors=t?.ignoreUnhandledErrors??!1,this.b=t?.ignoreBuiltInCommonProperties??!1,this.c=t?.additionalCommonProperties,this.f=e,this.d={isUsageEnabled:o.isUsageEnabled,isErrorsEnabled:o.isErrorsEnabled}}updateTelemetryEnablements(e,t){this.e&&(this.d={isUsageEnabled:e,isErrorsEnabled:t},this.a.fire(this.e))}mixInCommonPropsAndCleanData(e){let t="properties"in e?e.properties??{}:e;return t=pk(t,[]),this.c&&(t=xs(t,this.c)),this.b||(t=xs(t,this.j)),"properties"in e?e.properties=t:e=t,e}k(e,t){this.f&&(this.g.publisher==="vscode"?e=this.g.name+"/"+e:e=this.g.identifier.value+"/"+e,t=this.mixInCommonPropsAndCleanData(t||{}),this.i||this.f?.sendEventData(e,t),this.h.trace(e,t))}logUsage(e,t){this.d.isUsageEnabled&&this.k(e,t)}logError(e,t){if(!(!this.d.isErrorsEnabled||!this.f))if(typeof e=="string")this.k(e,t);else{const i={name:e.name,message:e.message,stack:e.stack,cause:e.cause},r=pk(i,[]),s=new Error(r.message,{cause:r.cause});s.stack=r.stack,s.name=r.name,t=this.mixInCommonPropsAndCleanData(t||{}),this.i||this.f.sendErrorData(s,t),this.h.trace("exception",t)}}get apiTelemetryLogger(){if(!this.e){const e=this,t={logUsage:e.logUsage.bind(e),get isUsageEnabled(){return e.d.isUsageEnabled},get isErrorsEnabled(){return e.d.isErrorsEnabled},logError:e.logError.bind(e),dispose:e.dispose.bind(e),onDidChangeEnableStates:e.a.event.bind(e)};this.e=Object.freeze(t)}return this.e}get isDisposed(){return!this.f}dispose(){if(this.f?.flush){let e=this.f;this.f=void 0,Promise.resolve(e.flush()).then(e=void 0),this.e=void 0}else this.f=void 0}};function Ik(e){const t=Date.now()-new Date(e).getTime();return isNaN(t)?!1:t<1e3*60*60*24}var lg=V("IExtHostTelemetry"),Fw=class{#e;#t;#i;constructor(t,i,r){this.b=new Map,this.c=new Map,this.#e=t.getProxy(q.MainThreadCommands),this.d=i,this.#i=r,this.#t=t.getProxy(q.MainThreadTelemetry),this.converter=new qM(this,s=>{const n=this.c.get(s);return n?.result===ge.Void?n:void 0},i),this.f=[{processArgument(s){return oi(s)}},{processArgument(s){return ya(s,function(n){if(et.isIRange(n))return O.to(n);if(er.isIPosition(n))return Fe.to(n);if(et.isIRange(n.range)&&E.isUri(n.uri))return Li.to(n);if(n instanceof J)return n.buffer.buffer;if(!Array.isArray(n))return n})}}]}registerArgumentProcessor(t){this.f.push(t)}registerApiCommand(t){const i=this.registerCommand(!1,t.id,async(...r)=>{const s=t.args.map((o,a)=>{if(!o.validate(r[a]))throw new Error(`Invalid argument '${o.name}' when running '${t.id}', received: ${typeof r[a]=="object"?JSON.stringify(r[a],null,"	"):r[a]} `);return o.convert(r[a])}),n=await this.executeCommand(t.internalId,...s);return t.result.convert(n,r,this.converter)},void 0,{description:t.description,args:t.args,returns:t.result.description});return this.c.set(t.id,t),new Oe(()=>{i.dispose(),this.c.delete(t.id)})}registerCommand(t,i,r,s,n,o){if(this.d.trace("ExtHostCommands#registerCommand",i),!i.trim().length)throw new Error("invalid id");if(this.b.has(i))throw new Error(`command '${i}' already exists`);return this.b.set(i,{callback:r,thisArg:s,metadata:n,extension:o}),t&&this.#e.$registerCommand(i),new Oe(()=>{this.b.delete(i)&&t&&this.#e.$unregisterCommand(i)})}executeCommand(t,...i){return this.d.trace("ExtHostCommands#executeCommand",t),this.g(t,i,!0)}async g(t,i,r){if(this.b.has(t))return this.#e.$fireCommandActivationEvent(t),this.h(t,i,!1);{let s=!1;const n=ya(i,function(o){if(o instanceof Pe)return Fe.from(o);if(o instanceof Se)return O.from(o);if(o instanceof tr)return Li.from(o);if(Os.isNotebookRange(o))return os.from(o);if(o instanceof ArrayBuffer)return s=!0,J.wrap(new Uint8Array(o));if(o instanceof Uint8Array)return s=!0,J.wrap(o);if(o instanceof J)return s=!0,o;if(!Array.isArray(o))return o});try{const o=await this.#e.$executeCommand(t,s?new Zi(n):n,r);return oi(o)}catch(o){if(o instanceof Error&&o.message==="$executeCommand:retry")return this.g(t,i,!1);throw o}}}async h(t,i,r){const s=this.b.get(t);if(!s)throw new Error("Unknown command");const{callback:n,thisArg:o,metadata:a}=s;if(a?.args)for(let l=0;l<a.args.length;l++)try{RA(i[l],a.args[l].constraint)}catch{throw new Error(`Running the contributed command: '${t}' failed. Illegal argument '${a.args[l].name}' - ${a.args[l].description}`)}const c=ri.create();try{return await n.apply(o,i)}catch(l){if(t===this.converter.delegatingCommandId){const u=this.converter.getActualCommand(...i);u&&(t=u.command)}if(this.d.error(l,t,s.extension?.identifier),!r)throw l;if(s.extension?.identifier){const u=this.#i.onExtensionError(s.extension.identifier,l);this.d.trace("forwarded error to extension?",u,s.extension?.identifier)}throw new class extends Error{constructor(){super(Ei(l)),this.id=t,this.source=s.extension?.displayName??s.extension?.name}}}finally{this.j(s,t,c.elapsed())}}j(t,i,r){t.extension&&this.#t.$publicLog2("Extension:ActionExecuted",{extensionId:t.extension.identifier.value,id:new $w(i),duration:r})}$executeContributedCommand(t,...i){this.d.trace("ExtHostCommands#$executeContributedCommand",t);const r=this.b.get(t);return r?(i=i.map(s=>this.f.reduce((n,o)=>o.processArgument(n,r.extension?.identifier),s)),this.h(t,i,!0)):Promise.reject(new Error(`Contributed command '${t}' does not exist.`))}getCommands(t=!1){return this.d.trace("ExtHostCommands#getCommands",t),this.#e.$getCommands().then(i=>(t&&(i=i.filter(r=>r[0]!=="_")),i))}$getContributedCommandMetadata(){const t=Object.create(null);for(const[i,r]of this.b){const{metadata:s}=r;s&&(t[i]=s)}return Promise.resolve(t)}};Fw=__decorate([__param(0,Ie),__param(1,Ce),__param(2,lg)],Fw);var rr=V("IExtHostCommands"),qM=class{constructor(e,t,i){this.d=e,this.f=t,this.g=i,this.delegatingCommandId=`__vsc${Ht()}`,this.b=new Map,this.c=0,this.d.registerCommand(!0,this.delegatingCommandId,this.h,this)}toInternal(e,t){if(!e)return;const i={$ident:void 0,id:e.command,title:e.title,tooltip:e.tooltip};if(!e.command)return i;const r=this.f(e.command);if(r)i.id=r.internalId,i.arguments=r.args.map((s,n)=>s.convert(e.arguments&&e.arguments[n]));else if(Yc(e.arguments)){const s=`${e.command} /${++this.c}`;this.b.set(s,e),t.add(ee(()=>{this.b.delete(s),this.g.trace("CommandsConverter#DISPOSE",s)})),i.$ident=s,i.id=this.delegatingCommandId,i.arguments=[s],this.g.trace("CommandsConverter#CREATE",e.command,s)}return i}fromInternal(e){return typeof e.$ident=="string"?this.b.get(e.$ident):{command:e.id,title:e.title,arguments:e.arguments}}getActualCommand(...e){return this.b.get(e[0])}h(...e){const t=this.getActualCommand(...e);return this.g.trace("CommandsConverter#EXECUTE",e[0],t?t.command:"MISSING"),t?this.d.executeCommand(t.command,...t.arguments||[]):Promise.reject(`Actual command not found, wanted to execute ${e[0]}`)}},U=class Ui{static{this.Uri=new Ui("uri","Uri of a text document",t=>E.isUri(t),t=>t)}static{this.Position=new Ui("position","A position in a text document",t=>Pe.isPosition(t),Fe.from)}static{this.Range=new Ui("range","A range in a text document",t=>Se.isRange(t),O.from)}static{this.Selection=new Ui("selection","A selection in a text document",t=>Ls.isSelection(t),Ti.from)}static{this.Number=new Ui("number","",t=>typeof t=="number",t=>t)}static{this.String=new Ui("string","",t=>typeof t=="string",t=>t)}static{this.StringArray=Ui.Arr(Ui.String)}static Arr(t){return new Ui(`${t.name}_array`,`Array of ${t.name}, ${t.description}`,i=>Array.isArray(i)&&i.every(r=>t.validate(r)),i=>i.map(r=>t.convert(r)))}static{this.CallHierarchyItem=new Ui("item","A call hierarchy item",t=>t instanceof Ov,Uo.from)}static{this.TypeHierarchyItem=new Ui("item","A type hierarchy item",t=>t instanceof f0,jo.from)}static{this.TestItem=new Ui("testItem","A VS Code TestItem",t=>t instanceof Ju,Fn.from)}constructor(t,i,r,s){this.name=t,this.description=i,this.validate=r,this.convert=s}optional(){return new Ui(this.name,`(optional) ${this.description}`,t=>t==null||this.validate(t),t=>t===void 0?void 0:t===null?null:this.convert(t))}with(t,i){return new Ui(t??this.name,i??this.description,this.validate,this.convert)}},ge=class MI{static{this.Void=new MI("no result",t=>t)}constructor(t,i){this.description=t,this.convert=i}},me=class{constructor(e,t,i,r,s){this.id=e,this.internalId=t,this.description=i,this.args=r,this.result=s}},Ws=V("IExtHostTerminalService"),Mw=class extends X{constructor(e,t,i,r){super(),this.u=e,this._id=t,this.w=i,this.y=r,this.a=!1,this.m={isInteractedWith:!1},this.isOpen=!1,this.s=this.B(new I),this.onWillDispose=this.s.event,this.w=Object.freeze(this.w),this.b=new Promise(n=>this.g=n);const s=this;this.value={get name(){return s.y||""},get processId(){return s.b},get creationOptions(){return s.w},get exitStatus(){return s.j},get state(){return s.m},get selection(){return s.n},get shellIntegration(){return s.shellIntegration},sendText(n,o=!0){s.C(),s.u.$sendText(s._id,n,o)},show(n){s.C(),s.u.$show(s._id,n)},hide(){s.C(),s.u.$hide(s._id)},rename(n){s.C(),s.u.$rename(s._id,n)},dispose(){s.a||(s.a=!0,s.u.$dispose(s._id))},get dimensions(){if(!(s.f===void 0||s.h===void 0))return{columns:s.f,rows:s.h}}}}dispose(){this.s.fire(),super.dispose()}async create(e,t){if(typeof this._id!="string")throw new Error("Terminal has already been created");await this.u.$createTerminal(this._id,{name:e.name,shellPath:e.shellPath??void 0,shellArgs:e.shellArgs??void 0,cwd:e.cwd??t?.cwd??void 0,env:e.env??void 0,icon:Dk(e.iconPath)??void 0,color:Ca.isThemeColor(e.color)?e.color.id:void 0,initialText:e.message??void 0,strictEnv:e.strictEnv??void 0,hideFromUser:e.hideFromUser??void 0,forceShellIntegration:t?.forceShellIntegration??void 0,isFeatureTerminal:t?.isFeatureTerminal??void 0,isExtensionOwnedTerminal:!0,useShellEnvironment:t?.useShellEnvironment??void 0,location:t?.location||this.z(e.location,t?.resolvedExtHostIdentifier),isTransient:e.isTransient??void 0})}async createExtensionTerminal(e,t,i,r,s){if(typeof this._id!="string")throw new Error("Terminal has already been created");if(await this.u.$createTerminal(this._id,{name:this.y,isExtensionCustomPtyTerminal:!0,icon:r,color:Ca.isThemeColor(s)?s.id:void 0,location:t?.location||this.z(e,i),isTransient:!0}),typeof this._id=="string")throw new Error("Terminal creation failed");return this._id}z(e,t){return typeof e=="object"?"parentTerminal"in e&&e.parentTerminal&&t?{parentTerminal:t}:"viewColumn"in e?{viewColumn:zt.from(e.viewColumn),preserveFocus:e.preserveFocus}:void 0:e}C(){if(this.a)throw new Error("Terminal has already been disposed")}set name(e){this.y=e}setExitStatus(e,t){this.j=Object.freeze({code:e,reason:t})}setDimensions(e,t){return e===this.f&&t===this.h||e===0||t===0?!1:(this.f=e,this.h=t,!0)}setInteractedWith(){return this.m.isInteractedWith?!1:(this.m={isInteractedWith:!0},!0)}setSelection(e){this.n=e}_setProcessId(e){this.g?(this.g(e),this.g=void 0):this.b.then(t=>{t!==e&&(this.b=Promise.resolve(e))})}},Uw=class{get onProcessReady(){return this.b.event}constructor(e){this.g=e,this.id=0,this.shouldPersist=!1,this.a=new I,this.onProcessData=this.a.event,this.b=new I,this.d=new I,this.onDidChangeProperty=this.d.event,this.f=new I,this.onProcessExit=this.f.event}refreshProperty(e){throw new Error(`refreshProperty is not suppported in extension owned terminals. property: ${e}`)}updateProperty(e,t){throw new Error(`updateProperty is not suppported in extension owned terminals. property: ${e}, value: ${t}`)}async start(){}shutdown(){this.g.close()}input(e){this.g.handleInput?.(e)}resize(e,t){this.g.setDimensions?.({columns:e,rows:t})}clearBuffer(){}async processBinary(e){}acknowledgeDataEvent(e){}async setUnicodeVersion(e){}getInitialCwd(){return Promise.resolve("")}getCwd(){return Promise.resolve("")}startSendingEvents(e){this.g.onDidWrite(t=>this.a.fire(t)),this.g.onDidClose?.((t=void 0)=>{this.f.fire(t===void 0?void 0:t)}),this.g.onDidOverrideDimensions?.(t=>{t&&this.d.fire({type:"overrideDimensions",value:{cols:t.columns,rows:t.rows}})}),this.g.onDidChangeName?.(t=>{this.d.fire({type:"title",value:t})}),this.g.open(e||void 0),e&&this.g.setDimensions?.(e),this.b.fire({pid:-1,cwd:"",windowsPty:void 0})}},GM=1,ug=class extends X{get activeTerminal(){return this.b?.value}get terminals(){return this.f.map(t=>t.value)}constructor(t,i,r){super(),this.Q=i,this.f=[],this.g=new Map,this.h={},this.j={},this.m={},this.n=new Map,this.w=this.B(new vs),this.z=new Set,this.C=new Map,this.D=new Map,this.F=new Map,this.G=new Map,this.H=new I,this.onDidCloseTerminal=this.H.event,this.I=new I,this.onDidOpenTerminal=this.I.event,this.J=new I,this.onDidChangeActiveTerminal=this.J.event,this.L=new I,this.onDidChangeTerminalDimensions=this.L.event,this.M=new I,this.onDidChangeTerminalState=this.M.event,this.N=new I,this.onDidChangeShell=this.N.event,this.O=new I({onWillAddFirstListener:()=>this.a.$startSendingDataEvents(),onDidRemoveLastListener:()=>this.a.$stopSendingDataEvents()}),this.onDidWriteTerminalData=this.O.event,this.P=new I({onWillAddFirstListener:()=>this.a.$startSendingCommandEvents(),onDidRemoveLastListener:()=>this.a.$stopSendingCommandEvents()}),this.onDidExecuteTerminalCommand=this.P.event,this.a=r.getProxy(q.MainThreadTerminalService),this.y=new HM(this.a.$sendProcessData),this.a.$registerProcessSupport(t),this.Q.registerArgumentProcessor({processArgument:s=>{const n=o=>{const a=o;return this.getTerminalById(a.instanceId)?.value};switch(s?.$mid){case 15:return n(s);default:{if(Array.isArray(s))for(let o=0;o<s.length&&s[o].$mid===15;o++)s[o]=n(s[o]);return s}}}}),this.B({dispose:()=>{for(const[s,n]of this.g)n.shutdown(!0)}})}getDefaultShell(t){return(t?this.u:this.s)?.path||""}getDefaultShellArgs(t){return(t?this.u:this.s)?.args||[]}createExtensionTerminal(t,i){const r=new Mw(this.a,Ht(),t,t.name),s=new Uw(t.pty);return r.createExtensionTerminal(t.location,i,this.R(t,i).resolvedExtHostIdentifier,Dk(t.iconPath),QM(t.color)).then(n=>{const o=this.S(n,s);this.h[n]=o}),this.f.push(r),r.value}R(t,i){if(i=i||{},t.location&&typeof t.location=="object"&&"parentTerminal"in t.location){const r=t.location.parentTerminal;if(r){const s=this.f.find(n=>n.value===r);s&&(i.resolvedExtHostIdentifier=s._id)}}else t.location&&typeof t.location!="object"?i.location=t.location:i.location&&typeof i.location=="object"&&"splitActiveTerminal"in i.location&&(i.location={splitActiveTerminal:!0});return i}attachPtyToTerminal(t,i){if(!this.getTerminalById(t))throw new Error(`Cannot resolve terminal with id ${t} for virtual process`);const s=new Uw(i),n=this.S(t,s);this.h[t]=n}async $acceptActiveTerminalChanged(t){const i=this.b;if(t===null){this.b=void 0,i!==this.b&&this.J.fire(this.b);return}const r=this.getTerminalById(t);r&&(this.b=r,i!==this.b&&this.J.fire(this.b.value))}async $acceptTerminalProcessData(t,i){const r=this.getTerminalById(t);r&&this.O.fire({terminal:r.value,data:i})}async $acceptTerminalDimensions(t,i,r){const s=this.getTerminalById(t);s&&s.setDimensions(i,r)&&this.L.fire({terminal:s.value,dimensions:s.value.dimensions})}async $acceptDidExecuteCommand(t,i){const r=this.getTerminalById(t);r&&this.P.fire({terminal:r.value,...i})}async $acceptTerminalMaximumDimensions(t,i,r){this.g.get(t)?.resize(i,r)}async $acceptTerminalTitleChange(t,i){const r=this.getTerminalById(t);r&&(r.name=i)}async $acceptTerminalClosed(t,i,r){const s=this.X(this.f,t);if(s!==null){const n=this.f.splice(s,1)[0];n.setExitStatus(i,r),this.H.fire(n.value)}}$acceptTerminalOpened(t,i,r,s){if(i){const a=this.X(this.f,i);if(a!==null){this.f[a]._id=t,this.I.fire(this.terminals[a]),this.f[a].isOpen=!0;return}}const n={name:s.name,shellPath:s.executable,shellArgs:s.args,cwd:typeof s.cwd=="string"?s.cwd:E.revive(s.cwd),env:s.env,hideFromUser:s.hideFromUser},o=new Mw(this.a,t,n,r);this.f.push(o),this.I.fire(o.value),o.isOpen=!0}async $acceptTerminalProcessId(t,i){this.getTerminalById(t)?._setProcessId(i)}async $startExtensionTerminal(t,i){const r=this.getTerminalById(t);if(!r)return{message:p(3021,null,t)};r.isOpen||await new Promise(n=>{const o=this.onDidOpenTerminal(async a=>{a===r.value&&(o.dispose(),n())})});const s=this.g.get(t);s?s.startSendingEvents(i):this.j[t]={initialDimensions:i}}S(t,i){const r=new ue;r.add(i.onProcessReady(n=>this.a.$sendProcessReady(t,n.pid,n.cwd,n.windowsPty))),r.add(i.onDidChangeProperty(n=>this.a.$sendProcessProperty(t,n))),this.y.startBuffering(t,i.onProcessData),r.add(i.onProcessExit(n=>this.U(t,n))),this.g.set(t,i);const s=this.j[t];return s&&i instanceof Uw&&(i.startSendingEvents(s.initialDimensions),delete this.j[t]),r}$acceptProcessAckDataEvent(t,i){this.g.get(t)?.acknowledgeDataEvent(i)}$acceptProcessInput(t,i){this.g.get(t)?.input(i)}$acceptTerminalInteraction(t){const i=this.getTerminalById(t);i?.setInteractedWith()&&this.M.fire(i.value)}$acceptTerminalSelection(t,i){this.getTerminalById(t)?.setSelection(i)}$acceptProcessResize(t,i,r){try{this.g.get(t)?.resize(i,r)}catch(s){if(s.code!=="EPIPE"&&s.code!=="ERR_IPC_CHANNEL_CLOSED")throw s}}$acceptProcessShutdown(t,i){this.g.get(t)?.shutdown(i)}$acceptProcessRequestInitialCwd(t){this.g.get(t)?.getInitialCwd().then(i=>this.a.$sendProcessProperty(t,{type:"initialCwd",value:i}))}$acceptProcessRequestCwd(t){this.g.get(t)?.getCwd().then(i=>this.a.$sendProcessProperty(t,{type:"cwd",value:i}))}$acceptProcessRequestLatency(t){return Promise.resolve(t)}registerLinkProvider(t){return this.z.add(t),this.z.size===1&&this.a.$startLinkProvider(),new Oe(()=>{this.z.delete(t),this.z.size===0&&this.a.$stopLinkProvider()})}registerProfileProvider(t,i,r){if(this.C.has(i))throw new Error(`Terminal profile provider "${i}" already registered`);return this.C.set(i,r),this.a.$registerProfileProvider(i,t.identifier.value),new Oe(()=>{this.C.delete(i),this.a.$unregisterProfileProvider(i)})}registerTerminalQuickFixProvider(t,i,r){if(this.D.has(t))throw new Error(`Terminal quick fix provider "${t}" is already registered`);return this.D.set(t,r),this.a.$registerQuickFixProvider(t,i),new Oe(()=>{this.D.delete(t),this.a.$unregisterQuickFixProvider(t)})}async $provideTerminalQuickFixes(t,i){const r=new lt().token;if(r.isCancellationRequested)return;const s=this.D.get(t);if(!s)return;const n=await s.provideTerminalQuickFixes(i,r);if(n===null||Array.isArray(n)&&n.length===0)return;const o=new ue;if(this.w.value=o,!Array.isArray(n))return n?Gp.from(n,this.Q.converter,o):void 0;const a=[];for(const c of n){const l=Gp.from(c,this.Q.converter,o);l&&a.push(l)}return a}async $createContributedProfileTerminal(t,i){const r=new lt().token;let s=await this.C.get(t)?.provideTerminalProfile(r);if(!r.isCancellationRequested){if(s&&!("options"in s)&&(s={options:s}),!s||!("options"in s))throw new Error(`No terminal profile options provided for id "${t}"`);if("pty"in s.options){this.createExtensionTerminal(s.options,i);return}this.createTerminalFromOptions(s.options,i)}}async $provideLinks(t,i){const r=this.getTerminalById(t);if(!r)return[];this.F.delete(t),this.G.get(t)?.dispose(!0);const n=new lt;this.G.set(t,n);const o=[],a={terminal:r.value,line:i},c=[];for(const h of this.z)c.push(va.withAsyncBody(async d=>{n.token.onCancellationRequested(()=>d({provider:h,links:[]}));const f=await h.provideTerminalLinks(a,n.token)||[];n.token.isCancellationRequested||d({provider:h,links:f})}));const l=await Promise.all(c);if(n.token.isCancellationRequested)return[];const u=new Map;for(const h of l)h&&h.links.length>0&&o.push(...h.links.map(d=>{const f={id:GM++,startIndex:d.startIndex,length:d.length,label:d.tooltip};return u.set(f.id,{provider:h.provider,link:d}),f}));return this.F.set(t,u),o}$activateLink(t,i){const r=this.F.get(t)?.get(i);r&&r.provider.handleTerminalLink(r.link)}U(t,i){this.y.stopBuffering(t),this.g.delete(t),delete this.j[t];const r=this.h[t];r&&(r.dispose(),delete this.h[t]),this.a.$sendProcessExit(t,i)}getTerminalById(t){return this.W(this.f,t)}getTerminalIdByApiObject(t){const i=this.f.findIndex(r=>r.value===t);return i>=0?i:null}W(t,i){const r=this.X(t,i);return r!==null?t[r]:null}X(t,i){const r=t.findIndex(s=>s._id===i);return r>=0?r:null}getEnvironmentVariableCollection(t){let i=this.n.get(t.identifier.value);return i||(i=this.B(new Pk),this.Z(t.identifier.value,i)),i.getScopedEnvironmentVariableCollection(void 0)}Y(t,i){const r=_M(i.map),s=jM(i.descriptionMap);this.a.$setEnvironmentVariableCollection(t,i.persistent,r.length===0?void 0:r,s)}$initEnvironmentVariableCollections(t){t.forEach(i=>{const r=i[0],s=this.B(new Pk(i[1]));this.Z(r,s)})}$acceptDefaultProfile(t,i){const r=this.s;this.s=t,this.u=i,r?.path!==t.path&&this.N.fire(t.path)}Z(t,i){this.n.set(t,i),this.B(i.onDidChangeCollection(()=>{this.Y(t,i)}))}};ug=__decorate([__param(1,rr),__param(2,Ie)],ug);var Pk=class extends X{get persistent(){return this.b}set persistent(e){this.b=e,this.f.fire()}get onDidChangeCollection(){return this.f&&this.f.event}constructor(e){super(),this.map=new Map,this.a=new Map,this.descriptionMap=new Map,this.b=!0,this.f=new I,this.map=new Map(e)}getScopedEnvironmentVariableCollection(e){const t=this.j(e);let i=this.a.get(t);return i||(i=new JM(this,e),this.a.set(t,i),this.B(i.onDidChangeCollection(()=>this.f.fire()))),i}replace(e,t,i,r){this.g(e,{value:t,type:Ua.Replace,options:i??{applyAtProcessCreation:!0},scope:r})}append(e,t,i,r){this.g(e,{value:t,type:Ua.Append,options:i??{applyAtProcessCreation:!0},scope:r})}prepend(e,t,i,r){this.g(e,{value:t,type:Ua.Prepend,options:i??{applyAtProcessCreation:!0},scope:r})}g(e,t){if(t.options&&t.options.applyAtProcessCreation===!1&&!t.options.applyAtShellIntegration)throw new Error("EnvironmentVariableMutatorOptions must apply at either process creation or shell integration");const i=this.h(e,t.scope),r=this.map.get(i),s=t.options?{applyAtProcessCreation:t.options.applyAtProcessCreation??!1,applyAtShellIntegration:t.options.applyAtShellIntegration??!1}:{applyAtProcessCreation:!0};if(!r||r.value!==t.value||r.type!==t.type||r.options?.applyAtProcessCreation!==s.applyAtProcessCreation||r.options?.applyAtShellIntegration!==s.applyAtShellIntegration||r.scope?.workspaceFolder?.index!==t.scope?.workspaceFolder?.index){const n=this.h(e,t.scope),o={variable:e,...t,options:s};this.map.set(n,o),this.f.fire()}}get(e,t){const i=this.h(e,t),r=this.map.get(i);return r?Ak(r):void 0}h(e,t){const i=this.j(t);return i.length?`${e}:::${i}`:e}j(e){return this.m(e?.workspaceFolder)??""}m(e){return e?e.uri.toString():void 0}getVariableMap(e){const t=new Map;for(const[i,r]of this.map)this.j(r.scope)===this.j(e)&&t.set(r.variable,Ak(r));return t}delete(e,t){const i=this.h(e,t);this.map.delete(i),this.f.fire()}clear(e){if(e?.workspaceFolder){for(const[t,i]of this.map)i.scope?.workspaceFolder?.index===e.workspaceFolder.index&&this.map.delete(t);this.n(e)}else this.map.clear(),this.descriptionMap.clear();this.f.fire()}setDescription(e,t){const i=this.j(t),r=this.descriptionMap.get(i);if(!r||r.description!==e){let s;typeof e=="string"?s=e:s=e?.value.split(`

`)[0];const n={description:s,scope:t};this.descriptionMap.set(i,n),this.f.fire()}}getDescription(e){const t=this.j(e);return this.descriptionMap.get(t)?.description}n(e){const t=this.j(e);this.descriptionMap.delete(t)}},JM=class{get persistent(){return this.b.persistent}set persistent(e){this.b.persistent=e}get onDidChangeCollection(){return this.a&&this.a.event}constructor(e,t){this.b=e,this.d=t,this.a=new I}getScoped(e){return this.b.getScopedEnvironmentVariableCollection(e)}replace(e,t,i){this.b.replace(e,t,i,this.d)}append(e,t,i){this.b.append(e,t,i,this.d)}prepend(e,t,i){this.b.prepend(e,t,i,this.d)}get(e){return this.b.get(e,this.d)}forEach(e,t){this.b.getVariableMap(this.d).forEach((i,r)=>e.call(t,r,i,this),this.d)}[Symbol.iterator](){return this.b.getVariableMap(this.d).entries()}delete(e){this.b.delete(e,this.d),this.a.fire(void 0)}clear(){this.b.clear(this.d)}set description(e){this.b.setDescription(e,this.d)}get description(){return this.b.getDescription(this.d)}},_w=class extends ug{constructor(t,i){super(!1,t,i)}createTerminal(t,i,r){throw new Mm}createTerminalFromOptions(t,i){throw new Mm}};_w=__decorate([__param(0,rr),__param(1,Ie)],_w);function Dk(e){if(!(!e||typeof e=="string"))return"id"in e?{id:e.id,color:e.color}:e}function QM(e){return Ca.isThemeColor(e)?e:void 0}function Ak(e){const t={...e};return delete t.scope,t.options=t.options??void 0,delete t.variable,t}var YM=V("progressService"),Rk;(function(e){e[e.Explorer=1]="Explorer",e[e.Scm=3]="Scm",e[e.Extensions=5]="Extensions",e[e.Window=10]="Window",e[e.Notification=15]="Notification",e[e.Dialog=20]="Dialog"})(Rk||(Rk={}));var eY=Object.freeze({total(){},worked(){},done(){}}),hg=class{static{this.None=Object.freeze({report(){}})}get value(){return this.a}constructor(e){this.b=e}report(e){this.a=e,this.b(this.a)}},Tk=class extends X{constructor(t,i){super(),this.a=new Ss,i.withProgress(t,r=>(this.b=r,this.c&&r.report(this.c),this.a.p)),this.B(ee(()=>this.a.complete()))}report(t){this.b?this.b.report(t):this.c=t}};Tk=__decorate([__param(1,YM)],Tk);var iY=V("editorProgressService"),Lk="__",rY=V("IAuthenticationService"),sY=V("IAuthenticationExtensionsService"),jw=V("IExtHostAuthentication"),Hw=class{constructor(t){this.b=new Map,this.c=new I,this.d=new XM,this.a=t.getProxy(q.MainThreadAuthentication)}getExtensionScopedSessionsEvent(t){const i=t.toLowerCase();return ze.chain(this.c.event,r=>r.filter(s=>!s.extensionIdFilter||s.extensionIdFilter.includes(i)).map(s=>({provider:s.provider})))}async getSession(t,i,r,s={}){const n=Xe.toKey(t.identifier),o=[...r].sort().join(" ");return await this.d.getOrCreate(`${n} ${i} ${o}`,async()=>{await this.a.$ensureProvider(i);const a=t.displayName||t.name;return this.a.$getSession(i,r,n,a,s)})}async getAccounts(t){return await this.a.$ensureProvider(t),await this.a.$getAccounts(t)}async removeSession(t,i){const r=this.b.get(t);return r?r.provider.removeSession(i):this.a.$removeSession(t,i)}registerAuthenticationProvider(t,i,r,s){if(this.b.get(t))throw new Error(`An authentication provider with id '${t}' is already registered.`);this.b.set(t,{label:i,provider:r,options:s??{supportsMultipleAccounts:!1}});const n=r.onDidChangeSessions(o=>this.a.$sendDidChangeSessions(t,o));return this.a.$registerAuthenticationProvider(t,i,s),new Oe(()=>{n.dispose(),this.b.delete(t),this.a.$unregisterAuthenticationProvider(t)})}async $createSession(t,i,r){const s=this.b.get(t);if(s)return await s.provider.createSession(i,r);throw new Error(`Unable to find authentication provider with handle: ${t}`)}async $removeSession(t,i){const r=this.b.get(t);if(r)return await r.provider.removeSession(i);throw new Error(`Unable to find authentication provider with handle: ${t}`)}async $getSessions(t,i,r){const s=this.b.get(t);if(s)return await s.provider.getSessions(i,r);throw new Error(`Unable to find authentication provider with handle: ${t}`)}$onDidChangeAuthenticationSessions(t,i,r){return t.startsWith(Lk)||this.c.fire({provider:{id:t,label:i},extensionIdFilter:r}),Promise.resolve()}};Hw=__decorate([__param(0,Ie)],Hw);var XM=class{constructor(){this.a=new Map}getOrCreate(e,t){const i=this.a.get(e);if(i)return i;const r=t().finally(()=>this.a.delete(e));return this.a.set(e,r),r}},dg,Bw=V("IExtHostLanguageModels"),Nk=class{constructor(e,t){this.option=e,this.stream=new r1,this.stream=t??new r1}},ZM=class{constructor(){this.a=new Map,this.b=new r1,this.c=!1;const e=this;this.apiObject={get stream(){return e.b.asyncIterable},get text(){return cl.map(e.b.asyncIterable,t=>{if(t instanceof xi)return t.value}).coalesce()}}}*d(){if(this.a.size>0)for(const[,e]of this.a)yield e.stream;else yield this.b}handleFragment(e){if(this.c)return;let t=this.a.get(e.index);t||(this.a.size===0?t=new Nk(e.index,this.b):t=new Nk(e.index),this.a.set(e.index,t));let i;e.part.type==="text"?i=new xi(e.part.value):i=new xu(e.part.toolCallId,e.part.name,e.part.parameters),t.stream.emitOne(i)}reject(e){this.c=!0;for(const t of this.d())t.reject(e)}resolve(){this.c=!0;for(const e of this.d())e.resolve()}},Ww=class{static{dg=this}static{this.a=1}constructor(t,i,r){this.k=i,this.l=r,this.c=new I,this.d=new I,this.onDidChangeProviders=this.d.event,this.f=new Map,this.g=new Map,this.h=new Rs,this.i=new Map,this.j=new Map,this.t=new Set,this.b=t.getProxy(q.MainThreadLanguageModels)}dispose(){this.c.dispose(),this.d.dispose()}registerLanguageModel(t,i,r,s){const n=dg.a++;this.f.set(n,{extension:t.identifier,provider:r,languageModelId:i});let o;s.auth&&(o={providerLabel:t.displayName||t.name,accountLabel:typeof s.auth=="object"?s.auth.label:void 0}),this.b.$registerLanguageModelProvider(n,`${Xe.toKey(t.identifier)}/${i}`,{extension:t.identifier,id:i,vendor:s.vendor??Xe.toKey(t.identifier),name:s.name??"",family:s.family??"",version:s.version,maxInputTokens:s.maxInputTokens,maxOutputTokens:s.maxOutputTokens,auth:o,targetExtensions:s.extensions,isDefault:s.isDefault,isUserSelectable:s.isUserSelectable});const a=r.onDidReceiveLanguageModelResponse2?.(({extensionId:c,participant:l,tokenCount:u})=>{this.b.$whenLanguageModelChatRequestMade(i,new Xe(c),l,u)});return ee(()=>{this.f.delete(n),this.b.$unregisterProvider(n),a?.dispose()})}async $startChatRequest(t,i,r,s,n,o){const a=this.f.get(t);if(!a)throw new Error("Provider not found");const c=new hg(async u=>{if(o.isCancellationRequested){this.k.warn(`[CHAT](${a.extension.value}) CANNOT send progress because the REQUEST IS CANCELLED`);return}let h;if(u.part instanceof xu?h={type:"tool_use",name:u.part.name,parameters:u.part.input??u.part.parameters,toolCallId:u.part.callId}:u.part instanceof xi&&(h={type:"text",value:u.part.value}),!h){this.k.warn(`[CHAT](${a.extension.value}) UNKNOWN part ${JSON.stringify(u)}`);return}this.b.$reportResponsePart(i,{index:u.index,part:h})});let l;if(a.provider.provideLanguageModelResponse2)l=Promise.resolve(a.provider.provideLanguageModelResponse2(s.map(mc.to),n,Xe.toKey(r),c,o));else{const u=new hg(async h=>{c.report({index:h.index,part:new xi(h.part)})});l=Promise.resolve(a.provider.provideLanguageModelResponse(s.map(mc.to),n?.modelOptions??{},Xe.toKey(r),u,o))}l.then(()=>{this.b.$reportResponseDone(i,void 0)},u=>{this.b.$reportResponseDone(i,Jc(u))})}$provideTokenLength(t,i,r){const s=this.f.get(t);return s?Promise.resolve(s.provider.provideTokenCount(i,r)):Promise.resolve(0)}$acceptChatModelMetadata(t){if(t.added)for(const{identifier:i,metadata:r}of t.added)this.g.set(i,{metadata:r,apiObjects:new Rs});if(t.removed)for(const i of t.removed){this.g.delete(i);for(const[r,s]of this.i)s.languageModelId===i&&(s.res.reject(new ki),this.i.delete(r))}t.added?.forEach(i=>this.r(i.metadata)),this.d.fire(void 0)}async getDefaultLanguageModel(t){const i=Qi.find(this.g.entries(),([,r])=>!!r.metadata.isDefault)?.[0];if(i)return this.getLanguageModelByIdentifier(t,i)}async getLanguageModelByIdentifier(t,i){const r=this.g.get(i);if(!r)return;this.q(t.identifier,r.metadata)&&await this.r(r.metadata);let s=r.apiObjects.get(t.identifier);if(!s){const n=this;s={id:r.metadata.id,vendor:r.metadata.vendor,family:r.metadata.family,version:r.metadata.version,name:r.metadata.name,maxInputTokens:r.metadata.maxInputTokens,countTokens(o,a){if(!n.g.has(i))throw Us.NotFound(i);return n.s(i,o,a??Ge.None)},sendRequest(o,a,c){if(!n.g.has(i))throw Us.NotFound(i);return n.m(t,i,o,a??{},c??Ge.None)}},Object.freeze(s),r.apiObjects.set(t.identifier,s)}return s}async selectLanguageModels(t,i){const r=await this.b.$selectChatModels({...i,extension:t.identifier}),s=[];for(const n of r){const o=await this.getLanguageModelByIdentifier(t,n);o&&s.push(o)}return s}async m(t,i,r,s,n){const o=this.n(t,r),a=t.identifier,c=this.g.get(i)?.metadata;if(!c||!this.g.has(i))throw Us.NotFound(`Language model '${i}' is unknown.`);if(this.q(a,c)&&(!await this.o(t,{identifier:c.extension,displayName:c.auth.providerLabel},s.justification,!1)||!this.h.get(a)?.has(c.extension)))throw Us.NoPermissions(`Language model '${i}' cannot be used by '${a.value}'.`);s.tools&&(s.tools=s.tools.map(l=>({...l,inputSchema:l.inputSchema??l.parametersSchema,parametersSchema:l.inputSchema??l.parametersSchema})));try{const l=Math.random()*1e6|0,u=new ZM;this.i.set(l,{languageModelId:i,res:u});try{await this.b.$tryStartChatRequest(a,i,l,o,s,n)}catch(h){throw this.i.delete(l),h}return u.apiObject}catch(l){throw l.name===Us.name?l:new Us(`Language model '${i}' errored: ${Ei(l)}`,"Unknown",l)}}n(t,i){const r=[];for(const s of i)s.role===dr.System&&A(t,"languageModelSystem"),r.push(mc.from(s));return r}async $acceptResponsePart(t,i){const r=this.i.get(t);r&&r.res.handleFragment(i)}async $acceptResponseDone(t,i){const r=this.i.get(t);r&&(this.i.delete(t),i?r.res.reject(KP(i)):r.res.resolve())}async o(t,i,r,s){const n=Lk+i.identifier.value;if(await this.l.getSession(t,n,[],{silent:!0}))return this.$updateModelAccesslist([{from:t.identifier,to:i.identifier,enabled:!0}]),!0;if(s)return!1;try{const a=r?p(3012,null,i.displayName,r):void 0;return await this.l.getSession(t,n,[],{forceNewSession:{detail:a}}),this.$updateModelAccesslist([{from:t.identifier,to:i.identifier,enabled:!0}]),!0}catch{return!1}}q(t,i){return!!i.auth&&!Xe.equals(i.extension,t)}async r(t){if(t.auth)for(const i of this.t)try{await this.o(i,{identifier:t.extension,displayName:""},void 0,!0)}catch(r){this.k.error("Fake Auth request failed"),this.k.error(r)}}async s(t,i,r){if(!this.g.get(t))throw Us.NotFound(`Language model '${t}' is unknown.`);const n=Qi.find(this.f.values(),o=>o.languageModelId===t);return n?n.provider.provideTokenCount(i,r):this.b.$countTokens(t,typeof i=="string"?i:mc.from(i),r)}$updateModelAccesslist(t){const i=new Array;for(const{from:r,to:s,enabled:n}of t){const o=this.h.get(r)??new bo;if(o.has(s)!==n){n?o.add(s):o.delete(s),this.h.set(r,o);const c={from:r,to:s};i.push(c),this.c.fire(c)}}}createLanguageModelAccessInformation(t){this.t.add(t);const i=this,r=ze.signal(ze.filter(this.c.event,n=>Xe.equals(n.from,t.identifier))),s=ze.signal(this.d.event);return{get onDidChange(){return ze.any(r,s)},canSendRequest(n){let o;e:for(const[c,l]of i.g)for(const u of l.apiObjects.values())if(u===n){o=l.metadata;break e}if(!o)return;if(!i.q(t.identifier,o))return!0;const a=i.h.get(t.identifier);if(a)return a.has(o.extension)}}}fileIsIgnored(t,i,r){return A(t,"chatParticipantAdditions"),this.b.$fileIsIgnored(i,r)}async $isFileIgnored(t,i,r){const s=this.j.get(t);if(!s)throw new Error("Unknown LanguageModelIgnoredFileProvider");return await s.provideFileIgnored(E.revive(i),r)??!1}registerIgnoredFileProvider(t,i){A(t,"chatParticipantPrivate");const r=dg.a++;return this.b.$registerFileIgnoreProvider(r),this.j.set(r,i),ee(()=>{this.b.$unregisterFileIgnoreProvider(r),this.j.delete(r)})}};Ww=dg=__decorate([__param(0,Ie),__param(1,Ce),__param(2,jw)],Ww);function Yu(e,t=it){return Zm(e,t)?e.charAt(0).toUpperCase()+e.slice(1):e}function KM(e,t){return e.replace(/^~($|\/|\\)/,`${t}$1`)}var Ok;(function(e){e[e.TEXT=0]="TEXT",e[e.VARIABLE=1]="VARIABLE",e[e.SEPARATOR=2]="SEPARATOR"})(Ok||(Ok={}));var Fk;(function(e){e[e.MAX_SAFE_SMALL_INTEGER=1073741824]="MAX_SAFE_SMALL_INTEGER",e[e.MIN_SAFE_SMALL_INTEGER=-1073741824]="MIN_SAFE_SMALL_INTEGER",e[e.MAX_UINT_8=255]="MAX_UINT_8",e[e.MAX_UINT_16=65535]="MAX_UINT_16",e[e.MAX_UINT_32=4294967295]="MAX_UINT_32",e[e.UNICODE_SUPPLEMENTARY_PLANE_BEGIN=65536]="UNICODE_SUPPLEMENTARY_PLANE_BEGIN"})(Fk||(Fk={}));function Mk(e){return e<0?0:e>255?255:e|0}function xc(e){return e<0?0:e>4294967295?4294967295:e|0}var Uk=class UI{constructor(t){const i=Mk(t);this.c=i,this.a=UI.d(i),this.b=new Map}static d(t){const i=new Uint8Array(256);return i.fill(t),i}set(t,i){const r=Mk(i);t>=0&&t<256?this.a[t]=r:this.b.set(t,r)}get(t){return t>=0&&t<256?this.a[t]:this.b.get(t)||this.c}clear(){this.a.fill(this.c),this.b.clear()}},_k;(function(e){e[e.False=0]="False",e[e.True=1]="True"})(_k||(_k={}));var jk;(function(e){e[e.Regular=0]="Regular",e[e.Whitespace=1]="Whitespace",e[e.WordSeparator=2]="WordSeparator"})(jk||(jk={}));var eU=class extends Uk{constructor(e,t){super(0),this.e=null,this.f=null,this.g=[],this.intlSegmenterLocales=t,this.intlSegmenterLocales.length>0?this.e=new Intl.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this.e=null;for(let i=0,r=e.length;i<r;i++)this.set(e.charCodeAt(i),2);this.set(32,1),this.set(9,1)}findPrevIntlWordBeforeOrAtOffset(e,t){let i=null;for(const r of this.h(e)){if(r.index>t)break;i=r}return i}findNextIntlWordAtOrAfterOffset(e,t){for(const i of this.h(e))if(!(i.index<t))return i;return null}h(e){return this.e?this.f===e?this.g:(this.f=e,this.g=this.j(this.e.segment(e)),this.g):[]}j(e){const t=[];for(const i of e)this.k(i)&&t.push(i);return t}k(e){return!!e.isWordLike}},Hk=new Xc(10);function tU(e,t){const i=`${e}/${t.join(",")}`;let r=Hk.get(i);return r||(r=new eU(e,t),Hk.set(i,r)),r}var zw;(function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=4]="Right",e[e.Full=7]="Full"})(zw||(zw={}));var Bk;(function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=3]="Right"})(Bk||(Bk={}));var Wk;(function(e){e[e.Inline=1]="Inline",e[e.Gutter=2]="Gutter"})(Wk||(Wk={}));var zk;(function(e){e[e.Normal=1]="Normal",e[e.Underlined=2]="Underlined"})(zk||(zk={}));var Vk;(function(e){e[e.Both=0]="Both",e[e.Right=1]="Right",e[e.Left=2]="Left",e[e.None=3]="None"})(Vk||(Vk={}));var qk;(function(e){e[e.TextDefined=0]="TextDefined",e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(qk||(qk={}));var Gk;(function(e){e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(Gk||(Gk={}));var Jk;(function(e){e[e.LF=0]="LF",e[e.CRLF=1]="CRLF"})(Jk||(Jk={}));var Vw=class{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}},Qk;(function(e){e[e.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",e[e.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",e[e.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",e[e.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(Qk||(Qk={}));var Yk;(function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.None=2]="None",e[e.LeftOfInjectedText=3]="LeftOfInjectedText",e[e.RightOfInjectedText=4]="RightOfInjectedText"})(Yk||(Yk={}));var Xk;(function(e){e[e.FIRST_LINE_DETECTION_LENGTH_LIMIT=1e3]="FIRST_LINE_DETECTION_LENGTH_LIMIT"})(Xk||(Xk={}));var iU=class{constructor(e,t,i){this.regex=e,this.wordSeparators=t,this.simpleSearch=i}},rU=class{constructor(e,t,i){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=i}},Zk=class{constructor(e,t,i,r){this.searchString=e,this.isRegex=t,this.matchCase=i,this.wordSeparators=r}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=Kk(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=k5(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let i=!this.isRegex&&!e;return i&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(i=this.matchCase),new iU(t,this.wordSeparators?tU(this.wordSeparators,[]):null,i?this.searchString:null)}};function Kk(e){if(!e||e.length===0)return!1;for(let t=0,i=e.length;t<i;t++){const r=e.charCodeAt(t);if(r===10)return!0;if(r===92){if(t++,t>=i)break;const s=e.charCodeAt(t);if(s===110||s===114||s===87)return!0}}return!1}function e8(e,t,i){if(!i)return new Vw(e,null);const r=[];for(let s=0,n=t.length;s<n;s++)r[s]=t[s];return new Vw(e,r)}function sU(e,t,i,r,s){if(r===0)return!0;const n=t.charCodeAt(r-1);if(e.get(n)!==0||n===13||n===10)return!0;if(s>0){const o=t.charCodeAt(r);if(e.get(o)!==0)return!0}return!1}function nU(e,t,i,r,s){if(r+s===i)return!0;const n=t.charCodeAt(r+s);if(e.get(n)!==0||n===13||n===10)return!0;if(s>0){const o=t.charCodeAt(r+s-1);if(e.get(o)!==0)return!0}return!1}function t8(e,t,i,r,s){return sU(e,t,i,r,s)&&nU(e,t,i,r,s)}var oU=class{constructor(e,t){this._wordSeparators=e,this.a=t,this.b=-1,this.c=0}reset(e){this.a.lastIndex=e,this.b=-1,this.c=0}next(e){const t=e.length;let i;do{if(this.b+this.c===t||(i=this.a.exec(e),!i))return null;const r=i.index,s=i[0].length;if(r===this.b&&s===this.c){if(s===0){A5(e,t,this.a.lastIndex)>65535?this.a.lastIndex+=2:this.a.lastIndex+=1;continue}return null}if(this.b=r,this.c=s,!this._wordSeparators||t8(this._wordSeparators,e,t,r,s))return i}while(i);return null}};function i8(e){return e.scheme!==z.file&&e.scheme!==z.vscodeRemote}function aU(e){if(e.folders.length)return e.folders.every(t=>i8(t.uri))?e.folders[0].uri:void 0;if(e.configuration&&i8(e.configuration))return e.configuration}function cU(e){return aU(e)?.scheme}var r8=pv,s8=V("remoteAgentService"),aY=new class{constructor(){this.maxSampleCount=5,this.sampleDelay=2e3,this.initial=[],this.maxInitialCount=3,this.average=[],this.maxAverageCount=100,this.highLatencyMultiple=2,this.highLatencyMinThreshold=500,this.highLatencyMaxThreshold=1500,this.lastMeasurement=void 0}get latency(){return this.lastMeasurement}async measure(e){let t=1/0;for(let r=0;r<this.maxSampleCount;r++){const s=await e.getRoundTripTime();if(s===void 0)return;t=Math.min(t,s/2),await bi(this.sampleDelay)}this.average.push(t),this.average.length>this.maxAverageCount&&this.average.shift();let i;return this.initial.length<this.maxInitialCount?this.initial.push(t):i=this.initial.reduce((r,s)=>r+s,0)/this.initial.length,this.lastMeasurement={initial:i,current:t,average:this.average.reduce((r,s)=>r+s,0)/this.average.length,high:typeof i>"u"?!1:t>this.highLatencyMaxThreshold||t>this.highLatencyMinThreshold&&t>i*this.highLatencyMultiple},this.lastMeasurement}},qw,lU=V("pathService"),n8=qw=class{constructor(t,i,r,s){this.d=t,this.e=i,this.f=r,this.g=s,this.a=(async()=>(await this.e.getEnvironment())?.os||g5)(),this.b=(async()=>{const n=await this.e.getEnvironment();return this.c=n?.userHome??t})()}hasValidBasename(t,i,r){return typeof i=="string"||typeof i>"u"?this.a.then(s=>this.h(t,s,i)):this.h(t,i,r)}h(t,i,r){return t.scheme===z.file||t.scheme===z.vscodeRemote?FA(r??Jr(t),i===1):!0}get defaultUriScheme(){return qw.findDefaultUriScheme(this.f,this.g)}static findDefaultUriScheme(t,i){if(t.remoteAuthority)return z.vscodeRemote;const r=cU(i.getWorkspace());if(r)return r;const s=i.getWorkspace().folders[0];if(s)return s.uri.scheme;const n=i.getWorkspace().configuration;return n?n.scheme:z.file}userHome(t){return t?.preferLocal?this.d:this.b}get resolvedUserHome(){return this.c}get path(){return this.a.then(t=>t===1?Ft:Le)}async fileURI(t){let i="";if(await this.a===1&&(t=t.replace(/\\/g,"/")),t[0]==="/"&&t[1]==="/"){const s=t.indexOf("/",2);s===-1?(i=t.substring(2),t="/"):(i=t.substring(2,s),t=t.substring(s)||"/")}return E.from({scheme:z.file,authority:i,path:t,query:"",fragment:""})}};n8=qw=__decorate([__param(1,s8),__param(2,r8),__param(3,$d)],n8);function uU(e){return typeof e=="object"&&"uri"in e&&"pattern"in e}var o8=class{constructor(t,i,r,s,n,o){this.a=t,this.b=i,this.c=r,this.d=s,this.f=n,this.g=o}aiText(t,i,r={}){return{...this.j(i?.map(M1),r),type:3,contentPattern:t}}text(t,i,r={}){t=this.h(t,r);const s=this.a.getValue(),n=i&&i.some(a=>!this.a.getValue({resource:a}).search.useRipgrep);return{...this.j(i?.map(M1),r),type:2,contentPattern:t,previewOptions:r.previewOptions,maxFileSize:r.maxFileSize,usePCRE2:s.search.usePCRE2||n||!1,surroundingContext:r.surroundingContext,userDisabledExcludesAndIgnoreFiles:r.disregardExcludeSettings&&r.disregardIgnoreFiles}}h(t,i){const r=this.a.getValue();t.isRegExp&&(t.pattern=t.pattern.replace(/\r?\n/g,"\\n"));const s={...t,wordSeparators:r.editor.wordSeparators};return this.l(t,i)&&(s.isCaseSensitive=!0),this.m(t)&&(s.isMultiline=!0),i.notebookSearchConfig?.includeMarkupInput&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookMarkdownInput=i.notebookSearchConfig.includeMarkupInput),i.notebookSearchConfig?.includeMarkupPreview&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookMarkdownPreview=i.notebookSearchConfig.includeMarkupPreview),i.notebookSearchConfig?.includeCodeInput&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookCellInput=i.notebookSearchConfig.includeCodeInput),i.notebookSearchConfig?.includeOutput&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookCellOutput=i.notebookSearchConfig.includeOutput),s}icubeFolder(t,i={}){return{...this.j(t,i),type:4,filePattern:i.filePattern?i.filePattern.trim():i.filePattern,exists:i.exists,sortByScore:i.sortByScore,cacheKey:i.cacheKey,shouldGlobMatchFilePattern:i.shouldGlobSearch}}file(t,i={}){return{...this.j(t,i),type:1,filePattern:i.filePattern?i.filePattern.trim():i.filePattern,exists:i.exists,sortByScore:i.sortByScore,cacheKey:i.cacheKey,shouldGlobMatchFilePattern:i.shouldGlobSearch}}i(t,i){if(!t)return{};if(Array.isArray(t)){if(t=t.filter(r=>r.length>0).map(fg),!t.length)return{}}else t=fg(t);return i?this.parseSearchPaths(t):{pattern:Gw(...Array.isArray(t)?t:[t])}}j(t=[],i={}){let r=Array.isArray(i.excludePattern)?i.excludePattern.map(u=>u.pattern).flat():i.excludePattern;r=r?.length===1?r[0]:r;const s=this.i(i.includePattern,i.expandPatterns),n=this.i(r,i.expandPatterns),o=t.length>1,a=(s.searchPaths&&s.searchPaths.length?s.searchPaths.map(u=>this.t(u,i,n)):t.map(u=>this.u(u,i,n,o))).filter(u=>!!u),c={_reason:i._reason,folderQueries:a,usingSearchPaths:!!(s.searchPaths&&s.searchPaths.length),extraFileResources:i.extraFileResources,excludePattern:n.pattern,includePattern:s.pattern,onlyOpenEditors:i.onlyOpenEditors,maxResults:i.maxResults,onlyFileScheme:i.onlyFileScheme};if(i.onlyOpenEditors){const u=mt(this.c.groups.flatMap(f=>f.editors.map(g=>g.resource)));this.d.trace("QueryBuilder#commonQuery - openEditor URIs",JSON.stringify(u));const h=u.filter(f=>Bx(c,f.fsPath)),d=this.k(h);return this.d.trace("QueryBuilder#commonQuery - openEditor Query",JSON.stringify(d)),{...c,...d}}const l=i.extraFileResources&&i.extraFileResources.filter(u=>Bx(c,u.fsPath));return c.extraFileResources=l&&l.length?l:void 0,c}k(t){const i=[],r=new Gt,s={};let n=!1;return t.forEach(o=>{if(o.scheme===z.walkThrough)return;if(iR(o)){const c=this.b.getWorkspaceFolder(o)?.uri??this.g.extUri.dirname(o);let l=r.get(c);l||(n=!0,l={folder:c,includePattern:{}},i.push(l),r.set(c,l));const u=so(c.fsPath,o.fsPath);ga(l.includePattern)[u.replace(/\\/g,"/")]=!0}else o.fsPath&&(n=!0,s[o.fsPath]=!0)}),{folderQueries:i,includePattern:s,usingSearchPaths:!0,excludePattern:n?void 0:{"**/*":!0}}}l(t,i){if(i.isSmartCase){if(t.isRegExp){if(N5(t.pattern,!0))return!0}else if(N5(t.pattern))return!0}return!!t.isCaseSensitive}m(t){return t.isMultiline||t.isRegExp&&Kk(t.pattern)||t.pattern.indexOf(`
`)>=0?!0:!!t.isMultiline}parseSearchPaths(t){const i=h=>lr(h)||/^\.\.?([\/\\]|$)/.test(h),s=(Array.isArray(t)?t:dU(t)).map(h=>{const d=this.f.resolvedUserHome;return d?KM(h,d.scheme===z.file?d.fsPath:d.path):h}),n=Nm(s,h=>i(h)?"searchPaths":"exprSegments"),o=(n.exprSegments||[]).map(h=>Gr(h,"/")).map(h=>Gr(h,"\\")).map(h=>(h[0]==="."&&(h="*"+h),fU(h))),a={},c=this.o(n.searchPaths||[]);c&&c.length&&(a.searchPaths=c);const l=o.flat(),u=Gw(...l);return u&&(a.pattern=u),a}n(t,i){return i.disregardExcludeSettings?void 0:tM(t,!i.disregardSearchExcludeSettings)}o(t){if(!t||!t.length)return[];const i=t.flatMap(s=>{let{pathPortion:n,globPortion:o}=hU(s);return o&&(o=Jw(o)),this.q(n).flatMap(c=>this.r(c,o))}),r=new Map;return i.forEach(s=>{const n=s.searchPath.toString(),o=r.get(n);o?s.pattern&&(o.pattern=o.pattern||{},o.pattern[s.pattern]=!0):r.set(n,{searchPath:s.searchPath,pattern:s.pattern?Gw(s.pattern):void 0})}),Array.from(r.values())}q(t){if(lr(t)){const i=this.b.getWorkspace().folders;return i[0]&&i[0].uri.scheme!==z.file?[{searchPath:i[0].uri.with({path:t})}]:[{searchPath:E.file(ys(t))}]}if(this.b.getWorkbenchState()===2){const i=this.b.getWorkspace().folders[0].uri;if(t=fg(t),t.startsWith("../")||t===".."){const s=Le.resolve(i.path,t);return[{searchPath:i.with({path:s})}]}const r=Jw(t);return[{searchPath:i,pattern:r}]}else{if(t==="./"||t===".\\")return[];{const i=t.replace(/^\.[\/\\]/,""),s=this.b.getWorkspace().folders.map(n=>{const o=i.match(new RegExp(`^${un(n.name)}(?:/(.*)|$)`));return o?{match:o,folder:n}:null}).filter(oo);if(s.length)return s.map(n=>{const o=n.match[1];return{searchPath:n.folder.uri,pattern:o&&Jw(o)}});{const n=t.match(/\.[\/\\](.+)[\/\\]?/),o=n?n[1]:t,a=p(13692,null,o);throw new Error(a)}}}}r(t,i){const r=t.pattern&&i?`${t.pattern}/${i}`:t.pattern||i,s=[{searchPath:t.searchPath,pattern:r}];return r&&!r.endsWith("**")&&s.push({searchPath:t.searchPath,pattern:r+"/**"}),s}t(t,i,r){const s=this.u(M1(t.searchPath),i,r,!1);return s?{...s,includePattern:t.pattern}:null}u(t,i,r,s){let n;const o=E.isUri(t)?t:t.uri;let a=i.excludePattern?.map(f=>{const g=i.excludePattern&&uU(f)?f.uri:void 0;return!g||!(E.isUri(t)&&this.g.extUri.isEqual(t,g))?g:void 0});if(a?.length||(a=[void 0]),r.searchPaths){const f=r.searchPaths.filter(g=>iE(g.searchPath,o))[0];if(f&&!f.pattern)return null;f&&(n=f.pattern)}const c=this.a.getValue({resource:o}),u={...this.n(c,i)||{},...n||{}},h=E.isUri(t)?Jr(t):t.name,d=a.map(f=>Object.keys(u).length>0?{folder:f,pattern:u}:void 0).filter(f=>f);return{folder:o,folderName:s?h:void 0,excludePattern:d,fileEncoding:c.files&&c.files.encoding,disregardIgnoreFiles:typeof i.disregardIgnoreFiles=="boolean"?i.disregardIgnoreFiles:!c.search.useIgnoreFiles,disregardGlobalIgnoreFiles:typeof i.disregardGlobalIgnoreFiles=="boolean"?i.disregardGlobalIgnoreFiles:!c.search.useGlobalIgnoreFiles,disregardParentIgnoreFiles:typeof i.disregardParentIgnoreFiles=="boolean"?i.disregardParentIgnoreFiles:!c.search.useParentIgnoreFiles,ignoreSymlinks:typeof i.ignoreSymlinks=="boolean"?i.ignoreSymlinks:!c.search.followSymlinks}}};o8=__decorate([__param(0,Sn),__param(1,$d),__param(2,pF),__param(3,Ce),__param(4,lU),__param(5,X7)],o8);function hU(e){const t=e.match(/[\*\{\}\(\)\[\]\?]/);if(t){const i=t.index,r=e.substr(0,i).match(/[/|\\][^/\\]*$/);if(r){let s=e.substr(0,r.index);return s.match(/[/\\]/)||(s+="/"),{pathPortion:s,globPortion:e.substr((r.index||0)+1)}}}return{pathPortion:e}}function Gw(...e){return e.length?e.reduce((t,i)=>(t[i]=!0,t),Object.create(null)):void 0}function dU(e){return Ml(e,",").map(t=>t.trim()).filter(t=>!!t.length)}function fU(e){return[`**/${e}/**`,`**/${e}`].map(i=>i.replace(/\*\*\/\*\*/g,"**"))}function fg(e){return e.replace(/\\/g,"/")}function Jw(e){return fg(e).replace(/^\.\//,"").replace(/\/+$/g,"")}var pU=7e3;function gU(e,t){const i=t.activationEvents;if(!i)return Promise.resolve(void 0);const r=[],s=[];for(const u of i)if(/^workspaceContains:/.test(u)){const h=u.substr(18);h.indexOf("*")>=0||h.indexOf("?")>=0||e.forceUsingSearch?s.push(h):r.push(h)}if(r.length===0&&s.length===0)return Promise.resolve(void 0);const{promise:n,resolve:o}=aE(),a=u=>o({activationEvent:u}),c=Promise.all(r.map(u=>mU(e,u,a))).then(()=>{}),l=vU(e,t.identifier,s,a);return Promise.all([c,l]).then(()=>{o(void 0)}),n}async function mU(e,t,i){for(const r of e.folders)if(await e.exists(Rt(E.revive(r),t))){i(`workspaceContains:${t}`);return}}async function vU(e,t,i,r){if(i.length===0)return Promise.resolve(void 0);const s=new lt,n=e.checkExists(e.folders,i,s.token),o=setTimeout(async()=>{s.cancel(),e.logService.info(`Not activating extension '${t.value}': Timed out while searching for 'workspaceContains' pattern ${i.join(",")}`)},pU);let a=!1;try{a=await n}catch(c){zr(c)||Et(c)}s.dispose(),clearTimeout(o),a&&r(`workspaceContains:${i.join(",")}`)}var a8=class{constructor(e){this.b=new I,this.onDidChangePassword=this.b.event,this.a=e.getProxy(q.MainThreadSecretState)}async $onDidChangePassword(e){this.b.fire(e)}get(e,t){return this.a.$getPassword(e,t)}store(e,t,i){return this.a.$setPassword(e,t,i)}delete(e,t){return this.a.$deletePassword(e,t)}},Qw=V("IExtHostSecretState"),wU=class{#e;constructor(e,t){this.disposables=new ue,this.a=Xe.toKey(e.identifier),this.#e=t,this.onDidChange=ze.map(ze.filter(this.#e.onDidChangePassword,i=>i.extensionId===this.a),i=>({key:i.key}),this.disposables)}dispose(){this.disposables.dispose()}get(e){return this.#e.get(this.a,e)}store(e,t){return this.#e.store(this.a,e,t)}delete(e){return this.#e.delete(this.a,e)}},Yw=class{constructor(t,i,r){this.f=r,this.d=new Map,this.a=i.getProxy(q.MainThreadLocalization),this.b=t.environment.appLanguage,this.c=this.b===eo}getMessage(t,i){const{message:r,args:s,comment:n}=i;if(this.c)return x5(r,s??{});let o=r;n&&n.length>0&&(o+=`/${Array.isArray(n)?n.join(""):n}`);let a=this.d.get(t)?.contents[o];return a||/\'\w+/.test(o)&&(o=o.replaceAll("'","\\'"),a=this.d.get(t)?.contents[o]),a||this.f.warn(`Using default string since no string found in i18n bundle that has the key: ${o}`),x5(a??r,s??{})}getBundle(t){return this.d.get(t)?.contents}getBundleUri(t){return this.d.get(t)?.uri}async initializeLocalizedMessages(t){if(this.c||!t.l10n&&!t.isBuiltin||this.d.has(t.identifier.value))return;let i;const r=await this.g(t);if(!r){this.f.error(`No bundle location found for extension ${t.identifier.value}`);return}try{const s=await this.a.$fetchBundleContents(r),n=JSON.parse(s);i=t.isBuiltin?n.contents?.bundle??n:n}catch(s){this.f.error(`Failed to load translations for ${t.identifier.value} from ${r}: ${s.message}`);return}i&&this.d.set(t.identifier.value,{contents:i,uri:r})}async g(t){if(t.isBuiltin){const i=await this.a.$fetchBuiltInBundleUri(t.identifier.value,this.b);if(i)return E.revive(i)}return t.l10n?E.joinPath(t.extensionLocation,t.l10n,`bundle.l10n.${this.b}.json`):void 0}};Yw=__decorate([__param(0,Qt),__param(1,Ie),__param(2,Ce)],Yw);var Xw=V("IExtHostLocalizationService"),Zw=V("IExtHostManagedSockets"),Kw=class{constructor(t){this.b=0,this.c=null,this.d=new Map,this.a=t.getProxy(q.MainThreadManagedSockets)}setFactory(t,i){for(const r of this.d.values())r.dispose();this.c&&this.a.$unregisterSocketFactory(this.c.socketFactoryId),this.c=new bU(t,i),this.a.$registerSocketFactory(this.c.socketFactoryId)}async $openRemoteSocket(t){if(!this.c||this.c.socketFactoryId!==t)throw new Error(`No socket factory with id ${t}`);const i=++this.b,r=await this.c.makeConnection(),s=new ue;return this.d.set(i,new yU(i,r,s)),s.add(ee(()=>this.d.delete(i))),s.add(r.onDidEnd(()=>{this.a.$onDidManagedSocketEnd(i),s.dispose()})),s.add(r.onDidClose(n=>{this.a.$onDidManagedSocketClose(i,n?.stack??n?.message),s.dispose()})),s.add(r.onDidReceiveMessage(n=>this.a.$onDidManagedSocketHaveData(i,J.wrap(n)))),i}$remoteSocketWrite(t,i){this.d.get(t)?.actual.send(i.buffer)}$remoteSocketEnd(t){const i=this.d.get(t);i&&(i.actual.end(),i.dispose())}async $remoteSocketDrain(t){await this.d.get(t)?.actual.drain?.()}};Kw=__decorate([__param(0,Ie)],Kw);var bU=class{constructor(e,t){this.socketFactoryId=e,this.makeConnection=t}},yU=class extends X{constructor(e,t,i){super(),this.socketId=e,this.actual=t,this.B(i)}},eb,c8=V("IHostUtils"),tb=eb=class extends X{constructor(t,i,r,s,n,o,a,c,l,u,h,d,f){super(),this.Y=d,this.Z=f,this.a=this.B(new I),this.onDidChangeRemoteConnectionData=this.a.event,this.R=new Map,this.W=!1,this.c=i,this.g=r,this.f=a,this.j=s,this.m=n,this.s=o,this.t=l,this.u=u,this.w=h,this.y=this.g.getProxy(q.MainThreadWorkspace),this.z=this.g.getProxy(q.MainThreadTelemetry),this.C=this.g.getProxy(q.MainThreadExtensionService),this.D=new ur,this.F=new ur,this.G=new ur,this.H=new ur,this.I=new SU(this.f.extensions.activationEvents),this.L=new Vu(this.I,this.f.extensions.allExtensions);const g=new bo(this.f.extensions.myExtensions);this.J=new Vu(this.I,h8(this.L,g)),to&&(this.s.info(`Creating extension host with the following global extensions: ${kc(this.L)}`),this.s.info(`Creating extension host with the following local extensions: ${kc(this.J)}`)),this.M=new bk(this.g,this.s),this.N=new a8(this.g),this.O=c,this.h=this.q.add(t.createChild(new N1([Pw,this.M],[Qw,this.N]))),this.P=this.B(new Cw(this.J,this.L,{onExtensionActivationError:(v,y,S)=>{this.C.$onExtensionActivationError(v,Jc(y),S)},actualActivateExtension:async(v,y)=>{if(Vu.isHostExtension(v,this.J,this.L))return await this.C.$activateExtension(v,y),new RM;const S=this.J.getExtensionDescription(v);return this.fb(S,y)}},this.s)),this.Q=null,this.S=Object.create(null),this.U=!1,this.X=this.f.remote.connectionData}getRemoteConnectionData(){return this.X}async initialize(){try{await this.vb(),this.D.open(),await this.j.waitForInitializeCall(),Ct("code/extHost/ready"),this.F.open(),this.f.autoStart&&this.tb()}catch(t){Et(t)}}async $(){this.O.onWillDeactivateAll();let t=[];try{t=this.J.getAllExtensionDescriptions().map(n=>n.identifier).filter(n=>this.isActivated(n)).map(n=>this.eb(n))}catch{}await Promise.all(t)}terminate(t,i=0){if(this.W)return;this.W=!0,this.s.info(`Extension host terminating: ${t}`),this.s.flush(),this.u.dispose(),this.P.dispose(),Om(s=>{this.s.error(s)}),this.g.dispose();const r=this.$();Promise.race([bi(5e3),r]).finally(()=>{this.c.pid?this.s.info(`Extension host with pid ${this.c.pid} exiting with code ${i}`):this.s.info(`Extension host exiting with code ${i}`),this.s.flush(),this.s.dispose(),this.c.exit(i)})}isActivated(t){return this.G.isOpen()?this.P.isActivated(t):!1}async getExtension(t){const i=await this.C.$getExtension(t);return i&&{...i,identifier:new Xe(i.identifier.value),extensionLocation:E.revive(i.extensionLocation)}}ab(t,i){return this.P.activateByEvent(t,i)}bb(t,i){return this.P.activateById(t,i)}activateByIdWithErrors(t,i){return this.bb(t,i).then(()=>{const r=this.P.getActivatedExtension(t);if(r.activationFailed)return Promise.reject(r.activationFailedError)})}getExtensionRegistry(){return this.G.wait().then(t=>this.J)}getExtensionExports(t){if(this.G.isOpen())return this.P.getActivatedExtension(t).exports;try{return this.P.getActivatedExtension(t).exports}catch{return null}}async cb(t){if(t.scheme===z.file&&this.c.fsRealpath){const i=t.fsPath;this.R.has(i)||this.R.set(i,this.c.fsRealpath(i));const r=await this.R.get(i);return E.file(r)}return t}async getExtensionPathIndex(){return this.Q||(this.Q=this.db(this.J.getAllExtensionDescriptions()).then(t=>new EU(t))),this.Q}async db(t){const i=wn.forUris(r=>t1.ignorePathCasing(r));return await Promise.all(t.map(async r=>{if(this.wb(r)){const s=await this.cb(r.extensionLocation);i.set(s,r)}})),i}eb(t){let i=Promise.resolve(void 0);if(!this.G.isOpen()||!this.P.isActivated(t))return i;const r=this.P.getActivatedExtension(t);if(!r)return i;try{typeof r.module.deactivate=="function"&&(i=Promise.resolve(r.module.deactivate()).then(void 0,s=>(this.s.error(s),Promise.resolve(void 0))))}catch(s){this.s.error(`An error occurred when deactivating the extension '${t.value}':`),this.s.error(s)}try{r.disposable.dispose()}catch(s){this.s.error(`An error occurred when disposing the subscriptions for extension '${t.value}':`),this.s.error(s)}return i}async fb(t,i){return this.f.remote.isRemote?this.C.$onWillActivateExtension(t.identifier):await this.C.$onWillActivateExtension(t.identifier),this.hb(t,i).then(r=>{const s=r.activationTimes;return this.C.$onDidActivateExtension(t.identifier,s.codeLoadingTime,s.activateCallTime,s.activateResolvedTime,i),this.gb(t,i,"success",s),r},r=>{throw this.gb(t,i,"failure"),r})}gb(t,i,r,s){const n=u8(t,i);this.z.$publicLog2("extensionActivationTimes",{...n,...s||{},outcome:r})}hb(t,i){const r=u8(t,i);this.z.$publicLog2("activatePlugin",r);const s=this.wb(t);if(!s)return Promise.resolve(new AM(rg.NONE));this.s.info(`ExtensionService#_doActivateExtension ${t.identifier.value}, startup: ${i.startup}, activationEvent: '${i.activationEvent}'${t.identifier.value!==i.extensionId.value?`, root cause: ${i.extensionId.value}`:""}`),this.s.flush();const n=new ue,o=new wk(i.startup);return Promise.all([this.xb(t,Rt(t.extensionLocation,s),o),this.ib(t,n)]).then(a=>(Ct(`code/extHost/willActivateExtension/${t.identifier.value}`),this.yb(t,"willActivateExtension"),eb.jb(this.s,t.identifier,a[0],a[1],n,o))).then(a=>(Ct(`code/extHost/didActivateExtension/${t.identifier.value}`),this.yb(t,"didActivateExtension"),a))}ib(t,i){const r=this.Z.createLanguageModelAccessInformation(t),s=i.add(new TM(t,this.M)),n=i.add(new yk(t.identifier.value,!1,this.M)),o=i.add(new wU(t,this.N)),a=t.isUnderDevelopment?this.f.environment.extensionTestsLocationURI?ic.Test:ic.Development:ic.Production,c=this.f.remote.isRemote?Oo.Workspace:Oo.UI;return this.s.trace(`ExtensionService#loadExtensionContext ${t.identifier.value}`),Promise.all([s.whenReady,n.whenReady,this.O.whenReady]).then(()=>{const l=this;let u,h;const d=Yt(t,"ipc")?this.f.messagePorts?.get(Xe.toKey(t.identifier)):void 0;return Object.freeze({globalState:s,workspaceState:n,secrets:o,subscriptions:[],get languageModelAccessInformation(){return r},get extensionUri(){return t.extensionLocation},get extensionPath(){return t.extensionLocation.fsPath},asAbsolutePath(f){return rt(t.extensionLocation.fsPath,f)},get storagePath(){return l.O.workspaceValue(t)?.fsPath},get globalStoragePath(){return l.O.globalValue(t).fsPath},get logPath(){return rt(l.f.logsLocation.fsPath,t.identifier.value)},get logUri(){return E.joinPath(l.f.logsLocation,t.identifier.value)},get storageUri(){return l.O.workspaceValue(t)},get globalStorageUri(){return l.O.globalValue(t)},get extensionMode(){return a},get extension(){return u===void 0&&(u=new Xu(l,t.identifier,t,c,!1)),u},get extensionRuntime(){return A(t,"extensionRuntime"),l.extensionRuntime},get environmentVariableCollection(){return l.u.getEnvironmentVariableCollection(t)},get messagePassingProtocol(){if(!h){if(!d)return;const f=ze.buffer(ze.fromDOMEventEmitter(d,"message",g=>g.data));d.start(),h={onDidReceiveMessage:f,postMessage:d.postMessage.bind(d)}}return h}})})}static jb(t,i,r,s,n,o){return r=r||{activate:void 0,deactivate:void 0},this.kb(t,i,r,s,o).then(a=>new sg(!1,null,o.build(),r,a,ee(()=>{n.dispose(),Sr(s.subscriptions)})))}static kb(t,i,r,s,n){if(typeof r.activate=="function")try{n.activateCallStart(),t.trace(`ExtensionService#_callActivateOptional ${i.value}`);const o=typeof global=="object"?global:self,a=r.activate.apply(o,[s]);return n.activateCallStop(),n.activateResolveStart(),Promise.resolve(a).then(c=>(n.activateResolveStop(),c))}catch(o){return Promise.reject(o)}else return Promise.resolve(r)}lb(t,i){this.bb(t.identifier,{startup:!1,extensionId:t.identifier,activationEvent:i}).then(void 0,r=>{this.s.error(r)})}mb(t,i=0){const s=Date.now();d5(()=>{for(let n=i;n<t.length;n+=1){const o=t[n];for(const a of o.activationEvents??[])if(a==="onStartupFinished")if(Date.now()-s>50){this.mb(t,n);break}else this.lb(o,a)}})}nb(){this.C.$setPerformanceMarks(LR()),this.m.getConfigProvider().then(t=>{const i=t.getConfiguration("extensions.experimental").get("deferredStartupFinishedActivation"),r=this.J.getAllExtensionDescriptions();if(i)this.mb(r);else for(const s of r)if(s.activationEvents)for(const n of s.activationEvents)n==="onStartupFinished"&&this.lb(s,n)})}ob(){const t=this.ab("*",!0).then(void 0,o=>{this.s.error(o)});this.B(this.j.onDidChangeWorkspace(o=>this.pb(o.added)));const i=this.j.workspace?this.j.workspace.folders:[],r=this.pb(i),s=this.rb(),n=Promise.all([s,t,r]).then(()=>{});return Promise.race([n,bi(1e4)]).then(()=>{this.nb()}),n}pb(t){return t.length===0?Promise.resolve(void 0):Promise.all(this.J.getAllExtensionDescriptions().map(i=>this.qb(t,i))).then(()=>{})}async qb(t,i){if(this.isActivated(i.identifier))return;const r=!this.f.remote.isRemote&&!!this.f.remote.authority,s={logService:this.s,folders:t.map(o=>o.uri),forceUsingSearch:r||!this.c.fsExists,exists:o=>this.c.fsExists(o.fsPath),checkExists:(o,a,c)=>this.y.$checkExists(o,a,c)},n=await gU(s,i);if(n)return this.bb(i.identifier,{startup:!0,extensionId:i.identifier,activationEvent:n.activationEvent}).then(void 0,o=>this.s.error(o))}async rb(){if(this.f.remote.authority)return this.ab(`onResolveRemoteAuthority:${this.f.remote.authority}`,!1)}async $extensionTestsExecute(){await this.H.wait();try{return await this.sb()}catch(t){throw console.error(t),t}}async sb(){const{extensionDevelopmentLocationURI:t,extensionTestsLocationURI:i}=this.f.environment;if(!t||!i)throw new Error(p(3006,null));const r=await this.xb(null,i,new wk(!1));if(!r||typeof r.run!="function")throw new Error(p(3007,null,i.toString()));return new Promise((s,n)=>{const o=(l,u)=>{l?(to&&this.s.error("Test runner called back with error",l),n(l)):(to&&(u?this.s.info(`Test runner called back with ${u} failures.`):this.s.info("Test runner called back with successful outcome.")),s(typeof u=="number"&&u>0?1:0))},a=$r(i),c=r.run(a,o);c&&c.then&&c.then(()=>{to&&this.s.info("Test runner finished successfully."),s(0)}).catch(l=>{to&&this.s.error("Test runner finished with error",l),n(l instanceof Error&&l.stack?l.stack:String(l))})})}tb(){if(this.U)throw new Error("Extension host is already started!");return this.U=!0,this.F.wait().then(()=>this.G.open()).then(()=>Promise.race([this.P.waitForActivatingExtensions(),bi(1e3)])).then(()=>this.ob()).then(()=>{this.H.open(),this.s.info("Eager extensions activated")})}registerRemoteAuthorityResolver(t,i){return this.S[t]=i,ee(()=>{delete this.S[t]})}async getRemoteExecServer(t){const{resolver:i}=await this.ub(t);return i?.resolveExecServer?.(t,{resolveAttempt:0})}async ub(t){const i=t.indexOf("+");if(i===-1)throw new Ma("Not an authority that can be resolved!",Ai.InvalidAuthority);const r=t.substr(0,i);return await this.D.wait(),await this.ab(`onResolveRemoteAuthority:${r}`,!1),{authorityPrefix:r,resolver:this.S[r]}}async $resolveAuthority(t,i){const r=ri.create(!1),s=()=>`[resolveAuthority(${ex(t)},${i})][${r.elapsed()}ms] `,n=x=>this.s.info(`${s()}${x}`),o=x=>this.s.warn(`${s()}${x}`),a=(x,P=void 0)=>this.s.error(`${s()}${x}`,P),c=x=>{if(x instanceof Ma)return{type:"error",error:{code:x._code,message:x._message,detail:x._detail}};throw x},l=async x=>{n(`activating resolver for ${x}...`);const{resolver:P,authorityPrefix:D}=await this.ub(x);if(!P)throw a(`no resolver for ${D}`),new Ma(`No remote extension installed to resolve ${D}.`,Ai.NoResolverFound);return{resolver:P,authorityPrefix:D,remoteAuthority:x}},u=t.split(/@|%40/g).reverse();n(`activating remote resolvers ${u.join(" -> ")}`);let h;try{h=await Promise.all(u.map(l)).catch(async x=>{if(!(x instanceof Ma)||x._code!==Ai.InvalidAuthority)throw x;return o(`resolving nested authorities failed: ${x.message}`),[await l(t)]})}catch(x){return c(x)}const d=new hE;d.cancelAndSet(()=>n("waiting..."),1e3);let f,g;for(const[x,{authorityPrefix:P,resolver:D,remoteAuthority:N}]of h.entries())try{if(x===h.length-1)n("invoking final resolve()..."),Ct(`code/extHost/willResolveAuthority/${P}`),f=await D.resolve(N,{resolveAttempt:i,execServer:g}),Ct(`code/extHost/didResolveAuthorityOK/${P}`),n("setting tunnel factory..."),this.B(await this.t.setTunnelFactory(D,bf.isManagedResolvedAuthority(f)?f:void 0));else{if(n(`invoking resolveExecServer() for ${N}`),Ct(`code/extHost/willResolveExecServer/${P}`),g=await D.resolveExecServer?.(N,{resolveAttempt:i,execServer:g}),!g)throw new Ma(`Exec server was not available for ${N}`,Ai.NoResolverFound);Ct(`code/extHost/didResolveExecServerOK/${P}`)}}catch(H){return Ct(`code/extHost/didResolveAuthorityError/${P}`),a("returned an error",H),d.dispose(),c(H)}d.dispose();const v={environmentTunnels:f.environmentTunnels,features:f.tunnelFeatures?{elevation:f.tunnelFeatures.elevation,privacyOptions:f.tunnelFeatures.privacyOptions,protocol:f.tunnelFeatures.protocol===void 0?!0:f.tunnelFeatures.protocol}:void 0},y={extensionHostEnv:f.extensionHostEnv,isTrusted:f.isTrusted,authenticationSession:f.authenticationSessionForInitializingExtensions?{id:f.authenticationSessionForInitializingExtensions.id,providerId:f.authenticationSessionForInitializingExtensions.providerId}:void 0};n(`returned ${bf.isManagedResolvedAuthority(f)?"managed authority":`${f.host}:${f.port}`}`);let S;if(bf.isManagedResolvedAuthority(f)){const x=i;this.Y.setFactory(x,f.makeConnection),S={authority:t,connectTo:new K9(x),connectionToken:f.connectionToken}}else S={authority:t,connectTo:new CF(f.host,f.port),connectionToken:f.connectionToken};return{type:"ok",value:{authority:S,options:y,tunnelInformation:v}}}async $getCanonicalURI(t,i){this.s.info(`$getCanonicalURI invoked for authority (${ex(t)})`);const{resolver:r}=await this.ub(t);if(!r)return null;const s=E.revive(i);if(typeof r.getCanonicalURI>"u")return s;const n=await hi(()=>r.getCanonicalURI(s));return n||s}async $startExtensionHost(t){t.toAdd.forEach(o=>o.extensionLocation=E.revive(o.extensionLocation));const{globalRegistry:i,myExtensions:r}=l8(this.I,this.L,this.J,t),s=await this.db(r);return(await this.getExtensionPathIndex()).setSearchTree(s),this.L.set(i.getAllExtensionDescriptions()),this.J.set(r),to&&(this.s.info(`$startExtensionHost: global extensions: ${kc(this.L)}`),this.s.info(`$startExtensionHost: local extensions: ${kc(this.J)}`)),this.tb()}$activateByEvent(t,i){return i===1?this.D.wait().then(r=>this.ab(t,!1)):this.G.wait().then(r=>this.ab(t,!1))}async $activate(t,i){return await this.G.wait(),this.J.getExtensionDescription(t)?(await this.bb(t,i),!0):!1}async $deltaExtensions(t){t.toAdd.forEach(o=>o.extensionLocation=E.revive(o.extensionLocation));const{globalRegistry:i,myExtensions:r}=l8(this.I,this.L,this.J,t),s=await this.db(r);return(await this.getExtensionPathIndex()).setSearchTree(s),this.L.set(i.getAllExtensionDescriptions()),this.J.set(r),to&&(this.s.info(`$deltaExtensions: global extensions: ${kc(this.L)}`),this.s.info(`$deltaExtensions: local extensions: ${kc(this.J)}`)),Promise.resolve(void 0)}async $test_latency(t){return t}async $test_up(t){return t.byteLength}async $test_down(t){const i=J.alloc(t),r=Math.random()%256;for(let s=0;s<t;s++)i.writeUInt8(r,s);return i}async $updateRemoteConnectionData(t){this.X=t,this.a.fire()}};tb=eb=__decorate([__param(0,Sd),__param(1,c8),__param(2,Ie),__param(3,Fr),__param(4,gr),__param(5,Ce),__param(6,Qt),__param(7,Aw),__param(8,ag),__param(9,Ws),__param(10,Xw),__param(11,Zw),__param(12,Bw)],tb);function l8(e,t,i,r){e.addActivationEvents(r.addActivationEvents);const s=new Vu(e,t.getAllExtensionDescriptions());s.deltaExtensions(r.toAdd,r.toRemove);const n=new bo(i.getAllExtensionDescriptions().map(a=>a.identifier));for(const a of r.myToRemove)n.delete(a);for(const a of r.myToAdd)n.add(a);const o=h8(s,n);return{globalRegistry:s,myExtensions:o}}function u8(e,t){return{id:e.identifier.value,name:e.name,extensionVersion:e.version,publisherDisplayName:e.publisher,activationEvents:e.activationEvents?e.activationEvents.join(","):null,isBuiltin:e.isBuiltin,reason:t.activationEvent,reasonId:t.extensionId.value}}function kc(e){return e.getAllExtensionDescriptions().map(t=>t.identifier.value).join(",")}var zs=V("IExtHostExtensionService"),Xu=class{#e;#t;#i;constructor(e,t,i,r,s){this.#e=e,this.#t=t,this.#i=i.identifier,this.id=i.identifier.value,this.extensionUri=i.extensionLocation,this.extensionPath=ys($r(i.extensionLocation)),this.packageJSON=i,this.extensionKind=r,this.isFromDifferentExtensionHost=s}get isActive(){return this.#e.isActivated(this.#i)}get exports(){if(!(this.packageJSON.api==="none"||this.isFromDifferentExtensionHost))return this.#e.getExtensionExports(this.#i)}async activate(){if(this.isFromDifferentExtensionHost)throw new Error("Cannot activate foreign extension");return await this.#e.activateByIdWithErrors(this.#i,{startup:!1,extensionId:this.#t,activationEvent:"api"}),this.exports}};function h8(e,t){return e.getAllExtensionDescriptions().filter(i=>t.has(i.identifier))}var EU=class{constructor(e){this.a=e}setSearchTree(e){this.a=e}findSubstr(e){return this.a.findSubstr(e)}forEach(e){return this.a.forEach(e)}},SU=class{constructor(e){this.a=new Rs,this.addActivationEvents(e)}readActivationEvents(e){return this.a.get(e.identifier)??[]}addActivationEvents(e){for(const t of Object.keys(e))this.a.set(t,e[t])}},d8=class{static async installEarlyHandler(e){Error.stackTraceLimit=100;const t=e.get(Ce),r=e.get(Ie).getProxy(q.MainThreadErrors);Om(s=>{t.error(s);const n=Jc(s);r.$onUnexpectedError(n)})}static async installFullHandler(e){const t=e.get(Ce),i=e.get(Ie),r=e.get(zs),s=e.get(lg),n=i.getProxy(q.MainThreadExtensionService),o=i.getProxy(q.MainThreadErrors),a=await r.getExtensionPathIndex(),c=new WeakMap;function l(d,f){if(c.has(d))return c.get(d).stack;let g="",v,y;for(const x of f)g+=`
	at ${x.toString()}`,y=x.getFileName(),!v&&y&&(v=a.findSubstr(E.file(y)));const S=`${d.name||"Error"}: ${d.message||""}${g}`;return c.set(d,{extensionIdentifier:v?.identifier,stack:S}),S}const u=Symbol("prepareStackTrace wrapped");let h=l;Object.defineProperty(Error,"prepareStackTrace",{configurable:!1,get(){return h},set(d){if(d===l||!d||d[u]){h=d||l;return}h=function(f,g){return l(f,g),d.call(Error,f,g)},Object.assign(h,{[u]:!0})}}),Om(d=>{t.error(d);const f=Jc(d),g=c.get(d);if(!g?.extensionIdentifier){o.$onUnexpectedError(f);return}n.$onExtensionRuntimeError(g.extensionIdentifier,f);const v=s.onExtensionError(g.extensionIdentifier,d);t.trace("forwarded error to extension?",v,g)})}},xU=class _I{constructor(t,i,r,s,n){this.a=r,this.b=new LT(t,null,s),i=_I.e(i,this.b);const o=new N1(...nL());o.set(Qt,{_serviceBrand:void 0,...i,messagePorts:n}),o.set(Ie,new lL(this.b)),o.set(bl,new uL(s)),o.set(c8,r);const a=new cL(o,!0);a.invokeFunction(d8.installEarlyHandler),this.d=a.invokeFunction(c=>c.get(Ce)),Ct("code/extHost/didCreateServices"),this.a.pid?this.d.info(`Extension host with pid ${this.a.pid} started`):this.d.info("Extension host started"),this.d.trace("initData",i),this.c=a.invokeFunction(c=>c.get(zs)),this.c.initialize(),a.invokeFunction(d8.installFullHandler)}async asBrowserUri(t){const i=this.b.getProxy(q.MainThreadExtensionService);return E.revive(await i.$asBrowserUri(t))}terminate(t){this.c.terminate(t)}static e(t,i){t.extensions.allExtensions.forEach(s=>{s.extensionLocation=E.revive(i.transformIncomingURIs(s.extensionLocation))}),t.environment.appRoot=E.revive(i.transformIncomingURIs(t.environment.appRoot));const r=t.environment.extensionDevelopmentLocationURI;return r&&(t.environment.extensionDevelopmentLocationURI=r.map(s=>E.revive(i.transformIncomingURIs(s)))),t.environment.extensionTestsLocationURI=E.revive(i.transformIncomingURIs(t.environment.extensionTestsLocationURI)),t.environment.globalStorageHome=E.revive(i.transformIncomingURIs(t.environment.globalStorageHome)),t.environment.workspaceStorageHome=E.revive(i.transformIncomingURIs(t.environment.workspaceStorageHome)),t.environment.extensionTelemetryLogResource=E.revive(i.transformIncomingURIs(t.environment.extensionTelemetryLogResource)),t.nlsBaseUrl=E.revive(i.transformIncomingURIs(t.nlsBaseUrl)),t.logsLocation=E.revive(i.transformIncomingURIs(t.logsLocation)),t.customLogsLocation=E.revive(i.transformIncomingURIs(t.customLogsLocation)),t.workspace=i.transformIncomingURIs(t.workspace),t}};function kU(e){return{transformIncoming:t=>t.scheme==="vscode-remote"?{scheme:"file",path:t.path,query:t.query,fragment:t.fragment}:t.scheme==="file"?{scheme:"vscode-local",path:t.path,query:t.query,fragment:t.fragment}:t,transformOutgoing:t=>t.scheme==="file"?{scheme:"vscode-remote",authority:e,path:t.path,query:t.query,fragment:t.fragment}:t.scheme==="vscode-local"?{scheme:"file",path:t.path,query:t.query,fragment:t.fragment}:t,transformOutgoingScheme:t=>t==="file"?"vscode-remote":t==="vscode-local"?"file":t}}function $U(e){return new CT(kU(e))}var f8;(function(e){e[e.IPC=1]="IPC",e[e.Socket=2]="Socket",e[e.MessagePort=3]="MessagePort"})(f8||(f8={}));var pg=class jI{static{this.ENV_KEY="VSCODE_EXTHOST_IPC_HOOK"}constructor(t){this.pipeName=t,this.type=1}serialize(t){t[jI.ENV_KEY]=this.pipeName}},ib=class HI{constructor(){this.type=2}static{this.ENV_KEY="VSCODE_EXTHOST_WILL_SEND_SOCKET"}serialize(t){t[HI.ENV_KEY]="1"}},rb=class BI{constructor(){this.type=3}static{this.ENV_KEY="VSCODE_WILL_SEND_MESSAGE_PORT"}serialize(t){t[BI.ENV_KEY]="1"}};function CU(e){delete e[pg.ENV_KEY],delete e[ib.ENV_KEY],delete e[rb.ENV_KEY]}function IU(e){if(e[pg.ENV_KEY])return sb(e,new pg(e[pg.ENV_KEY]));if(e[ib.ENV_KEY])return sb(e,new ib);if(e[rb.ENV_KEY])return sb(e,new rb);throw new Error("No connection information defined in environment!")}function sb(e,t){return CU(e),t}var fY=new j("inOutput",!1),pY=new j("activeLogOutput",!1),gY=new j("activeLogOutput.levelSettable",!1),mY=new j("activeLogOutput.level",""),vY=new j("activeLogOutput.levelIsDefault",!1),wY=new j("outputView.scrollLock",!1),bY=V("outputService"),Zu;(function(e){e[e.Append=1]="Append",e[e.Replace=2]="Replace",e[e.Clear=3]="Clear"})(Zu||(Zu={}));var PU={OutputChannels:"workbench.contributions.outputChannels"},DU=class{constructor(){this.a=new Map,this.b=new I,this.onDidRegisterChannel=this.b.event,this.c=new I,this.onDidRemoveChannel=this.c.event}registerChannel(e){this.a.has(e.id)||(this.a.set(e.id,e),this.b.fire(e.id))}getChannels(){const e=[];return this.a.forEach(t=>e.push(t)),e}getChannel(e){return this.a.get(e)}removeChannel(e){this.a.delete(e),this.c.fire(e)}};ai.add(PU.OutputChannels,new DU);var yY=new j("activeOutputChannel",""),AU=60,RU=AU*60,nb=RU*24,EY=nb*7,SY=nb*30,xY=nb*365;function TU(e){return e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")+"T"+String(e.getHours()).padStart(2,"0")+":"+String(e.getMinutes()).padStart(2,"0")+":"+String(e.getSeconds()).padStart(2,"0")+"."+(e.getMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}var p8=class extends L1{constructor(e,t,i,r,s){super(),this.id=e,this.name=t,this.n=i,this.r=r,this.extension=s,this.m=0,this.visible=!1,this.setLevel(i.getLevel()),this.B(i.onDidChangeLogLevel(n=>this.setLevel(n))),this.B(ee(()=>this.r.$dispose(this.id)))}get logLevel(){return this.getLevel()}appendLine(e){this.append(e+`
`)}append(e){this.info(e)}clear(){const e=this.m;this.n.flush(),this.r.$update(this.id,Zu.Clear,e)}replace(e){const t=this.m;this.info(e),this.r.$update(this.id,Zu.Replace,t),this.visible&&this.n.flush()}show(e,t){this.n.flush(),this.r.$reveal(this.id,!!(typeof e=="boolean"?e:t))}hide(){this.r.$close(this.id)}g(e,t){this.m+=J.fromString(t).byteLength,eL(this.n,e,t),this.visible&&(this.n.flush(),this.r.$update(this.id,Zu.Append))}},LU=class extends p8{appendLine(e){this.append(e)}},ob=class{constructor(t,i,r,s,n,o){this.i=i,this.j=r,this.k=s,this.l=n,this.m=o,this.d=new Map,this.f=1,this.g=new Map,this.h=null,this.a=t.getProxy(q.MainThreadOutputService);const a=`output_logging_${TU(new Date).replace(/-|:|\.\d+Z$/g,"")}`,c=i.customLogsLocation||i.logsLocation;this.b=this.k.extUri.joinPath(c,a)}$setVisibleChannel(t){this.h=t;for(const[i,r]of this.g)r.visible=i===this.h}createOutputChannel(t,i,r){if(t=t.trim(),!t)throw new Error("illegal argument `name`. must not be falsy");const s=typeof i=="object"&&i.log,n=De(i)?i:void 0;if(De(n)&&!n.trim())throw new Error("illegal argument `languageId`. must not be empty");let o;const a=this.i.environment.extensionLogLevel?.find(([u])=>Xe.equals(r.identifier,u))?.[1];a&&(o=sL(a));const c=new ue,l=s?this.o(t,o,r,c):this.n(t,n,r,c);return l.then(u=>{this.g.set(u.id,u),u.visible=u.id===this.h,c.add(ee(()=>this.g.delete(u.id)))}),s?this.r(t,o??this.m.getLevel(),l,c):this.q(t,l,c)}async n(t,i,r,s){this.c||(this.c=this.j.value.createDirectory(this.b).then(()=>this.b));const n=await this.c,o=this.k.extUri.joinPath(n,`${this.f++}-${t.replace(/[\\/:\*\?"<>\|]/g,"")}.log`),a=s.add(this.l.createLogger(o,{logLevel:"always",donotRotate:!0,donotUseFormatters:!0,hidden:!0})),c=await this.a.$register(t,o,i,r.identifier.value);return s.add(ee(()=>this.l.deregisterLogger(o))),new p8(c,t,a,this.a,r)}async o(t,i,r,s){const n=await this.p(r),o=t.replace(/[\\/:\*\?"<>\|]/g,""),a=this.k.extUri.joinPath(n,`${o}.log`),c=`${r.identifier.value}.${o}`,l=s.add(this.l.createLogger(a,{id:c,name:t,logLevel:i,extensionId:r.identifier.value}));return s.add(ee(()=>this.l.deregisterLogger(a))),new LU(c,t,l,this.a,r)}p(t){let i=this.d.get(t.identifier.value);if(!i){const r=this.i.customLogsLocation||this.i.logsLocation,s=this.k.extUri.joinPath(r,t.identifier.value);this.d.set(t.identifier.value,i=(async()=>{try{await this.j.value.createDirectory(s)}catch(n){if(Md(n)!==se.FileExists)throw n}return s})())}return i}q(t,i,r){const s=()=>{if(r.isDisposed)throw new Error("Channel has been closed")};return i.then(n=>r.add(n)),{get name(){return t},append(n){s(),i.then(o=>o.append(n))},appendLine(n){s(),i.then(o=>o.appendLine(n))},clear(){s(),i.then(n=>n.clear())},replace(n){s(),i.then(o=>o.replace(n))},show(n,o){s(),i.then(a=>a.show(n,o))},hide(){s(),i.then(n=>n.hide())},dispose(){r.dispose()}}}r(t,i,r,s){const n=()=>{if(s.isDisposed)throw new Error("Channel has been closed")},o=s.add(new I);function a(c){i=c,o.fire(c)}return r.then(c=>{c.logLevel!==i&&a(c.logLevel),s.add(c.onDidChangeLogLevel(l=>a(l)))}),{...this.q(t,r,s),get logLevel(){return i},onDidChangeLogLevel:o.event,trace(c,...l){n(),r.then(u=>u.trace(c,...l))},debug(c,...l){n(),r.then(u=>u.debug(c,...l))},info(c,...l){n(),r.then(u=>u.info(c,...l))},warn(c,...l){n(),r.then(u=>u.warn(c,...l))},error(c,...l){n(),r.then(u=>u.error(c,...l))}}}};ob=__decorate([__param(0,Ie),__param(1,Qt),__param(2,qu),__param(3,$a),__param(4,xa),__param(5,Ce)],ob);var g8=V("IExtHostOutputService"),Ku,ab=class{static{Ku=this}static{this.c=0}static{this.d=250}constructor(t,i){this.h=i,this.f=new Map,this.g=t.getProxy(q.MainThreadDecorations)}registerFileDecorationProvider(t,i){const r=Ku.c++;this.f.set(r,{provider:t,extensionDescription:i}),this.g.$registerDecorationProvider(r,i.identifier.value);const s=t.onDidChangeFileDecorations&&t.onDidChangeFileDecorations(n=>{if(!n){this.g.$onDidChange(r,null);return}const o=Er(n);if(o.length<=Ku.d){this.g.$onDidChange(r,o);return}this.h.warn("[Decorations] CAPPING events from decorations provider",i.identifier.value,o.length);const a=o.map(u=>({uri:u,rank:lA(u.path,"/")})),c=nD(a,(u,h)=>u.rank-h.rank||no(u.uri.path,h.uri.path)),l=[];e:for(const u of c){let h;for(const d of u){const f=wi(d.uri.path);if(h!==f&&(h=f,l.push(d.uri)>=Ku.d))break e}}this.g.$onDidChange(r,l)});return new Oe(()=>{s?.dispose(),this.g.$unregisterDecorationProvider(r),this.f.delete(r)})}async $provideDecorations(t,i,r){if(!this.f.has(t))return Object.create(null);const s=Object.create(null),{provider:n,extensionDescription:o}=this.f.get(t);return await Promise.all(i.map(async a=>{try{const{uri:c,id:l}=a,u=await Promise.resolve(n.provideFileDecoration(E.revive(c),r));if(!u)return;try{o0.validate(u),u.badge&&typeof u.badge!="string"&&A(o,"codiconDecoration"),s[l]=[u.propagate,u.tooltip,u.badge,u.color]}catch(h){this.h.warn(`INVALID decoration from extension '${o.identifier.value}': ${h}`)}}catch(c){this.h.error(c)}})),s}};ab=Ku=__decorate([__param(0,Ie),__param(1,Ce)],ab);var m8=V("IExtHostDecorations"),NU=class{constructor(e){this.a=e,this.b=new Uint32Array(e.length),this.c=new Int32Array(1),this.c[0]=-1}getCount(){return this.a.length}insertValues(e,t){e=xc(e);const i=this.a,r=this.b,s=t.length;return s===0?!1:(this.a=new Uint32Array(i.length+s),this.a.set(i.subarray(0,e),0),this.a.set(i.subarray(e),e+s),this.a.set(t,e),e-1<this.c[0]&&(this.c[0]=e-1),this.b=new Uint32Array(this.a.length),this.c[0]>=0&&this.b.set(r.subarray(0,this.c[0]+1)),!0)}setValue(e,t){return e=xc(e),t=xc(t),this.a[e]===t?!1:(this.a[e]=t,e-1<this.c[0]&&(this.c[0]=e-1),!0)}removeValues(e,t){e=xc(e),t=xc(t);const i=this.a,r=this.b;if(e>=i.length)return!1;const s=i.length-e;return t>=s&&(t=s),t===0?!1:(this.a=new Uint32Array(i.length-t),this.a.set(i.subarray(0,e),0),this.a.set(i.subarray(e+t),e),this.b=new Uint32Array(this.a.length),e-1<this.c[0]&&(this.c[0]=e-1),this.c[0]>=0&&this.b.set(r.subarray(0,this.c[0]+1)),!0)}getTotalSum(){return this.a.length===0?0:this.d(this.a.length-1)}getPrefixSum(e){return e<0?0:(e=xc(e),this.d(e))}d(e){if(e<=this.c[0])return this.b[e];let t=this.c[0]+1;t===0&&(this.b[0]=this.a[0],t++),e>=this.a.length&&(e=this.a.length-1);for(let i=t;i<=e;i++)this.b[i]=this.b[i-1]+this.a[i];return this.c[0]=Math.max(this.c[0],e),this.b[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,i=this.a.length-1,r=0,s=0,n=0;for(;t<=i;)if(r=t+(i-t)/2|0,s=this.b[r],n=s-this.a[r],e<n)i=r-1;else if(e>=s)t=r+1;else break;return new OU(r,e-n)}},OU=class{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}},FU=class{constructor(e,t,i,r){this.a=e,this.b=t,this.c=i,this.d=r,this.f=null,this.g=null}dispose(){this.b.length=0}get version(){return this.d}getText(){return this.g===null&&(this.g=this.b.join(this.c)),this.g}onEvents(e){e.eol&&e.eol!==this.c&&(this.c=e.eol,this.f=null);const t=e.changes;for(const i of t)this.k(i.range),this.l(new er(i.range.startLineNumber,i.range.startColumn),i.text);this.d=e.versionId,this.g=null}h(){if(!this.f){const e=this.c.length,t=this.b.length,i=new Uint32Array(t);for(let r=0;r<t;r++)i[r]=this.b[r].length+e;this.f=new NU(i)}}j(e,t){this.b[e]=t,this.f&&this.f.setValue(e,this.b[e].length+this.c.length)}k(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this.j(e.startLineNumber-1,this.b[e.startLineNumber-1].substring(0,e.startColumn-1)+this.b[e.startLineNumber-1].substring(e.endColumn-1));return}this.j(e.startLineNumber-1,this.b[e.startLineNumber-1].substring(0,e.startColumn-1)+this.b[e.endLineNumber-1].substring(e.endColumn-1)),this.b.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this.f&&this.f.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}l(e,t){if(t.length===0)return;const i=C5(t);if(i.length===1){this.j(e.lineNumber-1,this.b[e.lineNumber-1].substring(0,e.column-1)+i[0]+this.b[e.lineNumber-1].substring(e.column-1));return}i[i.length-1]+=this.b[e.lineNumber-1].substring(e.column-1),this.j(e.lineNumber-1,this.b[e.lineNumber-1].substring(0,e.column-1)+i[0]);const r=new Uint32Array(i.length-1);for(let s=1;s<i.length;s++)this.b.splice(e.lineNumber+s-1,0,i[s]),r[s-1]=i[s].length+this.c.length;this.f&&this.f.insertValues(e.lineNumber,r)}},cb=new Map;function MU(e,t){t?cb.set(e,t):cb.delete(e)}function UU(e){return cb.get(e)}var _U=class extends FU{constructor(e,t,i,r,s,n,o){super(t,i,r,s),this.o=e,this.p=n,this.q=o,this.n=!1}dispose(){Wi(!this.n),this.n=!0,this.q=!1}equalLines(e){return Vr(this.b,e)}get document(){if(!this.m){const e=this;this.m={get uri(){return e.a},get fileName(){return e.a.fsPath},get isUntitled(){return e.a.scheme===z.untitled},get languageId(){return e.p},get version(){return e.d},get isClosed(){return e.n},get isDirty(){return e.q},save(){return e.r()},getText(t){return t?e.s(t):e.getText()},get eol(){return e.c===`
`?Lr.LF:Lr.CRLF},get lineCount(){return e.b.length},lineAt(t){return e.t(t)},offsetAt(t){return e.u(t)},positionAt(t){return e.v(t)},validateRange(t){return e.w(t)},validatePosition(t){return e.x(t)},getWordRangeAtPosition(t,i){return e.y(t,i)},[Symbol.for("debug.description")](){return`TextDocument(${e.a.toString()})`}}}return Object.freeze(this.m)}_acceptLanguageId(e){Wi(!this.n),this.p=e}_acceptIsDirty(e){Wi(!this.n),this.q=e}r(){return this.n?Promise.reject(new Error("Document has been closed")):this.o.$trySaveDocument(this.a)}s(e){const t=this.w(e);if(t.isEmpty)return"";if(t.isSingleLine)return this.b[t.start.line].substring(t.start.character,t.end.character);const i=this.c,r=t.start.line,s=t.end.line,n=[];n.push(this.b[r].substring(t.start.character));for(let o=r+1;o<s;o++)n.push(this.b[o]);return n.push(this.b[s].substring(0,t.end.character)),n.join(i)}t(e){let t;if(e instanceof Pe?t=e.line:typeof e=="number"&&(t=e),typeof t!="number"||t<0||t>=this.b.length||Math.floor(t)!==t)throw new Error("Illegal value for `line`");return new jU(t,this.b[t],t===this.b.length-1)}u(e){return e=this.x(e),this.h(),this.f.getPrefixSum(e.line-1)+e.character}v(e){e=Math.floor(e),e=Math.max(0,e),this.h();const t=this.f.getIndexOf(e),i=this.b[t.index].length;return new Pe(t.index,Math.min(t.remainder,i))}w(e){if(!(e instanceof Se))throw new Error("Invalid argument");const t=this.x(e.start),i=this.x(e.end);return t===e.start&&i===e.end?e:new Se(t.line,t.character,i.line,i.character)}x(e){if(!(e instanceof Pe))throw new Error("Invalid argument");if(this.b.length===0)return e.with(0,0);let{line:t,character:i}=e,r=!1;if(t<0)t=0,i=0,r=!0;else if(t>=this.b.length)t=this.b.length-1,i=this.b[t].length,r=!0;else{const s=this.b[t].length;i<0?(i=0,r=!0):i>s&&(i=s,r=!0)}return r?new Pe(t,i):e}y(e,t){const i=this.x(e);if(!t)t=UU(this.p);else if($5(t))throw new Error(`[getWordRangeAtPosition]: ignoring custom regexp '${t.source}' because it matches the empty string.`);const r=eS(i.character+1,ZE(t),this.b[i.line],0);if(r)return new Se(i.line,r.startColumn-1,i.line,r.endColumn-1)}},jU=class{constructor(e,t,i){this.a=e,this.b=t,this.c=i}get lineNumber(){return this.a}get text(){return this.b}get range(){return new Se(this.a,0,this.a,this.b.length)}get rangeIncludingLineBreak(){return this.c?this.range:new Se(this.a,0,this.a+1,0)}get firstNonWhitespaceCharacterIndex(){return/^(\s*)/.exec(this.b)[1].length}get isEmptyOrWhitespace(){return this.firstNonWhitespaceCharacterIndex===this.b.length}},gg=class{constructor(e){this.a=e,this.b=0}nextId(){return this.a+ ++this.b}},CY=new gg("id#"),HU=class WI{static{this.c=new gg("TextEditorDecorationType")}constructor(t,i,r){const s=WI.c.nextId();t.$registerTextEditorDecorationType(i.identifier,s,U0.from(r)),this.value=Object.freeze({key:s,dispose(){t.$removeTextEditorDecorationType(s)}})}},BU=class{constructor(e,t){this.g=[],this.h=void 0,this.j=!1,this.c=e,this.d=e.version,this.e=t.undoStopBefore,this.f=t.undoStopAfter}finalize(){return this.j=!0,{documentVersionId:this.d,edits:this.g,setEndOfLine:this.h,undoStopBefore:this.e,undoStopAfter:this.f}}k(){if(this.j)throw new Error("Edit is only valid while callback runs")}replace(e,t){this.k();let i=null;if(e instanceof Pe)i=new Se(e,e);else if(e instanceof Se)i=e;else throw new Error("Unrecognized location");this.l(i,t,!1)}insert(e,t){this.k(),this.l(new Se(e,e),t,!0)}delete(e){this.k();let t=null;if(e instanceof Se)t=e;else throw new Error("Unrecognized location");this.l(t,null,!0)}l(e,t,i){const r=this.c.validateRange(e);this.g.push({range:r,text:t,forceMoveMarkers:i})}setEndOfLine(e){if(this.k(),e!==Lr.LF&&e!==Lr.CRLF)throw $e("endOfLine");this.h=e}},WU=class{constructor(e,t,i,r){this.c=e,this.d=t,this._accept(i),this.e=r;const s=this;this.value={get tabSize(){return s.f},set tabSize(n){s.n(n)},get indentSize(){return s.g},set indentSize(n){s.p(n)},get insertSpaces(){return s.j},set insertSpaces(n){s.s(n)},get cursorStyle(){return s.k},set cursorStyle(n){s.t(n)},get lineNumbers(){return s.l},set lineNumbers(n){s.u(n)}}}_accept(e){this.f=e.tabSize,this.g=e.indentSize,this.h=e.originalIndentSize,this.j=e.insertSpaces,this.k=e.cursorStyle,this.l=uc.to(e.lineNumbers)}m(e){if(e==="auto")return"auto";if(typeof e=="number"){const t=Math.floor(e);return t>0?t:null}if(typeof e=="string"){const t=parseInt(e,10);return isNaN(t)?null:t>0?t:null}return null}n(e){const t=this.m(e);if(t!==null){if(typeof t=="number"){if(this.f===t)return;this.f=t}this.v("setTabSize",this.c.$trySetOptions(this.d,{tabSize:t}))}}o(e){if(e==="tabSize")return"tabSize";if(typeof e=="number"){const t=Math.floor(e);return t>0?t:null}if(typeof e=="string"){const t=parseInt(e,10);return isNaN(t)?null:t>0?t:null}return null}p(e){const t=this.o(e);if(t!==null){if(typeof t=="number"){if(this.h===t)return;this.g=t,this.h=t}this.v("setIndentSize",this.c.$trySetOptions(this.d,{indentSize:t}))}}q(e){return e==="auto"?"auto":e==="false"?!1:!!e}s(e){const t=this.q(e);if(typeof t=="boolean"){if(this.j===t)return;this.j=t}this.v("setInsertSpaces",this.c.$trySetOptions(this.d,{insertSpaces:t}))}t(e){this.k!==e&&(this.k=e,this.v("setCursorStyle",this.c.$trySetOptions(this.d,{cursorStyle:e})))}u(e){this.l!==e&&(this.l=e,this.v("setLineNumbers",this.c.$trySetOptions(this.d,{lineNumbers:uc.from(e)})))}assign(e){const t={};let i=!1;if(typeof e.tabSize<"u"){const r=this.m(e.tabSize);r==="auto"?(i=!0,t.tabSize=r):typeof r=="number"&&this.f!==r&&(this.f=r,i=!0,t.tabSize=r)}if(typeof e.indentSize<"u"){const r=this.o(e.indentSize);r==="tabSize"?(i=!0,t.indentSize=r):typeof r=="number"&&this.h!==r&&(this.g=r,this.h=r,i=!0,t.indentSize=r)}if(typeof e.insertSpaces<"u"){const r=this.q(e.insertSpaces);r==="auto"?(i=!0,t.insertSpaces=r):this.j!==r&&(this.j=r,i=!0,t.insertSpaces=r)}typeof e.cursorStyle<"u"&&this.k!==e.cursorStyle&&(this.k=e.cursorStyle,i=!0,t.cursorStyle=e.cursorStyle),typeof e.lineNumbers<"u"&&this.l!==e.lineNumbers&&(this.l=e.lineNumbers,i=!0,t.lineNumbers=uc.from(e.lineNumbers)),i&&this.v("setOptions",this.c.$trySetOptions(this.d,t))}v(e,t){t.catch(i=>{this.e.warn(`ExtHostTextEditorOptions '${e}' failed:'`),this.e.warn(i)})}},zU=class{constructor(e,t,i,r,s,n,o,a){this.id=e,this.j=t,this.k=i,this.g=!1,this.h=new Set,this.c=s,this.d=new WU(this.j,this.id,n,i),this.e=o,this.f=a;const c=this;this.value=Object.freeze({get document(){return r.value},set document(l){throw new Kn("document")},get selection(){return c.c&&c.c[0]},set selection(l){if(!(l instanceof Ls))throw $e("selection");c.c=[l],c.l()},get selections(){return c.c},set selections(l){if(!Array.isArray(l)||l.some(u=>!(u instanceof Ls)))throw $e("selections");c.c=l,c.l()},get visibleRanges(){return c.e},set visibleRanges(l){throw new Kn("visibleRanges")},get options(){return c.d.value},set options(l){c.g||c.d.assign(l)},get viewColumn(){return c.f},set viewColumn(l){throw new Kn("viewColumn")},edit(l,u={undoStopBefore:!0,undoStopAfter:!0}){if(c.g)return Promise.reject(new Error("TextEditor#edit not possible on closed editors"));const h=new BU(r.value,u);return l(h),c.m(h)},insertSnippet(l,u,h={undoStopBefore:!0,undoStopAfter:!0}){if(c.g)return Promise.reject(new Error("TextEditor#insertSnippet not possible on closed editors"));let d;if(!u||Array.isArray(u)&&u.length===0)d=c.c.map(f=>O.from(f));else if(u instanceof Pe){const{lineNumber:f,column:g}=Fe.from(u);d=[{startLineNumber:f,startColumn:g,endLineNumber:f,endColumn:g}]}else if(u instanceof Se)d=[O.from(u)];else{d=[];for(const f of u)if(f instanceof Se)d.push(O.from(f));else{const{lineNumber:g,column:v}=Fe.from(f);d.push({startLineNumber:g,startColumn:v,endLineNumber:g,endColumn:v})}}return t.$tryInsertSnippet(e,r.value.version,l.value,d,h)},setDecorations(l,u){const h=u.length===0;h&&!c.h.has(l.key)||(h?c.h.delete(l.key):c.h.add(l.key),c.n(()=>{if(Rx(u))return t.$trySetDecorations(e,l.key,XF(u));{const d=new Array(4*u.length);for(let f=0,g=u.length;f<g;f++){const v=u[f];d[4*f]=v.start.line+1,d[4*f+1]=v.start.character+1,d[4*f+2]=v.end.line+1,d[4*f+3]=v.end.character+1}return t.$trySetDecorationsFast(e,l.key,d)}}))},revealRange(l,u){c.n(()=>t.$tryRevealRange(e,O.from(l),u||Rf.Default))},show(l){t.$tryShowEditor(e,zt.from(l))},hide(){t.$tryHideEditor(e)},[Symbol.for("debug.description")](){return`TextEditor(${this.document.uri.toString()})`}})}dispose(){Wi(!this.g),this.g=!0}_acceptOptions(e){Wi(!this.g),this.d._accept(e)}_acceptVisibleRanges(e){Wi(!this.g),this.e=e}_acceptViewColumn(e){Wi(!this.g),this.f=e}_acceptSelections(e){Wi(!this.g),this.c=e}async l(){const e=this.c.map(Ti.from);return await this.n(()=>this.j.$trySetSelections(this.id,e)),this.value}m(e){const t=e.finalize();if(t.edits.length===0&&!t.setEndOfLine)return Promise.resolve(!0);const i=t.edits.map(s=>s.range);i.sort((s,n)=>s.end.line===n.end.line?s.end.character===n.end.character?s.start.line===n.start.line?s.start.character-n.start.character:s.start.line-n.start.line:s.end.character-n.end.character:s.end.line-n.end.line);for(let s=0,n=i.length-1;s<n;s++){const o=i[s].end;if(i[s+1].start.isBefore(o))return Promise.reject(new Error("Overlapping ranges are not allowed!"))}const r=t.edits.map(s=>({range:O.from(s.range),text:s.text,forceMoveMarkers:s.forceMoveMarkers}));return this.j.$tryApplyEdits(this.id,t.documentVersionId,r,{setEndOfLine:typeof t.setEndOfLine=="number"?hc.from(t.setEndOfLine):void 0,undoStopBefore:t.undoStopBefore,undoStopAfter:t.undoStopAfter})}n(e){return this.g?(this.k.warn("TextEditor is closed/disposed"),Promise.resolve(void 0)):e().then(()=>this,t=>(t instanceof Error&&t.name==="DISPOSED"||this.k.warn(t),null))}},VU=class{constructor(e){this.value=e,this.a=0}ref(){this.a++}unref(){return--this.a===0}},lb=class{constructor(t,i){this.h=t,this.i=i,this.a=null,this.b=new Map,this.c=new Gt,this.d=new I,this.e=new I,this.f=new I,this.g=new I,this.onDidAddDocuments=this.d.event,this.onDidRemoveDocuments=this.e.event,this.onDidChangeVisibleTextEditors=this.f.event,this.onDidChangeActiveTextEditor=this.g.event}$acceptDocumentsAndEditorsDelta(t){this.acceptDocumentsAndEditorsDelta(t)}acceptDocumentsAndEditorsDelta(t){const i=[],r=[],s=[];if(t.removedDocuments)for(const n of t.removedDocuments){const o=E.revive(n),a=this.c.get(o);a?.unref()&&(this.c.delete(o),i.push(a.value))}if(t.addedDocuments)for(const n of t.addedDocuments){const o=E.revive(n.uri);let a=this.c.get(o);if(a&&o.scheme!==z.vscodeNotebookCell&&o.scheme!==z.vscodeInteractiveInput)throw new Error(`document '${o} already exists!'`);a||(a=new VU(new _U(this.h.getProxy(q.MainThreadDocuments),o,n.lines,n.EOL,n.versionId,n.languageId,n.isDirty)),this.c.set(o,a),r.push(a.value)),a.ref()}if(t.removedEditors)for(const n of t.removedEditors){const o=this.b.get(n);this.b.delete(n),o&&s.push(o)}if(t.addedEditors)for(const n of t.addedEditors){const o=E.revive(n.documentUri);Wi(this.c.has(o),`document '${o}' does not exist`),Wi(!this.b.has(n.id),`editor '${n.id}' already exists!`);const a=this.c.get(o).value,c=new zU(n.id,this.h.getProxy(q.MainThreadTextEditors),this.i,new Hi(()=>a.document),n.selections.map(Ti.to),n.options,n.visibleRanges.map(l=>O.to(l)),typeof n.editorPosition=="number"?zt.to(n.editorPosition):void 0);this.b.set(n.id,c)}t.newActiveEditor!==void 0&&(Wi(t.newActiveEditor===null||this.b.has(t.newActiveEditor),`active editor '${t.newActiveEditor}' does not exist`),this.a=t.newActiveEditor),Sr(i),Sr(s),t.removedDocuments&&this.e.fire(i),t.addedDocuments&&this.d.fire(r),(t.removedEditors||t.addedEditors)&&this.f.fire(this.allEditors().map(n=>n.value)),t.newActiveEditor!==void 0&&this.g.fire(this.activeEditor())}getDocument(t){return this.c.get(t)?.value}allDocuments(){return Qi.map(this.c.values(),t=>t.value)}getEditor(t){return this.b.get(t)}activeEditor(t){if(!this.a)return;const i=this.b.get(this.a);return t?i:i?.value}allEditors(){return[...this.b.values()]}};lb=__decorate([__param(0,Ie),__param(1,Ce)],lb);var Vo=V("IExtHostDocumentsAndEditors"),eh=V("IExtHostApiDeprecationService"),ub=class{constructor(t,i){this.c=i,this.a=new Set,this.b=t.getProxy(q.MainThreadTelemetry)}report(t,i,r){const s=this.d(t,i);this.a.has(s)||(this.a.add(s),i.isUnderDevelopment&&this.c.warn(`[Deprecation Warning] '${t}' is deprecated. ${r}`),this.b.$publicLog2("extHostDeprecatedApiUsage",{extensionId:i.identifier.value,apiId:t}))}d(t,i){return`${t}-${i.identifier.value}`}};ub=__decorate([__param(0,Ie),__param(1,Ce)],ub);var DY=Object.freeze(new class{report(e,t,i){}}),qU={activeComment:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.activeComment.d.ts"},aiRelatedInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiRelatedInformation.d.ts"},aiTextSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiTextSearchProvider.d.ts"},aiTextSearchProviderNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiTextSearchProviderNew.d.ts"},attributableCoverage:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.attributableCoverage.d.ts"},authLearnMore:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authLearnMore.d.ts"},authSession:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authSession.d.ts"},canonicalUriProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.canonicalUriProvider.d.ts"},chatParticipantAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantAdditions.d.ts"},chatParticipantPrivate:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantPrivate.d.ts",version:2},chatProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatProvider.d.ts"},chatReferenceBinaryData:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatReferenceBinaryData.d.ts"},chatTab:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatTab.d.ts"},chatVariableResolver:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatVariableResolver.d.ts"},codeActionAI:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionAI.d.ts"},codeActionRanges:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionRanges.d.ts"},codiconDecoration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codiconDecoration.d.ts"},commentReactor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReactor.d.ts"},commentReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReveal.d.ts"},commentThreadApplicability:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentThreadApplicability.d.ts"},commentingRangeHint:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentingRangeHint.d.ts"},commentsDraftState:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentsDraftState.d.ts"},contribAccessibilityHelpContent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribAccessibilityHelpContent.d.ts"},contribCommentEditorActionsMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentEditorActionsMenu.d.ts"},contribCommentPeekContext:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentPeekContext.d.ts"},contribCommentThreadAdditionalMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentThreadAdditionalMenu.d.ts"},contribCommentsViewThreadMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentsViewThreadMenus.d.ts"},contribDebugCreateConfiguration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDebugCreateConfiguration.d.ts"},contribDiffEditorGutterToolBarMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDiffEditorGutterToolBarMenus.d.ts"},contribEditSessions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditSessions.d.ts"},contribEditorContentMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditorContentMenu.d.ts"},contribIssueReporter:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribIssueReporter.d.ts"},contribLabelFormatterWorkspaceTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribLabelFormatterWorkspaceTooltip.d.ts"},contribMenuBarHome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMenuBarHome.d.ts"},contribMergeEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMergeEditorMenus.d.ts"},contribMultiDiffEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMultiDiffEditorMenus.d.ts"},contribNotebookStaticPreloads:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribNotebookStaticPreloads.d.ts"},contribRemoteHelp:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribRemoteHelp.d.ts"},contribShareMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribShareMenu.d.ts"},contribSourceControlHistoryItemMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryItemMenu.d.ts"},contribSourceControlHistoryTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryTitleMenu.d.ts"},contribSourceControlInputBoxMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlInputBoxMenu.d.ts"},contribSourceControlTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlTitleMenu.d.ts"},contribStatusBarItems:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribStatusBarItems.d.ts"},contribViewContainerTitle:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewContainerTitle.d.ts"},contribViewsRemote:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsRemote.d.ts"},contribViewsWelcome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsWelcome.d.ts"},createFileSystemWatcher:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.createFileSystemWatcher.d.ts"},customEditorMove:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.customEditorMove.d.ts"},debugVisualization:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.debugVisualization.d.ts"},defaultChatParticipant:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.defaultChatParticipant.d.ts",version:2},diffCommand:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffCommand.d.ts"},diffContentOptions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffContentOptions.d.ts"},documentFiltersExclusive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentFiltersExclusive.d.ts"},documentPaste:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentPaste.d.ts"},editSessionIdentityProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editSessionIdentityProvider.d.ts"},editorHoverVerbosityLevel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorHoverVerbosityLevel.d.ts"},editorInsets:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorInsets.d.ts"},embeddings:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.embeddings.d.ts"},extensionRuntime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionRuntime.d.ts"},extensionsAny:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionsAny.d.ts"},externalUriOpener:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.externalUriOpener.d.ts"},fileComments:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileComments.d.ts"},fileSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProvider.d.ts"},fileSearchProviderNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProviderNew.d.ts"},findFiles2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findFiles2.d.ts"},findFiles2New:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findFiles2New.d.ts"},findTextInFiles:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFiles.d.ts"},findTextInFilesNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFilesNew.d.ts"},fsChunks:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fsChunks.d.ts"},icube:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.icube.d.ts"},icubeAuthenticationProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.icubeAuthenticationProvider.d.ts"},icubeChat:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.icubeChat.d.ts"},icubeChatAgents2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.icubeChatAgents2.d.ts"},icubeChatAgents2Additions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.icubeChatAgents2Additions.d.ts"},icubeFolderSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.icubeFolderSearchProvider.d.ts"},icubeInteractive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.icubeInteractive.d.ts"},icubeInteractive2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.icubeInteractive2.d.ts"},icubeUser:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.icubeUser.d.ts"},idToken:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.idToken.d.ts"},inlineCompletionsAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineCompletionsAdditions.d.ts"},inlineEdit:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineEdit.d.ts"},interactive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactive.d.ts"},interactiveUserActions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactiveUserActions.d.ts"},interactiveWindow:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactiveWindow.d.ts"},ipc:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.ipc.d.ts"},languageModelSystem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelSystem.d.ts"},languageStatusText:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageStatusText.d.ts"},lmTools:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.lmTools.d.ts",version:15},mappedEditsProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.mappedEditsProvider.d.ts"},multiDocumentHighlightProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.multiDocumentHighlightProvider.d.ts"},newSymbolNamesProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.newSymbolNamesProvider.d.ts"},notebookCellExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecution.d.ts"},notebookCellExecutionState:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecutionState.d.ts"},notebookControllerAffinityHidden:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookControllerAffinityHidden.d.ts"},notebookDeprecated:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookDeprecated.d.ts"},notebookExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookExecution.d.ts"},notebookKernelSource:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookKernelSource.d.ts"},notebookLiveShare:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookLiveShare.d.ts"},notebookMessaging:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMessaging.d.ts"},notebookMime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMime.d.ts"},notebookReplDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookReplDocument.d.ts"},notebookVariableProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookVariableProvider.d.ts"},portsAttributes:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.portsAttributes.d.ts"},profileContentHandlers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.profileContentHandlers.d.ts"},quickDiffProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickDiffProvider.d.ts"},quickInputButtonLocation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickInputButtonLocation.d.ts"},quickPickItemTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickItemTooltip.d.ts"},quickPickSortByLabel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickSortByLabel.d.ts"},resolvers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.resolvers.d.ts"},scmActionButton:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmActionButton.d.ts"},scmHistoryProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmHistoryProvider.d.ts"},scmMultiDiffEditor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmMultiDiffEditor.d.ts"},scmSelectedProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmSelectedProvider.d.ts"},scmTextDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmTextDocument.d.ts"},scmValidation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmValidation.d.ts"},shareProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.shareProvider.d.ts"},showLocal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.showLocal.d.ts"},speech:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.speech.d.ts"},tabInputMultiDiff:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputMultiDiff.d.ts"},tabInputTextMerge:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputTextMerge.d.ts"},taskPresentationGroup:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.taskPresentationGroup.d.ts"},telemetry:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.telemetry.d.ts"},terminalDataWriteEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDataWriteEvent.d.ts"},terminalDimensions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDimensions.d.ts"},terminalExecuteCommandEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalExecuteCommandEvent.d.ts"},terminalQuickFixProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalQuickFixProvider.d.ts"},terminalSelection:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalSelection.d.ts"},testObserver:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testObserver.d.ts"},testRelatedCode:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testRelatedCode.d.ts"},textSearchCompleteNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchCompleteNew.d.ts"},textSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProvider.d.ts"},textSearchProviderNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProviderNew.d.ts"},timeline:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.timeline.d.ts"},tokenInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tokenInformation.d.ts"},treeViewActiveItem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewActiveItem.d.ts"},treeViewMarkdownMessage:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewMarkdownMessage.d.ts"},treeViewReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewReveal.d.ts"},tunnelFactory:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnelFactory.d.ts"},tunnels:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnels.d.ts"},webviewInitialState:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.webviewInitialState.d.ts"},workspaceTrust:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.workspaceTrust.d.ts"}},mg=Object.freeze(qU),hb=ai.as(Bd.JSONContribution),GU=class xm{static a(t){const i=new bo;for(let r=0,s=t.length;r<s;r++)i.add(t[r].description.identifier);return i}static compute(t,i){if(!t||!t.length)return new xm(i,[]);if(!i||!i.length)return new xm([],t);const r=this.a(t),s=this.a(i),n=i.filter(a=>!r.has(a.description.identifier)),o=t.filter(a=>!s.has(a.description.identifier));return new xm(n,o)}constructor(t,i){this.added=t,this.removed=i}},JU=class{constructor(e,t){this.name=e,this.defaultExtensionKind=t,this.a=null,this.b=null,this.c=null}setHandler(e){if(this.a!==null)throw new Error("Handler already set!");return this.a=e,this.d(),{dispose:()=>{this.a=null}}}acceptUsers(e){this.c=GU.compute(this.b,e),this.b=e,this.d()}d(){if(!(this.a===null||this.b===null||this.c===null))try{this.a(this.b,this.c)}catch(e){Et(e)}}},QU={type:"string",enum:["ui","workspace"],enumDescriptions:[p(13392,null),p(13393,null)]},v8="vscode://schemas/vscode-extensions",db={properties:{engines:{type:"object",description:p(13394,null),properties:{vscode:{type:"string",description:p(13395,null),default:"^1.22.0"}}},publisher:{description:p(13396,null),type:"string"},displayName:{description:p(13397,null),type:"string"},categories:{description:p(13398,null),type:"array",uniqueItems:!0,items:{oneOf:[{type:"string",enum:uO},{type:"string",const:"Languages",deprecationMessage:p(13399,null)}]}},galleryBanner:{type:"object",description:p(13400,null),properties:{color:{description:p(13401,null),type:"string"},theme:{description:p(13402,null),type:"string",enum:["dark","light"]}}},contributes:{description:p(13403,null),type:"object",properties:{},default:{}},preview:{type:"boolean",description:p(13404,null)},enableProposedApi:{type:"boolean",deprecationMessage:p(13405,null)},enabledApiProposals:{markdownDescription:p(13406,null),type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(mg).map(e=>e),markdownEnumDescriptions:Object.values(mg).map(e=>e.proposal)}},api:{markdownDescription:p(13407,null),type:"string",enum:["none"],enumDescriptions:[p(13408,null)]},activationEvents:{description:p(13409,null),type:"array",items:{type:"string",defaultSnippets:[{label:"onWebviewPanel",description:p(13410,null),body:"onWebviewPanel:viewType"},{label:"onLanguage",description:p(13411,null),body:"onLanguage:${1:languageId}"},{label:"onCommand",description:p(13412,null),body:"onCommand:${2:commandId}"},{label:"onDebug",description:p(13413,null),body:"onDebug"},{label:"onDebugInitialConfigurations",description:p(13414,null),body:"onDebugInitialConfigurations"},{label:"onDebugDynamicConfigurations",description:p(13415,null),body:"onDebugDynamicConfigurations"},{label:"onDebugResolve",description:p(13416,null),body:"onDebugResolve:${6:type}"},{label:"onDebugAdapterProtocolTracker",description:p(13417,null),body:"onDebugAdapterProtocolTracker:${6:type}"},{label:"workspaceContains",description:p(13418,null),body:"workspaceContains:${4:filePattern}"},{label:"onStartupFinished",description:p(13419,null),body:"onStartupFinished"},{label:"onTaskType",description:p(13420,null),body:"onTaskType:${1:taskType}"},{label:"onFileSystem",description:p(13421,null),body:"onFileSystem:${1:scheme}"},{label:"onEditSession",description:p(13422,null),body:"onEditSession:${1:scheme}"},{label:"onSearch",description:p(13423,null),body:"onSearch:${7:scheme}"},{label:"onView",body:"onView:${5:viewId}",description:p(13424,null)},{label:"onUri",body:"onUri",description:p(13425,null)},{label:"onOpenExternalUri",body:"onOpenExternalUri",description:p(13426,null)},{label:"onCustomEditor",body:"onCustomEditor:${9:viewType}",description:p(13427,null)},{label:"onNotebook",body:"onNotebook:${1:type}",description:p(13428,null)},{label:"onAuthenticationRequest",body:"onAuthenticationRequest:${11:authenticationProviderId}",description:p(13429,null)},{label:"onRenderer",description:p(13430,null),body:"onRenderer:${11:rendererId}"},{label:"onTerminalProfile",body:"onTerminalProfile:${1:terminalId}",description:p(13431,null)},{label:"onTerminalQuickFixRequest",body:"onTerminalQuickFixRequest:${1:quickFixId}",description:p(13432,null)},{label:"onWalkthrough",body:"onWalkthrough:${1:walkthroughID}",description:p(13433,null)},{label:"onIssueReporterOpened",body:"onIssueReporterOpened",description:p(13434,null)},{label:"onChatParticipant",body:"onChatParticipant:${1:participantId}",description:p(13435,null)},{label:"onLanguageModelTool",body:"onLanguageModelTool:${1:toolId}",description:p(13436,null)},{label:"*",description:p(13437,null),body:"*"}]}},badges:{type:"array",description:p(13438,null),items:{type:"object",required:["url","href","description"],properties:{url:{type:"string",description:p(13439,null)},href:{type:"string",description:p(13440,null)},description:{type:"string",description:p(13441,null)}}}},markdown:{type:"string",description:p(13442,null),enum:["github","standard"],default:"github"},qna:{default:"marketplace",description:p(13443,null),anyOf:[{type:["string","boolean"],enum:["marketplace",!1]},{type:"string"}]},extensionDependencies:{description:p(13444,null),type:"array",uniqueItems:!0,items:{type:"string",pattern:kw}},extensionPack:{description:p(13445,null),type:"array",uniqueItems:!0,items:{type:"string",pattern:kw}},extensionKind:{description:p(13446,null),type:"array",items:QU,default:["workspace"],defaultSnippets:[{body:["ui"],description:p(13447,null)},{body:["workspace"],description:p(13448,null)},{body:["ui","workspace"],description:p(13449,null)},{body:["workspace","ui"],description:p(13450,null)},{body:[],description:p(13451,null)}]},capabilities:{description:p(13452,null),type:"object",properties:{virtualWorkspaces:{description:p(13453,null),type:["boolean","object"],defaultSnippets:[{label:"limited",body:{supported:"${1:limited}",description:"${2}"}},{label:"false",body:{supported:!1,description:"${2}"}}],default:(!0).valueOf,properties:{supported:{markdownDescription:p(13454,null),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[p(13455,null),p(13456,null),p(13457,null)]},description:{type:"string",markdownDescription:p(13458,null)}}},untrustedWorkspaces:{description:p(13459,null),type:"object",required:["supported"],defaultSnippets:[{body:{supported:"${1:limited}",description:"${2}"}}],properties:{supported:{markdownDescription:p(13460,null),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[p(13461,null),p(13462,null),p(13463,null)]},restrictedConfigurations:{description:p(13464,null),type:"array",items:{type:"string"}},description:{type:"string",markdownDescription:p(13465,null)}}}}},sponsor:{description:p(13466,null),type:"object",defaultSnippets:[{body:{url:"${1:https:}"}}],properties:{url:{description:p(13467,null),type:"string"}}},scripts:{type:"object",properties:{"vscode:prepublish":{description:p(13468,null),type:"string"},"vscode:uninstall":{description:p(13469,null),type:"string"}}},icon:{type:"string",description:p(13470,null)},l10n:{type:"string",description:p(13471,null)},pricing:{type:"string",markdownDescription:p(13472,null),enum:["Free","Trial"],default:"Free"}}},YU=class{constructor(){this.a=new Map}registerExtensionPoint(e){if(this.a.has(e.extensionPoint))throw new Error("Duplicate extension point: "+e.extensionPoint);const t=new JU(e.extensionPoint,e.defaultExtensionKind);return this.a.set(e.extensionPoint,t),e.activationEventsGenerator&&IM.register(e.extensionPoint,e.activationEventsGenerator),db.properties.contributes.properties[e.extensionPoint]=e.jsonSchema,hb.registerSchema(v8,db),t}getExtensionPoints(){return Array.from(this.a.values())}},w8={ExtensionsRegistry:"ExtensionsRegistry"};ai.add(w8.ExtensionsRegistry,new YU);var XU=ai.as(w8.ExtensionsRegistry);hb.registerSchema(v8,db),hb.registerSchema(hO,{properties:{extensionEnabledApiProposals:{description:p(13473,null),type:"object",properties:{},additionalProperties:{anyOf:[{type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(mg),markdownEnumDescriptions:Object.values(mg).map(e=>e.proposal)}}]}}}});var ZU={type:"object",additionalProperties:!1,properties:{type:{type:"string",description:p(10959,null)},required:{type:"array",items:{type:"string"}},properties:{type:"object",description:p(10960,null),additionalProperties:{$ref:"http://json-schema.org/draft-07/schema#"}},when:{type:"string",markdownDescription:p(10961,null),default:""}}},fb;(function(e){function t(i,r,s){if(!i)return;const n=De(i.type)?i.type:void 0;if(!n||n.length===0){s.error(p(10962,null));return}const o=[];if(Array.isArray(i.required))for(const a of i.required)De(a)&&o.push(a);return{extensionId:r.value,taskType:n,required:o,properties:i.properties?ot(i.properties):{},when:i.when?Jt.deserialize(i.when):void 0}}e.from=t})(fb||(fb={}));var KU=XU.registerExtensionPoint({extensionPoint:"taskDefinitions",activationEventsGenerator:(e,t)=>{for(const i of e)i.type&&t.push(`onTaskType:${i.type}`)},jsonSchema:{description:p(10963,null),type:"array",items:ZU}}),e_=class{constructor(){this.d=new I,this.onDefinitionsChanged=this.d.event,this.a=Object.create(null),this.b=new Promise((e,t)=>{KU.setHandler((i,r)=>{this.c=void 0;try{for(const s of r.removed){const n=s.value;for(const o of n)this.a&&o.type&&this.a[o.type]&&delete this.a[o.type]}for(const s of r.added){const n=s.value;for(const o of n){const a=fb.from(o,s.description.identifier,s.collector);a&&(this.a[a.taskType]=a)}}(r.removed.length>0||r.added.length>0)&&this.d.fire()}catch{}e(void 0)})})}onReady(){return this.b}get(e){return this.a[e]}all(){return Object.keys(this.a).map(e=>this.a[e])}getJsonSchema(){if(this.c===void 0){const e=[];for(const t of this.all()){const i={type:"object",additionalProperties:!1};t.required.length>0&&(i.required=t.required.slice(0)),t.properties!==void 0?i.properties=ot(t.properties):i.properties=Object.create(null),i.properties.type={type:"string",enum:[t.taskType]},e.push(i)}this.c={oneOf:e}}return this.c}},t_=new e_,i_="settings",AY=new j("taskRunning",!1,p(10964,null)),RY=Hm(10966,"Tasks"),vg;(function(e){e[e.Escape=1]="Escape",e[e.Strong=2]="Strong",e[e.Weak=3]="Weak"})(vg||(vg={})),function(e){function t(i){if(!i)return e.Strong;switch(i.toLowerCase()){case"escape":return e.Escape;case"strong":return e.Strong;case"weak":return e.Weak;default:return e.Strong}}e.from=t}(vg||(vg={}));var b8;(function(e){e.defaults={cwd:"${workspaceFolder}"}})(b8||(b8={}));var th;(function(e){e[e.Always=1]="Always",e[e.Silent=2]="Silent",e[e.Never=3]="Never"})(th||(th={})),function(e){function t(i){switch(i.toLowerCase()){case"always":return e.Always;case"silent":return e.Silent;case"never":return e.Never;default:return e.Always}}e.fromString=t}(th||(th={}));var ih;(function(e){e[e.Never=1]="Never",e[e.OnProblem=2]="OnProblem",e[e.Always=3]="Always"})(ih||(ih={})),function(e){function t(i){switch(i.toLowerCase()){case"always":return e.Always;case"never":return e.Never;case"onproblem":return e.OnProblem;default:return e.OnProblem}}e.fromString=t}(ih||(ih={}));var rh;(function(e){e[e.Shared=1]="Shared",e[e.Dedicated=2]="Dedicated",e[e.New=3]="New"})(rh||(rh={})),function(e){function t(i){switch(i.toLowerCase()){case"shared":return e.Shared;case"dedicated":return e.Dedicated;case"new":return e.New;default:return e.Shared}}e.fromString=t}(rh||(rh={}));var y8;(function(e){e.defaults={echo:!0,reveal:th.Always,revealProblems:ih.Never,focus:!1,panel:rh.Shared,showReuseMessage:!0,clear:!1}})(y8||(y8={}));var wg;(function(e){e[e.Shell=1]="Shell",e[e.Process=2]="Process",e[e.CustomExecution=3]="CustomExecution"})(wg||(wg={})),function(e){function t(r){switch(r.toLowerCase()){case"shell":return e.Shell;case"process":return e.Process;case"customExecution":return e.CustomExecution;default:return e.Process}}e.fromString=t;function i(r){switch(r){case e.Shell:return"shell";case e.Process:return"process";case e.CustomExecution:return"customExecution";default:return"process"}}e.toString=i}(wg||(wg={}));var E8;(function(e){function t(i){return De(i)?i:i.value}e.value=t})(E8||(E8={}));var S8;(function(e){e.Clean={_id:"clean",isDefault:!1},e.Build={_id:"build",isDefault:!1},e.Rebuild={_id:"rebuild",isDefault:!1},e.Test={_id:"test",isDefault:!1};function t(r){return r===e.Clean._id||r===e.Build._id||r===e.Rebuild._id||r===e.Test._id}e.is=t;function i(r){if(r!==void 0)return De(r)?t(r)?{_id:r,isDefault:!1}:void 0:r}e.from=i})(S8||(S8={}));var x8;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace",e[e.Folder=3]="Folder"})(x8||(x8={}));var k8;(function(e){e.Workspace="workspace",e.Extension="extension",e.InMemory="inMemory",e.WorkspaceFile="workspaceFile",e.User="user";function t(i){switch(i){case e.User:return 2;case e.WorkspaceFile:return 5;default:return 6}}e.toConfigurationTarget=t})(k8||(k8={}));var $8;(function(e){e.parallel="parallel",e.sequence="sequence"})($8||($8={}));var pb;(function(e){e[e.default=1]="default",e[e.folderOpen=2]="folderOpen"})(pb||(pb={}));var C8;(function(e){e.defaults={reevaluateOnRerun:!0,runOn:pb.default,instanceLimit:1}})(C8||(C8={}));var bg;(function(e){e[e.Process=1]="Process",e[e.Terminal=2]="Terminal"})(bg||(bg={})),function(e){e._default=e.Terminal}(bg||(bg={}));var I8;(function(e){e[e.V0_1_0=1]="V0_1_0",e[e.V2_0_0=2]="V2_0_0"})(I8||(I8={}));var P8;(function(e){e.DependsOnStarted="dependsOnStarted",e.AcquiredInput="acquiredInput",e.Start="start",e.ProcessStarted="processStarted",e.Active="active",e.Inactive="inactive",e.Changed="changed",e.Terminated="terminated",e.ProcessEnded="processEnded",e.End="end"})(P8||(P8={}));var D8;(function(e){e.SingleRun="singleRun",e.Background="background"})(D8||(D8={}));var A8;(function(e){e[e.System=0]="System",e[e.User=1]="User",e[e.FolderOpen=2]="FolderOpen",e[e.ConfigurationChange=3]="ConfigurationChange",e[e.Reconnect=4]="Reconnect"})(A8||(A8={}));var R8;(function(e){function t(c){return{taskId:c._id,taskName:c.configurationProperties.name,runType:c.configurationProperties.isBackground?"background":"singleRun",group:c.configurationProperties.group,__task:c}}function i(c,l,u){return{...t(c),kind:"start",terminalId:l,resolvedVariables:u}}e.start=i;function r(c,l,u){return{...t(c),kind:"processStarted",terminalId:l,processId:u}}e.processStarted=r;function s(c,l,u){return{...t(c),kind:"processEnded",terminalId:l,exitCode:u}}e.processEnded=s;function n(c,l,u){return{...t(c),kind:"terminated",exitReason:u,terminalId:l}}e.terminated=n;function o(c,l,u){return{...t(l),kind:c,terminalId:u}}e.general=o;function a(){return{kind:"changed"}}e.changed=a})(R8||(R8={}));var yg;(function(e){function t(r){const s=Object.keys(r).sort();let n="";for(const o of s){let a=r[o];a instanceof Object?a=t(a):typeof a=="string"&&(a=a.replace(/,/g,",,")),n+=o+","+a+","}return n}function i(r){const n={_key:t(r),type:r.taskType};return Object.assign(n,r),n}e.create=i})(yg||(yg={}));var T8;(function(e){e.AutoDetect="task.autoDetect",e.SaveBeforeRun="task.saveBeforeRun",e.ShowDecorations="task.showDecorations",e.ProblemMatchersNeverPrompt="task.problemMatchers.neverPrompt",e.SlowProviderWarning="task.slowProviderWarning",e.QuickOpenHistory="task.quickOpen.history",e.QuickOpenDetail="task.quickOpen.detail",e.QuickOpenSkip="task.quickOpen.skip",e.QuickOpenShowAll="task.quickOpen.showAll",e.AllowAutomaticTasks="task.allowAutomaticTasks",e.Reconnection="task.reconnection",e.VerboseLogging="task.verboseLogging"})(T8||(T8={}));var L8;(function(e){e.Tasks="tasks",e.SuppressTaskName="tasks.suppressTaskName",e.Windows="tasks.windows",e.Osx="tasks.osx",e.Linux="tasks.linux",e.ShowOutput="tasks.showOutput",e.IsShellCommand="tasks.isShellCommand",e.ServiceTestSetting="tasks.service.testSetting"})(L8||(L8={}));var N8;(function(e){function t(i,r){const s=t_.get(i.type);if(s===void 0){const c=ot(i);return delete c._key,yg.create(c)}const n=Object.create(null);n.type=s.taskType;const o=new Set;s.required.forEach(c=>o.add(c));const a=s.properties;for(const c of Object.keys(a)){const l=i[c];if(l!=null)n[c]=l;else if(o.has(c)){const u=a[c];if(u.default!==void 0)n[c]=ot(u.default);else switch(u.type){case"boolean":n[c]=!1;break;case"number":case"integer":n[c]=0;break;case"string":n[c]="";break;default:r.error(p(10965,null,JSON.stringify(i,void 0,0),c));return}}}return yg.create(n)}e.createTaskIdentifier=t})(N8||(N8={}));var Eg;(function(e){function t(r){if(r!=null)return r}e.from=t;function i(r){if(r!=null)return r}e.to=i})(Eg||(Eg={}));var Sg;(function(e){function t(r){if(r!=null)return r}e.from=t;function i(r){if(r!=null)return r}e.to=i})(Sg||(Sg={}));var gb;(function(e){function t(r){if(r!=null)return r}e.from=t;function i(r){if(r!=null)return r}e.to=i})(gb||(gb={}));var sh;(function(e){function t(s){if(s){const n=s;return n&&!!n.process}else return!1}e.is=t;function i(s){if(s==null)return;const n={process:s.process,args:s.args};return s.options&&(n.options=gb.from(s.options)),n}e.from=i;function r(s){if(s!=null)return new qa(s.process,s.args,s.options)}e.to=r})(sh||(sh={}));var mb;(function(e){function t(r){if(r!=null)return r}e.from=t;function i(r){if(r!=null)return r}e.to=i})(mb||(mb={}));var nh;(function(e){function t(s){if(s){const n=s;return n&&(!!n.commandLine||!!n.command)}else return!1}e.is=t;function i(s){if(s==null)return;const n={};return s.commandLine!==void 0?n.commandLine=s.commandLine:(n.command=s.command,n.args=s.args),s.options&&(n.options=mb.from(s.options)),n}e.from=i;function r(s){if(!(s==null||s.command===void 0&&s.commandLine===void 0))return s.commandLine?new Ao(s.commandLine,s.options):new Ao(s.command,s.args?s.args:[],s.options)}e.to=r})(nh||(nh={}));var Mr;(function(e){function t(s){if(s){const n=s;return n&&n.customExecution==="customExecution"}else return!1}e.is=t;function i(s){return{customExecution:"customExecution"}}e.from=i;function r(s,n){return n.get(s)}e.to=r})(Mr||(Mr={}));var vb;(function(e){function t(i,r){let s;return i.scope!==void 0&&typeof i.scope!="number"?s=i.scope.uri:i.scope!==void 0&&typeof i.scope=="number"&&(i.scope===Dn.Workspace&&r&&r.workspaceFile?s=r.workspaceFile:s=i_),{id:i._id,workspaceFolder:s}}e.from=t})(vb||(vb={}));var wb;(function(e){function t(i){if(i!=null)return{_id:i.id,isDefault:i.isDefault}}e.from=t})(wb||(wb={}));var ls;(function(e){function t(s,n){if(s==null)return[];const o=[];for(const a of s){const c=i(a,n);c&&o.push(c)}return o}e.fromMany=t;function i(s,n){if(s==null)return;let o;s.execution instanceof qa?o=sh.from(s.execution):s.execution instanceof Ao?o=nh.from(s.execution):s.execution&&s.execution instanceof Qv&&(o=Mr.from(s.execution));const a=Eg.from(s.definition);let c;return s.scope?typeof s.scope=="number"?c=s.scope:c=s.scope.uri:c=Dn.Workspace,!a||!c?void 0:{_id:s._id,definition:a,name:s.name,source:{extensionId:n.identifier.value,label:s.source,scope:c},execution:o,isBackground:s.isBackground,group:wb.from(s.group),presentationOptions:Sg.from(s.presentationOptions),problemMatchers:Er(s.problemMatchers),hasDefinedMatchers:s.hasDefinedMatchers,runOptions:s.runOptions?s.runOptions:{reevaluateOnRerun:!0},detail:s.detail}}e.from=i;async function r(s,n,o){if(s==null)return;let a;sh.is(s.execution)?a=sh.to(s.execution):nh.is(s.execution)?a=nh.to(s.execution):Mr.is(s.execution)&&(a=Mr.to(s._id,o));const c=Eg.to(s.definition);let l;if(s.source&&(s.source.scope!==void 0?typeof s.source.scope=="number"?l=s.source.scope:l=await n.resolveWorkspaceFolder(E.revive(s.source.scope)):l=Dn.Workspace),!c||!l)return;const u=new Ff(c,l,s.name,s.source.label,a,s.problemMatchers);return s.isBackground!==void 0&&(u.isBackground=s.isBackground),s.group!==void 0&&(u.group=Kl.from(s.group._id),u.group&&s.group.isDefault&&(u.group=new Kl(u.group.id,u.group.label),s.group.isDefault===!0&&(u.group.isDefault=s.group.isDefault))),s.presentationOptions&&(u.presentationOptions=Sg.to(s.presentationOptions)),s._id&&(u._id=s._id),s.detail&&(u.detail=s.detail),u}e.to=r})(ls||(ls={}));var bb;(function(e){function t(r){return r}e.from=t;function i(r){if(r)return Object.assign(Object.create(null),r)}e.to=i})(bb||(bb={}));var yb=class{#e;constructor(e,t,i){this._id=t,this.a=i,this.#e=e}get task(){return this.a}terminate(){this.#e.terminateTask(this)}fireDidStartProcess(e){}fireDidEndProcess(e){}},xg=class{constructor(t,i,r,s,n,o,a,c){this.q=new I,this.r=new I,this.s=new I,this.u=new I,this.a=t.getProxy(q.MainThreadTask),this.b=r,this.c=s,this.d=n,this.e=o,this.h=0,this.j=new Map,this.k=new Map,this.l=new Map,this.m=new Map,this.n=new Set,this.o=new Map,this.f=a,this.g=c,this.a.$registerSupportedExecutions(!0)}registerTaskProvider(t,i,r){if(!r)return new Oe(()=>{});const s=this.x();return this.j.set(s,{type:i,provider:r,extension:t}),this.a.$registerTaskProvider(s,i),new Oe(()=>{this.j.delete(s),this.a.$unregisterTaskProvider(s)})}registerTaskSystem(t,i){this.a.$registerTaskSystem(t,i)}fetchTasks(t){return this.a.$fetchTasks(bb.from(t)).then(async i=>{const r=[];for(const s of i){const n=await ls.to(s,this.b,this.m);n&&r.push(n)}return r})}get taskExecutions(){const t=[];return this.k.forEach(i=>t.push(i)),t}terminateTask(t){if(!(t instanceof yb))throw new Error("No valid task execution provided");return this.a.$terminateTask(t._id)}get onDidStartTask(){return this.q.event}async $onDidStartTask(t,i,r){const s=this.m.get(t.id);s&&(this.o.set(t.id,s),this.e.attachPtyToTerminal(i,await s.callback(r))),this.p=t.id,this.q.fire({execution:await this.z(t)})}get onDidEndTask(){return this.r.event}async $OnDidEndTask(t){if(!this.l.has(t.id))return;const i=await this.z(t);this.l.delete(t.id),this.k.delete(t.id),this.B(t),this.r.fire({execution:i})}get onDidStartTaskProcess(){return this.s.event}async $onDidStartTaskProcess(t){const i=await this.z(t.id);this.s.fire({execution:i,processId:t.processId})}get onDidEndTaskProcess(){return this.u.event}async $onDidEndTaskProcess(t){const i=await this.z(t.id);this.u.fire({execution:i,exitCode:t.exitCode})}$provideTasks(t,i){const r=this.j.get(t);if(!r)return Promise.reject(new Error("no handler found"));const s=[],n=hi(()=>r.provider.provideTasks(Ge.None)).then(o=>this.v(i,s,r,o));return new Promise(o=>{n.then(a=>{Promise.all(s).then(()=>{o(a)})})})}async $resolveTask(t,i){const r=this.j.get(t);if(!r)return Promise.reject(new Error("no handler found"));if(i.definition.type!==r.type)throw new Error(`Unexpected: Task of type [${i.definition.type}] cannot be resolved by provider of type [${r.type}].`);const s=await ls.to(i,this.b,this.m);if(!s)throw new Error("Unexpected: Task cannot be resolved.");const n=await r.provider.resolveTask(s,Ge.None);if(!n)return;this.A(n,r);const o=ls.from(n,r.extension);if(!o)throw new Error("Unexpected: Task cannot be resolved.");if(n.definition!==s.definition)throw new Error("Unexpected: The resolved task definition must be the same object as the original task definition. The task definition cannot be changed.");return Mr.is(o.execution)&&await this.y(o,n,!0),await this.w(o)}x(){return this.h++}async y(t,i,r){const s=await this.a.$createTaskId(t);!r&&!this.m.has(s)&&(this.n.add(s),this.o.set(s,i.execution)),this.m.set(s,i.execution)}async z(t,i){if(typeof t=="string"){const n=this.l.get(t);if(!n)throw new yr("Unexpected: The specified task is missing an execution");return n}const r=this.l.get(t.id);if(r)return r;let s;return i?s=Promise.resolve(new yb(this,t.id,i)):s=ls.to(t.task,this.b,this.m).then(n=>{if(!n)throw new yr("Unexpected: Task does not exist.");return new yb(this,t.id,n)}),this.l.set(t.id,s),s.then(n=>(this.k.set(t.id,n),n))}A(t,i){t._deprecated&&this.g.report("Task.constructor",i.extension,"Use the Task constructor that takes a `scope` instead.")}B(t){this.o.get(t.id)&&this.o.delete(t.id),this.n.has(t.id)&&this.p!==t.id&&(this.m.delete(t.id),this.n.delete(t.id));const r=this.n.values();let s=r.next();for(;!s.done;)!this.o.has(s.value)&&this.p!==s.value&&(this.m.delete(s.value),this.n.delete(s.value)),s=r.next()}};xg=__decorate([__param(0,Ie),__param(1,Qt),__param(2,Fr),__param(3,Vo),__param(4,gr),__param(5,Ws),__param(6,Ce),__param(7,eh)],xg);var Eb=class extends xg{constructor(t,i,r,s,n,o,a,c){super(t,i,r,s,n,o,a,c),this.registerTaskSystem(z.vscodeRemote,{scheme:z.vscodeRemote,authority:"",platform:WD(0)})}async executeTask(t,i){if(!i.execution)throw new Error("Tasks to execute must include an execution");const r=ls.from(i,t);if(r===void 0)throw new Error("Task is not valid");if(Mr.is(r.execution))await this.y(r,i,!1);else throw new Mm;const s=await this.z(await this.a.$getTaskExecution(r),i);return this.a.$executeTask(r).catch(n=>{throw new Error(n)}),s}v(t,i,r,s){const n=[];if(s)for(const o of s){if(this.A(o,r),!o.definition||!t[o.definition.type]){const c=o.source?o.source:"No task source";this.f.warn(`The task [${c}, ${o.name}] uses an undefined task type. The task will be ignored in the future.`)}const a=ls.from(o,r.extension);a&&Mr.is(a.execution)?(n.push(a),i.push(this.y(a,o,!0))):this.f.warn("Only custom execution tasks supported.")}return{tasks:n,extension:r.extension}}async w(t){if(Mr.is(t.execution))return t;this.f.warn("Only custom execution tasks supported.")}async $resolveVariables(t,i){return{process:void 0,variables:Object.create(null)}}async $jsonTasksSupported(){return!1}async $findExecutable(t,i,r){}};Eb=__decorate([__param(0,Ie),__param(1,Qt),__param(2,Fr),__param(3,Vo),__param(4,gr),__param(5,Ws),__param(6,Ce),__param(7,eh)],Eb);var Sb=V("IExtHostTask"),O8=class{constructor(){this.f=new Map,this.m=[],this.n=new I,this.o=new I,this.d=1}get onError(){return this.n.event}get onExit(){return this.o.event}onMessage(e){this.k&&this.n.fire(new Error("attempt to set more than one 'Message' callback")),this.k=e}onEvent(e){this.j&&this.n.fire(new Error("attempt to set more than one 'Event' callback")),this.j=e}onRequest(e){this.g&&this.n.fire(new Error("attempt to set more than one 'Request' callback")),this.g=e}sendResponse(e){e.seq>0?this.n.fire(new Error(`attempt to send more than one response for command ${e.command}`)):this.u("response",e)}sendRequest(e,t,i,r){const s={command:e};if(t&&Object.keys(t).length>0&&(s.arguments=t),this.u("request",s),typeof r=="number"){const n=setTimeout(()=>{clearTimeout(n);const o=this.f.get(s.seq);if(o){this.f.delete(s.seq);const a={type:"response",seq:0,request_seq:s.seq,success:!1,command:e,message:p(6258,null,r,e)};o(a)}},r)}return i&&this.f.set(s.seq,i),s.seq}acceptMessage(e){this.k?this.k(e):(this.m.push(e),this.m.length===1&&this.s())}q(e,t){return e.type!=="event"||t.type!=="event"}async s(){let e;for(;this.m.length;){if((!e||this.q(this.m[0],e))&&await bi(0),e=this.m.shift(),!e)return;switch(e.type){case"event":this.j?.(e);break;case"request":this.g?.(e);break;case"response":{const t=e,i=this.f.get(t.request_seq);i&&(this.f.delete(t.request_seq),i(t));break}}}}u(e,t){t.type=e,t.seq=this.d++,this.sendMessage(t)}async w(){if(this.f.size===0)return Promise.resolve();const e=new Map;this.f.forEach((t,i)=>e.set(i,t)),await bi(500),e.forEach((t,i)=>{t({type:"response",seq:0,request_seq:i,success:!1,command:"canceled",message:"canceled"}),this.f.delete(i)})}getPendingRequestIds(){return Array.from(this.f.keys())}dispose(){this.m=[]}};function r_(e){return e.type&&(e.label||e.program||e.runtime)}var s_=/^[a-zA-Z][a-zA-Z0-9\+\-\.]+:/;function n_(e){return!!(e&&e.match(s_))}function F8(e){if(typeof e.path=="string"&&!(typeof e.sourceReference=="number"&&e.sourceReference>0)){if(n_(e.path))return E.parse(e.path);if(lr(e.path))return E.file(e.path)}return e.path}function M8(e){if(typeof e.path=="object"){const t=E.revive(e.path);if(t)return t.scheme===z.file?t.fsPath:t.toString()}return e.path}function o_(e,t){const i=t?F8:M8,r=ot(e);return U8(r,(s,n)=>{s&&n&&(n.path=i(n))}),r}function a_(e,t){const i=t?F8:M8,r=ot(e);return U8(r,(s,n)=>{!s&&n&&(n.path=i(n))}),r}function U8(e,t){switch(e.type){case"event":{const i=e;switch(i.event){case"output":t(!1,i.body.source);break;case"loadedSource":t(!1,i.body.source);break;case"breakpoint":t(!1,i.body.breakpoint.source);break;default:break}break}case"request":{const i=e;switch(i.command){case"setBreakpoints":t(!0,i.arguments.source);break;case"breakpointLocations":t(!0,i.arguments.source);break;case"source":t(!0,i.arguments.source);break;case"gotoTargets":t(!0,i.arguments.source);break;case"launchVSCode":i.arguments.args.forEach(r=>t(!1,r));break;default:break}break}case"response":{const i=e;if(i.success&&i.body)switch(i.command){case"stackTrace":i.body.stackFrames.forEach(r=>t(!1,r.source));break;case"loadedSources":i.body.sources.forEach(r=>t(!1,r));break;case"scopes":i.body.scopes.forEach(r=>t(!1,r.source));break;case"setFunctionBreakpoints":i.body.breakpoints.forEach(r=>t(!1,r.source));break;case"setBreakpoints":i.body.breakpoints.forEach(r=>t(!1,r.source));break;case"disassemble":i.body?.instructions.forEach(s=>t(!1,s.location));break;case"locations":t(!1,i.body?.source);break;default:break}break}}}var $c=V("IExtHostEditorTabs"),_8=class{constructor(e,t,i){this.e=i,this.d=t,this.acceptDtoUpdate(e)}get apiObject(){if(!this.a){const e=this,t={get isActive(){return e.b.id===e.e()},get label(){return e.b.label},get input(){return e.c},get isDirty(){return e.b.isDirty},get isPinned(){return e.b.isPinned},get isPreview(){return e.b.isPreview},get group(){return e.d.apiObject}};this.a=Object.freeze(t)}return this.a}get tabId(){return this.b.id}acceptDtoUpdate(e){this.b=e,this.c=this.f()}f(){switch(this.b.input.kind){case 1:return new p0(E.revive(this.b.input.uri));case 2:return new np(E.revive(this.b.input.original),E.revive(this.b.input.modified));case 3:return new bx(E.revive(this.b.input.base),E.revive(this.b.input.input1),E.revive(this.b.input.input2),E.revive(this.b.input.result));case 6:return new g0(E.revive(this.b.input.uri),this.b.input.viewType);case 7:return new yx(this.b.input.viewType);case 4:return new m0(E.revive(this.b.input.uri),this.b.input.notebookType);case 5:return new v0(E.revive(this.b.input.original),E.revive(this.b.input.modified),this.b.input.notebookType);case 8:return new Ex;case 9:return new Sx(E.revive(this.b.input.uri),E.revive(this.b.input.inputBoxUri));case 10:return new xx;case 11:return new kx(this.b.input.diffEditors.map(e=>new np(E.revive(e.original),E.revive(e.modified))));default:return}}},c_=class{constructor(e,t){this.c=[],this.d="",this.b=e,this.e=t;for(const i of e.tabs)i.isActive&&(this.d=i.id),this.c.push(new _8(i,this,()=>this.activeTabId()))}get apiObject(){if(!this.a){const e=this,t={get isActive(){return e.b.groupId===e.e()},get viewColumn(){return zt.to(e.b.viewColumn)},get activeTab(){return e.c.find(i=>i.tabId===e.d)?.apiObject},get tabs(){return Object.freeze(e.c.map(i=>i.apiObject))}};this.a=Object.freeze(t)}return this.a}get groupId(){return this.b.groupId}get tabs(){return this.c}acceptGroupDtoUpdate(e){this.b=e}acceptTabOperation(e){if(e.kind===0){const i=new _8(e.tabDto,this,()=>this.activeTabId());return this.c.splice(e.index,0,i),e.tabDto.isActive&&(this.d=i.tabId),i}else if(e.kind===1){const i=this.c.splice(e.index,1)[0];if(!i)throw new Error(`Tab close updated received for index ${e.index} which does not exist`);return i.tabId===this.d&&(this.d=""),i}else if(e.kind===3){if(e.oldIndex===void 0)throw new Error("Invalid old index on move IPC");const i=this.c.splice(e.oldIndex,1)[0];if(!i)throw new Error(`Tab move updated received for index ${e.oldIndex} which does not exist`);return this.c.splice(e.index,0,i),i}const t=this.c.find(i=>i.tabId===e.tabDto.id);if(!t)throw new Error("INVALID tab");return e.tabDto.isActive?this.d=e.tabDto.id:this.d===e.tabDto.id&&!e.tabDto.isActive&&(this.d=""),t.acceptDtoUpdate(e.tabDto),t}activeTabId(){return this.d}},xb=class{constructor(t){this.b=new I,this.c=new I,this.e=[],this.a=t.getProxy(q.MainThreadEditorTabs)}get tabGroups(){if(!this.f){const t=this,i={onDidChangeTabGroups:t.c.event,onDidChangeTabs:t.b.event,get all(){return Object.freeze(t.e.map(r=>r.apiObject))},get activeTabGroup(){const r=t.d;return ga(t.e.find(n=>n.groupId===r)?.apiObject)},close:async(r,s)=>{const n=Array.isArray(r)?r:[r];return n.length?l_(n[0])?this.j(n,s):this.i(n,s):!0}};this.f=Object.freeze(i)}return this.f}$acceptEditorTabModel(t){const i=new Set(this.e.map(l=>l.groupId)),r=new Set(t.map(l=>l.groupId)),s=YP(i,r),n=this.e.filter(l=>s.removed.includes(l.groupId)).map(l=>l.apiObject),o=[],a=[];this.e=t.map(l=>{const u=new c_(l,()=>this.d);return s.added.includes(u.groupId)?o.push(u.apiObject):a.push(u.apiObject),u});const c=ga(t.find(l=>l.isActive===!0)?.groupId);c!==void 0&&this.d!==c&&(this.d=c),this.c.fire(Object.freeze({opened:o,closed:n,changed:a}))}$acceptTabGroupUpdate(t){const i=this.e.find(r=>r.groupId===t.groupId);if(!i)throw new Error("Update Group IPC call received before group creation.");i.acceptGroupDtoUpdate(t),t.isActive&&(this.d=t.groupId),this.c.fire(Object.freeze({changed:[i.apiObject],opened:[],closed:[]}))}$acceptTabOperation(t){const i=this.e.find(s=>s.groupId===t.groupId);if(!i)throw new Error("Update Tabs IPC call received before group creation.");const r=i.acceptTabOperation(t);switch(t.kind){case 0:this.b.fire(Object.freeze({opened:[r.apiObject],closed:[],changed:[]}));return;case 1:this.b.fire(Object.freeze({opened:[],closed:[r.apiObject],changed:[]}));return;case 3:case 2:this.b.fire(Object.freeze({opened:[],closed:[],changed:[r.apiObject]}));return}}g(t){for(const i of this.e)for(const r of i.tabs)if(r.apiObject===t)return r}h(t){return this.e.find(i=>i.apiObject===t)}async i(t,i){const r=[];for(const s of t){const n=this.g(s);if(!n)throw new Error("Tab close: Invalid tab not found!");r.push(n.tabId)}return this.a.$closeTab(r,i)}async j(t,i){const r=[];for(const s of t){const n=this.h(s);if(!n)throw new Error("Group close: Invalid group not found!");r.push(n.groupId)}return this.a.$closeGroup(r,i)}};xb=__decorate([__param(0,Ie)],xb);function l_(e){return e.tabs!==void 0}var u_=0,j8=new WeakMap,oh=V("IExtHostTesting"),kb=class extends X{constructor(t,i,r,s){super(),this.C=i,this.D=r,this.F=s,this.f=this.B(new I),this.g=new Map,this.w=this.B(new I),this.y=new Set,this.z=new Map,this.onResultsChanged=this.f.event,this.results=[],this.h=t.getProxy(q.MainThreadTesting),this.m=new m_(this.h),this.j=new f_(this.h,i),r.registerArgumentProcessor({processArgument:n=>{switch(n?.$mid){case 16:{const o=n,a=o.tests[o.tests.length-1].item.extId;return this.g.get(Ne.root(a))?.collection.tree.get(a)?.actual??Ek(n)}case 18:{const{test:o,message:a}=n,c=o.item.extId;return{test:this.g.get(Ne.root(c))?.collection.tree.get(c)?.actual??Ek({$mid:16,tests:[o]}),message:gc.to(a)}}default:return n}}}),r.registerCommand(!1,"testing.getExplorerSelection",async()=>{const n=await r.executeCommand("_testing.getExplorerSelection"),o=a=>{const c=this.g.get(Ne.root(a));if(c)return Ne.isRoot(a)?c.controller:c.collection.tree.get(a)?.actual};return{include:n?.include.map(o).filter(oo)||[],exclude:n?.exclude.map(o).filter(oo)||[]}})}createTestController(t,i,r,s){if(this.g.has(i))throw new Error(`Attempt to insert a duplicate controller with ID "${i}"`);const n=new ue,o=n.add(new zM(i,r,this.F));o.root.label=r;const a=new Map,c=new Set,l=this.h,u=()=>{let f=0;s&&(f|=2);const g=d.relatedCodeProvider;return g&&(g?.provideRelatedTests&&(f|=8),g?.provideRelatedCode&&(f|=4)),f},h={items:o.root.children,get label(){return r},set label(f){r=f,o.root.label=f,l.$updateController(i,{label:r})},get refreshHandler(){return s},set refreshHandler(f){s=f,l.$updateController(i,{capabilities:u()})},get id(){return i},get relatedCodeProvider(){return d.relatedCodeProvider},set relatedCodeProvider(f){A(t,"testRelatedCode"),d.relatedCodeProvider=f,l.$updateController(i,{capabilities:u()})},createRunProfile:(f,g,v,y,S,x)=>{let P=Is(f);for(;a.has(P);)P++;return new z8(this.h,a,c,this.w.event,i,P,f,g,v,y,S,x)},createTestItem(f,g,v){return new Ju(i,f,g,v)},createTestRun:(f,g,v=!0)=>this.j.createTestRun(t,i,o,f,g,v),invalidateTestResults:f=>{if(f===void 0)this.h.$markTestRetired(void 0);else{const g=f instanceof Array?f:[f];this.h.$markTestRetired(g.map(v=>Ne.fromExtHostTestItem(v,i).toString()))}},set resolveHandler(f){o.resolveHandler=f},get resolveHandler(){return o.resolveHandler},dispose:()=>{n.dispose()}},d={controller:h,collection:o,profiles:a,extension:t,activeProfiles:c};return l.$registerTestController(i,r,u()),n.add(ee(()=>l.$unregisterTestController(i))),this.g.set(i,d),n.add(ee(()=>this.g.delete(i))),n.add(o.onDidGenerateDiff(f=>l.$publishDiff(i,f.map(gf.serialize)))),h}createTestObserver(){return this.m.checkout()}async runTests(t,i=Ge.None){const r=B8(t);if(!r)throw new Error("The request passed to `vscode.test.runTests` must include a profile");const s=this.g.get(r.controllerId);if(!s)throw new Error("Controller not found");await this.h.$runTests({preserveFocus:t.preserveFocus??!0,group:$b[r.kind],targets:[{testIds:t.include?.map(n=>Ne.fromExtHostTestItem(n,s.collection.root.id).toString())??[s.collection.root.id],profileId:r.profileId,controllerId:r.controllerId}],exclude:t.exclude?.map(n=>n.id)},i)}registerTestFollowupProvider(t){return this.y.add(t),{dispose:()=>{this.y.delete(t)}}}async $getTestsRelatedToCode(t,i,r){const s=this.F.getDocument(E.revive(t));if(!s)return[];const n=Fe.to(i),o=[];return await Promise.all([...this.g.values()].map(async a=>{let c;try{c=await a.relatedCodeProvider?.provideRelatedTests?.(s.document,n,r)}catch(l){r.isCancellationRequested||this.C.warn(`Error thrown while providing related tests for ${a.controller.label}`,l)}if(c){for(const l of c)o.push(Ne.fromExtHostTestItem(l,a.controller.id).toString());a.collection.flushDiff()}})),o}async $getCodeRelatedToTest(t,i){const r=this.g.get(Ne.root(t));if(!r)return[];const s=r.collection.tree.get(t);return s?(await r.relatedCodeProvider?.provideRelatedCode?.(s.actual,i))?.map(Li.from)??[]:[]}$syncTests(){for(const{collection:t}of this.g.values())t.flushDiff();return Promise.resolve()}async $getCoverageDetails(t,i,r){return(await this.j.getCoverageDetails(t,i,r))?.map(Tu.fromDetails)}async $disposeRun(t){this.j.disposeTestRun(t)}$configureRunProfile(t,i){this.g.get(t)?.profiles.get(i)?.configureHandler?.()}$setDefaultRunProfiles(t){const i=new Map;for(const[r,s]of Object.entries(t)){const n=this.g.get(r);if(!n)continue;const o=new Map,a=s.filter(l=>!n.activeProfiles.has(l)),c=[...n.activeProfiles].filter(l=>!s.includes(l));for(const l of a)o.set(l,!0),n.activeProfiles.add(l);for(const l of c)o.set(l,!1),n.activeProfiles.delete(l);o.size&&i.set(r,o)}this.w.fire(i)}async $refreshTests(t,i){await this.g.get(t)?.controller.refreshHandler?.(i)}$publishTestResults(t){this.results=Object.freeze(t.map(i=>{const r=iw.to(i),s=i.tasks.findIndex(n=>n.hasCoverage);return s!==-1&&(r.getDetailedCoverage=(n,o=Ge.None)=>this.h.$getCoverageDetails(i.id,s,n,o).then(a=>a.map(Tu.to))),j8.set(r,i.id),r}).concat(this.results).sort((i,r)=>r.completedAt-i.completedAt).slice(0,32)),this.f.fire()}async $expandTest(t,i){const r=this.g.get(Ne.fromString(t).controllerId)?.collection;r&&(await r.expand(t,i<0?1/0:i),r.flushDiff())}$acceptDiff(t){this.m.applyDiff(t.map(i=>gf.deserialize({asCanonicalUri:r=>r},i)))}async $runControllerTests(t,i){return Promise.all(t.map(r=>this.G(r,!1,i)))}async $startContinuousRun(t,i){const r=new lt(i),s=await Promise.all(t.map(n=>this.G(n,!0,r.token)));return!i.isCancellationRequested&&!s.some(n=>n.error)&&await new Promise(n=>i.onCancellationRequested(n)),r.dispose(!0),s}async $provideTestFollowups(t,i){const r=this.results.find(o=>j8.get(o)===t.resultId),s=r&&v_(Ne.fromString(t.extId),r?.results);if(!s)return[];let n=[];return await Promise.all([...this.y].map(async o=>{try{const a=await o.provideFollowup(r,s,t.taskIndex,t.messageIndex,i);a&&(n=n.concat(a))}catch(a){this.C.error("Error thrown while providing followup for test message",a)}})),i.isCancellationRequested?[]:n.map(o=>{const a=u_++;return this.z.set(a,o),{title:o.title,id:a}})}$disposeTestFollowups(t){for(const i of t)this.z.delete(i)}$executeTestFollowup(t){const i=this.z.get(t);return i?this.D.executeCommand(i.command,...i.arguments||[]):Promise.resolve()}$cancelExtensionTestRun(t,i){t===void 0?this.j.cancelAllRuns():this.j.cancelRunById(t,i)}getMetadataForRun(t){for(const i of this.j.trackers){const r=i.getTaskIdForRun(t);if(r)return{taskId:r,runId:i.id}}}async G(t,i,r){const s=this.g.get(t.controllerId);if(!s)return{};const{collection:n,profiles:o,extension:a}=s,c=o.get(t.profileId);if(!c)return{};const l=t.testIds.map(f=>n.tree.get(f)).filter(oo),u=t.excludeExtIds.map(f=>s.collection.tree.get(f)).filter(oo).filter(f=>l.some(g=>g.fullId.compare(f.fullId)===2));if(!l.length)return{};const h=new tp(l.some(f=>f.actual instanceof Nw)?void 0:l.map(f=>f.actual),u.map(f=>f.actual),c,i),d=dF(t)&&this.j.prepareForMainThreadTestRun(a,h,W8.fromInternal(t,s.collection),c,r);try{return await c.runHandler(h,r),{}}catch(f){return{error:String(f)}}finally{d&&d.hasRunningTasks&&!r.isCancellationRequested&&await ze.toPromise(d.onEnd)}}};kb=__decorate([__param(0,Ie),__param(1,Ce),__param(2,rr),__param(3,Vo)],kb);var h_=1e4,H8;(function(e){e[e.Running=0]="Running",e[e.Cancelling=1]="Cancelling",e[e.Ended=2]="Ended"})(H8||(H8={}));var d_=class extends X{get hasRunningTasks(){return this.g>0}get id(){return this.C.id}constructor(e,t,i,r,s,n){super(),this.C=e,this.D=t,this.F=i,this.G=r,this.H=s,this.f=0,this.g=0,this.h=new Map,this.j=new Set,this.w=this.B(new I),this.z=new Map,this.onEnd=this.w.event,this.m=this.B(new lt(n));const o=this.B(new Es(()=>this.I(),h_));this.B(this.m.token.onCancellationRequested(()=>o.schedule()));const a=new I;this.y=a.event,this.B(ee(()=>{a.fire(),a.dispose()}))}getTaskIdForRun(e){for(const[t,{run:i}]of this.h)if(i===e)return t}cancel(e){e?this.h.get(e)?.cts.cancel():this.f===0?(this.m.cancel(),this.f=1):this.f===1&&this.I()}async getCoverageDetails(e,t,i){const[,r]=Ne.fromString(e).path,s=this.z.get(e);if(!s)return[];const{report:n,extIds:o}=s,a=this.h.get(r);if(!a)throw new Error("unreachable: run task was not found");let c;if(t&&n instanceof pu){const u=o.indexOf(t);if(u===-1)return[];c=n.fromTests[u]}return await(c?this.G?.loadDetailedCoverageForTest?.(a.run,n,c,i):this.G?.loadDetailedCoverage?.(a.run,n,i))??[]}createRun(e){const t=this.C.id,i=this.C.controllerId,r=Ht(),s=l=>(u,...h)=>{if(o){this.F.warn(`Setting the state of test "${u.id}" is a no-op after the run ends.`);return}this.L(u),l(u,...h)},n=(l,u)=>{const h=u instanceof Array?u.map(gc.from):[gc.from(u)];if(l.uri&&l.range){const d={range:O.from(l.range),uri:l.uri};for(const f of h)f.location=f.location||d}this.D.$appendTestMessagesInRun(t,r,Ne.fromExtHostTestItem(l,i).toString(),h)};let o=!1;const a=this.B(new lt(this.m.token)),c={isPersisted:this.C.isPersisted,token:a.token,name:e,onDidDispose:this.y,addCoverage:l=>{if(o)return;const u=l instanceof pu?l.fromTests:[];if(u.length){A(this.H,"attributableCoverage");for(const f of u)this.L(f)}const h=l.uri.toString(),d=new Ne([t,r,h]).toString();this.z.set(d,{report:l,extIds:u.map(f=>Ne.fromExtHostTestItem(f,i).toString())}),this.D.$appendCoverage(t,r,Tu.fromFile(i,d,l))},enqueued:s(l=>{this.D.$updateTestStateInRun(t,r,Ne.fromExtHostTestItem(l,i).toString(),1)}),skipped:s(l=>{this.D.$updateTestStateInRun(t,r,Ne.fromExtHostTestItem(l,i).toString(),5)}),started:s(l=>{this.D.$updateTestStateInRun(t,r,Ne.fromExtHostTestItem(l,i).toString(),2)}),errored:s((l,u,h)=>{n(l,u),this.D.$updateTestStateInRun(t,r,Ne.fromExtHostTestItem(l,i).toString(),6,h)}),failed:s((l,u,h)=>{n(l,u),this.D.$updateTestStateInRun(t,r,Ne.fromExtHostTestItem(l,i).toString(),4,h)}),passed:s((l,u)=>{this.D.$updateTestStateInRun(t,r,Ne.fromExtHostTestItem(l,this.C.controllerId).toString(),3,u)}),appendOutput:(l,u,h)=>{o||(h&&this.L(h),this.D.$appendOutputToRun(t,r,J.fromString(l),u&&Li.from(u),h&&Ne.fromExtHostTestItem(h,i).toString()))},end:()=>{o||(o=!0,this.D.$finishedTestRunTask(t,r),--this.g||this.J())}};return this.g++,this.h.set(r,{run:c,cts:a}),this.D.$startedTestRunTask(t,{id:r,ctrlId:this.C.controllerId,name:e||this.H.displayName||this.H.identifier.value,running:!0}),c}I(){for(const{run:e}of this.h.values())e.end()}J(){this.f!==2&&(this.f=2,this.w.fire())}L(e){if(!(e instanceof Ju))throw new mf(e.id);if(this.j.has(Ne.fromExtHostTestItem(e,this.C.controllerId).toString()))return;const t=[],i=this.C.colllection.root;for(;;){const r=Fn.from(e);if(t.unshift(r),this.j.has(r.extId)||(this.j.add(r.extId),e===i))break;e=e.parent||i}this.D.$addTestsToRun(this.C.controllerId,this.C.id,t)}dispose(){this.J(),super.dispose()}},f_=class{get trackers(){return this.f.values()}constructor(e,t){this.h=e,this.j=t,this.f=new Map,this.g=new Map}getCoverageDetails(e,t,i){const r=Ne.root(e);return this.g.get(r)?.getCoverageDetails(e,t,i)||[]}disposeTestRun(e){this.g.get(e)?.dispose(),this.g.delete(e);for(const[t,{id:i}]of this.f)i===e&&this.f.delete(t)}prepareForMainThreadTestRun(e,t,i,r,s){return this.k(t,i,r,e,s)}cancelRunById(e,t){this.g.get(e)?.cancel(t)}cancelAllRuns(){for(const e of this.f.values())e.cancel()}createTestRun(e,t,i,r,s,n){const o=this.f.get(r);if(o)return o.createRun(s);const a=W8.fromPublic(t,i,r,n),c=B8(r);this.h.$startedExtensionTestRun({controllerId:t,continuous:!!r.continuous,profile:c&&{group:$b[c.kind],id:c.profileId},exclude:r.exclude?.map(u=>Ne.fromExtHostTestItem(u,i.root.id).toString())??[],id:a.id,include:r.include?.map(u=>Ne.fromExtHostTestItem(u,i.root.id).toString())??[i.root.id],preserveFocus:r.preserveFocus??!0,persist:n});const l=this.k(r,a,r.profile,e);return ze.once(l.onEnd)(()=>{this.h.$finishedExtensionTestRun(a.id)}),l.createRun(s)}k(e,t,i,r,s){const n=new d_(t,this.h,this.j,i,r,s);return this.f.set(e,n),this.g.set(n.id,n),n}},B8=e=>{if(e.profile){if(!(e.profile instanceof z8))throw new Error("TestRunRequest.profile is not an instance created from TestController.createRunProfile");return e.profile}},W8=class I4{static fromPublic(t,i,r,s){return new I4(t,Ht(),s,i)}static fromInternal(t,i){return new I4(t.controllerId,t.runId,!0,i)}constructor(t,i,r,s){this.controllerId=t,this.id=i,this.isPersisted=r,this.colllection=s}},p_=class{get isEmpty(){return this.f.size===0&&this.h.size===0&&this.g.size===0}constructor(e){this.k=e,this.f=new Set,this.g=new Set,this.h=new Set,this.j=new Set}add(e){this.f.add(e)}update(e){Object.assign(e.revived,Fn.toPlain(e.item)),this.f.has(e)||this.g.add(e)}remove(e){if(this.f.has(e)){this.f.delete(e);return}this.g.delete(e);const t=Ne.parentId(e.item.extId);if(t&&this.j.has(t.toString())){this.j.add(e.item.extId);return}this.h.add(e)}getChangeEvent(){const{f:e,g:t,h:i}=this;return{get added(){return[...e].map(r=>r.revived)},get updated(){return[...t].map(r=>r.revived)},get removed(){return[...i].map(r=>r.revived)}}}complete(){this.isEmpty||this.k.fire(this.getChangeEvent())}},g_=class extends fF{constructor(){super(...arguments),this.z=new I,this.onDidChangeTests=this.z.event}get rootTests(){return this.h}getMirroredTestDataById(e){return this.g.get(e)}getMirroredTestDataByReference(e){return this.g.get(e.id)}y(e,t){return{...e,revived:Fn.toPlain(e.item),depth:t?t.depth+1:0,children:new Set}}x(){return new p_(this.z)}},m_=class{constructor(e){this.g=e}checkout(){this.f||(this.f=this.h());const e=this.f;return e.observers++,{onDidChangeTest:e.tests.onDidChangeTests,get tests(){return[...e.tests.rootTests].map(t=>t.revived)},dispose:jh(()=>{--e.observers===0&&(this.g.$unsubscribeFromDiffs(),this.f=void 0)})}}getMirroredTestDataByReference(e){return this.f?.tests.getMirroredTestDataByReference(e)}applyDiff(e){this.f?.tests.apply(e)}h(){const e=new g_({asCanonicalUri:t=>t});return this.g.$subscribeToDiffs(),{observers:0,tests:e}}},ah=(e,t,i,r)=>{i?Object.assign(i,r):t.$updateTestRunConfig(e.controllerId,e.profileId,r)},z8=class{#e;#t;#i;#r;#n;get label(){return this.g}set label(e){e!==this.g&&(this.g=e,ah(this,this.#e,this.#r,{label:e}))}get supportsContinuousRun(){return this.h}set supportsContinuousRun(e){e!==this.h&&(this.h=e,ah(this,this.#e,this.#r,{supportsContinuousRun:e}))}get isDefault(){return this.#t.has(this.profileId)}set isDefault(e){e!==this.isDefault&&(e?this.#t.add(this.profileId):this.#t.delete(this.profileId),ah(this,this.#e,this.#r,{isDefault:e}))}get tag(){return this._tag}set tag(e){e?.id!==this._tag?.id&&(this._tag=e,ah(this,this.#e,this.#r,{tag:e?Or.namespace(this.controllerId,e.id):null}))}get configureHandler(){return this.f}set configureHandler(e){e!==this.f&&(this.f=e,ah(this,this.#e,this.#r,{hasConfigurationHandler:!!e}))}get onDidChangeDefault(){return ze.chain(this.#i,e=>e.map(t=>t.get(this.controllerId)?.get(this.profileId)).filter(oo))}constructor(e,t,i,r,s,n,o,a,c,l=!1,u=void 0,h=!1){this.controllerId=s,this.profileId=n,this.g=o,this.kind=a,this.runHandler=c,this._tag=u,this.h=h,this.#e=e,this.#n=t,this.#t=i,this.#i=r,t.set(n,this);const d=$b[a];if(typeof d!="number")throw new Error(`Unknown TestRunProfile.group ${a}`);l&&i.add(n),this.#r={profileId:n,controllerId:s,tag:u?Or.namespace(this.controllerId,u.id):null,label:o,group:d,isDefault:l,hasConfigurationHandler:!1,supportsContinuousRun:h},queueMicrotask(()=>{this.#r&&(this.#e.$publishTestRunProfile(this.#r),this.#r=void 0)})}dispose(){this.#n?.delete(this.profileId)&&(this.#n=void 0,this.#e.$removeTestProfile(this.controllerId,this.profileId)),this.#r=void 0}},$b={[rc.Coverage]:8,[rc.Debug]:4,[rc.Run]:2};function v_(e,t){for(let i=0;i<e.path.length;i++){const r=t.find(s=>s.id===e.path[i]);if(!r)return;if(i===e.path.length-1)return r;t=r.children}}var FY=V("configurationResolverService"),ct;(function(e){e.Unknown="unknown",e.Env="env",e.Config="config",e.Command="command",e.Input="input",e.ExtensionInstallFolder="extensionInstallFolder",e.WorkspaceFolder="workspaceFolder",e.Cwd="cwd",e.WorkspaceFolderBasename="workspaceFolderBasename",e.UserHome="userHome",e.LineNumber="lineNumber",e.SelectedText="selectedText",e.File="file",e.FileWorkspaceFolder="fileWorkspaceFolder",e.FileWorkspaceFolderBasename="fileWorkspaceFolderBasename",e.RelativeFile="relativeFile",e.RelativeFileDirname="relativeFileDirname",e.FileDirname="fileDirname",e.FileExtname="fileExtname",e.FileBasename="fileBasename",e.FileBasenameNoExtension="fileBasenameNoExtension",e.FileDirnameBasename="fileDirnameBasename",e.ExecPath="execPath",e.ExecInstallFolder="execInstallFolder",e.PathSeparator="pathSeparator",e.PathSeparatorAlias="/"})(ct||(ct={}));var Ni=class extends yr{constructor(e,t){super(t),this.variable=e}},w_=class km{static{this.VARIABLE_LHS="${"}static{this.VARIABLE_REGEXP=/\$\{(.*?)\}/g}constructor(t,i,r,s){this.h=new Map,this.a=t,this.b=i,this.g=r,s&&(this.c=s.then(n=>this.i(n)))}i(t){if(it){const i=Object.create(null);return Object.keys(t).forEach(r=>{i[r.toLowerCase()]=t[r]}),i}return t}resolveWithEnvironment(t,i,r){return this.l({env:this.i(t),userHome:void 0},i?i.uri:void 0,r)}async resolveAsync(t,i){const r={env:await this.c,userHome:await this.g};return this.l(r,t?t.uri:void 0,i)}async j(t,i,r,s){const n=ot(i);it&&n.windows?Object.keys(n.windows).forEach(a=>n[a]=n.windows[a]):Dt&&n.osx?Object.keys(n.osx).forEach(a=>n[a]=n.osx[a]):At&&n.linux&&Object.keys(n.linux).forEach(a=>n[a]=n.linux[a]),delete n.windows,delete n.osx,delete n.linux;const o={env:await this.c,userHome:await this.g};return this.l(o,t?t.uri:void 0,n,r,s)}async resolveAnyAsync(t,i,r){return this.j(t,i,r)}async resolveAnyMap(t,i,r){const s=new Map;return{newConfig:await this.j(t,i,r,s),resolvedVariables:s}}resolveWithInteractionReplace(t,i,r,s){throw new Error("resolveWithInteractionReplace not implemented.")}resolveWithInteraction(t,i,r,s){throw new Error("resolveWithInteraction not implemented.")}contributeVariable(t,i){if(this.h.has(t))throw new Error("Variable "+t+" is contributed twice.");this.h.set(t,i)}async l(t,i,r,s,n){if(De(r))return this.m(t,i,r,s,n);if(Array.isArray(r))return Promise.all(r.map(o=>this.l(t,i,o,s,n)));if(St(r)){const o=Object.create(null),a=await Promise.all(Object.keys(r).map(async c=>[await this.m(t,i,c,s,n),await this.l(t,i,r[c],s,n)]));for(const[c,l]of a)o[c]=l;return o}return r}m(t,i,r,s,n){return fA(r,km.VARIABLE_REGEXP,async(o,a)=>{if(a.includes(km.VARIABLE_LHS))return o;let c=await this.o(t,o,a,i,s);return n?.set(a,c),c!==o&&De(c)&&c.match(km.VARIABLE_REGEXP)&&(c=await this.m(t,i,c,s,n)),c})}n(t){return this.b?this.b.getUriLabel(t,{noPrefix:!0}):t.fsPath}async o(t,i,r,s,n){let o;const a=r.split(":");a.length>1&&(r=a[0],o=a[1]);const c=h=>{const d=this.a.getFilePath();if(d)return Yu(d);throw new Ni(h,p(13219,null,i))},l=h=>{const d=c(h);if(this.a.getWorkspaceFolderPathForFile){const f=this.a.getWorkspaceFolderPathForFile();if(f)return Yu(f)}throw new Ni(h,p(13220,null,i,ut(d)))},u=h=>{if(o){const d=this.a.getFolderUri(o);if(d)return d;throw new Ni(h,p(13221,null,i,o))}if(s)return s;throw this.a.getWorkspaceFolderCount()>1?new Ni(h,p(13222,null,i)):new Ni(h,p(13223,null,i))};switch(r){case"env":if(o){if(t.env){const h=t.env[it?o.toLowerCase():o];if(De(h))return h}return""}throw new Ni(ct.Env,p(13224,null,i));case"config":if(o){const h=this.a.getConfigurationValue(s,o);if($t(h))throw new Ni(ct.Config,p(13225,null,i,o));if(St(h))throw new Ni(ct.Config,p(13226,null,i,o));return h}throw new Ni(ct.Config,p(13227,null,i));case"command":return this.p(ct.Command,i,o,n,"command");case"input":return this.p(ct.Input,i,o,n,"input");case"extensionInstallFolder":if(o){const h=await this.a.getExtension(o);if(!h)throw new Ni(ct.ExtensionInstallFolder,p(13228,null,i,o));return this.n(h.extensionLocation)}throw new Ni(ct.ExtensionInstallFolder,p(13229,null,i));default:switch(r){case"workspaceRoot":case"workspaceFolder":return Yu(this.n(u(ct.WorkspaceFolder)));case"runtimeLanguageFolder":return(await this.a.getICubeRuntimeContext())?.runtimeLanguageFolder||"";case"runtimeName":return(await this.a.getICubeRuntimeContext())?.runtimeName||"";case"cwd":return s||o?Yu(this.n(u(ct.Cwd))):ro();case"workspaceRootFolderName":case"workspaceFolderBasename":return Yu(ut(this.n(u(ct.WorkspaceFolderBasename))));case"userHome":{if(t.userHome)return t.userHome;throw new Ni(ct.UserHome,p(13230,null,i))}case"lineNumber":{const f=this.a.getLineNumber();if(f)return f;throw new Ni(ct.LineNumber,p(13231,null,i))}case"selectedText":{const f=this.a.getSelectedText();if(f)return f;throw new Ni(ct.SelectedText,p(13232,null,i))}case"file":return c(ct.File);case"fileWorkspaceFolder":return l(ct.FileWorkspaceFolder);case"fileWorkspaceFolderBasename":return ut(l(ct.FileWorkspaceFolderBasename));case"relativeFile":return s||o?so(this.n(u(ct.RelativeFile)),c(ct.RelativeFile)):c(ct.RelativeFile);case"relativeFileDirname":{const f=wi(c(ct.RelativeFileDirname));if(s||o){const g=so(this.n(u(ct.RelativeFileDirname)),f);return g.length===0?".":g}return f}case"fileDirname":return wi(c(ct.FileDirname));case"fileExtname":return Zh(c(ct.FileExtname));case"fileBasename":return ut(c(ct.FileBasename));case"fileBasenameNoExtension":{const f=ut(c(ct.FileBasenameNoExtension));return f.slice(0,f.length-Zh(f).length)}case"fileDirnameBasename":return ut(wi(c(ct.FileDirnameBasename)));case"execPath":{const f=this.a.getExecPath();return f||i}case"execInstallFolder":{const f=this.a.getAppRoot();return f||i}case"pathSeparator":case"/":return ft;default:try{const f=o?`${r}:${o}`:r;return this.p(ct.Unknown,i,f,n,void 0)}catch{return i}}}}p(t,i,r,s,n){if(r&&s){const o=n===void 0?s[r]:s[n+":"+r];if(typeof o=="string")return o;throw new Ni(t,p(13233,null,i))}return i}},Cc=V("IExtHostVariableResolverProvider"),b_=class extends w_{constructor(e,t,i,r,s,n,o){function a(){if(i){const c=i.activeEditor();if(c)return c.document.uri;const l=r.tabGroups.all.find(u=>u.isActive)?.activeTab;if(l!==void 0){if(l.input instanceof np||l.input instanceof v0)return l.input.modified;if(l.input instanceof p0||l.input instanceof m0||l.input instanceof g0)return l.input.uri}}}super({getFolderUri:c=>{const l=n.folders.filter(u=>u.name===c);if(l&&l.length>0)return l[0].uri},getWorkspaceFolderCount:()=>n.folders.length,getConfigurationValue:(c,l)=>s.getConfiguration(void 0,c).get(l),getAppRoot:()=>ro(),getExecPath:()=>si.VSCODE_EXEC_PATH,getFilePath:()=>{const c=a();if(c)return ys(c.fsPath)},getWorkspaceFolderPathForFile:()=>{if(t){const c=a();if(c){const l=t.getWorkspaceFolder(c);if(l)return ys(l.uri.fsPath)}}},getSelectedText:()=>{if(i){const c=i.activeEditor();if(c&&!c.selection.isEmpty)return c.document.getText(c.selection)}},getLineNumber:()=>{if(i){const c=i.activeEditor();if(c)return String(c.selection.end.line+1)}},getExtension:c=>e.getExtension(c),getICubeRuntimeContext:async()=>await t.getICubeRuntimeContext()},void 0,o?Promise.resolve(o):void 0,Promise.resolve(si))}},kg=class extends X{constructor(t,i,r,s,n){super(),this.b=t,this.c=i,this.g=r,this.h=s,this.j=n,this.a=new Hi(async()=>{const o=await this.h.getConfigProvider(),c={folders:await this.c.getWorkspaceFolders2()||[]};return this.B(this.c.onDidChangeWorkspace(async l=>{c.folders=await this.c.getWorkspaceFolders2()||[]})),new b_(this.b,this.c,this.g,this.j,o,c,this.m())})}getResolver(){return this.a.value}m(){}};kg=__decorate([__param(0,zs),__param(1,Fr),__param(2,Vo),__param(3,gr),__param(4,$c)],kg);var Cb=V("IExtHostDebugService"),$g=class extends X{get onDidStartDebugSession(){return this.y.event}get onDidTerminateDebugSession(){return this.z.event}get onDidChangeActiveDebugSession(){return this.C.event}get activeDebugSession(){return this.D?.api}get onDidReceiveDebugSessionCustomEvent(){return this.F.event}get activeDebugConsole(){return this.G.value}constructor(t,i,r,s,n,o,a,c){super(),this.Y=i,this.Z=r,this.$=s,this.ab=n,this.bb=o,this.cb=a,this.db=c,this.w=new Map,this.O=0,this.P=new Map,this.Q=new Map,this.R=new WeakMap,this.S=new Map,this.W=new Map,this.X=0,this.f=0,this.g=[],this.h=0,this.j=[],this.m=0,this.n=[],this.M=new Map,this.N=new Map,this.y=this.B(new I),this.z=this.B(new I),this.C=this.B(new I),this.F=this.B(new I),this.u=t.getProxy(q.MainThreadDebugService),this.I=this.B(new I),this.L=this.B(new I),this.G=new E_(this.u),this.H=new Map,this.Z.getExtensionRegistry().then(l=>{this.B(l.onDidChange(u=>{this.fb(l)})),this.fb(l)})}async $getVisualizerTreeItem(t,i){const r=this.gb(i);if(!r)return;const s=await this.Q.get(t)?.getTreeItem?.(r);return s?this.eb(t,s):void 0}registerDebugVisualizationTree(t,i,r){const s=Xe.toKey(t.identifier),n=this.yb(s,i);if(this.P.has(n))throw new Error(`A debug visualization provider with id '${i}' is already registered`);return this.Q.set(n,r),this.u.$registerDebugVisualizerTree(n,!!r.editItem),ee(()=>{this.u.$unregisterDebugVisualizerTree(n),this.Q.delete(i)})}async $getVisualizerTreeItemChildren(t,i){const r=this.S.get(i)?.item;return r?(await this.Q.get(t)?.getChildren?.(r))?.map(n=>this.eb(t,n))||[]:[]}async $editVisualizerTreeItem(t,i){const r=this.S.get(t);if(!r)return;const s=await this.Q.get(r.provider)?.editItem?.(r.item,i);return this.eb(r.provider,s||r.item)}$disposeVisualizedTree(t){const i=this.S.get(t);if(!i)return;const r=[i.children];for(const s of r)if(s)for(const n of s)r.push(this.S.get(n)?.children),this.S.delete(n)}eb(t,i){let r=this.R.get(i);return r||(r=this.O++,this.R.set(i,r),this.S.set(r,{provider:t,item:i})),uw.from(i,r)}asDebugSourceUri(t,i){const r=t;if(typeof r.sourceReference=="number"&&r.sourceReference>0){let s=`debug:${encodeURIComponent(r.path||"")}`,n="?";return i&&(s+=`${n}session=${encodeURIComponent(i.id)}`,n="&"),s+=`${n}ref=${r.sourceReference}`,E.parse(s)}else{if(r.path)return E.file(r.path);throw new Error("cannot create uri from DAP 'source' object; properties 'path' and 'sourceReference' are both missing.")}}fb(t){const i=[];for(const r of t.getAllExtensionDescriptions())if(r.contributes){const s=r.contributes.debuggers;if(s&&s.length>0)for(const n of s)r_(n)&&i.push(n.type)}this.u.$registerDebugTypes(i)}get activeStackItem(){return this.J}get onDidChangeActiveStackItem(){return this.L.event}get onDidChangeBreakpoints(){return this.I.event}get breakpoints(){const t=[];return this.H.forEach(i=>t.push(i)),t}async $resolveDebugVisualizer(t,i){const r=this.W.get(t);if(!r)throw new Error(`No debug visualizer found with id '${t}'`);let{v:s,provider:n,extensionId:o}=r;if(s.visualization||(s=await n.resolveDebugVisualization?.(s,i)||s,r.v=s),!s.visualization)throw new Error(`No visualization returned from resolveDebugVisualization in '${n}'`);return this.zb(o,s.visualization)}async $executeDebugVisualizerCommand(t){const i=this.W.get(t);if(!i)throw new Error(`No debug visualizer found with id '${t}'`);const r=i.v.visualization;r&&"command"in r&&this.cb.executeCommand(r.command,...r.arguments||[])}gb(t){const i=this.w.get(t.sessionId);return i&&{session:i.api,variable:t.variable,containerId:t.containerId,frameId:t.frameId,threadId:t.threadId}}async $provideDebugVisualizers(t,i,r,s){const n=this.gb(r),o=this.yb(t,i),a=this.P.get(o);if(!n||!a)return[];const c=await a.provideDebugVisualization(n,s);return c?c.map(l=>{const u=++this.X;this.W.set(u,{v:l,provider:a,extensionId:t});const h=l.iconPath?this.Ab(l.iconPath):void 0;return{id:u,name:l.name,iconClass:h?.iconClass,iconPath:h?.iconPath,visualization:this.zb(t,l.visualization)}}):[]}$disposeDebugVisualizers(t){for(const i of t)this.W.delete(i)}registerDebugVisualizationProvider(t,i,r){if(!t.contributes?.debugVisualizers?.some(o=>o.id===i))throw new Error(`Extensions may only call registerDebugVisualizationProvider() for renderers they contribute (got ${i})`);const s=Xe.toKey(t.identifier),n=this.yb(s,i);if(this.P.has(n))throw new Error(`A debug visualization provider with id '${i}' is already registered`);return this.P.set(n,r),this.u.$registerDebugVisualizer(s,i),ee(()=>{this.u.$unregisterDebugVisualizer(s,i),this.P.delete(i)})}addBreakpoints(t){const i=t.filter(n=>{const o=n.id;return this.H.has(o)?!1:(this.H.set(o,n),!0)});this.vb(i,[],[]);const r=[],s=new Map;for(const n of i)if(n instanceof Lo){let o=s.get(n.location.uri.toString());o||(o={type:"sourceMulti",uri:n.location.uri,lines:[]},s.set(n.location.uri.toString(),o),r.push(o)),o.lines.push({id:n.id,enabled:n.enabled,condition:n.condition,hitCondition:n.hitCondition,logMessage:n.logMessage,line:n.location.range.start.line,character:n.location.range.start.character,mode:n.mode})}else n instanceof No&&r.push({type:"function",id:n.id,enabled:n.enabled,hitCondition:n.hitCondition,logMessage:n.logMessage,condition:n.condition,functionName:n.functionName,mode:n.mode});return this.u.$registerBreakpoints(r)}removeBreakpoints(t){const i=t.filter(o=>this.H.delete(o.id));this.vb([],i,[]);const r=i.filter(o=>o instanceof Lo).map(o=>o.id),s=i.filter(o=>o instanceof No).map(o=>o.id),n=i.filter(o=>o instanceof Hf).map(o=>o.id);return this.u.$unregisterBreakpoints(r,s,n)}startDebugging(t,i,r){const s=r.testRun&&this.db.getMetadataForRun(r.testRun);return this.u.$startDebugging(t?t.uri:void 0,i,{parentSessionID:r.parentSession?r.parentSession.id:void 0,lifecycleManagedByParent:r.lifecycleManagedByParent,repl:r.consoleMode===Gf.MergeWithParent?"mergeWithParent":"separate",noDebug:r.noDebug,compact:r.compact,suppressSaveBeforeStart:r.suppressSaveBeforeStart,testRun:s&&{runId:s.runId,taskId:s.taskId},suppressDebugStatusbar:r.suppressDebugStatusbar??r.debugUI?.simple,suppressDebugToolbar:r.suppressDebugToolbar??r.debugUI?.simple,suppressDebugView:r.suppressDebugView??r.debugUI?.simple})}stopDebugging(t){return this.u.$stopDebugging(t?t.id:void 0)}registerDebugConfigurationProvider(t,i,r){if(!i)return new Oe(()=>{});const s=this.f++;return this.g.push({type:t,handle:s,provider:i}),this.u.$registerDebugConfigurationProvider(t,r,!!i.provideDebugConfigurations,!!i.resolveDebugConfiguration,!!i.resolveDebugConfigurationWithSubstitutedVariables,s),new Oe(()=>{this.g=this.g.filter(n=>n.provider!==i),this.u.$unregisterDebugConfigurationProvider(s)})}registerDebugAdapterDescriptorFactory(t,i,r){if(!r)return new Oe(()=>{});if(!this.rb(t,i))throw new Error(`a DebugAdapterDescriptorFactory can only be registered from the extension that defines the '${i}' debugger.`);if(this.ob(i))throw new Error("a DebugAdapterDescriptorFactory can only be registered once per a type.");const s=this.h++;return this.j.push({type:i,handle:s,factory:r}),this.u.$registerDebugAdapterDescriptorFactory(i,s),new Oe(()=>{this.j=this.j.filter(n=>n.factory!==r),this.u.$unregisterDebugAdapterDescriptorFactory(s)})}registerDebugAdapterTrackerFactory(t,i){if(!i)return new Oe(()=>{});const r=this.m++;return this.n.push({type:t,handle:r,factory:i}),new Oe(()=>{this.n=this.n.filter(s=>s.factory!==i)})}async $runInTerminal(t,i){return Promise.resolve(void 0)}async $substituteVariables(t,i){let r;const s=await this.xb(t);return s&&(r={uri:s.uri,name:s.name,index:s.index,toResource:()=>{throw new Error("Not implemented")}}),(await this.bb.getResolver()).resolveAnyAsync(r,i)}hb(t,i){if(t instanceof ru)return new x_(t.implementation)}ib(){}async $startDASession(t,i){const r=this,s=await this.wb(i);return this.tb(this.ob(s.type),s).then(n=>{if(!n)throw new Error(`Couldn't find a debug adapter descriptor for debug type '${s.type}' (extension might have failed to activate)`);const o=n.createWorkerDebugAdapter?.(n,s)||this.hb(n,s);if(!o)throw new Error(`Couldn't create a debug adapter for type '${s.type}'.`);const a=o;return this.M.set(t,a),this.sb(s).then(c=>(c&&this.N.set(t,c),a.onMessage(async l=>{if(l.type==="request"&&l.command==="handshake"){const u=l,h={type:"response",seq:0,command:u.command,request_seq:u.seq,success:!0};this.U||(this.U=this.ib());try{if(this.U){const d=await this.U.sign(u.arguments.value);h.body={signature:d},a.sendResponse(h)}else throw new Error("no signer")}catch(d){h.success=!1,h.message=d.message,a.sendResponse(h)}}else c&&c.onDidSendMessage&&c.onDidSendMessage(l),l=a_(l,!0),r.u.$acceptDAMessage(t,l)}),a.onError(l=>{c&&c.onError&&c.onError(l),this.u.$acceptDAError(t,l.name,l.message,l.stack)}),a.onExit(l=>{c&&c.onExit&&c.onExit(l??void 0,void 0),this.u.$acceptDAExit(t,l??void 0,void 0)}),c&&c.onWillStartSession&&c.onWillStartSession(),a.startSession()))})}$sendDAMessage(t,i){i=o_(i,!1);const r=this.N.get(t);r&&r.onWillReceiveMessage&&r.onWillReceiveMessage(i),this.M.get(t)?.sendMessage(i)}$stopDASession(t){const i=this.N.get(t);this.N.delete(t),i&&i.onWillStopSession&&i.onWillStopSession();const r=this.M.get(t);return this.M.delete(t),r?r.stopSession():Promise.resolve(void 0)}$acceptBreakpointsDelta(t){const i=[],r=[],s=[];if(t.added)for(const n of t.added){const o=n.id;if(o&&!this.H.has(o)){let a;if(n.type==="function")a=new No(n.functionName,n.enabled,n.condition,n.hitCondition,n.logMessage,n.mode);else if(n.type==="data")a=new Hf(n.label,n.dataId,n.canPersist,n.enabled,n.hitCondition,n.condition,n.logMessage,n.mode);else{const c=E.revive(n.uri);a=new Lo(new tr(c,new Pe(n.line,n.character)),n.enabled,n.condition,n.hitCondition,n.logMessage,n.mode)}MF(a,o),this.H.set(o,a),i.push(a)}}if(t.removed)for(const n of t.removed){const o=this.H.get(n);o&&(this.H.delete(n),r.push(o))}if(t.changed){for(const n of t.changed)if(n.id){const o=this.H.get(n.id);if(o){if(o instanceof No&&n.type==="function"){const a=o;a.enabled=n.enabled,a.condition=n.condition,a.hitCondition=n.hitCondition,a.logMessage=n.logMessage,a.functionName=n.functionName}else if(o instanceof Lo&&n.type==="source"){const a=o;a.enabled=n.enabled,a.condition=n.condition,a.hitCondition=n.hitCondition,a.logMessage=n.logMessage,a.location=new tr(E.revive(n.uri),new Pe(n.line,n.character))}s.push(o)}}}this.vb(i,r,s)}async $acceptStackFrameFocus(t){let i;if(t){const r=await this.wb(t.sessionId);t.kind==="thread"?i=new hx(r.api,t.threadId):i=new ux(r.api,t.threadId,t.frameId)}this.J=i,this.L.fire(this.J)}$provideDebugConfigurations(t,i,r){return hi(async()=>{const s=this.qb(t);if(!s)throw new Error("no DebugConfigurationProvider found");if(!s.provideDebugConfigurations)throw new Error("DebugConfigurationProvider has no method provideDebugConfigurations");const n=await this.xb(i);return s.provideDebugConfigurations(n,r)}).then(s=>{if(!s)throw new Error("nothing returned from DebugConfigurationProvider.provideDebugConfigurations");return s})}$resolveDebugConfiguration(t,i,r,s){return hi(async()=>{const n=this.qb(t);if(!n)throw new Error("no DebugConfigurationProvider found");if(!n.resolveDebugConfiguration)throw new Error("DebugConfigurationProvider has no method resolveDebugConfiguration");const o=await this.xb(i);return n.resolveDebugConfiguration(o,r,s)})}$resolveDebugConfigurationWithSubstitutedVariables(t,i,r,s){return hi(async()=>{const n=this.qb(t);if(!n)throw new Error("no DebugConfigurationProvider found");if(!n.resolveDebugConfigurationWithSubstitutedVariables)throw new Error("DebugConfigurationProvider has no method resolveDebugConfigurationWithSubstitutedVariables");const o=await this.xb(i);return n.resolveDebugConfigurationWithSubstitutedVariables(o,r,s)})}async $provideDebugAdapter(t,i){const r=this.pb(t);if(!r)return Promise.reject(new Error("no adapter descriptor factory found for handle"));const s=await this.wb(i);return this.tb(r,s).then(n=>{if(!n)throw new Error(`Couldn't find a debug adapter descriptor for debug type '${s.type}'`);return this.jb(n)})}async $acceptDebugSessionStarted(t){const i=await this.wb(t);this.y.fire(i.api)}async $acceptDebugSessionTerminated(t){const i=await this.wb(t);i&&(this.z.fire(i.api),this.w.delete(i.id))}async $acceptDebugSessionActiveChanged(t){this.D=t?await this.wb(t):void 0,this.C.fire(this.D?.api)}async $acceptDebugSessionNameChanged(t,i){(await this.wb(t))?._acceptNameChanged(i)}async $acceptDebugSessionCustomEvent(t,i){const s={session:(await this.wb(t)).api,event:i.event,body:i.body};this.F.fire(s)}jb(t){if(t instanceof Ya)return this.kb(t);if(t instanceof Xa)return this.lb(t);if(t instanceof iu)return this.mb(t);if(t instanceof ru)return this.nb(t);throw new Error("convertToDto unexpected type")}kb(t){return{type:"executable",command:t.command,args:t.args,options:t.options}}lb(t){return{type:"server",port:t.port,host:t.host}}mb(t){return{type:"pipeServer",path:t.path}}nb(t){return{type:"implementation"}}ob(t){const i=this.j.filter(r=>r.type===t);if(i.length>0)return i[0].factory}pb(t){const i=this.j.filter(r=>r.handle===t);if(i.length>0)return i[0].factory}qb(t){const i=this.g.filter(r=>r.handle===t);if(i.length>0)return i[0].provider}rb(t,i){if(t.contributes){const r=t.contributes.debuggers;if(r&&r.length>0){for(const s of r)if(s.label&&s.type&&s.type===i)return!0}}return!1}sb(t){const r=t.configuration.type,s=this.n.filter(n=>n.type===r||n.type==="*").map(n=>hi(()=>n.factory.createDebugAdapterTracker(t.api)).then(o=>o,o=>null));return Promise.race([Promise.all(s).then(n=>{const o=mt(n);if(o.length>0)return new S_(o)}),new Promise(n=>setTimeout(()=>n(void 0),1e3))]).catch(n=>{})}async tb(t,i){const r=i.configuration.debugServer;if(typeof r=="number")return Promise.resolve(new Xa(r));if(t){const n=await this.Z.getExtensionRegistry();return hi(()=>t.createDebugAdapterDescriptor(i.api,this.ub(i,n))).then(o=>{if(o)return o})}const s=await this.Z.getExtensionRegistry();return Promise.resolve(this.ub(i,s))}ub(t,i){}vb(t,i,r){(t.length>0||i.length>0||r.length>0)&&this.I.fire(Object.freeze({added:t,removed:i,changed:r}))}async wb(t){if(t)if(typeof t=="string"){const i=this.w.get(t);if(i)return i}else{let i=this.w.get(t.id);if(!i){const r=await this.xb(t.folderUri),s=t.parent?this.w.get(t.parent):void 0;i=new y_(this.u,t.id,t.type,t.name,r,t.configuration,s?.api),this.w.set(i.id,i),this.u.$sessionCached(i.id)}return i}throw new Error("cannot find session")}xb(t){if(t){const i=E.revive(t);return this.Y.resolveWorkspaceFolder(i)}return Promise.resolve(void 0)}yb(t,i){return`${t}\0${i}`}zb(t,i){if(i){if("title"in i&&"command"in i)return{type:0};if("treeId"in i)return{type:1,id:`${t}\0${i.treeId}`};throw new Error("Unsupported debug visualization type")}}Ab(t){const i=this.Bb(t);let r,s;return"id"in i?s=ti.asClassName(i):r=i,{iconPath:r,iconClass:s}}Bb(t){if(t instanceof di)return{id:t.id};const i=typeof t=="object"&&"dark"in t?t.dark:t,r=typeof t=="object"&&"light"in t?t.light:t;return{dark:typeof i=="string"?E.file(i):i,light:typeof r=="string"?E.file(r):r}}};$g=__decorate([__param(0,Ie),__param(1,Fr),__param(2,zs),__param(3,gr),__param(4,$c),__param(5,Cc),__param(6,rr),__param(7,oh)],$g);var y_=class{constructor(e,t,i,r,s,n,o){this.f=e,this.g=t,this.h=i,this.j=r,this.k=s,this.l=n,this.m=o}get api(){const e=this;return this.d??=Object.freeze({id:e.g,type:e.h,get name(){return e.j},set name(t){e.j=t,e.f.$setDebugSessionName(e.g,t)},parentSession:e.m,workspaceFolder:e.k,configuration:e.l,customRequest(t,i){return e.f.$customDebugAdapterRequest(e.g,t,i)},getDebugProtocolBreakpoint(t){return e.f.$getDebugProtocolBreakpoint(e.g,t.id)}})}get id(){return this.g}get type(){return this.h}_acceptNameChanged(e){this.j=e}get configuration(){return this.l}},E_=class{constructor(e){this.value=Object.freeze({append(t){e.$appendDebugConsole(t)},appendLine(t){this.append(t+`
`)}})}},S_=class{constructor(e){this.d=e}onWillStartSession(){this.d.forEach(e=>e.onWillStartSession?e.onWillStartSession():void 0)}onWillReceiveMessage(e){this.d.forEach(t=>t.onWillReceiveMessage?t.onWillReceiveMessage(e):void 0)}onDidSendMessage(e){this.d.forEach(t=>t.onDidSendMessage?t.onDidSendMessage(e):void 0)}onWillStopSession(){this.d.forEach(e=>e.onWillStopSession?e.onWillStopSession():void 0)}onError(e){this.d.forEach(t=>t.onError?t.onError(e):void 0)}onExit(e,t){this.d.forEach(i=>i.onExit?i.onExit(e,t):void 0)}},x_=class extends O8{constructor(e){super(),this.h=e,e.onDidSendMessage(t=>{this.acceptMessage(t)})}startSession(){return Promise.resolve(void 0)}sendMessage(e){this.h.handleMessage(e)}stopSession(){return this.h.dispose(),Promise.resolve(void 0)}},Ib=class extends $g{constructor(t,i,r,s,n,o,a,c){super(t,i,r,s,n,o,a,c)}};Ib=__decorate([__param(0,Ie),__param(1,Fr),__param(2,zs),__param(3,gr),__param(4,$c),__param(5,Cc),__param(6,rr),__param(7,oh)],Ib);function k_(e){return"uri"in e&&"ranges"in e&&"preview"in e}function $_(e){return e.folderOptions.map(t=>({folder:t.folder,excludes:t.excludes.map(i=>typeof i=="string"?i:i.pattern),includes:t.includes,useGlobalIgnoreFiles:t.useIgnoreFiles.global,useIgnoreFiles:t.useIgnoreFiles.local,useParentIgnoreFiles:t.useIgnoreFiles.parent,followSymlinks:t.followSymlinks,maxResults:e.maxResults,session:e.session}))}var V8=class{constructor(e){this.a=e}provideFileSearchResults(e,t,i){return(async()=>{const s=$_(t);return Promise.all(s.map(n=>this.a.provideFileSearchResults({pattern:e},n,i)))})().then(s=>mt(s).flat())}};function q8(e){return e.folderOptions.map(t=>({folder:t.folder,excludes:t.excludes.map(i=>typeof i=="string"?i:i.pattern),includes:t.includes,useGlobalIgnoreFiles:t.useIgnoreFiles.global,useIgnoreFiles:t.useIgnoreFiles.local,useParentIgnoreFiles:t.useIgnoreFiles.parent,followSymlinks:t.followSymlinks,maxResults:e.maxResults,previewOptions:G8(e.previewOptions),maxFileSize:e.maxFileSize,encoding:t.encoding,afterContext:e.surroundingContext,beforeContext:e.surroundingContext}))}function G8(e){return{matchLines:e?.matchLines??mw.matchLines,charsPerLine:e?.charsPerLine??mw.charsPerLine}}function J8(e){if(k_(e)){const t=Er(e.ranges).map((i,r)=>{const n=Er(e.preview.matches)[r];return{sourceRange:i,previewRange:n}});return new Hs(e.uri,t,e.preview.text)}else return new Zp(e.uri,e.text,e.lineNumber)}var C_=class{constructor(e){this.a=e}provideTextSearchResults(e,t,i,r){const s=a=>{Q8(a)&&i.report(J8(a))};return(async()=>mt(await Promise.all(q8(t).map(a=>this.a.provideTextSearchResults(e,a,{report:c=>s(c)},r)))).reduce((a,c)=>({limitHit:a.limitHit||c.limitHit}),{limitHit:!1}))().then(a=>({limitHit:a.limitHit,message:mt(Er(a.message))}))}},I_=class{constructor(e){this.a=e,this.name=this.a.name}provideAITextSearchResults(e,t,i,r){const s=a=>{Q8(a)&&i.report(J8(a))};return(async()=>mt(await Promise.all(q8(t).map(a=>this.a.provideAITextSearchResults(e,a,{report:c=>s(c)},r)))).reduce((a,c)=>({limitHit:a.limitHit||c.limitHit}),{limitHit:!1}))().then(a=>({limitHit:a.limitHit,message:mt(Er(a.message))}))}};function Q8(e){if(P_(e)){if(Array.isArray(e.ranges)){if(!Array.isArray(e.preview.matches))return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same type."),!1;if(e.preview.matches.length!==e.ranges.length)return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same length."),!1}else if(Array.isArray(e.preview.matches))return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same length."),!1}return!0}function P_(e){return!!e.preview}var Y8=class extends wn{constructor(e,t,i=()=>!1){const r=new t6(i,()=>!1);super(r);const s=new Gt;e.forEach((n,o)=>{const a=n.folder.with({query:"",fragment:""});s.has(a)?s.get(a).push({fq:n,i:o}):s.set(a,[{fq:n,i:o}])}),s.forEach((n,o)=>{const a=new Map;for(const c of n){const l=t(c.fq,c.i);a.set(this.l(c.fq.folder),l)}super.set(o,a)})}findQueryFragmentAwareSubstr(e){const t=super.findSubstr(e.with({query:"",fragment:""}));if(!t)return;const i=this.l(e);return t.get(i)}forEachFolderQueryInfo(e){return this.forEach(t=>t.forEach(i=>e(i)))}l(e){let t="";return e.query&&(t+=e.query),e.fragment&&(t+="#"+e.fragment),t}},D_=class{constructor(e,t,i){this.l=e,this.o=t,this.p=i,this.f=!1,this.g=0,this.h=!1,this.a=e.filePattern,this.b=e.includePattern&&Di(e.includePattern),this.c=e.maxResults||void 0,this.d=e.exists,this.j=new Set,this.k=e.excludePattern&&Di(e.excludePattern)}cancel(){this.h=!0,this.j.forEach(e=>e.cancel()),this.j=new Set}search(e){const t=this.l.folderQueries||[];return new Promise((i,r)=>{const s=n=>{this.g++,e(n)};if(this.h)return i({limitHit:this.f});this.l.extraFileResources&&this.l.extraFileResources.forEach(n=>{const o=n.toString(),a=ut(o);this.k&&this.k(o,a)||this.w(s,{base:n,basename:a})}),this.q(t,s).then(n=>{i({limitHit:this.f,stats:n||void 0})},n=>{r(new Error(Ei(n)))})})}async q(e,t){const i=new lt,r=e.map(l=>this.r(l)),s=this.o instanceof V8?this.p?.tokenSource.token:this.p?.obj,n={folderOptions:r,maxResults:this.l.maxResults??eg,session:s},o=l=>{const u=new Vx(this.l,l),h=!u.hasSiblingExcludeClauses();return{queryTester:u,noSiblingsClauses:h,folder:l.folder,tree:this.s()}},a=new Y8(e,o);let c;try{this.j.add(i),c=ri.create();const l=await this.o.provideFileSearchResults(this.l.filePattern||"",n,i.token),u=c.elapsed(),h=ri.create();return this.h&&!this.f||(l&&l.forEach(d=>{const f=a.findQueryFragmentAwareSubstr(d),g=Le.relative(f.folder.path,d.path);if(f.noSiblingsClauses){const v=ut(d.path);this.w(t,{base:f.folder,relativePath:g,basename:v});return}this.u(f.tree,f.folder,g,t)}),this.h&&!this.f)?null:(a.forEachFolderQueryInfo(d=>{this.v(d.tree,d.queryTester,t)}),{providerTime:u,postProcessTime:h.elapsed()})}finally{i.dispose(),this.j.delete(i)}}r(e){const t=wc(this.l.includePattern,e.includePattern);let i=e.excludePattern?.map(s=>({folder:s.folder,patterns:wc(this.l.excludePattern,s.pattern)}));i?.length||(i=[{folder:void 0,patterns:wc(this.l.excludePattern,void 0)}]);const r=Gx(i);return{folder:e.folder,excludes:r,includes:t,useIgnoreFiles:{local:!e.disregardIgnoreFiles,parent:!e.disregardParentIgnoreFiles,global:!e.disregardGlobalIgnoreFiles},followSymlinks:!e.ignoreSymlinks}}s(){const e={rootEntries:[],pathToEntries:Object.create(null)};return e.pathToEntries["."]=e.rootEntries,e}u({pathToEntries:e},t,i,r){if(i===this.a){const n=ut(this.a);this.w(r,{base:t,relativePath:this.a,basename:n})}function s(n){const o=ut(n),a=wi(n);let c=e[a];c||(c=e[a]=[],s(a)),c.push({base:t,relativePath:n,basename:o})}s(i)}v({rootEntries:e,pathToEntries:t},i,r){const s=this,n=this.a;function o(a){const c=Hu(()=>a.map(l=>l.basename));for(let l=0,u=a.length;l<u;l++){const h=a[l],{relativePath:d,basename:f}=h;if(i.matchesExcludesSync(d,f,n!==f?c:void 0))continue;const g=t[d];if(g)o(g);else{if(d===n)continue;s.w(r,h)}if(s.f)break}}o(e)}w(e,t){(!this.b||t.relativePath&&this.b(t.relativePath,t.basename))&&((this.d||this.c&&this.g>=this.c)&&(this.f=!0,this.cancel()),this.f||e(t))}},A_=class{constructor(){this.a=new Object,this.tokenSource=new lt}get obj(){if(this.a)return this.a;throw new Error("Session object has been dereferenced.")}cancel(){this.tokenSource.cancel(),this.a=void 0}},R_=class zI{constructor(){this.b=new Map}static{this.a=512}fileSearch(t,i,r,s){const n=this.c(t.cacheKey),o=new D_(t,i,n);let a=0;const c=l=>{a+=l.length,r(l.map(u=>this.d(u)))};return this.f(o,zI.a,c,s).then(l=>({limitHit:l.limitHit,stats:l.stats?{fromCache:!1,type:"fileSearchProvider",resultCount:a,detailStats:l.stats}:void 0,messages:[]}))}clearCache(t){this.b.get(t)?.cancel(),this.b.delete(t)}c(t){if(t)return this.b.has(t)||this.b.set(t,new A_),this.b.get(t)}d(t){return t.relativePath?{resource:Rt(t.base,t.relativePath)}:{resource:t.base}}f(t,i,r,s){const n=s.onCancellationRequested(()=>{t.cancel()}),o=c=>{c&&(a.push(c),i>0&&a.length>=i&&(r(a),a=[]))};let a=[];return t.search(o).then(c=>(a.length&&r(a),n.dispose(),c),c=>(a.length&&r(a),n.dispose(),Promise.reject(c)))}},Pb=class{constructor(e,t,i){this.f=e,this.g=t,this.h=i,this.b=null,this.c=!1,this.d=0}get j(){return this.f.query}search(e,t){const i=this.j.folderQueries||[],r=new lt(t);return new Promise((s,n)=>{this.b=new L_(e);let o=!1;const a=(c,l)=>{if(!o&&!this.c){const u=this.l(c);c instanceof Hs&&typeof this.j.maxResults=="number"&&this.d+u>this.j.maxResults&&(this.c=!0,o=!0,r.cancel(),c=this.m(c,this.j.maxResults-this.d));const h=this.l(c);this.d+=h;const d=c instanceof Hs;(h>0||!d)&&this.b.add(c,l)}};this.n(i,a,r.token).then(c=>{r.dispose(),this.b.flush(),s({limitHit:this.c||c?.limitHit,messages:this.k(c),stats:{type:this.h}})},c=>{r.dispose();const l=Ei(c);n(new Error(l))})})}k(e){return e?.message?Array.isArray(e.message)?e.message:[e.message]:[]}l(e){return e instanceof Hs?Array.isArray(e.ranges)?e.ranges.length:1:0}m(e,t){return new Hs(e.uri,e.ranges.slice(0,t),e.previewText)}async n(e,t,i){const r=new Y8(e,(l,u)=>({queryTester:new Vx(this.j,l),folder:l.folder,folderIdx:u}),()=>!0),s=[],n={report:l=>{if(l.uri===void 0)throw Error("Text search result URI is undefined. Please check provider implementation.");const u=r.findQueryFragmentAwareSubstr(l.uri),h=u.folder.scheme===z.file?rM(()=>this.g.readdir(od(l.uri))):void 0,d=rE(u.folder,l.uri);if(d){const f=u.queryTester.includedInQuery(d,ut(d),h);fn(f)?s.push(f.then(g=>{g&&t(l,u.folderIdx)})):f&&t(l,u.folderIdx)}}},a={folderOptions:e.map(l=>this.o(l)),maxFileSize:this.j.maxFileSize,maxResults:this.j.maxResults??eg,previewOptions:this.j.previewOptions??mw,surroundingContext:this.j.surroundingContext??0};"usePCRE2"in this.j&&(a.usePCRE2=this.j.usePCRE2);let c;return this.f.query.type===3?c=await this.f.provider.provideAITextSearchResults(this.f.query.contentPattern,a,n,i):c=await this.f.provider.provideTextSearchResults(T_(this.f.query.contentPattern),a,n,i),s.length&&await Promise.all(s),c}o(e){const t=wc(this.j.includePattern,e.includePattern);let i=e.excludePattern?.map(n=>({folder:n.folder,patterns:wc(this.j.excludePattern,n.pattern)}));(!i||i.length===0)&&(i=[{folder:void 0,patterns:wc(this.j.excludePattern,void 0)}]);const r=Gx(i);return{folder:E.from(e.folder),excludes:r,includes:t,useIgnoreFiles:{local:!e.disregardIgnoreFiles,parent:!e.disregardParentIgnoreFiles,global:!e.disregardGlobalIgnoreFiles},followSymlinks:!e.ignoreSymlinks,encoding:(e.fileEncoding&&this.g.toCanonicalName(e.fileEncoding))??""}}};function T_(e){return{isCaseSensitive:e.isCaseSensitive||!1,isRegExp:e.isRegExp||!1,isWordMatch:e.isWordMatch||!1,isMultiline:e.isMultiline||!1,pattern:e.pattern}}var L_=class{constructor(e){this.g=e,this.c=-1,this.f=null,this.b=new O_(512,t=>this.j(t))}add(e,t){this.f&&(this.c!==t||!iE(this.d,e.uri))&&(this.h(),this.f=null),this.f||(this.c=t,this.f={resource:e.uri,results:[]}),this.f.results.push(N_(e))}h(){const e=this.f&&this.f.results?this.f.results.length:0;this.b.addItem(this.f,e)}flush(){this.h(),this.b.flush()}j(e){this.g(e)}};function N_(e){return e instanceof Hs?{previewText:e.previewText,rangeLocations:e.ranges.map(t=>({preview:{startLineNumber:t.previewRange.start.line,startColumn:t.previewRange.start.character,endLineNumber:t.previewRange.end.line,endColumn:t.previewRange.end.character},source:{startLineNumber:t.sourceRange.start.line,startColumn:t.sourceRange.start.character,endLineNumber:t.sourceRange.end.line,endColumn:t.sourceRange.end.character}}))}:{text:e.text,lineNumber:e.lineNumber}}var O_=class P4{static{this.b=4e3}static{this.c=50}constructor(t,i){this.j=t,this.k=i,this.d=0,this.f=[],this.g=0}addItem(t,i){t&&this.l(t,i)}addItems(t,i){t&&this.m(t,i)}l(t,i){this.f.push(t),this.g+=i,this.n()}m(t,i){this.f=this.f.concat(t),this.g+=i,this.n()}n(){this.d<P4.c?this.flush():this.g>=this.j?this.flush():this.h||(this.h=setTimeout(()=>{this.flush()},P4.b))}flush(){this.g&&(this.d+=this.g,this.k(this.f),this.f=[],this.g=0,this.h&&(clearTimeout(this.h),this.h=0))}},F_=class{constructor(e){this.a=e}get b(){return this.a.query}search(e,t){const i=new lt(t);return new Promise((r,s)=>{r({})})}},Db=V("IExtHostSearch"),Cg=class{constructor(t,i,r){this.s=t,this.t=i,this.v=r,this.c=this.s.getProxy(q.MainThreadSearch),this.e=0,this.g=new Map,this.h=new Set,this.i=new Map,this.j=new Set,this.k=new Map,this.l=new Set,this.n=new Map,this.o=new Set,this.q=new R_}w(t){return this.t.transformOutgoingScheme(t)}registerTextSearchProviderOld(t,i){if(this.h.has(t))throw new Error(`a text search provider for the scheme '${t}' is already registered`);this.h.add(t);const r=this.e++;return this.g.set(r,new C_(i)),this.c.$registerTextSearchProvider(r,this.w(t)),ee(()=>{this.h.delete(t),this.g.delete(r),this.c.$unregisterProvider(r)})}registerTextSearchProvider(t,i){if(this.h.has(t))throw new Error(`a text search provider for the scheme '${t}' is already registered`);this.h.add(t);const r=this.e++;return this.g.set(r,i),this.c.$registerTextSearchProvider(r,this.w(t)),ee(()=>{this.h.delete(t),this.g.delete(r),this.c.$unregisterProvider(r)})}registerAITextSearchProviderOld(t,i){if(this.j.has(t))throw new Error(`an AI text search provider for the scheme '${t}'is already registered`);this.j.add(t);const r=this.e++;return this.i.set(r,new I_(i)),this.c.$registerAITextSearchProvider(r,this.w(t)),ee(()=>{this.j.delete(t),this.i.delete(r),this.c.$unregisterProvider(r)})}registerAITextSearchProvider(t,i){if(this.j.has(t))throw new Error(`an AI text search provider for the scheme '${t}'is already registered`);this.j.add(t);const r=this.e++;return this.i.set(r,i),this.c.$registerAITextSearchProvider(r,this.w(t)),ee(()=>{this.j.delete(t),this.i.delete(r),this.c.$unregisterProvider(r)})}registerFileSearchProviderOld(t,i){if(this.l.has(t))throw new Error(`a file search provider for the scheme '${t}' is already registered`);this.l.add(t);const r=this.e++;return this.k.set(r,new V8(i)),this.c.$registerFileSearchProvider(r,this.w(t)),ee(()=>{this.l.delete(t),this.k.delete(r),this.c.$unregisterProvider(r)})}registerFileSearchProvider(t,i){if(this.l.has(t))throw new Error(`a file search provider for the scheme '${t}' is already registered`);this.l.add(t);const r=this.e++;return this.k.set(r,i),this.c.$registerFileSearchProvider(r,this.w(t)),ee(()=>{this.l.delete(t),this.k.delete(r),this.c.$unregisterProvider(r)})}registerFolderSearchProvider(t,i){if(this.o.has(t))throw new Error(`a file search provider for the scheme '${t}' is already registered`);this.o.add(t);const r=this.e++;return this.n.set(r,i),this.c.$registerFolderSearchProvider(r,this.w(t)),ee(()=>{this.o.delete(t),this.n.delete(r),this.c.$unregisterProvider(r)})}$provideFileSearchResults(t,i,r,s){const n=Ic(r),o=this.k.get(t);if(o)return this.q.fileSearch(n,o,a=>{this.c.$handleFileMatch(t,i,a.map(c=>c.resource))},s);throw new Error("unknown provider: "+t)}$provideFolderSearchResults(t,i,r,s){const n=Ic(r),o=this.n.get(t);if(o)return this.x(n,o).search(c=>this.c.$handleIcubeFolderMatch(t,i,[]),s);throw new Error("unknown provider: "+t)}x(t,i){return new F_({query:t,provider:i})}async doInternalFileSearchWithCustomCallback(t,i,r){return{messages:[]}}$clearCache(t){return this.q.clearCache(t),Promise.resolve(void 0)}$provideTextSearchResults(t,i,r,s){const n=this.g.get(t);if(!n||!n.provideTextSearchResults)throw new Error(`Unknown Text Search Provider ${t}`);const o=Ic(r);return this.y(o,n).search(c=>this.c.$handleTextMatch(t,i,c),s)}$provideAITextSearchResults(t,i,r,s){const n=this.i.get(t);if(!n||!n.provideAITextSearchResults)throw new Error(`Unknown AI Text Search Provider ${t}`);const o=Ic(r);return this.z(o,n).search(c=>this.c.$handleTextMatch(t,i,c),s)}$enableExtensionHostSearch(){}async $getAIName(t){const i=this.i.get(t);if(!(!i||!i.provideAITextSearchResults))return i.name??"AI"}y(t,i){return new Pb({query:t,provider:i},{readdir:r=>Promise.resolve([]),toCanonicalName:r=>r},"textSearchProvider")}z(t,i){return new Pb({query:t,provider:i},{readdir:r=>Promise.resolve([]),toCanonicalName:r=>r},"aiTextSearchProvider")}};Cg=__decorate([__param(0,Ie),__param(1,bl),__param(2,Ce)],Cg);function Ic(e){return{...e,folderQueries:e.folderQueries&&e.folderQueries.map(M_),extraFileResources:e.extraFileResources&&e.extraFileResources.map(t=>E.revive(t))}}function M_(e){return oi(e)}var Ab,Rb=class{static{Ab=this}static{this.a={focused:!0,active:!0}}getState(){const t=this.d;return{get focused(){return t.focused},get active(){return t.active}}}constructor(t){this.c=new I,this.onDidChangeWindowState=this.c.event,this.d=Ab.a,this.b=t.getProxy(q.MainThreadWindow),this.b.$getInitialState().then(({isFocused:i,isActive:r})=>{this.onDidChangeWindowProperty("focused",i),this.onDidChangeWindowProperty("active",r)})}$onDidChangeWindowFocus(t){this.onDidChangeWindowProperty("focused",t)}$onDidChangeWindowActive(t){this.onDidChangeWindowProperty("active",t)}onDidChangeWindowProperty(t,i){i!==this.d[t]&&(this.d={...this.d,[t]:i},this.c.fire(this.d))}openUri(t,i){let r;if(typeof t=="string"){r=t;try{t=E.parse(t)}catch{return Promise.reject(`Invalid uri - '${t}'`)}}return Kh(t.scheme)?Promise.reject("Invalid scheme - cannot be empty"):t.scheme===z.command?Promise.reject(`Invalid scheme '${t.scheme}'`):this.b.$openUri(t,r,i)}async asExternalUri(t,i){if(Kh(t.scheme))return Promise.reject("Invalid scheme - cannot be empty");const r=await this.b.$asExternalUri(t,i);return E.from(r)}};Rb=Ab=__decorate([__param(0,Ie)],Rb);var X8=V("IExtHostWindow"),Ig=class extends iL{constructor(t,i){super(i.logLevel,i.logsLocation,i.loggers.map(r=>oi(r))),this.r=t.getProxy(q.MainThreadLogger)}$setLogLevel(t,i){i?this.setLogLevel(E.revive(i),t):this.setLogLevel(t)}setVisibility(t,i){super.setVisibility(t,i),this.r.$setVisibility(t,i)}s(t,i,r){return new U_(this.r,t,i,r)}};Ig=__decorate([__param(0,Ie),__param(1,Qt)],Ig);var U_=class extends L1{constructor(e,t,i,r){super(r?.logLevel==="always"),this.r=e,this.s=t,this.m=!1,this.n=[],this.setLevel(i),this.r.$createLogger(t,r).then(()=>{this.u(this.n),this.m=!0})}g(e,t){const i=[[e,t]];this.m?this.u(i):this.n.push(...i)}u(e){this.r.$log(this.s,e)}flush(){this.r.$flush(this.s)}},Tb=V("IExtHostTerminalShellIntegration"),Lb=class extends X{constructor(t,i){super(),this.h=i,this.b=new Map,this.c=new I,this.onDidChangeTerminalShellIntegration=this.c.event,this.f=new I,this.onDidStartTerminalShellExecution=this.f.event,this.g=new I,this.onDidEndTerminalShellExecution=this.g.event,this.a=t.getProxy(q.MainThreadTerminalShellIntegration),this.B(ee(()=>{for(const[r,s]of this.b)s.dispose();this.b.clear()}))}$shellIntegrationChange(t){const i=this.h.getTerminalById(t);if(!i)return;const r=i.value;let s=this.b.get(t);s||(s=new __(i.value,this.f),this.b.set(t,s),s.store.add(i.onWillDispose(()=>this.b.get(t)?.dispose())),s.store.add(s.onDidRequestShellExecution(n=>this.a.$executeCommand(t,n))),s.store.add(s.onDidRequestEndExecution(n=>this.g.fire(n))),s.store.add(s.onDidRequestChangeShellIntegration(n=>this.c.fire(n))),i.shellIntegration=s.value),this.c.fire({terminal:r,shellIntegration:s.value})}$shellExecutionStart(t,i,r,s,n){this.b.has(t)||this.$shellIntegrationChange(t);const o={value:i,confidence:r,isTrusted:s};this.b.get(t)?.startShellExecution(o,E.revive(n))}$shellExecutionEnd(t,i,r,s,n){const o={value:i,confidence:r,isTrusted:s};this.b.get(t)?.endShellExecution(o,n)}$shellExecutionData(t,i){this.b.get(t)?.emitData(i)}$cwdChange(t,i){this.b.get(t)?.setCwd(E.revive(i))}$closeTerminal(t){this.b.get(t)?.dispose(),this.b.delete(t)}};Lb=__decorate([__param(0,Ie),__param(1,Ws)],Lb);var __=class extends X{get currentExecution(){return this.a}constructor(e,t){super(),this.j=e,this.m=t,this.b=!1,this.store=this.B(new ue),this.f=this.B(new I),this.onDidRequestChangeShellIntegration=this.f.event,this.g=this.B(new I),this.onDidRequestShellExecution=this.g.event,this.h=this.B(new I),this.onDidRequestEndExecution=this.h.event;const i=this;this.value={get cwd(){return i.c},executeCommand(r,s){let n=r;s&&s.length>0&&(n+=` "${s.map(c=>`${c.replaceAll('"','\\"')}`).join('" "')}"`),i.g.fire(n);const o={value:n,confidence:Of.High,isTrusted:!0},a=i.startShellExecution(o,i.c,!0).value;return i.b=!0,a}}}startShellExecution(e,t,i){if(this.b&&this.a)this.b=!1;else{this.a&&(this.a.endExecution(void 0),this.h.fire({terminal:this.j,shellIntegration:this.value,execution:this.a.value,exitCode:void 0}));const r=this.a=new j_(e,t??this.c);i?queueMicrotask(()=>this.m.fire({terminal:this.j,shellIntegration:this.value,execution:r.value})):this.m.fire({terminal:this.j,shellIntegration:this.value,execution:this.a.value})}return this.a}emitData(e){this.currentExecution?.emitData(e)}endShellExecution(e,t){this.a&&(this.a.endExecution(e),this.h.fire({terminal:this.j,shellIntegration:this.value,execution:this.a.value,exitCode:t}),this.a=void 0)}setCwd(e){let t=!1;E.isUri(this.c)?t=!E.isUri(e)||this.c.toString()!==e.toString():this.c!==e&&(t=!0),t&&(this.c=e,this.f.fire({terminal:this.j,shellIntegration:this.value}))}},j_=class{constructor(e,t){this.c=e,this.cwd=t,this.b=!1;const i=this;this.value={get commandLine(){return i.c},get cwd(){return i.cwd},read(){return i.d()}}}d(){if(!this.a){if(this.b)return cl.EMPTY;this.a=new H_}return this.a.createIterable()}emitData(e){this.a?.emitData(e)}endExecution(e){e&&(this.c=e),this.a?.endExecution(),this.a=void 0,this.b=!0}},H_=class extends X{constructor(){super(...arguments),this.b=[]}createIterable(){this.a||(this.a=new ur);const e=this.a;return new cl(async i=>{this.b.push(i),await e.wait()})}emitData(e){for(const t of this.b)t.emitOne(e)}endExecution(){this.a?.open(),this.a=void 0}},Nb=V("IExtHostICubeClientBridge"),Ob=class extends X{constructor(t){super()}$postMessage(){}$handleMessage(){}$dispose(){}};Ob=__decorate([__param(0,Ie)],Ob);var B_=V("IExtHostModularManager"),Pg=class extends X{constructor(t){super(),this.a=t.getProxy(q.MainThreadICubeModularManager)}async b(t){return console.log("browser/ExtHostICubeModularManagerService makeRPCClient",t),{close:(...i)=>this.a.$close(t,...i),call:(...i)=>this.a.$call(t,...i),ping:(...i)=>this.a.$ping(t,...i),serverInfo:(...i)=>this.a.$serverInfo(t,...i),callJSONRpc:(...i)=>this.a.$callJSONRpc(t,...i),callVolo:(...i)=>this.a.$callVolo(t,...i),callStream:(...i)=>this.a.$callStream(t,...i),callWebSocket:(...i)=>this.a.$callWebSocket(t,...i)}}async makeRPCClient(t,i){return this.a.$makeRPCClient(t,i).then(r=>this.b(r))}};Pg=__decorate([__param(0,Ie)],Pg),Ae(Xw,Yw,1),Ae(xa,Ig,1),Ae(eh,ub,1),Ae(rr,Fw,0),Ae(jw,Hw,0),Ae(Bw,Ww,0),Ae(gr,xw,0),Ae(qu,Dw,0),Ae(oh,kb,0),Ae(Cb,Ib,0),Ae(m8,ab,0),Ae(Vo,lb,0),Ae(Zw,Kw,0),Ae($a,EL,0),Ae(g8,ob,1),Ae(Db,Cg,0),Ae(Pw,bk,0),Ae(Sb,Eb,0),Ae(Ws,_w,0),Ae(Tb,Lb,0),Ae(ag,cg,0),Ae(X8,Rb,0),Ae(Fr,bw,0),Ae(Qw,a8,0),Ae(lg,Ow,0),Ae($c,xb,0),Ae(Cc,kg,0),Ae(Nb,Ob,0),Ae(B_,Pg,0);var Fb=class extends ug{constructor(t,i){super(!0,t,i)}createTerminal(t,i,r){return this.createTerminalFromOptions({name:t,shellPath:i,shellArgs:r})}createTerminalFromOptions(t,i){const r=new Mw(this.a,Ht(),t,t.name);return this.f.push(r),r.create(t,this.R(t,i)),r.value}};Fb=__decorate([__param(0,rr),__param(1,Ie)],Fb);import{promises as Z8}from"fs";var K8;(function(e){e[e.stdout=0]="stdout",e[e.stderr=1]="stderr"})(K8||(K8={}));var e$;(function(e){e[e.Success=0]="Success",e[e.Unknown=1]="Unknown",e[e.AccessDenied=2]="AccessDenied",e[e.ProcessNotFound=3]="ProcessNotFound"})(e$||(e$={}));function W_(e,...t){const i=t.reduce((n,o)=>(n[o]=!0,n),{}),r=[/^ELECTRON_.+$/,/^VSCODE_(?!(PORTABLE|SHELL_LOGIN|ENV_REPLACE|ENV_APPEND|ENV_PREPEND)).+$/,/^SNAP(|_.*)$/,/^GDK_PIXBUF_.+$/];Object.keys(e).filter(n=>!i[n]).forEach(n=>{for(let o=0;o<r.length;o++)if(n.search(r[o])!==-1){delete e[n];break}})}function z_(e){e&&(delete e.DEBUG,At&&delete e.LD_PRELOAD)}function V_(e=si){return e.comspec||"cmd.exe"}function q_(e){let t=[],i=!1;const r=function(s){if(i){t.push(s);return}(!e.send(s,o=>{if(o&&console.error(o),i=!1,t.length>0){const a=t.slice(0);t=[],a.forEach(c=>r(c))}})||it)&&(i=!0)};return{send:r}}var ch;(function(e){async function t(i,r,s){if(lr(i))return i;if(r===void 0&&(r=ro()),wi(i)!=="."||(s===void 0&&De(si.PATH)&&(s=si.PATH.split(S5)),s===void 0||s.length===0))return rt(r,i);async function o(a){if(await ht.exists(a)){let c;try{c=await Z8.stat(a)}catch(l){l.message.startsWith("EACCES")&&(c=await Z8.lstat(a))}return c?!c.isDirectory():!1}return!1}for(const a of s){let c;if(lr(a)?c=rt(a,i):c=rt(r,a,i),await o(c))return c;let l=c+".com";if(await o(l)||(l=c+".exe",await o(l)))return l}return rt(r,i)}e.findExecutable=t})(ch||(ch={}));import{homedir as G_}from"os";var Mb=class extends xg{constructor(t,i,r,s,n,o,a,c,l){super(t,i,r,s,n,o,a,c),this.C=r,this.D=l,i.remote.isRemote&&i.remote.authority?this.registerTaskSystem(z.vscodeRemote,{scheme:z.vscodeRemote,authority:i.remote.authority,platform:process.platform}):this.registerTaskSystem(z.file,{scheme:z.file,authority:"",platform:process.platform}),this.a.$registerSupportedExecutions(!0,!0,!0)}async executeTask(t,i){const r=i;if(!i.execution&&r._id===void 0)throw new Error("Tasks to execute must include an execution");if(r._id!==void 0){const s=vb.from(r,this.C),n=await this.a.$getTaskExecution(s);if(n.task===void 0)throw new Error("Task from execution DTO is undefined");const o=await this.z(n,i);return this.a.$executeTask(s).catch(()=>{}),o}else{const s=ls.from(i,t);if(s===void 0)return Promise.reject(new Error("Task is not valid"));Mr.is(s.execution)&&await this.y(s,i,!1);const n=await this.z(await this.a.$getTaskExecution(s),i);return this.a.$executeTask(s).catch(()=>{}),n}}v(t,i,r,s){const n=[];if(s)for(const o of s){this.A(o,r),(!o.definition||!t[o.definition.type])&&this.f.warn(`The task [${o.source}, ${o.name}] uses an undefined task type. The task will be ignored in the future.`);const a=ls.from(o,r.extension);a&&(n.push(a),Mr.is(a.execution)&&i.push(this.y(a,o,!0)))}return{tasks:n,extension:r.extension}}async w(t){return t}async G(t){let i=t&&t.length>0?t[0]:void 0;if(!i){const r=E.file(G_());i=new F1({uri:r,name:Jr(r),index:0})}return{uri:i.uri,name:i.name,index:i.index,toResource:()=>{throw new Error("Not implemented")}}}async $resolveVariables(t,i){const r=E.revive(t),s={process:void 0,variables:Object.create(null)},n=await this.b.resolveWorkspaceFolder(r),o=await this.b.getWorkspaceFolders2()??[],a=await this.D.getResolver(),c=n?{uri:n.uri,name:n.name,index:n.index,toResource:()=>{throw new Error("Not implemented")}}:await this.G(o);for(const l of i.variables)s.variables[l]=await a.resolveAsync(c,l);if(i.process!==void 0){let l;if(i.process.path!==void 0){l=i.process.path.split(S5);for(let u=0;u<l.length;u++)l[u]=await a.resolveAsync(c,l[u])}s.process=await ch.findExecutable(await a.resolveAsync(c,i.process.name),i.process.cwd!==void 0?await a.resolveAsync(c,i.process.cwd):void 0,l)}return s}async $jsonTasksSupported(){return!0}async $findExecutable(t,i,r){return ch.findExecutable(t,i,r)}};Mb=__decorate([__param(0,Ie),__param(1,Qt),__param(2,Fr),__param(3,Vo),__param(4,gr),__param(5,Ws),__param(6,Ce),__param(7,eh),__param(8,Cc)],Mb);import*as Pc from"child_process";var YY=V("externalTerminal"),Dg="Terminal.app",t$=p(1893,null),Ub=class{async getDefaultTerminalForPlatforms(){return{windows:_b.getDefaultTerminalWindows(),linux:await i$.getDefaultTerminalLinuxReady(),osx:"xterm"}}},_b=class en extends Ub{static{this.b="cmd.exe"}openTerminal(t,i){return this.spawnTerminal(Pc,t,V_(),i)}spawnTerminal(t,i,r,s){const n=i.windowsExec||en.getDefaultTerminalWindows();s&&s[1]===":"&&(s=s[0].toUpperCase()+s.substr(1));const o=ut(n,".exe").toLowerCase();if(o==="cmder")return t.spawn(n,s?[s]:void 0),Promise.resolve(void 0);const a=["/c","start","/wait"];return n.indexOf(" ")>=0&&a.push(n),a.push(n),o==="wt"&&a.push("-d ."),new Promise((c,l)=>{const u=Dc(process),h=t.spawn(r,a,{cwd:s,env:u,detached:!0});h.on("error",l),h.on("exit",()=>c())})}async runInTerminal(t,i,r,s,n){const o="windowsExec"in n&&n.windowsExec?n.windowsExec:en.getDefaultTerminalWindows(),a=await en.f();return new Promise((c,l)=>{const u=`"${i} - ${t$}"`,h=`"${r.join('" "')}" & pause`,d=Object.assign({},Dc(process),s);Object.keys(d).filter(S=>d[S]===null).forEach(S=>delete d[S]);const f={cwd:i,env:d,windowsVerbatimArguments:!0};let g,v;ut(o,".exe")==="wt"?(g=o,v=["-d",".",en.b,"/c",h]):a?(g=a,v=["-d",".",o,"/c",h]):(g=en.b,v=["/c","start",u,"/wait",o,"/c",`"${h}"`]),Pc.spawn(g,v,f).on("error",S=>{l(jb(S))}),c(void 0)})}static getDefaultTerminalWindows(){if(!en.d){const t=!!process.env.hasOwnProperty("PROCESSOR_ARCHITEW6432");en.d=`${process.env.windir?process.env.windir:"C:\\Windows"}\\${t?"Sysnative":"System32"}\\cmd.exe`}return en.d}static async f(){try{const t=await ch.findExecutable("wt");return await ht.exists(t)?t:void 0}catch{return}}};__decorate([PE],_b,"f",null);var J_=class VI extends Ub{static{this.b="/usr/bin/osascript"}openTerminal(t,i){return this.spawnTerminal(Pc,t,i)}runInTerminal(t,i,r,s,n){const o=n.osxExec||Dg;return new Promise((a,c)=>{if(o===Dg||o==="iTerm.app"){const l=o===Dg?"TerminalHelper":"iTermHelper",h=[eE.asFileUri(`vs/workbench/contrib/externalTerminal/node/${l}.scpt`).fsPath,"-t",t||t$,"-w",i];for(const g of r)h.push("-a"),h.push(g);if(s){const g=Object.assign({},Dc(process),s);for(const v in g){const y=g[v];y===null?(h.push("-u"),h.push(v)):(h.push("-e"),h.push(`${v}=${y}`))}}let d="";const f=Pc.spawn(VI.b,h);f.on("error",g=>{c(jb(g))}),f.stderr.on("data",g=>{d+=g.toString()}),f.on("exit",g=>{if(g===0)a(void 0);else if(d){const v=d.split(`
`,1);c(new Error(v[0]))}else c(new Error(p(1894,null,l,g)))})}else c(new Error(p(1895,null,o)))})}spawnTerminal(t,i,r){const s=i.osxExec||Dg;return new Promise((n,o)=>{const a=["-a",s];r&&a.push(r);const c=Dc(process),l=t.spawn("/usr/bin/open",a,{cwd:r,env:c});l.on("error",o),l.on("exit",()=>n())})}},i$=class Qn extends Ub{static{this.b=p(1896,null)}openTerminal(t,i){return this.spawnTerminal(Pc,t,i)}runInTerminal(t,i,r,s,n){const o=n.linuxExec?Promise.resolve(n.linuxExec):Qn.getDefaultTerminalLinuxReady();return new Promise((a,c)=>{const l=[];o.then(u=>{u.indexOf("gnome-terminal")>=0?l.push("-x"):l.push("-e"),l.push("bash"),l.push("-c");const h=`${Q_(r)}; echo; read -p "${Qn.b}" -n1;`;l.push(`''${h}''`);const d=Object.assign({},Dc(process),s);Object.keys(d).filter(y=>d[y]===null).forEach(y=>delete d[y]);const f={cwd:i,env:d};let g="";const v=Pc.spawn(u,l,f);v.on("error",y=>{c(jb(y))}),v.stderr.on("data",y=>{g+=y.toString()}),v.on("exit",y=>{if(y===0)a(void 0);else if(g){const S=g.split(`
`,1);c(new Error(S[0]))}else c(new Error(p(1897,null,u,y)))})})})}static async getDefaultTerminalLinuxReady(){if(!Qn.d)if(!At)Qn.d=Promise.resolve("xterm");else{const t=await ht.exists("/etc/debian_version");Qn.d=new Promise(i=>{t?i("x-terminal-emulator"):process.env.DESKTOP_SESSION==="gnome"||process.env.DESKTOP_SESSION==="gnome-classic"?i("gnome-terminal"):process.env.DESKTOP_SESSION==="kde-plasma"?i("konsole"):process.env.COLORTERM?i(process.env.COLORTERM):process.env.TERM?i(process.env.TERM):i("xterm")})}return Qn.d}spawnTerminal(t,i,r){const s=i.linuxExec?Promise.resolve(i.linuxExec):Qn.getDefaultTerminalLinuxReady();return new Promise((n,o)=>{s.then(a=>{const c=Dc(process),l=t.spawn(a,[],{cwd:r,env:c});l.on("error",o),l.on("exit",()=>n())})})}};function Dc(e){const t={...e.env};return W_(t),t}function jb(e){return"errno"in e&&e.errno==="ENOENT"&&"path"in e&&typeof e.path=="string"?new Error(p(1898,null,e.path)):e}function Q_(e){let t="";for(const i of e)i.indexOf(" ")>=0?t+='"'+i+'"':t+=i,t+=" ";return t}var Y_=class qI{constructor(){this.b=new Map}static{this.a=1}async createNewMessage(t){try{const i=await this.c();if(i){const r=String(qI.a++);return this.b.set(r,i),{id:r,data:i.createNewMessage(t)}}}catch{}return{id:"",data:t}}async validate(t,i){if(!t.id)return!0;const r=this.b.get(t.id);if(!r)return!1;this.b.delete(t.id);try{return r.validate(i)==="ok"}catch{return!1}finally{r.dispose?.()}}async sign(t){try{return await this.d(t)}catch{}return t}},r$=class extends Y_{c(){return this.h().then(e=>new e.validator)}d(e){return this.h().then(t=>new t.signer().sign(e))}async h(){const e="vsda",{default:t}=await import(e);return t}};import*as Hb from"child_process";import*as s$ from"net";var n$=class Wc extends O8{static{this.b=`\r
\r
`}static{this.i=/\r?\n/}static{this.l=/: */}constructor(){super(),this.r=Buffer.allocUnsafe(0),this.t=-1}v(t,i){this.p=i,this.r=Buffer.allocUnsafe(0),this.t=-1,t.on("data",r=>this.x(r))}sendMessage(t){if(this.p){const i=JSON.stringify(t);this.p.write(`Content-Length: ${Buffer.byteLength(i,"utf8")}${Wc.b}${i}`,"utf8")}}x(t){for(this.r=Buffer.concat([this.r,t]);;){if(this.t>=0){if(this.r.length>=this.t){const i=this.r.toString("utf8",0,this.t);if(this.r=this.r.slice(this.t),this.t=-1,i.length>0)try{this.acceptMessage(JSON.parse(i))}catch(r){this.n.fire(new Error((r.message||r)+`
`+i))}continue}}else{const i=this.r.indexOf(Wc.b);if(i!==-1){const s=this.r.toString("utf8",0,i).split(Wc.i);for(const n of s){const o=n.split(Wc.l);o[0]==="Content-Length"&&(this.t=Number(o[1]))}this.r=this.r.slice(i+Wc.b.length);continue}}break}}},o$=class extends n${startSession(){return new Promise((e,t)=>{let i=!1;this.y=this.z(()=>{this.v(this.y,this.y),e(),i=!0}),this.y.on("close",()=>{i?this.n.fire(new Error("connection closed")):t(new Error("connection closed"))}),this.y.on("error",r=>{i?this.n.fire(r):t(r)})})}async stopSession(){await this.w(),this.y&&(this.y.end(),this.y=void 0)}},X_=class extends o${constructor(e){super(),this.A=e}z(e){return s$.createConnection(this.A.port,this.A.host||"127.0.0.1",e)}},Z_=class extends o${constructor(e){super(),this.A=e}z(e){return s$.createConnection(this.A.path,e)}},a$=class ra extends n${constructor(t,i){super(),this.z=t,this.A=i}async startSession(){const t=this.z.command,i=this.z.args,r=this.z.options||{};try{if(t)if(lr(t)){if(!await ht.exists(t))throw new Error(p(6395,null,t))}else t.indexOf("/")<0&&t.indexOf("\\")<0;else throw new Error(p(6396,null,this.A));let s=process.env;if(r.env&&Object.keys(r.env).length>0&&(s=xs(ot(process.env),r.env)),t==="node")if(Array.isArray(i)&&i.length>0){const n=!!process.env.ELECTRON_RUN_AS_NODE||!!process.versions.electron,o={env:s,execArgv:n?["-e","delete process.env.ELECTRON_RUN_AS_NODE;require(process.argv[1])"]:[],silent:!0};r.cwd&&(o.cwd=r.cwd);const a=Hb.fork(i[0],i.slice(1),o);if(!a.pid)throw new Error(p(6397,null,i[0]));this.y=a}else throw new Error(p(6398,null));else{let n=t,o=i;const a={env:s};r.cwd&&(a.cwd=r.cwd),it&&(t.endsWith(".bat")||t.endsWith(".cmd"))&&(a.shell=!0,n=`"${t}"`,o=i.map(c=>(c=c.replace(/"/g,'\\"'),`"${c}"`))),this.y=Hb.spawn(n,o,a)}this.y.on("error",n=>{this.n.fire(n)}),this.y.on("exit",(n,o)=>{this.o.fire(n)}),this.y.stdout.on("close",()=>{this.n.fire(new Error("read error"))}),this.y.stdout.on("error",n=>{this.n.fire(n)}),this.y.stdin.on("error",n=>{this.n.fire(n)}),this.y.stderr.resume(),this.v(this.y.stdout,this.y.stdin)}catch(s){this.n.fire(s)}}async stopSession(){return this.y?(await this.w(),it?new Promise((t,i)=>{const r=Hb.exec(`taskkill /F /T /PID ${this.y.pid}`,function(s,n,o){if(s)return i(s)});r.on("exit",t),r.on("error",i)}):(this.y.kill("SIGTERM"),Promise.resolve(void 0))):Promise.resolve(void 0)}static B(t,i){if(!t)return;const r=Object.create(null);t.runtime&&(t.runtime.indexOf("./")===0?r.runtime=rt(i,t.runtime):r.runtime=t.runtime),t.runtimeArgs&&(r.runtimeArgs=t.runtimeArgs),t.program&&(lr(t.program)?r.program=t.program:r.program=rt(i,t.program)),t.args&&(r.args=t.args);const s=t;return s.win&&(r.win=ra.B(s.win,i)),s.winx86&&(r.winx86=ra.B(s.winx86,i)),s.windows&&(r.windows=ra.B(s.windows,i)),s.osx&&(r.osx=ra.B(s.osx,i)),s.linux&&(r.linux=ra.B(s.linux,i)),r}static platformAdapterExecutable(t,i){let r=Object.create(null);i=i.toLowerCase();for(const l of t)if(l.contributes){const u=l.contributes.debuggers;u&&u.length>0&&u.filter(h=>typeof h.type=="string"&&xr(h.type,i)).forEach(h=>{const d=ra.B(h,l.extensionLocation.fsPath);r=xs(r,d,l.isBuiltin)})}let s;it&&!process.env.hasOwnProperty("PROCESSOR_ARCHITEW6432")?s=r.winx86||r.win||r.windows:it?s=r.win||r.windows:Dt?s=r.osx:At&&(s=r.linux),s=s||r;const n=s.program||r.program,o=s.args||r.args,a=s.runtime||r.runtime,c=s.runtimeArgs||r.runtimeArgs;if(a)return{type:"executable",command:a,args:(c||[]).concat(typeof n=="string"?[n]:[]).concat(o||[])};if(n)return{type:"executable",command:n,args:o||[]}}};import*as K_ from"child_process";function ej(e,t){return new Promise((i,r)=>{let s="";const n=K_.spawn(e,t);n.pid&&n.stdout.on("data",o=>{s+=o.toString()}),n.on("error",o=>{r(o)}),n.on("close",o=>{i(s)})})}async function tj(e){if(e)if(it){const t=await import("@vscode/windows-process-tree");return new Promise(i=>{t.getProcessTree(e,r=>{i(!!r&&r.children.length>0)})})}else return ej("/usr/bin/pgrep",["-lP",String(e)]).then(t=>{const i=t.trim();return!(i.length===0||i.indexOf(" tmux")>=0)},t=>!0);return Promise.resolve(!0)}var c$;(function(e){e[e.cmd=0]="cmd",e[e.powershell=1]="powershell",e[e.bash=2]="bash"})(c$||(c$={}));function ij(e,t,i,r,s){e=e.trim().toLowerCase();let n;e.indexOf("powershell")>=0||e.indexOf("pwsh")>=0?n=1:e.indexOf("cmd.exe")>=0?n=0:e.indexOf("bash")>=0?n=2:it?n=0:n=2;let o,a=" ";switch(n){case 1:if(o=c=>(c=c.replace(/\'/g,"''"),c.length>0&&c.charAt(c.length-1)==="\\"?`'${c}\\'`:`'${c}'`),r){const c=V5(r);c&&(a+=`${c}:; `),a+=`cd ${o(r)}; `}if(s)for(const c in s){const l=s[c];l===null?a+=`Remove-Item env:${c}; `:a+=`\${env:${c}}='${l}'; `}if(t.length>0){const c=t.shift(),l=i?c:o(c);a+=l[0]==="'"?`& ${l} `:`${l} `;for(const u of t)a+=u==="<"||u===">"||i?u:o(u),a+=" "}break;case 0:if(o=c=>(c=c.replace(/\"/g,'""'),c=c.replace(/([><!^&|])/g,"^$1"),' "'.split("").some(l=>c.includes(l))||c.length===0?`"${c}"`:c),r){const c=V5(r);c&&(a+=`${c}: && `),a+=`cd ${o(r)} && `}if(s){a+='cmd /C "';for(const c in s){let l=s[c];l===null?a+=`set "${c}=" && `:(l=l.replace(/[&^|<>]/g,u=>`^${u}`),a+=`set "${c}=${l}" && `)}}for(const c of t)a+=c==="<"||c===">"||i?c:o(c),a+=" ";s&&(a+='"');break;case 2:{o=l=>(l=l.replace(/(["'\\\$!><#()\[\]*&^| ;{}?`])/g,"\\$1"),l.length===0?'""':l);const c=l=>/[^\w@%\/+=,.:^-]/.test(l)?`'${l.replace(/'/g,"'\\''")}'`:l;if(r&&(a+=`cd ${o(r)} ; `),s){a+="/usr/bin/env";for(const l in s){const u=s[l];u===null?a+=` -u ${c(l)}`:a+=` ${c(`${l}=${u}`)}`}a+=" "}for(const l of t)a+=l==="<"||l===">"||i?l:o(l),a+=" ";break}}return a}var Bb=class extends $g{constructor(t,i,r,s,n,o,a,c,l,u){super(t,i,r,s,a,c,l,u),this.Eb=n,this.Fb=o,this.Cb=new sj}hb(t,i){return t instanceof Ya?new a$(this.kb(t),i.type):t instanceof Xa?new X_(this.lb(t)):t instanceof iu?new Z_(this.mb(t)):super.hb(t,i)}ub(t,i){const r=a$.platformAdapterExecutable(i.getAllExtensionDescriptions(),t.type);if(r)return new Ya(r.command,r.args,r.options)}ib(){return new r$}async $runInTerminal(t,i){if(t.kind==="integrated"){this.Db||(this.Db=this.B(this.Eb.onDidCloseTerminal(g=>{this.Cb.onTerminalClosed(g)})));const r=await this.$.getConfigProvider(),s=this.Eb.getDefaultShell(!0),n=this.Eb.getDefaultShellArgs(!0),o=t.title||p(3038,null),a=JSON.stringify({shell:s,shellArgs:n});let c=await this.Cb.checkout(a,o),l,u=!1;if(c)l=t.cwd;else{const g={shellPath:s,shellArgs:n,cwd:t.cwd,name:o,iconPath:new di("debug")};u=!0,c=this.Eb.createTerminalFromOptions(g,{isFeatureTerminal:!0,forceShellIntegration:!0,useShellEnvironment:!0}),this.Cb.insert(c,a)}c.show(!0);const h=await c.processId;if(u){let g;(function(y){y[y.DataDebounce=500]="DataDebounce",y[y.MaxDelay=5e3]="MaxDelay"})(g||(g={}));const v=new ue;await new Promise(y=>{const S=v.add(new Es(y,500));v.add(this.Eb.onDidWriteTerminalData(x=>{x.terminal===c&&S.schedule()})),v.add(this.Fb.onDidChangeTerminalShellIntegration(x=>{x.terminal===c&&y()})),v.add(lE(y,5e3))}),v.dispose()}else c.state.isInteractedWith&&!c.shellIntegration&&(c.sendText(""),await bi(200)),r.getConfiguration("debug.terminal").get("clearBeforeReusing")&&(s.indexOf("powershell")>=0||s.indexOf("pwsh")>=0||s.indexOf("cmd.exe")>=0?c.sendText("cls"):s.indexOf("bash")>=0?c.sendText("clear"):it?c.sendText("cls"):c.sendText("clear"));const d=ij(s,t.args,!!t.argsCanBeInterpretedByShell,l,t.env);c.shellIntegration?c.shellIntegration.executeCommand(d):c.sendText(d);const f=this.onDidTerminateDebugSession(g=>{g.id===i&&(this.Cb.free(c),f.dispose())});return h}else if(t.kind==="external")return rj(t,await this.$.getConfigProvider());return super.$runInTerminal(t,i)}};Bb=__decorate([__param(0,Ie),__param(1,Fr),__param(2,zs),__param(3,gr),__param(4,Ws),__param(5,Tb),__param(6,$c),__param(7,Cc),__param(8,rr),__param(9,oh)],Bb);var lh=void 0;function rj(e,t){if(!lh)if(it)lh=new _b;else if(Dt)lh=new J_;else if(At)lh=new i$;else throw new Error("external terminals not supported on this platform");const i=t.getConfiguration("terminal");return lh.runInTerminal(e.title,e.cwd,e.args,e.env||{},i.external||{})}var sj=class GI{constructor(){this.b=new Map}static{this.a=1e3}async checkout(t,i,r=!1){const n=[...this.b.entries()].map(([o,a])=>Qr(async c=>{if(o.name!==i||a.lastUsedAt!==-1&&await tj(await o.processId))return null;const l=Date.now();return a.lastUsedAt+GI.a>l||c.isCancellationRequested?null:a.config!==t?(r&&o.dispose(),null):(a.lastUsedAt=l,o)}));return await cR(n,o=>!!o)}insert(t,i){this.b.set(t,{lastUsedAt:Date.now(),config:i})}free(t){const i=this.b.get(t);i&&(i.lastUsedAt=-1)}onTerminalClosed(t){this.b.delete(t)}},l$=new Hi(()=>{const e=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:e,collatorIsNumeric:e.resolvedOptions().numeric}}),ZY=new Hi(()=>({collator:new Intl.Collator(void 0,{numeric:!0})})),KY=new Hi(()=>({collator:new Intl.Collator(void 0,{numeric:!0,sensitivity:"accent"})}));function u$(e,t,i=!1){const r=e||"",s=t||"",n=l$.value.collator.compare(r,s);return l$.value.collatorIsNumeric&&n===0&&r!==s?r<s?-1:1:n}function nj(e,t,i=!1){return i||(e=e&&e.toLowerCase(),t=t&&t.toLowerCase()),e===t?0:e<t?-1:1}function Ag(e,t,i=!1){const r=e.split(ft),s=t.split(ft),n=r.length-1,o=s.length-1;let a,c;for(let l=0;;l++){if(a=n===l,c=o===l,a&&c)return u$(r[l],s[l],i);if(a)return-1;if(c)return 1;const u=nj(r[l],s[l],i);if(u!==0)return u}}function Wb(e,t,i){const r=e.toLowerCase(),s=t.toLowerCase(),n=oj(e,t,i);if(n)return n;const o=r.endsWith(i),a=s.endsWith(i);if(o!==a)return o?-1:1;const c=u$(r,s);return c!==0?c:r.localeCompare(s)}function oj(e,t,i){const r=e.toLowerCase(),s=t.toLowerCase(),n=r.startsWith(i),o=s.startsWith(i);if(n!==o)return n?-1:1;if(n&&o){if(r.length<s.length)return-1;if(r.length>s.length)return 1}return 0}var Rg=0,h$=[Rg,[]];function d$(e,t,i,r){if(!e||!t)return h$;const s=e.length,n=t.length;if(s<n)return h$;const o=e.toLowerCase();return aj(t,i,n,e,o,s,r)}function aj(e,t,i,r,s,n,o){const a=[],c=[];for(let d=0;d<i;d++){const f=d*n,g=f-n,v=d>0,y=e[d],S=t[d];for(let x=0;x<n;x++){const P=x>0,D=f+x,N=D-1,H=g+x-1,Y=P?a[N]:0,B=v&&P?a[H]:0,M=v&&P?c[H]:0;let re;!B&&v?re=0:re=cj(y,S,r,s,x,M),re&&B+re>=Y&&(o||v||s.startsWith(t,x))?(c[D]=M+1,a[D]=B+re):(c[D]=Rg,a[D]=Y)}}const l=[];let u=i-1,h=n-1;for(;u>=0&&h>=0;){const d=u*n+h;c[d]===Rg||(l.push(h),u--),h--}return[a[i*n-1],l.reverse()]}function cj(e,t,i,r,s,n){let o=0;if(!lj(t,r[s]))return o;if(o+=1,n>0&&(o+=n*5),e===i[s]&&(o+=1),s===0)o+=8;else{const a=uj(i.charCodeAt(s-1));a?o+=a:El(i.charCodeAt(s))&&n===0&&(o+=2)}return o}function lj(e,t){return e===t?!0:e==="/"||e==="\\"?t==="/"||t==="\\":!1}function uj(e){switch(e){case 47:case 92:return 5;case 95:case 45:case 46:case 32:case 39:case 34:case 58:return 4;default:return 0}}var Tg=Object.freeze({score:0}),Lg=1<<18,zb=1<<17,Vb=65536;function hj(e,t,i,r){const s=r.values?r.values:[r];return Is({[r.normalized]:{values:s.map(o=>({value:o.normalized,expectContiguousMatch:o.expectContiguousMatch})),label:e,description:t,allowNonContiguousMatches:i}})}function f$(e,t,i,r,s){if(!e||!t.normalized)return Tg;const n=r.getItemLabel(e);if(!n)return Tg;const o=r.getItemDescription(e),a=hj(n,o,i,t),c=s[a];if(c)return c;const l=dj(n,o,r.getItemPath(e),t,i);return s[a]=l,l}function dj(e,t,i,r,s){const n=!i||!r.containsPathSeparator;return i&&(At?r.pathNormalized===i:xr(r.pathNormalized,i))?{score:Lg,labelMatch:[{start:0,end:e.length}],descriptionMatch:t?[{start:0,end:t.length}]:void 0}:r.values&&r.values.length>1?fj(e,t,i,r.values,n,s):p$(e,t,i,r,n,s)}function fj(e,t,i,r,s,n){let o=0;const a=[],c=[];for(const l of r){const{score:u,labelMatch:h,descriptionMatch:d}=p$(e,t,i,l,s,n);if(u===Rg)return Tg;o+=u,h&&a.push(...h),d&&c.push(...d)}return{score:o,labelMatch:m$(a),descriptionMatch:m$(c)}}function p$(e,t,i,r,s,n){if(s||!t){const[o,a]=d$(e,r.normalized,r.normalizedLowercase,n&&!r.expectContiguousMatch);if(o){const c=_1(r.normalized,e);let l;if(c){l=zb;const u=Math.round(r.normalized.length/e.length*100);l+=u}else l=Vb;return{score:l+o,labelMatch:c||g$(a)}}}if(t){let o=t;i&&(o=`${t}${ft}`);const a=o.length,c=`${o}${e}`,[l,u]=d$(c,r.normalized,r.normalizedLowercase,n&&!r.expectContiguousMatch);if(l){const h=g$(u),d=[],f=[];return h.forEach(g=>{g.start<a&&g.end>a?(d.push({start:0,end:g.end-a}),f.push({start:g.start,end:a})):g.start>=a?d.push({start:g.start-a,end:g.end-a}):f.push(g)}),{score:l,labelMatch:d,descriptionMatch:f}}}return Tg}function g$(e){const t=[];if(!e)return t;let i;for(const r of e)i&&i.end===r?i.end+=1:(i={start:r,end:r+1},t.push(i));return t}function m$(e){const t=e.sort((s,n)=>s.start-n.start),i=[];let r;for(const s of t)!r||!pj(r,s)?(r=s,i.push(s)):(r.start=Math.min(r.start,s.start),r.end=Math.max(r.end,s.end));return i}function pj(e,t){return!(e.end<t.start||t.end<e.start)}function gj(e,t,i,r,s,n){const o=f$(e,i,r,s,n),a=f$(t,i,r,s,n),c=o.score,l=a.score;if((c===Lg||l===Lg)&&c!==l)return c===Lg?-1:1;if(c>Vb||l>Vb){if(c!==l)return c>l?-1:1;if(c<zb&&l<zb){const y=mj(o.labelMatch,a.labelMatch);if(y!==0)return y}const g=s.getItemLabel(e)||"",v=s.getItemLabel(t)||"";if(g.length!==v.length)return g.length-v.length}if(c!==l)return c>l?-1:1;const u=Array.isArray(o.labelMatch)&&o.labelMatch.length>0,h=Array.isArray(a.labelMatch)&&a.labelMatch.length>0;if(u&&!h)return-1;if(h&&!u)return 1;const d=v$(e,o,s),f=v$(t,a,s);return d&&f&&d!==f?f>d?-1:1:vj(e,t,i,s)}function v$(e,t,i){let r=-1,s=-1;if(t.descriptionMatch&&t.descriptionMatch.length?r=t.descriptionMatch[0].start:t.labelMatch&&t.labelMatch.length&&(r=t.labelMatch[0].start),t.labelMatch&&t.labelMatch.length){if(s=t.labelMatch[t.labelMatch.length-1].end,t.descriptionMatch&&t.descriptionMatch.length){const n=i.getItemDescription(e);n&&(s+=n.length)}}else t.descriptionMatch&&t.descriptionMatch.length&&(s=t.descriptionMatch[t.descriptionMatch.length-1].end);return s-r}function mj(e,t){if(!e&&!t||(!e||!e.length)&&(!t||!t.length))return 0;if(!t||!t.length)return-1;if(!e||!e.length)return 1;const i=e[0].start,s=e[e.length-1].end-i,n=t[0].start,a=t[t.length-1].end-n;return s===a?0:a<s?1:-1}function vj(e,t,i,r){const s=r.getItemLabel(e)||"",n=r.getItemLabel(t)||"",o=r.getItemDescription(e),a=r.getItemDescription(t),c=s.length+(o?o.length:0),l=n.length+(a?a.length:0);if(c!==l)return c-l;const u=r.getItemPath(e),h=r.getItemPath(t);return u&&h&&u.length!==h.length?u.length-h.length:s!==n?Wb(s,n,i.normalized):o&&a&&o!==a?Wb(o,a,i.normalized):u&&h&&u!==h?Wb(u,h,i.normalized):0}function w$(e){return e.startsWith('"')&&e.endsWith('"')}var wj=" ";function Ng(e){typeof e!="string"&&(e="");const t=e.toLowerCase(),{pathNormalized:i,normalized:r,normalizedLowercase:s}=b$(e),n=i.indexOf(ft)>=0,o=w$(e);let a;const c=e.split(wj);if(c.length>1)for(const l of c){const u=w$(l),{pathNormalized:h,normalized:d,normalizedLowercase:f}=b$(l);d&&(a||(a=[]),a.push({original:l,originalLowercase:l.toLowerCase(),pathNormalized:h,normalized:d,normalizedLowercase:f,expectContiguousMatch:u}))}return{original:e,originalLowercase:t,pathNormalized:i,normalized:r,normalizedLowercase:s,values:a,containsPathSeparator:n,expectContiguousMatch:o}}function b$(e){let t;it?t=e.replace(/\//g,ft):t=e.replace(/\\/g,ft);const i=hA(t).replace(/\s|"/g,"");return{pathNormalized:t,normalized:i,normalizedLowercase:i.toLowerCase()}}import*as bj from"child_process";import*as qb from"fs";import{StringDecoder as y$}from"string_decoder";import*as yj from"child_process";function Ac(e){return e.startsWith("**")||e.startsWith("/")?e:`/${e}`}function Ej(e){return new gw(e.start.line,e.start.character,e.end.line,e.end.character)}function E$(e){return new Lx(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn)}var Og=class{constructor(t,i){this.a=t,this.b=i}appendLine(t){this.b.debug(`${this.a}#search`,t)}};Og=__decorate([__param(1,Ce)],Og);import{rgPath as Sj}from"@vscode/ripgrep";var S$=Sj.replace(/\bnode_modules\.asar\b/,"node_modules.asar.unpacked");function xj(e,t,i,r,s){const n=kj(e,t,i,r,s),o=t.folder.fsPath;return{cmd:yj.spawn(S$,n.args,{cwd:o}),rgDiskPath:S$,siblingClauses:n.siblingClauses,rgArgs:n,cwd:o}}function kj(e,t,i,r,s){const n=["--files","--hidden","--case-sensitive","--no-require-git"];Cj([t],i,!1).forEach(a=>{const c=Ac(a);if(n.push("-g",c),Dt){const l=gd(c);l!==c&&n.push("-g",l)}});const o=$j([t],r,void 0,!1);return o.globArgs.forEach(a=>{const c=`!${Ac(a)}`;if(n.push("-g",c),Dt){const l=gd(c);l!==c&&n.push("-g",l)}}),t.disregardIgnoreFiles!==!1?n.push("--no-ignore"):t.disregardParentIgnoreFiles!==!1&&n.push("--no-ignore-parent"),t.ignoreSymlinks||n.push("--follow"),e.exists&&n.push("--quiet"),s&&n.push("--threads",`${s}`),n.push("--no-config"),t.disregardGlobalIgnoreFiles&&n.push("--no-ignore-global"),{args:n,siblingClauses:o.siblingClauses}}function $j(e,t,i,r=!0){const s=[];let n={};return e.forEach(o=>{const a=Object.assign({},o.excludePattern||{},t||{}),c=x$(a,r?o.folder.fsPath:void 0,i);s.push(...c.globArgs),c.siblingClauses&&(n=Object.assign(n,c.siblingClauses))}),{globArgs:s,siblingClauses:n}}function Cj(e,t,i=!0){const r=[];return e.forEach(s=>{const n=Object.assign({},t||{},s.includePattern||{}),o=x$(n,i?s.folder.fsPath:void 0);r.push(...o.globArgs)}),r}function x$(e,t,i){const r=[],s={};return Object.keys(e).forEach(n=>{if(i&&i.has(n)||!n)return;const o=e[n];n=Pj(t?Ij(t,n):n),n.startsWith("\\\\")?n="\\\\"+n.substr(2).replace(/\\/g,"/"):n=n.replace(/\\/g,"/"),typeof o=="boolean"&&o?(n.startsWith("\\\\")&&(n+="**"),r.push(Dj(n))):o&&o.when&&(s[n]=o)}),{globArgs:r,siblingClauses:s}}function Ij(e,t){return lr(t)?t:rt(e,t)}function Pj(e){return e=Gr(e,"\\"),Gr(e,"/")}function Dj(e){return rd(e).toLowerCase()==="c:/"?e.replace(/^c:[/\\]/i,"/"):e}var Fg=new Set;process.on("exit",()=>{Fg.forEach(e=>e())});var Aj=class{constructor(e){this.c=null,this.h=null,this.l=!1,this.m=null,this.r=null,this.s=0,this.a=e,this.b=e.filePattern||"",this.d=e.includePattern&&Di(e.includePattern),this.f=e.maxResults||null,this.g=!!e.exists,this.v=Object.create(null),this.k=0,this.j=!1,this.o=0,this.p=0,this.q=[],this.b&&(this.c=e.shouldGlobMatchFilePattern?null:Ng(this.b).normalizedLowercase),this.u=e.excludePattern&&Di(e.excludePattern),this.t=new Map,e.folderQueries.forEach(t=>{const i={};t.excludePattern?.forEach(s=>{Object.assign(i,s.pattern||{},this.a.excludePattern||{})}),t.excludePattern?.length||Object.assign(i,this.a.excludePattern||{});const r=t.folder.fsPath;e.folderQueries.map(s=>s.folder.fsPath).filter(s=>s!==r).forEach(s=>{dn(s,r)&&(i[so(r,s)]=!0)}),this.t.set(r,new Rj(i,r))})}cancel(){this.l=!0,Fg.forEach(e=>e())}walk(e,t,i,r,s,n){if(this.m=ri.create(!1),this.l)return n(null,this.j);t.forEach(o=>{const a=ut(o.fsPath);this.u&&this.u(o.fsPath,a)||this.J(r,{relativePath:o.fsPath,searchPath:void 0})}),this.r=ri.create(!1),this.w(e,(o,a)=>{this.x(this.y,this,o,i,r,s,c=>{if(c){const l=Ei(c);console.error(l),this.q.push(l),a(c,void 0)}else a(null,void 0)})},(o,a)=>{this.m.stop();const c=o?mt(o)[0]:null;n(c,this.j)})}w(e,t,i){const r=new Array(e.length),s=new Array(e.length);let n=!1,o=0;if(e.length===0)return i(null,[]);e.forEach((a,c)=>{t(a,(l,u)=>{if(l?(n=!0,r[c]=null,s[c]=l):(r[c]=u,s[c]=null),++o===e.length)return i(n?s:null,r)})})}x(e,t,...i){try{e.apply(t,i)}catch(r){i[i.length-1](r)}}y(e,t,i,r,s){const n=e.folder.fsPath,o=Dt,a=()=>d&&d.kill();Fg.add(a);let c=y=>{Fg.delete(a),c=()=>{},s(y)},l="";const u=this.D(),h=xj(this.a,e,this.a.includePattern,this.t.get(e.folder.fsPath).expression,t),d=h.cmd,f=!Object.keys(h.siblingClauses).length,g=h.rgArgs.args.map(y=>y.match(/^-/)?y:`'${y}'`).join(" ");let v=`${h.rgDiskPath} ${g}
 - cwd: ${h.cwd}`;h.rgArgs.siblingClauses&&(v+=`
 - Sibling clauses: ${JSON.stringify(h.rgArgs.siblingClauses)}`),r({message:v}),this.s=0,this.z(d,"utf8",r,(y,S,x)=>{if(y){c(y);return}if(this.j){c();return}const D=(l+(o?ul(S||""):S)).split(`
`);if(x){const N=D.length;D[N-1]=D[N-1].trim(),D[N-1]||D.pop()}else l=D.pop()||"";if(D.length&&D[0].indexOf(`
`)!==-1){c(new Error("Splitting up files failed"));return}if(this.s+=D.length,f){for(const N of D)if(this.J(i,{base:n,relativePath:N,searchPath:this.N(e,N)}),this.j){a();break}(x||this.j)&&c();return}this.G(e,u,n,D,i),x&&(this.H(u,n,i),c())})}spawnFindCmd(e){const t=this.t.get(e.folder.fsPath),i=t.getBasenameTerms(),r=t.getPathTerms(),s=["-L","."];if(i.length||r.length){s.push("-not","(","(");for(const n of i)s.push("-name",n),s.push("-o");for(const n of r)s.push("-path",n),s.push("-o");s.pop(),s.push(")","-prune",")")}return s.push("-type","f"),bj.spawn("find",s,{cwd:e.folder.fsPath})}readStdout(e,t,i){let r="";this.z(e,t,()=>{},(s,n,o)=>{if(s){i(s);return}r+=n,o&&i(null,r)})}z(e,t,i,r){let s=(a,c,l)=>{(a||l)&&(s=()=>{},this.r?.stop()),r(a,c,l)},n=!1;e.stdout?(this.A(e.stdout,t,s),e.stdout.once("data",()=>n=!0)):i({message:"stdout is null"});let o;e.stderr?o=this.B(e.stderr):i({message:"stderr is null"}),e.on("error",a=>{s(a)}),e.on("close",a=>{let c;!n&&(c=this.C(o,t))&&Tj(c)?s(new Error(`command failed with error code ${a}: ${this.C(o,t)}`)):(this.g&&a===0&&(this.j=!0),s(null,"",!0))})}A(e,t,i){const r=new y$(t);return e.on("data",s=>{i(null,r.write(s))}),r}B(e){const t=[];return e.on("data",i=>{t.push(i)}),t}C(e,t){const i=new y$(t);return e.map(r=>i.write(r)).join("")}D(){const e={rootEntries:[],pathToEntries:Object.create(null)};return e.pathToEntries["."]=e.rootEntries,e}G(e,{pathToEntries:t},i,r,s){r.indexOf(this.b)!==-1&&this.J(s,{base:i,relativePath:this.b,searchPath:this.N(e,this.b)});const n=o=>{const a=ut(o),c=wi(o);let l=t[c];l||(l=t[c]=[],n(c)),l.push({base:i,relativePath:o,basename:a,searchPath:this.N(e,o)})};r.forEach(n)}H({rootEntries:e,pathToEntries:t},i,r){const s=this,n=this.t.get(i),o=this.b;function a(c){s.o++;const l=Hu(()=>c.map(u=>u.basename));for(let u=0,h=c.length;u<h;u++){const d=c[u],{relativePath:f,basename:g}=d;if(n.test(f,g,o!==g?l:void 0))continue;const v=t[f];if(v)a(v);else{if(s.p++,f===o)continue;s.J(r,d)}if(s.j)break}}a(e)}getStats(){return{cmdTime:this.r.elapsed(),fileWalkTime:this.m.elapsed(),directoriesWalked:this.o,filesWalked:this.p,cmdResultCount:this.s}}I(e,t,i,r,s){const n=e.folder,o=Hu(()=>i);this.w(i,(a,c)=>{if(this.l||this.j)return c(null);const l=t?[t,a].join(ft):a;if(this.t.get(e.folder.fsPath).test(l,a,this.a.filePattern!==a?o:void 0))return c(null);const u=[n.fsPath,l].join(ft);qb.lstat(u,(h,d)=>{if(h||this.l||this.j)return c(null);this.L(u,d,(f,g)=>f||this.l||this.j?c(null):g.isDirectory()?(this.o++,this.M(u,d,(v,y)=>v||this.l||this.j||(y=y||"",this.v[y])?c(null):(this.v[y]=!0,ht.readdir(u).then(S=>{if(this.l||this.j)return c(null);this.I(e,l,S,r,x=>c(x||null))},S=>{c(null)})))):(this.p++,l===this.b||this.h&&Xi(g.size)&&g.size>this.h||this.J(r,{base:n.fsPath,relativePath:l,searchPath:this.N(e,l)}),c(null,void 0)))})},a=>{const c=a&&mt(a);return s(c&&c.length>0?c[0]:void 0)})}J(e,t){this.K(t)&&(!this.d||this.d(t.relativePath,ut(t.relativePath)))&&(this.k++,(this.g||this.f&&this.k>this.f)&&(this.j=!0),this.j||e(t))}K(e){if(this.b){if(this.b==="*")return!0;if(this.c)return ju(e,this.c);if(this.b)return ju(e,this.b,!1)}return!0}L(e,t,i){return t.isSymbolicLink()?qb.stat(e,i):i(null,t)}M(e,t,i){return t.isSymbolicLink()?qb.realpath(e,(r,s)=>r?i(r):i(null,s)):i(null,e)}N(e,t){return e.folderName?rt(e.folderName,t):t}},Gb=class{constructor(e,t){this.a=e.folderQueries,this.b=e.extraFileResources||[],this.d=t,this.c=new Aj(e)}search(e,t,i){this.c.walk(this.a,this.b,this.d,e,t,(r,s)=>{i(r,{limitHit:s,stats:this.c.getStats(),messages:[]})})}cancel(){this.c.cancel()}},Rj=class{constructor(e,t){this.expression=e,this.c=t,this.d(e)}d(e){let t,i;Object.keys(e).filter(r=>e[r]).forEach(r=>{lr(r)?(t=t||Kd(),t[r]=e[r]):(i=i||Kd(),i[r]=e[r])}),this.a=t&&Di(t,{trimForExclusions:!0}),this.b=i&&Di(i,{trimForExclusions:!0})}test(e,t,i){return this.b&&this.b(e,t,i)||this.a&&this.a(rt(this.c,e),t,i)}getBasenameTerms(){const e=[];return this.a&&e.push(...rf(this.a)),this.b&&e.push(...rf(this.b)),e}getPathTerms(){const e=[];return this.a&&e.push(...sf(this.a)),this.b&&e.push(...sf(this.b)),e}};function Tj(e){const t=e.trim().split(`
`),i=t[0].trim();if(i.startsWith("Error parsing regex"))return i;if(i.startsWith("regex parse error"))return O5(t[t.length-1].trim());if(i.startsWith("error parsing glob")||i.startsWith("unsupported encoding"))return i.charAt(0).toUpperCase()+i.substr(1);if(i==="Literal '\\n' not allowed.")return"Literal '\\n' currently not supported";if(i.startsWith("Literal "))return i}import*as Lj from"child_process";import*as Jb from"fs";import{StringDecoder as k$}from"string_decoder";import*as Nj from"child_process";import{fdPath as Oj}from"@byted-icube/fd";var $$=Oj.replace(/\bnode_modules\.asar\b/,"node_modules.asar.unpacked");function Fj(e,t,i,r,s){const n=Uj(e,t,i,r,s),o=t.folder.fsPath;return{cmd:Nj.spawn($$,n.args,{cwd:o}),fdDiskPath:$$,rgArgs:n,cwd:o}}var Mj={4:"dir",5:"file"};function Uj(e,t,i,r,s){const n=[];e.filePattern&&n.push(e.filePattern),n.push("--hidden"),n.push("--color","never"),e.type===6?(n.push("--type","file"),n.push("--type","dir")):n.push("--type",Mj[e.type]||"dir"),e.maxDepth&&n.push("--max-depth",e.maxDepth.toString()),jj([t],i,!1).forEach(a=>{const c=Ac(a);if(n.push("-g",c),Dt){const l=gd(c);l!==c&&n.push("-g",l)}});const o=_j([t],r,void 0,!1);return o.globArgs.forEach(a=>{const c=Ac(a);if(n.push("--exclude",c),Dt){const l=gd(c);l!==c&&n.push("--exclude",l)}}),t.disregardIgnoreFiles!==!1&&n.push("--no-ignore"),t.ignoreSymlinks||n.push("--follow"),{args:n,siblingClauses:o.siblingClauses}}function _j(e,t,i,r=!0){const s=[];let n={};return e.forEach(o=>{const a=Object.assign({},o.excludePattern||{},t||{}),c=C$(a,r?o.folder.fsPath:void 0,i);s.push(...c.globArgs),c.siblingClauses&&(n=Object.assign(n,c.siblingClauses))}),{globArgs:s,siblingClauses:n}}function jj(e,t,i=!0){const r=[];return e.forEach(s=>{const n=Object.assign({},t||{},s.includePattern||{}),o=C$(n,i?s.folder.fsPath:void 0);r.push(...o.globArgs)}),r}function C$(e,t,i){const r=[],s={};return Object.keys(e).forEach(n=>{if(i&&i.has(n)||!n)return;const o=e[n];n=Bj(t?Hj(t,n):n),n.startsWith("\\\\")?n="\\\\"+n.substr(2).replace(/\\/g,"/"):n=n.replace(/\\/g,"/"),typeof o=="boolean"&&o?(n.startsWith("\\\\")&&(n+="**"),r.push(Wj(n))):o&&o.when&&(s[n]=o)}),{globArgs:r,siblingClauses:s}}function Hj(e,t){return lr(t)?t:rt(e,t)}function Bj(e){return e=Gr(e,"\\"),Gr(e,"/")}function Wj(e){return rd(e).toLowerCase()==="c:/"?e.replace(/^c:[/\\]/i,"/"):e}var Mg=new Set;process.on("exit",()=>{Mg.forEach(e=>e())});var zj=class{constructor(e){this.c=null,this.h=null,this.l=!1,this.m=null,this.r=null,this.s=0,this.a=e,this.b=e.filePattern||"",this.d=e.includePattern&&Di(e.includePattern),this.f=e.maxResults||null,this.g=!!e.exists,this.v=Object.create(null),this.k=0,this.j=!1,this.o=0,this.p=0,this.q=[],this.b&&(this.c=e.shouldGlobMatchFilePattern?null:Ng(this.b).normalizedLowercase),this.u=e.excludePattern&&Di(e.excludePattern),this.t=new Map,e.folderQueries.forEach(t=>{const i={};t.excludePattern?.forEach(s=>{Object.assign(i,s.pattern||{},this.a.excludePattern||{})}),t.excludePattern?.length||Object.assign(i,this.a.excludePattern||{});const r=t.folder.fsPath;e.folderQueries.map(s=>s.folder.fsPath).filter(s=>s!==r).forEach(s=>{dn(s,r)&&(i[so(r,s)]=!0)}),this.t.set(r,new qj(i,r))})}cancel(){this.l=!0,Mg.forEach(e=>e())}walk(e,t,i,r,s,n){if(this.m=ri.create(!1),this.l)return n(null,this.j);t.forEach(o=>{const a=ut(o.fsPath);this.u&&this.u(o.fsPath,a)||this.J(r,{relativePath:o.fsPath,searchPath:void 0})}),this.r=ri.create(!1),this.w(e,(o,a)=>{this.x(this.y,this,o,i,r,s,c=>{if(c){const l=Ei(c);console.error(l),this.q.push(l),a(c,void 0)}else a(null,void 0)})},(o,a)=>{this.m.stop();const c=o?mt(o)[0]:null;n(c,this.j)})}w(e,t,i){const r=new Array(e.length),s=new Array(e.length);let n=!1,o=0;if(e.length===0)return i(null,[]);e.forEach((a,c)=>{t(a,(l,u)=>{if(l?(n=!0,r[c]=null,s[c]=l):(r[c]=u,s[c]=null),++o===e.length)return i(n?s:null,r)})})}x(e,t,...i){try{e.apply(t,i)}catch(r){i[i.length-1](r)}}y(e,t,i,r,s){const n=e.folder.fsPath,o=Dt,a=()=>d&&d.kill();Mg.add(a);let c=y=>{Mg.delete(a),c=()=>{},s(y)},l="";const u=this.D(),h=Fj(this.a,e,this.a.includePattern,this.t.get(e.folder.fsPath).expression,t),d=h.cmd,f=!0,g=h.rgArgs.args.map(y=>y.match(/^-/)?y:`'${y}'`).join(" ");let v=`${h.fdDiskPath} ${g}
 - cwd: ${h.cwd}`;h.rgArgs.siblingClauses&&(v+=`
 - Sibling clauses: ${JSON.stringify(h.rgArgs.siblingClauses)}`),r({message:v}),this.s=0,this.z(d,"utf8",r,(y,S,x)=>{if(y){c(y);return}if(this.j){c();return}const D=(l+(o?ul(S||""):S)).split(`
`);if(x){const N=D.length;D[N-1]=D[N-1].trim(),D[N-1]||D.pop()}else l=D.pop()||"";if(D.length&&D[0].indexOf(`
`)!==-1){c(new Error("Splitting up files failed"));return}if(this.s+=D.length,f){for(const N of D)if(this.J(i,{base:n,relativePath:N,searchPath:this.N(e,N)}),this.j){a();break}(x||this.j)&&c();return}this.G(e,u,n,D,i),x&&(this.H(u,n,i),c())})}spawnFindCmd(e){const t=this.t.get(e.folder.fsPath),i=t.getBasenameTerms(),r=t.getPathTerms(),s=["-L","."];if(i.length||r.length){s.push("-not","(","(");for(const n of i)s.push("-name",n),s.push("-o");for(const n of r)s.push("-path",n),s.push("-o");s.pop(),s.push(")","-prune",")")}return s.push("-type","f"),Lj.spawn("find",s,{cwd:e.folder.fsPath})}readStdout(e,t,i){let r="";this.z(e,t,()=>{},(s,n,o)=>{if(s){i(s);return}r+=n,o&&i(null,r)})}z(e,t,i,r){let s=(a,c,l)=>{(a||l)&&(s=()=>{},this.r?.stop()),r(a,c,l)},n=!1;e.stdout?(this.A(e.stdout,t,s),e.stdout.once("data",()=>n=!0)):i({message:"stdout is null"});let o;e.stderr?o=this.B(e.stderr):i({message:"stderr is null"}),e.on("error",a=>{s(a)}),e.on("close",a=>{let c;!n&&(c=this.C(o,t))&&Gj(c)?s(new Error(`command failed with error code ${a}: ${this.C(o,t)}`)):(this.g&&a===0&&(this.j=!0),s(null,"",!0))})}A(e,t,i){const r=new k$(t);return e.on("data",s=>{i(null,r.write(s))}),r}B(e){const t=[];return e.on("data",i=>{t.push(i)}),t}C(e,t){const i=new k$(t);return e.map(r=>i.write(r)).join("")}D(){const e={rootEntries:[],pathToEntries:Object.create(null)};return e.pathToEntries["."]=e.rootEntries,e}G(e,{pathToEntries:t},i,r,s){r.indexOf(this.b)!==-1&&this.J(s,{base:i,relativePath:this.b,searchPath:this.N(e,this.b)});const n=o=>{const a=ut(o),c=wi(o);let l=t[c];l||(l=t[c]=[],n(c)),l.push({base:i,relativePath:o,basename:a,searchPath:this.N(e,o)})};r.forEach(n)}H({rootEntries:e,pathToEntries:t},i,r){const s=this,n=this.t.get(i),o=this.b;function a(c){s.o++;const l=Hu(()=>c.map(u=>u.basename));for(let u=0,h=c.length;u<h;u++){const d=c[u],{relativePath:f,basename:g}=d;if(n.test(f,g,o!==g?l:void 0))continue;const v=t[f];if(v)a(v);else{if(s.p++,f===o)continue;s.J(r,d)}if(s.j)break}}a(e)}getStats(){return{cmdTime:this.r.elapsed(),fileWalkTime:this.m.elapsed(),directoriesWalked:this.o,filesWalked:this.p,cmdResultCount:this.s}}I(e,t,i,r,s){const n=e.folder,o=Hu(()=>i);this.w(i,(a,c)=>{if(this.l||this.j)return c(null);const l=t?[t,a].join(ft):a;if(this.t.get(e.folder.fsPath).test(l,a,this.a.filePattern!==a?o:void 0))return c(null);const u=[n.fsPath,l].join(ft);Jb.lstat(u,(h,d)=>{if(h||this.l||this.j)return c(null);this.L(u,d,(f,g)=>f||this.l||this.j?c(null):g.isDirectory()?(this.o++,this.M(u,d,(v,y)=>v||this.l||this.j||(y=y||"",this.v[y])?c(null):(this.v[y]=!0,ht.readdir(u).then(S=>{if(this.l||this.j)return c(null);this.I(e,l,S,r,x=>c(x||null))},S=>{c(null)})))):(this.p++,l===this.b||this.h&&Xi(g.size)&&g.size>this.h||this.J(r,{base:n.fsPath,relativePath:l,searchPath:this.N(e,l)}),c(null,void 0)))})},a=>{const c=a&&mt(a);return s(c&&c.length>0?c[0]:void 0)})}J(e,t){this.K(t)&&(!this.d||this.d(t.relativePath,ut(t.relativePath)))&&(this.k++,(this.g||this.f&&this.k>this.f)&&(this.j=!0),this.j||e(t))}K(e){if(this.b){if(this.b==="*")return!0;if(this.c)return ju(e,this.c);if(this.b)return ju(e,this.b,!1)}return!0}L(e,t,i){return t.isSymbolicLink()?Jb.stat(e,i):i(null,t)}M(e,t,i){return t.isSymbolicLink()?Jb.realpath(e,(r,s)=>r?i(r):i(null,s)):i(null,e)}N(e,t){return e.folderName?rt(e.folderName,t):t}},Vj=class{constructor(e,t){this.a=e.folderQueries,this.b=e.extraFileResources||[],this.d=t,this.c=new zj(e)}search(e,t,i){this.c.walk(this.a,this.b,this.d,e,t,(r,s)=>{i(r,{limitHit:s,stats:this.c.getStats(),messages:[]})})}cancel(){this.c.cancel()}},qj=class{constructor(e,t){this.expression=e,this.c=t,this.d(e)}d(e){let t,i;Object.keys(e).filter(r=>e[r]).forEach(r=>{lr(r)?(t=t||Kd(),t[r]=e[r]):(i=i||Kd(),i[r]=e[r])}),this.a=t&&Di(t,{trimForExclusions:!0}),this.b=i&&Di(i,{trimForExclusions:!0})}test(e,t,i){return this.b&&this.b(e,t,i)||this.a&&this.a(rt(this.c,e),t,i)}getBasenameTerms(){const e=[];return this.a&&e.push(...rf(this.a)),this.b&&e.push(...rf(this.b)),e}getPathTerms(){const e=[];return this.a&&e.push(...sf(this.a)),this.b&&e.push(...sf(this.b)),e}};function Gj(e){const t=e.trim().split(`
`),i=t[0].trim();if(i.startsWith("Error parsing regex"))return i;if(i.startsWith("regex parse error"))return O5(t[t.length-1].trim());if(i.startsWith("error parsing glob")||i.startsWith("unsupported encoding"))return i.charAt(0).toUpperCase()+i.substr(1);if(i==="Literal '\\n' not allowed.")return"Literal '\\n' currently not supported";if(i.startsWith("Literal "))return i}import*as Jj from"child_process";import{EventEmitter as Qj}from"events";import{StringDecoder as Yj}from"string_decoder";import{RegExpParser as Xj,RegExpVisitor as Zj}from"vscode-regexpp";import{rgPath as Kj}from"@vscode/ripgrep";var I$=Kj.replace(/\bnode_modules\.asar\b/,"node_modules.asar.unpacked"),P$=class{constructor(e,t){this.a=e,this.b=t}provideTextSearchResults(e,t,i,r){return Promise.all(t.folderOptions.map(s=>{const n={folderOptions:s,numThreads:this.b,maxResults:t.maxResults,previewOptions:t.previewOptions,maxFileSize:t.maxFileSize,surroundingContext:t.surroundingContext};return this.provideTextSearchResultsWithRgOptions(e,n,i,r)})).then(s=>({limitHit:s.some(o=>!!o&&o.limitHit)}))}provideTextSearchResultsWithRgOptions(e,t,i,r){return this.a.appendLine(`provideTextSearchResults ${e.pattern}, ${JSON.stringify({...t,folder:t.folderOptions.folder.toString()})}`),new Promise((s,n)=>{r.onCancellationRequested(()=>g());const o={...t,numThreads:this.b},a=rH(e,o),c=t.folderOptions.folder.fsPath,l=a.map(P=>P.match(/^-/)?P:`'${P}'`).join(" ");this.a.appendLine(`${I$} ${l}
 - cwd: ${c}`);let u=Jj.spawn(I$,a,{cwd:c});u.on("error",P=>{console.error(P),this.a.appendLine("Error: "+(P&&P.message)),n(Wx(new Bo(P&&P.message,_n.rgProcessError)))});let h=!1;const d=new iH(t.maxResults??eg,t.folderOptions.folder,G8(t.previewOptions));d.on("result",P=>{h=!0,y="",i.report(P)});let f=!1;const g=()=>{f=!0,u?.kill(),d?.cancel()};let v=!1;d.on("hitLimit",()=>{v=!0,g()});let y="";u.stdout.on("data",P=>{d.handleData(P),h||(y+=P)});let S=!1;u.stdout.once("data",()=>S=!0);let x="";u.stderr.on("data",P=>{const D=P.toString();this.a.appendLine(D),x.length+D.length<1e6&&(x+=D)}),u.on("close",()=>{if(this.a.appendLine(S?"Got data from stdout":"No data from stdout"),this.a.appendLine(h?"Got result from parser":"No result from parser"),y&&this.a.appendLine(`Got data without result: ${y}`),this.a.appendLine(""),f)s({limitHit:v});else{d.flush(),u=null;let P;x&&!S&&(P=eH(x))?n(Wx(new Bo(P.message,P.code))):s({limitHit:v})}})})}};function eH(e){const t=e.split(`
`),i=t[0].trim();if(t.some(s=>s.startsWith("regex parse error")))return new Bo(tH(t),_n.regexParseError);const r=i.match(/grep config error: unknown encoding: (.*)/);if(r)return new Bo(`Unknown encoding: ${r[1]}`,_n.unknownEncoding);if(i.startsWith("error parsing glob"))return new Bo(i.charAt(0).toUpperCase()+i.substr(1),_n.globParseError);if(i.startsWith("the literal"))return new Bo(i.charAt(0).toUpperCase()+i.substr(1),_n.invalidLiteral);if(i.startsWith("PCRE2: error compiling pattern"))return new Bo(i,_n.regexParseError)}function tH(e){const t=["Regex parse error"],i=e.filter(r=>r.startsWith("PCRE2:"));if(i.length>=1){const r=i[0].replace("PCRE2:","");if(r.indexOf(":")!==-1&&r.split(":").length>=2){const s=r.split(":")[1];t.push(":"+s)}}return t.join("")}var iH=class extends Qj{constructor(e,t,i){super(),this.g=e,this.h=t,this.j=i,this.a="",this.b=!1,this.c=!1,this.f=0,this.d=new Yj}cancel(){this.b=!0}flush(){this.k(this.d.end())}on(e,t){return super.on(e,t),this}handleData(e){if(this.b)return;const t=typeof e=="string"?e:this.d.write(e);this.k(t)}k(e){let t=e.indexOf(`
`);const i=this.a+e;if(t>=0)t+=this.a.length;else{this.a=i;return}let r=0;for(;t>=0;)this.m(i.substring(r,t).trim()),r=t+1,t=i.indexOf(`
`,r);this.a=i.substring(r)}m(e){if(this.b||!e)return;let t;try{t=JSON.parse(e)}catch{throw new Error(`malformed line from rg: ${e}`)}if(t.type==="match"){const i=uh(t.data.path),r=E.joinPath(this.h,i),s=this.n(t.data,r);this.p(s),this.c&&(this.cancel(),this.emit("hitLimit"))}else if(t.type==="context"){const i=uh(t.data.path),r=E.joinPath(this.h,i);this.o(t.data,r).forEach(n=>this.p(n))}}n(e,t){const i=e.line_number-1,r=uh(e.lines),s=Buffer.from(r);let n=0,o=0,a=i;e.submatches.length===0&&e.submatches.push(r.length?{start:0,end:1,match:{text:r[0]}}:{start:0,end:0,match:{text:""}});const c=mt(e.submatches.map((h,d)=>{if(this.c)return null;this.f++,this.f>=this.g&&(this.c=!0);const f=uh(h.match),g=s.slice(n,h.start).toString(),v=D$(g),y=v.numLines>0?v.lastLineLength:v.lastLineLength+o,S=D$(f),x=v.numLines+a,P=S.numLines+x,D=S.numLines>0?S.lastLineLength:S.lastLineLength+y;return n=h.end,o=D,a=P,new Lx(x,y,P,D)})),l=Hh(c,Ej),u=new _x(r,l,this.j);return new Hs(t,u.rangeLocations.map(h=>({sourceRange:E$(h.source),previewRange:E$(h.preview)})),u.previewText)}o(e,t){const i=uh(e.lines),r=e.line_number;return i.replace(/\r?\n$/,"").split(`
`).map((s,n)=>new Zp(t,s,r+n))}p(e){this.emit("result",e)}};function uh(e){return e.bytes?Buffer.from(e.bytes,"base64").toString():e.text}function D$(e){const t=/\n/g;let i=0,r=-1,s;for(;s=t.exec(e);)i++,r=s.index;const n=r>=0?e.length-r-1:e.length;return{numLines:i,lastLineLength:n}}function rH(e,t){const i=["--hidden","--no-require-git"];i.push(e.isCaseSensitive?"--case-sensitive":"--ignore-case");const{doubleStarIncludes:r,otherIncludes:s}=Nm(t.folderOptions.includes,o=>o.startsWith("**")?"doubleStarIncludes":"otherIncludes");if(s&&s.length){const o=new Set;s.forEach(a=>{o.add(a)}),i.push("-g","!*"),o.forEach(a=>{sH(a).map(Ac).forEach(c=>{i.push("-g",c)})})}r&&r.length&&r.forEach(o=>{i.push("-g",o)}),t.folderOptions.excludes.map(o=>typeof o=="string"?o:o.pattern).map(Ac).forEach(o=>i.push("-g",`!${o}`)),t.maxFileSize&&i.push("--max-filesize",t.maxFileSize+""),t.folderOptions.useIgnoreFiles.local?t.folderOptions.useIgnoreFiles.parent||i.push("--no-ignore-parent"):i.push("--no-ignore"),t.folderOptions.followSymlinks&&i.push("--follow"),t.folderOptions.encoding&&t.folderOptions.encoding!=="utf8"&&i.push("--encoding",t.folderOptions.encoding),t.numThreads&&i.push("--threads",`${t.numThreads}`),e.pattern==="--"&&(e.isRegExp=!0,e.pattern="\\-\\-"),e.isMultiline&&!e.isRegExp&&(e.pattern=un(e.pattern),e.isRegExp=!0),t.usePCRE2&&i.push("--pcre2"),i.push("--crlf"),e.isRegExp&&(e.pattern=nH(e.pattern),i.push("--engine","auto"));let n;if(e.isWordMatch){const a=k5(e.pattern,!!e.isRegExp,{wholeWord:e.isWordMatch}).source.replace(/\\\//g,"/");i.push("--regexp",a)}else if(e.isRegExp){let o=oH(e.pattern);o=aH(o),i.push("--regexp",o)}else n=e.pattern,i.push("--fixed-strings");return i.push("--no-config"),t.folderOptions.useIgnoreFiles.global||i.push("--no-ignore-global"),i.push("--json"),e.isMultiline&&i.push("--multiline"),t.surroundingContext&&(i.push("--before-context",t.surroundingContext+""),i.push("--after-context",t.surroundingContext+"")),i.push("--"),n&&i.push(n),i.push("."),i}function sH(e){return R$(e).flatMap(i=>{const r=Ml(i,"/");return r.map((s,n)=>r.slice(0,n+1).join("/"))})}function nH(e){const t=/((?:[^\\]|^)(?:\\\\)*)\\u([a-z0-9]{4})/gi;for(;e.match(t);)e=e.replace(t,"$1\\x{$2}");const i=/((?:[^\\]|^)(?:\\\\)*)\\u\{([a-z0-9]{4})\}/gi;for(;e.match(i);)e=e.replace(i,"$1\\x{$2}");return e}var A$=e=>e.type==="Assertion"&&e.kind==="lookbehind";function oH(e){let t;try{t=new Xj().parsePattern(e)}catch{return e}let i="",r=0;const s=(a,c,l)=>{i+=e.slice(r,a)+l,r=c},n=[];return new Zj({onCharacterEnter(a){if(a.raw!=="\\n")return;const c=n[0];if(!c)s(a.start,a.end,"\\r?\\n");else if(!n.some(A$))if(c.type==="CharacterClass")if(c.negate){const l=e.slice(c.start+2,a.start)+e.slice(a.end,c.end-1);c.parent?.type==="Quantifier"?s(c.start,c.end,l?`[^${l}]`:"."):s(c.start,c.end,"(?!\\r?\\n"+(l?`|[${l}]`:"")+")")}else{const l=e.slice(c.start+1,a.start)+e.slice(a.end,c.end-1);s(c.start,c.end,l===""?"\\r?\\n":`(?:[${l}]|\\r?\\n)`)}else c.type==="Quantifier"&&s(a.start,a.end,"(?:\\r?\\n)")},onQuantifierEnter(a){n.unshift(a)},onQuantifierLeave(){n.shift()},onCharacterClassRangeEnter(a){n.unshift(a)},onCharacterClassRangeLeave(){n.shift()},onCharacterClassEnter(a){n.unshift(a)},onCharacterClassLeave(){n.shift()},onAssertionEnter(a){A$(a)&&n.push(a)},onAssertionLeave(a){n[0]===a&&n.shift()}}).visit(t),i+=e.slice(r),i}function aH(e){return e.replace(/\n/g,"\\r?\\n")}function cH(e){let t=!1,i=!1,r="",s="";for(let n=0;n<e.length;n++){const o=e[n];switch(o){case"\\":i?(t?s+="\\"+o:r+="\\"+o,i=!1):i=!0;break;case"{":if(i)t?s+=o:r+=o,i=!1;else{if(t)return{strInBraces:r+"{"+s+"{"+e.substring(n+1)};t=!0}break;case"}":if(i)t?s+=o:r+=o,i=!1;else{if(t)return{fixedStart:r,strInBraces:s,fixedEnd:e.substring(n+1)};r+=o}break;default:t?s+=(i?"\\":"")+o:r+=(i?"\\":"")+o,i=!1;break}}return{strInBraces:r+(t?"{"+s:"")}}function R$(e){const{fixedStart:t,strInBraces:i,fixedEnd:r}=cH(e);if(t===void 0||r===void 0)return[i];let s=Ml(i,",");s.length||(s=[""]);const n=R$(r);return s.flatMap(o=>{const a=t+o;return n.map(c=>a+c)})}var lH=class{constructor(e,t,i){this.id=e,this.dependencies=t,this.callback=i}},qo;(function(e){e[e.Uninitialized=1]="Uninitialized",e[e.InitializedInternal=2]="InitializedInternal",e[e.InitializedExternal=3]="InitializedExternal"})(qo||(qo={}));var lX=class JI{static{this.INSTANCE=new JI}constructor(){this.a=typeof self=="object"&&self.constructor&&self.constructor.name==="DedicatedWorkerGlobalScope",this.b=typeof document=="object",this.c=[],this.d=qo.Uninitialized}g(){if(this.d===qo.Uninitialized){if(globalThis.define){this.d=qo.InitializedExternal;return}}else return;this.d=qo.InitializedInternal,globalThis.define=(t,i,r)=>{typeof t!="string"&&(r=i,i=t,t=null),(typeof i!="object"||!Array.isArray(i))&&(r=i,i=null),this.c.push(new lH(t,i,r))},globalThis.define.amd=!0,this.b?this.f=globalThis._VSCODE_WEB_PACKAGE_TTP??window.trustedTypes?.createPolicy("amdLoader",{createScriptURL(t){if(t.startsWith(window.location.origin)||t.startsWith(`${z.vscodeFileResource}://${K5}`))return t;throw new Error(`[trusted_script_src] Invalid script url: ${t}`)}}):this.a&&(this.f=globalThis._VSCODE_WEB_PACKAGE_TTP??globalThis.trustedTypes?.createPolicy("amdLoader",{createScriptURL(t){return t}}))}async load(t){if(this.g(),this.d===qo.InitializedExternal)return new Promise(o=>{const a=Ht();globalThis.define(a,[t],function(c){o(c)})});const i=await(this.a?this.i(t):this.b?this.h(t):this.j(t));if(!i){console.warn(`Did not receive a define call from script ${t}`);return}const r={},s=[],n=[];if(Array.isArray(i.dependencies))for(const o of i.dependencies)o==="exports"?s.push(r):n.push(o);if(n.length>0)throw new Error(`Cannot resolve dependencies for script ${t}. The dependencies are: ${n.join(", ")}`);return typeof i.callback=="function"?i.callback(...s)??r:i.callback}h(t){return new Promise((i,r)=>{const s=document.createElement("script");s.setAttribute("async","async"),s.setAttribute("type","text/javascript");const n=()=>{s.removeEventListener("load",o),s.removeEventListener("error",a)},o=c=>{n(),i(this.c.pop())},a=c=>{n(),r(c)};s.addEventListener("load",o),s.addEventListener("error",a),this.f&&(t=this.f.createScriptURL(t)),s.setAttribute("src",t),window.document.getElementsByTagName("head")[0].appendChild(s)})}async i(t){return this.f&&(t=this.f.createScriptURL(t)),await import(t),this.c.pop()}async j(t){try{const i=(await import("fs")).default,r=(await import("vm")).default,s=(await import("module")).default,n=E.parse(t).fsPath,o=i.readFileSync(n).toString(),a=s.wrap(o.replace(/^#!.*/,""));return new r.Script(a).runInThisContext().apply(),this.c.pop()}catch(i){throw i}}},uX=512*8,hX=512*128,T$;(function(e){e[e.STREAM_IS_BINARY=1]="STREAM_IS_BINARY"})(T$||(T$={}));function uH(e){switch(e){case"shiftjis":return"shift-jis";case"utf16le":return"utf-16le";case"utf16be":return"utf-16be";case"big5hkscs":return"big5-hkscs";case"eucjp":return"euc-jp";case"euckr":return"euc-kr";case"koi8r":return"koi8-r";case"koi8u":return"koi8-u";case"macroman":return"x-mac-roman";case"utf8bom":return"utf8";default:{const t=e.match(/windows(\d+)/);return t?"windows-"+t[1]:e}}}var Qb={utf8:{labelLong:"UTF-8",labelShort:"UTF-8",order:1,alias:"utf8bom",guessableName:"UTF-8"},utf8bom:{labelLong:"UTF-8 with BOM",labelShort:"UTF-8 with BOM",encodeOnly:!0,order:2,alias:"utf8"},utf16le:{labelLong:"UTF-16 LE",labelShort:"UTF-16 LE",order:3,guessableName:"UTF-16LE"},utf16be:{labelLong:"UTF-16 BE",labelShort:"UTF-16 BE",order:4,guessableName:"UTF-16BE"},windows1252:{labelLong:"Western (Windows 1252)",labelShort:"Windows 1252",order:5,guessableName:"windows-1252"},iso88591:{labelLong:"Western (ISO 8859-1)",labelShort:"ISO 8859-1",order:6},iso88593:{labelLong:"Western (ISO 8859-3)",labelShort:"ISO 8859-3",order:7},iso885915:{labelLong:"Western (ISO 8859-15)",labelShort:"ISO 8859-15",order:8},macroman:{labelLong:"Western (Mac Roman)",labelShort:"Mac Roman",order:9},cp437:{labelLong:"DOS (CP 437)",labelShort:"CP437",order:10},windows1256:{labelLong:"Arabic (Windows 1256)",labelShort:"Windows 1256",order:11},iso88596:{labelLong:"Arabic (ISO 8859-6)",labelShort:"ISO 8859-6",order:12},windows1257:{labelLong:"Baltic (Windows 1257)",labelShort:"Windows 1257",order:13},iso88594:{labelLong:"Baltic (ISO 8859-4)",labelShort:"ISO 8859-4",order:14},iso885914:{labelLong:"Celtic (ISO 8859-14)",labelShort:"ISO 8859-14",order:15},windows1250:{labelLong:"Central European (Windows 1250)",labelShort:"Windows 1250",order:16,guessableName:"windows-1250"},iso88592:{labelLong:"Central European (ISO 8859-2)",labelShort:"ISO 8859-2",order:17,guessableName:"ISO-8859-2"},cp852:{labelLong:"Central European (CP 852)",labelShort:"CP 852",order:18},windows1251:{labelLong:"Cyrillic (Windows 1251)",labelShort:"Windows 1251",order:19,guessableName:"windows-1251"},cp866:{labelLong:"Cyrillic (CP 866)",labelShort:"CP 866",order:20,guessableName:"IBM866"},iso88595:{labelLong:"Cyrillic (ISO 8859-5)",labelShort:"ISO 8859-5",order:21,guessableName:"ISO-8859-5"},koi8r:{labelLong:"Cyrillic (KOI8-R)",labelShort:"KOI8-R",order:22,guessableName:"KOI8-R"},koi8u:{labelLong:"Cyrillic (KOI8-U)",labelShort:"KOI8-U",order:23},iso885913:{labelLong:"Estonian (ISO 8859-13)",labelShort:"ISO 8859-13",order:24},windows1253:{labelLong:"Greek (Windows 1253)",labelShort:"Windows 1253",order:25,guessableName:"windows-1253"},iso88597:{labelLong:"Greek (ISO 8859-7)",labelShort:"ISO 8859-7",order:26,guessableName:"ISO-8859-7"},windows1255:{labelLong:"Hebrew (Windows 1255)",labelShort:"Windows 1255",order:27,guessableName:"windows-1255"},iso88598:{labelLong:"Hebrew (ISO 8859-8)",labelShort:"ISO 8859-8",order:28,guessableName:"ISO-8859-8"},iso885910:{labelLong:"Nordic (ISO 8859-10)",labelShort:"ISO 8859-10",order:29},iso885916:{labelLong:"Romanian (ISO 8859-16)",labelShort:"ISO 8859-16",order:30},windows1254:{labelLong:"Turkish (Windows 1254)",labelShort:"Windows 1254",order:31},iso88599:{labelLong:"Turkish (ISO 8859-9)",labelShort:"ISO 8859-9",order:32},windows1258:{labelLong:"Vietnamese (Windows 1258)",labelShort:"Windows 1258",order:33},gbk:{labelLong:"Simplified Chinese (GBK)",labelShort:"GBK",order:34},gb18030:{labelLong:"Simplified Chinese (GB18030)",labelShort:"GB18030",order:35},cp950:{labelLong:"Traditional Chinese (Big5)",labelShort:"Big5",order:36,guessableName:"Big5"},big5hkscs:{labelLong:"Traditional Chinese (Big5-HKSCS)",labelShort:"Big5-HKSCS",order:37},shiftjis:{labelLong:"Japanese (Shift JIS)",labelShort:"Shift JIS",order:38,guessableName:"SHIFT_JIS"},eucjp:{labelLong:"Japanese (EUC-JP)",labelShort:"EUC-JP",order:39,guessableName:"EUC-JP"},euckr:{labelLong:"Korean (EUC-KR)",labelShort:"EUC-KR",order:40,guessableName:"EUC-KR"},windows874:{labelLong:"Thai (Windows 874)",labelShort:"Windows 874",order:41},iso885911:{labelLong:"Latin/Thai (ISO 8859-11)",labelShort:"ISO 8859-11",order:42},koi8ru:{labelLong:"Cyrillic (KOI8-RU)",labelShort:"KOI8-RU",order:43},koi8t:{labelLong:"Tajik (KOI8-T)",labelShort:"KOI8-T",order:44},gb2312:{labelLong:"Simplified Chinese (GB 2312)",labelShort:"GB 2312",order:45,guessableName:"GB2312"},cp865:{labelLong:"Nordic DOS (CP 865)",labelShort:"CP 865",order:46},cp850:{labelLong:"Western European DOS (CP 850)",labelShort:"CP 850",order:47}},dX=(()=>{const e={};for(const t in Qb)Qb[t].guessableName&&(e[t]=Qb[t]);return e})(),L$=class extends Pb{constructor(e,t,i=fd,r="searchProcess"){super({query:e,provider:t},{readdir:s=>i.Promises.readdir(s.fsPath),toCanonicalName:s=>uH(s)},r)}},hH=class{constructor(e,t){this.a=e,this.b=t}search(e,t,i){if((!this.a.folderQueries||!this.a.folderQueries.length)&&(!this.a.extraFileResources||!this.a.extraFileResources.length))return Promise.resolve({type:"success",limitHit:!1,stats:{type:"searchProcess"},messages:[]});const r={appendLine(n){i({message:n})}},s=new L$(this.a,new P$(r,this.b),fd);return new Promise((n,o)=>s.search(a=>{t(a.map(dH))},e).then(a=>n({limitHit:a.limitHit??!1,type:"success",stats:a.stats,messages:[]}),o))}};function dH(e){return{path:e.resource&&e.resource.fsPath,results:e.results,numMatches:(e.results||[]).reduce((t,i)=>pw(i)?t+i.rangeLocations.length:t+1,0)}}var fH=class sa{static{this.a=512}constructor(t="searchProcess",i){this.d=t,this.f=i,this.b=Object.create(null)}folderSearch(t){let i;const r=Yb(t),s=new I({onDidAddFirstListener:()=>{i=Qr(async n=>{const o=await this.f?.();return this.doFileSearchWithEngine(Gb,r,a=>s.fire(a),n,sa.a,o)}),i.then(n=>s.fire(n),n=>s.fire({type:"error",error:{message:n.message,stack:n.stack}}))},onDidRemoveLastListener:()=>{i.cancel()}});return s.event}fileSearch(t){let i;const r=Yb(t),s=new I({onDidAddFirstListener:()=>{i=Qr(async n=>{const o=await this.f?.();return this.doFileSearchWithEngine(Gb,r,a=>s.fire(a),n,sa.a,o)}),i.then(n=>s.fire(n),n=>s.fire({type:"error",error:{message:n.message,stack:n.stack}}))},onDidRemoveLastListener:()=>{i.cancel()}});return s.event}textSearch(t){let i;const r=Yb(t),s=new I({onDidAddFirstListener:()=>{i=Qr(n=>this.g(r,o=>s.fire(o),n)),i.then(n=>s.fire(n),n=>s.fire({type:"error",error:{message:n.message,stack:n.stack}}))},onDidRemoveLastListener:()=>{i.cancel()}});return s.event}async g(t,i,r){t.maxFileSize=this.h().maxFileSize;const s=await this.f?.();return new hH(t,s).search(r,i,i)}h(){return{maxFileSize:16*m7.GB}}doFileSearch(t,i,r,s){return this.doFileSearchWithEngine(Gb,t,r,s,sa.a,i)}doFileSearchWithEngine(t,i,r,s,n=sa.a,o){let a=0;const c=u=>{Array.isArray(u)?(a+=u.length,r(u.map(h=>this.j(h)))):u.relativePath?(a++,r(this.j(u))):r(u)};if(i.sortByScore){let u=this.n(i,c,s);if(!u){const h=i.maxResults?Object.assign({},i,{maxResults:null}):i,d=new t(h,o);u=this.k(d,i,r,c,s)}return new Promise((h,d)=>{u.then(([f,g])=>{const v=g.map(y=>this.j(y));this.q(v,r,n),h(f)},d)})}const l=new t(i,o);return this.s(l,c,n,s).then(u=>({limitHit:u.limitHit,type:"success",stats:{detailStats:u.stats,type:this.d,fromCache:!1,resultCount:a,sortingTime:void 0},messages:[]}))}doFolderSearch(t,i,r,s){return this.doFolderSearchWithEngine(Vj,t,r,s,sa.a,i)}doFolderSearchWithEngine(t,i,r,s,n=sa.a,o){let a=0;const c=u=>{Array.isArray(u)?(a+=u.length,r(u.map(h=>this.j(h)))):u.relativePath?(a++,r(this.j(u))):r(u)};if(i.sortByScore){let u=this.n(i,c,s);if(!u){const h=i.maxResults?Object.assign({},i,{maxResults:null}):i,d=new t(h,o);u=this.k(d,i,r,c,s)}return new Promise((h,d)=>{u.then(([f,g])=>{const v=g.map(y=>this.j(y));this.q(v,r,n),h(f)},d)})}const l=new t(i,o);return this.s(l,c,n,s).then(u=>({limitHit:u.limitHit,type:"success",stats:{detailStats:u.stats,type:this.d,fromCache:!1,resultCount:a,sortingTime:void 0},messages:[]}))}j(t){return{path:t.base?rt(t.base,t.relativePath):t.relativePath}}k(t,i,r,s,n){const o=new I;let a=Qr(l=>{let u=[];const h=d=>{Array.isArray(d)?u=d:(s(d),o.fire(d))};return this.s(t,h,-1,l).then(d=>[d,u])}),c;if(i.cacheKey){c=this.l(i.cacheKey);const l={promise:a,event:o.event,resolved:!1};c.resultsToSearchCache[i.filePattern||""]=l,a.then(()=>{l.resolved=!0},u=>{delete c.resultsToSearchCache[i.filePattern||""]}),a=this.t(a)}return a.then(([l,u])=>{const h=c?c.scorerCache:Object.create(null),d=(typeof i.maxResults!="number"||i.maxResults>0)&&ri.create(!1);return this.o(i,u,h,n).then(f=>{const g=d?d.elapsed():-1;return[{type:"success",stats:{detailStats:l.stats,sortingTime:g,fromCache:!1,type:this.d,resultCount:f.length},messages:l.messages,limitHit:l.limitHit||typeof i.maxResults=="number"&&u.length>i.maxResults},f]})})}l(t){const i=this.b[t];return i||(this.b[t]=new pH)}n(t,i,r){const s=t.cacheKey&&this.b[t.cacheKey];if(!s)return;const n=this.r(s,t.filePattern||"",i,r);if(n)return n.then(([o,a,c])=>{const l=ri.create(!1);return this.o(t,a,s.scorerCache,r).then(u=>{const h=l.elapsed(),d={fromCache:!0,detailStats:c,type:this.d,resultCount:a.length,sortingTime:h};return[{type:"success",limitHit:o.limitHit||typeof t.maxResults=="number"&&a.length>t.maxResults,stats:d,messages:[]},u]})})}o(t,i,r,s){const n=Ng(t.filePattern||""),o=(c,l)=>gj(c,l,n,!0,gH,r),a=typeof t.maxResults=="number"?t.maxResults:eg;return aD(i,o,a,1e4,s)}q(t,i,r){if(r&&r>0)for(let s=0;s<t.length;s+=r)i(t.slice(s,s+r));else i(t)}r(t,i,r,s){const n=ri.create(!1),o=i.indexOf(ft)>=0;let a;for(const h in t.resultsToSearchCache)if(i.startsWith(h)){if(o&&h.indexOf(ft)<0&&h!=="")continue;const d=t.resultsToSearchCache[h];a={promise:this.t(d.promise),event:d.event,resolved:d.resolved};break}if(!a)return null;const c=n.elapsed(),l=ri.create(!1),u=a.event(r);return s&&s.onCancellationRequested(()=>{u.dispose()}),a.promise.then(([h,d])=>{if(s&&s.isCancellationRequested)throw Qc();const f=[],g=Ng(i).normalizedLowercase;for(const v of d)ju(v,g)&&f.push(v);return[h,f,{cacheWasResolved:a.resolved,cacheLookupTime:c,cacheFilterTime:l.elapsed(),cacheEntryCount:d.length}]})}s(t,i,r,s){return new Promise((n,o)=>{let a=[];s?.onCancellationRequested(()=>t.cancel()),t.search(c=>{c&&(r?(a.push(c),r>0&&a.length>=r&&(i(a),a=[])):i(c))},c=>{i(c)},(c,l)=>{a.length&&i(a),c?(i({message:"Search finished. Error: "+c.message}),o(c)):(i({message:"Search finished. Stats: "+JSON.stringify(l.stats)}),n(l))})})}clearCache(t){return delete this.b[t],Promise.resolve(void 0)}t(t){return new class{get[Symbol.toStringTag](){return this.toString()}cancel(){}then(i,r){return t.then(i,r)}catch(i){return this.then(void 0,i)}finally(i){return t.finally(i)}}}},pH=class{constructor(){this.resultsToSearchCache=Object.create(null),this.scorerCache=Object.create(null)}},gH=new class{getItemLabel(e){return ut(e.relativePath)}getItemDescription(e){return wi(e.relativePath)}getItemPath(e){return e.relativePath}};function Yb(e){return{...e,folderQueries:e.folderQueries&&e.folderQueries.map(mH),extraFileResources:e.extraFileResources&&e.extraFileResources.map(t=>E.revive(t))}}function mH(e){return oi(e)}var N$=class{constructor(e,t){this.b=e,this.c=t,this.a=new Set,process.once("exit",()=>this.f())}async provideTextSearchResults(e,t,i,r){const s=await this.c(),n=new P$(this.b,s);return Promise.all(t.folderOptions.map(o=>{const a={folderOptions:o,numThreads:s,maxResults:t.maxResults,previewOptions:t.previewOptions,maxFileSize:t.maxFileSize,surroundingContext:t.surroundingContext};if(o.folder.scheme===z.vscodeUserData){const c={...a,folder:o.folder.with({scheme:z.file})},l=new hg(u=>i.report({...u,uri:u.uri.with({scheme:o.folder.scheme})}));return this.d(r,u=>n.provideTextSearchResultsWithRgOptions(e,c,l,u))}else return this.d(r,c=>n.provideTextSearchResultsWithRgOptions(e,a,i,c))})).then(o=>({limitHit:o.some(c=>!!c&&c.limitHit)}))}async d(e,t){const i=vH(e);this.a.add(i);const r=await t(i.token);return this.a.delete(i),r}f(){this.a.forEach(e=>e.cancel())}};function vH(e){const t=new lt;return e.onCancellationRequested(()=>t.cancel()),t}var Xb=class extends Cg{constructor(t,i,r,s,n){super(t,r,n),this.J=s,this.A=fd,this.B=-1,this.C=null,this.D=-1,this.E=null,this.F=!1,this.H=new ue,this.I=!1,this.getNumThreads=this.getNumThreads.bind(this),this.getNumThreadsCached=this.getNumThreadsCached.bind(this),this.K=this.K.bind(this);const o=new Og("RipgrepSearchUD",this.v);this.H.add(this.registerTextSearchProvider(z.vscodeUserData,new N$(o,this.getNumThreadsCached))),i.remote.isRemote&&i.remote.authority&&this.L(),s.getConfigProvider().then(a=>{this.I||this.H.add(a.onDidChangeConfiguration(this.K))})}K(t){t.affectsConfiguration("search")&&(this.G=void 0)}async getNumThreads(){return(await this.J.getConfigProvider()).getConfiguration("search").get("ripgrep.maxThreads")}async getNumThreadsCached(){return this.G||(this.G=this.getNumThreads()),this.G}dispose(){this.I=!0,this.H.dispose()}$enableExtensionHostSearch(){this.L()}L(){if(this.F)return;this.F=!0;const t=new Og("RipgrepSearchEH",this.v);this.H.add(this.registerTextSearchProvider(z.file,new N$(t,this.getNumThreadsCached)));const i=new fH("fileSearchProvider",this.getNumThreadsCached);this.H.add(this.M(z.file,i)),this.H.add(this.N(z.file,i))}M(t,i){const r=this.e++;return this.C=i,this.B=r,this.c.$registerFileSearchProvider(r,this.w(t)),ee(()=>{this.C=null,this.c.$unregisterProvider(r)})}N(t,i){const r=this.e++;return this.E=i,this.D=r,this.c.$registerFolderSearchProvider(r,this.w(t)),ee(()=>{this.E=null,this.c.$unregisterProvider(r)})}$provideFileSearchResults(t,i,r,s){const n=Ic(r);if(t===this.B){const o=Date.now();return this.P(t,i,n,s).then(a=>{const c=Date.now()-o;return this.v.debug(`Ext host file search time: ${c}ms`),a})}return super.$provideFileSearchResults(t,i,r,s)}$provideFolderSearchResults(t,i,r,s){const n=Ic(r);if(t===this.D){const o=Date.now();return this.O(t,i,n,s).then(a=>{const c=Date.now()-o;return this.v.info(`Ext host folder search time: ${c}ms`),a})}return super.$provideFolderSearchResults(t,i,r,s)}async doInternalFileSearchWithCustomCallback(t,i,r){const s=o=>{if(zx(o)&&(o=[o]),Array.isArray(o)){r(o.map(a=>E.file(a.path)));return}o.message&&this.v.debug("ExtHostSearch",o.message)};if(!this.C)throw new Error("No internal file search handler");const n=await this.getNumThreadsCached();return this.C.doFileSearch(t,n,s,i)}async doInternalFolderSearchWithCustomCallback(t,i,r){const s=o=>{if(zx(o)&&(o=[o]),Array.isArray(o)){r(o.map(a=>E.file(a.path)));return}o.message&&this.v.debug("ExtHostSearch",o.message)};if(!this.C)throw new Error("No internal folder search handler");const n=await this.getNumThreadsCached();return this.C.doFolderSearch(t,n,s,i)}async O(t,i,r,s){return this.doInternalFolderSearchWithCustomCallback(r,s,n=>{this.c.$handleIcubeFolderMatch(t,i,n)})}async P(t,i,r,s){return this.doInternalFileSearchWithCustomCallback(r,s,n=>{this.c.$handleFileMatch(t,i,n)})}$clearCache(t){return this.C?.clearCache(t),super.$clearCache(t)}y(t,i){return new L$(t,i,void 0,"textSearchProvider")}};Xb=__decorate([__param(0,Ie),__param(1,Qt),__param(2,bl),__param(3,gr),__param(4,Ce)],Xb);import*as wH from"fs";function O$(e,t,i,r,s,n){if(Array.isArray(e)){let o=0;for(const a of e){const c=O$(a,t,i,r,s,n);if(c===10)return c;c>o&&(o=c)}return o}else{if(typeof e=="string")return r?e==="*"?5:e===i?10:0:0;if(e){const{language:o,pattern:a,scheme:c,hasAccessToAllModels:l,notebookType:u}=e;if(!r&&!l)return 0;u&&s&&(t=s);let h=0;if(c)if(c===t.scheme)h=10;else if(c==="*")h=5;else return 0;if(o)if(o===i)h=10;else if(o==="*")h=Math.max(h,5);else return 0;if(u)if(u===n)h=10;else if(u==="*"&&n!==void 0)h=Math.max(h,5);else return 0;if(a){let d;if(typeof a=="string"?d=a:d={...a,base:ys(a.base)},d===t.fsPath||Na(d,t.fsPath))h=10;else return 0}return h}else return 0}}function F$(e){return typeof e=="string"?!1:Array.isArray(e)?e.some(F$):!!e.notebookType}var Zb;(function(e){e[e.None=0]="None",e[e.Indent=1]="Indent",e[e.IndentOutdent=2]="IndentOutdent",e[e.Outdent=3]="Outdent"})(Zb||(Zb={}));var pX=V("editSessionIdentityService"),Kb;(function(e){e[e.Complete=100]="Complete",e[e.Partial=50]="Partial",e[e.None=0]="None"})(Kb||(Kb={}));var bH=class{constructor(e){this.a=new Map,this.b=0,this.c=e.getProxy(q.MainThreadAiRelatedInformation)}async $provideAiRelatedInformation(e,t,i){if(this.a.size===0)throw new Error("No related information providers registered");const r=this.a.get(e);if(!r)throw new Error("related information provider not found");return await r.provideRelatedInformation(t,i)??[]}getRelatedInformation(e,t,i){return this.c.$getAiRelatedInformation(t,i)}registerRelatedInformationProvider(e,t,i){const r=this.b;return this.b++,this.a.set(r,i),this.c.$registerAiRelatedInformationProvider(r,t),new Oe(()=>{this.c.$unregisterAiRelatedInformationProvider(r),this.a.delete(r)})}},M$;(function(e){e[e.Full=1]="Full",e[e.Delta=2]="Delta"})(M$||(M$={}));function U$(e){for(let t=0,i=e.length;t<i;t+=4){const r=e[t+0],s=e[t+1],n=e[t+2],o=e[t+3];e[t+0]=o,e[t+1]=n,e[t+2]=s,e[t+3]=r}}function yH(e){const t=new Uint8Array(e.buffer,e.byteOffset,e.length*4);return w5()||U$(t),J.wrap(t)}function EH(e){const t=e.buffer;if(w5()||U$(t),t.byteOffset%4===0)return new Uint32Array(t.buffer,t.byteOffset,t.length/4);{const i=new Uint8Array(t.byteLength);return i.set(t),new Uint32Array(i.buffer,i.byteOffset,i.length/4)}}function ey(e){const t=new Uint32Array(SH(e));let i=0;if(t[i++]=e.id,e.type==="full")t[i++]=1,t[i++]=e.data.length,t.set(e.data,i),i+=e.data.length;else{t[i++]=2,t[i++]=e.deltas.length;for(const r of e.deltas)t[i++]=r.start,t[i++]=r.deleteCount,r.data?(t[i++]=r.data.length,t.set(r.data,i),i+=r.data.length):t[i++]=0}return yH(t)}function SH(e){let t=0;if(t+=2,e.type==="full")t+=1+e.data.length;else{t+=1,t+=3*e.deltas.length;for(const i of e.deltas)i.data&&(t+=i.data.length)}return t}function _$(e){const t=EH(e);let i=0;const r=t[i++];if(t[i++]===1){const a=t[i++],c=t.subarray(i,i+a);return i+=a,{id:r,type:"full",data:c}}const n=t[i++],o=[];for(let a=0;a<n;a++){const c=t[i++],l=t[i++],u=t[i++];let h;u>0&&(h=t.subarray(i,i+u),i+=u),o[a]={start:c,deleteCount:l,data:h}}return{id:r,type:"delta",deltas:o}}var xH=[new me("vscode.executeDocumentHighlights","_executeDocumentHighlights","Execute document highlight provider.",[U.Uri,U.Position],new ge("A promise that resolves to an array of DocumentHighlight-instances.",Ur(cc.to))),new me("vscode.executeDocumentSymbolProvider","_executeDocumentSymbolProvider","Execute document symbol provider.",[U.Uri],new ge("A promise that resolves to an array of SymbolInformation and DocumentSymbol instances.",(e,t)=>{if(Um(e))return;class i extends ql{static to(s){const n=new i(s.name,fr.to(s.kind),s.containerName||"",new tr(t[0],O.to(s.range)));return n.detail=s.detail,n.range=n.location.range,n.selectionRange=O.to(s.selectionRange),n.children=s.children?s.children.map(i.to):[],n}}return e.map(i.to)})),new me("vscode.executeFormatDocumentProvider","_executeFormatDocumentProvider","Execute document format provider.",[U.Uri,new U("options","Formatting options",e=>!0,e=>e)],new ge("A promise that resolves to an array of TextEdits.",Ur(It.to))),new me("vscode.executeFormatRangeProvider","_executeFormatRangeProvider","Execute range format provider.",[U.Uri,U.Range,new U("options","Formatting options",e=>!0,e=>e)],new ge("A promise that resolves to an array of TextEdits.",Ur(It.to))),new me("vscode.executeFormatOnTypeProvider","_executeFormatOnTypeProvider","Execute format on type provider.",[U.Uri,U.Position,new U("ch","Trigger character",e=>typeof e=="string",e=>e),new U("options","Formatting options",e=>!0,e=>e)],new ge("A promise that resolves to an array of TextEdits.",Ur(It.to))),new me("vscode.executeDefinitionProvider","_executeDefinitionProvider","Execute all definition providers.",[U.Uri,U.Position],new ge("A promise that resolves to an array of Location or LocationLink instances.",Wn)),new me("vscode.experimental.executeDefinitionProvider_recursive","_executeDefinitionProvider_recursive","Execute all definition providers.",[U.Uri,U.Position],new ge("A promise that resolves to an array of Location or LocationLink instances.",Wn)),new me("vscode.executeTypeDefinitionProvider","_executeTypeDefinitionProvider","Execute all type definition providers.",[U.Uri,U.Position],new ge("A promise that resolves to an array of Location or LocationLink instances.",Wn)),new me("vscode.experimental.executeTypeDefinitionProvider_recursive","_executeTypeDefinitionProvider_recursive","Execute all type definition providers.",[U.Uri,U.Position],new ge("A promise that resolves to an array of Location or LocationLink instances.",Wn)),new me("vscode.executeDeclarationProvider","_executeDeclarationProvider","Execute all declaration providers.",[U.Uri,U.Position],new ge("A promise that resolves to an array of Location or LocationLink instances.",Wn)),new me("vscode.experimental.executeDeclarationProvider_recursive","_executeDeclarationProvider_recursive","Execute all declaration providers.",[U.Uri,U.Position],new ge("A promise that resolves to an array of Location or LocationLink instances.",Wn)),new me("vscode.executeImplementationProvider","_executeImplementationProvider","Execute all implementation providers.",[U.Uri,U.Position],new ge("A promise that resolves to an array of Location or LocationLink instances.",Wn)),new me("vscode.experimental.executeImplementationProvider_recursive","_executeImplementationProvider_recursive","Execute all implementation providers.",[U.Uri,U.Position],new ge("A promise that resolves to an array of Location or LocationLink instances.",Wn)),new me("vscode.executeReferenceProvider","_executeReferenceProvider","Execute all reference providers.",[U.Uri,U.Position],new ge("A promise that resolves to an array of Location-instances.",Ur(Li.to))),new me("vscode.experimental.executeReferenceProvider","_executeReferenceProvider_recursive","Execute all reference providers.",[U.Uri,U.Position],new ge("A promise that resolves to an array of Location-instances.",Ur(Li.to))),new me("vscode.executeHoverProvider","_executeHoverProvider","Execute all hover providers.",[U.Uri,U.Position],new ge("A promise that resolves to an array of Hover-instances.",Ur(Cu.to))),new me("vscode.experimental.executeHoverProvider_recursive","_executeHoverProvider_recursive","Execute all hover providers.",[U.Uri,U.Position],new ge("A promise that resolves to an array of Hover-instances.",Ur(Cu.to))),new me("vscode.executeSelectionRangeProvider","_executeSelectionRangeProvider","Execute selection range provider.",[U.Uri,new U("position","A position in a text document",e=>Array.isArray(e)&&e.every(t=>Pe.isPosition(t)),e=>e.map(Fe.from))],new ge("A promise that resolves to an array of ranges.",e=>e.map(t=>{let i;for(const r of t.reverse())i=new Ql(O.to(r),i);return i}))),new me("vscode.executeWorkspaceSymbolProvider","_executeWorkspaceSymbolProvider","Execute all workspace symbol providers.",[U.String.with("query","Search string")],new ge("A promise that resolves to an array of SymbolInformation-instances.",e=>e.map(Mo.to))),new me("vscode.prepareCallHierarchy","_executePrepareCallHierarchy","Prepare call hierarchy at a position inside a document",[U.Uri,U.Position],new ge("A promise that resolves to an array of CallHierarchyItem-instances",e=>e.map(Uo.to))),new me("vscode.provideIncomingCalls","_executeProvideIncomingCalls","Compute incoming calls for an item",[U.CallHierarchyItem],new ge("A promise that resolves to an array of CallHierarchyIncomingCall-instances",e=>e.map(j0.to))),new me("vscode.provideOutgoingCalls","_executeProvideOutgoingCalls","Compute outgoing calls for an item",[U.CallHierarchyItem],new ge("A promise that resolves to an array of CallHierarchyOutgoingCall-instances",e=>e.map(H0.to))),new me("vscode.prepareRename","_executePrepareRename","Execute the prepareRename of rename provider.",[U.Uri,U.Position],new ge("A promise that resolves to a range and placeholder text.",e=>{if(e)return{range:O.to(e.range),placeholder:e.text}})),new me("vscode.executeDocumentRenameProvider","_executeDocumentRenameProvider","Execute rename provider.",[U.Uri,U.Position,U.String.with("newName","The new symbol name")],new ge("A promise that resolves to a WorkspaceEdit.",e=>{if(e){if(e.rejectReason)throw new Error(e.rejectReason);return fi.to(e)}})),new me("vscode.executeLinkProvider","_executeLinkProvider","Execute document link provider.",[U.Uri,U.Number.with("linkResolveCount","Number of links that should be resolved, only when links are unresolved.").optional()],new ge("A promise that resolves to an array of DocumentLink-instances.",e=>e.map(_o.to))),new me("vscode.provideDocumentSemanticTokensLegend","_provideDocumentSemanticTokensLegend","Provide semantic tokens legend for a document",[U.Uri],new ge("A promise that resolves to SemanticTokensLegend.",e=>{if(e)return new s0(e.tokenTypes,e.tokenModifiers)})),new me("vscode.provideDocumentSemanticTokens","_provideDocumentSemanticTokens","Provide semantic tokens for a document",[U.Uri],new ge("A promise that resolves to SemanticTokens.",e=>{if(!e)return;const t=_$(e);if(t.type==="full")return new Ka(t.data,void 0)})),new me("vscode.provideDocumentRangeSemanticTokensLegend","_provideDocumentRangeSemanticTokensLegend","Provide semantic tokens legend for a document range",[U.Uri,U.Range.optional()],new ge("A promise that resolves to SemanticTokensLegend.",e=>{if(e)return new s0(e.tokenTypes,e.tokenModifiers)})),new me("vscode.provideDocumentRangeSemanticTokens","_provideDocumentRangeSemanticTokens","Provide semantic tokens for a document range",[U.Uri,U.Range],new ge("A promise that resolves to SemanticTokens.",e=>{if(!e)return;const t=_$(e);if(t.type==="full")return new Ka(t.data,void 0)})),new me("vscode.executeCompletionItemProvider","_executeCompletionItemProvider","Execute completion item provider.",[U.Uri,U.Position,U.String.with("triggerCharacter","Trigger completion when the user types the character, like `,` or `(`").optional(),U.Number.with("itemResolveCount","Number of completions to resolve (too large numbers slow down completions)").optional()],new ge("A promise that resolves to a CompletionList-instance.",(e,t,i)=>{if(!e)return new Ha([]);const r=e.suggestions.map(s=>q0.to(s,i));return new Ha(r,e.incomplete)})),new me("vscode.executeSignatureHelpProvider","_executeSignatureHelpProvider","Execute signature help provider.",[U.Uri,U.Position,U.String.with("triggerCharacter","Trigger signature help when the user types the character, like `,` or `(`").optional()],new ge("A promise that resolves to SignatureHelp.",e=>{if(e)return Pu.to(e)})),new me("vscode.executeCodeLensProvider","_executeCodeLensProvider","Execute code lens provider.",[U.Uri,U.Number.with("itemResolveCount","Number of lenses that should be resolved and returned. Will only return resolved lenses, will impact performance)").optional()],new ge("A promise that resolves to an array of CodeLens-instances.",(e,t,i)=>Ur(r=>new If(O.to(r.range),r.command&&i.fromInternal(r.command)))(e))),new me("vscode.executeCodeActionProvider","_executeCodeActionProvider","Execute code action provider.",[U.Uri,new U("rangeOrSelection","Range in a text document. Some refactoring provider requires Selection object.",e=>Se.isRange(e),e=>Ls.isSelection(e)?Ti.from(e):O.from(e)),U.String.with("kind","Code action kind to return code actions for").optional(),U.Number.with("itemResolveCount","Number of code actions to resolve (too large numbers slow down code actions)").optional()],new ge("A promise that resolves to an array of Command-instances.",(e,t,i)=>Ur(r=>{if(r._isSynthetic){if(!r.command)throw new Error("Synthetic code actions must have a command");return i.fromInternal(r.command)}else{const s=new Cf(r.title,r.kind?new bt(r.kind):void 0);return r.edit&&(s.edit=fi.to(r.edit)),r.command&&(s.command=i.fromInternal(r.command)),s.isPreferred=r.isPreferred,s}})(e))),new me("vscode.executeDocumentColorProvider","_executeDocumentColorProvider","Execute document color provider.",[U.Uri],new ge("A promise that resolves to an array of ColorInformation objects.",e=>e?e.map(t=>new Lf(O.to(t.range),lc.to(t.color))):[])),new me("vscode.executeColorPresentationProvider","_executeColorPresentationProvider","Execute color presentation provider.",[new U("color","The color to show and insert",e=>e instanceof Va,lc.from),new U("context","Context object with uri and range",e=>!0,e=>({uri:e.uri,range:O.from(e.range)}))],new ge("A promise that resolves to an array of ColorPresentation objects.",e=>e?e.map(Cp.to):[])),new me("vscode.executeInlayHintProvider","_executeInlayHintProvider","Execute inlay hints provider",[U.Uri,U.Range],new ge("A promise that resolves to an array of Inlay objects",(e,t,i)=>e.map(G0.to.bind(void 0,i)))),new me("vscode.executeFoldingRangeProvider","_executeFoldingRangeProvider","Execute folding range provider",[U.Uri],new ge("A promise that resolves to an array of FoldingRange objects",(e,t)=>{if(e)return e.map(Pp.to)})),new me("vscode.resolveNotebookContentProviders","_resolveNotebookContentProvider","Resolve Notebook Content Providers",[],new ge("A promise that resolves to an array of NotebookContentProvider static info objects.",Ur(e=>({viewType:e.viewType,displayName:e.displayName,options:{transientOutputs:e.options.transientOutputs,transientCellMetadata:e.options.transientCellMetadata,transientDocumentMetadata:e.options.transientDocumentMetadata},filenamePattern:e.filenamePattern.map(t=>Rp.to(t))})))),new me("vscode.executeInlineValueProvider","_executeInlineValueProvider","Execute inline value provider",[U.Uri,U.Range,new U("context","An InlineValueContext",e=>e&&typeof e.frameId=="number"&&e.stoppedLocation instanceof Se,e=>Ep.from(e))],new ge("A promise that resolves to an array of InlineValue objects",e=>e.map(yp.to))),new me("vscode.open","_workbench.open","Opens the provided resource in the editor. Can be a text or binary file, or an http(s) URL. If you need more control over the options for opening a text file, use vscode.window.showTextDocument instead.",[new U("uriOrString","Uri-instance or string (only http/https)",e=>E.isUri(e)||typeof e=="string"&&QA(e,z.http,z.https),e=>e),new U("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="number"||typeof e=="object",e=>e&&(typeof e=="number"?[zt.from(e),void 0]:[zt.from(e.viewColumn),Du.from(e)])).optional(),U.String.with("label","").optional()],ge.Void),new me("vscode.openWith","_workbench.openWith","Opens the provided resource with a specific editor.",[U.Uri.with("resource","Resource to open"),U.String.with("viewId","Custom editor view id. This should be the viewType string for custom editors or the notebookType string for notebooks. Use 'default' to use VS Code's default text editor"),new U("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="number"||typeof e=="object",e=>e&&(typeof e=="number"?[zt.from(e),void 0]:[zt.from(e.viewColumn),Du.from(e)])).optional()],ge.Void),new me("vscode.diff","_workbench.diff","Opens the provided resources in the diff editor to compare their contents.",[U.Uri.with("left","Left-hand side resource of the diff editor"),U.Uri.with("right","Right-hand side resource of the diff editor"),U.String.with("title","Human readable title for the diff editor").optional(),new U("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="object",e=>e&&[zt.from(e.viewColumn),Du.from(e)]).optional()],ge.Void),new me("vscode.changes","_workbench.changes","Opens a list of resources in the changes editor to compare their contents.",[U.String.with("title","Human readable title for the changes editor"),new U("resourceList","List of resources to compare",e=>{for(const t of e){if(t.length!==3)return!1;const[i,r,s]=t;if(!E.isUri(i)||!E.isUri(r)&&r!==void 0&&r!==null||!E.isUri(s)&&s!==void 0&&s!==null)return!1}return!0},e=>e)],ge.Void),new me("vscode.prepareTypeHierarchy","_executePrepareTypeHierarchy","Prepare type hierarchy at a position inside a document",[U.Uri,U.Position],new ge("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(jo.to))),new me("vscode.provideSupertypes","_executeProvideSupertypes","Compute supertypes for an item",[U.TypeHierarchyItem],new ge("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(jo.to))),new me("vscode.provideSubtypes","_executeProvideSubtypes","Compute subtypes for an item",[U.TypeHierarchyItem],new ge("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(jo.to))),new me("vscode.revealTestInExplorer","_revealTestInExplorer","Reveals a test instance in the explorer",[U.TestItem],ge.Void),new me("vscode.experimental.editSession.continue","_workbench.editSessions.actions.continueEditSession","Continue the current edit session in a different workspace",[U.Uri.with("workspaceUri","The target workspace to continue the current edit session in")],ge.Void),new me("setContext","_setContext","Set a custom context key value that can be used in when clauses.",[U.String.with("name","The context key name"),new U("value","The context key value",()=>!0,e=>e)],ge.Void),new me("vscode.executeMappedEditsProvider","_executeMappedEditsProvider","Execute Mapped Edits Provider",[U.Uri,U.StringArray,new U("MappedEditsContext","Mapped Edits Context",e=>Ap.is(e),e=>Ap.from(e))],new ge("A promise that resolves to a workspace edit or null",e=>e?fi.to(e):null)),new me("vscode.editorChat.start","inlineChat.start","Invoke a new editor chat session",[new U("Run arguments","",e=>!0,e=>{if(e)return{initialRange:e.initialRange?O.from(e.initialRange):void 0,initialSelection:Ls.isSelection(e.initialSelection)?Ti.from(e.initialSelection):void 0,message:e.message,autoSend:e.autoSend,position:e.position?Fe.from(e.position):void 0}})],ge.Void)],kH=class{static register(e){xH.forEach(e.registerApiCommand,e),this.a(e)}static a(e){e.registerCommand(!1,"_validateWhenClauses",YT)}};function Ur(e){return t=>{if(Array.isArray(t))return t.map(e)}}function Wn(e){if(!Array.isArray(e))return;const t=[];for(const i of e)EN(i)?t.push($u.to(i)):t.push(Li.to(i));return t}var ty=class{constructor(t,i){this.a=t.getProxy(q.MainThreadBulkEdits),this.b={getTextDocumentVersion:r=>i.getDocument(r)?.version,getNotebookDocumentVersion:()=>{}}}applyWorkspaceEdit(t,i,r){const s=new Zi(fi.from(t,this.b));return this.a.$tryApplyWorkspaceEdit(s,void 0,r?.isRefactoring??!1)}};ty=__decorate([__param(0,Ie)],ty);var j$;(function(e){e[e.Complete=1]="Complete",e[e.Partial=2]="Partial",e[e.Omitted=3]="Omitted"})(j$||(j$={}));var Ug;(function(e){e[e.Down=0]="Down",e[e.Up=1]="Up"})(Ug||(Ug={}));var H$;(function(e){e.IncorrectCode="incorrectCode",e.DidNotFollowInstructions="didNotFollowInstructions",e.IncompleteCode="incompleteCode",e.MissingContext="missingContext",e.PoorlyWrittenOrFormatted="poorlyWrittenOrFormatted",e.RefusedAValidRequest="refusedAValidRequest",e.OffensiveOrUnsafe="offensiveOrUnsafe",e.Other="other",e.WillReportIssue="willReportIssue"})(H$||(H$={}));var B$;(function(e){e[e.Action=1]="Action",e[e.Toolbar=2]="Toolbar"})(B$||(B$={}));var mX=V("IChatService");function $H(e){return!!e&&typeof e.sessionId=="string"&&e.$mid===19}var CH=class{constructor(e,t,i,r,s){this.j=e,this.k=t,this.l=i,this.m=r,this.n=s,this.b=ri.create(!1),this.c=!1}close(){this.c=!0}get timings(){return{firstProgress:this.d,totalElapsed:this.b.elapsed()}}get apiObject(){if(!this.g){let t=function(s){if(i.c){const n=new Error("Response stream has been closed");throw Error.captureStackTrace(n,s),n}};var e=t;const i=this;this.b.reset();const r=(s,n)=>{if(typeof this.d>"u"&&(s.kind==="markdownContent"||s.kind==="markdownVuln")&&(this.d=this.b.elapsed()),n){const o=this.l.$handleProgressChunk(this.k.requestId,s),a={report:c=>{o?.then(l=>{l&&(Si.isMarkdownString(c.value)?this.l.$handleProgressChunk(this.k.requestId,Fu.from(c),l):this.l.$handleProgressChunk(this.k.requestId,js.from(c),l))})}};Promise.all([o,n?.(a)]).then(([c,l])=>{c!==void 0&&this.l.$handleProgressChunk(this.k.requestId,nw.from(l),c)})}else this.l.$handleProgressChunk(this.k.requestId,s)};this.g=Object.freeze({markdown(s){t(this.markdown);const n=new op(s),o=Nu.from(n);return r(o),this},markdownWithVulnerabilities(s,n){t(this.markdown),n&&A(i.j,"chatParticipantAdditions");const o=new vu(s,n),a=Mp.from(o);return r(a),this},codeblockUri(s){t(this.codeblockUri),A(i.j,"chatParticipantAdditions");const n=new hp(s),o=Fp.from(n);return r(o),this},filetree(s,n){t(this.filetree);const o=new cp(s,n),a=Ou.from(o);return r(a),this},anchor(s,n){const o=new bu(s,n);return this.push(o)},button(s){t(this.anchor);const n=new up(s),o=Mu.from(n,i.m,i.n);return r(o),this},progress(s,n){t(this.progress);const o=new lp(s,n),a=n?jp.from(o):Ho.from(o);return r(a,n),this},warning(s){t(this.progress),A(i.j,"chatParticipantAdditions");const n=new Eu(s),o=Fu.from(n);return r(o),this},reference(s,n){return this.reference2(s,n)},reference2(s,n,o){if(t(this.reference),typeof s=="object"&&"variableName"in s&&A(i.j,"chatParticipantAdditions"),typeof s=="object"&&"variableName"in s&&!s.value){const a=i.k.variables.variables.find(c=>c.name===s.variableName);if(a){let c;if(a.references?.length)c=a.references.map(l=>({kind:"reference",reference:{variableName:s.variableName,value:l.reference}}));else{const l=new Ms(s,n,o);c=[js.from(l)]}return c.forEach(l=>r(l)),this}}else{const a=new Ms(s,n,o),c=js.from(a);r(c)}return this},codeCitation(s,n,o){t(this.codeCitation),A(i.j,"chatParticipantAdditions");const a=new dp(s,n,o),c=Bp.from(a);r(c)},textEdit(s,n){t(this.textEdit),A(i.j,"chatParticipantAdditions");const o=new Su(s,n),a=Hp.from(o);return r(a),this},detectedParticipant(s,n){t(this.detectedParticipant),A(i.j,"chatParticipantAdditions");const o=new wu(s,n),a=Up.from(o);return r(a),this},confirmation(s,n,o,a){t(this.confirmation),A(i.j,"chatParticipantAdditions");const c=new ap(s,n,o,a),l=_p.from(c);return r(l),this},push(s){if(t(this.push),(s instanceof Su||s instanceof vu||s instanceof wu||s instanceof Eu||s instanceof ap||s instanceof dp||s instanceof fp||s instanceof lp)&&A(i.j,"chatParticipantAdditions"),s instanceof Ms)this.reference2(s.value,s.iconPath,s.options);else if(s instanceof lp){const n=s.task?jp.from(s):Ho.from(s);r(n,s.task)}else if(s instanceof bu){const n=vc.from(s);if(s.resolve){A(i.j,"chatParticipantAdditions"),n.resolveId=Ht();const o=new lt;s.resolve(o.token).then(()=>{const a=vc.from(s);i.l.$handleAnchorResolve(i.k.requestId,n.resolveId,a)}).then(()=>o.dispose(),()=>o.dispose()),i.n.add(ee(()=>o.dispose(!0)))}r(n)}else{const n=Wp.from(s,i.m,i.n);r(n)}return this}})}return this.g}},IH=class $m extends X{static{this.b=0}static{this.j=0}constructor(t,i,r,s,n){super(),this.t=i,this.u=r,this.w=s,this.y=n,this.c=new Map,this.m=new Map,this.n=this.B(new Bh),this.s=this.B(new Bh),this.g=t.getProxy(q.MainThreadChatAgents2),r.registerArgumentProcessor({processArgument:o=>$H(o)?null:o})}transferActiveChat(t){this.g.$transferActiveChatSession(t)}createChatAgent(t,i,r){const s=$m.b++,n=new W$(t,i,this.g,s,r);return this.c.set(s,n),this.g.$registerAgent(s,t.identifier,i,{},void 0),n.apiAgent}createDynamicChatAgent(t,i,r,s){const n=$m.b++,o=new W$(t,i,this.g,n,s);return this.c.set(n,o),this.g.$registerAgent(n,t.identifier,i,{isSticky:!0},r),o.apiAgent}registerChatParticipantDetectionProvider(t,i){const r=$m.j++;return this.m.set(r,new PH(t,i)),this.g.$registerChatParticipantDetectionProvider(r),ee(()=>{this.m.delete(r),this.g.$unregisterChatParticipantDetectionProvider(r)})}async $detectChatParticipant(t,i,r,s,n){const{request:o,location:a,history:c}=await this.z(i,r),l=this.m.get(t);if(!l)return;const u=await this.C(o,l.extension),h=zp.to(o,a,u);return l.provider.provideParticipantDetection(h,{history:c},{participants:s.participants,location:Uu.to(s.location)},n)}async z(t,i){const r=oi(t),s=await this.D(r.agentId,i);let n;if(r.locationData?.type===ci.Editor){const o=this.w.getDocument(r.locationData.document);n=new Ix(o,Ti.to(r.locationData.selection),O.to(r.locationData.wholeRange))}else if(r.locationData?.type===ci.Notebook){const o=this.w.getDocument(r.locationData.sessionInputUri);n=new Px(o)}else r.locationData?.type,ci.Terminal;return{request:r,location:n,history:s}}async C(t,i){let r;if(t.userSelectedModelId&&(r=await this.y.getLanguageModelByIdentifier(i,t.userSelectedModelId)),!r&&(r=await this.y.getDefaultLanguageModel(i),!r))throw new Error("Language model unavailable");return r}async $invokeAgent(t,i,r,s){const n=this.c.get(t);if(!n)throw new Error(`[CHAT](${t}) CANNOT invoke agent because the agent is not registered`);let o;try{const{request:a,location:c,history:l}=await this.z(i,r);let u=this.n.get(a.sessionId);u||(u=new ue,this.n.set(a.sessionId,u)),o=new CH(n.extension,a,this.g,this.u.converter,u);const h=await this.C(a,n.extension),d=zp.to(a,c,h),f=n.invoke(d,{history:l},o.apiObject,s);return await pn(Promise.resolve(f).then(g=>{if(g?.metadata)try{JSON.stringify(g.metadata)}catch(y){const S=`result.metadata MUST be JSON.stringify-able. Got error: ${y.message}`;return this.t.error(`[${n.extension.identifier.value}] [@${n.id}] ${S}`,n.extension),{errorDetails:{message:S},timings:o?.timings,nextQuestion:g.nextQuestion}}let v;return g?.errorDetails&&(v={...g.errorDetails,responseIsIncomplete:!0}),v?.responseIsRedacted&&A(n.extension,"chatParticipantPrivate"),{errorDetails:v,timings:o?.timings,metadata:g?.metadata,nextQuestion:g?.nextQuestion}}),s)}catch(a){return this.t.error(a,n.extension),a instanceof Us&&a.cause&&(a=a.cause),{errorDetails:{message:Ei(a),responseIsIncomplete:!0}}}finally{o?.close()}}async D(t,i){const r=[];for(const s of i.history){const n=Un.to(s.result),o=t===s.request.agentId?n:{...n,metadata:void 0},a=s.request.variables.variables.filter(h=>!h.isTool).map(Vp.to),c=s.request.variables.variables.filter(h=>h.isTool).map(qp.to),l=new $x(s.request.message,s.request.command,a,s.request.agentId,c);r.push(l);const u=mt(s.response.map(h=>Wp.toContent(h,this.u.converter)));r.push(new Cx(u,o,s.request.agentId,s.request.command))}return r}$releaseSession(t){this.n.deleteAndDispose(t)}async $provideFollowups(t,i,r,s,n){const o=this.c.get(i);if(!o)return Promise.resolve([]);const a=oi(t),c=await this.D(o.id,s),l=Un.to(r);return(await o.provideFollowups(l,{history:c},n)).filter(u=>{const h=!u.participant||Qi.some(this.c.values(),d=>d.id===u.participant&&Xe.equals(d.extension.identifier,o.extension.identifier));return h||this.t.warn(`[@${o.id}] ChatFollowup refers to an unknown participant: ${u.participant}`),h}).map(u=>Lu.from(u,a))}$acceptFeedback(t,i,r){const s=this.c.get(t);if(!s)return;const n=Un.to(i);let o;switch(r.direction){case Ug.Down:o=mu.Unhelpful;break;case Ug.Up:o=mu.Helpful;break}const a={result:n,kind:o,unhelpfulReason:Yt(s.extension,"chatParticipantAdditions")?r.reason:void 0};s.acceptFeedback(Object.freeze(a))}$acceptAction(t,i,r){const s=this.c.get(t);if(!s||r.action.kind==="vote")return;const n=aw.to(i,r,this.u.converter);n&&s.acceptAction(Object.freeze(n))}async $invokeCompletionProvider(t,i,r){const s=this.c.get(t);if(!s)return[];let n=this.s.get(t);return n?n.clear():(n=new ue,this.s.set(t,n)),(await s.invokeCompletionProvider(i,r)).map(a=>ow.from(a,this.u.converter,n))}async $provideWelcomeMessage(t,i){const r=this.c.get(t);if(r)return await r.provideWelcomeMessage(i)}async $provideChatTitle(t,i,r){const s=this.c.get(t);if(!s)return;const n=await this.D(s.id,{history:i});return await s.provideTitle({history:n},r)}async $provideSampleQuestions(t,i,r){const s=this.c.get(t);if(s)return(await s.provideSampleQuestions(Uu.to(i),r)).map(n=>Lu.from(n,void 0))}},PH=class{constructor(e,t){this.extension=e,this.provider=t}},W$=class{constructor(e,t,i,r,s){this.extension=e,this.id=t,this.w=i,this.x=r,this.y=s,this.l=new I,this.m=new I}acceptFeedback(e){this.l.fire(e)}acceptAction(e){this.m.fire(e)}async invokeCompletionProvider(e,t){return this.o?await this.o.provider.provideCompletionItems(e,t)??[]:[]}async provideFollowups(e,t,i){if(!this.b)return[];const r=await this.b.provideFollowups(e,t,i);return r?r.filter(s=>!(s&&"commandId"in s)).filter(s=>!(s&&"message"in s)):[]}async provideWelcomeMessage(e){if(!this.q?.provideWelcomeMessage)return;const t=await this.q.provideWelcomeMessage(e),i=t?.icon;if(!(!t||!ti.isThemeIcon(i)))return{...t,icon:i,message:ke.from(t.message)}}async provideTitle(e,t){if(this.s)return await this.s.provideChatTitle(e,t)??void 0}async provideSampleQuestions(e,t){if(!this.q||!this.q.provideSampleQuestions)return[];const i=await this.q.provideSampleQuestions(e,t);return i||[]}get apiAgent(){let e=!1,t=!1;const i=()=>{e||t||(t=!0,queueMicrotask(()=>{this.w.$updateAgent(this.x,{icon:this.c?this.c instanceof E?this.c:"light"in this.c?this.c.light:void 0:void 0,iconDark:this.c&&"dark"in this.c?this.c.dark:void 0,themeIcon:this.c instanceof di?this.c:void 0,hasFollowups:this.b!==void 0,isSecondary:this.k,helpTextPrefix:!this.d||typeof this.d=="string"?this.d:ke.from(this.d),helpTextVariablesPrefix:!this.g||typeof this.g=="string"?this.g:ke.from(this.g),helpTextPostfix:!this.j||typeof this.j=="string"?this.j:ke.from(this.j),supportIssueReporting:this.n,requester:this.t,supportsSlowVariables:this.u}),t=!1}))},r=this;return{get id(){return r.id},get iconPath(){return r.c},set iconPath(s){r.c=s,i()},get requestHandler(){return r.y},set requestHandler(s){j5(typeof s=="function","Invalid request handler"),r.y=s},get followupProvider(){return r.b},set followupProvider(s){r.b=s,i()},get helpTextPrefix(){return A(r.extension,"defaultChatParticipant"),r.d},set helpTextPrefix(s){A(r.extension,"defaultChatParticipant"),r.d=s,i()},get helpTextVariablesPrefix(){return A(r.extension,"defaultChatParticipant"),r.g},set helpTextVariablesPrefix(s){A(r.extension,"defaultChatParticipant"),r.g=s,i()},get helpTextPostfix(){return A(r.extension,"defaultChatParticipant"),r.j},set helpTextPostfix(s){A(r.extension,"defaultChatParticipant"),r.j=s,i()},get isSecondary(){return A(r.extension,"defaultChatParticipant"),r.k},set isSecondary(s){A(r.extension,"defaultChatParticipant"),r.k=s,i()},get supportIssueReporting(){return A(r.extension,"chatParticipantPrivate"),r.n},set supportIssueReporting(s){A(r.extension,"chatParticipantPrivate"),r.n=s,i()},get onDidReceiveFeedback(){return r.l.event},set participantVariableProvider(s){if(A(r.extension,"chatParticipantAdditions"),r.o=s,s){if(!s.triggerCharacters.length)throw new Error("triggerCharacters are required");r.w.$registerAgentCompletionsProvider(r.x,r.id,s.triggerCharacters)}else r.w.$unregisterAgentCompletionsProvider(r.x,r.id)},get participantVariableProvider(){return A(r.extension,"chatParticipantAdditions"),r.o},set welcomeMessageProvider(s){A(r.extension,"defaultChatParticipant"),r.q=s,i()},get welcomeMessageProvider(){return A(r.extension,"defaultChatParticipant"),r.q},set titleProvider(s){A(r.extension,"defaultChatParticipant"),r.s=s,i()},get titleProvider(){return A(r.extension,"defaultChatParticipant"),r.s},onDidPerformAction:Yt(this.extension,"chatParticipantAdditions")?this.m.event:void 0,set requester(s){r.t=s,i()},get requester(){return r.t},set supportsSlowReferences(s){A(r.extension,"chatParticipantPrivate"),r.u=s,i()},get supportsSlowReferences(){return A(r.extension,"chatParticipantPrivate"),r.u},dispose(){e=!0,r.b=void 0,r.l.dispose(),r.w.$unregisterAgent(r.x)}}}invoke(e,t,i,r){return this.y(e,t,i,r)}},DH=class QI{static{this.a=0}constructor(t){this.b=new Map,this.c=t.getProxy(q.MainThreadChatVariables)}async $resolveVariable(t,i,r,s){const n=this.b.get(t);if(n)try{if(n.resolver.resolve2){A(n.extension,"chatParticipantAdditions");const o=new AH(i,this.c),a=await n.resolver.resolve2(n.data.name,{prompt:r},o.apiObject,s);if(a&&a[0])return a[0].value}else{const o=await n.resolver.resolve(n.data.name,{prompt:r},s);if(o&&o[0])return o[0].value}}catch(o){cr(o)}}registerVariableResolver(t,i,r,s,n,o,a,c,l){const u=QI.a++,h=l?ti.fromId(l):void 0;return this.b.set(u,{extension:t,data:{id:i,name:r,description:s,modelDescription:n,icon:h},resolver:a}),this.c.$registerVariable(u,{id:i,name:r,description:s,modelDescription:n,isSlow:o,fullName:c,icon:h}),ee(()=>{this.b.delete(u),this.c.$unregisterVariable(u)})}},AH=class{constructor(e,t){this.c=e,this.d=t,this.a=!1}close(){this.a=!0}get apiObject(){if(!this.b){let t=function(s){if(i.a){const n=new Error("Response stream has been closed");throw Error.captureStackTrace(n,s),n}};var e=t;const i=this,r=s=>{this.d.$handleProgressChunk(this.c,s)};this.b={progress(s){t(this.progress);const n=new yu(s),o=Ho.from(n);return r(o),this},reference(s){t(this.reference);const n=new Ms(s),o=js.from(n);return r(o),this},push(s){return t(this.push),s instanceof Ms?r(js.from(s)):s instanceof yu&&r(Ho.from(s)),this}}}return this.b}},RH=class{constructor(e){const t=e.getProxy(q.MainThreadClipboard);this.value=Object.freeze({readText(){return t.$readText()},writeText(i){return t.$writeText(i)}})}},z$="vscode-cdn.net",TH=`vscode-resource.${z$}`,iy=`'self' https://*.${z$}`;function hh(e,t){return e.scheme===z.http||e.scheme===z.https?e:(t&&t.authority&&t.isRemote&&e.scheme===z.file&&(e=E.from({scheme:z.vscodeRemote,authority:t.authority,path:e.path})),E.from({scheme:z.https,authority:`${e.scheme}+${LH(e.authority)}.${TH}`,path:e.path,fragment:e.fragment,query:e.query}))}function LH(e){return e.replace(/./g,t=>{const i=t.charCodeAt(0);return i>=97&&i<=122||i>=65&&i<=90||i>=48&&i<=57?t:"-"+i.toString(16).padStart(4,"0")})}var NH=class{constructor(e,t,i){this.d=e,this.e=t,this.f=i,this.a=0,this.b=new ue,this.c=new Map,this.b.add(t.onDidChangeVisibleTextEditors(()=>{const r=t.getVisibleTextEditors();for(const s of this.c.values())r.indexOf(s.editor)<0&&s.inset.dispose()}))}dispose(){this.c.forEach(e=>e.inset.dispose()),this.b.dispose()}createWebviewEditorInset(e,t,i,r,s){let n;for(const d of this.e.getVisibleTextEditors(!0))if(d.value===e){n=d;break}if(!n)throw new Error("not a visible editor");const o=this,a=this.a++,c=new I,l=new I,u=new class{constructor(){this.a="",this.b=Object.create(null)}asWebviewUri(d){return hh(d,o.f)}get cspSource(){return iy}set options(d){this.b=d,o.d.$setOptions(a,d)}get options(){return this.b}set html(d){this.a=d,o.d.$setHtml(a,d)}get html(){return this.a}get onDidReceiveMessage(){return c.event}postMessage(d){return o.d.$postMessage(a,d)}},h=new class{constructor(){this.editor=e,this.line=t,this.height=i,this.webview=u,this.onDidDispose=l.event}dispose(){o.c.has(a)&&(o.c.delete(a),o.d.$disposeEditorInset(a),l.fire(),l.dispose(),c.dispose())}};return this.d.$createEditorInset(a,n.id,n.value.document.uri,t+1,i,r||{},s.identifier,s.extensionLocation),this.c.set(a,{editor:e,inset:h,onDidReceiveMessage:c}),h}$onDidDispose(e){const t=this.c.get(e);t&&t.inset.dispose()}$onDidReceiveMessage(e,t){this.c.get(e)?.onDidReceiveMessage.fire(t)}};function OH(e,t,i){const r=e.getProxy(q.MainThreadComments);class s{static{this.a=0}constructor(){this.b=new Map,this.c=new Rs,t.registerArgumentProcessor({processArgument:g=>{if(g&&g.$mid===6){const v=this.b.get(g.handle);return v?v.value:g}else if(g&&g.$mid===7){const v=g,y=this.b.get(v.commentControlHandle);if(!y)return v;const S=y.getCommentThread(v.commentThreadHandle);return S?S.value:v}else if(g&&(g.$mid===9||g.$mid===8)){const v=this.b.get(g.thread.commentControlHandle);if(!v)return g;const y=v.getCommentThread(g.thread.commentThreadHandle);return y?g.$mid===8?y.value:{thread:y.value,text:g.text}:g}else if(g&&g.$mid===10){const v=this.b.get(g.thread.commentControlHandle);if(!v)return g;const y=v.getCommentThread(g.thread.commentThreadHandle);if(!y)return g;const S=g.commentUniqueId,x=y.getCommentByUniqueId(S);return x||g}else if(g&&g.$mid===11){const v=this.b.get(g.thread.commentControlHandle);if(!v)return g;const y=v.getCommentThread(g.thread.commentThreadHandle);if(!y)return g;const S=g.text,x=g.commentUniqueId,P=y.getCommentByUniqueId(x);return P?(typeof P.body=="string"?P.body=S:P.body=new Si(S),P):g}return g}})}createCommentController(g,v,y){const S=s.a++,x=new o(g,S,v,y);this.b.set(x.handle,x);const P=this.c.get(g.identifier)||[];return P.push(x),this.c.set(g.identifier,P),x.value}async $createCommentThreadTemplate(g,v,y,S){const x=this.b.get(g);x&&x.$createCommentThreadTemplate(v,y,S)}async $setActiveComment(g,v){const y=this.b.get(g);y&&y.$setActiveComment(v??void 0)}async $updateCommentThreadTemplate(g,v,y){const S=this.b.get(g);S&&S.$updateCommentThreadTemplate(v,y)}$deleteCommentThread(g,v){this.b.get(g)?.$deleteCommentThread(v)}async $updateCommentThread(g,v,y){this.b.get(g)?.$updateCommentThread(v,y)}async $provideCommentingRanges(g,v,y){const S=this.b.get(g);if(!S||!S.commentingRangeProvider)return Promise.resolve(void 0);const x=await i.ensureDocumentData(E.revive(v));return hi(async()=>{const P=await S.commentingRangeProvider.provideCommentingRanges(x.document,y);let D;return Array.isArray(P)?D={ranges:P,fileComments:!1}:P?D={ranges:P.ranges||[],fileComments:P.enableFileComments||!1}:D=P??void 0,D}).then(P=>{let D;return P&&(D={ranges:P.ranges.map(N=>O.from(N)),fileComments:P.fileComments}),D})}$toggleReaction(g,v,y,S,x){const P=this.b.get(g);return!P||!P.reactionHandler?Promise.resolve(void 0):hi(()=>{const D=P.getCommentThread(v);if(D){const N=D.getCommentByUniqueId(S.uniqueIdInThread);if(P!==void 0&&N&&P.reactionHandler)return P.reactionHandler(N,l(x))}return Promise.resolve(void 0)})}}class n{static{this.a=0}set threadId(g){this.n=g}get threadId(){return this.n}get id(){return this.n}get resource(){return this.o}get uri(){return this.o}set range(g){(g===void 0!=(this.p===void 0)||!g||!this.p||!g.isEqual(this.p))&&(this.p=g,this.b.range=g,this.c.fire())}get range(){return this.p}set canReply(g){this.d!==g&&(this.d=g,this.b.canReply=g,this.c.fire())}get canReply(){return this.d}get label(){return this.e}set label(g){this.e=g,this.b.label=g,this.c.fire()}get contextValue(){return this.f}set contextValue(g){this.f=g,this.b.contextValue=g,this.c.fire()}get comments(){return this.q}set comments(g){this.q=g,this.b.comments=g,this.c.fire()}get collapsibleState(){return this.g}set collapsibleState(g){this.g=g,this.b.collapsibleState=g,this.c.fire()}get state(){return this.h}set state(g){this.h=g,typeof g=="object"?(A(this.extensionDescription,"commentThreadApplicability"),this.b.state=g.resolved,this.b.applicability=g.applicability):this.b.state=g,this.c.fire()}get isDisposed(){return this.j}constructor(g,v,y,S,x,P,D,N,H){this.m=v,this.n=y,this.o=S,this.p=x,this.q=P,this.extensionDescription=D,this.r=N,this.handle=n.a++,this.commentHandle=0,this.b=Object.create(null),this.c=new I,this.onDidUpdateCommentThread=this.c.event,this.d=!0,this.k=new Map,this.l=new vs,this.l.value=new ue,this.n===void 0&&(this.n=`${g}.${this.handle}`),r.$createCommentThread(v,this.handle,this.n,this.o,O.from(this.p),this.q.map(B=>a(this,B,this.k,this.extensionDescription)),D.identifier,this.r,H),this.i=[],this.j=!1,this.i.push(this.onDidUpdateCommentThread(()=>{this.eventuallyUpdateCommentThread()})),this.i.push({dispose:()=>{r.$deleteCommentThread(v,this.handle)}});const Y=this;this.value={get uri(){return Y.uri},get range(){return Y.range},set range(B){Y.range=B},get comments(){return Y.comments},set comments(B){Y.comments=B},get collapsibleState(){return Y.collapsibleState},set collapsibleState(B){Y.collapsibleState=B},get canReply(){return Y.canReply},set canReply(B){Y.canReply=B},get contextValue(){return Y.contextValue},set contextValue(B){Y.contextValue=B},get label(){return Y.label},set label(B){Y.label=B},get state(){return Y.state},set state(B){Y.state=B},reveal:(B,M)=>Y.reveal(B,M),hide:()=>Y.hide(),dispose:()=>{Y.dispose()}}}s(){this.r&&(this.r=!1,this.b.isTemplate=!1)}eventuallyUpdateCommentThread(){if(this.j)return;this.s(),this.l.value||(this.l.value=new ue);const g=y=>Object.prototype.hasOwnProperty.call(this.b,y),v={};g("range")&&(v.range=O.from(this.p)),g("label")&&(v.label=this.label),g("contextValue")&&(v.contextValue=this.contextValue??null),g("comments")&&(v.comments=this.q.map(y=>a(this,y,this.k,this.extensionDescription))),g("collapsibleState")&&(v.collapseState=u(this.g)),g("canReply")&&(v.canReply=this.canReply),g("state")&&(v.state=h(this.h)),g("applicability")&&(v.applicability=d(this.h)),g("isTemplate")&&(v.isTemplate=this.r),this.b={},r.$updateCommentThread(this.m,this.handle,this.n,this.o,v)}getCommentByUniqueId(g){for(const v of this.k){const y=v[0],S=v[1];if(g===S)return y}}async reveal(g,v){A(this.extensionDescription,"commentReveal");let y;g&&g.body!==void 0?y=g:v=v??g;let S=y?this.k.get(y):void 0;S??=this.k.get(this.q[0]);let x=!0,P=!1;return v?.focus===lu.Reply?(P=!0,x=!1):v?.focus===lu.Comment&&(x=!1),r.$revealCommentThread(this.m,this.handle,S,{preserveFocus:x,focusReply:P})}async hide(){return r.$hideCommentThread(this.m,this.handle)}dispose(){this.j=!0,this.l.dispose(),this.i.forEach(g=>g.dispose())}}__decorate([vd(100)],n.prototype,"eventuallyUpdateCommentThread",null);class o{get id(){return this.j}get label(){return this.k}get handle(){return this.i}get commentingRangeProvider(){return this.b}set commentingRangeProvider(g){this.b=g,g?.resourceHints&&A(this.h,"commentingRangeHint"),r.$updateCommentingRanges(this.handle,g?.resourceHints)}get reactionHandler(){return this.c}set reactionHandler(g){this.c=g,r.$updateCommentControllerFeatures(this.handle,{reactionHandler:!!g})}get options(){return this.d}set options(g){this.d=g,r.$updateCommentControllerFeatures(this.handle,{options:this.d})}get activeComment(){return A(this.h,"activeComment"),this.e}get activeCommentThread(){return A(this.h,"activeComment"),this.f?.value}constructor(g,v,y,S){this.h=g,this.i=v,this.j=y,this.k=S,this.a=new Map,r.$registerCommentController(this.handle,y,S,this.h.identifier.value);const x=this;this.value=Object.freeze({id:x.id,label:x.label,get options(){return x.options},set options(P){x.options=P},get commentingRangeProvider(){return x.commentingRangeProvider},set commentingRangeProvider(P){x.commentingRangeProvider=P},get reactionHandler(){return x.reactionHandler},set reactionHandler(P){x.reactionHandler=P},get activeCommentThread(){return x.activeCommentThread},createCommentThread(P,D,N){return x.createCommentThread(P,D,N).value},dispose:()=>{x.dispose()}}),this.g=[],this.g.push({dispose:()=>{r.$unregisterCommentController(this.handle)}})}createCommentThread(g,v,y){v===void 0&&A(this.h,"fileComments");const S=new n(this.id,this.handle,void 0,g,v,y,this.h,!1);return this.a.set(S.handle,S),S}$setActiveComment(g){if(!g){this.e=void 0,this.f=void 0;return}const v=this.a.get(g.commentThreadHandle);v&&(this.e=g.uniqueIdInThread?v.getCommentByUniqueId(g.uniqueIdInThread):void 0,this.f=v)}$createCommentThreadTemplate(g,v,y){const S=new n(this.id,this.handle,void 0,E.revive(g),O.to(v),[],this.h,!0,y);return S.collapsibleState=Pa.Expanded,this.a.set(S.handle,S),S}$updateCommentThreadTemplate(g,v){const y=this.a.get(g);y&&(y.range=O.to(v))}$updateCommentThread(g,v){const y=this.a.get(g);if(!y)return;(x=>Object.prototype.hasOwnProperty.call(v,x))("collapseState")&&(y.collapsibleState=u(v.collapseState))}$deleteCommentThread(g){this.a.get(g)?.dispose(),this.a.delete(g)}getCommentThread(g){return this.a.get(g)}dispose(){this.a.forEach(g=>{g.dispose()}),this.g.forEach(g=>g.dispose())}}function a(f,g,v,y){let S=v.get(g);return S||(S=++f.commentHandle,v.set(g,S)),g.state!==void 0&&A(y,"commentsDraftState"),g.reactions?.some(x=>x.reactors!==void 0)&&A(y,"commentReactor"),{mode:g.mode,contextValue:g.contextValue,uniqueIdInThread:S,body:typeof g.body=="string"?g.body:ke.from(g.body),userName:g.author.name,userIconPath:g.author.iconPath,label:g.label,commentReactions:g.reactions?g.reactions.map(x=>c(x)):void 0,state:g.state,timestamp:g.timestamp?.toJSON()}}function c(f){return{label:f.label,iconPath:f.iconPath?wp(f.iconPath):void 0,count:f.count,hasReacted:f.authorHasReacted,reactors:f.reactors&&f.reactors.length>0&&typeof f.reactors[0]!="string"?f.reactors.map(g=>g.name):f.reactors}}function l(f){return{label:f.label||"",count:f.count||0,iconPath:f.iconPath?E.revive(f.iconPath):"",authorHasReacted:f.hasReacted||!1,reactors:f.reactors?.map(g=>({name:g}))}}function u(f){if(f!==void 0)switch(f){case ou.Expanded:return Pa.Expanded;case ou.Collapsed:return Pa.Collapsed}return Pa.Collapsed}function h(f){let g;if(typeof f=="object"?g=f.resolved:g=f,g!==void 0)switch(g){case au.Unresolved:return Il.Unresolved;case au.Resolved:return Il.Resolved}return Il.Unresolved}function d(f){let g;if(typeof f=="object"&&(g=f.applicability),g!==void 0)switch(g){case cu.Current:return Pl.Current;case cu.Outdated:return Pl.Outdated}return Pl.Current}return new s}var _g={},Me={exports:_g};(function(e,t){if(typeof _g=="object"&&typeof Me=="object")Me.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var i=t();for(var r in i)(typeof _g=="object"?_g:e)[r]=i[r]}})(typeof self<"u"?self:void 0,function(){return function(e){var t={};function i(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.d=function(r,s,n){i.o(r,s)||Object.defineProperty(r,s,{enumerable:!0,get:n})},i.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},i.t=function(r,s){if(1&s&&(r=i(r)),8&s||4&s&&typeof r=="object"&&r&&r.__esModule)return r;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:r}),2&s&&typeof r!="string")for(var o in r)i.d(n,o,function(a){return r[a]}.bind(null,o));return n},i.n=function(r){var s=r&&r.__esModule?function(){return r.default}:function(){return r};return i.d(s,"a",s),s},i.o=function(r,s){return Object.prototype.hasOwnProperty.call(r,s)},i.p="",i(i.s=0)}([function(e,t,i){(function(r){var s;t=e.exports=qe,s=typeof r=="object"&&r.env&&r.env.NODE_DEBUG&&/\bsemver\b/i.test(r.env.NODE_DEBUG)?function(){var C=Array.prototype.slice.call(arguments,0);C.unshift("SEMVER"),console.log.apply(console,C)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,a=t.re=[],c=t.src=[],l=0,u=l++;c[u]="0|[1-9]\\d*";var h=l++;c[h]="[0-9]+";var d=l++;c[d]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var f=l++;c[f]="("+c[u]+")\\.("+c[u]+")\\.("+c[u]+")";var g=l++;c[g]="("+c[h]+")\\.("+c[h]+")\\.("+c[h]+")";var v=l++;c[v]="(?:"+c[u]+"|"+c[d]+")";var y=l++;c[y]="(?:"+c[h]+"|"+c[d]+")";var S=l++;c[S]="(?:-("+c[v]+"(?:\\."+c[v]+")*))";var x=l++;c[x]="(?:-?("+c[y]+"(?:\\."+c[y]+")*))";var P=l++;c[P]="[0-9A-Za-z-]+";var D=l++;c[D]="(?:\\+("+c[P]+"(?:\\."+c[P]+")*))";var N=l++,H="v?"+c[f]+c[S]+"?"+c[D]+"?";c[N]="^"+H+"$";var Y="[v=\\s]*"+c[g]+c[x]+"?"+c[D]+"?",B=l++;c[B]="^"+Y+"$";var M=l++;c[M]="((?:<|>)?=?)";var re=l++;c[re]=c[h]+"|x|X|\\*";var ae=l++;c[ae]=c[u]+"|x|X|\\*";var fe=l++;c[fe]="[v=\\s]*("+c[ae]+")(?:\\.("+c[ae]+")(?:\\.("+c[ae]+")(?:"+c[S]+")?"+c[D]+"?)?)?";var Je=l++;c[Je]="[v=\\s]*("+c[re]+")(?:\\.("+c[re]+")(?:\\.("+c[re]+")(?:"+c[x]+")?"+c[D]+"?)?)?";var G=l++;c[G]="^"+c[M]+"\\s*"+c[fe]+"$";var _=l++;c[_]="^"+c[M]+"\\s*"+c[Je]+"$";var K=l++;c[K]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var W=l++;c[W]="(?:~>?)";var ne=l++;c[ne]="(\\s*)"+c[W]+"\\s+",a[ne]=new RegExp(c[ne],"g");var ye=l++;c[ye]="^"+c[W]+c[fe]+"$";var he=l++;c[he]="^"+c[W]+c[Je]+"$";var tt=l++;c[tt]="(?:\\^)";var Ze=l++;c[Ze]="(\\s*)"+c[tt]+"\\s+",a[Ze]=new RegExp(c[Ze],"g");var Mt=l++;c[Mt]="^"+c[tt]+c[fe]+"$";var Nt=l++;c[Nt]="^"+c[tt]+c[Je]+"$";var ii=l++;c[ii]="^"+c[M]+"\\s*("+Y+")$|^$";var dt=l++;c[dt]="^"+c[M]+"\\s*("+H+")$|^$";var gi=l++;c[gi]="(\\s*)"+c[M]+"\\s*("+Y+"|"+c[fe]+")",a[gi]=new RegExp(c[gi],"g");var rn=l++;c[rn]="^\\s*("+c[fe]+")\\s+-\\s+("+c[fe]+")\\s*$";var ps=l++;c[ps]="^\\s*("+c[Je]+")\\s+-\\s+("+c[Je]+")\\s*$";var Xn=l++;c[Xn]="(<|>)?=?\\s*\\*";for(var xe=0;xe<35;xe++)s(xe,c[xe]),a[xe]||(a[xe]=new RegExp(c[xe]));function gs(C,L){if(C instanceof qe)return C;if(typeof C!="string"||C.length>n||!(L?a[B]:a[N]).test(C))return null;try{return new qe(C,L)}catch{return null}}function qe(C,L){if(C instanceof qe){if(C.loose===L)return C;C=C.version}else if(typeof C!="string")throw new TypeError("Invalid Version: "+C);if(C.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof qe))return new qe(C,L);s("SemVer",C,L),this.loose=L;var F=C.trim().match(L?a[B]:a[N]);if(!F)throw new TypeError("Invalid Version: "+C);if(this.raw=C,this.major=+F[1],this.minor=+F[2],this.patch=+F[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");F[4]?this.prerelease=F[4].split(".").map(function(le){if(/^[0-9]+$/.test(le)){var we=+le;if(we>=0&&we<o)return we}return le}):this.prerelease=[],this.build=F[5]?F[5].split("."):[],this.format()}t.parse=gs,t.valid=function(C,L){var F=gs(C,L);return F?F.version:null},t.clean=function(C,L){var F=gs(C.trim().replace(/^[=v]+/,""),L);return F?F.version:null},t.SemVer=qe,qe.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},qe.prototype.toString=function(){return this.version},qe.prototype.compare=function(C){return s("SemVer.compare",this.version,this.loose,C),C instanceof qe||(C=new qe(C,this.loose)),this.compareMain(C)||this.comparePre(C)},qe.prototype.compareMain=function(C){return C instanceof qe||(C=new qe(C,this.loose)),nr(this.major,C.major)||nr(this.minor,C.minor)||nr(this.patch,C.patch)},qe.prototype.comparePre=function(C){if(C instanceof qe||(C=new qe(C,this.loose)),this.prerelease.length&&!C.prerelease.length)return-1;if(!this.prerelease.length&&C.prerelease.length)return 1;if(!this.prerelease.length&&!C.prerelease.length)return 0;var L=0;do{var F=this.prerelease[L],le=C.prerelease[L];if(s("prerelease compare",L,F,le),F===void 0&&le===void 0)return 0;if(le===void 0)return 1;if(F===void 0)return-1;if(F!==le)return nr(F,le)}while(++L)},qe.prototype.inc=function(C,L){switch(C){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",L);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",L);break;case"prepatch":this.prerelease.length=0,this.inc("patch",L),this.inc("pre",L);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",L),this.inc("pre",L);break;case"major":this.minor===0&&this.patch===0&&this.prerelease.length!==0||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":this.patch===0&&this.prerelease.length!==0||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var F=this.prerelease.length;--F>=0;)typeof this.prerelease[F]=="number"&&(this.prerelease[F]++,F=-2);F===-1&&this.prerelease.push(0)}L&&(this.prerelease[0]===L?isNaN(this.prerelease[1])&&(this.prerelease=[L,0]):this.prerelease=[L,0]);break;default:throw new Error("invalid increment argument: "+C)}return this.format(),this.raw=this.version,this},t.inc=function(C,L,F,le){typeof F=="string"&&(le=F,F=void 0);try{return new qe(C,F).inc(L,le).version}catch{return null}},t.diff=function(C,L){if(zc(C,L))return null;var F=gs(C),le=gs(L);if(F.prerelease.length||le.prerelease.length){for(var we in F)if((we==="major"||we==="minor"||we==="patch")&&F[we]!==le[we])return"pre"+we;return"prerelease"}for(var we in F)if((we==="major"||we==="minor"||we==="patch")&&F[we]!==le[we])return we},t.compareIdentifiers=nr;var Wr=/^[0-9]+$/;function nr(C,L){var F=Wr.test(C),le=Wr.test(L);return F&&le&&(C=+C,L=+L),F&&!le?-1:le&&!F?1:C<L?-1:C>L?1:0}function or(C,L,F){return new qe(C,F).compare(new qe(L,F))}function na(C,L,F){return or(C,L,F)>0}function oa(C,L,F){return or(C,L,F)<0}function zc(C,L,F){return or(C,L,F)===0}function Vc(C,L,F){return or(C,L,F)!==0}function qc(C,L,F){return or(C,L,F)>=0}function aa(C,L,F){return or(C,L,F)<=0}function ca(C,L,F,le){var we;switch(L){case"===":typeof C=="object"&&(C=C.version),typeof F=="object"&&(F=F.version),we=C===F;break;case"!==":typeof C=="object"&&(C=C.version),typeof F=="object"&&(F=F.version),we=C!==F;break;case"":case"=":case"==":we=zc(C,F,le);break;case"!=":we=Vc(C,F,le);break;case">":we=na(C,F,le);break;case">=":we=qc(C,F,le);break;case"<":we=oa(C,F,le);break;case"<=":we=aa(C,F,le);break;default:throw new TypeError("Invalid operator: "+L)}return we}function mi(C,L){if(C instanceof mi){if(C.loose===L)return C;C=C.value}if(!(this instanceof mi))return new mi(C,L);s("comparator",C,L),this.loose=L,this.parse(C),this.semver===ms?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}t.rcompareIdentifiers=function(C,L){return nr(L,C)},t.major=function(C,L){return new qe(C,L).major},t.minor=function(C,L){return new qe(C,L).minor},t.patch=function(C,L){return new qe(C,L).patch},t.compare=or,t.compareLoose=function(C,L){return or(C,L,!0)},t.rcompare=function(C,L,F){return or(L,C,F)},t.sort=function(C,L){return C.sort(function(F,le){return t.compare(F,le,L)})},t.rsort=function(C,L){return C.sort(function(F,le){return t.rcompare(F,le,L)})},t.gt=na,t.lt=oa,t.eq=zc,t.neq=Vc,t.gte=qc,t.lte=aa,t.cmp=ca,t.Comparator=mi;var ms={};function xt(C,L){if(C instanceof xt)return C.loose===L?C:new xt(C.raw,L);if(C instanceof mi)return new xt(C.value,L);if(!(this instanceof xt))return new xt(C,L);if(this.loose=L,this.raw=C,this.set=C.split(/\s*\|\|\s*/).map(function(F){return this.parseRange(F.trim())},this).filter(function(F){return F.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+C);this.format()}function ui(C){return!C||C.toLowerCase()==="x"||C==="*"}function sn(C,L,F,le,we,qt,_e,yt,kt,Ut,ar,gt,Kt){return((L=ui(F)?"":ui(le)?">="+F+".0.0":ui(we)?">="+F+"."+le+".0":">="+L)+" "+(yt=ui(kt)?"":ui(Ut)?"<"+(+kt+1)+".0.0":ui(ar)?"<"+kt+"."+(+Ut+1)+".0":gt?"<="+kt+"."+Ut+"."+ar+"-"+gt:"<="+yt)).trim()}function Am(C,L){for(var F=0;F<C.length;F++)if(!C[F].test(L))return!1;if(L.prerelease.length){for(F=0;F<C.length;F++)if(s(C[F].semver),C[F].semver!==ms&&C[F].semver.prerelease.length>0){var le=C[F].semver;if(le.major===L.major&&le.minor===L.minor&&le.patch===L.patch)return!0}return!1}return!0}function la(C,L,F){try{L=new xt(L,F)}catch{return!1}return L.test(C)}function nn(C,L,F,le){var we,qt,_e,yt,kt;switch(C=new qe(C,le),L=new xt(L,le),F){case">":we=na,qt=aa,_e=oa,yt=">",kt=">=";break;case"<":we=oa,qt=qc,_e=na,yt="<",kt="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(la(C,L,le))return!1;for(var Ut=0;Ut<L.set.length;++Ut){var ar=L.set[Ut],gt=null,Kt=null;if(ar.forEach(function(vi){vi.semver===ms&&(vi=new mi(">=0.0.0")),gt=gt||vi,Kt=Kt||vi,we(vi.semver,gt.semver,le)?gt=vi:_e(vi.semver,Kt.semver,le)&&(Kt=vi)}),gt.operator===yt||gt.operator===kt||(!Kt.operator||Kt.operator===yt)&&qt(C,Kt.semver)||Kt.operator===kt&&_e(C,Kt.semver))return!1}return!0}mi.prototype.parse=function(C){var L=this.loose?a[ii]:a[dt],F=C.match(L);if(!F)throw new TypeError("Invalid comparator: "+C);this.operator=F[1],this.operator==="="&&(this.operator=""),F[2]?this.semver=new qe(F[2],this.loose):this.semver=ms},mi.prototype.toString=function(){return this.value},mi.prototype.test=function(C){return s("Comparator.test",C,this.loose),this.semver===ms||(typeof C=="string"&&(C=new qe(C,this.loose)),ca(C,this.operator,this.semver,this.loose))},mi.prototype.intersects=function(C,L){if(!(C instanceof mi))throw new TypeError("a Comparator is required");var F;if(this.operator==="")return F=new xt(C.value,L),la(this.value,F,L);if(C.operator==="")return F=new xt(this.value,L),la(C.semver,F,L);var le=!(this.operator!==">="&&this.operator!==">"||C.operator!==">="&&C.operator!==">"),we=!(this.operator!=="<="&&this.operator!=="<"||C.operator!=="<="&&C.operator!=="<"),qt=this.semver.version===C.semver.version,_e=!(this.operator!==">="&&this.operator!=="<="||C.operator!==">="&&C.operator!=="<="),yt=ca(this.semver,"<",C.semver,L)&&(this.operator===">="||this.operator===">")&&(C.operator==="<="||C.operator==="<"),kt=ca(this.semver,">",C.semver,L)&&(this.operator==="<="||this.operator==="<")&&(C.operator===">="||C.operator===">");return le||we||qt&&_e||yt||kt},t.Range=xt,xt.prototype.format=function(){return this.range=this.set.map(function(C){return C.join(" ").trim()}).join("||").trim(),this.range},xt.prototype.toString=function(){return this.range},xt.prototype.parseRange=function(C){var L=this.loose;C=C.trim(),s("range",C,L);var F=L?a[ps]:a[rn];C=C.replace(F,sn),s("hyphen replace",C),C=C.replace(a[gi],"$1$2$3"),s("comparator trim",C,a[gi]),C=(C=(C=C.replace(a[ne],"$1~")).replace(a[Ze],"$1^")).split(/\s+/).join(" ");var le=L?a[ii]:a[dt],we=C.split(" ").map(function(qt){return function(_e,yt){return s("comp",_e),_e=function(kt,Ut){return kt.trim().split(/\s+/).map(function(ar){return function(gt,Kt){s("caret",gt,Kt);var vi=Kt?a[Nt]:a[Mt];return gt.replace(vi,function(Ji,Ee,Re,k,Qe){var _t;return s("caret",gt,Ji,Ee,Re,k,Qe),ui(Ee)?_t="":ui(Re)?_t=">="+Ee+".0.0 <"+(+Ee+1)+".0.0":ui(k)?_t=Ee==="0"?">="+Ee+"."+Re+".0 <"+Ee+"."+(+Re+1)+".0":">="+Ee+"."+Re+".0 <"+(+Ee+1)+".0.0":Qe?(s("replaceCaret pr",Qe),Qe.charAt(0)!=="-"&&(Qe="-"+Qe),_t=Ee==="0"?Re==="0"?">="+Ee+"."+Re+"."+k+Qe+" <"+Ee+"."+Re+"."+(+k+1):">="+Ee+"."+Re+"."+k+Qe+" <"+Ee+"."+(+Re+1)+".0":">="+Ee+"."+Re+"."+k+Qe+" <"+(+Ee+1)+".0.0"):(s("no pr"),_t=Ee==="0"?Re==="0"?">="+Ee+"."+Re+"."+k+" <"+Ee+"."+Re+"."+(+k+1):">="+Ee+"."+Re+"."+k+" <"+Ee+"."+(+Re+1)+".0":">="+Ee+"."+Re+"."+k+" <"+(+Ee+1)+".0.0"),s("caret return",_t),_t})}(ar,Ut)}).join(" ")}(_e,yt),s("caret",_e),_e=function(kt,Ut){return kt.trim().split(/\s+/).map(function(ar){return function(gt,Kt){var vi=Kt?a[he]:a[ye];return gt.replace(vi,function(Ji,Ee,Re,k,Qe){var _t;return s("tilde",gt,Ji,Ee,Re,k,Qe),ui(Ee)?_t="":ui(Re)?_t=">="+Ee+".0.0 <"+(+Ee+1)+".0.0":ui(k)?_t=">="+Ee+"."+Re+".0 <"+Ee+"."+(+Re+1)+".0":Qe?(s("replaceTilde pr",Qe),Qe.charAt(0)!=="-"&&(Qe="-"+Qe),_t=">="+Ee+"."+Re+"."+k+Qe+" <"+Ee+"."+(+Re+1)+".0"):_t=">="+Ee+"."+Re+"."+k+" <"+Ee+"."+(+Re+1)+".0",s("tilde return",_t),_t})}(ar,Ut)}).join(" ")}(_e,yt),s("tildes",_e),_e=function(kt,Ut){return s("replaceXRanges",kt,Ut),kt.split(/\s+/).map(function(ar){return function(gt,Kt){gt=gt.trim();var vi=Kt?a[_]:a[G];return gt.replace(vi,function(Ji,Ee,Re,k,Qe,_t){s("xRange",gt,Ji,Ee,Re,k,Qe,_t);var ce=ui(Re),je=ce||ui(k),Zn=je||ui(Qe);return Ee==="="&&Zn&&(Ee=""),ce?Ji=Ee===">"||Ee==="<"?"<0.0.0":"*":Ee&&Zn?(je&&(k=0),Zn&&(Qe=0),Ee===">"?(Ee=">=",je?(Re=+Re+1,k=0,Qe=0):Zn&&(k=+k+1,Qe=0)):Ee==="<="&&(Ee="<",je?Re=+Re+1:k=+k+1),Ji=Ee+Re+"."+k+"."+Qe):je?Ji=">="+Re+".0.0 <"+(+Re+1)+".0.0":Zn&&(Ji=">="+Re+"."+k+".0 <"+Re+"."+(+k+1)+".0"),s("xRange return",Ji),Ji})}(ar,Ut)}).join(" ")}(_e,yt),s("xrange",_e),_e=function(kt,Ut){return s("replaceStars",kt,Ut),kt.trim().replace(a[Xn],"")}(_e,yt),s("stars",_e),_e}(qt,L)}).join(" ").split(/\s+/);return this.loose&&(we=we.filter(function(qt){return!!qt.match(le)})),we=we.map(function(qt){return new mi(qt,L)})},xt.prototype.intersects=function(C,L){if(!(C instanceof xt))throw new TypeError("a Range is required");return this.set.some(function(F){return F.every(function(le){return C.set.some(function(we){return we.every(function(qt){return le.intersects(qt,L)})})})})},t.toComparators=function(C,L){return new xt(C,L).set.map(function(F){return F.map(function(le){return le.value}).join(" ").trim().split(" ")})},xt.prototype.test=function(C){if(!C)return!1;typeof C=="string"&&(C=new qe(C,this.loose));for(var L=0;L<this.set.length;L++)if(Am(this.set[L],C))return!0;return!1},t.satisfies=la,t.maxSatisfying=function(C,L,F){var le=null,we=null;try{var qt=new xt(L,F)}catch{return null}return C.forEach(function(_e){qt.test(_e)&&(le&&we.compare(_e)!==-1||(we=new qe(le=_e,F)))}),le},t.minSatisfying=function(C,L,F){var le=null,we=null;try{var qt=new xt(L,F)}catch{return null}return C.forEach(function(_e){qt.test(_e)&&(le&&we.compare(_e)!==1||(we=new qe(le=_e,F)))}),le},t.validRange=function(C,L){try{return new xt(C,L).range||"*"}catch{return null}},t.ltr=function(C,L,F){return nn(C,L,"<",F)},t.gtr=function(C,L,F){return nn(C,L,">",F)},t.outside=nn,t.prerelease=function(C,L){var F=gs(C,L);return F&&F.prerelease.length?F.prerelease:null},t.intersects=function(C,L,F){return C=new xt(C,F),L=new xt(L,F),C.intersects(L)},t.coerce=function(C){if(C instanceof qe)return C;if(typeof C!="string")return null;var L=C.match(a[K]);return L==null?null:gs((L[1]||"0")+"."+(L[2]||"0")+"."+(L[3]||"0"))}}).call(this,i(1))},function(e,t){var i,r,s=e.exports={};function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(y){if(i===setTimeout)return setTimeout(y,0);if((i===n||!i)&&setTimeout)return i=setTimeout,setTimeout(y,0);try{return i(y,0)}catch{try{return i.call(null,y,0)}catch{return i.call(this,y,0)}}}(function(){try{i=typeof setTimeout=="function"?setTimeout:n}catch{i=n}try{r=typeof clearTimeout=="function"?clearTimeout:o}catch{r=o}})();var c,l=[],u=!1,h=-1;function d(){u&&c&&(u=!1,c.length?l=c.concat(l):h=-1,l.length&&f())}function f(){if(!u){var y=a(d);u=!0;for(var S=l.length;S;){for(c=l,l=[];++h<S;)c&&c[h].run();h=-1,S=l.length}c=null,u=!1,function(x){if(r===clearTimeout)return clearTimeout(x);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(x);try{r(x)}catch{try{return r.call(null,x)}catch{return r.call(this,x)}}}(y)}}function g(y,S){this.fun=y,this.array=S}function v(){}s.nextTick=function(y){var S=new Array(arguments.length-1);if(arguments.length>1)for(var x=1;x<arguments.length;x++)S[x-1]=arguments[x];l.push(new g(y,S)),l.length!==1||u||a(f)},g.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=v,s.addListener=v,s.once=v,s.off=v,s.removeListener=v,s.removeAllListeners=v,s.emit=v,s.prependListener=v,s.prependOnceListener=v,s.listeners=function(y){return[]},s.binding=function(y){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(y){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}}])});var vX=Me.exports.SEMVER_SPEC_VERSION,wX=Me.exports.parse,bX=Me.exports.valid,yX=Me.exports.coerce,EX=Me.exports.clean,SX=Me.exports.inc,xX=Me.exports.major,kX=Me.exports.minor,$X=Me.exports.patch,CX=Me.exports.prerelease,IX=Me.exports.gt,PX=Me.exports.gte,DX=Me.exports.lt,AX=Me.exports.lte,RX=Me.exports.eq,TX=Me.exports.neq,LX=Me.exports.cmp,NX=Me.exports.compare,OX=Me.exports.rcompare,FX=Me.exports.compareIdentifiers,MX=Me.exports.rcompareIdentifiers,UX=Me.exports.compareBuild,_X=Me.exports.sort,jX=Me.exports.rsort,HX=Me.exports.diff,BX=Me.exports.validRange,WX=Me.exports.satisfies,zX=Me.exports.maxSatisfying,VX=Me.exports.minSatisfying,qX=Me.exports.minVersion,GX=Me.exports.gtr,JX=Me.exports.ltr,QX=Me.exports.outside,YX=Me.exports.intersects,XX=Me.exports.SemVer,ZX=Me.exports.Comparator,KX=Me.exports.Range,V$=/^(\^|>=)?((\d+)|x)\.((\d+)|x)\.((\d+)|x)(\-.*)?$/,FH=/^-(\d{4})(\d{2})(\d{2})$/;function MH(e){return e=e.trim(),e==="*"||V$.test(e)}function q$(e){if(!MH(e))return null;if(e=e.trim(),e==="*")return{hasCaret:!1,hasGreaterEquals:!1,majorBase:0,majorMustEqual:!1,minorBase:0,minorMustEqual:!1,patchBase:0,patchMustEqual:!1,preRelease:null};const t=e.match(V$);return t?{hasCaret:t[1]==="^",hasGreaterEquals:t[1]===">=",majorBase:t[2]==="x"?0:parseInt(t[2],10),majorMustEqual:t[2]!=="x",minorBase:t[4]==="x"?0:parseInt(t[4],10),minorMustEqual:t[4]!=="x",patchBase:t[6]==="x"?0:parseInt(t[6],10),patchMustEqual:t[6]!=="x",preRelease:t[8]||null}:null}function G$(e){if(!e)return null;const t=e.majorBase,i=e.majorMustEqual,r=e.minorBase;let s=e.minorMustEqual;const n=e.patchBase;let o=e.patchMustEqual;e.hasCaret&&(t===0||(s=!1),o=!1);let a=0;if(e.preRelease){const c=FH.exec(e.preRelease);if(c){const[,l,u,h]=c;a=Date.UTC(Number(l),Number(u)-1,Number(h))}}return{majorBase:t,majorMustEqual:i,minorBase:r,minorMustEqual:s,patchBase:n,patchMustEqual:o,isMinimum:e.hasGreaterEquals,notBefore:a}}var UH=class{constructor(){this.buffers=[]}add(e){let t=this.buffers.indexOf(e);return t<0&&(t=this.buffers.length,this.buffers.push(e)),t}};function _H(e,t){if(t.serializeBuffersForPostMessage){const i=new UH,s=JSON.stringify(e,(o,a)=>{if(a instanceof ArrayBuffer)return{$$vscode_array_buffer_reference$$:!0,index:i.add(a)};if(ArrayBuffer.isView(a)){const c=jH(a);if(c)return{$$vscode_array_buffer_reference$$:!0,index:i.add(a.buffer),view:{type:c,byteLength:a.byteLength,byteOffset:a.byteOffset}}}return a}),n=i.buffers.map(o=>{const a=new Uint8Array(o);return J.wrap(a)});return{message:s,buffers:n}}else return{message:JSON.stringify(e),buffers:[]}}function jH(e){switch(e.constructor.name){case"Int8Array":return 1;case"Uint8Array":return 2;case"Uint8ClampedArray":return 3;case"Int16Array":return 4;case"Uint16Array":return 5;case"Int32Array":return 6;case"Uint32Array":return 7;case"Float32Array":return 8;case"Float64Array":return 9;case"BigInt64Array":return 10;case"BigUint64Array":return 11}}function HH(e,t){const i=t.map(n=>{const o=new ArrayBuffer(n.byteLength);return new Uint8Array(o).set(n.buffer),o}),r=t.length?(n,o)=>{if(o&&typeof o=="object"&&o.$$vscode_array_buffer_reference$$){const a=o,{index:c}=a,l=i[c];if(a.view)switch(a.view.type){case 1:return new Int8Array(l,a.view.byteOffset,a.view.byteLength/Int8Array.BYTES_PER_ELEMENT);case 2:return new Uint8Array(l,a.view.byteOffset,a.view.byteLength/Uint8Array.BYTES_PER_ELEMENT);case 3:return new Uint8ClampedArray(l,a.view.byteOffset,a.view.byteLength/Uint8ClampedArray.BYTES_PER_ELEMENT);case 4:return new Int16Array(l,a.view.byteOffset,a.view.byteLength/Int16Array.BYTES_PER_ELEMENT);case 5:return new Uint16Array(l,a.view.byteOffset,a.view.byteLength/Uint16Array.BYTES_PER_ELEMENT);case 6:return new Int32Array(l,a.view.byteOffset,a.view.byteLength/Int32Array.BYTES_PER_ELEMENT);case 7:return new Uint32Array(l,a.view.byteOffset,a.view.byteLength/Uint32Array.BYTES_PER_ELEMENT);case 8:return new Float32Array(l,a.view.byteOffset,a.view.byteLength/Float32Array.BYTES_PER_ELEMENT);case 9:return new Float64Array(l,a.view.byteOffset,a.view.byteLength/Float64Array.BYTES_PER_ELEMENT);case 10:return new BigInt64Array(l,a.view.byteOffset,a.view.byteLength/BigInt64Array.BYTES_PER_ELEMENT);case 11:return new BigUint64Array(l,a.view.byteOffset,a.view.byteLength/BigUint64Array.BYTES_PER_ELEMENT);default:throw new Error("Unknown array buffer view type")}return l}return o}:void 0;return{message:JSON.parse(e,r),arrayBuffers:i}}var BH=class{#e;#t;#i;#r;#n;#s;#a;#o;#c;#l;#u;#d;constructor(e,t,i,r,s,n,o){this.#a="",this.#c=!1,this.#l=!1,this._onMessageEmitter=new I,this.onDidReceiveMessage=this._onMessageEmitter.event,this.#h=new I,this._onDidDispose=this.#h.event,this.#e=e,this.#t=t,this.#o=i,this.#r=r,this.#n=s,this.#s=n,this.#u=Rc(n),this.#d=WH(n),this.#i=o}#h;dispose(){this.#c=!0,this.#h.fire(),this.#h.dispose(),this._onMessageEmitter.dispose()}asWebviewUri(e){return this.#l=!0,hh(e,this.#r)}get cspSource(){const e=this.#s.extensionLocation;if(e.scheme===z.https||e.scheme===z.http){let t=e.toString();return t.endsWith("/")||(t+="/"),t+" "+iy}return iy}get html(){return this.a(),this.#a}set html(e){this.a(),this.#a!==e&&(this.#a=e,this.#d&&!this.#l&&/(["'])vscode-resource:([^\s'"]+?)(["'])/i.test(e)&&(this.#l=!0,this.#i.report("Webview vscode-resource: uris",this.#s,"Please migrate to use the 'webview.asWebviewUri' api instead: https://aka.ms/vscode-webview-use-aswebviewuri")),this.#t.$setHtml(this.#e,this.b(e)))}get options(){return this.a(),this.#o}set options(e){this.a(),Ir(this.#o,e)||this.#t.$setOptions(this.#e,J$(this.#s,this.#n,e)),this.#o=e}async postMessage(e){if(this.#c)return!1;const t=_H(e,{serializeBuffersForPostMessage:this.#u});return this.#t.$postMessage(this.#e,t.message,...t.buffers)}a(){if(this.#c)throw new Error("Webview is disposed")}b(e){if(!this.#d)return e;const t=this.#s.extensionLocation?.scheme===z.vscodeRemote,i=this.#s.extensionLocation.scheme===z.vscodeRemote?this.#s.extensionLocation.authority:void 0;return e.replace(/(["'])(?:vscode-resource):(\/\/([^\s\/'"]+?)(?=\/))?([^\s'"]+?)(["'])/gi,(r,s,n,o,a,c)=>{const l=E.from({scheme:o||"file",path:decodeURIComponent(a)}),u=hh(l,{isRemote:t,authority:i}).toString();return`${s}${u}${c}`}).replace(/(["'])(?:vscode-webview-resource):(\/\/[^\s\/'"]+\/([^\s\/'"]+?)(?=\/))?([^\s'"]+?)(["'])/gi,(r,s,n,o,a,c)=>{const l=E.from({scheme:o||"file",path:decodeURIComponent(a)}),u=hh(l,{isRemote:t,authority:i}).toString();return`${s}${u}${c}`})}};function Rc(e){try{const t=G$(q$(e.engines.vscode));return!!t&&t.majorBase>=1&&t.minorBase>=57}catch{return!1}}function WH(e){try{const t=G$(q$(e.engines.vscode));return t?t.majorBase<1||t.majorBase===1&&t.minorBase<60:!1}catch{return!1}}var zH=class extends X{constructor(e,t,i,r,s){super(),this.c=t,this.f=i,this.g=r,this.h=s,this.b=new Map,this.a=e.getProxy(q.MainThreadWebviews)}dispose(){super.dispose();for(const e of this.b.values())e.dispose();this.b.clear()}$onMessage(e,t,i){const r=this.j(e);if(r){const{message:s}=HH(t,i.value);r._onMessageEmitter.fire(s)}}$onMissingCsp(e,t){this.g.warn(`${t} created a webview without a content security policy: https://aka.ms/vscode-webview-missing-csp`)}createNewWebview(e,t,i){const r=new BH(e,this.a,VH(t),this.c,this.f,i,this.h);this.b.set(e,r);const s=r._onDidDispose(()=>{s.dispose(),this.deleteWebview(e)});return r}deleteWebview(e){this.b.delete(e)}j(e){return this.b.get(e)}};function jg(e){return{id:e.identifier,location:e.extensionLocation}}function J$(e,t,i){return{enableCommandUris:i.enableCommandUris,enableScripts:i.enableScripts,enableForms:i.enableForms,portMapping:i.portMapping,ignoreFocus:i.ignoreFocus,localResourceRoots:i.localResourceRoots||qH(e,t),initialState:i.initialState}}function VH(e){return{enableCommandUris:e.enableCommandUris,enableScripts:e.enableScripts,enableForms:e.enableForms,portMapping:e.portMapping,localResourceRoots:e.localResourceRoots?.map(t=>E.from(t))}}function qH(e,t){return[...(t?.getWorkspaceFolders()||[]).map(i=>i.uri),e.extensionLocation]}var _r=class YI{static{this.a=!1}constructor(t){this.d=t,this.b=new Map,this.c=1}add(t){const i=this.c++;return this.b.set(i,t),this.e(),i}get(t,i){return this.b.has(t)?this.b.get(t)[i]:void 0}delete(t){this.b.delete(t),this.e()}e(){YI.a&&console.log(`${this.d} cache size - ${this.b.size}`)}},GH=class{constructor(e,t){this.document=e,this.b=t,this.a=1,this.c=new _r("custom documents")}addEdit(e){return this.c.add([e])}async undo(e,t){await this.f(e).undo(),t||this.disposeBackup()}async redo(e,t){await this.f(e).redo(),t||this.disposeBackup()}disposeEdits(e){for(const t of e)this.c.delete(t)}getNewBackupUri(){if(!this.b)throw new Error("Backup requires a valid storage path");const e=KH(this.document.uri)+this.a++;return Rt(this.b,e)}updateBackup(e){this.d?.delete(),this.d=e}disposeBackup(){this.d?.delete(),this.d=void 0}f(e){const t=this.c.get(e,0);if(!t)throw new Error("No edit found");return t}},JH=class{constructor(){this.a=new Map}get(e,t){return this.a.get(this.b(e,t))}add(e,t,i){const r=this.b(e,t.uri);if(this.a.has(r))throw new Error(`Document already exists for viewType:${e} resource:${t.uri}`);const s=new GH(t,i);return this.a.set(r,s),s}delete(e,t){const i=this.b(e,t.uri);this.a.delete(i)}b(e,t){return`${e}@@@${t}`}},Q$;(function(e){e[e.Text=0]="Text",e[e.Custom=1]="Custom"})(Q$||(Q$={}));var QH=class{constructor(){this.a=new Map}addTextProvider(e,t,i){return this.b(e,{type:0,extension:t,provider:i})}addCustomProvider(e,t,i){return this.b(e,{type:1,extension:t,provider:i})}get(e){return this.a.get(e)}b(e,t){if(this.a.has(e))throw new Error(`Provider for viewType:${e} already registered`);return this.a.set(e,t),new Oe(()=>this.a.delete(e))}},YH=class{constructor(e,t,i,r,s){this.d=t,this.f=i,this.g=r,this.h=s,this.b=new QH,this.c=new JH,this.a=e.getProxy(q.MainThreadCustomEditors)}registerCustomEditorProvider(e,t,i,r){const s=new ue;return XH(i)?(s.add(this.b.addTextProvider(t,e,i)),this.a.$registerTextEditorProvider(jg(e),t,r.webviewOptions||{},{supportsMove:!!i.moveCustomTextEditor},Rc(e))):(s.add(this.b.addCustomProvider(t,e,i)),Hg(i)&&s.add(i.onDidChangeCustomDocument(n=>{const o=this.i(t,n.document.uri);if(ZH(n)){const a=o.addEdit(n);this.a.$onDidEdit(n.document.uri,t,a,n.label)}else this.a.$onContentChange(n.document.uri,t)})),this.a.$registerCustomEditorProvider(jg(e),t,r.webviewOptions||{},!!r.supportsMultipleEditorsPerDocument,Rc(e))),Oe.from(s,new Oe(()=>{this.a.$unregisterEditorProvider(t)}))}async $createCustomDocument(e,t,i,r,s){const n=this.b.get(t);if(!n)throw new Error(`No provider found for '${t}'`);if(n.type!==1)throw new Error(`Invalid provide type for '${t}'`);const o=E.revive(e),a=await n.provider.openCustomDocument(o,{backupId:i,untitledDocumentData:r?.buffer},s);let c;return Hg(n.provider)&&this.f&&(c=this.f.workspaceValue(n.extension)??this.f.globalValue(n.extension)),this.c.add(t,a,c),{editable:Hg(n.provider)}}async $disposeCustomDocument(e,t){const i=this.b.get(t);if(!i)throw new Error(`No provider found for '${t}'`);if(i.type!==1)throw new Error(`Invalid provider type for '${t}'`);const r=E.revive(e),{document:s}=this.i(t,r);this.c.delete(t,s),s.dispose()}async $resolveCustomEditor(e,t,i,r,s,n){const o=this.b.get(i);if(!o)throw new Error(`No provider found for '${i}'`);const a=zt.to(s),c=this.g.createNewWebview(t,r.contentOptions,o.extension),l=this.h.createNewWebviewPanel(t,i,r.title,a,r.options,c,r.active),u=E.revive(e);switch(o.type){case 1:{const{document:h}=this.i(i,u);return o.provider.resolveCustomEditor(h,l,n)}case 0:{const h=this.d.getDocument(u);return o.provider.resolveCustomTextEditor(h,l,n)}default:throw new Error("Unknown webview provider type")}}$disposeEdits(e,t,i){this.i(t,e).disposeEdits(i)}async $onMoveCustomEditor(e,t,i){const r=this.b.get(i);if(!r)throw new Error(`No provider found for '${i}'`);if(!r.provider.moveCustomTextEditor)throw new Error(`Provider does not implement move '${i}'`);const s=this.h.getWebviewPanel(e);if(!s)throw new Error("No webview found");const n=E.revive(t),o=this.d.getDocument(n);await r.provider.moveCustomTextEditor(o,s,Ge.None)}async $undo(e,t,i,r){return this.i(t,e).undo(i,r)}async $redo(e,t,i,r){return this.i(t,e).redo(i,r)}async $revert(e,t,i){const r=this.i(t,e);await this.j(t).revertCustomDocument(r.document,i),r.disposeBackup()}async $onSave(e,t,i){const r=this.i(t,e);await this.j(t).saveCustomDocument(r.document,i),r.disposeBackup()}async $onSaveAs(e,t,i,r){const s=this.i(t,e);return this.j(t).saveCustomDocumentAs(s.document,E.revive(i),r)}async $backup(e,t,i){const r=this.i(t,e),n=await this.j(t).backupCustomDocument(r.document,{destination:r.getNewBackupUri()},i);return r.updateBackup(n),n.id}i(e,t){const i=this.c.get(e,E.revive(t));if(!i)throw new Error("No custom document found");return i}j(e){const i=this.b.get(e)?.provider;if(!i||!Hg(i))throw new Error("Custom document is not editable");return i}};function Hg(e){return!!e.onDidChangeCustomDocument}function XH(e){return typeof e.resolveCustomTextEditor=="function"}function ZH(e){return typeof e.undo=="function"&&typeof e.redo=="function"}function KH(e){const t=e.scheme===z.file||e.scheme===z.untitled?e.fsPath:e.toString();return Is(t)+""}var Go,Y$=class XI{#e;#t;#i;constructor(t,i,r,s,n,o,a,c,l){this.d=t,this.e=i,this.f=r,this.g=s,this.h=n,this.j=l,this.c=!1,this.f=Math.max(s,r),this.#i=new Gt(u=>o.getComparisonKey(u)),this.#e=a,this.#t=c}dispose(){this.c||(this.#t.fire([...this.#i.keys()]),this.#e?.$clear(this.e),this.#i.clear(),this.c=!0)}get name(){return this.k(),this.d}set(t,i){if(!t){this.clear();return}this.j&&i?.forEach(o=>{!o.extensionID&&(o.extensionID=this.j)}),this.k();let r=[];if(E.isUri(t)){if(!i){this.delete(t);return}this.#i.set(t,i.slice()),r=[t]}else if(Array.isArray(t)){r=[];let o;t=[...t].sort(XI.l);for(const a of t){const[c,l]=a;if((!o||c.toString()!==o.toString())&&(o&&this.#i.get(o).length===0&&this.#i.delete(o),o=c,r.push(c),this.#i.set(c,[])),l)this.#i.get(c)?.push(...l);else{const u=this.#i.get(c);u&&(u.length=0)}}}if(this.#t.fire(r),!this.#e)return;const s=[];let n=0;for(const o of r){let a=[];const c=this.#i.get(o);if(c)if(c.length>this.g){a=[];const l=[li.Error,li.Warning,li.Information,li.Hint];e:for(let u=0;u<4;u++)for(const h of c)if(h.severity===l[u]&&a.push({...oc.from(h),modelVersionId:this.h(o),extensionID:this.j})===this.g)break e;a.push({severity:Pi.Info,message:p(3005,null,c.length-this.g),startLineNumber:a[a.length-1].startLineNumber,startColumn:a[a.length-1].startColumn,endLineNumber:a[a.length-1].endLineNumber,endColumn:a[a.length-1].endColumn,extensionID:this.j})}else a=c.map(l=>({...oc.from(l),modelVersionId:this.h(o),extensionID:this.j}));if(s.push([o,a]),n+=a.length,n>this.f)break}this.#e.$changeMany(this.e,s)}delete(t){this.k(),this.#t.fire([t]),this.#i.delete(t),this.#e?.$changeMany(this.e,[[t,void 0]])}clear(){this.k(),this.#t.fire([...this.#i.keys()]),this.#i.clear(),this.#e?.$clear(this.e)}forEach(t,i){this.k();for(const[r,s]of this)t.call(i,r,s,this)}*[Symbol.iterator](){this.k();for(const t of this.#i.keys())yield[t,this.get(t)]}get(t){this.k();const i=this.#i.get(t);return Array.isArray(i)?Object.freeze(i.slice(0)):[]}has(t){return this.k(),Array.isArray(this.#i.get(t))}k(){if(this.c)throw new Error("illegal state - object is disposed")}static l(t,i){return t[0].toString()<i[0].toString()?-1:t[0].toString()>i[0].toString()?1:0}},ry=class{static{Go=this}static{this.c=0}static{this.d=1e3}static{this.e=1.1*this.d}static _mapper(t){const i=new Gt;for(const r of t)i.set(r,r);return{uris:Object.freeze(Array.from(i.values()))}}constructor(t,i,r,s){this.j=i,this.k=r,this.l=s,this.g=new Map,this.h=new TD({merge:n=>n.flat(),delay:50}),this.onDidChangeDiagnostics=ze.map(this.h.event,Go._mapper),this.f=t.getProxy(q.MainThreadDiagnostics)}createDiagnosticCollection(t,i){const{g:r,f:s,h:n,j:o,k:a,l:c}=this,l=new class{$changeMany(d,f){s.$changeMany(d,f),o.trace("[DiagnosticCollection] change many (extension, owner, uris)",t.value,d,f.length===0?"CLEARING":f)}$clear(d){s.$clear(d),o.trace("[DiagnosticCollection] remove all (extension, owner)",t.value,d)}dispose(){s.dispose()}};let u;if(!i)i="_generated_diagnostic_collection_name_#"+Go.c++,u=i;else if(!r.has(i))u=i;else{this.j.warn(`DiagnosticCollection with name '${i}' does already exist.`);do u=i+Go.c++;while(r.has(u))}return new class extends Y${constructor(){super(i,u,Go.e,Go.d,d=>c.getDocument(d)?.version,a.extUri,l,n,t.value),r.set(u,this)}dispose(){super.dispose(),r.delete(u)}}}getDiagnostics(t){if(t)return this.m(t);{const i=new Map,r=[];for(const s of this.g.values())s.forEach((n,o)=>{let a=i.get(n.toString());typeof a>"u"&&(a=r.length,i.set(n.toString(),a),r.push([n,[]])),r[a][1]=r[a][1].concat(...o)});return r}}m(t){let i=[];for(const r of this.g.values())r.has(t)&&(i=i.concat(r.get(t)));return i}$acceptMarkersChange(t){if(!this.n){const i="_generated_mirror",r=new Y$(i,i,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,s=>{},this.k.extUri,void 0,this.h);this.g.set(i,r),this.n=r}for(const[i,r]of t)this.n.set(E.revive(i),r.map(oc.to))}};ry=Go=__decorate([__param(1,Ce),__param(2,$a)],ry);var eB=class{constructor(e){this.a=e.getProxy(q.MainThreadDialogs)}showOpenDialog(e,t){return t?.allowUIResources&&A(e,"showLocal"),this.a.$showOpenDialog(t).then(i=>i?i.map(r=>E.revive(r)):void 0)}showSaveDialog(e){return this.a.$showSaveDialog(e).then(t=>t?E.revive(t):void 0)}},tB=class ZI{static{this.a=0}constructor(t,i,r){this.d=i,this.e=r,this.b=new Map,this.c=t.getProxy(q.MainThreadDocumentContentProviders)}registerTextDocumentContentProvider(t,i){if(Object.keys(z).indexOf(t)>=0)throw new Error(`scheme '${t}' already registered`);const r=ZI.a++;this.b.set(r,i),this.c.$registerTextContentProvider(r,t);let s;if(typeof i.onDidChange=="function"){let n;s=i.onDidChange(async o=>{if(o.scheme!==t){this.e.warn(`Provider for scheme '${t}' is firing event for schema '${o.scheme}' which will be IGNORED`);return}if(!this.d.getDocument(o))return;n&&await n;const a=this.$provideTextDocumentContent(r,o).then(async c=>{if(!c&&typeof c!="string")return;const l=this.d.getDocument(o);if(!l)return;const u=C5(c);if(!l.equalLines(u))return this.c.$onVirtualDocumentChange(o,c)}).catch(Et).finally(()=>{n===a&&(n=void 0)});n=a})}return new Oe(()=>{this.b.delete(r)&&this.c.$unregisterTextContentProvider(r),s&&(s.dispose(),s=void 0)})}$provideTextDocumentContent(t,i){const r=this.b.get(t);return r?Promise.resolve(r.provideTextDocumentContent(E.revive(i),Ge.None)):Promise.reject(new Error(`unsupported uri-scheme: ${i.scheme}`))}},iB=class{constructor(e,t,i,r={timeout:1500,errors:3}){this.c=e,this.d=t,this.f=i,this.g=r,this.a=new Kc,this.b=new WeakMap}dispose(){this.a.clear()}getOnWillSaveTextDocumentEvent(e){return(t,i,r)=>{const n={dispose:this.a.push([t,i,e])};return Array.isArray(r)&&r.push(n),n}}async $participateInSave(e,t){const i=E.revive(e);let r=!1;const s=setTimeout(()=>r=!0,this.g.timeout),n=[];try{for(const o of[...this.a]){if(r)break;const a=this.d.getDocument(i),c=await this.h(o,{document:a,reason:Ip.to(t)});n.push(c)}}finally{clearTimeout(s)}return n}h([e,t,i],r){const s=this.b.get(e);return typeof s=="number"&&s>this.g.errors?Promise.resolve(!1):this.i(i,e,t,r).then(()=>!0,n=>{if(this.c.error(`onWillSaveTextDocument-listener from extension '${i.identifier.value}' threw ERROR`),this.c.error(n),!(n instanceof Error)||n.message!=="concurrent_edits"){const o=this.b.get(e);this.b.set(e,o?o+1:1),typeof o=="number"&&o>this.g.errors&&this.c.info(`onWillSaveTextDocument-listener from extension '${i.identifier.value}' will now be IGNORED because of timeouts and/or errors`)}return!1})}i(e,t,i,r){const s=[],n=Date.now(),{document:o,reason:a}=r,{version:c}=o,l=Object.freeze({document:o,reason:a,waitUntil(u){if(Object.isFrozen(s))throw Fm("waitUntil can not be called async");s.push(Promise.resolve(u))}});try{t.apply(i,[l])}catch(u){return Promise.reject(u)}return Object.freeze(s),new Promise((u,h)=>{const d=setTimeout(()=>h(new Error("timeout")),this.g.timeout);return Promise.all(s).then(f=>{this.c.debug(`onWillSaveTextDocument-listener from extension '${e.identifier.value}' finished after ${Date.now()-n}ms`),clearTimeout(d),u(f)}).catch(f=>{clearTimeout(d),h(f)})}).then(u=>{const h={edits:[]};for(const d of u)if(Array.isArray(d)&&d.every(f=>f instanceof Cn))for(const{newText:f,newEol:g,range:v}of d)h.edits.push({resource:o.uri,versionId:void 0,textEdit:{range:v&&O.from(v),text:f,eol:g&&hc.from(g)}});if(h.edits.length!==0)return c===o.version?this.f.$tryApplyWorkspaceEdit(new Zi(h)):Promise.reject(new Error("concurrent_edits"))})}},rB=class{constructor(e,t){this.a=new I,this.b=new I,this.c=new I,this.d=new I,this.onDidAddDocument=this.a.event,this.onDidRemoveDocument=this.b.event,this.onDidChangeDocument=this.c.event,this.onDidSaveDocument=this.d.event,this.e=new ue,this.h=new Map,this.f=e.getProxy(q.MainThreadDocuments),this.g=t,this.g.onDidRemoveDocuments(i=>{for(const r of i)this.b.fire(r.document)},void 0,this.e),this.g.onDidAddDocuments(i=>{for(const r of i)this.a.fire(r.document)},void 0,this.e)}dispose(){this.e.dispose()}getAllDocumentData(){return[...this.g.allDocuments()]}getDocumentData(e){if(!e)return;const t=this.g.getDocument(e);if(t)return t}getDocument(e){const t=this.getDocumentData(e);if(!t?.document)throw new Error(`Unable to retrieve document from URI '${e}'`);return t.document}ensureDocumentData(e){const t=this.g.getDocument(e);if(t)return Promise.resolve(t);let i=this.h.get(e.toString());return i||(i=this.f.$tryOpenDocument(e).then(r=>{this.h.delete(e.toString());const s=E.revive(r);return ga(this.g.getDocument(s))},r=>(this.h.delete(e.toString()),Promise.reject(r))),this.h.set(e.toString(),i)),i}createDocumentData(e){return this.f.$tryCreateDocument(e).then(t=>E.revive(t))}$acceptModelLanguageChanged(e,t){const i=E.revive(e),r=this.g.getDocument(i);if(!r)throw new Error("unknown document");this.b.fire(r.document),r._acceptLanguageId(t),this.a.fire(r.document)}$acceptModelSaved(e){const t=E.revive(e),i=this.g.getDocument(t);if(!i)throw new Error("unknown document");this.$acceptDirtyStateChanged(e,!1),this.d.fire(i.document)}$acceptDirtyStateChanged(e,t){const i=E.revive(e),r=this.g.getDocument(i);if(!r)throw new Error("unknown document");r._acceptIsDirty(t),this.c.fire({document:r.document,contentChanges:[],reason:void 0})}$acceptModelChanged(e,t,i){const r=E.revive(e),s=this.g.getDocument(r);if(!s)throw new Error("unknown document");s._acceptIsDirty(i),s.onEvents(t);let n;t.isUndoing?n=Zl.Undo:t.isRedoing&&(n=Zl.Redo),this.c.fire(GE({document:s.document,contentChanges:t.changes.map(o=>({range:O.to(o.range),rangeOffset:o.rangeOffset,rangeLength:o.rangeLength,text:o.text})),reason:n}))}setWordDefinitionFor(e,t){MU(e,t)}},sB=class{constructor(e){this.b=new Map,this.c=new I,this.onDidChange=this.c.event,this.d=new Set,this.e=0,this.a=e.getProxy(q.MainThreadEmbeddings)}registerEmbeddingsProvider(e,t,i){if(this.d.has(t))throw new Error("An embeddings provider for this model is already registered");const r=this.e++;return this.a.$registerEmbeddingProvider(r,t),this.b.set(r,{id:t,provider:i}),ee(()=>{this.d.delete(t),this.a.$unregisterEmbeddingProvider(r),this.b.delete(r)})}async computeEmbeddings(e,t,i){i??=Ge.None;let r=!1;typeof t=="string"&&(t=[t],r=!0);const s=await this.a.$computeEmbeddings(e,t,i);if(s.length!==t.length)throw new Error;if(r){if(s.length!==1)throw new Error;return s[0]}return s}async $provideEmbeddings(e,t,i){const r=this.b.get(e);if(!r)return[];const s=await r.provider.provideEmbeddings(t,i);return s||[]}get embeddingsModels(){return Array.from(this.d)}$acceptEmbeddingModels(e){this.d=new Set(e),this.c.fire()}},X$;(function(e){e[e.Invalid=0]="Invalid",e[e.Start=1]="Start",e[e.H=2]="H",e[e.HT=3]="HT",e[e.HTT=4]="HTT",e[e.HTTP=5]="HTTP",e[e.F=6]="F",e[e.FI=7]="FI",e[e.FIL=8]="FIL",e[e.BeforeColon=9]="BeforeColon",e[e.AfterColon=10]="AfterColon",e[e.AlmostThere=11]="AlmostThere",e[e.End=12]="End",e[e.Accept=13]="Accept",e[e.LastKnownState=14]="LastKnownState"})(X$||(X$={}));var nB=class{constructor(e,t,i){const r=new Uint8Array(e*t);for(let s=0,n=e*t;s<n;s++)r[s]=i;this.a=r,this.rows=e,this.cols=t}get(e,t){return this.a[e*this.cols+t]}set(e,t,i){this.a[e*this.cols+t]=i}},Z$=class{constructor(e){let t=0,i=0;for(let s=0,n=e.length;s<n;s++){const[o,a,c]=e[s];a>t&&(t=a),o>i&&(i=o),c>i&&(i=c)}t++,i++;const r=new nB(i,t,0);for(let s=0,n=e.length;s<n;s++){const[o,a,c]=e[s];r.set(o,a,c)}this.a=r,this.b=t}nextState(e,t){return t<0||t>=this.b?0:this.a.get(e,t)}},sy=null;function oB(){return sy===null&&(sy=new Z$([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),sy}var K$;(function(e){e[e.None=0]="None",e[e.ForceTermination=1]="ForceTermination",e[e.CannotEndIn=2]="CannotEndIn"})(K$||(K$={}));var dh=null;function aB(){if(dh===null){dh=new Uk(0);const e=` 	<>'"\u3001\u3002\uFF61\uFF64\uFF0C\uFF0E\uFF1A\uFF1B\u2018\u3008\u300C\u300E\u3014\uFF08\uFF3B\uFF5B\uFF62\uFF63\uFF5D\uFF3D\uFF09\u3015\u300F\u300D\u3009\u2019\uFF40\uFF5E\u2026`;for(let i=0;i<e.length;i++)dh.set(e.charCodeAt(i),1);const t=".,;:";for(let i=0;i<t.length;i++)dh.set(t.charCodeAt(i),2)}return dh}var cB=class D4{static a(t,i,r,s,n){let o=n-1;do{const a=i.charCodeAt(o);if(t.get(a)!==2)break;o--}while(o>s);if(s>0){const a=i.charCodeAt(s-1),c=i.charCodeAt(o);(a===40&&c===41||a===91&&c===93||a===123&&c===125)&&o--}return{range:{startLineNumber:r,startColumn:s+1,endLineNumber:r,endColumn:o+2},url:i.substring(s,o+1)}}static computeLinks(t,i=oB()){const r=aB(),s=[];for(let n=1,o=t.getLineCount();n<=o;n++){const a=t.getLineContent(n),c=a.length;let l=0,u=0,h=0,d=1,f=!1,g=!1,v=!1,y=!1;for(;l<c;){let S=!1;const x=a.charCodeAt(l);if(d===13){let P;switch(x){case 40:f=!0,P=0;break;case 41:P=f?0:1;break;case 91:v=!0,g=!0,P=0;break;case 93:v=!1,P=g?0:1;break;case 123:y=!0,P=0;break;case 125:P=y?0:1;break;case 39:case 34:case 96:h===x?P=1:h===39||h===34||h===96?P=0:P=1;break;case 42:P=h===42?1:0;break;case 124:P=h===124?1:0;break;case 32:P=v?0:1;break;default:P=r.get(x)}P===1&&(s.push(D4.a(r,a,n,u,l)),S=!0)}else if(d===12){let P;x===91?(g=!0,P=0):P=r.get(x),P===1?S=!0:d=13}else d=i.nextState(d,x),d===0&&(S=!0);S&&(d=1,f=!1,g=!1,y=!1,u=l+1,h=x),l++}d===13&&s.push(D4.a(r,a,n,u,c))}return s}},lB=class{constructor(){this.a=[]}add(e){this.b=void 0,this.a.push(e)}delete(e){const t=this.a.indexOf(e);t>=0&&(this.a.splice(t,1),this.b=void 0)}c(){if(!this.b){const e=this.a.sort(),t=[];let i,r,s=14,n=14;for(const o of e){let a=i?pA(i,o):0;for(a===0?r=1:r=n;a<o.length;a++)a+1===o.length?(s=n,n=9):n+=1,t.push([r,o.toUpperCase().charCodeAt(a),n]),t.push([r,o.toLowerCase().charCodeAt(a),n]),r=n;i=o,n=s}t.push([9,58,10]),t.push([10,47,12]),this.b=new Z$(t)}}provideDocumentLinks(e){this.c();const t=[],i=cB.computeLinks({getLineContent(r){return e.lineAt(r-1).text},getLineCount(){return e.lineCount}},this.b);for(const r of i){const s=_o.to(r);s.target&&t.push(s)}return t}},uB=class A4{constructor(t,i){this.i=i,this.b=new lB,this.c=new Map,this.d=new Set,this.f=new Map,this.h=0,this.a=t.getProxy(q.MainThreadFileSystem)}dispose(){this.g?.dispose()}registerFileSystemProvider(t,i,r,s={}){if(A4.j(r),this.d.has(i))throw new Error(`a provider for the scheme '${i}' is already registered`);this.g||(this.g=this.i.registerDocumentLinkProvider(t,"*",this.b));const n=this.h++;this.b.add(i),this.d.add(i),this.c.set(n,r);let o=2;s.isCaseSensitive&&(o+=1024),s.isReadonly&&(o+=2048),typeof r.copy=="function"&&(o+=8),typeof r.open=="function"&&typeof r.close=="function"&&typeof r.read=="function"&&typeof r.write=="function"&&(A(t,"fsChunks"),o+=4);let a;s.isReadonly&&po(s.isReadonly)&&s.isReadonly.value!==""&&(a={value:s.isReadonly.value,isTrusted:s.isReadonly.isTrusted,supportThemeIcons:s.isReadonly.supportThemeIcons,supportHtml:s.isReadonly.supportHtml,baseUri:s.isReadonly.baseUri,uris:s.isReadonly.uris}),this.a.$registerFileSystemProvider(n,i,o,a).catch(l=>{console.error(`FAILED to register filesystem provider of ${t.identifier.value}-extension for the scheme ${i}`),console.error(l)});const c=r.onDidChangeFile(l=>{const u=[];for(const h of l){const{uri:d,type:f}=h;if(d.scheme!==i)continue;let g;switch(f){case Za.Changed:g=0;break;case Za.Created:g=1;break;case Za.Deleted:g=2;break;default:throw new Error("Unknown FileChangeType")}u.push({resource:d,type:g})}this.a.$onFileSystemChange(n,u)});return ee(()=>{c.dispose(),this.b.delete(i),this.d.delete(i),this.c.delete(n),this.a.$unregisterProvider(n)})}static j(t){if(!t)throw new Error("MISSING provider");if(typeof t.watch!="function")throw new Error("Provider does NOT implement watch");if(typeof t.stat!="function")throw new Error("Provider does NOT implement stat");if(typeof t.readDirectory!="function")throw new Error("Provider does NOT implement readDirectory");if(typeof t.createDirectory!="function")throw new Error("Provider does NOT implement createDirectory");if(typeof t.readFile!="function")throw new Error("Provider does NOT implement readFile");if(typeof t.writeFile!="function")throw new Error("Provider does NOT implement writeFile");if(typeof t.delete!="function")throw new Error("Provider does NOT implement delete");if(typeof t.rename!="function")throw new Error("Provider does NOT implement rename")}static k(t){const{type:i,ctime:r,mtime:s,size:n,permissions:o}=t;return{type:i,ctime:r,mtime:s,size:n,permissions:o}}$stat(t,i){return Promise.resolve(this.l(t).stat(E.revive(i))).then(r=>A4.k(r))}$readdir(t,i){return Promise.resolve(this.l(t).readDirectory(E.revive(i)))}$readFile(t,i){return Promise.resolve(this.l(t).readFile(E.revive(i))).then(r=>J.wrap(r))}$writeFile(t,i,r,s){return Promise.resolve(this.l(t).writeFile(E.revive(i),r.buffer,s))}$delete(t,i,r){return Promise.resolve(this.l(t).delete(E.revive(i),r))}$rename(t,i,r,s){return Promise.resolve(this.l(t).rename(E.revive(i),E.revive(r),s))}$copy(t,i,r,s){const n=this.l(t);if(!n.copy)throw new Error('FileSystemProvider does not implement "copy"');return Promise.resolve(n.copy(E.revive(i),E.revive(r),s))}$mkdir(t,i){return Promise.resolve(this.l(t).createDirectory(E.revive(i)))}$watch(t,i,r,s){const n=this.l(t).watch(E.revive(r),s);this.f.set(i,n)}$unwatch(t,i){const r=this.f.get(i);r&&(r.dispose(),this.f.delete(i))}$open(t,i,r){const s=this.l(t);if(!s.open)throw new Error('FileSystemProvider does not implement "open"');return Promise.resolve(s.open(E.revive(i),r))}$close(t,i){const r=this.l(t);if(!r.close)throw new Error('FileSystemProvider does not implement "close"');return Promise.resolve(r.close(i))}$read(t,i,r,s){const n=this.l(t);if(!n.read)throw new Error('FileSystemProvider does not implement "read"');const o=J.alloc(s);return Promise.resolve(n.read(i,r,o.buffer,0,s)).then(a=>o.slice(0,a))}$write(t,i,r,s){const n=this.l(t);if(!n.write)throw new Error('FileSystemProvider does not implement "write"');return Promise.resolve(n.write(i,r,s.buffer,0,s.byteLength))}l(t){const i=this.c.get(t);if(!i){const r=new Error;throw r.name="ENOPRO",r.message="no provider",r}return i}};function eC(e){return typeof e.correlationId=="number"}function hB(e){return e.recursive===!0}var tC=class KI extends X{static{this.a=5}constructor(t,i,r,s){super(),this.h=t,this.j=i,this.m=r,this.n=s,this.c=this.B(new vs),this.f=void 0,this.g=0}s(){const t=new ue;this.c.value=t,this.b=this.r(t),this.b.setVerboseLogging(this.m),t.add(this.b.onDidChangeFile(i=>this.h(i))),t.add(this.b.onDidLogMessage(i=>this.j(i))),t.add(this.b.onDidError(i=>this.t(i.error,i.request)))}t(t,i){this.u(t,i)?this.g<KI.a&&this.f?(this.y(`restarting watcher after unexpected error: ${t}`),this.w(this.f)):this.y(`gave up attempting to restart watcher after unexpected error: ${t}`):this.y(t)}u(t,i){return!(!this.n.restartOnError||i||t.indexOf("No space left on device")!==-1||t.indexOf("EMFILE")!==-1)}w(t){this.g++,this.s(),this.watch(t)}async watch(t){this.f=t,await this.b?.watch(t)}async setVerboseLogging(t){this.m=t,await this.b?.setVerboseLogging(t)}y(t){this.j({type:"error",message:`[File Watcher (${this.n.type})] ${t}`})}z(t){this.j({type:"trace",message:`[File Watcher (${this.n.type})] ${t}`})}dispose(){return this.b=void 0,super.dispose()}},dB=class extends tC{constructor(e,t,i){super(e,t,i,{type:"node.js",restartOnError:!1})}},fB=class extends tC{constructor(e,t,i){super(e,t,i,{type:"universal",restartOnError:!0})}};function iC(e){return e.map(t=>({type:t.type,resource:E.revive(t.resource),cId:t.cId}))}function pB(e){const t=new gB;for(const i of e)t.processEvent(i);return t.coalesce()}function rC(e,t){return typeof t=="string"&&!t.startsWith(So)&&!lr(t)?{base:e,pattern:t}:t}function sC(e,t){const i=[];for(const r of t)i.push(Di(rC(e,r)));return i}var gB=class{constructor(){this.a=new Set,this.b=new Map}c(e){return At?e.resource.fsPath:e.resource.fsPath.toLowerCase()}processEvent(e){const t=this.b.get(this.c(e));let i=!1;if(t){const r=t.type,s=e.type;t.resource.fsPath!==e.resource.fsPath&&(e.type===2||e.type===1)?i=!0:r===1&&s===2?(this.b.delete(this.c(e)),this.a.delete(t)):r===2&&s===1?t.type=0:r===1&&s===0||(t.type=s)}else i=!0;i&&(this.a.add(e),this.b.set(this.c(e),e))}coalesce(){const e=[],t=[];return Array.from(this.a).filter(i=>i.type!==2?(e.push(i),!1):!0).sort((i,r)=>i.resource.fsPath.length-r.resource.fsPath.length).filter(i=>t.some(r=>IN(i.resource.fsPath,r,!At))?!1:(t.push(i.resource.fsPath),!0)).concat(e)}};function mB(e,t){if(typeof t=="number")switch(e.type){case 1:return(t&4)===0;case 2:return(t&8)===0;case 0:return(t&2)===0}return!1}function vB(e){if(typeof e=="number"){const t=[];return e&4&&t.push("Added"),e&8&&t.push("Deleted"),e&2&&t.push("Updated"),t.length===0?"<all>":`[${t.join(", ")}]`}return"<none>"}var wB=class{get ignoreCreateEvents(){return!!(this.h&1)}get ignoreChangeEvents(){return!!(this.h&2)}get ignoreDeleteEvents(){return!!(this.h&4)}constructor(e,t,i,r,s,n,o){this.a=Math.random(),this.b=new I,this.c=new I,this.d=new I,this.h=0,o.ignoreCreateEvents&&(this.h+=1),o.ignoreChangeEvents&&(this.h+=2),o.ignoreDeleteEvents&&(this.h+=4);const a=Di(n),c=typeof n=="string",l=o.correlate,u=s(h=>{if(!(typeof h.session=="number"&&h.session!==this.a)&&!(l&&typeof h.session>"u")){if(!o.ignoreCreateEvents)for(const d of h.created){const f=E.revive(d);a(f.fsPath)&&(!c||i.getWorkspaceFolder(f))&&this.b.fire(f)}if(!o.ignoreChangeEvents)for(const d of h.changed){const f=E.revive(d);a(f.fsPath)&&(!c||i.getWorkspaceFolder(f))&&this.c.fire(f)}if(!o.ignoreDeleteEvents)for(const d of h.deleted){const f=E.revive(d);a(f.fsPath)&&(!c||i.getWorkspaceFolder(f))&&this.d.fire(f)}}});this.g=Oe.from(this.i(e,i,t,r,n,o,o.correlate),this.b,this.c,this.d,u)}i(e,t,i,r,s,n,o){const a=Oe.from();if(typeof s=="string"||n.ignoreChangeEvents&&n.ignoreCreateEvents&&n.ignoreDeleteEvents)return a;const c=e.getProxy(q.MainThreadFileSystemEventService);let l=!1;(s.pattern.includes(So)||s.pattern.includes(gv))&&(l=!0);const u=n.excludes??[];let h,d;if(o)(n.ignoreChangeEvents||n.ignoreCreateEvents||n.ignoreDeleteEvents)&&(d=14,n.ignoreChangeEvents&&(d&=-3),n.ignoreCreateEvents&&(d&=-5),n.ignoreDeleteEvents&&(d&=-9));else if(l&&u.length===0){const f=t.getWorkspaceFolder(E.revive(s.baseUri)),g=i.getConfiguration("files",f).get("watcherExclude");if(g)for(const v in g)v&&g[v]===!0&&u.push(v)}else if(!l){const f=t.getWorkspaceFolder(E.revive(s.baseUri));if(f){const g=i.getConfiguration("files",f).get("watcherExclude");if(g){for(const v in g)if(v&&g[v]===!0){const y=`${Gr(v,"/")}/${So}`;h||(h=[]),h.push(rC(f.uri.fsPath,y))}}if(!h||h.length===0)return a}}return c.$watch(r.identifier.value,this.a,s.baseUri,{recursive:l,excludes:u,includes:h,filter:d},!!o),Oe.from({dispose:()=>c.$unwatch(this.a)})}dispose(){this.g.dispose()}get onDidCreate(){return this.b.event}get onDidChange(){return this.c.event}get onDidDelete(){return this.d.event}},bB=class{constructor(e){this.a=e,this.session=this.a.session,this.b=new Hi(()=>this.a.created.map(E.revive)),this.c=new Hi(()=>this.a.changed.map(E.revive)),this.d=new Hi(()=>this.a.deleted.map(E.revive))}get created(){return this.b.value}get changed(){return this.c.value}get deleted(){return this.d.value}},yB=class{constructor(e,t,i){this.j=e,this.k=t,this.l=i,this.a=new I,this.b=new I,this.c=new I,this.d=new I,this.g=new el,this.h=new el,this.i=new el,this.onDidRenameFile=this.b.event,this.onDidCreateFile=this.c.event,this.onDidDeleteFile=this.d.event}createFileSystemWatcher(e,t,i,r,s){return new wB(this.j,t,e,i,this.a.event,Vi.from(r),s)}$onFileEvent(e){this.a.fire(new bB(e))}$onDidRunFileOperation(e,t){switch(e){case 2:this.b.fire(Object.freeze({files:t.map(i=>({oldUri:E.revive(i.source),newUri:E.revive(i.target)}))}));break;case 1:this.d.fire(Object.freeze({files:t.map(i=>E.revive(i.target))}));break;case 0:case 3:this.c.fire(Object.freeze({files:t.map(i=>E.revive(i.target))}));break;default:}}getOnWillRenameFileEvent(e){return this.m(e,this.g)}getOnWillCreateFileEvent(e){return this.m(e,this.h)}getOnWillDeleteFileEvent(e){return this.m(e,this.i)}m(e,t){return(i,r,s)=>{const n=function(a){i.call(r,a)};return n.extension=e,t.event(n,void 0,s)}}async $onWillRunFileOperation(e,t,i,r){switch(e){case 2:return await this.n(this.g,{files:t.map(s=>({oldUri:E.revive(s.source),newUri:E.revive(s.target)}))},i,r);case 1:return await this.n(this.i,{files:t.map(s=>E.revive(s.target))},i,r);case 0:case 3:return await this.n(this.h,{files:t.map(s=>E.revive(s.target))},i,r)}}async n(e,t,i,r){const s=new Set,n=[];if(await e.fireAsync(t,r,async(a,c)=>{const l=Date.now(),u=await Promise.resolve(a);u instanceof In&&(n.push([c.extension,u]),s.add(c.extension.displayName??c.extension.identifier.value)),Date.now()-l>i&&this.k.warn("SLOW file-participant",c.extension.identifier)}),r.isCancellationRequested||n.length===0)return;const o={edits:[]};for(const[,a]of n){const{edits:c}=fi.from(a,{getTextDocumentVersion:l=>this.l.getDocument(l)?.version,getNotebookDocumentVersion:()=>{}});o.edits=o.edits.concat(c)}return{edit:o,extensionNames:Array.from(s)}}},EB=class{constructor(e,t,i,r,s){this.a=t,this.b=i,this.c=r;const n=new me("interactive.open","_interactive.open","Open interactive window and return notebook editor and input URI",[new U("showOptions","Show Options",o=>!0,o=>o),new U("resource","Interactive resource Uri",o=>!0,o=>o),new U("controllerId","Notebook controller Id",o=>!0,o=>o),new U("title","Interactive editor title",o=>!0,o=>o)],new ge("Notebook and input URI",o=>{if(s.debug("[ExtHostInteractive] open iw with notebook editor id",o.notebookEditorId),o.notebookEditorId!==void 0){const a=this.a.getEditorById(o.notebookEditorId);return s.debug("[ExtHostInteractive] notebook editor found",a.id),{notebookUri:E.revive(o.notebookUri),inputUri:E.revive(o.inputUri),notebookEditor:a.apiEditor}}return s.debug("[ExtHostInteractive] notebook editor not found, uris for the interactive document",o.notebookUri,o.inputUri),{notebookUri:E.revive(o.notebookUri),inputUri:E.revive(o.inputUri)}}));this.c.registerApiCommand(n)}$willAddInteractiveDocument(e,t,i,r){this.b.acceptDocumentsAndEditorsDelta({addedDocuments:[{EOL:t,lines:[""],languageId:i,uri:e,isDirty:!1,versionId:1}]})}$willRemoveInteractiveDocument(e,t){this.b.acceptDocumentsAndEditorsDelta({removedDocuments:[e]})}},SB=class{constructor(e){this.b=0,this.a=e.getProxy(q.MainThreadLabelService)}$registerResourceLabelFormatter(e){const t=this.b++;return this.a.$registerResourceLabelFormatter(t,e),ee(()=>{this.a.$unregisterResourceLabelFormatter(t)})}},nC;(function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"})(nC||(nC={}));var xB=class br extends et{constructor(t,i,r,s){super(t,i,r,s),this.selectionStartLineNumber=t,this.selectionStartColumn=i,this.positionLineNumber=r,this.positionColumn=s}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(t){return br.selectionsEqual(this,t)}static selectionsEqual(t,i){return t.selectionStartLineNumber===i.selectionStartLineNumber&&t.selectionStartColumn===i.selectionStartColumn&&t.positionLineNumber===i.positionLineNumber&&t.positionColumn===i.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(t,i){return this.getDirection()===0?new br(this.startLineNumber,this.startColumn,t,i):new br(t,i,this.startLineNumber,this.startColumn)}getPosition(){return new er(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new er(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(t,i){return this.getDirection()===0?new br(t,i,this.endLineNumber,this.endColumn):new br(this.endLineNumber,this.endColumn,t,i)}static fromPositions(t,i=t){return new br(t.lineNumber,t.column,i.lineNumber,i.column)}static fromRange(t,i){return i===0?new br(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):new br(t.endLineNumber,t.endColumn,t.startLineNumber,t.startColumn)}static liftSelection(t){return new br(t.selectionStartLineNumber,t.selectionStartColumn,t.positionLineNumber,t.positionColumn)}static selectionsArrEqual(t,i){if(t&&!i||!t&&i)return!1;if(!t&&!i)return!0;if(t.length!==i.length)return!1;for(let r=0,s=t.length;r<s;r++)if(!this.selectionsEqual(t[r],i[r]))return!1;return!0}static isISelection(t){return t&&typeof t.selectionStartLineNumber=="number"&&typeof t.selectionStartColumn=="number"&&typeof t.positionLineNumber=="number"&&typeof t.positionColumn=="number"}static createWithDirection(t,i,r,s,n){return n===0?new br(t,i,r,s):new br(r,s,t,i)}},oC=class eP{constructor(t,i){this.d=t,this.e=i}async provideDocumentSymbols(t,i){const r=this.d.getDocument(t),s=await this.e.provideDocumentSymbols(r,i);if(!Um(s))return s[0]instanceof Gl?s.map(_0.from):eP.f(s)}static f(t){t=t.slice(0).sort((s,n)=>{let o=s.location.range.start.compareTo(n.location.range.start);return o===0&&(o=n.location.range.end.compareTo(s.location.range.end)),o});const i=[],r=[];for(const s of t){const n={name:s.name||"!!MISSING: name!!",kind:fr.from(s.kind),tags:s.tags?.map(_s.from)||[],detail:"",containerName:s.containerName,range:O.from(s.location.range),selectionRange:O.from(s.location.range),children:[]};for(;;){if(r.length===0){r.push(n),i.push(n);break}const o=r[r.length-1];if(et.containsRange(o.range,n.range)&&!et.equalsRange(o.range,n.range)){o.children?.push(n),r.push(n);break}r.pop()}}return i}},Bg=class{constructor(e,t,i,r,s,n){this.f=e,this.g=t,this.h=i,this.j=r,this.k=s,this.l=n,this.d=new _r("CodeLens"),this.e=new Map}async provideCodeLenses(e,t){const i=this.f.getDocument(e),r=await this.h.provideCodeLenses(i,t);if(!r||t.isCancellationRequested)return;const s=this.d.add(r),n=new ue;this.e.set(s,n);const o={cacheId:s,lenses:[]};for(let a=0;a<r.length;a++){const c=r[a];o.lenses.push({cacheId:[s,a],range:O.from(r[a].range),command:this.g.toInternal(r[a].command,n),isIcube:"isIcube"in c&&c.isIcube===!0})}return o}async resolveCodeLens(e,t){const i=e.cacheId&&this.d.get(...e.cacheId);if(!i)return;let r;if(typeof this.h.resolveCodeLens!="function"||i.isResolved?r=i:r=await this.h.resolveCodeLens(i,t),r||(r=i),t.isCancellationRequested)return;const s=e.cacheId&&this.e.get(e.cacheId[0]);if(s){if(!r.command){const n=new Error("INVALID code lens resolved, lacks command: "+this.j.identifier.value);this.k.onExtensionError(this.j.identifier,n),this.l.error(n);return}return e.command=this.g.toInternal(r.command,s),e}}releaseCodeLenses(e){this.e.get(e)?.dispose(),this.e.delete(e),this.d.delete(e)}};function Wg(e){return Array.isArray(e)?e.map($u.from):e?[$u.from(e)]:[]}var aC=class{constructor(e,t){this.d=e,this.e=t}async provideDefinition(e,t,i){const r=this.d.getDocument(e),s=Fe.to(t),n=await this.e.provideDefinition(r,s,i);return Wg(n)}},cC=class{constructor(e,t){this.d=e,this.e=t}async provideDeclaration(e,t,i){const r=this.d.getDocument(e),s=Fe.to(t),n=await this.e.provideDeclaration(r,s,i);return Wg(n)}},lC=class{constructor(e,t){this.d=e,this.e=t}async provideImplementation(e,t,i){const r=this.d.getDocument(e),s=Fe.to(t),n=await this.e.provideImplementation(r,s,i);return Wg(n)}},uC=class{constructor(e,t){this.d=e,this.e=t}async provideTypeDefinition(e,t,i){const r=this.d.getDocument(e),s=Fe.to(t),n=await this.e.provideTypeDefinition(r,s,i);return Wg(n)}},ny=class tP{static{this.f=10}constructor(t,i){this.g=t,this.h=i,this.d=0,this.e=new Map}async provideHover(t,i,r,s){const n=this.g.getDocument(t),o=Fe.to(i);let a;if(r&&r.verbosityRequest){const h=r.verbosityRequest.previousHover.id,d=this.e.get(h);if(!d)throw new Error(`Hover with id ${h} not found`);const f={verbosityDelta:r.verbosityRequest.verbosityDelta,previousHover:d};a=await this.h.provideHover(n,o,s,f)}else a=await this.h.provideHover(n,o,s);if(!a||Um(a.contents))return;a.range||(a.range=n.getWordRangeAtPosition(o)),a.range||(a.range=new Se(o,o));const c=Cu.from(a),l=this.d;if(this.e.size===tP.f){const h=Math.min(...this.e.keys());this.e.delete(h)}return this.e.set(l,a),this.d+=1,{...c,id:l}}releaseHover(t){this.e.delete(t)}},hC=class{constructor(e,t){this.d=e,this.e=t}async provideEvaluatableExpression(e,t,i){const r=this.d.getDocument(e),s=Fe.to(t),n=await this.e.provideEvaluatableExpression(r,s,i);if(n)return B0.from(n)}},dC=class{constructor(e,t){this.d=e,this.e=t}async provideInlineValues(e,t,i,r){const s=this.d.getDocument(e),n=await this.e.provideInlineValues(s,O.to(t),Ep.to(i),r);if(Array.isArray(n))return n.map(o=>yp.from(o))}},fC=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentHighlights(e,t,i){const r=this.d.getDocument(e),s=Fe.to(t),n=await this.e.provideDocumentHighlights(r,s,i);if(Array.isArray(n))return n.map(cc.from)}},pC=class{constructor(e,t,i){this.d=e,this.e=t,this.f=i}async provideMultiDocumentHighlights(e,t,i,r){const s=this.d.getDocument(e),n=i.map(c=>{try{return this.d.getDocument(c)}catch(l){this.f.error("Error: Unable to retrieve document from URI: "+c+". Error message: "+l);return}}).filter(c=>c!==void 0),o=Fe.to(t),a=await this.e.provideMultiDocumentHighlights(s,o,n,r);if(Array.isArray(a))return a.map(W0.from)}},gC=class{constructor(e,t){this.d=e,this.e=t}async provideLinkedEditingRanges(e,t,i){const r=this.d.getDocument(e),s=Fe.to(t),n=await this.e.provideLinkedEditingRanges(r,s,i);if(n&&Array.isArray(n.ranges))return{ranges:mt(n.ranges.map(O.from)),wordPattern:n.wordPattern}}},mC=class{constructor(e,t){this.d=e,this.e=t}async provideReferences(e,t,i,r){const s=this.d.getDocument(e),n=Fe.to(t),o=await this.e.provideReferences(s,n,i,r);if(Array.isArray(o))return o.map(Li.from)}},zg=class Cm{static{this.d=1e3}constructor(t,i,r,s,n,o,a){this.g=t,this.h=i,this.j=r,this.k=s,this.l=n,this.m=o,this.n=a,this.e=new _r("CodeAction"),this.f=new Map}async provideCodeActions(t,i,r,s){const n=this.g.getDocument(t),o=xB.isISelection(i)?Ti.to(i):O.to(i),a=[];for(const f of this.j.getDiagnostics(t))if(o.intersection(f.range)&&a.push(f)>Cm.d)break;const c={diagnostics:a,only:r.only?new bt(r.only):void 0,triggerKind:rw.to(r.trigger)},l=await this.k.provideCodeActions(n,o,c,s);if(!Yc(l)||s.isCancellationRequested)return;const u=this.e.add(l),h=new ue;this.f.set(u,h);const d=[];for(let f=0;f<l.length;f++){const g=l[f];if(g)if(Cm.o(g))this.n.report("CodeActionProvider.provideCodeActions - return commands",this.m,"Return 'CodeAction' instances instead."),d.push({_isSynthetic:!0,title:g.title,command:this.h.toInternal(g,h)});else{c.only&&(g.kind?c.only.contains(g.kind)||this.l.warn(`${this.m.identifier.value} - Code actions of kind '${c.only.value}' requested but returned code action is of kind '${g.kind.value}'. Code action will be dropped. Please check 'CodeActionContext.only' to only return requested code actions.`):this.l.warn(`${this.m.identifier.value} - Code actions of kind '${c.only.value}' requested but returned code action does not have a 'kind'. Code action will be dropped. Please set 'CodeAction.kind'.`));const v=g.ranges??[];d.push({cacheId:[u,f],title:g.title,command:g.command&&this.h.toInternal(g.command,h),diagnostics:g.diagnostics&&g.diagnostics.map(oc.from),edit:g.edit&&fi.from(g.edit,void 0),kind:g.kind&&g.kind.value,isPreferred:g.isPreferred,isAI:Yt(this.m,"codeActionAI")?g.isAI:!1,ranges:Yt(this.m,"codeActionRanges")?mt(v.map(O.from)):void 0,disabled:g.disabled?.reason})}}return{cacheId:u,actions:d}}async resolveCodeAction(t,i){const[r,s]=t,n=this.e.get(r,s);if(!n||Cm.o(n))return{};if(!this.k.resolveCodeAction)return{};const o=await this.k.resolveCodeAction(n,i)??n;let a;o.edit&&(a=fi.from(o.edit,void 0));let c;if(o.command){const l=this.f.get(r);l&&(c=this.h.toInternal(o.command,l))}return{edit:a,command:c}}releaseCodeActions(t){this.f.get(t)?.dispose(),this.f.delete(t),this.e.delete(t)}static o(t){return typeof t.command=="string"&&typeof t.title=="string"}},fh=class{constructor(e,t,i,r,s){this.e=e,this.f=t,this.g=i,this.h=r,this.j=s,this.d=new _r("DocumentPasteEdit")}async prepareDocumentPaste(e,t,i,r){if(!this.g.prepareDocumentPaste)return;const s=this.f.getDocument(e),n=t.map(c=>O.to(c)),o=Mn.toDataTransfer(i,()=>{throw new eD});if(await this.g.prepareDocumentPaste(s,n,o,r),r.isCancellationRequested)return;const a=Array.from(o).filter(([,c])=>!(c instanceof _f));return Mn.from(a)}async providePasteEdits(e,t,i,r,s,n){if(!this.g.provideDocumentPasteEdits)return[];const o=this.f.getDocument(t),a=i.map(h=>O.to(h)),c=Mn.toDataTransfer(r,async h=>(await this.e.$resolvePasteFileData(this.h,e,h)).buffer),l=await this.g.provideDocumentPasteEdits(o,a,c,{only:s.only?new jf(s.only):void 0,triggerKind:s.triggerKind},n);if(!l||n.isCancellationRequested)return[];const u=this.d.add(l);return l.map((h,d)=>({_cacheId:[u,d],title:h.title??p(3010,null,this.j.displayName||this.j.name),kind:h.kind,yieldTo:h.yieldTo?.map(f=>f.value),insertText:typeof h.insertText=="string"?h.insertText:{snippet:h.insertText.value},additionalEdit:h.additionalEdit?fi.from(h.additionalEdit,void 0):void 0}))}async resolvePasteEdit(e,t){const[i,r]=e,s=this.d.get(i,r);if(!s||!this.g.resolveDocumentPasteEdit)return{};const n=await this.g.resolveDocumentPasteEdit(s,t)??s;return{additionalEdit:n.additionalEdit?fi.from(n.additionalEdit,void 0):void 0}}releasePasteEdits(e){this.d.delete(e)}},vC=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentFormattingEdits(e,t,i){const r=this.d.getDocument(e),s=await this.e.provideDocumentFormattingEdits(r,t,i);if(Array.isArray(s))return s.map(It.from)}},oy=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentRangeFormattingEdits(e,t,i,r){const s=this.d.getDocument(e),n=O.to(t),o=await this.e.provideDocumentRangeFormattingEdits(s,n,i,r);if(Array.isArray(o))return o.map(It.from)}async provideDocumentRangesFormattingEdits(e,t,i,r){j5(typeof this.e.provideDocumentRangesFormattingEdits=="function","INVALID invocation of `provideDocumentRangesFormattingEdits`");const s=this.d.getDocument(e),n=t.map(O.to),o=await this.e.provideDocumentRangesFormattingEdits(s,n,i,r);if(Array.isArray(o))return o.map(It.from)}},wC=class{constructor(e,t){this.d=e,this.e=t,this.autoFormatTriggerCharacters=[]}async provideOnTypeFormattingEdits(e,t,i,r,s){const n=this.d.getDocument(e),o=Fe.to(t),a=await this.e.provideOnTypeFormattingEdits(n,o,i,r,s);if(Array.isArray(a))return a.map(It.from)}},Vg=class{constructor(e,t){this.e=e,this.f=t,this.d=new _r("WorkspaceSymbols")}async provideWorkspaceSymbols(e,t){const i=await this.e.provideWorkspaceSymbols(e,t);if(!Yc(i))return{symbols:[]};const r=this.d.add(i),s={cacheId:r,symbols:[]};for(let n=0;n<i.length;n++){const o=i[n];if(!o||!o.name){this.f.warn("INVALID SymbolInformation",o);continue}s.symbols.push({...Mo.from(o),cacheId:[r,n]})}return s}async resolveWorkspaceSymbol(e,t){if(typeof this.e.resolveWorkspaceSymbol!="function"||!e.cacheId)return e;const i=this.d.get(...e.cacheId);if(i){const r=await this.e.resolveWorkspaceSymbol(i,t);return r&&xs(e,Mo.from(r),!0)}}releaseWorkspaceSymbols(e){this.d.delete(e)}},qg=class R4{static supportsResolving(t){return typeof t.prepareRename=="function"}constructor(t,i,r){this.d=t,this.e=i,this.f=r}async provideRenameEdits(t,i,r,s){const n=this.d.getDocument(t),o=Fe.to(i);try{const a=await this.e.provideRenameEdits(n,o,r,s);return a?fi.from(a):void 0}catch(a){const c=R4.g(a);return c?{rejectReason:c,edits:void 0}:Promise.reject(a)}}async resolveRenameLocation(t,i,r){if(typeof this.e.prepareRename!="function")return Promise.resolve(void 0);const s=this.d.getDocument(t),n=Fe.to(i);try{const o=await this.e.prepareRename(s,n,r);let a,c;if(Se.isRange(o)?(a=o,c=s.getText(o)):St(o)&&(a=o.range,c=o.placeholder),!a||!c)return;if(a.start.line>n.line||a.end.line<n.line){this.f.warn("INVALID rename location: position line must be within range start/end lines");return}return{range:O.from(a),text:c}}catch(o){const a=R4.g(o);return a?{rejectReason:a,range:void 0,text:void 0}:Promise.reject(o)}}static g(t){return typeof t=="string"?t:t instanceof Error&&typeof t.message=="string"?t.message:void 0}},ay=class T4{static{this.d={[Nd.Invoke]:nu.Invoke,[Nd.Automatic]:nu.Automatic}}constructor(t,i,r){this.e=t,this.f=i,this.g=r}async supportsAutomaticNewSymbolNamesTriggerKind(){return this.f.supportsAutomaticTriggerKind}async provideNewSymbolNames(t,i,r,s){const n=this.e.getDocument(t),o=O.to(i);try{const a=T4.d[r],c=await this.f.provideNewSymbolNames(n,o,a,s);return c?c.map(l=>typeof l=="string"?{newSymbolName:l}:{newSymbolName:l.newSymbolName,tags:l.tags}):void 0}catch(a){this.g.error(T4.h(a)??JSON.stringify(a,null,"	"));return}}static h(t){return typeof t=="string"?t:t instanceof Error&&typeof t.message=="string"?t.message:void 0}},cy=class{constructor(e,t){this.resultId=e,this.tokens=t}},ly=class Hr{constructor(t,i){this.f=t,this.g=i,this.e=1,this.d=new Map}async provideDocumentSemanticTokens(t,i,r){const s=this.f.getDocument(t),n=i!==0?this.d.get(i):null;let o=typeof n?.resultId=="string"&&typeof this.g.provideDocumentSemanticTokensEdits=="function"?await this.g.provideDocumentSemanticTokensEdits(s,n.resultId,r):await this.g.provideDocumentSemanticTokens(s,r);return n&&this.d.delete(i),o?(o=Hr.h(o),this.o(Hr.n(n,o),o)):null}async releaseDocumentSemanticColoring(t){this.d.delete(t)}static h(t){return Hr.j(t)?Hr.k(t)?t:new Ka(new Uint32Array(t.data),t.resultId):Hr.l(t)?Hr.m(t)?t:new qf(t.edits.map(i=>new dx(i.start,i.deleteCount,i.data?new Uint32Array(i.data):i.data)),t.resultId):t}static j(t){return t&&!!t.data}static k(t){return t.data instanceof Uint32Array}static l(t){return t&&Array.isArray(t.edits)}static m(t){for(const i of t.edits)if(!(i.data instanceof Uint32Array))return!1;return!0}static n(t,i){if(!Hr.j(i)||!t||!t.tokens)return i;const r=t.tokens,s=r.length,n=i.data,o=n.length;let a=0;const c=Math.min(s,o);for(;a<c&&r[a]===n[a];)a++;if(a===s&&a===o)return new qf([],i.resultId);let l=0;const u=c-a;for(;l<u&&r[s-l-1]===n[o-l-1];)l++;return new qf([{start:a,deleteCount:s-a-l,data:n.subarray(a,o-l)}],i.resultId)}o(t,i){if(Hr.j(t)){const r=this.e++;return this.d.set(r,new cy(t.resultId,t.data)),ey({id:r,type:"full",data:t.data})}if(Hr.l(t)){const r=this.e++;return Hr.j(i)?this.d.set(r,new cy(i.resultId,i.data)):this.d.set(r,new cy(t.resultId)),ey({id:r,type:"delta",deltas:(t.edits||[]).map(s=>({start:s.start,deleteCount:s.deleteCount,data:s.data}))})}return null}},bC=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentRangeSemanticTokens(e,t,i){const r=this.d.getDocument(e),s=await this.e.provideDocumentRangeSemanticTokens(r,O.to(t),i);return s?this.f(s):null}f(e){return ey({id:0,type:"full",data:e.data})}},ph=class iP{static supportsResolving(t){return typeof t.resolveCompletionItem=="function"}constructor(t,i,r,s,n){this.f=t,this.g=i,this.h=r,this.j=s,this.k=n,this.d=new _r("CompletionItem"),this.e=new Map}async provideCompletionItems(t,i,r,s){const n=this.f.getDocument(t),o=Fe.to(i),a=n.getWordRangeAtPosition(o)||new Se(o,o),c=a.with({end:o}),l=new ri,u=await this.h.provideCompletionItems(n,o,s,V0.to(r));if(!u||s.isCancellationRequested)return;const h=Array.isArray(u)?new Ha(u):u,d=iP.supportsResolving(this.h)?this.d.add(h.items):this.d.add([]),f=new ue;this.e.set(d,f);const g=[],v={x:d,b:g,a:{replace:O.from(a),insert:O.from(c)},c:h.isIncomplete||void 0,d:l.elapsed()};for(let y=0;y<h.items.length;y++){const S=h.items[y],x=this.l(S,[d,y],c,a);g.push(x)}return v}async resolveCompletionItem(t,i){if(typeof this.h.resolveCompletionItem!="function")return;const r=this.d.get(...t);if(!r)return;const s=this.l(r,t),n=await this.h.resolveCompletionItem(r,i);if(!n)return;const o=this.l(n,t);return(s.h!==o.h||s.i!==o.i)&&this.j.report("CompletionItem.insertText",this.k,"extension MAY NOT change 'insertText' of a CompletionItem during resolve"),(s.n!==o.n||s.o!==o.o||!Ir(s.p,o.p))&&this.j.report("CompletionItem.command",this.k,"extension MAY NOT change 'command' of a CompletionItem during resolve"),{...s,d:o.d,c:o.c,l:o.l,h:o.h,i:o.i,n:o.n,o:o.o,p:o.p}}releaseCompletionItems(t){this.e.get(t)?.dispose(),this.e.delete(t),this.d.delete(t)}l(t,i,r,s){const n=this.e.get(i[0]);if(!n)throw Error("DisposableStore is missing...");const o=this.g.toInternal(t.command,n),a={x:i,a:t.label,b:t.kind!==void 0?Iu.from(t.kind):void 0,m:t.tags&&t.tags.map(Sp.from),c:t.detail,d:typeof t.documentation>"u"?void 0:ke.fromStrict(t.documentation),e:t.sortText!==t.label?t.sortText:void 0,f:t.filterText!==t.label?t.filterText:void 0,g:t.preselect||void 0,i:t.keepWhitespace?1:0,k:t.commitCharacters?.join(""),l:t.additionalTextEdits&&t.additionalTextEdits.map(It.from),n:o?.$ident,o:o?.id,p:o?.$ident?void 0:o?.arguments};t.textEdit?(this.j.report("CompletionItem.textEdit",this.k,"Use 'CompletionItem.insertText' and 'CompletionItem.range' instead."),a.h=t.textEdit.newText):typeof t.insertText=="string"?a.h=t.insertText:t.insertText instanceof Co&&(a.h=t.insertText.value,a.i|=4);let c;return t.textEdit?c=t.textEdit.range:t.range&&(c=t.range),Se.isRange(c)?a.j=O.from(c):c&&(!r?.isEqual(c.inserting)||!s?.isEqual(c.replacing))&&(a.j={insert:O.from(c.inserting),replace:O.from(c.replacing)}),a}},Tc=class{async provideInlineCompletions(e,t,i,r){}async provideInlineEditsForRange(e,t,i,r){}disposeCompletions(e){}handleDidShowCompletionItem(e,t,i){}handlePartialAccept(e,t,i,r){}},kB=class extends Tc{constructor(e,t,i,r){super(),this.f=e,this.g=t,this.h=i,this.j=r,this.d=new yC,this.e=Yt(this.f,"inlineCompletionsAdditions"),this.k={[Ld.Automatic]:su.Automatic,[Ld.Explicit]:su.Invoke}}get supportsHandleEvents(){return Yt(this.f,"inlineCompletionsAdditions")&&(typeof this.h.handleDidShowCompletionItem=="function"||typeof this.h.handleDidPartiallyAcceptCompletionItem=="function")}async provideInlineCompletions(e,t,i,r){const s=this.g.getDocument(e),n=Fe.to(t),o=await this.h.provideInlineCompletionItems(s,n,{selectedCompletionInfo:i.selectedSuggestionInfo?{range:O.to(i.selectedSuggestionInfo.range),text:i.selectedSuggestionInfo.text}:void 0,triggerKind:this.k[i.triggerKind]},r);if(!o||r.isCancellationRequested)return;const a=Array.isArray(o)?o:o.items,c=this.e?Array.isArray(o)?[]:o.commands||[]:[],l=this.e&&!Array.isArray(o)?o.enableForwardStability:void 0;let u;return{pid:this.d.createReferenceId({dispose(){u?.dispose()},items:a}),items:a.map((d,f)=>{let g;d.command&&(u||(u=new ue),g=this.j.toInternal(d.command,u));const v=d.insertText;return{insertText:typeof v=="string"?v:{snippet:v.value},filterText:d.filterText,range:d.range?O.from(d.range):void 0,command:g,idx:f,completeBracketPairs:this.e?d.completeBracketPairs:!1}}),commands:c.map(d=>(u||(u=new ue),this.j.toInternal(d,u))),suppressSuggestions:!1,enableForwardStability:l}}async provideInlineEditsForRange(e,t,i,r){if(!this.h.provideInlineEditsForRange)return;A(this.f,"inlineCompletionsAdditions");const s=this.g.getDocument(e),n=O.to(t),o=await this.h.provideInlineEditsForRange(s,n,{selectedCompletionInfo:i.selectedSuggestionInfo?{range:O.to(i.selectedSuggestionInfo.range),text:i.selectedSuggestionInfo.text}:void 0,triggerKind:this.k[i.triggerKind],userPrompt:i.userPrompt},r);if(!o||r.isCancellationRequested)return;const a=Array.isArray(o)?o:o.items,c=this.e?Array.isArray(o)?[]:o.commands||[]:[],l=this.e&&!Array.isArray(o)?o.enableForwardStability:void 0;let u;return{pid:this.d.createReferenceId({dispose(){u?.dispose()},items:a}),items:a.map((d,f)=>{let g;d.command&&(u||(u=new ue),g=this.j.toInternal(d.command,u));const v=d.insertText;return{insertText:typeof v=="string"?v:{snippet:v.value},filterText:d.filterText,range:d.range?O.from(d.range):void 0,command:g,idx:f,completeBracketPairs:this.e?d.completeBracketPairs:!1}}),commands:c.map(d=>(u||(u=new ue),this.j.toInternal(d,u))),suppressSuggestions:!1,enableForwardStability:l}}disposeCompletions(e){this.d.disposeReferenceId(e)?.dispose()}handleDidShowCompletionItem(e,t,i){const r=this.d.get(e)?.items[t];r&&this.h.handleDidShowCompletionItem&&this.e&&this.h.handleDidShowCompletionItem(r,i)}handlePartialAccept(e,t,i,r){const s=this.d.get(e)?.items[t];s&&this.h.handleDidPartiallyAcceptCompletionItem&&this.e&&(this.h.handleDidPartiallyAcceptCompletionItem(s,i),this.h.handleDidPartiallyAcceptCompletionItem(s,cw.to(r)))}},uy=class{async provideInlineEdits(e,t,i){const r=this.f.getDocument(e),s=await this.g.provideInlineEdit(r,{triggerKind:this.e[t.triggerKind]},i);if(!s||i.isCancellationRequested)return;let n;const o=this.d.createReferenceId({dispose(){n?.dispose()},item:s});let a;s.accepted&&(n||(n=new ue),a=this.h.toInternal(s.accepted,n));let c;return s.rejected&&(n||(n=new ue),c=this.h.toInternal(s.rejected,n)),n||(n=new ue),{pid:o,text:s.text,range:O.from(s.range),accepted:a,rejected:c,commands:s.commands?.map(u=>this.h.toInternal(u,n))}}disposeEdit(e){this.d.disposeReferenceId(e)?.dispose()}constructor(e,t,i,r){this.f=t,this.g=i,this.h=r,this.d=new yC,this.e={[Od.Automatic]:ku.Automatic,[Od.Invoke]:ku.Invoke}}},yC=class{constructor(){this.d=new Map,this.e=1}createReferenceId(e){const t=this.e++;return this.d.set(t,e),t}disposeReferenceId(e){const t=this.d.get(e);return this.d.delete(e),t}get(e){return this.d.get(e)}},hy=class{constructor(e,t){this.e=e,this.f=t,this.d=new _r("SignatureHelp")}async provideSignatureHelp(e,t,i,r){const s=this.e.getDocument(e),n=Fe.to(t),o=this.g(i),a=await this.f.provideSignatureHelp(s,n,r,o);if(a){const c=this.d.add([a]);return{...Pu.from(a),id:c}}}g(e){let t;if(e.activeSignatureHelp){const i=Pu.to(e.activeSignatureHelp),r=this.d.get(e.activeSignatureHelp.id,0);r?(t=r,t.activeSignature=i.activeSignature,t.activeParameter=i.activeParameter):t=i}return{...e,activeSignatureHelp:t}}releaseSignatureHelp(e){this.d.delete(e)}},Gg=class{constructor(e,t,i,r,s){this.f=e,this.g=t,this.h=i,this.j=r,this.k=s,this.d=new _r("InlayHints"),this.e=new Map}async provideInlayHints(e,t,i){const r=this.f.getDocument(e),s=O.to(t),n=await this.h.provideInlayHints(r,s,i);if(!Array.isArray(n)||n.length===0){this.j.trace(`[InlayHints] NO inlay hints from '${this.k.identifier.value}' for range ${JSON.stringify(t)}`);return}if(i.isCancellationRequested)return;const o=this.d.add(n);this.e.set(o,new ue);const a={hints:[],cacheId:o};for(let c=0;c<n.length;c++)this.l(n[c],s)&&a.hints.push(this.m(n[c],[o,c]));return this.j.trace(`[InlayHints] ${a.hints.length} inlay hints from '${this.k.identifier.value}' for range ${JSON.stringify(t)}`),a}async resolveInlayHint(e,t){if(typeof this.h.resolveInlayHint!="function")return;const i=this.d.get(...e);if(!i)return;const r=await this.h.resolveInlayHint(i,t);if(r&&this.l(r))return this.m(r,e)}releaseHints(e){this.e.get(e)?.dispose(),this.e.delete(e),this.d.delete(e)}l(e,t){return e.label.length===0||Array.isArray(e.label)&&e.label.every(i=>i.value.length===0)?(console.log("INVALID inlay hint, empty label",e),!1):!(t&&!t.contains(e.position))}m(e,t){const i=this.e.get(t[0]);if(!i)throw Error("DisposableStore is missing...");const r={label:"",cacheId:t,tooltip:ke.fromStrict(e.tooltip),position:Fe.from(e.position),textEdits:e.textEdits&&e.textEdits.map(It.from),kind:e.kind&&$p.from(e.kind),paddingLeft:e.paddingLeft,paddingRight:e.paddingRight};if(typeof e.label=="string")r.label=e.label;else{const s=[];r.label=s;for(const n of e.label){if(!n.value){console.warn("INVALID inlay hint, empty label part",this.k.identifier.value);continue}const o={label:n.value,tooltip:ke.fromStrict(n.tooltip)};tr.isLocation(n.location)&&(o.location=Li.from(n.location)),n.command&&(o.command=this.g.toInternal(n.command,i)),s.push(o)}}return r}},Jg=class Im{constructor(t,i){this.e=t,this.f=i,this.d=new _r("DocumentLink")}async provideLinks(t,i){const r=this.e.getDocument(t),s=await this.f.provideDocumentLinks(r,i);if(!(!Array.isArray(s)||s.length===0)&&!i.isCancellationRequested){if(typeof this.f.resolveDocumentLink!="function")return{links:s.filter(Im.g).map(_o.from)};{const n=this.d.add(s),o={links:[],cacheId:n};for(let a=0;a<s.length;a++){if(!Im.g(s[a]))continue;const c=_o.from(s[a]);c.cacheId=[n,a],o.links.push(c)}return o}}}static g(t){return t.target&&t.target.path.length>5e4?(console.warn("DROPPING link because it is too long"),!1):!0}async resolveLink(t,i){if(typeof this.f.resolveDocumentLink!="function")return;const r=this.d.get(...t);if(!r)return;const s=await this.f.resolveDocumentLink(r,i);if(!(!s||!Im.g(s)))return _o.from(s)}releaseLinks(t){this.d.delete(t)}},dy=class{constructor(e,t){this.d=e,this.e=t}async provideColors(e,t){const i=this.d.getDocument(e),r=await this.e.provideDocumentColors(i,t);return Array.isArray(r)?r.map(n=>({color:lc.from(n.color),range:O.from(n.range)})):[]}async provideColorPresentations(e,t,i){const r=this.d.getDocument(e),s=O.to(t.range),n=lc.to(t.color),o=await this.e.provideColorPresentations(n,{document:r,range:s},i);if(Array.isArray(o))return o.map(Cp.from)}},EC=class{constructor(e,t){this.d=e,this.e=t}async provideFoldingRanges(e,t,i){const r=this.d.getDocument(e),s=await this.e.provideFoldingRanges(r,t,i);if(Array.isArray(s))return s.map(Pp.from)}},SC=class{constructor(e,t,i){this.d=e,this.e=t,this.f=i}async provideSelectionRanges(e,t,i){const r=this.d.getDocument(e),s=t.map(Fe.to),n=await this.e.provideSelectionRanges(r,s,i);if(!Yc(n))return[];if(n.length!==s.length)return this.f.warn("BAD selection ranges, provider must return ranges for each position"),[];const o=[];for(let a=0;a<s.length;a++){const c=[];o.push(c);let l=s[a],u=n[a];for(;;){if(!u.range.contains(l))throw new Error("INVALID selection range, must contain the previous range");if(c.push(Q0.from(u)),!u.parent)break;l=u.range,u=u.parent}}return o}},gh=class{constructor(e,t){this.f=e,this.g=t,this.d=new gg(""),this.e=new Map}async prepareSession(e,t,i){const r=this.f.getDocument(e),s=Fe.to(t),n=await this.g.prepareCallHierarchy(r,s,i);if(!n)return;const o=this.d.nextId();return this.e.set(o,new Map),Array.isArray(n)?n.map(a=>this.h(o,a)):[this.h(o,n)]}async provideCallsTo(e,t,i){const r=this.j(e,t);if(!r)throw new Error("missing call hierarchy item");const s=await this.g.provideCallHierarchyIncomingCalls(r,i);if(s)return s.map(n=>({from:this.h(e,n.from),fromRanges:n.fromRanges.map(o=>O.from(o))}))}async provideCallsFrom(e,t,i){const r=this.j(e,t);if(!r)throw new Error("missing call hierarchy item");const s=await this.g.provideCallHierarchyOutgoingCalls(r,i);if(s)return s.map(n=>({to:this.h(e,n.to),fromRanges:n.fromRanges.map(o=>O.from(o))}))}releaseSession(e){this.e.delete(e)}h(e,t){const i=this.e.get(e),r=Uo.from(t,e,i.size.toString(36));return i.set(r._itemId,t),r}j(e,t){return this.e.get(e)?.get(t)}},mh=class{constructor(e,t){this.f=e,this.g=t,this.d=new gg(""),this.e=new Map}async prepareSession(e,t,i){const r=this.f.getDocument(e),s=Fe.to(t),n=await this.g.prepareTypeHierarchy(r,s,i);if(!n)return;const o=this.d.nextId();return this.e.set(o,new Map),Array.isArray(n)?n.map(a=>this.h(o,a)):[this.h(o,n)]}async provideSupertypes(e,t,i){const r=this.j(e,t);if(!r)throw new Error("missing type hierarchy item");const s=await this.g.provideTypeHierarchySupertypes(r,i);if(s)return s.map(n=>this.h(e,n))}async provideSubtypes(e,t,i){const r=this.j(e,t);if(!r)throw new Error("missing type hierarchy item");const s=await this.g.provideTypeHierarchySubtypes(r,i);if(s)return s.map(n=>this.h(e,n))}releaseSession(e){this.e.delete(e)}h(e,t){const i=this.e.get(e),r=jo.from(t,e,i.size.toString(36));return i.set(r._itemId,t),r}j(e,t){return this.e.get(e)?.get(t)}},Qg=class{constructor(e,t,i,r,s){this.e=e,this.f=t,this.g=i,this.h=r,this.j=s,this.d=new _r("DocumentDropEdit")}async provideDocumentOnDropEdits(e,t,i,r,s){const n=this.f.getDocument(t),o=Fe.to(i),a=Mn.toDataTransfer(r,async h=>(await this.e.$resolveDocumentOnDropFileData(this.h,e,h)).buffer),c=await this.g.provideDocumentDropEdits(n,o,a,s);if(!c)return;const l=Er(c),u=this.d.add(l);return l.map((h,d)=>({_cacheId:[u,d],title:h.title??p(3011,null,this.j.displayName||this.j.name),kind:h.kind?.value,yieldTo:h.yieldTo?.map(f=>f.value),insertText:typeof h.insertText=="string"?h.insertText:{snippet:h.insertText.value},additionalEdit:h.additionalEdit?fi.from(h.additionalEdit,void 0):void 0}))}async resolveDropEdit(e,t){const[i,r]=e,s=this.d.get(i,r);if(!s||!this.g.resolveDocumentDropEdit)return{};const n=await this.g.resolveDocumentDropEdit(s,t)??s;return{additionalEdit:n.additionalEdit?fi.from(n.additionalEdit,void 0):void 0}}releaseDropEdits(e){this.d.delete(e)}},xC=class{constructor(e,t){this.d=e,this.e=t}async provideMappedEdits(e,t,i,r){const s=E.revive(e),n=this.d.getDocument(s),o=u=>({uri:E.revive(u.uri),version:u.version,ranges:u.ranges.map(h=>O.to(h))}),a=i.documents.map(u=>u.map(o)),c={documents:a,selections:a[0]?.[0]?.ranges??[],conversation:i.conversation?.map(u=>u.type==="response"?{type:"response",message:u.message,references:u.references?.map(o)}:{type:"request",message:u.message})},l=await this.e.provideMappedEdits(n,t,c,r);return l?fi.from(l):null}},vh=class{constructor(e,t){this.adapter=e,this.extension=t}},$B=class Zt{static{this.d=0}constructor(t,i,r,s,n,o,a,c){this.g=i,this.h=r,this.j=s,this.k=n,this.l=o,this.m=a,this.n=c,this.f=new Map,this.e=t.getProxy(q.MainThreadLanguageFeatures)}o(t,i){return nc.from(t,this.g,i)}p(t){return new Oe(()=>{this.f.delete(t),this.e.$unregister(t)})}q(){return Zt.d++}async s(t,i,r,s,n,o=!1){const a=this.f.get(t);if(!a||!(a.adapter instanceof i))return s;const c=Date.now();o||this.l.trace(`[${a.extension.identifier.value}] INVOKE provider '${r.toString().replace(/[\r\n]/g,"")}'`);const l=r(a.adapter,a.extension);return Promise.resolve(l).catch(u=>{zr(u)||(this.l.error(`[${a.extension.identifier.value}] provider FAILED`),this.l.error(u),this.n.onExtensionError(a.extension.identifier,u))}).finally(()=>{o||this.l.trace(`[${a.extension.identifier.value}] provider DONE after ${Date.now()-c}ms`)}),Ge.isCancellationToken(n)?sR(l,n):l}t(t,i){const r=this.q();return this.f.set(r,new vh(t,i)),r}static u(t){return t.displayName||t.name}static w(t){return t.identifier.value}registerDocumentSymbolProvider(t,i,r,s){const n=this.t(new oC(this.h,r),t),o=s&&s.label||Zt.u(t);return this.e.$registerDocumentSymbolProvider(n,this.o(i,t),o),this.p(n)}$provideDocumentSymbols(t,i,r){return this.s(t,oC,s=>s.provideDocumentSymbols(E.revive(i),r),void 0,r)}registerCodeLensProvider(t,i,r){const s=this.q(),n=typeof r.onDidChangeCodeLenses=="function"?this.q():void 0;this.f.set(s,new vh(new Bg(this.h,this.j.converter,r,t,this.n,this.l),t)),this.e.$registerCodeLensSupport(s,this.o(i,t),n);let o=this.p(s);if(n!==void 0){const a=r.onDidChangeCodeLenses(c=>this.e.$emitCodeLensEvent(n));o=Oe.from(o,a)}return o}$provideCodeLenses(t,i,r){return this.s(t,Bg,s=>s.provideCodeLenses(E.revive(i),r),void 0,r,i.scheme==="output")}$resolveCodeLens(t,i,r){return this.s(t,Bg,s=>s.resolveCodeLens(i,r),void 0,void 0,!0)}$releaseCodeLenses(t,i){this.s(t,Bg,r=>Promise.resolve(r.releaseCodeLenses(i)),void 0,void 0,!0)}registerDefinitionProvider(t,i,r){const s=this.t(new aC(this.h,r),t);return this.e.$registerDefinitionSupport(s,this.o(i,t)),this.p(s)}$provideDefinition(t,i,r,s){return this.s(t,aC,n=>n.provideDefinition(E.revive(i),r,s),[],s)}registerDeclarationProvider(t,i,r){const s=this.t(new cC(this.h,r),t);return this.e.$registerDeclarationSupport(s,this.o(i,t)),this.p(s)}$provideDeclaration(t,i,r,s){return this.s(t,cC,n=>n.provideDeclaration(E.revive(i),r,s),[],s)}registerImplementationProvider(t,i,r){const s=this.t(new lC(this.h,r),t);return this.e.$registerImplementationSupport(s,this.o(i,t)),this.p(s)}$provideImplementation(t,i,r,s){return this.s(t,lC,n=>n.provideImplementation(E.revive(i),r,s),[],s)}registerTypeDefinitionProvider(t,i,r){const s=this.t(new uC(this.h,r),t);return this.e.$registerTypeDefinitionSupport(s,this.o(i,t)),this.p(s)}$provideTypeDefinition(t,i,r,s){return this.s(t,uC,n=>n.provideTypeDefinition(E.revive(i),r,s),[],s)}registerHoverProvider(t,i,r,s){const n=this.t(new ny(this.h,r),t);return this.e.$registerHoverProvider(n,this.o(i,t)),this.p(n)}$provideHover(t,i,r,s,n){return this.s(t,ny,o=>o.provideHover(E.revive(i),r,s,n),void 0,n)}$releaseHover(t,i){this.s(t,ny,r=>Promise.resolve(r.releaseHover(i)),void 0,void 0)}registerEvaluatableExpressionProvider(t,i,r,s){const n=this.t(new hC(this.h,r),t);return this.e.$registerEvaluatableExpressionProvider(n,this.o(i,t)),this.p(n)}$provideEvaluatableExpression(t,i,r,s){return this.s(t,hC,n=>n.provideEvaluatableExpression(E.revive(i),r,s),void 0,s)}registerInlineValuesProvider(t,i,r,s){const n=typeof r.onDidChangeInlineValues=="function"?this.q():void 0,o=this.t(new dC(this.h,r),t);this.e.$registerInlineValuesProvider(o,this.o(i,t),n);let a=this.p(o);if(n!==void 0){const c=r.onDidChangeInlineValues(l=>this.e.$emitInlineValuesEvent(n));a=Oe.from(a,c)}return a}$provideInlineValues(t,i,r,s,n){return this.s(t,dC,o=>o.provideInlineValues(E.revive(i),r,s,n),void 0,n)}registerDocumentHighlightProvider(t,i,r){const s=this.t(new fC(this.h,r),t);return this.e.$registerDocumentHighlightProvider(s,this.o(i,t)),this.p(s)}registerMultiDocumentHighlightProvider(t,i,r){const s=this.t(new pC(this.h,r,this.l),t);return this.e.$registerMultiDocumentHighlightProvider(s,this.o(i,t)),this.p(s)}$provideDocumentHighlights(t,i,r,s){return this.s(t,fC,n=>n.provideDocumentHighlights(E.revive(i),r,s),void 0,s)}$provideMultiDocumentHighlights(t,i,r,s,n){return this.s(t,pC,o=>o.provideMultiDocumentHighlights(E.revive(i),r,s.map(a=>E.revive(a)),n),void 0,n)}registerLinkedEditingRangeProvider(t,i,r){const s=this.t(new gC(this.h,r),t);return this.e.$registerLinkedEditingRangeProvider(s,this.o(i,t)),this.p(s)}$provideLinkedEditingRanges(t,i,r,s){return this.s(t,gC,async n=>{const o=await n.provideLinkedEditingRanges(E.revive(i),r,s);if(o)return{ranges:o.ranges,wordPattern:o.wordPattern?Zt.y(o.wordPattern):void 0}},void 0,s)}registerReferenceProvider(t,i,r){const s=this.t(new mC(this.h,r),t);return this.e.$registerReferenceSupport(s,this.o(i,t)),this.p(s)}$provideReferences(t,i,r,s,n){return this.s(t,mC,o=>o.provideReferences(E.revive(i),r,s,n),void 0,n)}registerCodeActionProvider(t,i,r,s){const n=new ue,o=this.t(new zg(this.h,this.j.converter,this.k,r,this.l,t,this.m),t);return this.e.$registerCodeActionSupport(o,this.o(i,t),{providedKinds:s?.providedCodeActionKinds?.map(a=>a.value),documentation:s?.documentation?.map(a=>({kind:a.kind.value,command:this.j.converter.toInternal(a.command,n)}))},Zt.u(t),Zt.w(t),!!r.resolveCodeAction),n.add(this.p(o)),n}$provideCodeActions(t,i,r,s,n){return this.s(t,zg,o=>o.provideCodeActions(E.revive(i),r,s,n),void 0,n)}$resolveCodeAction(t,i,r){return this.s(t,zg,s=>s.resolveCodeAction(i,r),{},void 0)}$releaseCodeActions(t,i){this.s(t,zg,r=>Promise.resolve(r.releaseCodeActions(i)),void 0,void 0)}registerDocumentFormattingEditProvider(t,i,r){const s=this.t(new vC(this.h,r),t);return this.e.$registerDocumentFormattingSupport(s,this.o(i,t),t.identifier,t.displayName||t.name),this.p(s)}$provideDocumentFormattingEdits(t,i,r,s){return this.s(t,vC,n=>n.provideDocumentFormattingEdits(E.revive(i),r,s),void 0,s)}registerDocumentRangeFormattingEditProvider(t,i,r){const s=typeof r.provideDocumentRangesFormattingEdits=="function",n=this.t(new oy(this.h,r),t);return this.e.$registerRangeFormattingSupport(n,this.o(i,t),t.identifier,t.displayName||t.name,s),this.p(n)}$provideDocumentRangeFormattingEdits(t,i,r,s,n){return this.s(t,oy,o=>o.provideDocumentRangeFormattingEdits(E.revive(i),r,s,n),void 0,n)}$provideDocumentRangesFormattingEdits(t,i,r,s,n){return this.s(t,oy,o=>o.provideDocumentRangesFormattingEdits(E.revive(i),r,s,n),void 0,n)}registerOnTypeFormattingEditProvider(t,i,r,s){const n=this.t(new wC(this.h,r),t);return this.e.$registerOnTypeFormattingSupport(n,this.o(i,t),s,t.identifier),this.p(n)}$provideOnTypeFormattingEdits(t,i,r,s,n,o){return this.s(t,wC,a=>a.provideOnTypeFormattingEdits(E.revive(i),r,s,n,o),void 0,o)}registerWorkspaceSymbolProvider(t,i){const r=this.t(new Vg(i,this.l),t);return this.e.$registerNavigateTypeSupport(r,typeof i.resolveWorkspaceSymbol=="function"),this.p(r)}$provideWorkspaceSymbols(t,i,r){return this.s(t,Vg,s=>s.provideWorkspaceSymbols(i,r),{symbols:[]},r)}$resolveWorkspaceSymbol(t,i,r){return this.s(t,Vg,s=>s.resolveWorkspaceSymbol(i,r),void 0,void 0)}$releaseWorkspaceSymbols(t,i){this.s(t,Vg,r=>r.releaseWorkspaceSymbols(i),void 0,void 0)}registerRenameProvider(t,i,r){const s=this.t(new qg(this.h,r,this.l),t);return this.e.$registerRenameSupport(s,this.o(i,t),qg.supportsResolving(r)),this.p(s)}$provideRenameEdits(t,i,r,s,n){return this.s(t,qg,o=>o.provideRenameEdits(E.revive(i),r,s,n),void 0,n)}$resolveRenameLocation(t,i,r,s){return this.s(t,qg,n=>n.resolveRenameLocation(E.revive(i),r,s),void 0,s)}registerNewSymbolNamesProvider(t,i,r){const s=this.t(new ay(this.h,r,this.l),t);return this.e.$registerNewSymbolNamesProvider(s,this.o(i,t)),this.p(s)}$supportsAutomaticNewSymbolNamesTriggerKind(t){return this.s(t,ay,i=>i.supportsAutomaticNewSymbolNamesTriggerKind(),!1,void 0)}$provideNewSymbolNames(t,i,r,s,n){return this.s(t,ay,o=>o.provideNewSymbolNames(E.revive(i),r,s,n),void 0,n)}registerDocumentSemanticTokensProvider(t,i,r,s){const n=this.t(new ly(this.h,r),t),o=typeof r.onDidChangeSemanticTokens=="function"?this.q():void 0;this.e.$registerDocumentSemanticTokensProvider(n,this.o(i,t),s,o);let a=this.p(n);if(o){const c=r.onDidChangeSemanticTokens(l=>this.e.$emitDocumentSemanticTokensEvent(o));a=Oe.from(a,c)}return a}$provideDocumentSemanticTokens(t,i,r,s){return this.s(t,ly,n=>n.provideDocumentSemanticTokens(E.revive(i),r,s),null,s)}$releaseDocumentSemanticTokens(t,i){this.s(t,ly,r=>r.releaseDocumentSemanticColoring(i),void 0,void 0)}registerDocumentRangeSemanticTokensProvider(t,i,r,s){const n=this.t(new bC(this.h,r),t);return this.e.$registerDocumentRangeSemanticTokensProvider(n,this.o(i,t),s),this.p(n)}$provideDocumentRangeSemanticTokens(t,i,r,s){return this.s(t,bC,n=>n.provideDocumentRangeSemanticTokens(E.revive(i),r,s),null,s)}registerCompletionItemProvider(t,i,r,s){const n=this.t(new ph(this.h,this.j.converter,r,this.m,t),t);return this.e.$registerCompletionsProvider(n,this.o(i,t),s,ph.supportsResolving(r),t.identifier),this.p(n)}$provideCompletionItems(t,i,r,s,n){return this.s(t,ph,o=>o.provideCompletionItems(E.revive(i),r,s,n),void 0,n)}$resolveCompletionItem(t,i,r){return this.s(t,ph,s=>s.resolveCompletionItem(i,r),void 0,r)}$releaseCompletionItems(t,i){this.s(t,ph,r=>r.releaseCompletionItems(i),void 0,void 0)}registerInlineCompletionsProvider(t,i,r,s){const n=new kB(t,this.h,r,this.j.converter),o=this.t(n,t);return this.e.$registerInlineCompletionsSupport(o,this.o(i,t),n.supportsHandleEvents,Xe.toKey(t.identifier.value),s?.yieldTo?.map(a=>Xe.toKey(a))||[]),this.p(o)}$provideInlineCompletions(t,i,r,s,n){return this.s(t,Tc,o=>o.provideInlineCompletions(E.revive(i),r,s,n),void 0,n)}$provideInlineEditsForRange(t,i,r,s,n){return this.s(t,Tc,o=>o.provideInlineEditsForRange(E.revive(i),r,s,n),void 0,n)}$handleInlineCompletionDidShow(t,i,r,s){this.s(t,Tc,async n=>{n.handleDidShowCompletionItem(i,r,s)},void 0,void 0)}$handleInlineCompletionPartialAccept(t,i,r,s,n){this.s(t,Tc,async o=>{o.handlePartialAccept(i,r,s,n)},void 0,void 0)}$freeInlineCompletionsList(t,i){this.s(t,Tc,async r=>{r.disposeCompletions(i)},void 0,void 0)}registerInlineEditProvider(t,i,r){const s=new uy(t,this.h,r,this.j.converter),n=this.t(s,t);return this.e.$registerInlineEditProvider(n,this.o(i,t),t.identifier),this.p(n)}$provideInlineEdit(t,i,r,s){return this.s(t,uy,n=>n.provideInlineEdits(E.revive(i),r,s),void 0,s)}$freeInlineEdit(t,i){this.s(t,uy,async r=>{r.disposeEdit(i)},void 0,void 0)}registerSignatureHelpProvider(t,i,r,s){const n=Array.isArray(s)?{triggerCharacters:s,retriggerCharacters:[]}:s,o=this.t(new hy(this.h,r),t);return this.e.$registerSignatureHelpProvider(o,this.o(i,t),n),this.p(o)}$provideSignatureHelp(t,i,r,s,n){return this.s(t,hy,o=>o.provideSignatureHelp(E.revive(i),r,s,n),void 0,n)}$releaseSignatureHelp(t,i){this.s(t,hy,r=>r.releaseSignatureHelp(i),void 0,void 0)}registerInlayHintsProvider(t,i,r){const s=typeof r.onDidChangeInlayHints=="function"?this.q():void 0,n=this.t(new Gg(this.h,this.j.converter,r,this.l,t),t);this.e.$registerInlayHintsProvider(n,this.o(i,t),typeof r.resolveInlayHint=="function",s,Zt.u(t));let o=this.p(n);if(s!==void 0){const a=r.onDidChangeInlayHints(c=>this.e.$emitInlayHintsEvent(s));o=Oe.from(o,a)}return o}$provideInlayHints(t,i,r,s){return this.s(t,Gg,n=>n.provideInlayHints(E.revive(i),r,s),void 0,s)}$resolveInlayHint(t,i,r){return this.s(t,Gg,s=>s.resolveInlayHint(i,r),void 0,r)}$releaseInlayHints(t,i){this.s(t,Gg,r=>r.releaseHints(i),void 0,void 0)}registerDocumentLinkProvider(t,i,r){const s=this.t(new Jg(this.h,r),t);return this.e.$registerDocumentLinkProvider(s,this.o(i,t),typeof r.resolveDocumentLink=="function"),this.p(s)}$provideDocumentLinks(t,i,r){return this.s(t,Jg,s=>s.provideLinks(E.revive(i),r),void 0,r,i.scheme==="output")}$resolveDocumentLink(t,i,r){return this.s(t,Jg,s=>s.resolveLink(i,r),void 0,void 0,!0)}$releaseDocumentLinks(t,i){this.s(t,Jg,r=>r.releaseLinks(i),void 0,void 0,!0)}registerColorProvider(t,i,r){const s=this.t(new dy(this.h,r),t);return this.e.$registerDocumentColorProvider(s,this.o(i,t)),this.p(s)}$provideDocumentColors(t,i,r){return this.s(t,dy,s=>s.provideColors(E.revive(i),r),[],r)}$provideColorPresentations(t,i,r,s){return this.s(t,dy,n=>n.provideColorPresentations(E.revive(i),r,s),void 0,s)}registerFoldingRangeProvider(t,i,r){const s=this.q(),n=typeof r.onDidChangeFoldingRanges=="function"?this.q():void 0;this.f.set(s,new vh(new EC(this.h,r),t)),this.e.$registerFoldingRangeProvider(s,this.o(i,t),t.identifier,n);let o=this.p(s);if(n!==void 0){const a=r.onDidChangeFoldingRanges(()=>this.e.$emitFoldingRangeEvent(n));o=Oe.from(o,a)}return o}$provideFoldingRanges(t,i,r,s){return this.s(t,EC,n=>n.provideFoldingRanges(E.revive(i),r,s),void 0,s)}registerSelectionRangeProvider(t,i,r){const s=this.t(new SC(this.h,r,this.l),t);return this.e.$registerSelectionRangeProvider(s,this.o(i,t)),this.p(s)}$provideSelectionRanges(t,i,r,s){return this.s(t,SC,n=>n.provideSelectionRanges(E.revive(i),r,s),[],s)}registerCallHierarchyProvider(t,i,r){const s=this.t(new gh(this.h,r),t);return this.e.$registerCallHierarchyProvider(s,this.o(i,t)),this.p(s)}$prepareCallHierarchy(t,i,r,s){return this.s(t,gh,n=>Promise.resolve(n.prepareSession(E.revive(i),r,s)),void 0,s)}$provideCallHierarchyIncomingCalls(t,i,r,s){return this.s(t,gh,n=>n.provideCallsTo(i,r,s),void 0,s)}$provideCallHierarchyOutgoingCalls(t,i,r,s){return this.s(t,gh,n=>n.provideCallsFrom(i,r,s),void 0,s)}$releaseCallHierarchy(t,i){this.s(t,gh,r=>Promise.resolve(r.releaseSession(i)),void 0,void 0)}registerTypeHierarchyProvider(t,i,r){const s=this.t(new mh(this.h,r),t);return this.e.$registerTypeHierarchyProvider(s,this.o(i,t)),this.p(s)}$prepareTypeHierarchy(t,i,r,s){return this.s(t,mh,n=>Promise.resolve(n.prepareSession(E.revive(i),r,s)),void 0,s)}$provideTypeHierarchySupertypes(t,i,r,s){return this.s(t,mh,n=>n.provideSupertypes(i,r,s),void 0,s)}$provideTypeHierarchySubtypes(t,i,r,s){return this.s(t,mh,n=>n.provideSubtypes(i,r,s),void 0,s)}$releaseTypeHierarchy(t,i){this.s(t,mh,r=>Promise.resolve(r.releaseSession(i)),void 0,void 0)}registerDocumentOnDropEditProvider(t,i,r,s){const n=this.q();return this.f.set(n,new vh(new Qg(this.e,this.h,r,n,t),t)),this.e.$registerDocumentOnDropEditProvider(n,this.o(i,t),Yt(t,"documentPaste")&&s?{supportsResolve:!!r.resolveDocumentDropEdit,dropMimeTypes:s.dropMimeTypes}:void 0),this.p(n)}$provideDocumentOnDropEdits(t,i,r,s,n,o){return this.s(t,Qg,a=>Promise.resolve(a.provideDocumentOnDropEdits(i,E.revive(r),s,n,o)),void 0,void 0)}$resolveDropEdit(t,i,r){return this.s(t,Qg,s=>s.resolveDropEdit(i,r),{},void 0)}$releaseDocumentOnDropEdits(t,i){this.s(t,Qg,r=>Promise.resolve(r.releaseDropEdits(i)),void 0,void 0)}registerMappedEditsProvider(t,i,r){const s=this.t(new xC(this.h,r),t);return this.e.$registerMappedEditsProvider(s,this.o(i,t),t.displayName??t.name),this.p(s)}$provideMappedEdits(t,i,r,s,n){return this.s(t,xC,o=>Promise.resolve(o.provideMappedEdits(i,r,s,n)),null,n)}registerDocumentPasteEditProvider(t,i,r,s){const n=this.q();return this.f.set(n,new vh(new fh(this.e,this.h,r,n,t),t)),this.e.$registerPasteEditProvider(n,this.o(i,t),{supportsCopy:!!r.prepareDocumentPaste,supportsPaste:!!r.provideDocumentPasteEdits,supportsResolve:!!r.resolveDocumentPasteEdit,providedPasteEditKinds:s.providedPasteEditKinds?.map(o=>o.value),copyMimeTypes:s.copyMimeTypes,pasteMimeTypes:s.pasteMimeTypes}),this.p(n)}$prepareDocumentPaste(t,i,r,s,n){return this.s(t,fh,o=>o.prepareDocumentPaste(E.revive(i),r,s,n),void 0,n)}$providePasteEdits(t,i,r,s,n,o,a){return this.s(t,fh,c=>c.providePasteEdits(i,E.revive(r),s,n,o,a),void 0,a)}$resolvePasteEdit(t,i,r){return this.s(t,fh,s=>s.resolvePasteEdit(i,r),{},void 0)}$releasePasteEdits(t,i){this.s(t,fh,r=>Promise.resolve(r.releasePasteEdits(i)),void 0,void 0)}static y(t){return{pattern:t.source,flags:t.flags}}static z(t){return{decreaseIndentPattern:Zt.y(t.decreaseIndentPattern),increaseIndentPattern:Zt.y(t.increaseIndentPattern),indentNextLinePattern:t.indentNextLinePattern?Zt.y(t.indentNextLinePattern):void 0,unIndentedLinePattern:t.unIndentedLinePattern?Zt.y(t.unIndentedLinePattern):void 0}}static B(t){return{beforeText:Zt.y(t.beforeText),afterText:t.afterText?Zt.y(t.afterText):void 0,previousLineText:t.previousLineText?Zt.y(t.previousLineText):void 0,action:t.action}}static C(t){return t.map(Zt.B)}static D(t){return{open:t.open,close:t.close,notIn:t.notIn?t.notIn.map(i=>za.toString(i)):void 0}}static E(t){return t.map(Zt.D)}setLanguageConfiguration(t,i,r){const{wordPattern:s}=r;if(s&&$5(s))throw new Error(`Invalid language configuration: wordPattern '${s}' is not allowed to match the empty string.`);s?this.h.setWordDefinitionFor(i,s):this.h.setWordDefinitionFor(i,void 0),r.__electricCharacterSupport&&this.m.report("LanguageConfiguration.__electricCharacterSupport",t,"Do not use."),r.__characterPairSupport&&this.m.report("LanguageConfiguration.__characterPairSupport",t,"Do not use.");const n=this.q(),o={comments:r.comments,brackets:r.brackets,wordPattern:r.wordPattern?Zt.y(r.wordPattern):void 0,indentationRules:r.indentationRules?Zt.z(r.indentationRules):void 0,onEnterRules:r.onEnterRules?Zt.C(r.onEnterRules):void 0,__electricCharacterSupport:r.__electricCharacterSupport,__characterPairSupport:r.__characterPairSupport,autoClosingPairs:r.autoClosingPairs?Zt.E(r.autoClosingPairs):void 0};return this.e.$setLanguageConfiguration(n,i,o),this.p(n)}$setWordDefinitions(t){for(const i of t)this.h.setWordDefinitionFor(i.languageId,new RegExp(i.regexSource,i.regexFlags))}};function CB(e){return typeof e=="object"&&typeof e.sessionId=="string"}var tZ=V("ILanguageModelToolsService"),IB=class{constructor(e){this.a=new Map,this.c=new Map,this.d=new Map,this.b=e.getProxy(q.MainThreadLanguageModelTools),this.b.$getTools().then(t=>{for(const i of t)this.d.set(i.id,oi(i))})}async $countTokensForInvocation(e,t,i){const r=this.c.get(e);if(!r)throw new Error(`Tool invocation call ${e} not found`);return await r(t,i)}async invokeTool(e,t,i){const r=Ht();if(t.tokenizationOptions&&this.c.set(r,t.tokenizationOptions.countTokens),t.toolInvocationToken&&!CB(t.toolInvocationToken))throw new Error("Invalid tool invocation token");try{const s=await this.b.$invokeTool({toolId:e,callId:r,parameters:t.input??t.parameters,tokenBudget:t.tokenizationOptions?.tokenBudget,context:t.toolInvocationToken},i);return Jp.to(s)}finally{this.c.delete(r)}}$onDidChangeTools(e){this.d.clear();for(const t of e)this.d.set(t.id,t)}get tools(){return Array.from(this.d.values()).map(e=>hw.to(e))}async $invokeTool(e,t){const i=this.a.get(e.toolId);if(!i)throw new Error(`Unknown tool ${e.toolId}`);const r={input:e.parameters,parameters:e.parameters,toolInvocationToken:e.context};e.tokenBudget!==void 0&&(r.tokenizationOptions={tokenBudget:e.tokenBudget,countTokens:this.c.get(e.callId)||((n,o=Ge.None)=>this.b.$countTokensForInvocation(e.callId,n,o))});const s=await pn(Promise.resolve(i.tool.invoke(r,t)),t);if(!s)throw new ki;return Jp.from(s)}async $prepareToolInvocation(e,t,i){const r=this.a.get(e);if(!r)throw new Error(`Unknown tool ${e}`);if(!r.tool.prepareInvocation)return;const s={parameters:t,input:t},n=await r.tool.prepareInvocation(s,i);if(n)return{confirmationMessages:n.confirmationMessages?{title:n.confirmationMessages.title,message:typeof n.confirmationMessages.message=="string"?n.confirmationMessages.message:ke.from(n.confirmationMessages.message)}:void 0,invocationMessage:n.invocationMessage}}registerTool(e,t,i){return this.a.set(t,{extension:e,tool:i}),this.b.$registerTool(t),ee(()=>{this.a.delete(t),this.b.$unregisterTool(t)})}},PB=class{constructor(e,t,i,r){this.c=t,this.d=i,this.e=r,this.b=[],this.f=0,this.g=new Set,this.a=e.getProxy(q.MainThreadLanguages)}$acceptLanguageIds(e){this.b=e}async getLanguages(){return this.b.slice(0)}async changeLanguage(e,t){await this.a.$changeLanguage(e,t);const i=this.c.getDocumentData(e);if(!i)throw new Error(`document '${e.toString()}' NOT found`);return i.document}async tokenAtPosition(e,t){const i=e.version,r=Fe.from(t),s=await this.a.$tokensAtPosition(e.uri,r),n={type:Rn.Other,range:e.getWordRangeAtPosition(t)??new Se(t.line,t.character,t.line,t.character)};if(!s)return n;const o={range:O.to(s.range),type:F0.to(s.type)};return!o.range.contains(t)||i!==e.version?n:o}createLanguageStatusItem(e,t,i){const r=this.f++,s=this.a,n=this.g,o=`${e.identifier.value}/${t}`;if(n.has(o))throw new Error(`LanguageStatusItem with id '${t}' ALREADY exists`);n.add(o);const a={selector:i,id:t,name:e.displayName??e.name,severity:_a.Information,command:void 0,text:"",detail:"",busy:!1};let c;const l=new ue,u=()=>{if(c?.dispose(),!n.has(o)){console.warn(`LanguageStatusItem (${t}) from ${e.identifier.value} has been disposed and CANNOT be updated anymore`);return}c=lE(()=>{l.clear(),this.a.$setLanguageStatus(r,{id:o,name:a.name??e.displayName??e.name,source:e.displayName??e.name,selector:nc.from(a.selector,this.e),label:a.text,detail:a.detail??"",severity:a.severity===_a.Error?Lt.Error:a.severity===_a.Warning?Lt.Warning:Lt.Info,command:a.command&&this.d.toInternal(a.command,l),accessibilityInfo:a.accessibilityInformation,busy:a.busy})},0)},h={dispose(){l.dispose(),c?.dispose(),s.$removeLanguageStatus(r),n.delete(o)},get id(){return a.id},get name(){return a.name},set name(d){a.name=d,u()},get selector(){return a.selector},set selector(d){a.selector=d,u()},get text(){return a.text},set text(d){a.text=d,u()},set text2(d){A(e,"languageStatusText"),a.text=d,u()},get text2(){return A(e,"languageStatusText"),a.text},get detail(){return a.detail},set detail(d){a.detail=d,u()},get severity(){return a.severity},set severity(d){a.severity=d,u()},get accessibilityInformation(){return a.accessibilityInformation},set accessibilityInformation(d){a.accessibilityInformation=d,u()},get command(){return a.command},set command(d){a.command=d,u()},get busy(){return a.busy},set busy(d){a.busy=d,u()}};return u(),h}};function DB(e){return e&&e.title}var fy=class{constructor(t,i){this.b=i,this.a=t.getProxy(q.MainThreadMessageService)}showMessage(t,i,r,s,n){const o={source:{identifier:t.identifier,label:t.displayName||t.name}};let a;typeof s=="string"||DB(s)?a=[s,...n]:(o.modal=s?.modal,o.useCustom=s?.useCustom,o.detail=s?.detail,o.forceShow=s?.forceShow,o.timeout=s?.timeout,o.description=s?.description,o.forceHiddenSource=s?.forceHiddenSource,a=n),o.useCustom&&A(t,"resolvers");const c=[];let l=!1;for(let u=0;u<a.length;u++){const h=a[u];if(typeof h=="string")c.push({title:h,handle:u,isCloseAffordance:!1});else if(typeof h=="object"){const{title:d,isCloseAffordance:f}=h;c.push({title:d,isCloseAffordance:!!f,handle:u}),f&&(l?this.b.warn(`[${t.identifier}] Only one message item can have 'isCloseAffordance':`,h):l=!0)}else this.b.warn(`[${t.identifier}] Invalid message item:`,h)}return this.a.$showMessage(i,r,o,c).then(u=>{if(typeof u=="number")return a[u]})}};fy=__decorate([__param(1,Ce)],fy);var py=class{constructor(e,t,i,r){this.start=e,this.deletedCount=t,this.deletedItems=i,this.items=r}asApiEvent(){return{range:new Os(this.start,this.start+this.deletedCount),addedCells:this.items.map(e=>e.apiCell),removedCells:this.deletedItems}}},gy=class{static asModelAddData(e){return{EOL:e.eol,lines:e.source,languageId:e.language,uri:e.uri,isDirty:!1,versionId:1}}constructor(e,t,i){this.notebook=e,this.h=t,this.j=i,this.handle=i.handle,this.uri=E.revive(i.uri),this.cellKind=i.cellKind,this.a=i.outputs.map(On.to),this.e=i.internalMetadata??{},this.b=Object.freeze(i.metadata??{}),this.d=Object.freeze(fc.to(i.internalMetadata??{}))}get internalMetadata(){return this.e}get apiCell(){if(!this.f){const e=this,t=this.h.getDocument(this.uri);if(!t)throw new Error(`MISSING extHostDocument for notebook cell: ${this.uri}`);const i={get index(){return e.notebook.getCellIndex(e)},notebook:e.notebook.apiNotebook,kind:Au.to(this.j.cellKind),document:t.document,get mime(){return e.g},set mime(r){e.g=r},get outputs(){return e.a.slice(0)},get metadata(){return e.b},get executionSummary(){return e.d}};this.f=Object.freeze(i)}return this.f}setOutputs(e){this.a=e.map(On.to)}setOutputItems(e,t,i){const r=i.map(pc.to),s=this.a.find(n=>n.id===e);if(s&&(t||(s.items.length=0),s.items.push(...r),s.items.length>1&&s.items.every(n=>I9(n.mime)))){const n=new Map,o=[];s.items.forEach(a=>{let c;n.has(a.mime)?c=n.get(a.mime):(c=[],n.set(a.mime,c),o.push(a.mime)),c.push(a.data)}),s.items.length=0,o.forEach(a=>{const c=sF(n.get(a));s.items.push({mime:a,data:c.data.buffer})})}}setMetadata(e){this.b=Object.freeze(e)}setInternalMetadata(e){this.e=e,this.d=Object.freeze(fc.to(e))}setMime(e){}},AB=class rP{static{this.a=0}constructor(t,i,r,s,n){this.k=t,this.l=i,this.m=r,this.uri=s,this.handle=rP.a++,this.b=[],this.g=0,this.h=!1,this.j=!1,this.d=n.viewType,this.f=Object.freeze(n.metadata??Object.create(null)),this.r([[0,0,n.cells]],!0,void 0),this.g=n.versionId}dispose(){this.j=!0}get versionId(){return this.g}get apiNotebook(){if(!this.e){const t=this,i={get uri(){return t.uri},get version(){return t.g},get notebookType(){return t.d},get isDirty(){return t.h},get isUntitled(){return t.uri.scheme===z.untitled},get isClosed(){return t.j},get metadata(){return t.f},get cellCount(){return t.b.length},cellAt(r){return r=t.n(r),t.b[r].apiCell},getCells(r){return(r?t.p(r):t.b).map(n=>n.apiCell)},save(){return t.q()},[Symbol.for("debug.description")](){return`NotebookDocument(${this.uri.toString()})`}};this.e=Object.freeze(i)}return this.e}acceptDocumentPropertiesChanged(t){t.metadata&&(this.f=Object.freeze({...this.f,...t.metadata}))}acceptDirty(t){this.h=t}acceptModelChanged(t,i,r){this.g=t.versionId,this.h=i,this.acceptDocumentPropertiesChanged({metadata:r});const s={notebook:this.apiNotebook,metadata:r,cellChanges:[],contentChanges:[]},n=[];for(const a of t.rawEvents)a.kind===Tr.ModelChange?this.r(a.changes,!1,s.contentChanges):a.kind===Tr.Move?this.s(a.index,a.length,a.newIdx,s.contentChanges):a.kind===Tr.Output?(this.t(a.index,a.outputs),n.push({cell:this.b[a.index].apiCell,outputs:this.b[a.index].apiCell.outputs})):a.kind===Tr.OutputItem?(this.u(a.index,a.outputId,a.append,a.outputItems),n.push({cell:this.b[a.index].apiCell,outputs:this.b[a.index].apiCell.outputs})):a.kind===Tr.ChangeCellLanguage?(this.v(a.index,a.language),n.push({cell:this.b[a.index].apiCell,document:this.b[a.index].apiCell.document})):a.kind===Tr.ChangeCellContent?n.push({cell:this.b[a.index].apiCell,document:this.b[a.index].apiCell.document}):a.kind===Tr.ChangeCellMime?this.w(a.index,a.mime):a.kind===Tr.ChangeCellMetadata?(this.x(a.index,a.metadata),n.push({cell:this.b[a.index].apiCell,metadata:this.b[a.index].apiCell.metadata})):a.kind===Tr.ChangeCellInternalMetadata&&(this.y(a.index,a.internalMetadata),n.push({cell:this.b[a.index].apiCell,executionSummary:this.b[a.index].apiCell.executionSummary}));const o=new Map;for(let a=0;a<n.length;a++){const c=n[a],l=o.get(c.cell);if(l===void 0){const u=s.cellChanges.push({document:void 0,executionSummary:void 0,metadata:void 0,outputs:void 0,...c});o.set(c.cell,u-1)}else s.cellChanges[l]={...s.cellChanges[l],...c}}return Object.freeze(s),Object.freeze(s.cellChanges),Object.freeze(s.contentChanges),s}n(t){return t=t|0,t<0?0:t>=this.b.length?this.b.length-1:t}o(t){let i=t.start|0,r=t.end|0;return i<0&&(i=0),r>this.b.length&&(r=this.b.length),t.with({start:i,end:r})}p(t){t=this.o(t);const i=[];for(let r=t.start;r<t.end;r++)i.push(this.b[r]);return i}async q(){return this.j?Promise.reject(new Error("Notebook has been closed")):this.k.$trySaveNotebook(this.uri)}r(t,i,r){if(this.j)return;const s=[],n=[],o=[];if(t.reverse().forEach(a=>{const l=a[2].map(d=>{const f=new gy(this,this.l,d);return i||n.push(gy.asModelAddData(d)),f}),u=new py(a[0],a[1],[],l),h=this.b.splice(a[0],a[1],...l);for(const d of h)o.push(d.uri),u.deletedItems.push(d.apiCell);s.push(u)}),this.l.acceptDocumentsAndEditorsDelta({addedDocuments:n,removedDocuments:o}),r)for(const a of s)r.push(a.asApiEvent())}s(t,i,r,s){const n=this.b.splice(t,i);this.b.splice(r,0,...n);const o=[new py(t,i,n.map(a=>a.apiCell),[]),new py(r,0,[],n)];for(const a of o)s.push(a.asApiEvent())}t(t,i){this.b[t].setOutputs(i)}u(t,i,r,s){this.b[t].setOutputItems(i,r,s)}v(t,i){const r=this.b[t];r.apiCell.document.languageId!==i&&this.m.$acceptModelLanguageChanged(r.uri,i)}w(t,i){const r=this.b[t];r.apiCell.mime=i}x(t,i){this.b[t].setMetadata(i)}y(t,i){this.b[t].setInternalMetadata(i)}getCellFromApiCell(t){return this.b.find(i=>i.apiCell===t)}getCellFromIndex(t){return this.b[t]}getCell(t){return this.b.find(i=>i.handle===t)}getCellIndex(t){return this.b.indexOf(t)}},my=class sP{static{this.apiEditorsToExtHost=new WeakMap}constructor(t,i,r,s,n,o,a){this.id=t,this.c=i,this.notebookData=r,this.d=s,this.e=n,this.f=o,this.g=a,this.a=!1}get apiEditor(){if(!this.b){const t=this;this.b={get notebook(){return t.notebookData.apiNotebook},get selection(){return t.e[0]},set selection(i){this.selections=[i]},get selections(){return t.e},set selections(i){if(!Array.isArray(i)||!i.every(Os.isNotebookRange))throw $e("selections");t.e=i,t.h(i)},get visibleRanges(){return t.d},revealRange(i,r){t.c.$tryRevealRange(t.id,os.from(i),r??Zf.Default)},get viewColumn(){return t.f},get replOptions(){if(t.g==="repl")return{appendIndex:this.notebook.cellCount-1}},[Symbol.for("debug.description")](){return`NotebookEditor(${this.notebook.uri.toString()})`}},sP.apiEditorsToExtHost.set(this.b,this)}return this.b}get visible(){return this.a}_acceptVisibility(t){this.a=t}_acceptVisibleRanges(t){this.d=t}_acceptSelections(t){this.e=t}h(t){this.c.$trySetSelections(this.id,t.map(os.from))}_acceptViewColumn(t){this.f=t}},vy=class{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==te)return wy(this.right);let e=this;for(;e.parent!==te&&e.parent.left!==e;)e=e.parent;return e.parent===te?te:e.parent}prev(){if(this.left!==te)return $C(this.left);let e=this;for(;e.parent!==te&&e.parent.right!==e;)e=e.parent;return e.parent===te?te:e.parent}detach(){this.parent=null,this.left=null,this.right=null}},kC;(function(e){e[e.Black=0]="Black",e[e.Red=1]="Red"})(kC||(kC={}));var te=new vy(null,0);te.parent=te,te.left=te,te.right=te,te.color=0;function wy(e){for(;e.left!==te;)e=e.left;return e}function $C(e){for(;e.right!==te;)e=e.right;return e}function by(e){return e===te?0:e.size_left+e.piece.length+by(e.right)}function yy(e){return e===te?0:e.lf_left+e.piece.lineFeedCnt+yy(e.right)}function Ey(){te.parent=te}function wh(e,t){const i=t.right;i.size_left+=t.size_left+(t.piece?t.piece.length:0),i.lf_left+=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),t.right=i.left,i.left!==te&&(i.left.parent=t),i.parent=t.parent,t.parent===te?e.root=i:t.parent.left===t?t.parent.left=i:t.parent.right=i,i.left=t,t.parent=i}function bh(e,t){const i=t.left;t.left=i.right,i.right!==te&&(i.right.parent=t),i.parent=t.parent,t.size_left-=i.size_left+(i.piece?i.piece.length:0),t.lf_left-=i.lf_left+(i.piece?i.piece.lineFeedCnt:0),t.parent===te?e.root=i:t===t.parent.right?t.parent.right=i:t.parent.left=i,i.right=t,t.parent=i}function Yg(e,t){let i,r;if(t.left===te?(r=t,i=r.right):t.right===te?(r=t,i=r.left):(r=wy(t.right),i=r.right),r===e.root){e.root=i,i.color=0,t.detach(),Ey(),e.root.parent=te;return}const s=r.color===1;if(r===r.parent.left?r.parent.left=i:r.parent.right=i,r===t?(i.parent=r.parent,yh(e,i)):(r.parent===t?i.parent=r:i.parent=r.parent,yh(e,i),r.left=t.left,r.right=t.right,r.parent=t.parent,r.color=t.color,t===e.root?e.root=r:t===t.parent.left?t.parent.left=r:t.parent.right=r,r.left!==te&&(r.left.parent=r),r.right!==te&&(r.right.parent=r),r.size_left=t.size_left,r.lf_left=t.lf_left,yh(e,r)),t.detach(),i.parent.left===i){const o=by(i),a=yy(i);if(o!==i.parent.size_left||a!==i.parent.lf_left){const c=o-i.parent.size_left,l=a-i.parent.lf_left;i.parent.size_left=o,i.parent.lf_left=a,Vs(e,i.parent,c,l)}}if(yh(e,i.parent),s){Ey();return}let n;for(;i!==e.root&&i.color===0;)i===i.parent.left?(n=i.parent.right,n.color===1&&(n.color=0,i.parent.color=1,wh(e,i.parent),n=i.parent.right),n.left.color===0&&n.right.color===0?(n.color=1,i=i.parent):(n.right.color===0&&(n.left.color=0,n.color=1,bh(e,n),n=i.parent.right),n.color=i.parent.color,i.parent.color=0,n.right.color=0,wh(e,i.parent),i=e.root)):(n=i.parent.left,n.color===1&&(n.color=0,i.parent.color=1,bh(e,i.parent),n=i.parent.left),n.left.color===0&&n.right.color===0?(n.color=1,i=i.parent):(n.left.color===0&&(n.right.color=0,n.color=1,wh(e,n),n=i.parent.left),n.color=i.parent.color,i.parent.color=0,n.left.color=0,bh(e,i.parent),i=e.root));i.color=0,Ey()}function CC(e,t){for(yh(e,t);t!==e.root&&t.parent.color===1;)if(t.parent===t.parent.parent.left){const i=t.parent.parent.right;i.color===1?(t.parent.color=0,i.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.right&&(t=t.parent,wh(e,t)),t.parent.color=0,t.parent.parent.color=1,bh(e,t.parent.parent))}else{const i=t.parent.parent.left;i.color===1?(t.parent.color=0,i.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.left&&(t=t.parent,bh(e,t)),t.parent.color=0,t.parent.parent.color=1,wh(e,t.parent.parent))}e.root.color=0}function Vs(e,t,i,r){for(;t!==e.root&&t!==te;)t.parent.left===t&&(t.parent.size_left+=i,t.parent.lf_left+=r),t=t.parent}function yh(e,t){let i=0,r=0;if(t!==e.root){for(;t!==e.root&&t===t.parent.right;)t=t.parent;if(t!==e.root)for(t=t.parent,i=by(t.left)-t.size_left,r=yy(t.left)-t.lf_left,t.size_left+=i,t.lf_left+=r;t!==e.root&&(i!==0||r!==0);)t.parent.left===t&&(t.parent.size_left+=i,t.parent.lf_left+=r),t=t.parent}}var qs=65535;function IC(e){let t;return e[e.length-1]<65536?t=new Uint16Array(e.length):t=new Uint32Array(e.length),t.set(e,0),t}var RB=class{constructor(e,t,i,r,s){this.lineStarts=e,this.cr=t,this.lf=i,this.crlf=r,this.isBasicASCII=s}};function Gs(e,t=!0){const i=[0];let r=1;for(let s=0,n=e.length;s<n;s++){const o=e.charCodeAt(s);o===13?s+1<n&&e.charCodeAt(s+1)===10?(i[r++]=s+2,s++):i[r++]=s+1:o===10&&(i[r++]=s+1)}return t?IC(i):i}function TB(e,t){e.length=0,e[0]=0;let i=1,r=0,s=0,n=0,o=!0;for(let c=0,l=t.length;c<l;c++){const u=t.charCodeAt(c);u===13?c+1<l&&t.charCodeAt(c+1)===10?(n++,e[i++]=c+2,c++):(r++,e[i++]=c+1):u===10?(s++,e[i++]=c+1):o&&u!==9&&(u<32||u>126)&&(o=!1)}const a=new RB(IC(e),r,s,n,o);return e.length=0,a}var Oi=class{constructor(e,t,i,r,s){this.bufferIndex=e,this.start=t,this.end=i,this.lineFeedCnt=r,this.length=s}},Jo=class{constructor(e,t){this.buffer=e,this.lineStarts=t}},LB=class{constructor(e,t){this.a=[],this.c=e,this.d=t,this.b=0,e.root!==te&&e.iterate(e.root,i=>(i!==te&&this.a.push(i.piece),!0))}read(){return this.a.length===0?this.b===0?(this.b++,this.d):null:this.b>this.a.length-1?null:this.b===0?this.d+this.c.getPieceContent(this.a[this.b++]):this.c.getPieceContent(this.a[this.b++])}},NB=class{constructor(e){this.a=e,this.b=[]}get(e){for(let t=this.b.length-1;t>=0;t--){const i=this.b[t];if(i.nodeStartOffset<=e&&i.nodeStartOffset+i.node.piece.length>=e)return i}return null}get2(e){for(let t=this.b.length-1;t>=0;t--){const i=this.b[t];if(i.nodeStartLineNumber&&i.nodeStartLineNumber<e&&i.nodeStartLineNumber+i.node.piece.lineFeedCnt>=e)return i}return null}set(e){this.b.length>=this.a&&this.b.shift(),this.b.push(e)}validate(e){let t=!1;const i=this.b;for(let r=0;r<i.length;r++){const s=i[r];if(s.node.parent===null||s.nodeStartOffset>=e){i[r]=null,t=!0;continue}}if(t){const r=[];for(const s of i)s!==null&&r.push(s);this.b=r}}},OB=class{constructor(e,t,i){this.create(e,t,i)}create(e,t,i){this.a=[new Jo("",[0])],this.g={line:0,column:0},this.root=te,this.b=1,this.c=0,this.d=t,this.e=t.length,this.f=i;let r=null;for(let s=0,n=e.length;s<n;s++)if(e[s].buffer.length>0){e[s].lineStarts||(e[s].lineStarts=Gs(e[s].buffer));const o=new Oi(s+1,{line:0,column:0},{line:e[s].lineStarts.length-1,column:e[s].buffer.length-e[s].lineStarts[e[s].lineStarts.length-1]},e[s].lineStarts.length-1,e[s].buffer.length);this.a.push(e[s]),r=this.S(r,o)}this.h=new NB(1),this.j={lineNumber:0,value:""},this.y()}normalizeEOL(e){const t=qs,i=t-Math.floor(t/3),r=i*2;let s="",n=0;const o=[];if(this.iterate(this.root,a=>{const c=this.R(a),l=c.length;if(n<=i||n+l<r)return s+=c,n+=l,!0;const u=s.replace(/\r\n|\r|\n/g,e);return o.push(new Jo(u,Gs(u))),s=c,n=l,!0}),n>0){const a=s.replace(/\r\n|\r|\n/g,e);o.push(new Jo(a,Gs(a)))}this.create(o,e,!0)}getEOL(){return this.d}setEOL(e){this.d=e,this.e=this.d.length,this.normalizeEOL(e)}createSnapshot(e){return new LB(this,e)}equal(e){if(this.getLength()!==e.getLength()||this.getLineCount()!==e.getLineCount())return!1;let t=0;return this.iterate(this.root,r=>{if(r===te)return!0;const s=this.R(r),n=s.length,o=e.G(t),a=e.G(t+n),c=e.getValueInRange2(o,a);return t+=n,s===c})}getOffsetAt(e,t){let i=0,r=this.root;for(;r!==te;)if(r.left!==te&&r.lf_left+1>=e)r=r.left;else if(r.lf_left+r.piece.lineFeedCnt+1>=e){i+=r.size_left;const s=this.B(r,e-r.lf_left-2);return i+=s+t-1}else e-=r.lf_left+r.piece.lineFeedCnt,i+=r.size_left+r.piece.length,r=r.right;return i}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,i=0;const r=e;for(;t!==te;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){const s=this.A(t,e-t.size_left);if(i+=t.lf_left+s.index,s.index===0){const n=this.getOffsetAt(i+1,1),o=r-n;return new er(i+1,o+1)}return new er(i+1,s.remainder+1)}else if(e-=t.size_left+t.piece.length,i+=t.lf_left+t.piece.lineFeedCnt,t.right===te){const s=this.getOffsetAt(i+1,1),n=r-e-s;return new er(i+1,n+1)}else t=t.right;return new er(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const i=this.H(e.startLineNumber,e.startColumn),r=this.H(e.endLineNumber,e.endColumn),s=this.getValueInRange2(i,r);return t?t!==this.d||!this.f?s.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this.f?s:s.replace(/\r\n|\r|\n/g,t):s}getValueInRange2(e,t){if(e.node===t.node){const o=e.node,a=this.a[o.piece.bufferIndex].buffer,c=this.u(o.piece.bufferIndex,o.piece.start);return a.substring(c+e.remainder,c+t.remainder)}let i=e.node;const r=this.a[i.piece.bufferIndex].buffer,s=this.u(i.piece.bufferIndex,i.piece.start);let n=r.substring(s+e.remainder,s+i.piece.length);for(i=i.next();i!==te;){const o=this.a[i.piece.bufferIndex].buffer,a=this.u(i.piece.bufferIndex,i.piece.start);if(i===t.node){n+=o.substring(a,a+t.remainder);break}else n+=o.substr(a,i.piece.length);i=i.next()}return n}getLinesContent(){const e=[];let t=0,i="",r=!1;return this.iterate(this.root,s=>{if(s===te)return!0;const n=s.piece;let o=n.length;if(o===0)return!0;const a=this.a[n.bufferIndex].buffer,c=this.a[n.bufferIndex].lineStarts,l=n.start.line,u=n.end.line;let h=c[l]+n.start.column;if(r&&(a.charCodeAt(h)===10&&(h++,o--),e[t++]=i,i="",r=!1,o===0))return!0;if(l===u)return!this.f&&a.charCodeAt(h+o-1)===13?(r=!0,i+=a.substr(h,o-1)):i+=a.substr(h,o),!0;i+=this.f?a.substring(h,Math.max(h,c[l+1]-this.e)):a.substring(h,c[l+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;for(let d=l+1;d<u;d++)i=this.f?a.substring(c[d],c[d+1]-this.e):a.substring(c[d],c[d+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;return!this.f&&a.charCodeAt(c[u]+n.end.column-1)===13?(r=!0,n.end.column===0?t--:i=a.substr(c[u],n.end.column-1)):i=a.substr(c[u],n.end.column),!0}),r&&(e[t++]=i,i=""),e[t++]=i,e}getLength(){return this.c}getLineCount(){return this.b}getLineContent(e){return this.j.lineNumber===e?this.j.value:(this.j.lineNumber=e,e===this.b?this.j.value=this.getLineRawContent(e):this.f?this.j.value=this.getLineRawContent(e,this.e):this.j.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this.j.value)}l(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const i=this.a[t.piece.bufferIndex],r=this.u(t.piece.bufferIndex,t.piece.start);return i.buffer.charCodeAt(r)}else{const t=this.a[e.node.piece.bufferIndex],r=this.u(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(r)}}getLineCharCode(e,t){const i=this.H(e,t+1);return this.l(i)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this.e}getCharCode(e){const t=this.G(e);return this.l(t)}getNearestChunk(e){const t=this.G(e);if(t.remainder===t.node.piece.length){const i=t.node.next();if(!i||i===te)return"";const r=this.a[i.piece.bufferIndex],s=this.u(i.piece.bufferIndex,i.piece.start);return r.buffer.substring(s,s+i.piece.length)}else{const i=this.a[t.node.piece.bufferIndex],r=this.u(t.node.piece.bufferIndex,t.node.piece.start),s=r+t.remainder,n=r+t.node.piece.length;return i.buffer.substring(s,n)}}findMatchesInNode(e,t,i,r,s,n,o,a,c,l,u){const h=this.a[e.piece.bufferIndex],d=this.u(e.piece.bufferIndex,e.piece.start),f=this.u(e.piece.bufferIndex,s),g=this.u(e.piece.bufferIndex,n);let v;const y={line:0,column:0};let S,x;t._wordSeparators?(S=h.buffer.substring(f,g),x=P=>P+f,t.reset(0)):(S=h.buffer,x=P=>P,t.reset(f));do if(v=t.next(S),v){if(x(v.index)>=g)return l;this.s(e,x(v.index)-d,y);const P=this.t(e.piece.bufferIndex,s,y),D=y.line===s.line?y.column-s.column+r:y.column+1,N=D+v[0].length;if(u[l++]=e8(new et(i+P,D,i+P,N),v,a),x(v.index)+v[0].length>=g||l>=c)return l}while(v);return l}findMatchesLineByLine(e,t,i,r){const s=[];let n=0;const o=new oU(t.wordSeparators,t.regex);let a=this.H(e.startLineNumber,e.startColumn);if(a===null)return[];const c=this.H(e.endLineNumber,e.endColumn);if(c===null)return[];let l=this.s(a.node,a.remainder);const u=this.s(c.node,c.remainder);if(a.node===c.node)return this.findMatchesInNode(a.node,o,e.startLineNumber,e.startColumn,l,u,t,i,r,n,s),s;let h=e.startLineNumber,d=a.node;for(;d!==c.node;){const g=this.t(d.piece.bufferIndex,l,d.piece.end);if(g>=1){const y=this.a[d.piece.bufferIndex].lineStarts,S=this.u(d.piece.bufferIndex,d.piece.start),x=y[l.line+g],P=h===e.startLineNumber?e.startColumn:1;if(n=this.findMatchesInNode(d,o,h,P,l,this.s(d,x-S),t,i,r,n,s),n>=r)return s;h+=g}const v=h===e.startLineNumber?e.startColumn-1:0;if(h===e.endLineNumber){const y=this.getLineContent(h).substring(v,e.endColumn-1);return n=this.n(t,o,y,e.endLineNumber,v,n,s,i,r),s}if(n=this.n(t,o,this.getLineContent(h).substr(v),h,v,n,s,i,r),n>=r)return s;h++,a=this.H(h,1),d=a.node,l=this.s(a.node,a.remainder)}if(h===e.endLineNumber){const g=h===e.startLineNumber?e.startColumn-1:0,v=this.getLineContent(h).substring(g,e.endColumn-1);return n=this.n(t,o,v,e.endLineNumber,g,n,s,i,r),s}const f=h===e.startLineNumber?e.startColumn:1;return n=this.findMatchesInNode(c.node,o,h,f,l,u,t,i,r,n,s),s}n(e,t,i,r,s,n,o,a,c){const l=e.wordSeparators;if(!a&&e.simpleSearch){const h=e.simpleSearch,d=h.length,f=i.length;let g=-d;for(;(g=i.indexOf(h,g+d))!==-1;)if((!l||t8(l,i,f,g,d))&&(o[n++]=new Vw(new et(r,g+1+s,r,g+1+d+s),null),n>=c))return n;return n}let u;t.reset(0);do if(u=t.next(i),u&&(o[n++]=e8(new et(r,u.index+1+s,r,u.index+1+u[0].length+s),u,a),n>=c))return n;while(u);return n}insert(e,t,i=!1){if(this.f=this.f&&i,this.j.lineNumber=0,this.j.value="",this.root!==te){const{node:r,remainder:s,nodeStartOffset:n}=this.G(e),o=r.piece,a=o.bufferIndex,c=this.s(r,s);if(r.piece.bufferIndex===0&&o.end.line===this.g.line&&o.end.column===this.g.column&&n+o.length===e&&t.length<qs){this.F(r,t),this.y();return}if(n===e)this.o(t,r),this.h.validate(e);else if(n+r.piece.length>e){const l=[];let u=new Oi(o.bufferIndex,c,o.end,this.t(o.bufferIndex,c,o.end),this.u(a,o.end)-this.u(a,c));if(this.K()&&this.M(t)&&this.I(r,s)===10){const g={line:u.start.line+1,column:0};u=new Oi(u.bufferIndex,g,u.end,this.t(u.bufferIndex,g,u.end),u.length-1),t+=`
`}if(this.K()&&this.L(t))if(this.I(r,s-1)===13){const g=this.s(r,s-1);this.C(r,g),t="\r"+t,r.piece.length===0&&l.push(r)}else this.C(r,c);else this.C(r,c);const h=this.w(t);u.length>0&&this.S(r,u);let d=r;for(let f=0;f<h.length;f++)d=this.S(d,h[f]);this.v(l)}else this.q(t,r)}else{const r=this.w(t);let s=this.T(null,r[0]);for(let n=1;n<r.length;n++)s=this.S(s,r[n])}this.y()}delete(e,t){if(this.j.lineNumber=0,this.j.value="",t<=0||this.root===te)return;const i=this.G(e),r=this.G(e+t),s=i.node,n=r.node;if(s===n){const h=this.s(s,i.remainder),d=this.s(s,r.remainder);if(i.nodeStartOffset===e){if(t===s.piece.length){const f=s.next();Yg(this,s),this.N(f),this.y();return}this.D(s,d),this.h.validate(e),this.N(s),this.y();return}if(i.nodeStartOffset+s.piece.length===e+t){this.C(s,h),this.O(s),this.y();return}this.E(s,h,d),this.y();return}const o=[],a=this.s(s,i.remainder);this.C(s,a),this.h.validate(e),s.piece.length===0&&o.push(s);const c=this.s(n,r.remainder);this.D(n,c),n.piece.length===0&&o.push(n);const l=s.next();for(let h=l;h!==te&&h!==n;h=h.next())o.push(h);const u=s.piece.length===0?s.prev():s;this.v(o),this.O(u),this.y()}o(e,t){const i=[];if(this.K()&&this.M(e)&&this.L(t)){const n=t.piece,o={line:n.start.line+1,column:0},a=new Oi(n.bufferIndex,o,n.end,this.t(n.bufferIndex,o,n.end),n.length-1);t.piece=a,e+=`
`,Vs(this,t,-1,-1),t.piece.length===0&&i.push(t)}const r=this.w(e);let s=this.T(t,r[r.length-1]);for(let n=r.length-2;n>=0;n--)s=this.T(s,r[n]);this.N(s),this.v(i)}q(e,t){this.Q(e,t)&&(e+=`
`);const i=this.w(e),r=this.S(t,i[0]);let s=r;for(let n=1;n<i.length;n++)s=this.S(s,i[n]);this.N(r)}s(e,t,i){const r=e.piece,s=e.piece.bufferIndex,n=this.a[s].lineStarts,a=n[r.start.line]+r.start.column+t;let c=r.start.line,l=r.end.line,u=0,h=0,d=0;for(;c<=l&&(u=c+(l-c)/2|0,d=n[u],u!==l);)if(h=n[u+1],a<d)l=u-1;else if(a>=h)c=u+1;else break;return i?(i.line=u,i.column=a-d,null):{line:u,column:a-d}}t(e,t,i){if(i.column===0)return i.line-t.line;const r=this.a[e].lineStarts;if(i.line===r.length-1)return i.line-t.line;const s=r[i.line+1],n=r[i.line]+i.column;if(s>n+1)return i.line-t.line;const o=n-1;return this.a[e].buffer.charCodeAt(o)===13?i.line-t.line+1:i.line-t.line}u(e,t){return this.a[e].lineStarts[t.line]+t.column}v(e){for(let t=0;t<e.length;t++)Yg(this,e[t])}w(e){if(e.length>qs){const l=[];for(;e.length>qs;){const h=e.charCodeAt(qs-1);let d;h===13||h>=55296&&h<=56319?(d=e.substring(0,qs-1),e=e.substring(qs-1)):(d=e.substring(0,qs),e=e.substring(qs));const f=Gs(d);l.push(new Oi(this.a.length,{line:0,column:0},{line:f.length-1,column:d.length-f[f.length-1]},f.length-1,d.length)),this.a.push(new Jo(d,f))}const u=Gs(e);return l.push(new Oi(this.a.length,{line:0,column:0},{line:u.length-1,column:e.length-u[u.length-1]},u.length-1,e.length)),this.a.push(new Jo(e,u)),l}let t=this.a[0].buffer.length;const i=Gs(e,!1);let r=this.g;if(this.a[0].lineStarts[this.a[0].lineStarts.length-1]===t&&t!==0&&this.L(e)&&this.M(this.a[0].buffer)){this.g={line:this.g.line,column:this.g.column+1},r=this.g;for(let l=0;l<i.length;l++)i[l]+=t+1;this.a[0].lineStarts=this.a[0].lineStarts.concat(i.slice(1)),this.a[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let l=0;l<i.length;l++)i[l]+=t;this.a[0].lineStarts=this.a[0].lineStarts.concat(i.slice(1)),this.a[0].buffer+=e}const s=this.a[0].buffer.length,n=this.a[0].lineStarts.length-1,o=s-this.a[0].lineStarts[n],a={line:n,column:o},c=new Oi(0,r,a,this.t(0,r,a),s-t);return this.g=a,[c]}getLinesRawContent(){return this.U(this.root)}getLineRawContent(e,t=0){let i=this.root,r="";const s=this.h.get2(e);if(s){i=s.node;const n=this.B(i,e-s.nodeStartLineNumber-1),o=this.a[i.piece.bufferIndex].buffer,a=this.u(i.piece.bufferIndex,i.piece.start);if(s.nodeStartLineNumber+i.piece.lineFeedCnt===e)r=o.substring(a+n,a+i.piece.length);else{const c=this.B(i,e-s.nodeStartLineNumber);return o.substring(a+n,a+c-t)}}else{let n=0;const o=e;for(;i!==te;)if(i.left!==te&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const a=this.B(i,e-i.lf_left-2),c=this.B(i,e-i.lf_left-1),l=this.a[i.piece.bufferIndex].buffer,u=this.u(i.piece.bufferIndex,i.piece.start);return n+=i.size_left,this.h.set({node:i,nodeStartOffset:n,nodeStartLineNumber:o-(e-1-i.lf_left)}),l.substring(u+a,u+c-t)}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const a=this.B(i,e-i.lf_left-2),c=this.a[i.piece.bufferIndex].buffer,l=this.u(i.piece.bufferIndex,i.piece.start);r=c.substring(l+a,l+i.piece.length);break}else e-=i.lf_left+i.piece.lineFeedCnt,n+=i.size_left+i.piece.length,i=i.right}for(i=i.next();i!==te;){const n=this.a[i.piece.bufferIndex].buffer;if(i.piece.lineFeedCnt>0){const o=this.B(i,0),a=this.u(i.piece.bufferIndex,i.piece.start);return r+=n.substring(a,a+o-t),r}else{const o=this.u(i.piece.bufferIndex,i.piece.start);r+=n.substr(o,i.piece.length)}i=i.next()}return r}y(){let e=this.root,t=1,i=0;for(;e!==te;)t+=e.lf_left+e.piece.lineFeedCnt,i+=e.size_left+e.piece.length,e=e.right;this.b=t,this.c=i,this.h.validate(this.c)}A(e,t){const i=e.piece,r=this.s(e,t),s=r.line-i.start.line;if(this.u(i.bufferIndex,i.end)-this.u(i.bufferIndex,i.start)===t){const n=this.t(e.piece.bufferIndex,i.start,r);if(n!==s)return{index:n,remainder:0}}return{index:s,remainder:r.column}}B(e,t){if(t<0)return 0;const i=e.piece,r=this.a[i.bufferIndex].lineStarts,s=i.start.line+t+1;return s>i.end.line?r[i.end.line]+i.end.column-r[i.start.line]-i.start.column:r[s]-r[i.start.line]-i.start.column}C(e,t){const i=e.piece,r=i.lineFeedCnt,s=this.u(i.bufferIndex,i.end),n=t,o=this.u(i.bufferIndex,n),a=this.t(i.bufferIndex,i.start,n),c=a-r,l=o-s,u=i.length+l;e.piece=new Oi(i.bufferIndex,i.start,n,a,u),Vs(this,e,l,c)}D(e,t){const i=e.piece,r=i.lineFeedCnt,s=this.u(i.bufferIndex,i.start),n=t,o=this.t(i.bufferIndex,n,i.end),a=this.u(i.bufferIndex,n),c=o-r,l=s-a,u=i.length+l;e.piece=new Oi(i.bufferIndex,n,i.end,o,u),Vs(this,e,l,c)}E(e,t,i){const r=e.piece,s=r.start,n=r.end,o=r.length,a=r.lineFeedCnt,c=t,l=this.t(r.bufferIndex,r.start,c),u=this.u(r.bufferIndex,t)-this.u(r.bufferIndex,s);e.piece=new Oi(r.bufferIndex,r.start,c,l,u),Vs(this,e,u-o,l-a);const h=new Oi(r.bufferIndex,i,n,this.t(r.bufferIndex,i,n),this.u(r.bufferIndex,n)-this.u(r.bufferIndex,i)),d=this.S(e,h);this.N(d)}F(e,t){this.Q(t,e)&&(t+=`
`);const i=this.K()&&this.L(t)&&this.M(e),r=this.a[0].buffer.length;this.a[0].buffer+=t;const s=Gs(t,!1);for(let d=0;d<s.length;d++)s[d]+=r;if(i){const d=this.a[0].lineStarts[this.a[0].lineStarts.length-2];this.a[0].lineStarts.pop(),this.g={line:this.g.line-1,column:r-d}}this.a[0].lineStarts=this.a[0].lineStarts.concat(s.slice(1));const n=this.a[0].lineStarts.length-1,o=this.a[0].buffer.length-this.a[0].lineStarts[n],a={line:n,column:o},c=e.piece.length+t.length,l=e.piece.lineFeedCnt,u=this.t(0,e.piece.start,a),h=u-l;e.piece=new Oi(e.piece.bufferIndex,e.piece.start,a,u,c),this.g=a,Vs(this,e,t.length,h)}G(e){let t=this.root;const i=this.h.get(e);if(i)return{node:i.node,nodeStartOffset:i.nodeStartOffset,remainder:e-i.nodeStartOffset};let r=0;for(;t!==te;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){r+=t.size_left;const s={node:t,remainder:e-t.size_left,nodeStartOffset:r};return this.h.set(s),s}else e-=t.size_left+t.piece.length,r+=t.size_left+t.piece.length,t=t.right;return null}H(e,t){let i=this.root,r=0;for(;i!==te;)if(i.left!==te&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const s=this.B(i,e-i.lf_left-2),n=this.B(i,e-i.lf_left-1);return r+=i.size_left,{node:i,remainder:Math.min(s+t-1,n),nodeStartOffset:r}}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const s=this.B(i,e-i.lf_left-2);if(s+t-1<=i.piece.length)return{node:i,remainder:s+t-1,nodeStartOffset:r};t-=i.piece.length-s;break}else e-=i.lf_left+i.piece.lineFeedCnt,r+=i.size_left+i.piece.length,i=i.right;for(i=i.next();i!==te;){if(i.piece.lineFeedCnt>0){const s=this.B(i,0),n=this.J(i);return{node:i,remainder:Math.min(t-1,s),nodeStartOffset:n}}else if(i.piece.length>=t-1){const s=this.J(i);return{node:i,remainder:t-1,nodeStartOffset:s}}else t-=i.piece.length;i=i.next()}return null}I(e,t){if(e.piece.lineFeedCnt<1)return-1;const i=this.a[e.piece.bufferIndex],r=this.u(e.piece.bufferIndex,e.piece.start)+t;return i.buffer.charCodeAt(r)}J(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}K(){return!(this.f&&this.d===`
`)}L(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===te||e.piece.lineFeedCnt===0)return!1;const t=e.piece,i=this.a[t.bufferIndex].lineStarts,r=t.start.line,s=i[r]+t.start.column;return r===i.length-1||i[r+1]>s+1?!1:this.a[t.bufferIndex].buffer.charCodeAt(s)===10}M(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===te||e.piece.lineFeedCnt===0?!1:this.I(e,e.piece.length-1)===13}N(e){if(this.K()&&this.L(e)){const t=e.prev();this.M(t)&&this.P(t,e)}}O(e){if(this.K()&&this.M(e)){const t=e.next();this.L(t)&&this.P(e,t)}}P(e,t){const i=[],r=this.a[e.piece.bufferIndex].lineStarts;let s;e.piece.end.column===0?s={line:e.piece.end.line-1,column:r[e.piece.end.line]-r[e.piece.end.line-1]-1}:s={line:e.piece.end.line,column:e.piece.end.column-1};const n=e.piece.length-1,o=e.piece.lineFeedCnt-1;e.piece=new Oi(e.piece.bufferIndex,e.piece.start,s,o,n),Vs(this,e,-1,-1),e.piece.length===0&&i.push(e);const a={line:t.piece.start.line+1,column:0},c=t.piece.length-1,l=this.t(t.piece.bufferIndex,a,t.piece.end);t.piece=new Oi(t.piece.bufferIndex,a,t.piece.end,l,c),Vs(this,t,-1,-1),t.piece.length===0&&i.push(t);const u=this.w(`\r
`);this.S(e,u[0]);for(let h=0;h<i.length;h++)Yg(this,i[h])}Q(e,t){if(this.K()&&this.M(e)){const i=t.next();if(this.L(i)){if(e+=`
`,i.piece.length===1)Yg(this,i);else{const r=i.piece,s={line:r.start.line+1,column:0},n=r.length-1,o=this.t(r.bufferIndex,s,r.end);i.piece=new Oi(r.bufferIndex,s,r.end,o,n),Vs(this,i,-1,-1)}return!0}}return!1}iterate(e,t){if(e===te)return t(te);const i=this.iterate(e.left,t);return i&&t(e)&&this.iterate(e.right,t)}R(e){if(e===te)return"";const t=this.a[e.piece.bufferIndex],i=e.piece,r=this.u(i.bufferIndex,i.start),s=this.u(i.bufferIndex,i.end);return t.buffer.substring(r,s)}getPieceContent(e){const t=this.a[e.bufferIndex],i=this.u(e.bufferIndex,e.start),r=this.u(e.bufferIndex,e.end);return t.buffer.substring(i,r)}S(e,t){const i=new vy(t,1);if(i.left=te,i.right=te,i.parent=te,i.size_left=0,i.lf_left=0,this.root===te)this.root=i,i.color=0;else if(e.right===te)e.right=i,i.parent=e;else{const s=wy(e.right);s.left=i,i.parent=s}return CC(this,i),i}T(e,t){const i=new vy(t,1);if(i.left=te,i.right=te,i.parent=te,i.size_left=0,i.lf_left=0,this.root===te)this.root=i,i.color=0;else if(e.left===te)e.left=i,i.parent=e;else{const r=$C(e.left);r.right=i,i.parent=r}return CC(this,i),i}U(e){let t="";return this.iterate(e,i=>(t+=this.R(i),!0)),t}},PC;(function(e){e[e.Unknown=0]="Unknown",e[e.Invalid=3]="Invalid",e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(PC||(PC={}));function Sy(e){let t=0,i=0,r=0,s=0;for(let n=0,o=e.length;n<o;n++){const a=e.charCodeAt(n);a===13?(t===0&&(i=n),t++,n+1<o&&e.charCodeAt(n+1)===10?(s|=2,n++):s|=3,r=n+1):a===10&&(s|=1,t===0&&(i=n),t++,r=n+1)}return t===0&&(i=e.length),[t,i,e.length-r,s]}var xy;function FB(){return xy||(xy=new TextDecoder("UTF-16LE")),xy}function MB(e,t,i){const r=new Uint16Array(e.buffer,t,i);return i>0&&(r[0]===65279||r[0]===65534)?UB(e,t,i):FB().decode(r)}function UB(e,t,i){const r=[];let s=0;for(let n=0;n<i;n++){const o=SR(e,t);t+=2,r[s++]=String.fromCharCode(o)}return r.join("")}function Xg(e){return e.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}var _B=class fs{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(t,i,r,s){this.oldPosition=t,this.oldText=i,this.newPosition=r,this.newText=s}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${Xg(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${Xg(this.oldText)}")`:`(replace@${this.oldPosition} "${Xg(this.oldText)}" with "${Xg(this.newText)}")`}static a(t){return 4+2*t.length}static c(t,i,r){const s=i.length;hd(t,s,r),r+=4;for(let n=0;n<s;n++)xR(t,i.charCodeAt(n),r),r+=2;return r}static d(t,i){const r=ud(t,i);return i+=4,MB(t,i,r)}writeSize(){return 8+fs.a(this.oldText)+fs.a(this.newText)}write(t,i){return hd(t,this.oldPosition,i),i+=4,hd(t,this.newPosition,i),i+=4,i=fs.c(t,this.oldText,i),i=fs.c(t,this.newText,i),i}static read(t,i,r){const s=ud(t,i);i+=4;const n=ud(t,i);i+=4;const o=fs.d(t,i);i+=fs.a(o);const a=fs.d(t,i);return i+=fs.a(a),r.push(new fs(s,o,n,a)),i}},jB=class Lh extends X{constructor(t,i,r,s,n,o,a){super(),this.m=this.B(new I),this.onDidChangeContent=this.m.event,this.f=i,this.j=!o,this.g=s,this.h=n,this.c=new OB(t,r,a)}equals(t){return!(t instanceof Lh)||this.f!==t.f||this.getEOL()!==t.getEOL()?!1:this.c.equal(t.c)}mightContainRTL(){return this.g}mightContainUnusualLineTerminators(){return this.h}resetMightContainUnusualLineTerminators(){this.h=!1}mightContainNonBasicASCII(){return this.j}getBOM(){return this.f}getEOL(){return this.c.getEOL()}createSnapshot(t){return this.c.createSnapshot(t?this.f:"")}getOffsetAt(t,i){return this.c.getOffsetAt(t,i)}getPositionAt(t){return this.c.getPositionAt(t)}getRangeAt(t,i){const r=t+i,s=this.getPositionAt(t),n=this.getPositionAt(r);return new et(s.lineNumber,s.column,n.lineNumber,n.column)}getValueInRange(t,i=0){if(t.isEmpty())return"";const r=this.n(i);return this.c.getValueInRange(t,r)}getValueLengthInRange(t,i=0){if(t.isEmpty())return 0;if(t.startLineNumber===t.endLineNumber)return t.endColumn-t.startColumn;const r=this.getOffsetAt(t.startLineNumber,t.startColumn),s=this.getOffsetAt(t.endLineNumber,t.endColumn);let n=0;const o=this.n(i),a=this.getEOL();if(o.length!==a.length){const c=o.length-a.length,l=t.endLineNumber-t.startLineNumber;n=c*l}return s-r+n}getCharacterCountInRange(t,i=0){if(this.j){let r=0;const s=t.startLineNumber,n=t.endLineNumber;for(let o=s;o<=n;o++){const a=this.getLineContent(o),c=o===s?t.startColumn-1:0,l=o===n?t.endColumn-1:a.length;for(let u=c;u<l;u++)td(a.charCodeAt(u))?(r=r+1,u=u+1):r=r+1}return r+=this.n(i).length*(n-s),r}return this.getValueLengthInRange(t,i)}getNearestChunk(t){return this.c.getNearestChunk(t)}getLength(){return this.c.getLength()}getLineCount(){return this.c.getLineCount()}getLinesContent(){return this.c.getLinesContent()}getLineContent(t){return this.c.getLineContent(t)}getLineCharCode(t,i){return this.c.getLineCharCode(t,i)}getCharCode(t){return this.c.getCharCode(t)}getLineLength(t){return this.c.getLineLength(t)}getLineMinColumn(t){return 1}getLineMaxColumn(t){return this.getLineLength(t)+1}getLineFirstNonWhitespaceColumn(t){const i=Gm(this.getLineContent(t));return i===-1?0:i+1}getLineLastNonWhitespaceColumn(t){const i=dA(this.getLineContent(t));return i===-1?0:i+2}n(t){switch(t){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(t){this.c.setEOL(t)}applyEdits(t,i,r){let s=this.g,n=this.h,o=this.j,a=!0,c=[];for(let v=0;v<t.length;v++){const y=t[v];a&&y._isTracked&&(a=!1);const S=y.range;if(y.text){let H=!0;o||(H=!yA(y.text),o=H),!s&&H&&(s=T5(y.text)),!n&&H&&(n=L5(y.text))}let x="",P=0,D=0,N=0;if(y.text){let H;[P,D,N,H]=Sy(y.text);const Y=this.getEOL();H===0||H===(Y===`\r
`?2:1)?x=y.text:x=y.text.replace(/\r\n|\r|\n/g,Y)}c[v]={sortIndex:v,identifier:y.identifier||null,range:S,rangeOffset:this.getOffsetAt(S.startLineNumber,S.startColumn),rangeLength:this.getValueLengthInRange(S),text:x,eolCount:P,firstLineLength:D,lastLineLength:N,forceMoveMarkers:!!y.forceMoveMarkers,isAutoWhitespaceEdit:y.isAutoWhitespaceEdit||!1}}c.sort(Lh.u);let l=!1;for(let v=0,y=c.length-1;v<y;v++){const S=c[v].range.getEndPosition(),x=c[v+1].range.getStartPosition();if(x.isBeforeOrEqual(S)){if(x.isBefore(S))throw new Error("Overlapping ranges are not allowed!");l=!0}}a&&(c=this.s(c));const u=r||i?Lh._getInverseEditRanges(c):[],h=[];if(i)for(let v=0;v<c.length;v++){const y=c[v],S=u[v];if(y.isAutoWhitespaceEdit&&y.range.isEmpty())for(let x=S.startLineNumber;x<=S.endLineNumber;x++){let P="";x===S.startLineNumber&&(P=this.getLineContent(y.range.startLineNumber),Gm(P)!==-1)||h.push({lineNumber:x,oldContent:P})}}let d=null;if(r){let v=0;d=[];for(let y=0;y<c.length;y++){const S=c[y],x=u[y],P=this.getValueInRange(S.range),D=S.rangeOffset+v;v+=S.text.length-P.length,d[y]={sortIndex:S.sortIndex,identifier:S.identifier,range:x,text:P,textChange:new _B(S.rangeOffset,P,D,S.text)}}l||d.sort((y,S)=>y.sortIndex-S.sortIndex)}this.g=s,this.h=n,this.j=o;const f=this.t(c);let g=null;if(i&&h.length>0){h.sort((v,y)=>y.lineNumber-v.lineNumber),g=[];for(let v=0,y=h.length;v<y;v++){const S=h[v].lineNumber;if(v>0&&h[v-1].lineNumber===S)continue;const x=h[v].oldContent,P=this.getLineContent(S);P.length===0||P===x||Gm(P)!==-1||g.push(S)}}return this.m.fire(),new rU(d,f,g)}s(t){return t.length<1e3?t:[this._toSingleEditOperation(t)]}_toSingleEditOperation(t){let i=!1;const r=t[0].range,s=t[t.length-1].range,n=new et(r.startLineNumber,r.startColumn,s.endLineNumber,s.endColumn);let o=r.startLineNumber,a=r.startColumn;const c=[];for(let f=0,g=t.length;f<g;f++){const v=t[f],y=v.range;i=i||v.forceMoveMarkers,c.push(this.getValueInRange(new et(o,a,y.startLineNumber,y.startColumn))),v.text.length>0&&c.push(v.text),o=y.endLineNumber,a=y.endColumn}const l=c.join(""),[u,h,d]=Sy(l);return{sortIndex:0,identifier:t[0].identifier,range:n,rangeOffset:this.getOffsetAt(n.startLineNumber,n.startColumn),rangeLength:this.getValueLengthInRange(n,0),text:l,eolCount:u,firstLineLength:h,lastLineLength:d,forceMoveMarkers:i,isAutoWhitespaceEdit:!1}}t(t){t.sort(Lh.w);const i=[];for(let r=0;r<t.length;r++){const s=t[r],n=s.range.startLineNumber,o=s.range.startColumn,a=s.range.endLineNumber,c=s.range.endColumn;if(n===a&&o===c&&s.text.length===0)continue;s.text?(this.c.delete(s.rangeOffset,s.rangeLength),this.c.insert(s.rangeOffset,s.text,!0)):this.c.delete(s.rangeOffset,s.rangeLength);const l=new et(n,o,a,c);i.push({range:l,rangeLength:s.rangeLength,text:s.text,rangeOffset:s.rangeOffset,forceMoveMarkers:s.forceMoveMarkers})}return i}findMatchesLineByLine(t,i,r,s){return this.c.findMatchesLineByLine(t,i,r,s)}getPieceTree(){return this.c}static _getInverseEditRange(t,i){const r=t.startLineNumber,s=t.startColumn,[n,o,a]=Sy(i);let c;if(i.length>0){const l=n+1;l===1?c=new et(r,s,r,s+o):c=new et(r,s,r+l-1,a+1)}else c=new et(r,s,r,s);return c}static _getInverseEditRanges(t){const i=[];let r=0,s=0,n=null;for(let o=0,a=t.length;o<a;o++){const c=t[o];let l,u;n?n.range.endLineNumber===c.range.startLineNumber?(l=r,u=s+(c.range.startColumn-n.range.endColumn)):(l=r+(c.range.startLineNumber-n.range.endLineNumber),u=c.range.startColumn):(l=c.range.startLineNumber,u=c.range.startColumn);let h;if(c.text.length>0){const d=c.eolCount+1;d===1?h=new et(l,u,l,u+c.firstLineLength):h=new et(l,u,l+d-1,c.lastLineLength+1)}else h=new et(l,u,l,u);r=h.endLineNumber,s=h.endColumn,i.push(h),n=c}return i}static u(t,i){const r=et.compareRangesUsingEnds(t.range,i.range);return r===0?t.sortIndex-i.sortIndex:r}static w(t,i){const r=et.compareRangesUsingEnds(t.range,i.range);return r===0?i.sortIndex-t.sortIndex:-r}},HB=class{constructor(e,t,i,r,s,n,o,a,c){this.a=e,this.b=t,this.c=i,this.d=r,this.e=s,this.f=n,this.g=o,this.h=a,this.j=c}k(e){const t=this.c+this.d+this.e,i=this.c+this.e;return t===0?e===1?`
`:`\r
`:i>t/2?`\r
`:`
`}create(e){const t=this.k(e),i=this.a;if(this.j&&(t===`\r
`&&(this.c>0||this.d>0)||t===`
`&&(this.c>0||this.e>0)))for(let s=0,n=i.length;s<n;s++){const o=i[s].buffer.replace(/\r\n|\r|\n/g,t),a=Gs(o);i[s]=new Jo(o,a)}const r=new jB(i,this.b,t,this.f,this.g,this.h,this.j);return{textBuffer:r,disposable:r}}getFirstLineText(e){return this.a[0].buffer.substr(0,e).split(/\r\n|\r|\n/)[0]}},DC=class{constructor(){this.a=[],this.b="",this.c=!1,this.d=0,this.e=[],this.f=0,this.g=0,this.h=0,this.j=!1,this.k=!1,this.l=!0}acceptChunk(e){if(e.length===0)return;this.a.length===0&&xA(e)&&(this.b=SA,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this.m(e.substr(0,e.length-1),!1),this.c=!0,this.d=t):(this.m(e,!1),this.c=!1,this.d=t)}m(e,t){!t&&e.length===0||(this.c?this.n(String.fromCharCode(this.d)+e):this.n(e))}n(e){const t=TB(this.e,e);this.a.push(new Jo(e,t.lineStarts)),this.f+=t.cr,this.g+=t.lf,this.h+=t.crlf,t.isBasicASCII||(this.l=!1,this.j||(this.j=T5(e)),this.k||(this.k=L5(e)))}finish(e=!0){return this.o(),new HB(this.a,this.b,this.f,this.g,this.h,this.j,this.k,this.l,e)}o(){if(this.a.length===0&&this.m("",!0),this.c){this.c=!1;const e=this.a[this.a.length-1];e.buffer+=String.fromCharCode(this.d);const t=Gs(e.buffer);e.lineStarts=t,this.d===13&&this.f++}}},BB=class extends X{constructor(e,t,i){super(),this._source=e,this.b=t,this.c=i,this.a=void 0}f(e){const t=e.getLineCount();return new et(1,1,t,this.g(e,t))}g(e,t){if(t<1||t>e.getLineCount())throw new Error("Illegal value for lineNumber");return e.getLineLength(t)+1}get inputTextBuffer(){if(!this.b){const e=new DC;e.acceptChunk(this._source);const t=e.finish(!0),{textBuffer:i,disposable:r}=t.create(1);this.b=i,this.B(r)}return this.b}get outputTextBuffers(){return this.a||(this.a=this.c.map(e=>{const t=new DC;t.acceptChunk(e);const i=t.finish(!0),{textBuffer:r,disposable:s}=i.create(1);return this.B(s),r})),this.a}findInInputs(e){const i=new Zk(e,!1,!1,null).parseSearchRequest();if(!i)return[];const r=this.f(this.inputTextBuffer);return this.inputTextBuffer.findMatchesLineByLine(r,i,!0,5e3)}findInOutputs(e){const i=new Zk(e,!1,!1,null).parseSearchRequest();return i?this.outputTextBuffers.map(r=>{const s=r.findMatchesLineByLine(this.f(r),i,!0,5e3);if(s.length!==0)return{textBuffer:r,matches:s}}).filter(r=>!!r):[]}};function AC(e,t){let i=-1;const r=[];let s=[];return e.forEach(o=>{o.range.startLineNumber!==i&&s.length>0&&(r.push([...s]),s=[]),s.push(o),i=o.range.endLineNumber}),s.length>0&&r.push([...s]),r.map(o=>{const a=[],c=o[0].range.startLineNumber,l=o[o.length-1].range.endLineNumber;for(let u=c;u<=l;u++)a.push(t.getLineContent(u));return new _x(a.join(`
`)+`
`,o.map(u=>new et(u.range.startLineNumber-1,u.range.startColumn-1,u.range.endLineNumber-1,u.range.endColumn-1)))})}var rZ=Object.freeze({id:"application",order:100,title:p(4272,null),type:"object"}),WB=Object.freeze({id:"workbench",order:7,title:p(4273,null),type:"object"}),zB=Object.freeze({id:"security",scope:1,title:p(4274,null),type:"object",order:7}),sZ=Object.freeze({id:"problems",title:p(4275,null),type:"object",order:101}),VB=Object.freeze({id:"window",order:8,title:p(4276,null),type:"object"}),qB={ConfigurationMigration:"base.contributions.configuration.migration"},GB=class{constructor(){this.migrations=[],this.a=new I,this.onDidRegisterConfigurationMigration=this.a.event}registerConfigurationMigrations(e){this.migrations.push(...e)}},Zg=new GB;ai.add(qB.ConfigurationMigration,Zg);var RC=class extends X{static{this.ID="workbench.contrib.configurationMigration"}constructor(t,i){super(),this.a=t,this.b=i,this.B(this.b.onDidChangeWorkspaceFolders(async r=>{for(const s of r.added)await this.f(s,Zg.migrations)})),this.c(Zg.migrations),this.B(Zg.onDidRegisterConfigurationMigration(r=>this.c(r)))}async c(t){await this.f(void 0,t);for(const i of this.b.getWorkspace().folders)await this.f(i,t)}async f(t,i){await Promise.all([i.map(r=>this.g(r,t?.uri))])}async g(t,i){const r=this.a.inspect(t.key,{resource:i}),s=this.b.getWorkbenchState()===3?[["user",2],["userLocal",3],["userRemote",4],["workspace",5],["workspaceFolder",6]]:[["user",2],["userLocal",3],["userRemote",4],["workspace",5]];for(const[n,o]of s){const a=r[n];if(!a)continue;const c=[];if(a.value!==void 0){const l=await this.h(t,n,a.value,i,void 0);for(const u of l??[])c.push([u,[]])}for(const{identifiers:l,value:u}of a.overrides??[])if(u!==void 0){const h=await this.h(t,n,u,i,l);for(const d of h??[])c.push([d,l])}c.length&&await Promise.allSettled(c.map(async([[l,u],h])=>this.a.updateValue(l,u.value,{resource:i,overrideIdentifiers:h},o)))}}async h(t,i,r,s,n){const o=c=>{const u=this.a.inspect(c,{resource:s})[i];if(u)return n?u.overrides?.find(({identifiers:h})=>Ir(h,n))?.value:u.value},a=await t.migrateFn(r,o);return Array.isArray(a)?a:[[t.key,a]]}};RC=__decorate([__param(0,Sn),__param(1,$d)],RC);var TC=class extends X{static{this.ID="workbench.contrib.dynamicWorkbenchSecurityConfiguration"}constructor(t){super(),this.b=t,this.a=new Ss,this.ready=this.a.p,this.c()}async c(){try{await this.f()}finally{this.a.complete()}}async f(){if(!it&&(await this.b.getEnvironment())?.os!==1)return;ai.as(Ta.Configuration).registerConfiguration({...zB,properties:{"security.allowedUNCHosts":{type:"array",items:{type:"string",pattern:"^[^\\\\]+$",patternErrorMessage:p(4277,null)},default:[],markdownDescription:p(4278,null),scope:2},"security.restrictUNCAccess":{type:"boolean",default:!0,markdownDescription:p(4279,null),scope:2}}})}};TC=__decorate([__param(0,s8)],TC);var Eh="window.newWindowProfile",LC=class extends X{static{this.ID="workbench.contrib.dynamicWindowConfiguration"}constructor(t,i){super(),this.c=t,this.f=i,this.g(),this.B(this.c.onDidChangeProfiles(r=>this.g())),this.h(),this.j(),this.B(i.onDidChangeConfiguration(r=>{r.source!==7&&r.affectsConfiguration(Eh)&&this.h()})),this.B(this.c.onDidChangeProfiles(()=>this.j()))}g(){const t=ai.as(Ta.Configuration),i={...VB,properties:{[Eh]:{type:["string","null"],default:null,enum:[...this.c.profiles.map(r=>r.name),null],enumItemLabels:[...this.c.profiles.map(r=>""),p(4280,null)],description:p(4281,null),scope:1}}};this.a?t.updateConfigurations({add:[i],remove:[this.a]}):t.registerConfiguration(i),this.a=i}h(){const t=this.f.getValue(Eh);this.b=t?this.c.profiles.find(i=>i.name===t):void 0}j(){const t=this.f.getValue(Eh);if(!t)return;const i=this.b?this.c.profiles.find(r=>r.id===this.b.id):void 0;t!==i?.name&&this.f.updateValue(Eh,i?.name)}};LC=__decorate([__param(0,DO),__param(1,Sn)],LC);var cZ=V("editorResolverService"),JB=ai.as(Ta.Configuration),QB={...WB,properties:{"workbench.editorAssociations":{type:"object",markdownDescription:p(13286,null),additionalProperties:{type:"string"}}}};JB.registerConfiguration(QB);var ky;(function(e){e.builtin="builtin",e.option="option",e.exclusive="exclusive",e.default="default"})(ky||(ky={}));var NC;(function(e){e[e.ABORT=1]="ABORT",e[e.NONE=2]="NONE"})(NC||(NC={}));function YB(e,t){if(new Set([z.extension,z.webviewPanel,z.vscodeWorkspaceTrust,z.vscodeSettings]).has(t.scheme))return!1;const s=typeof e=="string"&&e.indexOf(Le.sep)>=0?`${t.scheme}:${t.path}`:Jr(t);return Na(typeof e=="string"?e.toLowerCase():e,s.toLowerCase())}var XB=class Nh{static{this.a=0}get activeNotebookEditor(){return this.k?.apiEditor}get visibleNotebookEditors(){return this.l.map(t=>t.apiEditor)}constructor(t,i,r,s,n,o,a){this.q=r,this.r=s,this.s=n,this.t=o,this.u=a,this.f=new Map,this.g=new Gt,this.h=new Map,this.j=new I,this.onDidChangeActiveNotebookEditor=this.j.event,this.l=[],this.m=new I,this.onDidOpenNotebookDocument=this.m.event,this.n=new I,this.onDidCloseNotebookDocument=this.n.event,this.o=new I,this.onDidChangeVisibleNotebookEditors=this.o.event,this.p=new _r("NotebookCellStatusBarCache"),this.x=0,this.y=new Map,this.b=t.getProxy(q.MainThreadNotebook),this.c=t.getProxy(q.MainThreadNotebookDocuments),this.d=t.getProxy(q.MainThreadNotebookEditors),this.i=i.converter,i.registerArgumentProcessor({processArgument:c=>{if(c&&c.$mid===13){const l=c.notebookEditor?.notebookUri,u=c.cell.handle,d=this.g.get(l)?.getCell(u);if(d)return d.apiCell}if(c&&c.$mid===14){const l=c.uri,u=this.g.get(l);if(u)return u.apiNotebook}return c}}),Nh.C(i)}getEditorById(t){const i=this.h.get(t);if(!i)throw new Error(`unknown text editor: ${t}. known editors: ${[...this.h.keys()]} `);return i}getIdByEditor(t){for(const[i,r]of this.h)if(r.apiEditor===t)return i}get notebookDocuments(){return[...this.g.values()]}getNotebookDocument(t,i){const r=this.g.get(t);if(!r&&!i)throw new Error(`NO notebook document for '${t}'`);return r}static w(t,i){if(!i)return;const r=i.filenamePattern.map(s=>Rp.from(s)).filter(s=>s!==void 0);if(i.filenamePattern&&!r){console.warn(`Notebook content provider view options file name pattern is invalid ${i.filenamePattern}`);return}return{extension:t.identifier,providerDisplayName:t.displayName||t.name,displayName:i.displayName,filenamePattern:r,priority:i.exclusive?ky.exclusive:void 0}}registerNotebookCellStatusBarItemProvider(t,i,r){const s=Nh.a++,n=typeof r.onDidChangeCellStatusBarItems=="function"?Nh.a++:void 0;this.f.set(s,r),this.b.$registerNotebookCellStatusBarItemProvider(s,n,i);let o;return n!==void 0&&(o=r.onDidChangeCellStatusBarItems(a=>this.b.$emitCellStatusBarEvent(n))),new Oe(()=>{this.f.delete(s),this.b.$unregisterNotebookCellStatusBarItemProvider(s,n),o?.dispose()})}async createNotebookDocument(t){const i=await this.c.$tryCreateNotebook({viewType:t.viewType,content:t.content&&Nn.from(t.content)});return E.revive(i)}async openNotebookDocument(t){const i=this.g.get(t);if(i)return i.apiNotebook;const r=await this.c.$tryOpenNotebook(t),s=this.g.get(E.revive(r));return ga(s?.apiNotebook)}async showNotebookDocument(t,i){let r;typeof i=="object"?r={position:zt.from(i.viewColumn),preserveFocus:i.preserveFocus,selections:i.selections&&i.selections.map(os.from),pinned:typeof i.preview=="boolean"?!i.preview:void 0,label:typeof i.asRepl=="string"?i.asRepl:typeof i.asRepl=="object"?i.asRepl.label:void 0}:r={preserveFocus:!1,pinned:!0};const s=i?.asRepl?"repl":t.notebookType,n=await this.d.$tryShowNotebookDocument(t.uri,s,r),o=n&&this.h.get(n)?.apiEditor;if(o)return o;throw n?new Error(`Could NOT open editor for "${t.uri.toString()}" because another editor opened in the meantime.`):new Error(`Could NOT open editor for "${t.uri.toString()}".`)}async $provideNotebookCellStatusBarItems(t,i,r,s){const n=this.f.get(t),o=E.revive(i),a=this.g.get(o);if(!a||!n)return;const c=a.getCellFromIndex(r);if(!c)return;const l=await n.provideCellStatusBarItems(c.apiCell,s);if(!l)return;const u=new ue,h=this.p.add([u]),f=(Array.isArray(l)?l:[l]).map(g=>K0.from(g,this.i,u));return{cacheId:h,items:f}}$releaseNotebookCellStatusBarItems(t){this.p.delete(t)}registerNotebookSerializer(t,i,r,s,n){if(Kh(i))throw new Error("viewType cannot be empty or just whitespace");const o=this.x++;return this.y.set(o,{viewType:i,serializer:r,options:s}),this.b.$registerNotebookSerializer(o,{id:t.identifier,location:t.extensionLocation},i,tw.from(s),Nh.w(t,n)),ee(()=>{this.b.$unregisterNotebookSerializer(o)})}async $dataToNotebook(t,i,r){const s=this.y.get(t);if(!s)throw new Error("NO serializer found");const n=await s.serializer.deserializeNotebook(i.buffer,r);return new Zi(Nn.from(n))}async $notebookToData(t,i,r){const s=this.y.get(t);if(!s)throw new Error("NO serializer found");const n=await s.serializer.serializeNotebook(Nn.to(i.value),r);return J.wrap(n)}async $saveNotebook(t,i,r,s,n){const o=E.revive(i),a=this.y.get(t);if(this.D(`enter saveNotebook(versionId: ${r}, ${o.toString()})`),!a)throw new Error("NO serializer found");const c=this.g.get(o);if(!c)throw new Error("Document NOT found");if(c.versionId!==r)throw new Error("Document version mismatch");if(!this.s.value.isWritableFileSystem(o.scheme))throw new rv(p(3016,null,this.A(o)),6);const l={metadata:QE(c.apiNotebook.metadata,g=>!(a.options?.transientDocumentMetadata??{})[g]),cells:[]};for(const g of c.apiNotebook.getCells()){const v=new Qf(g.kind,g.document.getText(),g.document.languageId,g.mime,a.options?.transientOutputs?[]:[...g.outputs],g.metadata,g.executionSummary);v.metadata=QE(g.metadata,y=>!(a.options?.transientCellMetadata??{})[y]),l.cells.push(v)}if(await this.z(o,s),n.isCancellationRequested)throw new Error("canceled");const u=await a.serializer.serializeNotebook(l,n);if(n.isCancellationRequested)throw new Error("canceled");this.D(`serialized versionId: ${r} ${o.toString()}`),await this.s.value.writeFile(o,u),this.D(`Finished write versionId: ${r} ${o.toString()}`);const h=this.s.getFileSystemProviderExtUri(o.scheme),d=await this.s.value.stat(o),f={name:h.basename(o),isFile:(d.type&zi.File)!==0,isDirectory:(d.type&zi.Directory)!==0,isSymbolicLink:(d.type&zi.SymbolicLink)!==0,mtime:d.mtime,ctime:d.ctime,size:d.size,readonly:!!((d.permissions??0)&bn.Readonly)||!this.s.value.isWritableFileSystem(o.scheme),locked:!!((d.permissions??0)&bn.Locked),etag:g7({mtime:d.mtime,size:d.size}),children:void 0};return this.D(`exit saveNotebook(versionId: ${r}, ${o.toString()})`),f}async $searchInNotebooks(t,i,r,s,n){const o=this.y.get(t)?.serializer;if(!o)return{limitHit:!1,results:[]};const a=new V4;await(async(d,f,g)=>{await Promise.all(d.map(async v=>await Promise.all(v.filenamePatterns.map(y=>{const S={_reason:g._reason,folderQueries:g.folderQueries,includePattern:g.includePattern,excludePattern:g.excludePattern,maxResults:g.maxResults,type:1,filePattern:y};return this.t.doInternalFileSearchWithCustomCallback(S,f,x=>{x.forEach(P=>{a.has(P)||s.some(N=>v.isFromSettings&&!N.isFromSettings?!1:N.filenamePatterns.some(H=>YB(H,P)))||a.add(P)})}).catch(x=>{if(x.code==="ENOENT")return console.warn("Could not find notebook search results, ignoring notebook results."),{limitHit:!1,messages:[]};throw x})}))))})(r,n,i);const l=new Gt;let u=!1;const h=Array.from(a).map(async d=>{const f=[];try{if(n.isCancellationRequested)return;if(i.maxResults&&[...l.values()].reduce((S,x)=>S+x.cellResults.length,0)>i.maxResults){u=!0;return}const g=[],v=this.g.get(d);if(v)v.apiNotebook.getCells().forEach(x=>g.push({input:x.document.getText(),outputs:x.outputs.flatMap(P=>P.items.map(D=>D.data.toString()))}));else{const S=await this.s.value.readFile(d),x=J.fromString(S.toString()),P=await o.deserializeNotebook(x.buffer,n);if(n.isCancellationRequested)return;Nn.from(P).cells.forEach(N=>g.push({input:N.source,outputs:N.outputs.flatMap(H=>H.items.map(Y=>Y.valueBytes.toString()))}))}if(n.isCancellationRequested)return;g.forEach((S,x)=>{const P=i.contentPattern.pattern,D=new BB(S.input,void 0,S.outputs),N=D.findInInputs(P),H=D.findInOutputs(P),Y=H.flatMap(B=>AC(B.matches,B.textBuffer)).map((B,M)=>(B.webviewIndex=M,B));if(N.length>0||H.length>0){const B={index:x,contentResults:AC(N,D.inputTextBuffer),webviewResults:Y};f.push(B)}});const y={resource:d,cellResults:f};l.set(d,y);return}catch{return}});return await Promise.all(h),{limitHit:u,results:[...l.values()]}}async z(t,i){const r=await this.s.value.stat(t);if(typeof i?.mtime=="number"&&typeof i.etag=="string"&&i.etag!==PN&&typeof r.mtime=="number"&&typeof r.size=="number"&&i.mtime<r.mtime&&i.etag!==g7({mtime:i.mtime,size:r.size}))throw new rv(p(3017,null),3,i)}A(t){return t.scheme===z.file?t.fsPath:t.toString()}B(t,i,r){if(this.h.has(i))throw new Error(`editor with id ALREADY EXSIST: ${i}`);const s=new my(i,this.d,t,r.visibleRanges.map(os.to),r.selections.map(os.to),typeof r.viewColumn=="number"?zt.to(r.viewColumn):void 0,r.viewType);this.h.set(i,s)}$acceptDocumentAndEditorsDelta(t){if(t.value.removedDocuments)for(const r of t.value.removedDocuments){const s=E.revive(r),n=this.g.get(s);n&&(n.dispose(),this.g.delete(s),this.q.$acceptDocumentsAndEditorsDelta({removedDocuments:n.apiNotebook.getCells().map(o=>o.document.uri)}),this.n.fire(n.apiNotebook));for(const o of this.h.values())o.notebookData.uri.toString()===s.toString()&&this.h.delete(o.id)}if(t.value.addedDocuments){const r=[];for(const s of t.value.addedDocuments){const n=E.revive(s.uri);if(this.g.has(n))throw new Error(`adding EXISTING notebook ${n} `);const o=new AB(this.c,this.q,this.r,n,s);r.push(...s.cells.map(a=>gy.asModelAddData(a))),this.g.get(n)?.dispose(),this.g.set(n,o),this.q.$acceptDocumentsAndEditorsDelta({addedDocuments:r}),this.m.fire(o.apiNotebook)}}if(t.value.addedEditors)for(const r of t.value.addedEditors){if(this.h.has(r.id))return;const s=E.revive(r.documentUri),n=this.g.get(s);n&&this.B(n,r.id,r)}const i=[];if(t.value.removedEditors)for(const r of t.value.removedEditors){const s=this.h.get(r);s&&(this.h.delete(r),this.k?.id===s.id&&(this.k=void 0),i.push(s))}if(t.value.visibleEditors){this.l=t.value.visibleEditors.map(s=>this.h.get(s)).filter(s=>!!s);const r=new Set;this.l.forEach(s=>r.add(s.id));for(const s of this.h.values()){const n=r.has(s.id);s._acceptVisibility(n)}this.l=[...this.h.values()].map(s=>s).filter(s=>s.visible),this.o.fire(this.visibleNotebookEditors)}t.value.newActiveEditor===null?this.k=void 0:t.value.newActiveEditor&&(this.h.get(t.value.newActiveEditor)||console.error(`FAILED to find active notebook editor ${t.value.newActiveEditor}`),this.k=this.h.get(t.value.newActiveEditor)),t.value.newActiveEditor!==void 0&&this.j.fire(this.k?.apiEditor)}static C(t){const i=U.String.with("notebookType","A notebook type"),r=new me("vscode.executeDataToNotebook","_executeDataToNotebook","Invoke notebook serializer",[i,new U("data","Bytes to convert to data",n=>n instanceof Uint8Array,n=>J.wrap(n))],new ge("Notebook Data",n=>Nn.to(n.value))),s=new me("vscode.executeNotebookToData","_executeNotebookToData","Invoke notebook serializer",[i,new U("NotebookData","Notebook data to convert to bytes",n=>!0,n=>new Zi(Nn.from(n)))],new ge("Bytes",n=>n.buffer));t.registerApiCommand(r),t.registerApiCommand(s)}D(t){this.u.trace(`[Extension Host Notebook] ${t}`)}},ZB=class{constructor(e,t,i,r={timeout:1500,errors:3}){this.b=e,this.c=t,this.d=i,this.f=r,this.a=new el}dispose(){}getOnWillSaveNotebookDocumentEvent(e){return(t,i,r)=>{const s=function(o){t.call(i,o)};return s.extension=e,this.a.event(s,void 0,r)}}async $participateInSave(e,t,i){const r=E.revive(e),s=this.c.getNotebookDocument(r);if(!s)throw new Error("Unable to resolve notebook document");const n=[];if(await this.a.fireAsync({notebook:s.apiNotebook,reason:Ip.to(t)},i,async(a,c)=>{const l=Date.now(),u=await await Promise.resolve(a);Date.now()-l>this.f.timeout&&this.b.warn("onWillSaveNotebookDocument-listener from extension",c.extension.identifier),!i.isCancellationRequested&&u&&(u instanceof In?n.push(u):this.b.warn("onWillSaveNotebookDocument-listener from extension",c.extension.identifier,"ignored due to invalid data"))}),i.isCancellationRequested)return!1;if(n.length===0)return!0;const o={edits:[]};for(const a of n){const{edits:c}=fi.from(a);o.edits=o.edits.concat(c)}return this.d.$tryApplyWorkspaceEdit(new Zi(o))}},KB=class{constructor(e){this.c=e,this.a=new I,this.onDidSaveNotebookDocument=this.a.event,this.b=new I,this.onDidChangeNotebookDocument=this.b.event}$acceptModelChanged(e,t,i,r){const n=this.c.getNotebookDocument(E.revive(e)).acceptModelChanged(t.value,i,r);this.b.fire(n)}$acceptDirtyStateChanged(e,t){this.c.getNotebookDocument(E.revive(e)).acceptDirty(t)}$acceptModelSaved(e){const t=this.c.getNotebookDocument(E.revive(e));this.a.fire(t.apiNotebook)}},$y=class{constructor(t,i){this.c=t,this.d=i,this.a=new I,this.b=new I,this.onDidChangeNotebookEditorSelection=this.a.event,this.onDidChangeNotebookEditorVisibleRanges=this.b.event}$acceptEditorPropertiesChanged(t,i){this.c.debug("ExtHostNotebook#$acceptEditorPropertiesChanged",t,i);const r=this.d.getEditorById(t);i.visibleRanges&&r._acceptVisibleRanges(i.visibleRanges.ranges.map(os.to)),i.selections&&r._acceptSelections(i.selections.selections.map(os.to)),i.visibleRanges&&this.b.fire({notebookEditor:r.apiEditor,visibleRanges:r.apiEditor.visibleRanges}),i.selections&&this.a.fire(Object.freeze({notebookEditor:r.apiEditor,selections:r.apiEditor.selections}))}$acceptEditorViewColumns(t){for(const i in t)this.d.getEditorById(i)._acceptViewColumn(zt.to(t[i]))}};$y=__decorate([__param(0,Ce)],$y);var Lc;(function(e){e[e.Output=1]="Output",e[e.OutputItems=2]="OutputItems",e[e.ExecutionState=3]="ExecutionState"})(Lc||(Lc={}));var uZ=V("INotebookExecutionService"),eW=100,OC;(function(e){e[e.Disconnected=1]="Disconnected",e[e.Connected=2]="Connected",e[e.Initializing=3]="Initializing"})(OC||(OC={}));var hZ=V("INotebookKernelService"),dZ=V("INotebookKernelHistoryService"),Cy=class{constructor(t,i,r,s,n){this.m=i,this.n=r,this.o=s,this.q=n,this.b=new Gt,this.c=new Gt,this.f=new Map,this.g=0,this.h=new Map,this.i=0,this.j=new Map,this.k=0,this.l=new I,this.onDidChangeNotebookCellExecutionState=this.l.event,this.r=0,this.s={},this.a=t.getProxy(q.MainThreadNotebookKernels);const o=new me("notebook.selectKernel","_notebook.selectKernel","Trigger kernel picker for specified notebook editor widget",[new U("options","Select kernel options",c=>!0,c=>{if(c&&"notebookEditor"in c&&"id"in c){const l=this.n.getIdByEditor(c.notebookEditor);return{id:c.id,extension:c.extension,notebookEditorId:l}}else if(c&&"notebookEditor"in c){const l=this.n.getIdByEditor(c.notebookEditor);if(l===void 0)throw new Error(`Cannot invoke 'notebook.selectKernel' for unrecognized notebook editor ${c.notebookEditor.notebook.uri.toString()}`);return{notebookEditorId:l}}return c})],ge.Void),a=new me("vscode.executeNotebookVariableProvider","_executeNotebookVariableProvider","Execute notebook variable provider",[U.Uri],new ge("A promise that resolves to an array of variables",(c,l)=>c.map(u=>({variable:{name:u.name,value:u.value,expression:u.expression,type:u.type,language:u.language},hasNamedChildren:u.hasNamedChildren,indexedChildrenCount:u.indexedChildrenCount}))));this.o.registerApiCommand(o),this.o.registerApiCommand(a)}createNotebookController(t,i,r,s,n,o){for(const N of this.j.values())if(N.controller.id===i&&Xe.equals(t.identifier,N.extensionId))throw new Error(`notebook controller with id '${i}' ALREADY exist`);const a=this.k++,c=this;this.q.trace(`NotebookController[${a}], CREATED by ${t.identifier.value}, ${i}`);const l=()=>console.warn(`NO execute handler from notebook controller '${f.id}' of extension: '${t.identifier}'`);let u=!1;const h=new I,d=new I,f={id:Kg(t.identifier,i),notebookType:r,extensionId:t.identifier,extensionLocation:t.extensionLocation,label:s||t.identifier.value,preloads:o?o.map(Tp.from):[]};let g=n??l,v,y;this.a.$addKernel(a,f).catch(N=>{console.log(N),u=!0});let S=0;const x=()=>{if(u)return;const N=++S;Promise.resolve().then(()=>{N===S&&this.a.$updateKernel(a,f)})},P=new Gt,D={get id(){return i},get notebookType(){return f.notebookType},onDidChangeSelectedNotebooks:h.event,get label(){return f.label},set label(N){f.label=N??t.displayName??t.name,x()},get detail(){return f.detail??""},set detail(N){f.detail=N,x()},get description(){return f.description??""},set description(N){f.description=N,x()},get supportedLanguages(){return f.supportedLanguages},set supportedLanguages(N){f.supportedLanguages=N,x()},get supportsExecutionOrder(){return f.supportsExecutionOrder??!1},set supportsExecutionOrder(N){f.supportsExecutionOrder=N,x()},get rendererScripts(){return f.preloads?f.preloads.map(Tp.to):[]},get executeHandler(){return g},set executeHandler(N){g=N??l},get interruptHandler(){return v},set interruptHandler(N){v=N,f.supportsInterrupt=!!N,x()},set variableProvider(N){A(t,"notebookVariableProvider"),y=N,f.hasVariableProvider=!!N,N?.onDidChangeVariables(H=>c.a.$variablesUpdated(H.uri)),x()},get variableProvider(){return y},createNotebookCellExecution(N){if(u)throw new Error("notebook controller is DISPOSED");if(!P.has(N.notebook.uri))throw c.q.trace(`NotebookController[${a}] NOT associated to notebook, associated to THESE notebooks:`,Array.from(P.keys()).map(H=>H.toString())),new Error(`notebook controller is NOT associated to notebook: ${N.notebook.uri.toString()}`);return c._createNotebookCellExecution(N,Kg(t.identifier,this.id))},createNotebookExecution(N){if(A(t,"notebookExecution"),u)throw new Error("notebook controller is DISPOSED");if(!P.has(N.uri))throw c.q.trace(`NotebookController[${a}] NOT associated to notebook, associated to THESE notebooks:`,Array.from(P.keys()).map(H=>H.toString())),new Error(`notebook controller is NOT associated to notebook: ${N.uri.toString()}`);return c._createNotebookExecution(N,Kg(t.identifier,this.id))},dispose:()=>{u||(this.q.trace(`NotebookController[${a}], DISPOSED`),u=!0,this.j.delete(a),h.dispose(),d.dispose(),this.a.$removeKernel(a))},updateNotebookAffinity(N,H){H===Kf.Hidden&&A(t,"notebookControllerAffinityHidden"),c.a.$updateNotebookPriority(a,N.uri,H)},onDidReceiveMessage:d.event,postMessage(N,H){return A(t,"notebookMessaging"),c.a.$postMessage(a,H&&c.n.getIdByEditor(H),N)},asWebviewUri(N){return A(t,"notebookMessaging"),hh(N,c.m.remote)}};return this.j.set(a,{extensionId:t.identifier,controller:D,onDidReceiveMessage:d,onDidChangeSelection:h,associatedNotebooks:P}),D}getIdByController(t){for(const[i,r]of this.j)if(r.controller===t)return Kg(r.extensionId,t.id);return null}createNotebookControllerDetectionTask(t,i){const r=this.g++,s=this;this.q.trace(`NotebookControllerDetectionTask[${r}], CREATED by ${t.identifier.value}`),this.a.$addKernelDetectionTask(r,i);const n={dispose:()=>{this.f.delete(r),s.a.$removeKernelDetectionTask(r)}};return this.f.set(r,n),n}registerKernelSourceActionProvider(t,i,r){const s=this.i++,n=typeof r.onDidChangeNotebookKernelSourceActions=="function"?s:void 0,o=this;this.h.set(s,r),this.q.trace(`NotebookKernelSourceActionProvider[${s}], CREATED by ${t.identifier.value}`),this.a.$addKernelSourceActionProvider(s,s,i);let a;return n!==void 0&&(a=r.onDidChangeNotebookKernelSourceActions(c=>this.a.$emitNotebookKernelSourceActionsChangeEvent(n))),{dispose:()=>{this.h.delete(s),o.a.$removeKernelSourceActionProvider(s,s),a?.dispose()}}}async $provideKernelSourceActions(t,i){const r=this.h.get(t);if(r){const s=new ue;return(await r.provideNotebookKernelSourceActions(i)??[]).map(o=>ew.from(o,this.o.converter,s))}return[]}$acceptNotebookAssociation(t,i,r){const s=this.j.get(t);if(s){const n=this.n.getNotebookDocument(E.revive(i));r?s.associatedNotebooks.set(n.uri,!0):s.associatedNotebooks.delete(n.uri),this.q.trace(`NotebookController[${t}] ASSOCIATE notebook`,n.uri.toString(),r),s.onDidChangeSelection.fire({selected:r,notebook:n.apiNotebook})}}async $executeCells(t,i,r){const s=this.j.get(t);if(!s)return;const n=this.n.getNotebookDocument(E.revive(i)),o=[];for(const a of r){const c=n.getCell(a);c&&o.push(c.apiCell)}try{this.q.trace(`NotebookController[${t}] EXECUTE cells`,n.uri.toString(),o.length),await s.controller.executeHandler.call(s.controller,o,n.apiNotebook,s.controller)}catch(a){this.q.error(`NotebookController[${t}] execute cells FAILED`,a),console.error(a)}}async $cancelCells(t,i,r){const s=this.j.get(t);if(!s)return;const n=this.n.getNotebookDocument(E.revive(i));if(s.controller.interruptHandler)await s.controller.interruptHandler.call(s.controller,n.apiNotebook);else for(const o of r){const a=n.getCell(o);a&&this.b.get(a.uri)?.cancel()}if(s.controller.interruptHandler){const o=this.c.get(n.uri);this.c.delete(n.uri),r.length&&Array.isArray(o)&&o.length&&o.forEach(a=>a.dispose())}}async $provideVariables(t,i,r,s,n,o,a){const c=this.j.get(t);if(!c)return;const l=this.n.getNotebookDocument(E.revive(r)),u=c.controller.variableProvider;if(!u)return;let h;if(s!==void 0){if(h=this.s[s],!h)return}else this.s={};const d=n==="named"?du.Named:du.Indexed,f=u.provideVariables(l.apiNotebook,h,d,o,a);let g=0;for await(const v of f){if(a.isCancellationRequested)return;const y={id:this.r++,name:v.variable.name,value:v.variable.value,type:v.variable.type,interfaces:v.variable.interfaces,language:v.variable.language,expression:v.variable.expression,hasNamedChildren:v.hasNamedChildren,indexedChildrenCount:v.indexedChildrenCount,extensionId:c.extensionId.value};if(this.s[y.id]=v.variable,this.a.$receiveVariable(i,y),g++>=eW)return}}$acceptKernelMessageFromRenderer(t,i,r){const s=this.j.get(t);if(!s)return;const n=this.n.getEditorById(i);s.onDidReceiveMessage.fire(Object.freeze({editor:n.apiEditor,message:r}))}$cellExecutionChanged(t,i,r){const n=this.n.getNotebookDocument(E.revive(t)).getCell(i);if(n){const o=r?Z0.to(r):tc.Idle;o!==void 0&&this.l.fire({cell:n.apiCell,state:o})}}_createNotebookCellExecution(t,i){if(t.index<0)throw new Error("CANNOT execute cell that has been REMOVED from notebook");const s=this.n.getNotebookDocument(t.notebook.uri).getCellFromApiCell(t);if(!s)throw new Error("invalid cell");if(this.b.has(s.uri))throw new Error(`duplicate execution for ${s.uri}`);const n=new tW(i,s,this.a);this.b.set(s.uri,n);const o=n.onDidChangeState(()=>{n.state===jr.Resolved&&(n.dispose(),o.dispose(),this.b.delete(s.uri))});return n.asApiObject()}_createNotebookExecution(t,i){const r=this.n.getNotebookDocument(t.uri),s=t.getCells().find(a=>{const c=r.getCellFromApiCell(a);return c&&this.b.has(c.uri)});if(s)throw new Error(`duplicate cell execution for ${s.document.uri}`);if(this.c.has(r.uri))throw new Error(`duplicate notebook execution for ${r.uri}`);const n=new iW(i,r,this.a),o=n.onDidChangeState(()=>{n.state===Js.Resolved&&(n.dispose(),o.dispose(),this.c.delete(r.uri))});return this.c.set(r.uri,[n,o]),n.asApiObject()}};Cy=__decorate([__param(4,Ce)],Cy);var jr;(function(e){e[e.Init=0]="Init",e[e.Started=1]="Started",e[e.Resolved=2]="Resolved"})(jr||(jr={}));var tW=class nP extends X{static{this.a=0}get state(){return this.f}constructor(t,i,r){super(),this.m=i,this.n=r,this.b=nP.a++,this.c=new I,this.onDidChangeState=this.c.event,this.f=jr.Init,this.g=this.B(new lt),this.h=new rW(10,s=>this.s(s)),this.j=i.internalMetadata.executionOrder,this.n.$createExecution(this.b,t,this.m.notebook.uri,this.m.handle)}cancel(){this.g.cancel()}async r(t){await this.h.addItem(t)}async s(t){const i=Array.isArray(t)?t:[t];return this.n.$updateExecution(this.b,new Zi(i))}t(){if(this.f===jr.Init)throw new Error("Must call start before modifying cell output");if(this.f===jr.Resolved)throw new Error("Cannot modify cell output after calling resolve")}w(t){let i=this.m;if(t&&(i=this.m.notebook.getCellFromApiCell(t)),!i)throw new Error("INVALID cell");return i.handle}y(t){return t.map(i=>{const r=Yf.ensureUniqueMimeTypes(i.items,!0);return r===i.items?On.from(i):On.from({items:r,id:i.id,metadata:i.metadata})})}async z(t,i,r){const s=this.w(i),n=this.y(Er(t));return this.r({editType:Lc.Output,cellHandle:s,append:r,outputs:n})}async C(t,i,r){return t=Yf.ensureUniqueMimeTypes(Er(t),!0),this.r({editType:Lc.OutputItems,items:t.map(pc.from),outputId:i.id,append:r})}asApiObject(){const t=this;return Object.freeze({get token(){return t.g.token},get cell(){return t.m.apiCell},get executionOrder(){return t.j},set executionOrder(r){t.j=r,t.s([{editType:Lc.ExecutionState,executionOrder:t.j}])},start(r){if(t.f===jr.Resolved||t.f===jr.Started)throw new Error("Cannot call start again");t.f=jr.Started,t.c.fire(),t.s({editType:Lc.ExecutionState,runStartTime:r})},end(r,s,n){if(t.f===jr.Resolved)throw new Error("Cannot call resolve twice");t.f=jr.Resolved,t.c.fire(),t.h.flush();const o=n?{message:n.message,stack:n.stack,location:n?.location?{startLineNumber:n.location.start.line,startColumn:n.location.start.character,endLineNumber:n.location.end.line,endColumn:n.location.end.character}:void 0,uri:n.uri}:void 0;t.n.$completeExecution(t.b,new Zi({runEndTime:s,lastRunSuccess:r,error:o}))},clearOutput(r){return t.t(),t.z([],r,!1)},appendOutput(r,s){return t.t(),t.z(r,s,!0)},replaceOutput(r,s){return t.t(),t.z(r,s,!1)},appendOutputItems(r,s){return t.t(),t.C(r,s,!0)},replaceOutputItems(r,s){return t.t(),t.C(r,s,!1)}})}},Js;(function(e){e[e.Init=0]="Init",e[e.Started=1]="Started",e[e.Resolved=2]="Resolved"})(Js||(Js={}));var iW=class oP extends X{static{this.a=0}get state(){return this.f}constructor(t,i,r){super(),this.h=i,this.j=r,this.b=oP.a++,this.c=new I,this.onDidChangeState=this.c.event,this.f=Js.Init,this.g=this.B(new lt),this.j.$createNotebookExecution(this.b,t,this.h.uri)}cancel(){this.g.cancel()}asApiObject(){return Object.freeze({start:()=>{if(this.f===Js.Resolved||this.f===Js.Started)throw new Error("Cannot call start again");this.f=Js.Started,this.c.fire(),this.j.$beginNotebookExecution(this.b)},end:()=>{if(this.f===Js.Resolved)throw new Error("Cannot call resolve twice");this.f=Js.Resolved,this.c.fire(),this.j.$completeNotebookExecution(this.b)}})}},rW=class{constructor(e,t){this.f=e,this.g=t,this.a=[],this.b=Date.now()}addItem(e){return this.a.push(e),this.c||(this.c=new Ss,this.b=Date.now(),bi(this.f).then(()=>this.flush())),Date.now()-this.b>this.f?this.flush():this.c.p}flush(){if(this.a.length===0||!this.c)return Promise.resolve();const e=this.c;this.c=void 0;const t=this.a;return this.a=[],this.g(t).finally(()=>e.complete())}};function Kg(e,t){return`${e.value}/${t}`}var sW=class{constructor(e,t){this.c=t,this.a=new Map,this.b=e.getProxy(q.MainThreadNotebookRenderers)}$postRendererMessage(e,t,i){const r=this.c.getEditorById(e);this.a.get(t)?.fire({editor:r.apiEditor,message:i})}createRendererMessaging(e,t){if(!e.contributes?.notebookRenderer?.some(r=>r.id===t))throw new Error(`Extensions may only call createRendererMessaging() for renderers they contribute (got ${t})`);return{onDidReceiveMessage:(r,s,n)=>this.d(t).event(r,s,n),postMessage:(r,s)=>{my.apiEditorsToExtHost.has(r)&&([r,s]=[s,r]);const n=s&&my.apiEditorsToExtHost.get(s);return this.b.$postMessage(n?.id,t,r)}}}d(e){let t=this.a.get(e);return t||(t=new I({onDidRemoveLastListener:()=>{t?.dispose(),this.a.delete(e)}}),this.a.set(e,t),t)}},nW=class{constructor(e){this.b=new Map,this.a=e.getProxy(q.MainThreadProfileContentHandlers)}registerProfileContentHandler(e,t,i){if(A(e,"profileContentHandlers"),this.b.has(t))throw new Error(`Handler with id '${t}' already registered`);return this.b.set(t,i),this.a.$registerProfileContentHandler(t,i.name,i.description,e.identifier.value),ee(()=>{this.b.delete(t),this.a.$unregisterProfileContentHandler(t)})}async $saveProfile(e,t,i,r){const s=this.b.get(e);if(!s)throw new Error(`Unknown handler with id: ${e}`);return s.saveProfile(t,i,r)}async $readProfile(e,t,i){const r=this.b.get(e);if(!r)throw new Error(`Unknown handler with id: ${e}`);return r.readProfile(De(t)?t:E.revive(t),i)}},oW=class{constructor(e){this.b=0,this.c=new Map,this.a=e}async withProgress(e,t,i){const r=this.b++,{title:s,location:n,cancellable:o}=t,a={label:e.displayName||e.name,id:e.identifier.value};return this.a.$startProgress(r,{location:Y0.from(n),title:s,source:a,cancellable:o},e.isUnderDevelopment?void 0:e.identifier.value).catch(cr),this.d(r,i,!!o)}d(e,t,i){let r;i&&(r=new lt,this.c.set(e,r));const s=o=>{this.a.$progressEnd(o),this.c.delete(o),r?.dispose()};let n;try{n=t(new FC(this.a,e),i&&r?r.token:Ge.None)}catch(o){throw s(e),o}return n.then(o=>s(e),o=>s(e)),n}$acceptProgressCanceled(e){const t=this.c.get(e);t&&(t.cancel(),this.c.delete(e))}};function aW(e,t){return e.message=t.message,typeof t.increment=="number"&&(typeof e.increment=="number"?e.increment+=t.increment:e.increment=t.increment),e}var FC=class extends hg{constructor(e,t){super(i=>this.throttledReport(i)),this.c=e,this.d=t}throttledReport(e){this.c.$progressReport(this.d,e)}};__decorate([e2(100,(e,t)=>aW(e,t),()=>Object.create(null))],FC.prototype,"throttledReport",null);var cW=class aP{static{this.a=0}constructor(t,i){this.d=i,this.c=new Map,this.b=t.getProxy(q.MainThreadQuickDiff)}$provideOriginalResource(t,i,r){const s=E.revive(i),n=this.c.get(t);return n?hi(()=>n.provideOriginalResource(s,r)).then(o=>o||null):Promise.resolve(null)}registerQuickDiffProvider(t,i,r,s){const n=aP.a++;return this.c.set(n,i),this.b.$registerQuickDiffProvider(n,nc.from(t,this.d),r,s),{dispose:()=>{this.b.$unregisterQuickDiffProvider(n),this.c.delete(n)}}}};function lW(e,t,i){const r=e.getProxy(q.MainThreadQuickOpen);class s{constructor(f,g){this.e=new Map,this.f=0,this.a=f,this.b=g}showQuickPick(f,g,v,y=Ge.None){this.c=void 0;const S=Promise.resolve(g),x=++this.f,P=r.$show(x,{title:v?.title,placeHolder:v?.placeHolder,matchOnDescription:v?.matchOnDescription,matchOnDetail:v?.matchOnDetail,ignoreFocusLost:v?.ignoreFocusOut,canPickMany:v?.canPickMany},y),D={},N=P.then(()=>D);return Promise.race([N,S]).then(H=>{if(H===D)return;const Y=Yt(f,"quickPickItemTooltip");return S.then(B=>{const M=[];for(let re=0;re<B.length;re++){const ae=B[re];if(typeof ae=="string")M.push({label:ae,handle:re});else if(ae.kind===hu.Separator)M.push({type:"separator",label:ae.label});else{ae.tooltip&&!Y&&console.warn(`Extension '${f.identifier.value}' uses a tooltip which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${f.identifier.value}`);const fe=ae.iconPath?l(ae.iconPath):void 0;M.push({label:ae.label,iconPath:fe?.iconPath,iconClass:fe?.iconClass,description:ae.description,detail:ae.detail,picked:ae.picked,alwaysShow:ae.alwaysShow,tooltip:Y?ke.fromStrict(ae.tooltip):void 0,handle:re})}}return v&&typeof v.onDidSelectItem=="function"&&(this.c=re=>{v.onDidSelectItem(B[re])}),r.$setItems(x,M),P.then(re=>{if(typeof re=="number")return B[re];if(Array.isArray(re))return re.map(ae=>B[ae])})})}).then(void 0,H=>{if(!zr(H))return r.$setError(x,H),Promise.reject(H)})}$onItemSelected(f){this.c?.(f)}showInput(f,g=Ge.None){return this.d=f?.validateInput,r.$input(f,typeof this.d=="function",g).then(void 0,v=>{if(!zr(v))return Promise.reject(v)})}async $validateInput(f){if(!this.d)return;const g=await this.d(f);if(!g||typeof g=="string")return g;let v;switch(g.severity){case ec.Info:v=Lt.Info;break;case ec.Warning:v=Lt.Warning;break;case ec.Error:v=Lt.Error;break;default:v=g.message?Lt.Error:Lt.Ignore;break}return{content:g.message,severity:v}}async showWorkspaceFolderPick(f,g=Ge.None){const v=await this.b.executeCommand("_workbench.pickWorkspaceFolder",[f]);if(!v)return;const y=await this.a.getWorkspaceFolders2();if(y)return y.find(S=>S.uri.toString()===v.uri.toString())}createQuickPick(f){const g=new u(f,()=>this.e.delete(g._id));return this.e.set(g._id,g),g}createInputBox(f){const g=new h(f,()=>this.e.delete(g._id));return this.e.set(g._id,g),g}$onDidChangeValue(f,g){this.e.get(f)?._fireDidChangeValue(g)}$onDidAccept(f){this.e.get(f)?._fireDidAccept()}$onDidChangeActive(f,g){const v=this.e.get(f);v instanceof u&&v._fireDidChangeActive(g)}$onDidChangeSelection(f,g){const v=this.e.get(f);v instanceof u&&v._fireDidChangeSelection(g)}$onDidTriggerButton(f,g){this.e.get(f)?._fireDidTriggerButton(g)}$onDidTriggerItemButton(f,g,v){const y=this.e.get(f);y instanceof u&&y._fireDidTriggerItemButton(g,v)}$onDidHide(f){this.e.get(f)?._fireDidHide()}}class n{static{this.a=1}constructor(f,g){this.x=f,this.y=g,this._id=u.a++,this.e=!1,this.f=!1,this.g=!0,this.j=!1,this.k=!0,this.l="",this.n=[],this.o=new Map,this.p=new I,this.q=new I,this.r=new I,this.s=new I,this.u={id:this._id},this.v=!1,this.w=[this.r,this.s,this.p,this.q],this.onDidChangeValue=this.q.event,this.onDidAccept=this.p.event,this.onDidTriggerButton=this.r.event,this.onDidHide=this.s.event}get title(){return this.b}set title(f){this.b=f,this.z({title:f})}get step(){return this.c}set step(f){this.c=f,this.z({step:f})}get totalSteps(){return this.d}set totalSteps(f){this.d=f,this.z({totalSteps:f})}get enabled(){return this.g}set enabled(f){this.g=f,this.z({enabled:f})}get busy(){return this.j}set busy(f){this.j=f,this.z({busy:f})}get ignoreFocusOut(){return this.k}set ignoreFocusOut(f){this.k=f,this.z({ignoreFocusOut:f})}get value(){return this.l}set value(f){this.l=f,this.z({value:f})}get placeholder(){return this.m}set placeholder(f){this.m=f,this.z({placeholder:f})}get buttons(){return this.n}set buttons(f){const g=Yt(this.x,"quickInputButtonLocation");!g&&f.some(v=>v.location)&&console.warn(`Extension '${this.x.identifier.value}' uses a button location which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${this.x.identifier.value}`),this.n=f.slice(),this.o.clear(),f.forEach((v,y)=>{const S=v===uu.Back?-1:y;this.o.set(S,v)}),this.z({buttons:f.map((v,y)=>({...l(v.iconPath),tooltip:v.tooltip,handle:v===uu.Back?-1:y,location:g?v.location:void 0}))})}show(){this.e=!0,this.f=!0,this.z({visible:!0})}hide(){this.e=!1,this.z({visible:!1})}_fireDidAccept(){this.p.fire()}_fireDidChangeValue(f){this.l=f,this.q.fire(f)}_fireDidTriggerButton(f){const g=this.o.get(f);g&&this.r.fire(g)}_fireDidHide(){this.f&&(this.f=this.e,this.s.fire())}dispose(){this.v||(this.v=!0,this._fireDidHide(),this.w=Sr(this.w),this.t&&(clearTimeout(this.t),this.t=void 0),this.y(),r.$dispose(this._id))}z(f){if(!this.v){for(const g of Object.keys(f)){const v=f[g];this.u[g]=v===void 0?null:v}"visible"in this.u?(this.t&&(clearTimeout(this.t),this.t=void 0),this.A()):this.e&&!this.t&&(this.t=setTimeout(()=>{this.t=void 0,this.A()},0))}}A(){r.$createOrUpdate(this.u),this.u={id:this._id}}}function o(d){if(d instanceof di)return{id:d.id};const f=c(d),g=a(d);return{dark:typeof f=="string"?E.file(f):f,light:typeof g=="string"?E.file(g):g}}function a(d){return typeof d=="object"&&"light"in d?d.light:d}function c(d){return typeof d=="object"&&"dark"in d?d.dark:d}function l(d){const f=o(d);let g,v;return"id"in f?v=ti.asClassName(f):g=f,{iconPath:g,iconClass:v}}class u extends n{constructor(f,g){super(f,g),this.B=[],this.C=new Map,this.D=new Map,this.E=!1,this.F=!0,this.G=!0,this.H=!0,this.I=!1,this.J=[],this.K=new I,this.L=[],this.M=new I,this.N=new I,this.onDidChangeActive=this.K.event,this.onDidChangeSelection=this.M.event,this.onDidTriggerItemButton=this.N.event,this.w.push(this.K,this.M,this.N),this.z({type:"quickPick"})}get items(){return this.B}set items(f){this.B=f.slice(),this.C.clear(),this.D.clear(),f.forEach((y,S)=>{this.C.set(S,y),this.D.set(y,S)});const g=Yt(this.x,"quickPickItemTooltip"),v=[];for(let y=0;y<f.length;y++){const S=f[y];if(S.kind===hu.Separator)v.push({type:"separator",label:S.label});else{S.tooltip&&!g&&console.warn(`Extension '${this.x.identifier.value}' uses a tooltip which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${this.x.identifier.value}`);const x=S.iconPath?l(S.iconPath):void 0;v.push({handle:y,label:S.label,iconPath:x?.iconPath,iconClass:x?.iconClass,description:S.description,detail:S.detail,picked:S.picked,alwaysShow:S.alwaysShow,tooltip:g?ke.fromStrict(S.tooltip):void 0,buttons:S.buttons?.map((P,D)=>({...l(P.iconPath),tooltip:P.tooltip,handle:D}))})}}this.z({items:v})}get canSelectMany(){return this.E}set canSelectMany(f){this.E=f,this.z({canSelectMany:f})}get matchOnDescription(){return this.F}set matchOnDescription(f){this.F=f,this.z({matchOnDescription:f})}get matchOnDetail(){return this.G}set matchOnDetail(f){this.G=f,this.z({matchOnDetail:f})}get sortByLabel(){return this.H}set sortByLabel(f){this.H=f,this.z({sortByLabel:f})}get keepScrollPosition(){return this.I}set keepScrollPosition(f){this.I=f,this.z({keepScrollPosition:f})}get activeItems(){return this.J}set activeItems(f){this.J=f.filter(g=>this.D.has(g)),this.z({activeItems:this.J.map(g=>this.D.get(g))})}get selectedItems(){return this.L}set selectedItems(f){this.L=f.filter(g=>this.D.has(g)),this.z({selectedItems:this.L.map(g=>this.D.get(g))})}_fireDidChangeActive(f){const g=mt(f.map(v=>this.C.get(v)));this.J=g,this.K.fire(g)}_fireDidChangeSelection(f){const g=mt(f.map(v=>this.C.get(v)));this.L=g,this.M.fire(g)}_fireDidTriggerItemButton(f,g){const v=this.C.get(f);if(!v||!v.buttons||!v.buttons.length)return;const y=v.buttons[g];y&&this.N.fire({button:y,item:v})}}class h extends n{constructor(f,g){super(f,g),this.B=!1,this.z({type:"inputBox"})}get password(){return this.B}set password(f){this.B=f,this.z({password:f})}get prompt(){return this.C}set prompt(f){this.C=f,this.z({prompt:f})}get valueSelection(){return this.D}set valueSelection(f){this.D=f,this.z({valueSelection:f})}get validationMessage(){return this.E}set validationMessage(f){this.E=f,f?typeof f=="string"?this.z({validationMessage:f,severity:Lt.Error}):this.z({validationMessage:f.message,severity:f.severity??Lt.Error}):this.z({validationMessage:void 0,severity:Lt.Ignore})}}return new s(t,i)}var Iy;function MC(e){return e instanceof E}function uW(e,t){return e.scheme===z.file&&t.scheme===z.file&&At?e.toString()===t.toString():e.toString().toLowerCase()===t.toString().toLowerCase()}function Py(e){if(e)return typeof e.iconPath=="string"?E.file(e.iconPath):E.isUri(e.iconPath)||ti.isThemeIcon(e.iconPath)?e.iconPath:void 0}function Nc(e){if(e){if(E.isUri(e))return e;if(ti.isThemeIcon(e))return e;{const t=e;return{light:t.light,dark:t.dark}}}else return}function hW(e){const t=e.references?.map(i=>({...i,icon:Nc(i.icon)}));return{...e,references:t}}function Dy(e){return e?{...e,icon:Nc(e.icon)}:void 0}function Ay(e,t){if(!e.iconPath&&!t.iconPath)return 0;if(e.iconPath){if(!t.iconPath)return 1}else return-1;const i=typeof e.iconPath=="string"?e.iconPath:E.isUri(e.iconPath)?e.iconPath.fsPath:e.iconPath.id,r=typeof t.iconPath=="string"?t.iconPath:E.isUri(t.iconPath)?t.iconPath.fsPath:t.iconPath.id;return Ag(i,r)}function dW(e,t){let i=0;if(e.strikeThrough!==t.strikeThrough)return e.strikeThrough?1:-1;if(e.faded!==t.faded)return e.faded?1:-1;if(e.tooltip!==t.tooltip)return(e.tooltip||"").localeCompare(t.tooltip||"");if(i=Ay(e,t),i!==0)return i;if(e.light&&t.light)i=Ay(e.light,t.light);else{if(e.light)return 1;if(t.light)return-1}if(i!==0)return i;if(e.dark&&t.dark)i=Ay(e.dark,t.dark);else{if(e.dark)return 1;if(t.dark)return-1}return i}function fW(e,t){if(e.command!==t.command)return e.command<t.command?-1:1;if(e.title!==t.title)return e.title<t.title?-1:1;if(e.tooltip!==t.tooltip){if(e.tooltip!==void 0&&t.tooltip!==void 0)return e.tooltip<t.tooltip?-1:1;if(e.tooltip!==void 0)return 1;if(t.tooltip!==void 0)return-1}if(e.arguments===t.arguments)return 0;if(e.arguments)if(t.arguments){if(e.arguments.length!==t.arguments.length)return e.arguments.length-t.arguments.length}else return 1;else return-1;for(let i=0;i<e.arguments.length;i++){const r=e.arguments[i],s=t.arguments[i];if(r!==s&&!(MC(r)&&MC(s)&&uW(r,s)))return r<s?-1:1}return 0}function UC(e,t){let i=Ag(e.resourceUri.fsPath,t.resourceUri.fsPath,!0);if(i!==0)return i;if(e.command&&t.command)i=fW(e.command,t.command);else{if(e.command)return 1;if(t.command)return-1}if(i!==0)return i;if(e.decorations&&t.decorations)i=dW(e.decorations,t.decorations);else{if(e.decorations)return 1;if(t.decorations)return-1}if(i!==0)return i;if(e.multiFileDiffEditorModifiedUri&&t.multiFileDiffEditorModifiedUri)i=Ag(e.multiFileDiffEditorModifiedUri.fsPath,t.multiFileDiffEditorModifiedUri.fsPath,!0);else{if(e.multiFileDiffEditorModifiedUri)return 1;if(t.multiFileDiffEditorModifiedUri)return-1}if(i!==0)return i;if(e.multiDiffEditorOriginalUri&&t.multiDiffEditorOriginalUri)i=Ag(e.multiDiffEditorOriginalUri.fsPath,t.multiDiffEditorOriginalUri.fsPath,!0);else{if(e.multiDiffEditorOriginalUri)return 1;if(t.multiDiffEditorOriginalUri)return-1}return i}function pW(e,t){for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}function gW(e,t){return e.command===t.command&&e.title===t.title&&e.tooltip===t.tooltip&&(e.arguments&&t.arguments?pW(e.arguments,t.arguments):e.arguments===t.arguments)}function mW(e,t){return Vr(e,t,gW)}var vW=class{#e;#t;get value(){return this.d}set value(e){e=e??"",this.#e.$setInputBoxValue(this.m,e),this.o(e)}get onDidChange(){return this.f.event}get placeholder(){return this.g}set placeholder(e){this.#e.$setInputBoxPlaceholder(this.m,e),this.g=e}get validateInput(){return A(this.l,"scmValidation"),this.h}set validateInput(e){if(A(this.l,"scmValidation"),e&&typeof e!="function")throw new Error(`[${this.l.identifier.value}]: Invalid SCM input box validation function`);this.h=e,this.#e.$setValidationProviderIsEnabled(this.m,!!e)}get enabled(){return this.j}set enabled(e){e=!!e,this.j!==e&&(this.j=e,this.#e.$setInputBoxEnablement(this.m,e))}get visible(){return this.k}set visible(e){e=!!e,this.k!==e&&(this.k=e,this.#e.$setInputBoxVisibility(this.m,e))}get document(){return A(this.l,"scmTextDocument"),this.#t.getDocument(this.n)}constructor(e,t,i,r,s){this.l=e,this.m=r,this.n=s,this.d="",this.f=new I,this.g="",this.j=!0,this.k=!0,this.#t=t,this.#e=i}showValidationMessage(e,t){A(this.l,"scmValidation"),this.#e.$showValidationMessage(this.m,e,t)}$onInputBoxValueChange(e){this.o(e)}o(e){this.d=e,this.f.fire(e)}},wW=class cP{static{this.d=0}get disposed(){return this.m}get id(){return this.v}get label(){return this.w}set label(t){this.w=t,this.s.$updateGroupLabel(this.u,this.handle,t)}get hideWhenEmpty(){return this.q}set hideWhenEmpty(t){this.q=t,this.s.$updateGroup(this.u,this.handle,this.features)}get features(){return{hideWhenEmpty:this.hideWhenEmpty}}get resourceStates(){return[...this.g]}set resourceStates(t){this.g=[...t],this.l.fire()}constructor(t,i,r,s,n,o,a){this.s=t,this.t=i,this.u=r,this.v=s,this.w=n,this.multiDiffEditorEnableViewChanges=o,this.x=a,this.f=0,this.g=[],this.h=new Map,this.j=new Map,this.k=new Map,this.l=new I,this.onDidUpdateResourceStates=this.l.event,this.m=!1,this.n=new I,this.onDidDispose=this.n.event,this.o=[],this.p=[],this.q=void 0,this.handle=cP.d++}getResourceState(t){return this.h.get(t)}$executeResourceCommand(t,i){const r=this.j.get(t);return r?hi(()=>this.t.executeCommand(r.command,...r.arguments||[],i)):Promise.resolve(void 0)}_takeResourceStateSnapshot(){const t=[...this.g].sort(UC),r=_4(this.p,t,UC).map(o=>{const a=o.toInsert.map(c=>{const l=this.f++;this.h.set(l,c);const u=c.resourceUri;let h;if(c.command)if(c.command.command==="vscode.open"||c.command.command==="vscode.diff"||c.command.command==="vscode.changes"){const B=new ue;h=this.t.converter.toInternal(c.command,B),this.k.set(l,B)}else this.j.set(l,c.command);const d=Yt(this.x,"scmMultiDiffEditor"),f=d?c.multiDiffEditorOriginalUri:void 0,g=d?c.multiFileDiffEditorModifiedUri:void 0,v=Py(c.decorations),y=c.decorations&&Py(c.decorations.light)||v,S=c.decorations&&Py(c.decorations.dark)||v,x=[y,S],P=c.decorations&&c.decorations.tooltip||"",D=c.decorations&&!!c.decorations.strikeThrough,N=c.decorations&&!!c.decorations.faded,H=c.contextValue||"";return{rawResource:[l,u,x,P,D,N,H,h,f,g],handle:l}});return{start:o.start,deleteCount:o.deleteCount,toInsert:a}}),s=r.map(({start:o,deleteCount:a,toInsert:c})=>[o,a,c.map(l=>l.rawResource)]),n=r.reverse();for(const{start:o,deleteCount:a,toInsert:c}of n){const l=c.map(h=>h.handle),u=this.o.splice(o,a,...l);for(const h of u)this.h.delete(h),this.j.delete(h),this.k.get(h)?.dispose(),this.k.delete(h)}return this.p=t,s}dispose(){this.m=!0,this.n.fire()}},Ry=class lP{static{this.d=0}#e;get id(){return this.z}get label(){return this.A}get rootUri(){return this.B}get inputBox(){return this.g}get count(){return this.h}set count(t){this.h!==t&&(this.h=t,this.#e.$updateSourceControl(this.w,{count:t}))}get quickDiffProvider(){return this.j}set quickDiffProvider(t){this.j=t;let i;Yt(this.x,"quickDiffProvider")&&(i=t?.label),this.#e.$updateSourceControl(this.w,{hasQuickDiffProvider:!!t,quickDiffLabel:i})}get historyProvider(){return A(this.x,"scmHistoryProvider"),this.k}set historyProvider(t){A(this.x,"scmHistoryProvider"),this.k=t,this.l.value=new ue,this.#e.$updateSourceControl(this.w,{hasHistoryProvider:!!t}),t&&(this.l.value.add(t.onDidChangeCurrentHistoryItemRefs(()=>{const i=Dy(t?.currentHistoryItemRef),r=Dy(t?.currentHistoryItemRemoteRef),s=Dy(t?.currentHistoryItemBaseRef);this.#e.$onDidChangeHistoryProviderCurrentHistoryItemRefs(this.w,i,r,s)})),this.l.value.add(t.onDidChangeHistoryItemRefs(i=>{if(i.added.length===0&&i.modified.length===0&&i.removed.length===0)return;const r=i.added.map(o=>({...o,icon:Nc(o.icon)})),s=i.modified.map(o=>({...o,icon:Nc(o.icon)})),n=i.removed.map(o=>({...o,icon:Nc(o.icon)}));this.#e.$onDidChangeHistoryProviderHistoryItemRefs(this.w,{added:r,modified:s,removed:n,silent:i.silent})})))}get commitTemplate(){return this.m}set commitTemplate(t){t!==this.m&&(this.m=t,this.#e.$updateSourceControl(this.w,{commitTemplate:t}))}get acceptInputCommand(){return this.o}set acceptInputCommand(t){this.n.value=new ue,this.o=t;const i=this.y.converter.toInternal(t,this.n.value);this.#e.$updateSourceControl(this.w,{acceptInputCommand:i})}get actionButton(){return A(this.x,"scmActionButton"),this.q}set actionButton(t){if(A(this.x,"scmActionButton"),cv(this.q,t))return;this.q=t,this.p.value=new ue;const i=t!==void 0?{command:{...this.y.converter.toInternal(t.command,this.p.value),shortTitle:t.command.shortTitle},secondaryCommands:t.secondaryCommands?.map(r=>r.map(s=>this.y.converter.toInternal(s,this.p.value))),enabled:t.enabled}:void 0;this.#e.$updateSourceControl(this.w,{actionButton:i})}get statusBarCommands(){return this.t}set statusBarCommands(t){if(this.t&&t&&mW(this.t,t))return;this.s.value=new ue,this.t=t;const i=(t||[]).map(r=>this.y.converter.toInternal(r,this.s.value));this.#e.$updateSourceControl(this.w,{statusBarCommands:i})}get selected(){return this.u}constructor(t,i,r,s,n,o,a){this.x=t,this.y=s,this.z=n,this.A=o,this.B=a,this.f=new Map,this.h=void 0,this.j=void 0,this.l=new vs,this.m=void 0,this.n=new vs,this.o=void 0,this.p=new vs,this.s=new vs,this.t=void 0,this.u=!1,this.v=new I,this.onDidChangeSelection=this.v.event,this.w=lP.d++,this.C=new Map,this.D=new Set,this.#e=r;const c=E.from({scheme:z.vscodeSourceControl,path:`${n}/scm${this.w}/input`,query:a?`rootUri=${encodeURIComponent(a.toString())}`:void 0});this.g=new vW(t,i,this.#e,this.w,c),this.#e.$registerSourceControl(this.w,n,o,a,c)}createResourceGroup(t,i,r){const s=Yt(this.x,"scmMultiDiffEditor")&&r?.multiDiffEditorEnableViewChanges===!0,n=new wW(this.#e,this.y,this.w,t,i,s,this.x),o=ze.once(n.onDidDispose)(()=>this.C.delete(n));return this.C.set(n,o),this.eventuallyAddResourceGroups(),n}eventuallyAddResourceGroups(){const t=[],i=[];for(const[r,s]of this.C){s.dispose();const n=r.onDidUpdateResourceStates(()=>{this.D.add(r),this.eventuallyUpdateResourceStates()});ze.once(r.onDidDispose)(()=>{this.D.delete(r),n.dispose(),this.f.delete(r.handle),this.#e.$unregisterGroup(this.w,r.handle)}),t.push([r.handle,r.id,r.label,r.features,r.multiDiffEditorEnableViewChanges]);const o=r._takeResourceStateSnapshot();o.length>0&&i.push([r.handle,o]),this.f.set(r.handle,r)}this.#e.$registerGroups(this.w,t,i),this.C.clear()}eventuallyUpdateResourceStates(){const t=[];this.D.forEach(i=>{const r=i._takeResourceStateSnapshot();r.length!==0&&t.push([i.handle,r])}),t.length>0&&this.#e.$spliceResourceStates(this.w,t),this.D.clear()}getResourceGroup(t){return this.f.get(t)}setSelectionState(t){this.u=t,this.v.fire(t)}dispose(){this.n.dispose(),this.p.dispose(),this.s.dispose(),this.f.forEach(t=>t.dispose()),this.#e.$unregisterSourceControl(this.w)}};__decorate([vd(100)],Ry.prototype,"eventuallyAddResourceGroups",null),__decorate([vd(100)],Ry.prototype,"eventuallyUpdateResourceStates",null);var Ty=class{static{Iy=this}static{this.d=0}get onDidChangeActiveProvider(){return this.k.event}constructor(t,i,r,s){this.m=i,this.n=r,this.o=s,this.h=new Map,this.j=new Rs,this.k=new I,this.f=t.getProxy(q.MainThreadSCM),this.g=t.getProxy(q.MainThreadTelemetry),i.registerArgumentProcessor({processArgument:n=>{if(n&&n.$mid===3){const o=this.h.get(n.sourceControlHandle);if(!o)return n;const a=o.getResourceGroup(n.groupHandle);return a?a.getResourceState(n.handle):n}else if(n&&n.$mid===4){const o=this.h.get(n.sourceControlHandle);return o?o.getResourceGroup(n.groupHandle):n}else if(n&&n.$mid===5){const o=this.h.get(n.handle);return o||n}return n}})}createSourceControl(t,i,r,s){this.o.trace("ExtHostSCM#createSourceControl",t.identifier.value,i,r,s),this.g.$publicLog2("api/scm/createSourceControl",{extensionId:t.identifier.value});const n=Iy.d++,o=new Ry(t,this.n,this.f,this.m,i,r,s);this.h.set(n,o);const a=this.j.get(t.identifier)||[];return a.push(o),this.j.set(t.identifier,a),o}getLastInputBox(t){this.o.trace("ExtHostSCM#getLastInputBox",t.identifier.value);const i=this.j.get(t.identifier),r=i&&i[i.length-1];return r&&r.inputBox}$provideOriginalResource(t,i,r){const s=E.revive(i);this.o.trace("ExtHostSCM#$provideOriginalResource",t,s.toString());const n=this.h.get(t);return!n||!n.quickDiffProvider||!n.quickDiffProvider.provideOriginalResource?Promise.resolve(null):hi(()=>n.quickDiffProvider.provideOriginalResource(s,r)).then(o=>o||null)}$onInputBoxValueChange(t,i){this.o.trace("ExtHostSCM#$onInputBoxValueChange",t);const r=this.h.get(t);return r&&r.inputBox.$onInputBoxValueChange(i),Promise.resolve(void 0)}$executeResourceCommand(t,i,r,s){this.o.trace("ExtHostSCM#$executeResourceCommand",t,i,r);const n=this.h.get(t);if(!n)return Promise.resolve(void 0);const o=n.getResourceGroup(i);return o?o.$executeResourceCommand(r,s):Promise.resolve(void 0)}$validateInput(t,i,r){this.o.trace("ExtHostSCM#$validateInput",t);const s=this.h.get(t);return!s||!s.inputBox.validateInput?Promise.resolve(void 0):hi(()=>s.inputBox.validateInput(i,r)).then(n=>{if(!n)return Promise.resolve(void 0);const o=ke.fromStrict(n.message);return o?Promise.resolve([o,n.type]):Promise.resolve(void 0)})}$setSelectedSourceControl(t){return this.o.trace("ExtHostSCM#$setSelectedSourceControl",t),t!==void 0&&this.h.get(t)?.setSelectionState(!0),this.l!==void 0&&this.h.get(this.l)?.setSelectionState(!1),this.l=t,Promise.resolve(void 0)}async $resolveHistoryItemRefsCommonAncestor(t,i,r){try{return await this.h.get(t)?.historyProvider?.resolveHistoryItemRefsCommonAncestor(i,r)??void 0}catch(s){this.o.error("ExtHostSCM#$resolveHistoryItemRefsCommonAncestor",s);return}}async $provideHistoryItemRefs(t,i,r){try{return(await this.h.get(t)?.historyProvider?.provideHistoryItemRefs(i,r))?.map(o=>({...o,icon:Nc(o.icon)}))??void 0}catch(s){this.o.error("ExtHostSCM#$provideHistoryItemRefs",s);return}}async $provideHistoryItems(t,i,r){try{return(await this.h.get(t)?.historyProvider?.provideHistoryItems(i,r))?.map(o=>hW(o))??void 0}catch(s){this.o.error("ExtHostSCM#$provideHistoryItems",s);return}}async $provideHistoryItemChanges(t,i,r,s){try{return await this.h.get(t)?.historyProvider?.provideHistoryItemChanges(i,r,s)??void 0}catch(n){this.o.error("ExtHostSCM#$provideHistoryItemChanges",n);return}}};Ty=Iy=__decorate([__param(3,Ce)],Ty);var bW=class uP{static{this.a=0}constructor(t,i){this.d=i,this.c=new Map,this.b=t.getProxy(q.MainThreadShare)}async $provideShare(t,i,r){return await this.c.get(t)?.provideShare({selection:O.to(i.selection),resourceUri:E.revive(i.resourceUri)},r)??void 0}registerShareProvider(t,i){const r=uP.a++;return this.c.set(r,i),this.b.$registerShareProvider(r,nc.from(t,this.d),i.id,i.label,i.priority),{dispose:()=>{this.b.$unregisterShareProvider(r),this.c.delete(r)}}}},yW=class hP{static{this.a=1}constructor(t){this.c=new Map,this.d=new Map,this.f=new Map,this.b=t.getProxy(q.MainThreadSpeech)}async $createSpeechToTextSession(t,i,r){const s=this.c.get(t);if(!s)return;const n=new ue,o=new lt;this.d.set(i,o);const a=await s.provideSpeechToTextSession(o.token,r?{language:r}:void 0);a&&(n.add(a.onDidChange(c=>{o.token.isCancellationRequested||this.b.$emitSpeechToTextEvent(i,c)})),n.add(o.token.onCancellationRequested(()=>n.dispose())))}async $cancelSpeechToTextSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t)}async $createTextToSpeechSession(t,i,r){const s=this.c.get(t);if(!s)return;const n=new ue,o=new lt;this.d.set(i,o);const a=await s.provideTextToSpeechSession(o.token,r?{language:r}:void 0);a&&(this.f.set(i,a),n.add(a.onDidChange(c=>{o.token.isCancellationRequested||this.b.$emitTextToSpeechEvent(i,c)})),n.add(o.token.onCancellationRequested(()=>n.dispose())))}async $synthesizeSpeech(t,i){this.f.get(t)?.synthesize(i)}async $cancelTextToSpeechSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t),this.f.delete(t)}async $createKeywordRecognitionSession(t,i){const r=this.c.get(t);if(!r)return;const s=new ue,n=new lt;this.d.set(i,n);const o=await r.provideKeywordRecognitionSession(n.token);o&&(s.add(o.onDidChange(a=>{n.token.isCancellationRequested||this.b.$emitKeywordRecognitionEvent(i,a)})),s.add(n.token.onCancellationRequested(()=>s.dispose())))}async $cancelKeywordRecognitionSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t)}registerProvider(t,i,r){const s=hP.a++;return this.c.set(s,r),this.b.$registerProvider(s,i,{extension:t,displayName:t.value}),ee(()=>{this.b.$unregisterProvider(s),this.c.delete(s)})}},EW=class Pm{static{this.a=0}static{this.b=new Map([["statusBarItem.errorBackground",new tu("statusBarItem.errorForeground")],["statusBarItem.warningBackground",new tu("statusBarItem.warningForeground")]])}#e;#t;constructor(t,i,r,s,n,o=Pn.Left,a){if(this.i=!1,this.k="",this.q=new ue,this.#e=t,this.#t=i,n&&s){this.c=DF(s.identifier,n);const c=r.get(this.c);c&&(o=c.alignLeft?Pn.Left:Pn.Right,a=c.priority,this.j=!0,this.name=c.name,this.text=c.text,this.tooltip=c.tooltip,this.command=c.command,this.accessibilityInformation=c.accessibilityInformation)}else this.c=String(Pm.a++);this.e=s,this.f=n,this.g=o,this.h=this.u(a)}u(t){if(Xi(t))return t===Number.POSITIVE_INFINITY?Number.MAX_VALUE:t===Number.NEGATIVE_INFINITY?-Number.MAX_VALUE:t}get id(){return this.f??this.e.identifier.value}get alignment(){return this.g}get priority(){return this.h}get text(){return this.k}get name(){return this.m}get tooltip(){return this.l}get color(){return this.n}get backgroundColor(){return this.o}get command(){return this.r?.fromApi}get accessibilityInformation(){return this.t}set text(t){this.k=t,this.v()}set name(t){this.m=t,this.v()}set tooltip(t){this.l=t,this.v()}set color(t){this.n=t,this.v()}set backgroundColor(t){t&&!Pm.b.has(t.id)&&(t=void 0),this.o=t,this.v()}set command(t){this.r?.fromApi!==t&&(this.p&&this.q.add(this.p),this.p=new ue,typeof t=="string"?this.r={fromApi:t,internal:this.#t.toInternal({title:"",command:t},this.p)}:t?this.r={fromApi:t,internal:this.#t.toInternal(t,this.p)}:this.r=void 0,this.v())}set accessibilityInformation(t){this.t=t,this.v()}show(){this.j=!0,this.v()}hide(){clearTimeout(this.s),this.j=!1,this.#e.$disposeEntry(this.c)}v(){this.i||!this.j||(clearTimeout(this.s),this.s=setTimeout(()=>{this.s=void 0;let t;this.e?this.f?t=`${this.e.identifier.value}.${this.f}`:t=this.e.identifier.value:t=this.f;let i;this.m?i=this.m:i=p(3018,null,this.e.displayName||this.e.name);let r=this.n;this.o&&(r=Pm.b.get(this.o.id));const s=ke.fromStrict(this.l);this.#e.$setEntry(this.c,t,this.e?.identifier.value,i,this.k,s,this.r?.internal,r,this.o,this.g===Pn.Left,this.h,this.t),this.q.clear()},0))}dispose(){this.hide(),this.i=!0}},SW=class{constructor(e){this.b=[],this.a=e.createStatusBarEntry(void 0,"status.extensionMessage",Pn.Left,Number.MIN_VALUE),this.a.name=p(3019,null)}dispose(){this.b.length=0,this.a.dispose()}setMessage(e){const t={message:e};return this.b.unshift(t),this.c(),new Oe(()=>{const i=this.b.indexOf(t);i>=0&&(this.b.splice(i,1),this.c())})}c(){this.b.length>0?(this.a.text=this.b[0].message,this.a.show()):this.a.hide()}},xW=class{constructor(e,t){this.e=new Map,this.a=e.getProxy(q.MainThreadStatusBar),this.b=t,this.c=new SW(this)}$acceptStaticEntries(e){for(const t of e)this.e.set(t.entryId,t)}createStatusBarEntry(e,t,i,r){return new EW(this.a,this.b,this.e,e,t,i,r)}setStatusBarMessage(e,t){const i=this.c.setMessage(e);let r;return typeof t=="number"?r=setTimeout(()=>i.dispose(),t):typeof t<"u"&&t.then(()=>i.dispose(),()=>i.dispose()),new Oe(()=>{i.dispose(),clearTimeout(r)})}},kW=class extends X{constructor(e,t){super(),this.m=t,this.a=new I,this.b=new I,this.c=new I,this.f=new I,this.g=new I,this.h=new I,this.onDidChangeTextEditorSelection=this.a.event,this.onDidChangeTextEditorOptions=this.b.event,this.onDidChangeTextEditorVisibleRanges=this.c.event,this.onDidChangeTextEditorViewColumn=this.f.event,this.onDidChangeActiveTextEditor=this.g.event,this.onDidChangeVisibleTextEditors=this.h.event,this.j=e.getProxy(q.MainThreadTextEditors),this.B(this.m.onDidChangeVisibleTextEditors(i=>this.h.fire(i))),this.B(this.m.onDidChangeActiveTextEditor(i=>this.g.fire(i)))}getActiveTextEditor(){return this.m.activeEditor()}getVisibleTextEditors(e){const t=this.m.allEditors();return e?t:t.map(i=>i.value)}async showTextDocument(e,t,i){let r;typeof t=="number"?r={position:zt.from(t),preserveFocus:i}:typeof t=="object"?r={position:zt.from(t.viewColumn),preserveFocus:t.preserveFocus,selection:typeof t.selection=="object"?O.from(t.selection):void 0,pinned:typeof t.preview=="boolean"?!t.preview:void 0}:r={preserveFocus:!1};const s=await this.j.$tryShowTextDocument(e.uri,r),n=s&&this.m.getEditor(s);if(n)return n.value;throw s?new Error(`Could NOT open editor for "${e.uri.toString()}" because another editor opened in the meantime.`):new Error(`Could NOT open editor for "${e.uri.toString()}".`)}createTextEditorDecorationType(e,t){return new HU(this.j,e,t).value}$acceptEditorPropertiesChanged(e,t){const i=this.m.getEditor(e);if(!i)throw new Error("unknown text editor");if(t.options&&i._acceptOptions(t.options),t.selections){const r=t.selections.selections.map(Ti.to);i._acceptSelections(r)}if(t.visibleRanges){const r=mt(t.visibleRanges.map(O.to));i._acceptVisibleRanges(r)}if(t.options&&this.b.fire({textEditor:i.value,options:{...t.options,lineNumbers:uc.to(t.options.lineNumbers)}}),t.selections){const r=Wa.fromValue(t.selections.source),s=t.selections.selections.map(Ti.to);this.a.fire({textEditor:i.value,selections:s,kind:r})}if(t.visibleRanges){const r=mt(t.visibleRanges.map(O.to));this.c.fire({textEditor:i.value,visibleRanges:r})}}$acceptEditorPositionData(e){for(const t in e){const i=this.m.getEditor(t);if(!i)throw new Error("Unknown text editor");const r=zt.to(e[t]);i.value.viewColumn!==r&&(i._acceptViewColumn(r),this.f.fire({textEditor:i.value,viewColumn:r}))}}getDiffInformation(e){return Promise.resolve(this.j.$getDiffInformation(e))}},Ly=class{constructor(t){this.a=new Jf(An.Dark),this.b=new I}get activeColorTheme(){return this.a}$onColorThemeChange(t){let i;switch(t){case"light":i=An.Light;break;case"hcDark":i=An.HighContrast;break;case"hcLight":i=An.HighContrastLight;break;default:i=An.Dark}this.a=new Jf(i),this.b.fire(this.a)}get onDidChangeActiveColorTheme(){return this.b.event}};Ly=__decorate([__param(0,Ie)],Ly);var mZ=V("IExtHostTimeline"),$W=class{constructor(e,t){this.b=new Map,this.c=new Map,this.a=e.getProxy(q.MainThreadTimeline),t.registerArgumentProcessor({processArgument:(i,r)=>{if(i&&i.$mid===12)if(this.b.get(i.source)&&Xe.equals(r,this.b.get(i.source)?.extension)){const s=i.uri===void 0?void 0:E.revive(i.uri);return this.c.get(i.source)?.get(_C(s))?.get(i.handle)}else return;return i}})}async $getTimeline(e,t,i,r){return this.b.get(e)?.provider.provideTimeline(E.revive(t),i,r)}registerTimelineProvider(e,t,i,r){const s=new ue,n=this.d(t.id,r,s).bind(this);let o;t.onDidChange&&(o=t.onDidChange(c=>this.a.$emitTimelineChangeEvent({uri:void 0,reset:!0,...c,id:t.id}),this));const a=this.c;return this.f({...t,scheme:e,onDidChange:void 0,async provideTimeline(c,l,u){l?.resetCache&&(s.clear(),a.get(t.id)?.clear());const h=await t.provideTimeline(c,l,u);if(h==null)return;const d=n(c,l);return{...h,source:t.id,items:h.items.map(d)}},dispose(){for(const c of a.values())c.get(t.id)?.clear();o?.dispose(),s.dispose()}},i)}d(e,t,i){return(r,s)=>{let n;if(s?.cacheResults){let o=this.c.get(e);o===void 0&&(o=new Map,this.c.set(e,o));const a=_C(r);n=o.get(a),n===void 0&&(n=new Map,o.set(a,n))}return o=>{const{iconPath:a,...c}=o,l=`${e}|${o.id??o.timestamp}`;n?.set(l,o);let u,h,d;o.iconPath&&(a instanceof di?d={id:a.id,color:a.color}:E.isUri(a)?(u=a,h=a):{light:u,dark:h}=a);let f;return Si.isMarkdownString(c.tooltip)?f=ke.from(c.tooltip):De(c.tooltip)?f=c.tooltip:Si.isMarkdownString(c.detail)?(console.warn("Using deprecated TimelineItem.detail, migrate to TimelineItem.tooltip"),f=ke.from(c.detail)):De(c.detail)&&(console.warn("Using deprecated TimelineItem.detail, migrate to TimelineItem.tooltip"),f=c.detail),{...c,id:c.id??void 0,handle:l,source:e,command:o.command?t.toInternal(o.command,i):void 0,icon:u,iconDark:h,themeIcon:d,tooltip:f,accessibilityInformation:o.accessibilityInformation}}}}f(e,t){if(this.b.get(e.id))throw new Error(`Timeline Provider ${e.id} already exists.`);return this.a.$registerTimelineProvider({id:e.id,label:e.label,scheme:e.scheme}),this.b.set(e.id,{provider:e,extension:t}),ee(()=>{for(const r of this.c.values())r.get(e.id)?.clear();this.b.delete(e.id),this.a.$unregisterTimelineProvider(e.id),e.dispose()})}};function _C(e){return e?.toString()}var CW={IconContribution:"base.contributions.icons"},jC;(function(e){function t(i,r){let s=i.defaults;for(;ti.isThemeIcon(s);){const n=zn.getIcon(s.id);if(!n)return;s=n.defaults}return s}e.getDefinition=t})(jC||(jC={}));var HC;(function(e){function t(r){return{weight:r.weight,style:r.style,src:r.src.map(s=>({format:s.format,location:s.location.toString()}))}}e.toJSONObject=t;function i(r){const s=n=>De(n)?n:void 0;if(r&&Array.isArray(r.src)&&r.src.every(n=>De(n.format)&&De(n.location)))return{weight:s(r.weight),style:s(r.style),src:r.src.map(n=>({format:n.format,location:E.parse(n.location)}))}}e.fromJSONObject=i})(HC||(HC={}));var IW=class{constructor(){this.a=new I,this.onDidChange=this.a.event,this.d={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:p(2666,null)},fontCharacter:{type:"string",description:p(2667,null)}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.e={type:"string",pattern:`^${ti.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.b={},this.f={}}registerIcon(e,t,i,r){const s=this.b[e];if(s){if(i&&!s.description){s.description=i,this.d.properties[e].markdownDescription=`${i} $(${e})`;const a=this.e.enum.indexOf(e);a!==-1&&(this.e.enumDescriptions[a]=i),this.a.fire()}return s}const n={id:e,description:i,defaults:t,deprecationMessage:r};this.b[e]=n;const o={$ref:"#/definitions/icons"};return r&&(o.deprecationMessage=r),i&&(o.markdownDescription=`${i}: $(${e})`),this.d.properties[e]=o,this.e.enum.push(e),this.e.enumDescriptions.push(i||""),this.a.fire(),{id:e}}deregisterIcon(e){delete this.b[e],delete this.d.properties[e];const t=this.e.enum.indexOf(e);t!==-1&&(this.e.enum.splice(t,1),this.e.enumDescriptions.splice(t,1)),this.a.fire()}getIcons(){return Object.keys(this.b).map(e=>this.b[e])}getIcon(e){return this.b[e]}getIconSchema(){return this.d}getIconReferenceSchema(){return this.e}registerIconFont(e,t){const i=this.f[e];return i||(this.f[e]=t,this.a.fire(),t)}deregisterIconFont(e){delete this.f[e]}getIconFont(e){return this.f[e]}toString(){const e=(s,n)=>s.id.localeCompare(n.id),t=s=>{for(;ti.isThemeIcon(s.defaults);)s=this.b[s.defaults.id];return`codicon codicon-${s?s.id:""}`},i=[];i.push("| preview     | identifier                        | default codicon ID                | description"),i.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const r=Object.keys(this.b).map(s=>this.b[s]);for(const s of r.filter(n=>!!n.description).sort(e))i.push(`|<i class="${t(s)}"></i>|${s.id}|${ti.isThemeIcon(s.defaults)?s.defaults.id:s.id}|${s.description||""}|`);i.push("| preview     | identifier                        "),i.push("| ----------- | --------------------------------- |");for(const s of r.filter(n=>!ti.isThemeIcon(n.defaults)).sort(e))i.push(`|<i class="${t(s)}"></i>|${s.id}|`);return i.join(`
`)}},zn=new IW;ai.add(CW.IconContribution,zn);function em(e,t,i,r){return zn.registerIcon(e,t,i,r)}function PW(e,t,i,r){const s=e.id;zn.deregisterIcon(s),zn.registerIcon(s,t,i,r)}function DW(){const e=AL();for(const t in e){const i="\\"+e[t].toString(16);zn.registerIcon(t,{fontCharacter:i})}}DW();var BC="vscode://schemas/icons",WC=ai.as(Bd.JSONContribution);WC.registerSchema(BC,zn.getIconSchema());var zC=new Es(()=>WC.notifySchemaChanged(BC),200);zn.onDidChange(()=>{zC.isScheduled()||zC.schedule()});var AW=em("widget-close",oe.close,p(2668,null)),vZ=em("goto-previous-location",oe.arrowUp,p(2669,null)),wZ=em("goto-next-location",oe.arrowDown,p(2670,null)),bZ=ti.modify(oe.sync,"spin"),yZ=ti.modify(oe.loading,"spin");PW(AW,oe.iCubeClose,p(2671,null));var RW=()=>{let e={scene:"",contributions:[],disabledConfiguration:{views:[],extensions:[],keybinds:[],menus:{}},configuration:{},sceneConfiguration:{},hook:{},preloadModules:[],modules:[]};try{e=__icube_workbench_scene_confiuration}catch{}return e},EZ=p(4531,null),SZ=em("default-view-icon",oe.window,p(4532,null)),tm;(function(e){e.ViewContainersRegistry="workbench.registry.view.containers",e.ViewsRegistry="workbench.registry.view"})(tm||(tm={}));var VC;(function(e){e[e.Sidebar=0]="Sidebar",e[e.Panel=1]="Panel",e[e.AuxiliaryBar=2]="AuxiliaryBar"})(VC||(VC={}));var TW=class extends X{constructor(){super(...arguments),this.c=this.B(new I),this.onDidRegister=this.c.event,this.f=this.B(new I),this.onDidDeregister=this.f.event,this.g=new Map,this.h=[]}get all(){return[...this.g.values()].flat()}registerViewContainer(e,t,i){const r=this.get(e.id);if(r)return r;const s=e;return s.openCommandActionDescriptor=i?.doNotRegisterOpenCommand?void 0:s.openCommandActionDescriptor??{id:s.id},fD(this.g,t,[]).push(s),i?.isDefault&&this.h.push(s),this.c.fire({viewContainer:s,viewContainerLocation:t}),s}deregisterViewContainer(e){for(const t of this.g.keys()){const i=this.g.get(t),r=i?.indexOf(e);if(r!==-1){i?.splice(r,1),i.length===0&&this.g.delete(t),this.f.fire({viewContainer:e,viewContainerLocation:t});return}}}get(e){return this.all.filter(t=>t.id===e)[0]}getViewContainers(e){return[...this.g.get(e)||[]]}getViewContainerLocation(e){return[...this.g.keys()].filter(t=>this.getViewContainers(t).filter(i=>i?.id===e.id).length>0)[0]}getDefaultViewContainer(e){return this.h.find(t=>this.getViewContainerLocation(t)===e)}};ai.add(tm.ViewContainersRegistry,new TW);var im;(function(e){e.Open="2_open",e.Debug="4_debug",e.SCM="5_scm",e.More="9_more"})(im||(im={}));function LW(e,t){const i=e.group??im.More,r=t.group??im.More;return i!==r?i.localeCompare(r):(e.order??5)-(t.order??5)}var NW=class extends X{constructor(){super(...arguments),this.c=this.B(new I),this.onViewsRegistered=this.c.event,this.f=this.B(new I),this.onViewsDeregistered=this.f.event,this.g=this.B(new I),this.onDidChangeContainer=this.g.event,this.h=this.B(new I),this.onDidChangeViewWelcomeContent=this.h.event,this.j=[],this.m=new Map,this.n=new G4}registerViews(e,t){this.registerViews2([{views:e,viewContainer:t}])}registerViews2(e){const{disabledConfiguration:t}=RW();e.forEach(({views:i,viewContainer:r})=>{const s=i.filter(n=>!(t.views||[]).includes(n.id));return this.r(s,r)}),this.c.fire(e)}deregisterViews(e,t){const i=this.s(e,t);i.length&&this.f.fire({views:i,viewContainer:t})}moveViews(e,t){for(const i of this.m.keys())if(i!==t){const r=this.s(e,i);r.length&&(this.r(r,t),this.g.fire({views:r,from:i,to:t}))}}getViews(e){return this.m.get(e)||[]}getView(e){for(const t of this.j){const i=(this.m.get(t)||[]).filter(r=>r.id===e)[0];if(i)return i}return null}getViewContainer(e){for(const t of this.j)if((this.m.get(t)||[]).filter(r=>r.id===e)[0])return t;return null}registerViewWelcomeContent(e,t){return this.n.add(e,t),this.h.fire(e),ee(()=>{this.n.delete(e,t),this.h.fire(e)})}registerViewWelcomeContent2(e,t){const i=new Map;for(const[r,s]of t)this.n.add(e,s),i.set(r,ee(()=>{this.n.delete(e,s),this.h.fire(e)}));return this.h.fire(e),i}getViewWelcomeContent(e){const t=[];return this.n.forEach(e,i=>t.push(i)),t.sort(LW)}r(e,t){let i=this.m.get(t);i||(i=[],this.m.set(t,i),this.j.push(t));for(const r of e){if(this.getView(r.id)!==null)throw new Error(p(4533,null,r.id));i.push(r)}}s(e,t){const i=this.m.get(t);if(!i)return[];const r=[],s=[];for(const n of i)e.includes(n)?r.push(n):s.push(n);return r.length&&(s.length?this.m.set(t,s):(this.m.delete(t),this.j.splice(this.j.indexOf(t),1))),r}};ai.add(tm.ViewsRegistry,new NW);var xZ=V("viewDescriptorService"),qC;(function(e){e[e.Default=0]="Default",e[e.Expand=1]="Expand"})(qC||(qC={}));var GC;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(GC||(GC={}));var Qs=class extends Error{constructor(e){super(p(4534,null,e)),this.name="NoTreeViewError"}static is(e){return!!e&&e.name==="NoTreeViewError"}},OW=class{constructor(){this.a=new Map}removeDragOperationTransfer(e){if(e&&this.a.has(e)){const t=this.a.get(e);return this.a.delete(e),t}}addDragOperationTransfer(e,t){this.a.set(e,t)}};function JC(e,t){if(De(e))return{label:e};if(e&&typeof e=="object"&&typeof e.label=="string"){let i;return Array.isArray(e.highlights)&&(i=e.highlights.filter(r=>r.length===2&&typeof r[0]=="number"&&typeof r[1]=="number"),i=i.length?i:void 0),{label:e.label,highlights:i}}}var FW=class extends X{constructor(e,t,i){super(),this.f=e,this.g=t,this.h=i,this.a=new Map,this.b=new OW;function r(s){return s&&s.$treeViewId&&(s.$treeItemHandle||s.$selectedTreeItems||s.$focusedTreeItem)}t.registerArgumentProcessor({processArgument:s=>r(s)?this.r(s):Array.isArray(s)&&s.length>0?s.map(n=>r(n)?this.r(n):n):s})}registerTreeDataProvider(e,t,i){const r=this.createTreeView(e,{treeDataProvider:t},i);return{dispose:()=>r.dispose()}}createTreeView(e,t,i){if(!t||!t.treeDataProvider)throw new Error("Options with treeDataProvider is mandatory");const r=t.dragAndDropController?.dropMimeTypes??[],s=t.dragAndDropController?.dragMimeTypes??[],n=!!t.dragAndDropController?.handleDrag,o=!!t.dragAndDropController?.handleDrop,a=this.m(e,t,i),c={showCollapseAll:!!t.showCollapseAll,canSelectMany:!!t.canSelectMany,dropMimeTypes:r,dragMimeTypes:s,hasHandleDrag:n,hasHandleDrop:o,manuallyManageCheckboxes:!!t.manageCheckboxStateManually},l=this.f.$registerTreeViewDataProvider(e,c),u={get onDidCollapseElement(){return a.onDidCollapseElement},get onDidExpandElement(){return a.onDidExpandElement},get selection(){return a.selectedElements},get onDidChangeSelection(){return a.onDidChangeSelection},get activeItem(){return A(i,"treeViewActiveItem"),a.focusedElement},get onDidChangeActiveItem(){return A(i,"treeViewActiveItem"),a.onDidChangeActiveItem},get visible(){return a.visible},get onDidChangeVisibility(){return a.onDidChangeVisibility},get onDidChangeCheckboxState(){return a.onDidChangeCheckboxState},get message(){return a.message},set message(h){po(h)&&A(i,"treeViewMarkdownMessage"),a.message=h},get title(){return a.title},set title(h){a.title=h},get description(){return a.description},set description(h){a.description=h},get badge(){return a.badge},set badge(h){h!==void 0&&Yv.isViewBadge(h)?a.badge={value:Math.floor(Math.abs(h.value)),tooltip:h.tooltip}:h===void 0&&(a.badge=void 0)},reveal:(h,d)=>a.reveal(h,d),dispose:async()=>{await l,this.a.delete(e),a.dispose()}};return this.B(u),u}$getChildren(e,t){const i=this.a.get(e);return i?i.getChildren(t):Promise.reject(new Qs(e))}async $handleDrop(e,t,i,r,s,n,o,a){const c=this.a.get(e);if(!c)return Promise.reject(new Qs(e));const l=Mn.toDataTransfer(i,async u=>(await this.f.$resolveDropFileData(e,t,u)).buffer);return o===e&&a&&await this.j(l,c,a,s,n),c.onDrop(l,r,s)}async j(e,t,i,r,s){const n=this.b.removeDragOperationTransfer(s);if(n)(await n)?.forEach((o,a)=>{o&&e.set(a,o)});else if(s&&t.handleDrag){const o=t.handleDrag(i,e,r);this.b.addDragOperationTransfer(s,o),await o}return e}async $handleDrag(e,t,i,r){const s=this.a.get(e);if(!s)return Promise.reject(new Qs(e));const n=await this.j(new eu,s,t,r,i);if(!(!n||r.isCancellationRequested))return Mn.from(n)}async $hasResolve(e){const t=this.a.get(e);if(!t)throw new Qs(e);return t.hasResolve}$resolve(e,t,i){const r=this.a.get(e);if(!r)throw new Qs(e);return r.resolveTreeItem(t,i)}$setExpanded(e,t,i){const r=this.a.get(e);if(!r)throw new Qs(e);r.setExpanded(t,i)}$setSelectionAndFocus(e,t,i){const r=this.a.get(e);if(!r)throw new Qs(e);r.setSelectionAndFocus(t,i)}$setVisible(e,t){const i=this.a.get(e);if(!i){if(!t)return;throw new Qs(e)}i.setVisible(t)}$changeCheckboxState(e,t){const i=this.a.get(e);if(!i)throw new Qs(e);i.setCheckboxState(t)}m(e,t,i){const r=this.B(new MW(e,t,this.f,this.g.converter,this.h,i));return this.a.set(e,r),r}r(e){const t=this.a.get(e.$treeViewId);return t&&"$treeItemHandle"in e?t.getExtensionElement(e.$treeItemHandle):t&&"$focusedTreeItem"in e&&e.$focusedTreeItem?t.focusedElement:null}},MW=class L4 extends X{static{this.a="0"}static{this.b="1"}get visible(){return this.r}get selectedElements(){return this.s.map(t=>this.getExtensionElement(t)).filter(t=>!$t(t))}get focusedElement(){return this.t?this.getExtensionElement(this.t):void 0}constructor(t,i,r,s,n,o){if(super(),this.I=t,this.J=r,this.L=s,this.M=n,this.N=o,this.h=void 0,this.j=new Map,this.m=new Map,this.r=!1,this.s=[],this.t=void 0,this.u=this.B(new I),this.onDidExpandElement=this.u.event,this.w=this.B(new I),this.onDidCollapseElement=this.w.event,this.y=this.B(new I),this.onDidChangeSelection=this.y.event,this.z=this.B(new I),this.onDidChangeActiveItem=this.z.event,this.C=this.B(new I),this.onDidChangeVisibility=this.C.event,this.D=this.B(new I),this.onDidChangeCheckboxState=this.D.event,this.F=this.B(new I),this.G=Promise.resolve(),this.H=Promise.resolve(),this.O="",this.P="",this.Z=new lt,o.contributes&&o.contributes.views)for(const u in o.contributes.views)for(const h of o.contributes.views[u])h.id===t&&(this.P=h.name);this.f=i.treeDataProvider,this.g=i.dragAndDropController,this.f.onDidChangeTreeData&&this.B(this.f.onDidChangeTreeData(u=>{Array.isArray(u)&&u.length===0||this.F.fire({message:!1,element:u})}));let a,c;const l=ze.debounce(this.F.event,(u,h)=>(u||(u={message:!1,elements:[]}),h.element!==!1&&(a||(a=new Promise(d=>c=d),this.G=this.G.then(()=>a)),Array.isArray(h.element)?u.elements.push(...h.element):u.elements.push(h.element)),h.message&&(u.message=!0),u),200,!0);this.B(l(({message:u,elements:h})=>{h.length&&(this.H=this.H.then(()=>{const d=c;return a=null,this.$(h).then(()=>d())})),u&&this.J.$setMessage(this.I,ke.fromStrict(this.O)??"")}))}async getChildren(t){const i=t?this.getExtensionElement(t):void 0;if(t&&!i)return this.M.error(`No tree item with id '${t}' found.`),Promise.resolve([]);let r=this.X(t);return r||(r=await this.Y(i)),r?r.map(s=>s.item):void 0}getExtensionElement(t){return this.j.get(t)}reveal(t,i){i=i||{select:!0,focus:!1};const r=$t(i.select)?!0:i.select,s=$t(i.focus)?!1:i.focus,n=$t(i.expand)?!1:i.expand;return typeof this.f.getParent!="function"?Promise.reject(new Error("Required registered TreeDataProvider to implement 'getParent' method to access 'reveal' method")):t?this.G.then(()=>this.S(t)).then(o=>this.W(t,o[o.length-1]).then(a=>this.J.$reveal(this.I,{item:a.item,parentChain:o.map(c=>c.item)},{select:r,focus:s,expand:n})),o=>this.M.error(o)):this.J.$reveal(this.I,void 0,{select:r,focus:s,expand:n})}get message(){return this.O}set message(t){this.O=t,this.F.fire({message:!0,element:!1})}get title(){return this.P}set title(t){this.P=t,this.J.$setTitle(this.I,t,this.Q)}get description(){return this.Q}set description(t){this.Q=t,this.J.$setTitle(this.I,this.P,t)}get badge(){return this.R}set badge(t){this.R?.value===t?.value&&this.R?.tooltip===t?.tooltip||(this.R=Lp.from(t),this.J.$setBadge(this.I,t))}setExpanded(t,i){const r=this.getExtensionElement(t);r&&(i?this.u.fire(Object.freeze({element:r})):this.w.fire(Object.freeze({element:r})))}setSelectionAndFocus(t,i){const r=!Vr(this.s,t);this.s=t;const s=this.t!==i;this.t=i,r&&this.y.fire(Object.freeze({selection:this.selectedElements})),s&&this.z.fire(Object.freeze({activeItem:this.focusedElement}))}setVisible(t){t!==this.r&&(this.r=t,this.C.fire(Object.freeze({visible:this.r})))}async setCheckboxState(t){const i=(await Promise.all(t.map(async r=>{const s=this.getExtensionElement(r.treeItemHandle);return s?{extensionItem:s,treeItem:await this.f.getTreeItem(s),newState:r.newState?ns.Checked:ns.Unchecked}:Promise.resolve(void 0)}))).filter(r=>r!==void 0);i.forEach(r=>{r.treeItem.checkboxState=r.newState?ns.Checked:ns.Unchecked}),this.D.fire({items:i.map(r=>[r.extensionItem,r.newState])})}async handleDrag(t,i,r){const s=[];for(const n of t){const o=this.getExtensionElement(n);o&&s.push(o)}if(!(!this.g?.handleDrag||s.length===0))return await this.g.handleDrag(s,i,r),i}get hasHandleDrag(){return!!this.g?.handleDrag}async onDrop(t,i,r){const s=i?this.getExtensionElement(i):void 0;if(!(!s&&i||!this.g?.handleDrop))return hi(()=>this.g?.handleDrop?this.g.handleDrop(s,t,r):void 0)}get hasResolve(){return!!this.f.resolveTreeItem}async resolveTreeItem(t,i){if(!this.f.resolveTreeItem)return;const r=this.j.get(t);if(r){const s=this.m.get(r);if(s){const n=await this.f.resolveTreeItem(s.extensionItem,r,i)??s.extensionItem;return this.hb(n),s.item.tooltip=this.eb(n.tooltip),s.item.command=this.fb(s.disposableStore,n.command),s.item}}}S(t){return this.U(t).then(i=>i?this.S(i).then(r=>this.W(i,r[r.length-1]).then(s=>(r.push(s),r))):Promise.resolve([]))}U(t){const i=this.m.get(t);return i?Promise.resolve(i.parent?this.j.get(i.parent.item.handle):void 0):hi(()=>this.f.getParent(t))}W(t,i){const r=this.m.get(t);return r?Promise.resolve(r):hi(()=>this.f.getTreeItem(t)).then(s=>this.kb(t,s,i,!0)).then(s=>this.getChildren(i?i.item.handle:void 0).then(()=>{const n=this.getExtensionElement(s);if(n){const o=this.m.get(n);if(o)return Promise.resolve(o)}throw new Error(`Cannot resolve tree item for element ${s} from extension ${this.N.identifier.value}`)}))}X(t){if(t){let i;if(typeof t=="string"){const r=this.getExtensionElement(t);i=r?this.m.get(r):void 0}else i=t;return i&&i.children||void 0}return this.h}async Y(t){this.rb(t);const i=new lt(this.Z.token);try{const r=t?this.m.get(t):void 0,s=await this.f.getChildren(t);if(i.token.isCancellationRequested)return;const n=mt(s||[]),o=await Promise.all(mt(n).map(c=>this.f.getTreeItem(c)));if(i.token.isCancellationRequested)return;const a=o.map((c,l)=>c?this.db(n[l],c,r):null);return mt(a)}finally{i.dispose()}}$(t){if(t.some(r=>!r))return this.Z.dispose(!0),this.Z=new lt,this.tb(),this.J.$refresh(this.I);{const r=this.ab(t);if(r.length)return this.bb(r)}return Promise.resolve(void 0)}ab(t){const i=new Set,r=t.map(n=>this.m.get(n));for(const n of r)if(n&&!i.has(n.item.handle)){let o=n;for(;o&&o.parent&&r.findIndex(a=>o&&o.parent&&a&&a.item.handle===o.parent.item.handle)===-1;){const a=this.j.get(o.parent.item.handle);o=a?this.m.get(a):void 0}o&&!o.parent&&i.add(n.item.handle)}const s=[];return i.forEach(n=>{const o=this.j.get(n);if(o){const a=this.m.get(o);a&&(!a.parent||!i.has(a.parent.item.handle))&&s.push(n)}}),s}bb(t){const i={};return Promise.all(t.map(r=>this.cb(r).then(s=>{s&&(i[r]=s.item)}))).then(()=>Object.keys(i).length?this.J.$refresh(this.I,i):void 0)}cb(t){const i=this.getExtensionElement(t);if(i){const r=this.m.get(i);if(r)return this.rb(i),hi(()=>this.f.getTreeItem(i)).then(s=>{if(s){const n=this.ib(i,s,r.parent);return this.pb(i,n,r,r.parent),r.dispose(),n}return null})}return Promise.resolve(null)}db(t,i,r){const s=this.ib(t,i,r);if(i.id&&this.j.has(s.item.handle))throw new Error(p(3022,null,i.id));return this.ob(t,s),this.qb(s,r),s}eb(t){return Si.isMarkdownString(t)?ke.from(t):t}fb(t,i){return i?{...this.L.toInternal(i,t),originalId:i.command}:void 0}gb(t){if(t.checkboxState===void 0)return;let i,r,s;return typeof t.checkboxState=="number"?i=t.checkboxState:(i=t.checkboxState.state,r=t.checkboxState.tooltip,s=t.checkboxState.accessibilityInformation),{isChecked:i===ns.Checked,tooltip:r,accessibilityInformation:s}}hb(t){if(!Mf.isTreeItem(t,this.N))throw new Error(`Extension ${this.N.identifier.value} has provided an invalid tree item.`)}ib(t,i,r){this.hb(i);const s=this.B(new ue),n=this.kb(t,i,r),o=this.lb(i);return{item:{handle:n,parentHandle:r?r.item.handle:void 0,label:JC(i.label,this.N),description:i.description,resourceUri:i.resourceUri,tooltip:this.eb(i.tooltip),command:this.fb(s,i.command),contextValue:i.contextValue,icon:o,iconDark:this.mb(i)||o,themeIcon:this.jb(i),collapsibleState:$t(i.collapsibleState)?To.None:i.collapsibleState,accessibilityInformation:i.accessibilityInformation,checkbox:this.gb(i)},extensionItem:i,parent:r,children:void 0,disposableStore:s,dispose(){s.dispose()}}}jb(t){return t.iconPath instanceof di?t.iconPath:void 0}kb(t,{id:i,label:r,resourceUri:s},n,o){if(i)return`${L4.b}/${i}`;const a=JC(r,this.N),c=n?n.item.handle:L4.a;let l=a?a.label:s?Jr(s):"";l=l.indexOf("/")!==-1?l.replace("/","//"):l;const u=this.m.has(t)?this.m.get(t).item.handle:void 0,h=this.X(n)||[];let d,f=0;do{if(d=`${c}/${f}:${l}`,o||!this.j.has(d)||u===d)break;f++}while(f<=h.length);return d}lb(t){if(t.iconPath&&!(t.iconPath instanceof di))return typeof t.iconPath=="string"||E.isUri(t.iconPath)?this.nb(t.iconPath):this.nb(t.iconPath.light)}mb(t){if(t.iconPath&&!(t.iconPath instanceof di)&&t.iconPath.dark)return this.nb(t.iconPath.dark)}nb(t){return E.isUri(t)?t:E.file(t)}ob(t,i){this.j.set(i.item.handle,t),this.m.set(t,i)}pb(t,i,r,s){this.j.delete(i.item.handle),this.m.delete(t),i.item.handle!==r.item.handle&&this.j.delete(r.item.handle),this.ob(t,i);const n=this.X(s)||[],o=n.filter(a=>a.item.handle===r.item.handle)[0];o&&n.splice(n.indexOf(o),1,i)}qb(t,i){i?(i.children||(i.children=[]),i.children.push(t)):(this.h||(this.h=[]),this.h.push(t))}rb(t){if(t){const i=this.m.get(t);if(i){if(i.children)for(const r of i.children){const s=this.j.get(r.item.handle);s&&this.sb(s)}i.children=void 0}}else this.tb()}sb(t){const i=this.m.get(t);if(i){if(i.children)for(const r of i.children){const s=this.j.get(r.item.handle);s&&this.sb(s)}this.m.delete(t),this.j.delete(i.item.handle),i.dispose()}}tb(){this.h=void 0,this.j.clear(),this.m.forEach(t=>t.dispose()),this.m.clear()}dispose(){super.dispose(),this.Z.dispose(),this.tb(),this.J.$disposeTree(this.I)}},UW=class dP{static{this.a=new Set([z.http,z.https])}constructor(t){this.c=new Map,this.b=t.getProxy(q.MainThreadUriOpeners)}registerExternalUriOpener(t,i,r,s){if(this.c.has(i))throw new Error(`Opener with id '${i}' already registered`);const n=s.schemes.find(o=>!dP.a.has(o));if(n)throw new Error(`Scheme '${n}' is not supported. Only http and https are currently supported.`);return this.c.set(i,r),this.b.$registerUriOpener(i,s.schemes,t,s.label),ee(()=>{this.c.delete(i),this.b.$unregisterUriOpener(i)})}async $canOpenUri(t,i,r){const s=this.c.get(t);if(!s)throw new Error(`Unknown opener with id: ${t}`);const n=E.revive(i);return s.canOpenExternalUri(n,r)}async $openUri(t,i,r){const s=this.c.get(t);if(!s)throw new Error(`Unknown opener id: '${t}'`);return s.openExternalUri(E.revive(i.resolvedUri),{sourceUri:E.revive(i.sourceUri)},r)}},_W=class fP{static{this.a=0}constructor(t){this.c=new bo,this.d=new Map,this.b=t.getProxy(q.MainThreadUrls)}registerUriHandler(t,i){const r=t.identifier;if(this.c.has(r))throw new Error(`Protocol handler already registered for extension ${r}`);const s=fP.a++;return this.c.add(r),this.d.set(s,i),this.b.$registerUriHandler(s,r,t.displayName||t.name),ee(()=>{this.c.delete(r),this.d.delete(s),this.b.$unregisterUriHandler(s)})}$handleExternalUri(t,i){const r=this.d.get(t);if(!r)return Promise.resolve(void 0);try{r.handleUri(E.revive(i))}catch(s){Et(s)}return Promise.resolve(void 0)}async createAppUri(t){return E.revive(await this.b.$createAppUri(t))}},jW=class extends X{#e;#t;#i;#r;#n;#s;#a;#o;#c;#l;#u;#d;#h;constructor(e,t,i,r){super(),this.#o=void 0,this.#c=!0,this.#u=!1,this.#d=this.B(new I),this.onDidDispose=this.#d.event,this.#h=this.B(new I),this.onDidChangeViewState=this.#h.event,this.#e=e,this.#t=t,this.#r=i,this.#i=r.viewType,this.#n=r.panelOptions,this.#o=r.viewColumn,this.#s=r.title,this.#l=r.active}dispose(){this.#u||(this.#u=!0,this.#d.fire(),this.#t.$disposeWebview(this.#e),this.#r.dispose(),super.dispose())}get webview(){return this.c(),this.#r}get viewType(){return this.c(),this.#i}get title(){return this.c(),this.#s}set title(e){this.c(),this.#s!==e&&(this.#s=e,this.#t.$setTitle(this.#e,e))}get iconPath(){return this.c(),this.#a}set iconPath(e){this.c(),this.#a!==e&&(this.#a=e,this.#t.$setIconPath(this.#e,E.isUri(e)?{light:e,dark:e}:e))}get options(){return this.#n}get viewColumn(){if(this.c(),!(typeof this.#o=="number"&&this.#o<0))return this.#o}get active(){return this.c(),this.#l}get visible(){return this.c(),this.#c}_updateViewState(e){this.#u||(this.active!==e.active||this.visible!==e.visible||this.viewColumn!==e.viewColumn)&&(this.#l=e.active,this.#c=e.visible,this.#o=e.viewColumn,this.#h.fire({webviewPanel:this}))}reveal(e,t){this.c(),this.#t.$reveal(this.#e,{viewColumn:typeof e>"u"?void 0:zt.from(e),preserveFocus:!!t})}c(){if(this.#u)throw new Error("Webview is disposed")}},HW=class pP extends X{static c(){return Ht()}constructor(t,i,r){super(),this.j=i,this.m=r,this.g=new Map,this.h=new Map,this.f=t.getProxy(q.MainThreadWebviewPanels)}dispose(){super.dispose(),this.g.forEach(t=>t.dispose()),this.g.clear()}createWebviewPanel(t,i,r,s,n={}){const o=typeof s=="object"?s.viewColumn:s,a={viewColumn:zt.from(o),preserveFocus:typeof s=="object"&&!!s.preserveFocus},c=Rc(t),l=pP.c();this.f.$createWebviewPanel(jg(t),l,i,{title:r,panelOptions:BW(n),webviewOptions:J$(t,this.m,n),serializeBuffersForPostMessage:c},a);const u=this.j.createNewWebview(l,n,t);return this.createNewWebviewPanel(l,i,r,o,n,u,!0)}$onDidChangeWebviewPanelViewStates(t){const i=Object.keys(t);i.sort((r,s)=>{const n=t[r],o=t[s];return n.active?1:o.active?-1:+n.visible-+o.visible});for(const r of i){const s=this.getWebviewPanel(r);if(!s)continue;const n=t[r];s._updateViewState({active:n.active,visible:n.visible,viewColumn:zt.to(n.position)})}}async $onDidDisposeWebviewPanel(t){this.getWebviewPanel(t)?.dispose(),this.g.delete(t),this.j.deleteWebview(t)}registerWebviewPanelSerializer(t,i,r){if(this.h.has(i))throw new Error(`Serializer for '${i}' already registered`);return this.h.set(i,{serializer:r,extension:t}),this.f.$registerSerializer(i,{serializeBuffersForPostMessage:Rc(t)}),new Oe(()=>{this.h.delete(i),this.f.$unregisterSerializer(i)})}async $deserializeWebviewPanel(t,i,r,s){const n=this.h.get(i);if(!n)throw new Error(`No serializer found for '${i}'`);const{serializer:o,extension:a}=n,c=this.j.createNewWebview(t,r.webviewOptions,a),l=this.createNewWebviewPanel(t,i,r.title,s,r.panelOptions,c,r.active);await o.deserializeWebviewPanel(l,r.state)}createNewWebviewPanel(t,i,r,s,n,o,a){const c=new jW(t,this.f,o,{viewType:i,title:r,viewColumn:s,panelOptions:n,active:a});return this.g.set(t,c),c}getWebviewPanel(t){return this.g.get(t)}};function BW(e){return{enableFindWidget:e.enableFindWidget,retainContextWhenHidden:e.retainContextWhenHidden}}var WW=class extends X{#e;#t;#i;#r;#n;#s;#a;#o;#c;constructor(e,t,i,r,s,n){super(),this.#n=!1,this.#l=this.B(new I),this.onDidChangeVisibility=this.#l.event,this.#u=this.B(new I),this.onDidDispose=this.#u.event,this.#i=i,this.#a=r,this.#e=e,this.#t=t,this.#r=s,this.#s=n}dispose(){this.#n||(this.#n=!0,this.#u.fire(),this.#r.dispose(),super.dispose())}#l;#u;get title(){return this.a(),this.#a}set title(e){this.a(),this.#a!==e&&(this.#a=e,this.#t.$setWebviewViewTitle(this.#e,e))}get description(){return this.a(),this.#o}set description(e){this.a(),this.#o!==e&&(this.#o=e,this.#t.$setWebviewViewDescription(this.#e,e))}get visible(){return this.#s}get webview(){return this.#r}get viewType(){return this.#i}_setVisible(e){e===this.#s||this.#n||(this.#s=e,this.#l.fire())}get badge(){return this.a(),this.#c}set badge(e){this.a(),!(e?.value===this.#c?.value&&e?.tooltip===this.#c?.tooltip)&&(this.#c=Lp.from(e),this.#t.$setWebviewViewBadge(this.#e,e))}show(e){this.a(),this.#t.$show(this.#e,!!e)}a(){if(this.#n)throw new Error("Webview is disposed")}},zW=class{constructor(e,t){this.d=t,this.b=new Map,this.c=new Map,this.a=e.getProxy(q.MainThreadWebviewViews)}registerWebviewViewProvider(e,t,i,r){if(this.b.has(t))throw new Error(`View provider for '${t}' already registered`);return this.b.set(t,{provider:i,extension:e}),this.a.$registerWebviewViewProvider(jg(e),t,{retainContextWhenHidden:r?.retainContextWhenHidden,serializeBuffersForPostMessage:Rc(e)}),new Oe(()=>{this.b.delete(t),this.a.$unregisterWebviewViewProvider(t)})}async $resolveWebviewView(e,t,i,r,s){const n=this.b.get(t);if(!n)throw new Error(`No view provider found for '${t}'`);const{provider:o,extension:a}=n,c=this.d.createNewWebview(e,{},a),l=new WW(e,this.a,t,i,c,!0);this.c.set(e,l),await o.resolveWebviewView(l,{state:r},s)}async $onDidChangeWebviewViewVisibility(e,t){this.e(e)._setVisible(t)}async $disposeWebviewView(e){const t=this.e(e);this.c.delete(e),t.dispose(),this.d.deleteWebview(e)}e(e){const t=this.c.get(e);if(!t)throw new Error("No webview found");return t}},kZ=new j("debugType",void 0,{type:"string",description:p(6259,null)}),$Z=new j("debugConfigurationType",void 0,{type:"string",description:p(6260,null)}),CZ=new j("debugState","inactive",{type:"string",description:p(6261,null)}),VW="debugUx",IZ=new j(VW,"default",{type:"string",description:p(6262,null)}),PZ=new j("icube.enableDebugConfigurationCommand",!0,{type:"boolean",description:""}),qW="icube.enableDebugUx",DZ=new j(qW,!1,{type:"boolean",description:""}),AZ=new j("icube.isUXSimplify",!1,{type:"boolean",description:"True when current iCube theme is UX simplify."}),RZ=new j("hasDebugged",!1,{type:"boolean",description:p(6263,null)}),TZ=new j("inDebugMode",!1,{type:"boolean",description:p(6264,null)}),LZ=new j("inDebugRepl",!1,{type:"boolean",description:p(6265,null)}),NZ=new j("breakpointWidgetVisible",!1,{type:"boolean",description:p(6266,null)}),OZ=new j("inBreakpointWidget",!1,{type:"boolean",description:p(6267,null)}),FZ=new j("breakpointsFocused",!0,{type:"boolean",description:p(6268,null)}),MZ=new j("watchExpressionsFocused",!0,{type:"boolean",description:p(6269,null)}),UZ=new j("watchExpressionsExist",!1,{type:"boolean",description:p(6270,null)}),_Z=new j("variablesFocused",!0,{type:"boolean",description:p(6271,null)}),jZ=new j("expressionSelected",!1,{type:"boolean",description:p(6272,null)}),HZ=new j("breakpointInputFocused",!1,{type:"boolean",description:p(6273,null)}),BZ=new j("callStackItemType",void 0,{type:"string",description:p(6274,null)}),WZ=new j("callStackSessionIsAttach",!1,{type:"boolean",description:p(6275,null)}),zZ=new j("callStackItemStopped",!1,{type:"boolean",description:p(6276,null)}),VZ=new j("callStackSessionHasOneThread",!1,{type:"boolean",description:p(6277,null)}),qZ=new j("watchItemType",void 0,{type:"string",description:p(6278,null)}),GZ=new j("canViewMemory",void 0,{type:"boolean",description:p(6279,null)}),JZ=new j("breakpointItemType",void 0,{type:"string",description:p(6280,null)}),QZ=new j("breakpointItemBytes",void 0,{type:"boolean",description:p(6281,null)}),YZ=new j("breakpointHasModes",!1,{type:"boolean",description:p(6282,null)}),XZ=new j("breakpointSupportsCondition",!1,{type:"boolean",description:p(6283,null)}),ZZ=new j("loadedScriptsSupported",!1,{type:"boolean",description:p(6284,null)}),KZ=new j("loadedScriptsItemType",void 0,{type:"string",description:p(6285,null)}),eK=new j("focusedSessionIsAttach",!1,{type:"boolean",description:p(6286,null)}),tK=new j("focusedSessionIsNoDebug",!1,{type:"boolean",description:p(6287,null)}),iK=new j("stepBackSupported",!1,{type:"boolean",description:p(6288,null)}),rK=new j("restartFrameSupported",!1,{type:"boolean",description:p(6289,null)}),sK=new j("stackFrameSupportsRestart",!1,{type:"boolean",description:p(6290,null)}),nK=new j("jumpToCursorSupported",!1,{type:"boolean",description:p(6291,null)}),oK=new j("stepIntoTargetsSupported",!1,{type:"boolean",description:p(6292,null)}),aK=new j("breakpointsExist",!1,{type:"boolean",description:p(6293,null)}),cK=new j("debuggersAvailable",!1,{type:"boolean",description:p(6294,null)}),lK=new j("debugExtensionAvailable",!0,{type:"boolean",description:p(6295,null)}),uK=new j("debugProtocolVariableMenuContext",void 0,{type:"string",description:p(6296,null)}),hK=new j("debugSetVariableSupported",!1,{type:"boolean",description:p(6297,null)}),dK=new j("debugSetDataBreakpointAddressSupported",!1,{type:"boolean",description:p(6298,null)}),fK=new j("debugSetExpressionSupported",!1,{type:"boolean",description:p(6299,null)}),pK=new j("breakWhenValueChangesSupported",!1,{type:"boolean",description:p(6300,null)}),gK=new j("breakWhenValueIsAccessedSupported",!1,{type:"boolean",description:p(6301,null)}),mK=new j("breakWhenValueIsReadSupported",!1,{type:"boolean",description:p(6302,null)}),vK=new j("terminateDebuggeeSupported",!1,{type:"boolean",description:p(6303,null)}),wK=new j("suspendDebuggeeSupported",!1,{type:"boolean",description:p(6304,null)}),bK=new j("variableEvaluateNamePresent",!1,{type:"boolean",description:p(6305,null)}),yK=new j("variableIsReadonly",!1,{type:"boolean",description:p(6306,null)}),EK=new j("variableValue",!1,{type:"string",description:p(6307,null)}),SK=new j("variableType",!1,{type:"string",description:p(6308,null)}),xK=new j("variableInterfaces",!1,{type:"array",description:p(6309,null)}),kK=new j("variableName",!1,{type:"string",description:p(6310,null)}),$K=new j("variableLanguage",!1,{type:"string",description:p(6311,null)}),CK=new j("variableExtensionId",!1,{type:"string",description:p(6312,null)}),IK=new j("exceptionWidgetVisible",!1,{type:"boolean",description:p(6313,null)}),PK=new j("multiSessionRepl",!1,{type:"boolean",description:p(6314,null)}),DK=new j("multiSessionDebug",!1,{type:"boolean",description:p(6315,null)}),AK=new j("disassembleRequestSupported",!1,{type:"boolean",description:p(6316,null)}),RK=new j("disassemblyViewFocus",!1,{type:"boolean",description:p(6317,null)}),TK=new j("languageSupportsDisassembleRequest",!1,{type:"boolean",description:p(6318,null)}),LK=new j("focusedStackFrameHasInstructionReference",!1,{type:"boolean",description:p(6319,null)}),NK={enum:["neverOpen","openOnSessionStart","openOnFirstSessionStart"],default:"openOnFirstSessionStart",description:p(6321,null)},QC;(function(e){e[e.Inactive=0]="Inactive",e[e.Initializing=1]="Initializing",e[e.Stopped=2]="Stopped",e[e.Running=3]="Running"})(QC||(QC={}));var YC;(function(e){e[e.Valid=0]="Valid",e[e.Unreadable=1]="Unreadable",e[e.Error=2]="Error"})(YC||(YC={}));var XC;(function(e){e[e.Variable=0]="Variable",e[e.Address=1]="Address"})(XC||(XC={}));var rm;(function(e){e[e.Initial=1]="Initial",e[e.Dynamic=2]="Dynamic"})(rm||(rm={}));var ZC;(function(e){e.UnverifiedBreakpoints="unverifiedBreakpoints"})(ZC||(ZC={}));var OK=V("debugService"),KC;(function(e){e[e.CONDITION=0]="CONDITION",e[e.HIT_COUNT=1]="HIT_COUNT",e[e.LOG_MESSAGE=2]="LOG_MESSAGE",e[e.TRIGGER_POINT=3]="TRIGGER_POINT"})(KC||(KC={}));var e3;(function(e){e[e.Command=0]="Command",e[e.Tree=1]="Tree"})(e3||(e3={}));var t3;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(t3||(t3={}));var i3;(function(e){e.deserialize=t=>t,e.serialize=t=>t})(i3||(i3={}));var r3;(function(e){e.deserialize=t=>({id:t.id,name:t.name,iconPath:t.iconPath&&{light:E.revive(t.iconPath.light),dark:E.revive(t.iconPath.dark)},iconClass:t.iconClass,visualization:t.visualization}),e.serialize=t=>t})(r3||(r3={}));var GW=class gP{static{this.a=0}constructor(t){this.c=new Map,this.b=t.getProxy(q.MainThreadCodeMapper)}async $mapCode(t,i,r){const s=this.c.get(t);if(!s)throw new Error(`Received request to map code for unknown provider handle ${t}`);const n={textEdit:(c,l)=>{l=Array.isArray(l)?l:[l],this.b.$handleProgress(i.requestId,{uri:c,edits:l.map(It.from)})}},o={codeBlocks:i.codeBlocks.map(c=>({code:c.code,resource:E.revive(c.resource),markdownBeforeBlock:c.markdownBeforeBlock})),conversation:i.conversation.map(c=>c.type==="request"?{type:"request",message:c.message}:{type:"response",message:c.message,result:c.result?Un.to(c.result):void 0,references:c.references?.map(dc.to)})};return await s.provideMappedEdits(o,n,r)??null}registerMappedEditsProvider(t,i){const r=gP.a++;return this.b.$registerCodeMapperProvider(r),this.c.set(r,i),{dispose:()=>this.b.$unregisterCodeMapperProvider(r)}}},Ny;(function(e){e.USEast="US-East",e.SG="Singapore-Central",e.BOEI18N="US-BOE",e.BOE="China-BOE",e.CN="China-North"})(Ny||(Ny={}));var s3;(function(e){e.BYTEDANCE="bytedance",e.MARSCODE="marscode"})(s3||(s3={}));var n3;(function(e){e.BYTEDANCE="bytedance",e.DCAR="dcar",e.MARSCODE_CN="marscode_cn",e.MARSCODE_COM="marscode_com",e.UNKNOWN="unknown"})(n3||(n3={}));var o3;(function(e){e.CN="cn",e.I18N="i18n"})(o3||(o3={}));var Vn;(function(e){e.CN="CN",e.SG="SG",e.US="US",e.BOE="BOE",e.BOEI18N="BOEI18N"})(Vn||(Vn={}));var Sh;(function(e){e.cn="cn",e.sg="sg",e.us="us"})(Sh||(Sh={}));var FK={[Sh.cn]:Vn.CN,[Sh.sg]:Vn.SG,[Sh.us]:Vn.US},MK=new Map([[Vn.SG,{url:"api.trae.ai",region:"sg",clientId:"ono9krqynydwx5",path:"trae"}],[Vn.US,{url:"api.trae.ai",region:"us",clientId:"ono9krqynydwx5",path:"trae"}],[Vn.CN,{url:"api.marscode.cn",region:"cn",clientId:"jn91924vxlq380",path:"public"}]]),UK=new Map([[qh.SPRING,{domain:"www.trae.ai",authFrom:"trae"}],[qh.YINLI,{domain:"www.marscode.cn",authFrom:"marscode"}]]),JW=class{constructor(e,t){this.j=t,this.a=new I({onListenerError:cr}),this.onInlineCompletionEvent=this.a.event,this.b=new I({onListenerError:cr}),this.c=new I({onListenerError:cr}),this.onDidChangeUserInfoEvent=this.b.event,this.onDidChangeLastSyncTimeEvent=this.c.event,this.d=new I({onListenerError:cr}),this.onUserLoginEvent=this.d.event,this.e=new I({onListenerError:cr}),this.onUserLogoutEvent=this.e.event,this.f=new I({onListenerError:cr}),this.onUninstallExtension=this.f.event,this.g=new I({onListenerError:cr}),this.onDidUninstallExtension=this.g.event,this.h=new I({onListenerError:cr}),this.onWebviewEditorsChange=this.h.event,this.i=new I({onListenerError:cr}),this.onDidCommonParamsChange=this.i.event,this._proxy=e.getProxy(q.MainThreadICubeEvent)}$onWebviewEditorsChange(e){this.h.fire(e)}$onDidCommonParamsChange(e){this.i.fire(e)}$onUninstallExtensionEvent(){this.f.fire()}$onDidUninstallExtensionEvent(){this.g.fire()}$onUserLoginEvent(e){this.d.fire(e)}$onUserLogoutEvent(){this.e.fire()}$onEditorCustomEvent(e,t){}$onCompletionShowEvent(e){this.a.fire(O.to(e))}$onDidChangeLastSyncTime(e){this.c.fire(e)}showMultiEditResult(e){this.j.executeCommand("icube.multiEditResult.show",e)}$onDidChangeUserInfo(e){this.b.fire(e)}hideMultiEditResult(){this.j.executeCommand("icube.multiEditResult.hide")}},QW=class{constructor(e,t){this.c=t,this.a=0,this.b=new ue,this._components=new Map,this._proxy=e.getProxy(q.MainThreadICubeWebComponent)}dispose(){this._components.forEach(e=>e.component.dispose()),this.b.dispose()}async defineComponent(e,t,i){await this._proxy.$defineComponent(e,t,i.identifier)}openModal(e){const t=this.a++,i=new class extends a3{}(this,t);return this._proxy.$openModal(t,e),this._components.set(t,{component:i,onDidReceiveMessage:i._onDidReceiveMessage}),i}addIcubeComponentInTitleCenter(e,t){const i=this.a++,r=new class extends a3{}(this,i);return this._proxy.$createWidiget(i,e,t),this._components.set(i,{component:r,onDidReceiveMessage:r._onDidReceiveMessage}),r}toast(e){this.c.executeCommand("icube.showToast",e)}$onDidDispose(e){this._components.get(e)?.component.dispose()}$onDidReceiveMessage(e,t){this._components.get(e)?.onDidReceiveMessage.fire(t)}},a3=class{constructor(e,t){this.b=e,this.c=t,this.a=new I,this.onDidDispose=this.a.event,this._onDidReceiveMessage=new I,this.onDidReceiveMessage=this._onDidReceiveMessage.event}dispose(){this.b._components.has(this.c)&&(this.b._components.delete(this.c),this.b._proxy.$disposeComponent(this.c),this.a.fire(),this.a.dispose(),this._onDidReceiveMessage.dispose())}postMessage(e){return this.b._proxy.$postMessage(this.c,e)}},YW=class{constructor(e){this.a=new Map,this.b=0,this.c=e.getProxy(q.MainThreadAiEmbeddingVector)}async $provideAiEmbeddingVector(e,t,i){if(this.a.size===0)throw new Error("No embedding vector providers registered");const r=this.a.get(e);if(!r)throw new Error("Embedding vector provider not found");const s=await r.provideEmbeddingVector(t,i);if(!s)throw new Error("Embedding vector provider returned undefined");return s}registerEmbeddingVectorProvider(e,t,i){const r=this.b;return this.b++,this.a.set(r,i),this.c.$registerAiEmbeddingVectorProvider(t,r),new Oe(()=>{this.c.$unregisterAiEmbeddingVectorProvider(r),this.a.delete(r)})}},_K=p(7804,null),jK=p(7805,null),c3="icube",Ys;(function(e){e.SettingSet="SettingSet",e.SettingView="SettingView",e.CommandLabel="CommandLabel"})(Ys||(Ys={}));var HK=[Ys.CommandLabel],BK=[Ys.SettingSet,Ys.SettingView],WK=[Ys.SettingSet],zK={[Ys.SettingSet]:"settings.json",[Ys.SettingView]:"settings.json",[Ys.CommandLabel]:"Command"},l3;(function(e){e[e.INVALID_TOKEN=1001]="INVALID_TOKEN"})(l3||(l3={}));var qi;(function(e){e[e.CLIENT_REQUEST_ABORT=-1]="CLIENT_REQUEST_ABORT",e[e.CLIENT_STOP=-2]="CLIENT_STOP",e[e.NO_WORKSPACE=-3]="NO_WORKSPACE",e[e.AUTH_FAIL=1002]="AUTH_FAIL",e[e.MESSAGE_TOO_LARGE=1009]="MESSAGE_TOO_LARGE",e[e.UNKNOWN_ERROR=2001]="UNKNOWN_ERROR",e[e.MODEL_FAIL=3003]="MODEL_FAIL",e[e.INVALID_ARGS=4001]="INVALID_ARGS",e[e.TURN_EXCEEDED=5001]="TURN_EXCEEDED",e[e.TIMEOUT=5002]="TIMEOUT",e[e.OUT_OF_QUOTA=5003]="OUT_OF_QUOTA",e[e.AGENT_BUSY=5004]="AGENT_BUSY"})(qi||(qi={}));var VK={[qi.CLIENT_REQUEST_ABORT]:p(7806,null),[qi.CLIENT_STOP]:p(7807,null),[qi.NO_WORKSPACE]:p(7808,null),[qi.AUTH_FAIL]:p(7809,null),[qi.MESSAGE_TOO_LARGE]:p(7810,null),[qi.UNKNOWN_ERROR]:p(7811,null),[qi.MODEL_FAIL]:p(7812,null),[qi.INVALID_ARGS]:p(7813,null),[qi.TURN_EXCEEDED]:p(7814,null),[qi.TIMEOUT]:p(7815,null),[qi.OUT_OF_QUOTA]:p(7816,null),[qi.AGENT_BUSY]:p(7817,null)},Ue;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.SERVER_ERROR=-1]="SERVER_ERROR",e[e.ETIMEDOUT=-2]="ETIMEDOUT",e[e.ECONNABORTED=-3]="ECONNABORTED",e[e.ENOTFOUND=-4]="ENOTFOUND",e[e.ECONNRESET=-5]="ECONNRESET",e[e.CERT_HAS_EXPIRED=-6]="CERT_HAS_EXPIRED",e[e.ERR_BAD_REQUEST=-7]="ERR_BAD_REQUEST",e[e.RETURN_EMPTY=-8]="RETURN_EMPTY",e[e.SERVER_DEFAULT=-9]="SERVER_DEFAULT",e[e.NETWORK_ERROR_INTERNAL=998]="NETWORK_ERROR_INTERNAL",e[e.NETWORK_ERROR=999]="NETWORK_ERROR",e[e.INVALID_TOKEN=1001]="INVALID_TOKEN",e[e.AUTH_FAIL=1002]="AUTH_FAIL",e[e.MESSAGE_TOO_LARGE=1009]="MESSAGE_TOO_LARGE",e[e.UNKNOWN_ERROR=2001]="UNKNOWN_ERROR",e[e.MODEL_FAIL=3003]="MODEL_FAIL",e[e.REQUEST_LIMIT=3004]="REQUEST_LIMIT",e[e.INVALID_ARGS=4001]="INVALID_ARGS",e[e.TOKEN_LIMIT=4006]="TOKEN_LIMIT",e[e.USER_REQUEST_LIMIT=4007]="USER_REQUEST_LIMIT",e[e.ABNORMAL_ACCOUNT_LOGOUT=4010]="ABNORMAL_ACCOUNT_LOGOUT",e[e.ABNORMAL_ACCOUNT_LIMIT=4011]="ABNORMAL_ACCOUNT_LIMIT",e[e.REQUEST_DOWNGRADE=4012]="REQUEST_DOWNGRADE",e[e.REQUEST_ABNORMAL=4013]="REQUEST_ABNORMAL",e[e.TODAY_USER_REQUEST_LIMIT=4021]="TODAY_USER_REQUEST_LIMIT",e[e.REQUEST_WAIT_EXCEED_QUEUE_SIZE=4050]="REQUEST_WAIT_EXCEED_QUEUE_SIZE",e[e.REQUEST_WAIT_IN_QUEUE_TIMEOUT=4051]="REQUEST_WAIT_IN_QUEUE_TIMEOUT",e[e.REQUEST_WAIT_IN_QUEUE_MAX_TIMEOUT=4052]="REQUEST_WAIT_IN_QUEUE_MAX_TIMEOUT",e[e.TURN_EXCEEDED=5001]="TURN_EXCEEDED",e[e.TIMEOUT=5002]="TIMEOUT",e[e.OUT_OF_QUOTA=5003]="OUT_OF_QUOTA",e[e.AGENT_BUSY=5004]="AGENT_BUSY",e[e.INTERACTION_ABNORMAL=9999]="INTERACTION_ABNORMAL",e[e.INTENT_ERROR=6004]="INTENT_ERROR",e[e.NOT_SUPPORT_MULTI_MEDIA=7e3]="NOT_SUPPORT_MULTI_MEDIA"})(Ue||(Ue={}));var qK={1009:Ue.MESSAGE_TOO_LARGE},He;(function(e){e.WARN="warn",e.ERROR="error"})(He||(He={}));var GK={[Ue.DEFAULT]:{key:"icube.error.clientDefault",level:He.ERROR,message:p(7818,null)},[Ue.SERVER_ERROR]:{key:"icube.error.serverError",level:He.WARN,message:p(7819,null)},[Ue.ETIMEDOUT]:{key:"icube.error.eTimeout",level:He.ERROR,message:p(7820,null)},[Ue.ECONNABORTED]:{key:"icube.error.eConnAborted",level:He.ERROR,message:p(7821,null)},[Ue.ENOTFOUND]:{key:"icube.error.eNotFound",level:He.ERROR,message:p(7822,null)},[Ue.ECONNRESET]:{key:"icube.error.eConnReset",level:He.ERROR,message:p(7823,null)},[Ue.RETURN_EMPTY]:{key:"icube.error.returnEmpty",level:He.ERROR,message:p(7824,null)},[Ue.SERVER_DEFAULT]:{key:"icube.error.serverDefault",level:He.ERROR,message:p(7825,null)},[Ue.NETWORK_ERROR_INTERNAL]:{key:"icube.error.networkErrorInternal",level:He.ERROR,message:p(7826,null)},[Ue.NETWORK_ERROR]:{key:"icube.error.networkError",level:He.ERROR,message:p(7827,null)},[Ue.CERT_HAS_EXPIRED]:{key:"icube.error.certHasExpired",level:He.ERROR,message:p(7828,null)},[Ue.ERR_BAD_REQUEST]:{key:"icube.error.eBadRequest",level:He.ERROR,message:p(7829,null)},[Ue.INVALID_TOKEN]:{key:"icube.error.invalidToken",level:He.WARN,message:p(7830,null)},[Ue.AUTH_FAIL]:{key:"icube.error.authFail",level:He.WARN,message:p(7831,null)},[Ue.MESSAGE_TOO_LARGE]:{key:"icube.error.messageTooLarge",level:He.WARN,message:p(7832,null)},[Ue.UNKNOWN_ERROR]:{key:"icube.error.unknownError",level:He.ERROR,message:p(7833,null)},[Ue.MODEL_FAIL]:{key:"icube.error.modelFail",level:He.ERROR,message:p(7834,null)},[Ue.REQUEST_LIMIT]:{key:"icube.error.requestLimit",level:He.WARN,message:p(7835,null)},[Ue.REQUEST_WAIT_IN_QUEUE_TIMEOUT]:{key:"icube.error.requestQueueTimeout",level:He.ERROR,message:p(7836,null)},[Ue.REQUEST_WAIT_EXCEED_QUEUE_SIZE]:{key:"icube.error.requestQueueExceed",level:He.ERROR,message:p(7837,null)},[Ue.REQUEST_WAIT_IN_QUEUE_MAX_TIMEOUT]:{key:"icube.error.requestQueueMaxTimeout",level:He.ERROR,message:p(7838,null)},[Ue.INVALID_ARGS]:{key:"icube.error.invalidArgs",level:He.WARN,message:p(7839,null)},[Ue.TOKEN_LIMIT]:{key:"icube.error.tokenLimit",level:He.WARN,message:p(7840,null)},[Ue.USER_REQUEST_LIMIT]:{key:"icube.error.userRequestLimit",level:He.WARN,message:p(7841,null)},[Ue.ABNORMAL_ACCOUNT_LOGOUT]:{key:"icube.error.abnormalAccountLogout",level:He.WARN,message:p(7842,null)},[Ue.ABNORMAL_ACCOUNT_LIMIT]:{key:"icube.error.abnormalAccountLimit",level:He.WARN,message:p(7843,null)},[Ue.REQUEST_DOWNGRADE]:{key:"icube.error.requestDowngrade",level:He.WARN,message:p(7844,null)},[Ue.REQUEST_ABNORMAL]:{key:"icube.error.requestAbnormal",level:He.WARN,message:p(7845,null)},[Ue.TODAY_USER_REQUEST_LIMIT]:{key:"icube.error.todayUserRequestLimit",level:He.WARN,message:p(7846,null)},[Ue.TURN_EXCEEDED]:{key:"icube.error.turnExceeded",level:He.WARN,message:p(7847,null)},[Ue.TIMEOUT]:{key:"icube.error.timeout",level:He.ERROR,message:p(7848,null)},[Ue.OUT_OF_QUOTA]:{key:"icube.error.outOfQuota",level:He.WARN,message:p(7849,null)},[Ue.AGENT_BUSY]:{key:"icube.error.agentBusy",level:He.WARN,message:p(7850,null)},[Ue.INTERACTION_ABNORMAL]:{key:"",level:He.WARN,message:""},[Ue.INTENT_ERROR]:{key:"icube.error.intentError",level:He.WARN,message:p(7851,null)},[Ue.NOT_SUPPORT_MULTI_MEDIA]:{key:"icube.error.notSupportMultiMedia",level:He.WARN,message:p(7852,null)}},u3;(function(e){e.DRAG_ENTER="chatFileDragEnter",e.DRAG_OVER="chatFileDragOver",e.DRAG_LEAVE="chatFileDragLeave",e.DROP="chatFileDrop"})(u3||(u3={}));var XW=class mP{static{this.a=0}constructor(t,i){this.extension=t,this.provider=i,this.handle=mP.a++}},ZW=class{constructor(e){this.session=e,this.responses=[]}},KW=class N4{static{this.a=0}constructor(t,i,r,s){this.g=r,this.h=s,this.b=new Map,this.d=new Map,this.f=t.getProxy(q.MainThreadIcubeInlineChat),i.registerApiCommand(new me("icube.vscode.editorChat.start","icube.inlineChat.start","Invoke a new editor chat session",[new U("Run arguments","",n=>!0,n=>{if(n)return{initialRange:n.initialRange?O.from(n.initialRange):void 0,initialSelection:n.initialSelection?Ti.from(n.initialSelection):void 0,message:n.message,autoSend:n.autoSend,position:n.position?Fe.from(n.position):void 0}})],ge.Void))}registerProvider(t,i,r){const s=new XW(t,i);return this.b.set(s.handle,s),this.f.$registerInteractiveEditorProvider(s.handle,r.label,t.identifier.value,typeof i.handleInteractiveEditorResponseFeedback=="function",r.scene===pp.LITE),ee(()=>{this.f.$unregisterInteractiveEditorProvider(s.handle),this.b.delete(s.handle)})}async $prepareSession(t,i,r,s){const n=this.b.get(t);if(!n){this.h.warn("CANNOT prepare session because the PROVIDER IS GONE icube");return}const o=this.g.getDocument(E.revive(i)),a=Ti.to(r),c=await n.provider.prepareInteractiveEditorSession({document:o,selection:a},s);if(!c)return;if(c.wholeRange&&!c.wholeRange.contains(a))throw new Error("IcubeInteractiveEditorSessionProvider returned a wholeRange that does not contain the selection.");const l=N4.a++;return this.d.set(l,new ZW(c)),{id:l,sessionId:c.sessionId,dogfoodingVisible:c.dogfoodingVisible,placeholder:c.placeholder,input:c.input,slashCommands:c.slashCommands?.map(u=>({command:u.command,detail:u.detail,refer:u.refer,executeImmediately:u.executeImmediately,isShowInCommandList:u.isShowInCommandList})),wholeRange:O.from(c.wholeRange),message:c.message,errorMessage:c.errorMessage,requesterUsername:c.requester?.name,requesterAvatarIconUri:c.requester?.icon,repoName:c.requester?.repoName,responderAvatarIconUri:c.responder?.icon,responderName:c.responder?.name}}async $provideResponse(t,i,r,s){const n=this.b.get(t);if(!n)return;const o=this.d.get(i.id);if(!o)return;const a={prompt:r.prompt,selection:Ti.to(r.selection),wholeRange:O.to(r.wholeRange),attempt:r.attempt,live:r.live};let c=!1;const l={report:async v=>{if(!r.live&&v.edits?.length)throw new Error("Progress reporting is only supported for live sessions");c||s.isCancellationRequested&&!v.finalText||await this.f.$handleProgressChunk(r.requestId,{message:v.message,edits:v.edits?.map(It.from),editsShouldBeInstant:v.editsShouldBeInstant,markdownFragment:Si.isMarkdownString(v.content)?v.content.value:v.content,finalText:v.finalText,reference:v.reference&&"uri"in v.reference&&"range"in v.reference?{uri:v.reference.uri,range:O.from(v.reference.range)}:v.reference})}},u=Promise.resolve(n.provider.provideInteractiveEditorResponse(o.session,a,l,s));let h;try{h=await pn(u,s)}catch(v){throw v.detail?new Error(JSON.stringify({message:v.message,detail:v.detail,level:v.level,from:c3})):v}finally{c=!0}if(!h)return;const d=o.responses.push(h)-1,f={wholeRange:O.from(h.wholeRange),placeholder:h.placeholder,finalText:h.finalText};if(N4.i(h))return{...f,id:d,type:"message",message:ke.from(h.contents)};const{edits:g}=h;return g instanceof In?{...f,id:d,type:"bulkEdit",edits:fi.from(g)}:{...f,id:d,type:"editorEdit",edits:g.map(It.from),keepContent:h.keepContent}}$handleFeedback(t,i,r,s){const n=this.b.get(t),o=this.d.get(i),a=o?.responses[r];if(n&&a){const c=dw.to(s);n.provider.handleInteractiveEditorResponseFeedback?.(o.session,a,c)}}$releaseSession(t,i){}static i(t){return typeof t=="object"&&typeof t.contents=="object"}$handleReportAction(t,i,r,s){const n=this.b.get(t);if(!n)return;const o=this.d.get(i);o?.session&&n.provider.reportAction(o.session,r,{...s,diffRanges:s.diffRanges?.map(a=>O.to(a)),insertCursorPosition:s.insertCursorPosition?Fe.to(s.insertCursorPosition):void 0})}async $provideInteractiveEditorIntent(t,i,r,s){const n=this.b.get(t);if(!n)return;const o=this.d.get(i);if(o?.session&&n.provider&&n.provider.provideInteractiveEditorIntent){const a={prompt:r.prompt,selection:Ti.to(r.selection),wholeRange:O.to(r.wholeRange),attempt:r.attempt,live:r.live};let c=!1;const l={report:async d=>{if(!r.live&&d.edits?.length)throw new Error("Progress reporting is only supported for live sessions");c||s.isCancellationRequested&&!d.finalText||await this.f.$handleProgressChunk(r.requestId,{message:d.message,edits:d.edits?.map(It.from),editsShouldBeInstant:d.editsShouldBeInstant,markdownFragment:Si.isMarkdownString(d.content)?d.content.value:d.content,finalText:d.finalText,reference:d.reference&&"uri"in d.reference&&"range"in d.reference?{uri:d.reference.uri,range:O.from(d.reference.range)}:d.reference})}},u=Promise.resolve(n.provider.provideInteractiveEditorIntent(o.session,a,l,s));let h;try{h=await pn(u,s)}catch(d){throw d.detail?new Error(JSON.stringify({message:d.message,detail:d.detail,level:d.level,from:c3,code:d.code})):d}finally{c=!0}return h||void 0}}async $provideBackgroundTaskStateReporter(t,i,r){const s=this.b.get(t);if(!s)return;const n=this.d.get(i);if(!n||!s.provider.provideBackgroundTaskStateReporter)return;const o={report:async c=>{await this.f.$handleBackgroundTaskStateChunk(i,{buildingTask:{progress:c.buildingTask?.progress??0}})}},a=Promise.resolve(s.provider.provideBackgroundTaskStateReporter(n.session,o,r));try{await pn(a,r)}catch(c){console.log(`progress reporter cancelled: ${c}`)}}},ez=class vP{static{this.a=0}constructor(t,i){this.extension=t,this.provider=i,this.handle=vP.a++}},tz=class wP{static{this.a=0}constructor(t,i){this.i=i,this.b=new Map,this.d=new Map,this.g=new I,this.onDidPerformUserAction=this.g.event,this.h=t.getProxy(q.MainThreadIcubeChat)}registerChatProvider(t,i,r){const s=new ez(t,r);return this.b.set(s.handle,s),this.j("Register chat provider start"),this.h.$registerChatProvider(s.handle,i),this.j(`Register chat provider end, id: ${i}`),ee(()=>{this.h.$unregisterChatProvider(s.handle),this.b.delete(s.handle)})}sendInteractiveRequestToProvider(t,i){this.h.$sendRequestToProvider(t,i)}async getICubeAIConfig(t){return{}}async $prepareChat(t,i,r){const s=this.b.get(t);if(!s)return;const n=await s.provider.prepareSession(i,r);if(!n)return;const o=wP.a++;return this.d.set(o,n),{id:o,requesterUsername:n.requester?.name,requesterAvatarIconUri:n.requester?.icon,responderUsername:n.responder?.name,responderAvatarIconUri:n.responder?.icon,inputPlaceholder:n.inputPlaceholder,dogfoodingVisible:n.dogfoodingVisible}}async $provideWelcomeMessage(t,i){const r=this.b.get(t);if(!r||!r.provider.provideWelcomeMessage)return;this.j("Provide welcome message start");const s=await r.provider.provideWelcomeMessage(i);if(s)return this.j("Provide welcome message end"),s.map(n=>typeof n=="string"?n:Array.isArray(n)?n.map(o=>_u.from(o)):ke.from(n))}async $provideFollowups(t,i,r){const s=this.b.get(t);if(!s)return;const n=this.d.get(i);return!n||!s.provider.provideFollowups?void 0:(await s.provider.provideFollowups(n,r))?.map(a=>fw.from(a)).filter(a=>a.kind==="reply"||a.kind==="command")}async $provideSampleQuestions(t,i){const r=this.b.get(t);if(!r||!r.provider.provideSampleQuestions)return;this.j("Provide sample questions start");const s=await r.provider.provideSampleQuestions(i);if(s)return this.j("Provide sample questions end"),s?.map(n=>_u.from(n))}$removeRequest(t,i,r){const s=this.b.get(t);if(!s)return;const n=this.d.get(i);if(n&&s.provider.removeRequest){this.j("Remove request start"),s.provider.removeRequest(n,r),this.j("Remove request end");try{if(n.saveState&&this.d.has(i)){const o=n.saveState();this.h.$acceptChatState(i,o)}}catch(o){this.i.warn(o)}}}async $provideReply(t,i,r,s){const n=this.b.get(t);if(!n)return;const o=this.d.get(i);if(!o)return;const a={session:o,message:r.message,variables:{},from:r.from,hashContext:r.hashContext};if(r.variables)for(const g of Object.keys(r.variables))a.variables[g]=r.variables[g].map(Xp.to);const c=ri.create(!1);let l;const u={report:g=>{if(s.isCancellationRequested)return;typeof l>"u"&&(l=c.elapsed());const v=Qp.from(n.extension,g);if("placeholder"in g&&"resolvedContent"in g){const y=Promise.all([this.h.$acceptResponseProgress(t,i,v),g.resolvedContent]);pn(y,s).then(S=>{if(!S)return;const[x,P]=S;this.h.$acceptResponseProgress(t,i,P,x??void 0)})}else this.h.$acceptResponseProgress(t,i,v)}};let h,d;try{this.j("Provide reply start"),h=await n.provider.provideResponseWithProgress(a,u,s),h||(h={errorDetails:{message:p(3008,null)}},d="error")}catch(g){h={errorDetails:{message:g.message,responseIsIncomplete:!0,errorDetailMessage:g?.detail||g.message,code:g.code}},g.level&&(d=g.level),this.i.error(g)}finally{this.j(`Provide reply end, result: ${JSON.stringify(h)}`)}try{if(o.saveState&&this.d.has(i)){const g=o.saveState();this.h.$acceptChatState(i,g)}}catch(g){this.i.warn(g)}const f={firstProgress:l??0,totalElapsed:c.elapsed()};return{errorDetails:h.errorDetails?{...h.errorDetails,level:d}:h.errorDetails,timings:f}}async $provideApplyCodeSnipptReply(t,i,r,s){const n=this.b.get(t);if(!n)return;const o=this.d.get(i);if(!o)return;const a={session:o,message:r.message,variables:{},from:r.from,hashContext:r.hashContext};if(r.variables)for(const g of Object.keys(r.variables))a.variables[g]=r.variables[g].map(Xp.to);const c=ri.create(!1);let l;const u={report:g=>{if(s.isCancellationRequested)return;typeof l>"u"&&(l=c.elapsed());const v=Qp.from(n.extension,g);if("placeholder"in g&&"resolvedContent"in g){const y=Promise.all([this.h.$acceptResponseProgress(t,i,v),g.resolvedContent]);pn(y,s).then(S=>{if(!S)return;const[x,P]=S;this.h.$acceptResponseProgress(t,i,P,x??void 0)})}else this.h.$acceptResponseProgress(t,i,v)}};let h,d;try{this.j("Provide reply start"),h=await n.provider.provideApplyCodeSnipptResponseWithProgress(a,u,s),h||(h={errorDetails:{message:p(3009,null)}},d="error")}catch(g){h={errorDetails:{message:g.message,responseIsIncomplete:!0,errorDetailMessage:g?.detail||g.message,code:g.code}},g.level&&(d=g.level),this.i.error(g)}finally{this.j(`Provide reply end, result: ${JSON.stringify(h)}`)}try{if(o.saveState&&this.d.has(i)){const g=o.saveState();this.h.$acceptChatState(i,g)}}catch(g){this.i.warn(g)}const f={firstProgress:l??0,totalElapsed:c.elapsed()};return{errorDetails:h.errorDetails?{...h.errorDetails,level:d}:h.errorDetails,timings:f}}async $provideSlashCommands(t,i,r){const s=this.b.get(t);if(!s)return;const n=this.d.get(i);if(!n||!s.provider.provideSlashCommands)return;this.j("Provide slash commands start");const o=await s.provider.provideSlashCommands(n,r);return this.j("Provide slash commands end"),o?.map(a=>({...a,kind:Iu.from(a.kind)}))}$releaseSession(t){this.d.delete(t)}async $onDidPerformUserAction(t){this.g.fire(t)}j(t,...i){this.i.info(`[${this.k()}] ExtHostIcubeChat ${t}`,...i)}k(){const t=new Date;return[t.getFullYear(),t.getMonth()+1,t.getDate()].join("-")+" "+[t.getHours(),t.getMinutes(),t.getSeconds()].join(":")+"."+t.getMilliseconds()}$handleReportAction(t,i,r,s){const n=this.b.get(t);if(!n||!n.provider.reportAction)return;let o;typeof i<"u"&&(o=this.d.get(i)),n.provider.reportAction(o,r,{...s,insertCursorPosition:s.insertCursorPosition?Fe.to(s.insertCursorPosition):void 0})}async $provideBackgroundTaskStateReporter(t,i,r){const s=this.b.get(i);if(!s||!s.provider.provideBackgroundTaskStateReporter)return;const n={report:async a=>{await this.h.$acceptBackgroundTaskProgress(i,t,{repoName:a.repoName,building:a.buildingTask})}},o=Promise.resolve(s.provider.provideBackgroundTaskStateReporter(n,r));try{await pn(o,r)}catch(a){console.log(`progress reporter cancelled: ${a}`)}}};function iz(e){const t=e.get(Qt),i=e.get($a),r=e.get(qu),s=e.get(zs),n=e.get(Fr),o=e.get(lg),a=e.get(gr),c=e.get(bl),l=e.get(Ie),u=e.get(Pw),h=e.get(Aw),d=e.get(xa),f=e.get(Ce),g=e.get(ag),v=e.get(eh),y=e.get(X8),S=e.get(Qw),x=e.get($c),P=e.get(Zw),D=e.get(jw),N=e.get(Bw);l.set(Z.ExtHostFileSystemInfo,i),l.set(Z.ExtHostLogLevelServiceShape,d),l.set(Z.ExtHostWorkspace,n),l.set(Z.ExtHostConfiguration,a),l.set(Z.ExtHostExtensionService,s),l.set(Z.ExtHostStorage,u),l.set(Z.ExtHostTunnelService,g),l.set(Z.ExtHostWindow,y),l.set(Z.ExtHostSecretState,S),l.set(Z.ExtHostTelemetry,o),l.set(Z.ExtHostEditorTabs,x),l.set(Z.ExtHostManagedSockets,P),l.set(Z.ExtHostAuthentication,D),l.set(Z.ExtHostChatProvider,N);const H=l.set(Z.ExtHostDecorations,e.get(m8)),Y=l.set(Z.ExtHostDocumentsAndEditors,e.get(Vo)),B=l.set(Z.ExtHostCommands,e.get(rr)),M=l.set(Z.ExtHostTerminalService,e.get(Ws)),re=l.set(Z.ExtHostTerminalShellIntegration,e.get(Tb)),ae=l.set(Z.ExtHostDebugService,e.get(Cb)),fe=l.set(Z.ExtHostSearch,e.get(Db)),Je=l.set(Z.ExtHostTask,e.get(Sb)),G=l.set(Z.ExtHostOutputService,e.get(g8)),_=l.set(Z.ExtHostLocalization,e.get(Xw)),K=l.set(Z.ExtHostUrls,new _W(l)),W=l.set(Z.ExtHostDocuments,new rB(l,Y)),ne=l.set(Z.ExtHostDocumentContentProviders,new tB(l,Y,f)),ye=l.set(Z.ExtHostDocumentSaveParticipant,new iB(f,W,l.getProxy(q.MainThreadBulkEdits))),he=l.set(Z.ExtHostNotebook,new XB(l,B,Y,W,r,fe,f)),tt=l.set(Z.ExtHostNotebookDocuments,new KB(he)),Ze=l.set(Z.ExtHostNotebookEditors,new $y(f,he)),Mt=l.set(Z.ExtHostNotebookKernels,new Cy(l,t,he,B,f)),Nt=l.set(Z.ExtHostNotebookRenderers,new sW(l,he)),ii=l.set(Z.ExtHostNotebookDocumentSaveParticipant,new ZB(f,he,l.getProxy(q.MainThreadBulkEdits))),dt=l.set(Z.ExtHostEditors,new kW(l,Y)),gi=l.set(Z.ExtHostTreeViews,new FW(l.getProxy(q.MainThreadTreeViews),B,f)),rn=l.set(Z.ExtHostEditorInsets,new NH(l.getProxy(q.MainThreadEditorInsets),dt,t.remote)),ps=l.set(Z.ExtHostDiagnostics,new ry(l,f,i,Y)),Xn=l.set(Z.ExtHostLanguages,new PB(l,W,B.converter,c)),xe=l.set(Z.ExtHostLanguageFeatures,new $B(l,c,W,B,ps,f,v,o)),gs=l.set(Z.ExtHostCodeMapper,new GW(l)),qe=l.set(Z.ExtHostFileSystem,new uB(l,xe)),Wr=l.set(Z.ExtHostFileSystemEventService,new yB(l,f,Y)),nr=l.set(Z.ExtHostQuickOpen,lW(l,n,B)),or=l.set(Z.ExtHostSCM,new Ty(l,B,W,f)),na=l.set(Z.ExtHostQuickDiff,new cW(l,c)),oa=l.set(Z.ExtHostShare,new bW(l,c)),zc=l.set(Z.ExtHostComments,OH(l,B,W)),Vc=l.set(Z.ExtHostProgress,new oW(l.getProxy(q.MainThreadProgress))),qc=l.set(Z.ExtHostLabelService,new SB(l)),aa=l.set(Z.ExtHostTheming,new Ly(l)),ca=l.set(Z.ExtHostTimeline,new $W(l,B)),mi=l.set(Z.ExtHostWebviews,new zH(l,t.remote,n,f,v)),ms=l.set(Z.ExtHostWebviewPanels,new HW(l,mi,n)),xt=l.set(Z.ExtHostCustomEditors,new YH(l,W,h,mi,ms)),ui=l.set(Z.ExtHostWebviewViews,new zW(l,mi)),sn=l.set(Z.ExtHostTesting,e.get(oh)),Am=l.set(Z.ExtHostUriOpeners,new UW(l)),la=l.set(Z.ExtHostProfileContentHandlers,new nW(l));l.set(Z.ExtHostInteractive,new EB(l,he,Y,B,f));const nn=l.set(Z.ExtHostChatAgents2,new IH(l,f,B,W,N)),C=l.set(Z.ExtHostChatVariables,new DH(l)),L=l.set(Z.ExtHostLanguageModelTools,new IB(l)),F=l.set(Z.ExtHostAiRelatedInformation,new bH(l)),le=l.set(Z.ExtHostAiEmbeddingVector,new YW(l)),we=l.set(Z.ExtHostStatusBar,new xW(l,B.converter)),qt=l.set(Z.ExtHostSpeech,new yW(l)),_e=l.set(Z.ExtHostEmbeddings,new sB(l));l.set(Z.ExtHostICubeClientBridge,e.get(Nb));const yt=l.set(Z.ExtHostICubeEvent,new JW(l,B)),kt=l.set(Z.ExtHostICubeModularManager,new Pg(l)),Ut=l.set(Z.ExtHostICubeWebComponent,new QW(l,B)),ar=l.set(Z.ExtHostIcubeInlineChat,new KW(l,B,W,f)),gt=l.set(Z.ExtHostIcubeChat,new tz(l,f)),Kt=Object.values(Z);l.assertRegistered(Kt);const vi=new ty(l,Y),Ji=new RH(l),Ee=new fy(l,f),Re=new eB(l);return kH.register(B),function(k,Qe,_t){function ce(w){return(b,$,ve)=>{const Ke=w(jt=>{try{b.call($,jt)}catch(Gc){cr(new Error(`[ExtensionListenerError] Extension '${k.identifier.value}' FAILED to handle event: ${Gc.toString()}`,{cause:Gc})),o.onExtensionError(k.identifier,Gc)}});return ve?.push(Ke),Ke}}const je=function(){let w=!k.isUnderDevelopment;function b(){w||(f.info(`Extension '${k.identifier.value}' uses a document selector without scheme. Learn more about this: https://go.microsoft.com/fwlink/?linkid=872305`),w=!0)}return function $(ve){if(Array.isArray(ve))ve.forEach($);else if(typeof ve=="string")b();else{const Ke=ve;typeof Ke.scheme>"u"&&b(),typeof Ke.exclusive=="boolean"&&A(k,"documentFiltersExclusive")}return ve}}(),Zn={getSession(w,b,$){return typeof $?.forceNewSession=="object"&&$.forceNewSession.learnMore&&A(k,"authLearnMore"),D.getSession(k,w,b,$)},getAccounts(w){return D.getAccounts(w)},async hasSession(w,b){return A(k,"authSession"),!!await D.getSession(k,w,b,{silent:!0})},get onDidChangeSessions(){return ce(D.getExtensionScopedSessionsEvent(k.identifier.value))},registerAuthenticationProvider(w,b,$,ve){return D.registerAuthenticationProvider(w,b,$,ve)}},yP={registerCommand(w,b,$){return B.registerCommand(!0,w,b,$,void 0,k)},registerTextEditorCommand(w,b,$){return B.registerCommand(!0,w,(...ve)=>{const Ke=dt.getActiveTextEditor();if(!Ke){f.warn("Cannot execute "+w+" because there is no active text editor.");return}return Ke.edit(jt=>{b.apply($,[Ke,jt,...ve])}).then(jt=>{jt||f.warn("Edits from command "+w+" were not applied.")},jt=>{f.warn("An error occurred while running command "+w,jt)})},void 0,void 0,k)},registerDiffInformationCommand:(w,b,$)=>(A(k,"diffCommand"),B.registerCommand(!0,w,async(...ve)=>{const Ke=Y.activeEditor(!0);if(!Ke){f.warn("Cannot execute "+w+" because there is no active text editor.");return}const jt=await dt.getDiffInformation(Ke.id);b.apply($,[jt,...ve])},void 0,void 0,k)),executeCommand(w,...b){return B.executeCommand(w,...b)},getCommands(w=!1){return B.getCommands(w)}},O4={get machineId(){return t.telemetryInfo.machineId},get sessionId(){return t.telemetryInfo.sessionId},get language(){return t.environment.appLanguage},get appName(){return t.environment.appName},get appRoot(){return t.environment.appRoot?.fsPath??""},get appHost(){return t.environment.appHost},get uriScheme(){return t.environment.appUriScheme},get clipboard(){return Ji.value},get shell(){return M.getDefaultShell(!1)},get onDidChangeShell(){return ce(M.onDidChangeShell)},get isTelemetryEnabled(){return o.getTelemetryConfiguration()},get onDidChangeTelemetryEnabled(){return ce(o.onDidChangeTelemetryEnabled)},get telemetryConfiguration(){return A(k,"telemetry"),o.getTelemetryDetails()},get onDidChangeTelemetryConfiguration(){return A(k,"telemetry"),ce(o.onDidChangeTelemetryConfiguration)},get isNewAppInstall(){return Ik(t.telemetryInfo.firstSessionDate)},createTelemetryLogger(w,b){return Ck.validateSender(w),o.instantiateLogger(k,w,b)},openExternal(w,b){return y.openUri(w,{allowTunneling:!!t.remote.authority,allowContributedOpeners:b?.allowContributedOpeners})},async asExternalUri(w){if(w.scheme===t.environment.appUriScheme)return K.createAppUri(w);try{return await y.asExternalUri(w,{allowTunneling:!!t.remote.authority})}catch(b){if(e1(w,z.http)||e1(w,z.https))return w;throw b}},get remoteName(){return hv(t.remote.authority)},get remoteAuthority(){return A(k,"resolvers"),t.remote.authority},get uiKind(){return t.uiKind},get logLevel(){return f.getLevel()},get onDidChangeLogLevel(){return ce(f.onDidChangeLogLevel)},get appQuality(){return A(k,"resolvers"),t.quality},get appCommit(){return A(k,"resolvers"),t.commit}};t.environment.extensionTestsLocationURI||Object.freeze(O4);const EP={createTestController(w,b,$){return sn.createTestController(k,w,b,$)},createTestObserver(){return A(k,"testObserver"),sn.createTestObserver()},runTests(w){return A(k,"testObserver"),sn.runTests(w)},registerTestFollowupProvider(w){return A(k,"testObserver"),sn.registerTestFollowupProvider(w)},get onDidChangeTestResults(){return A(k,"testObserver"),ce(sn.onResultsChanged)},get testResults(){return A(k,"testObserver"),sn.results}},Fh=t.remote.isRemote?Oo.Workspace:Oo.UI,SP={getExtension(w,b){Yt(k,"extensionsAny")||(b=!1);const $=Qe.mine.getExtensionDescription(w);if($)return new Xu(s,k.identifier,$,Fh,!1);if(b){const ve=Qe.all.getExtensionDescription(w);if(ve)return new Xu(s,k.identifier,ve,Fh,!0)}},get all(){const w=[];for(const b of Qe.mine.getAllExtensionDescriptions())w.push(new Xu(s,k.identifier,b,Fh,!1));return w},get allAcrossExtensionHosts(){A(k,"extensionsAny");const w=new bo(Qe.mine.getAllExtensionDescriptions().map($=>$.identifier)),b=[];for(const $ of Qe.all.getAllExtensionDescriptions()){const ve=!w.has($.identifier);b.push(new Xu(s,k.identifier,$,Fh,ve))}return b},get onDidChange(){return Yt(k,"extensionsAny")?ze.any(Qe.mine.onDidChange,Qe.all.onDidChange):Qe.mine.onDidChange}},xP={createDiagnosticCollection(w){return ps.createDiagnosticCollection(k.identifier,w)},get onDidChangeDiagnostics(){return ce(ps.onDidChangeDiagnostics)},getDiagnostics:w=>ps.getDiagnostics(w),getLanguages(){return Xn.getLanguages()},setTextDocumentLanguage(w,b){return Xn.changeLanguage(w.uri,b)},match(w,b){const $=X0.from(w);let ve;return F$($)&&(ve=he.notebookDocuments.find(Ke=>Ke.apiNotebook.getCells().find(jt=>jt.document===b))?.apiNotebook),O$($,b.uri,b.languageId,!0,ve?.uri,ve?.notebookType)},registerCodeActionsProvider(w,b,$){return xe.registerCodeActionProvider(k,je(w),b,$)},registerDocumentPasteEditProvider(w,b,$){return A(k,"documentPaste"),xe.registerDocumentPasteEditProvider(k,je(w),b,$)},registerCodeLensProvider(w,b){return xe.registerCodeLensProvider(k,je(w),b)},registerDefinitionProvider(w,b){return xe.registerDefinitionProvider(k,je(w),b)},registerDeclarationProvider(w,b){return xe.registerDeclarationProvider(k,je(w),b)},registerImplementationProvider(w,b){return xe.registerImplementationProvider(k,je(w),b)},registerTypeDefinitionProvider(w,b){return xe.registerTypeDefinitionProvider(k,je(w),b)},registerHoverProvider(w,b){return xe.registerHoverProvider(k,je(w),b,k.identifier)},registerEvaluatableExpressionProvider(w,b){return xe.registerEvaluatableExpressionProvider(k,je(w),b,k.identifier)},registerInlineValuesProvider(w,b){return xe.registerInlineValuesProvider(k,je(w),b,k.identifier)},registerDocumentHighlightProvider(w,b){return xe.registerDocumentHighlightProvider(k,je(w),b)},registerMultiDocumentHighlightProvider(w,b){return xe.registerMultiDocumentHighlightProvider(k,je(w),b)},registerLinkedEditingRangeProvider(w,b){return xe.registerLinkedEditingRangeProvider(k,je(w),b)},registerReferenceProvider(w,b){return xe.registerReferenceProvider(k,je(w),b)},registerRenameProvider(w,b){return xe.registerRenameProvider(k,je(w),b)},registerNewSymbolNamesProvider(w,b){return A(k,"newSymbolNamesProvider"),xe.registerNewSymbolNamesProvider(k,je(w),b)},registerDocumentSymbolProvider(w,b,$){return xe.registerDocumentSymbolProvider(k,je(w),b,$)},registerWorkspaceSymbolProvider(w){return xe.registerWorkspaceSymbolProvider(k,w)},registerDocumentFormattingEditProvider(w,b){return xe.registerDocumentFormattingEditProvider(k,je(w),b)},registerDocumentRangeFormattingEditProvider(w,b){return xe.registerDocumentRangeFormattingEditProvider(k,je(w),b)},registerOnTypeFormattingEditProvider(w,b,$,...ve){return xe.registerOnTypeFormattingEditProvider(k,je(w),b,[$].concat(ve))},registerDocumentSemanticTokensProvider(w,b,$){return xe.registerDocumentSemanticTokensProvider(k,je(w),b,$)},registerDocumentRangeSemanticTokensProvider(w,b,$){return xe.registerDocumentRangeSemanticTokensProvider(k,je(w),b,$)},registerSignatureHelpProvider(w,b,$,...ve){return typeof $=="object"?xe.registerSignatureHelpProvider(k,je(w),b,$):xe.registerSignatureHelpProvider(k,je(w),b,typeof $>"u"?[]:[$,...ve])},registerCompletionItemProvider(w,b,...$){return xe.registerCompletionItemProvider(k,je(w),b,$)},registerInlineCompletionItemProvider(w,b,$){return b.handleDidShowCompletionItem&&A(k,"inlineCompletionsAdditions"),b.handleDidPartiallyAcceptCompletionItem&&A(k,"inlineCompletionsAdditions"),$&&A(k,"inlineCompletionsAdditions"),xe.registerInlineCompletionsProvider(k,je(w),b,$)},registerInlineEditProvider(w,b){return A(k,"inlineEdit"),xe.registerInlineEditProvider(k,je(w),b)},registerDocumentLinkProvider(w,b){return xe.registerDocumentLinkProvider(k,je(w),b)},registerColorProvider(w,b){return xe.registerColorProvider(k,je(w),b)},registerFoldingRangeProvider(w,b){return xe.registerFoldingRangeProvider(k,je(w),b)},registerSelectionRangeProvider(w,b){return xe.registerSelectionRangeProvider(k,w,b)},registerCallHierarchyProvider(w,b){return xe.registerCallHierarchyProvider(k,w,b)},registerTypeHierarchyProvider(w,b){return xe.registerTypeHierarchyProvider(k,w,b)},setLanguageConfiguration:(w,b)=>xe.setLanguageConfiguration(k,w,b),getTokenInformationAtPosition(w,b){return A(k,"tokenInformation"),Xn.tokenAtPosition(w,b)},registerInlayHintsProvider(w,b){return xe.registerInlayHintsProvider(k,w,b)},createLanguageStatusItem(w,b){return Xn.createLanguageStatusItem(k,w,b)},registerDocumentDropEditProvider(w,b,$){return xe.registerDocumentOnDropEditProvider(k,w,b,Yt(k,"documentPaste")?$:void 0)}},kP={get activeTextEditor(){return dt.getActiveTextEditor()},get visibleTextEditors(){return dt.getVisibleTextEditors()},get activeTerminal(){return M.activeTerminal},get terminals(){return M.terminals},async showTextDocument(w,b,$){E.isUri(w)&&w.scheme===z.vscodeRemote&&!w.authority&&v.report("workspace.showTextDocument",k,"A URI of 'vscode-remote' scheme requires an authority.");const ve=await(E.isUri(w)?Promise.resolve(F4.openTextDocument(w)):Promise.resolve(w));return dt.showTextDocument(ve,b,$)},createTextEditorDecorationType(w){return dt.createTextEditorDecorationType(k,w)},onDidChangeActiveTextEditor(w,b,$){return ce(dt.onDidChangeActiveTextEditor)(w,b,$)},onDidChangeVisibleTextEditors(w,b,$){return ce(dt.onDidChangeVisibleTextEditors)(w,b,$)},onDidChangeTextEditorSelection(w,b,$){return ce(dt.onDidChangeTextEditorSelection)(w,b,$)},onDidChangeTextEditorOptions(w,b,$){return ce(dt.onDidChangeTextEditorOptions)(w,b,$)},onDidChangeTextEditorVisibleRanges(w,b,$){return ce(dt.onDidChangeTextEditorVisibleRanges)(w,b,$)},onDidChangeTextEditorViewColumn(w,b,$){return ce(dt.onDidChangeTextEditorViewColumn)(w,b,$)},onDidCloseTerminal(w,b,$){return ce(M.onDidCloseTerminal)(w,b,$)},onDidOpenTerminal(w,b,$){return ce(M.onDidOpenTerminal)(w,b,$)},onDidChangeActiveTerminal(w,b,$){return ce(M.onDidChangeActiveTerminal)(w,b,$)},onDidChangeTerminalDimensions(w,b,$){return A(k,"terminalDimensions"),ce(M.onDidChangeTerminalDimensions)(w,b,$)},onDidChangeTerminalState(w,b,$){return ce(M.onDidChangeTerminalState)(w,b,$)},onDidWriteTerminalData(w,b,$){return A(k,"terminalDataWriteEvent"),ce(M.onDidWriteTerminalData)(w,b,$)},onDidExecuteTerminalCommand(w,b,$){return A(k,"terminalExecuteCommandEvent"),ce(M.onDidExecuteTerminalCommand)(w,b,$)},onDidChangeTerminalShellIntegration(w,b,$){return ce(re.onDidChangeTerminalShellIntegration)(w,b,$)},onDidStartTerminalShellExecution(w,b,$){return ce(re.onDidStartTerminalShellExecution)(w,b,$)},onDidEndTerminalShellExecution(w,b,$){return ce(re.onDidEndTerminalShellExecution)(w,b,$)},get state(){return y.getState()},onDidChangeWindowState(w,b,$){return ce(y.onDidChangeWindowState)(w,b,$)},showInformationMessage(w,...b){return Ee.showMessage(k,Lt.Info,w,b[0],b.slice(1))},showWarningMessage(w,...b){return Ee.showMessage(k,Lt.Warning,w,b[0],b.slice(1))},showErrorMessage(w,...b){return Ee.showMessage(k,Lt.Error,w,b[0],b.slice(1))},showQuickPick(w,b,$){return nr.showQuickPick(k,w,b,$)},showWorkspaceFolderPick(w){return nr.showWorkspaceFolderPick(w)},showInputBox(w,b){return nr.showInput(w,b)},showOpenDialog(w){return Re.showOpenDialog(k,w)},showSaveDialog(w){return Re.showSaveDialog(w)},createStatusBarItem(w,b,$){let ve,Ke,jt;return typeof w=="string"?(ve=w,Ke=b,jt=$):(Ke=w,jt=b),we.createStatusBarEntry(k,ve,Ke,jt)},setStatusBarMessage(w,b){return we.setStatusBarMessage(w,b)},withScmProgress(w){return v.report("window.withScmProgress",k,"Use 'withProgress' instead."),Vc.withProgress(k,{location:Ro.SourceControl},(b,$)=>w({report(ve){}}))},withProgress(w,b){return Vc.withProgress(k,w,b)},createOutputChannel(w,b){return G.createOutputChannel(w,b,k)},createWebviewPanel(w,b,$,ve){return ms.createWebviewPanel(k,w,b,$,ve)},createWebviewTextEditorInset(w,b,$,ve){return A(k,"editorInsets"),rn.createWebviewEditorInset(w,b,$,ve,k)},createTerminal(w,b,$){return typeof w=="object"?"pty"in w?M.createExtensionTerminal(w):M.createTerminalFromOptions(w):M.createTerminal(w,b,$)},registerTerminalLinkProvider(w){return M.registerLinkProvider(w)},registerTerminalProfileProvider(w,b){return M.registerProfileProvider(k,w,b)},registerTerminalQuickFixProvider(w,b){return A(k,"terminalQuickFixProvider"),M.registerTerminalQuickFixProvider(w,k.identifier.value,b)},registerTreeDataProvider(w,b){return gi.registerTreeDataProvider(w,b,k)},createTreeView(w,b){return gi.createTreeView(w,b,k)},registerWebviewPanelSerializer:(w,b)=>ms.registerWebviewPanelSerializer(k,w,b),registerCustomEditorProvider:(w,b,$={})=>xt.registerCustomEditorProvider(k,w,b,$),registerFileDecorationProvider(w){return H.registerFileDecorationProvider(w,k)},registerUriHandler(w){return K.registerUriHandler(k,w)},createQuickPick(){return nr.createQuickPick(k)},createInputBox(){return nr.createInputBox(k)},get activeColorTheme(){return aa.activeColorTheme},onDidChangeActiveColorTheme(w,b,$){return ce(aa.onDidChangeActiveColorTheme)(w,b,$)},registerWebviewViewProvider(w,b,$){return ui.registerWebviewViewProvider(k,w,b,$?.webviewOptions)},get activeNotebookEditor(){return he.activeNotebookEditor},onDidChangeActiveNotebookEditor(w,b,$){return ce(he.onDidChangeActiveNotebookEditor)(w,b,$)},get visibleNotebookEditors(){return he.visibleNotebookEditors},get onDidChangeVisibleNotebookEditors(){return ce(he.onDidChangeVisibleNotebookEditors)},onDidChangeNotebookEditorSelection(w,b,$){return ce(Ze.onDidChangeNotebookEditorSelection)(w,b,$)},onDidChangeNotebookEditorVisibleRanges(w,b,$){return ce(Ze.onDidChangeNotebookEditorVisibleRanges)(w,b,$)},showNotebookDocument(w,b){return he.showNotebookDocument(w,b)},registerExternalUriOpener(w,b,$){return A(k,"externalUriOpener"),Am.registerExternalUriOpener(k.identifier,w,b,$)},registerProfileContentHandler(w,b){return A(k,"profileContentHandlers"),la.registerProfileContentHandler(k,w,b)},registerQuickDiffProvider(w,b,$,ve){return A(k,"quickDiffProvider"),na.registerQuickDiffProvider(je(w),b,$,ve)},get tabGroups(){return x.tabGroups},registerShareProvider(w,b){return A(k,"shareProvider"),oa.registerShareProvider(je(w),b)}},F4={get id(){return n.getWorkspaceId()},get rootPath(){return v.report("workspace.rootPath",k,"Please use 'workspace.workspaceFolders' instead. More details: https://aka.ms/vscode-eliminating-rootpath"),n.getPath()},set rootPath(w){throw new Kn("rootPath")},getWorkspaceFolder(w){return n.getWorkspaceFolder(w)},get workspaceFolders(){return n.getWorkspaceFolders()},get name(){return n.name},set name(w){throw new Kn("name")},get workspaceFile(){return n.workspaceFile},set workspaceFile(w){throw new Kn("workspaceFile")},updateWorkspaceFolders:(w,b,...$)=>n.updateWorkspaceFolders(k,w,b||0,...$),onDidChangeWorkspaceFolders:function(w,b,$){return ce(n.onDidChangeWorkspace)(w,b,$)},asRelativePath:(w,b)=>n.getRelativePath(w,b),findFiles:(w,b,$,ve)=>n.findFiles(w,b,$,k.identifier,ve),findFiles2:(w,b,$)=>(A(k,"findFiles2"),n.findFiles2(w,b,k.identifier,$)),findFiles2New:(w,b,$)=>(A(k,"findFiles2New"),n.findFiles2New(w,b,k.identifier,$)),findTextInFiles:(w,b,$,ve)=>{A(k,"findTextInFiles");let Ke,jt;return typeof b=="object"?(Ke=b,jt=$):(Ke={},jt=b,ve=$),n.findTextInFiles(w,Ke||{},jt,k.identifier,ve)},findTextInFilesNew:(w,b,$)=>(A(k,"findTextInFilesNew"),A(k,"textSearchProviderNew"),n.findTextInFilesNew(w,b,k.identifier,$)),save:w=>n.save(w),saveAs:w=>n.saveAs(w),saveAll:w=>n.saveAll(w),applyEdit(w,b){return vi.applyWorkspaceEdit(w,k,b)},createFileSystemWatcher:(w,b,$,ve)=>{let Ke;return b&&typeof b!="boolean"?(A(k,"createFileSystemWatcher"),Ke={...b,correlate:!0}):Ke={ignoreCreateEvents:!!b,ignoreChangeEvents:!!$,ignoreDeleteEvents:!!ve,correlate:!1},Wr.createFileSystemWatcher(n,_t,k,w,Ke)},get textDocuments(){return W.getAllDocumentData().map(w=>w.document)},set textDocuments(w){throw new Kn("textDocuments")},openTextDocument(w){let b;const $=w;if(typeof w=="string")b=Promise.resolve(E.file(w));else if(E.isUri(w))b=Promise.resolve(w);else if(!$||typeof $=="object")b=W.createDocumentData($);else throw new Error("illegal argument - uriOrFileNameOrOptions");return b.then(ve=>(f.trace(`openTextDocument from ${k.identifier}`),ve.scheme===z.vscodeRemote&&!ve.authority&&v.report("workspace.openTextDocument",k,"A URI of 'vscode-remote' scheme requires an authority."),W.ensureDocumentData(ve).then(Ke=>Ke.document)))},onDidOpenTextDocument:(w,b,$)=>ce(W.onDidAddDocument)(w,b,$),onDidCloseTextDocument:(w,b,$)=>ce(W.onDidRemoveDocument)(w,b,$),onDidChangeTextDocument:(w,b,$)=>ce(W.onDidChangeDocument)(w,b,$),onDidSaveTextDocument:(w,b,$)=>ce(W.onDidSaveDocument)(w,b,$),onWillSaveTextDocument:(w,b,$)=>ce(ye.getOnWillSaveTextDocumentEvent(k))(w,b,$),get notebookDocuments(){return he.notebookDocuments.map(w=>w.apiNotebook)},async openNotebookDocument(w,b){let $;if(E.isUri(w))$=w,await he.openNotebookDocument(w);else if(typeof w=="string")$=E.revive(await he.createNotebookDocument({viewType:w,content:b}));else throw new Error("Invalid arguments");return he.getNotebookDocument($).apiNotebook},onDidSaveNotebookDocument(w,b,$){return ce(tt.onDidSaveNotebookDocument)(w,b,$)},onDidChangeNotebookDocument(w,b,$){return ce(tt.onDidChangeNotebookDocument)(w,b,$)},onWillSaveNotebookDocument(w,b,$){return ce(ii.getOnWillSaveNotebookDocumentEvent(k))(w,b,$)},get onDidOpenNotebookDocument(){return ce(he.onDidOpenNotebookDocument)},get onDidCloseNotebookDocument(){return ce(he.onDidCloseNotebookDocument)},registerNotebookSerializer(w,b,$,ve){return he.registerNotebookSerializer(k,w,b,$,Yt(k,"notebookLiveShare")?ve:void 0)},onDidChangeConfiguration:(w,b,$)=>ce(_t.onDidChangeConfiguration)(w,b,$),getConfiguration(w,b){return b=arguments.length===1?void 0:b,_t.getConfiguration(w,b,k)},registerTextDocumentContentProvider(w,b){return ne.registerTextDocumentContentProvider(w,b)},registerTaskProvider:(w,b)=>(v.report("window.registerTaskProvider",k,"Use the corresponding function on the 'tasks' namespace instead"),Je.registerTaskProvider(k,w,b)),registerFileSystemProvider(w,b,$){return J4(qe.registerFileSystemProvider(k,w,b,$),r.addFileSystemProvider(w,b,$))},get fs(){return r.value},registerFileSearchProvider:(w,b)=>(A(k,"fileSearchProvider"),fe.registerFileSearchProviderOld(w,b)),registerTextSearchProvider:(w,b)=>(A(k,"textSearchProvider"),fe.registerTextSearchProviderOld(w,b)),registerAITextSearchProvider:(w,b)=>(A(k,"aiTextSearchProvider"),A(k,"textSearchProvider"),fe.registerAITextSearchProviderOld(w,b)),registerFileSearchProviderNew:(w,b)=>(A(k,"fileSearchProviderNew"),fe.registerFileSearchProvider(w,b)),registerTextSearchProviderNew:(w,b)=>(A(k,"textSearchProviderNew"),fe.registerTextSearchProvider(w,b)),registerAITextSearchProviderNew:(w,b)=>(A(k,"aiTextSearchProviderNew"),A(k,"textSearchProviderNew"),fe.registerAITextSearchProvider(w,b)),registerRemoteAuthorityResolver:(w,b)=>(A(k,"resolvers"),s.registerRemoteAuthorityResolver(w,b)),registerResourceLabelFormatter:w=>(A(k,"resolvers"),qc.$registerResourceLabelFormatter(w)),getRemoteExecServer:w=>(A(k,"resolvers"),s.getRemoteExecServer(w)),onDidCreateFiles:(w,b,$)=>ce(Wr.onDidCreateFile)(w,b,$),onDidDeleteFiles:(w,b,$)=>ce(Wr.onDidDeleteFile)(w,b,$),onDidRenameFiles:(w,b,$)=>ce(Wr.onDidRenameFile)(w,b,$),onWillCreateFiles:(w,b,$)=>ce(Wr.getOnWillCreateFileEvent(k))(w,b,$),onWillDeleteFiles:(w,b,$)=>ce(Wr.getOnWillDeleteFileEvent(k))(w,b,$),onWillRenameFiles:(w,b,$)=>ce(Wr.getOnWillRenameFileEvent(k))(w,b,$),openTunnel:w=>(A(k,"tunnels"),g.openTunnel(k,w).then(b=>{if(!b)throw new Error("cannot open tunnel");return b})),get tunnels(){return A(k,"tunnels"),g.getTunnels()},onDidChangeTunnels:(w,b,$)=>(A(k,"tunnels"),ce(g.onDidChangeTunnels)(w,b,$)),registerPortAttributesProvider:(w,b)=>(A(k,"portsAttributes"),g.registerPortsAttributesProvider(w,b)),registerTunnelProvider:(w,b)=>(A(k,"tunnelFactory"),g.registerTunnelProvider(w,b)),registerTimelineProvider:(w,b)=>(A(k,"timeline"),ca.registerTimelineProvider(w,b,k.identifier,B.converter)),get isTrusted(){return n.trusted},requestWorkspaceTrust:w=>(A(k,"workspaceTrust"),n.requestWorkspaceTrust(w)),onDidGrantWorkspaceTrust:(w,b,$)=>ce(n.onDidGrantWorkspaceTrust)(w,b,$),registerEditSessionIdentityProvider:(w,b)=>(A(k,"editSessionIdentityProvider"),n.registerEditSessionIdentityProvider(w,b)),onWillCreateEditSessionIdentity:(w,b,$)=>(A(k,"editSessionIdentityProvider"),ce(n.getOnWillCreateEditSessionIdentityEvent(k))(w,b,$)),registerCanonicalUriProvider:(w,b)=>(A(k,"canonicalUriProvider"),n.registerCanonicalUriProvider(w,b)),getCanonicalUri:(w,b,$)=>(A(k,"canonicalUriProvider"),n.provideCanonicalUri(w,b,$)),registerICubeFolderSearchProvider:(w,b)=>(A(k,"fileSearchProvider"),fe.registerFolderSearchProvider(w,b))},$P={get inputBox(){return v.report("scm.inputBox",k,"Use 'SourceControl.inputBox' instead"),or.getLastInputBox(k)},createSourceControl(w,b,$){return or.createSourceControl(k,w,b,$)}},CP={createCommentController(w,b){return zc.createCommentController(k,w,b)}},IP={get activeDebugSession(){return ae.activeDebugSession},get activeDebugConsole(){return ae.activeDebugConsole},get breakpoints(){return ae.breakpoints},get activeStackItem(){return ae.activeStackItem},registerDebugVisualizationProvider(w,b){return A(k,"debugVisualization"),ae.registerDebugVisualizationProvider(k,w,b)},registerDebugVisualizationTreeProvider(w,b){return A(k,"debugVisualization"),ae.registerDebugVisualizationTree(k,w,b)},onDidStartDebugSession(w,b,$){return ce(ae.onDidStartDebugSession)(w,b,$)},onDidTerminateDebugSession(w,b,$){return ce(ae.onDidTerminateDebugSession)(w,b,$)},onDidChangeActiveDebugSession(w,b,$){return ce(ae.onDidChangeActiveDebugSession)(w,b,$)},onDidReceiveDebugSessionCustomEvent(w,b,$){return ce(ae.onDidReceiveDebugSessionCustomEvent)(w,b,$)},onDidChangeBreakpoints(w,b,$){return ce(ae.onDidChangeBreakpoints)(w,b,$)},onDidChangeActiveStackItem(w,b,$){return ce(ae.onDidChangeActiveStackItem)(w,b,$)},registerDebugConfigurationProvider(w,b,$){return ae.registerDebugConfigurationProvider(w,b,$||rm.Initial)},registerDebugAdapterDescriptorFactory(w,b){return ae.registerDebugAdapterDescriptorFactory(k,w,b)},registerDebugAdapterTrackerFactory(w,b){return ae.registerDebugAdapterTrackerFactory(w,b)},startDebugging(w,b,$){return!$||typeof $=="object"&&"configuration"in $?ae.startDebugging(w,b,{parentSession:$}):ae.startDebugging(w,b,$||{})},stopDebugging(w){return ae.stopDebugging(w)},addBreakpoints(w){return ae.addBreakpoints(w)},removeBreakpoints(w){return ae.removeBreakpoints(w)},asDebugSourceUri(w,b){return ae.asDebugSourceUri(w,b)}},PP={registerTaskProvider:(w,b)=>Je.registerTaskProvider(k,w,b),fetchTasks:w=>Je.fetchTasks(w),executeTask:w=>Je.executeTask(k,w),get taskExecutions(){return Je.taskExecutions},onDidStartTask:(w,b,$)=>ce(Je.onDidStartTask)(w,b,$),onDidEndTask:(w,b,$)=>ce(Je.onDidEndTask)(w,b,$),onDidStartTaskProcess:(w,b,$)=>ce(Je.onDidStartTaskProcess)(w,b,$),onDidEndTaskProcess:(w,b,$)=>ce(Je.onDidEndTaskProcess)(w,b,$)},DP={createNotebookController(w,b,$,ve,Ke){return Mt.createNotebookController(k,w,b,$,ve,Yt(k,"notebookMessaging")?Ke:void 0)},registerNotebookCellStatusBarItemProvider:(w,b)=>he.registerNotebookCellStatusBarItemProvider(k,w,b),createRendererMessaging(w){return Nt.createRendererMessaging(k,w)},createNotebookControllerDetectionTask(w){return A(k,"notebookKernelSource"),Mt.createNotebookControllerDetectionTask(k,w)},registerKernelSourceActionProvider(w,b){return A(k,"notebookKernelSource"),Mt.registerKernelSourceActionProvider(k,w,b)},onDidChangeNotebookCellExecutionState(w,b,$){return A(k,"notebookCellExecutionState"),ce(Mt.onDidChangeNotebookCellExecutionState)(w,b,$)}},AP={t(...w){if(typeof w[0]=="string"){const b=w.shift(),$=!w||typeof w[0]!="object"?w:w[0];return _.getMessage(k.identifier.value,{message:b,args:$})}return _.getMessage(k.identifier.value,w[0])},get bundle(){return _.getBundle(k.identifier.value)},get uri(){return _.getBundleUri(k.identifier.value)}},RP={transferActiveChat(w){return A(k,"interactive"),nn.transferActiveChat(w)}},TP={getRelatedInformation(w,b){return A(k,"aiRelatedInformation"),F.getRelatedInformation(k,w,b)},registerRelatedInformationProvider(w,b){return A(k,"aiRelatedInformation"),F.registerRelatedInformationProvider(k,w,b)},registerEmbeddingVectorProvider(w,b){return A(k,"aiRelatedInformation"),le.registerEmbeddingVectorProvider(k,w,b)}},LP={registerChatResponseProvider(w,b,$){return A(k,"chatProvider"),N.registerLanguageModel(k,w,b,$)},registerChatVariableResolver(w,b,$,ve,Ke,jt,Gc,FP){return A(k,"chatVariableResolver"),C.registerVariableResolver(k,w,b,$,ve,Ke,jt,Gc,FP?.id)},registerMappedEditsProvider(w,b){return A(k,"mappedEditsProvider"),xe.registerMappedEditsProvider(k,w,b)},registerMappedEditsProvider2(w){return A(k,"mappedEditsProvider"),gs.registerMappedEditsProvider(k,w)},createChatParticipant(w,b){return nn.createChatAgent(k,w,b)},createDynamicChatParticipant(w,b,$){return A(k,"chatParticipantPrivate"),nn.createDynamicChatAgent(k,w,b,$)},registerChatParticipantDetectionProvider(w){return A(k,"chatParticipantAdditions"),nn.registerChatParticipantDetectionProvider(k,w)}},NP={selectChatModels:w=>N.selectLanguageModels(k,w??{}),onDidChangeChatModels:(w,b,$)=>N.onDidChangeProviders(w,b,$),registerChatModelProvider:(w,b,$)=>(A(k,"chatProvider"),N.registerLanguageModel(k,w,b,$)),get embeddingModels(){return A(k,"embeddings"),_e.embeddingsModels},onDidChangeEmbeddingModels:(w,b,$)=>(A(k,"embeddings"),_e.onDidChange(w,b,$)),registerEmbeddingsProvider(w,b){return A(k,"embeddings"),_e.registerEmbeddingsProvider(k,w,b)},async computeEmbeddings(w,b,$){return A(k,"embeddings"),_e.computeEmbeddings(w,b,$)},registerTool(w,b){return L.registerTool(k,w,b)},invokeTool(w,b,$){return L.invokeTool(w,b,$)},get tools(){return L.tools},fileIsIgnored(w,b){return N.fileIsIgnored(k,w,b)},registerIgnoredFileProvider(w){return N.registerIgnoredFileProvider(k,w)}},OP={registerSpeechProvider(w,b){return A(k,"speech"),qt.registerProvider(k.identifier,w,b)}};return{icube:{initInfo:{devSpace:Cs.devSpaceInfo,tokens:Cs.iCubeApp?.tokens,projectInfo:Cs.iCubeApp?.projectInfo,envInfo:Cs.iCubeApp?.envInfo,config:{helpExtensionUrl:Cs.helpExtensionUrl}},defineComponent(w,b={}){return A(k,"icube"),Ut.defineComponent(w,b,k)},openModal(w){return A(k,"icube"),Ut.openModal(w)},addIcubeComponentInTitleCenter(w,b){return A(k,"icube"),Ut.addIcubeComponentInTitleCenter(w,b)},toast(w){return console.log(kt),A(k,"icube"),Ut.toast(w)},getWebSocketRpcClient(w,b){return kt.makeRPCClient(w,b)},onDidChangeUserInfo(w){return yt.onDidChangeUserInfoEvent(w)},onUninstallExtension(w){return yt.onUninstallExtension(w)},onDidUninstallExtension(w){return yt.onDidUninstallExtension(w)},onWebviewEditorsChange(w){return yt.onWebviewEditorsChange(w)},onDidCommonParamsChange(w){return yt.onDidCommonParamsChange(w)}},icubeUser:{get onLogin(){return yt.onUserLoginEvent},get onLogout(){return yt.onUserLogoutEvent}},ICubeUserRegion:Ny,icubeInteractive:{_version:1,registerInteractiveEditorSessionProvider(w,b){return A(k,"icubeInteractive"),ar.registerProvider(k,w,b={label:b?.label??k.displayName??k.name,scene:b?.scene})},registerInteractiveSessionProvider(w,b){return A(k,"icubeInteractive"),gt.registerChatProvider(k,w,b)},sendInteractiveRequestToProvider(w,b){return A(k,"icubeInteractive"),gt.sendInteractiveRequestToProvider(w,b)},async getAIConfig(w){return A(k,"icubeInteractive"),w?gt.getICubeAIConfig(w):gt.getICubeAIConfig()},get onDidPerformUserAction(){return gt.onDidPerformUserAction},onDidReceiveEvent(w,b,$){return yt.onInlineCompletionEvent(w,b,$)},showMultiEditResult(w){yt.showMultiEditResult(w)},hideMultiEditResult(){yt.hideMultiEditResult()},onDidChangeLastSyncTime(w){return yt.onDidChangeLastSyncTimeEvent(w)}},IcubeInteractiveChatActionType:D0,IcubeInteractiveEditorSessionProviderMetadataSceneEnum:pp,ChatMessage:QF,ChatMessageRole:O0,ChatOpenViewSource:A0,IcubeInteractiveInlineChatActionType:P0,InlineChatOpenViewSource:R0,InteractiveSessionCopyKind:L0,ChatAgentResultFeedbackKind:N0,version:t.version,ai:TP,authentication:Zn,commands:yP,comments:CP,chat:LP,debug:IP,env:O4,extensions:SP,interactive:RP,l10n:AP,languages:xP,lm:NP,notebooks:DP,scm:$P,speech:OP,tasks:PP,tests:EP,window:kP,workspace:F4,Breakpoint:Qa,TerminalOutputAnchor:Tv,ChatResultFeedbackKind:mu,ChatVariableLevel:Fs,ChatCompletionItem:GF,CallHierarchyIncomingCall:nx,CallHierarchyItem:Ov,CallHierarchyOutgoingCall:ox,CancellationError:ki,CancellationTokenSource:lt,CandidatePortSource:w1,CodeAction:Cf,CodeActionKind:bt,CodeActionTriggerKind:Jl,CodeLens:If,Color:Va,ColorInformation:Lf,ColorPresentation:Nf,ColorThemeKind:An,CommentMode:i0,CommentState:r0,CommentThreadCollapsibleState:ou,CommentThreadState:au,CommentThreadApplicability:cu,CommentThreadFocus:lu,CompletionItem:Af,CompletionItemKind:pe,CompletionItemTag:Yl,CompletionList:Ha,CompletionTriggerKind:ja,ConfigurationTarget:Ga,CustomExecution:Qv,DebugAdapterExecutable:Ya,DebugAdapterInlineImplementation:ru,DebugAdapterNamedPipeServer:iu,DebugAdapterServer:Xa,DebugConfigurationProviderTriggerKind:rm,DebugConsoleMode:Gf,DebugVisualization:HF,DecorationRangeBehavior:Do,Diagnostic:Ef,DiagnosticRelatedInformation:Wl,DiagnosticSeverity:li,DiagnosticTag:Io,Disposable:Oe,DocumentHighlight:kf,DocumentHighlightKind:zl,MultiDocumentHighlight:$f,DocumentLink:Tf,DocumentSymbol:Gl,EndOfLine:Lr,EnvironmentVariableMutatorType:Ua,EvaluatableExpression:Bf,InlineValueText:Wf,InlineValueVariableLookup:zf,InlineValueEvaluatableExpression:Vf,InlineCompletionTriggerKind:su,EventEmitter:I,ExtensionKind:Oo,ExtensionMode:ic,ExternalUriOpenerPriority:u0,FileChangeType:Za,FileDecoration:o0,FileDecoration2:o0,FileSystemError:Wt,FileType:zi,FilePermission:bn,FoldingRange:t0,FoldingRangeKind:Ns,FunctionBreakpoint:No,InlineCompletionItem:Hv,InlineCompletionList:Bv,Hover:Sf,VerboseHover:xf,HoverVerbosityAction:Nv,IndentAction:Zb,Location:tr,MarkdownString:Si,OverviewRulerLane:zw,ParameterInformation:Fv,PortAutoForwardAction:d0,Position:Pe,ProcessExecution:qa,ProgressLocation:Ro,QuickInputButtonLocation:n0,QuickInputButtons:uu,Range:Se,RelativePattern:Ja,Selection:Ls,SelectionRange:Ql,SemanticTokens:Ka,SemanticTokensBuilder:jF,SemanticTokensEdit:dx,SemanticTokensEdits:qf,SemanticTokensLegend:s0,ShellExecution:Ao,ShellQuoting:Jv,SignatureHelp:Uv,SignatureHelpTriggerKind:_v,SignatureInformation:Mv,SnippetString:Co,SourceBreakpoint:Lo,StandardTokenType:Rn,StatusBarAlignment:Pn,SymbolInformation:ql,SymbolKind:nt,SymbolTag:Vl,Task:Ff,TaskGroup:Kl,TaskPanelKind:Gv,TaskRevealKind:qv,TaskScope:Dn,TerminalLink:AF,TerminalQuickFixTerminalCommand:TF,TerminalQuickFixOpener:RF,TerminalLocation:Vv,TerminalProfile:LF,TerminalExitReason:zv,TerminalShellExecutionCommandLineConfidence:Of,TextDocumentSaveReason:Ba,TextEdit:Cn,SnippetTextEdit:Lv,TextEditorCursorStyle:Zr,TextEditorLineNumbersStyle:Nr,TextEditorRevealType:Rf,TextEditorSelectionChangeKind:Wa,SyntaxTokenType:za,TextDocumentChangeReason:Zl,ThemeColor:tu,ThemeIcon:di,TreeItem:Mf,TreeItemCheckboxState:ns,TreeItemCollapsibleState:To,TypeHierarchyItem:f0,UIKind:Qu,Uri:E,ViewColumn:Xl,WorkspaceEdit:In,DocumentPasteTriggerKind:Zv,DocumentDropEdit:Xv,DocumentDropOrPasteEditKind:jf,DocumentPasteEdit:FF,InlayHint:Df,InlayHintLabelPart:Pf,InlayHintKind:jv,RemoteAuthorityResolverError:Ma,ResolvedAuthority:PF,ManagedResolvedAuthority:bf,SourceControlInputBoxValidationType:Wv,ExtensionRuntime:ep,TimelineItem:c0,NotebookRange:Os,NotebookCellKind:Fo,NotebookCellExecutionState:tc,NotebookCellData:Qf,NotebookData:fx,NotebookRendererScript:gx,NotebookCellStatusBarAlignment:Xf,NotebookEditorRevealType:Zf,NotebookCellOutput:Yf,NotebookCellOutputItem:px,NotebookCellStatusBarItem:BF,NotebookControllerAffinity:a0,NotebookControllerAffinity2:Kf,NotebookEdit:yf,NotebookKernelSourceAction:WF,NotebookVariablesRequestKind:du,PortAttributes:VF,LinkedEditingRanges:zF,TestResultState:l0,TestRunRequest:tp,TestMessage:ip,TestMessageStackFrame:qF,TestTag:fu,TestRunProfileKind:rc,TextSearchCompleteMessageType:Kp,DataTransfer:eu,DataTransferItem:Uf,TestCoverageCount:rp,FileCoverage:pu,FileCoverage2:pu,StatementCoverage:mx,BranchCoverage:vx,DeclarationCoverage:wx,WorkspaceTrustState:h0,LanguageStatusSeverity:_a,QuickPickItemKind:hu,InputBoxValidationSeverity:ec,TabInputText:p0,TabInputTextDiff:np,TabInputTextMerge:bx,TabInputCustom:g0,TabInputNotebook:m0,TabInputNotebookDiff:v0,TabInputWebview:yx,TabInputTerminal:Ex,TabInputInteractiveWindow:Sx,TabInputChat:xx,TabInputTextMultiDiff:kx,TelemetryTrustedValue:$w,LogLevel:de,EditSessionIdentityMatch:Kb,InteractiveSessionVoteDirection:w0,ChatCopyKind:b0,ChatEditingSessionActionOutcome:gu,InteractiveEditorResponseFeedbackKind:Tn,DebugStackFrame:ux,DebugThread:hx,RelatedInformationType:k0,SpeechToTextStatus:$0,TextToSpeechStatus:C0,PartialAcceptTriggerKind:Po,KeywordRecognitionStatus:I0,ChatResponseMarkdownPart:op,ChatResponseFileTreePart:cp,ChatResponseAnchorPart:bu,ChatResponseProgressPart:yu,ChatResponseProgressPart2:lp,ChatResponseReferencePart:Ms,ChatResponseReferencePart2:Ms,ChatResponseCodeCitationPart:dp,ChatResponseCodeblockUriPart:hp,ChatResponseWarningPart:Eu,ChatResponseTextEditPart:Su,ChatResponseMarkdownWithVulnerabilitiesPart:vu,ChatResponseCommandButtonPart:up,ChatResponseDetectedParticipantPart:wu,ChatResponseConfirmationPart:ap,ChatResponseMovePart:fp,ChatResponseReferencePartStatusKind:y0,ChatRequestTurn:$x,ChatResponseTurn:Cx,ChatLocation:ir,ChatRequestEditorData:Ix,ChatRequestNotebookData:Px,ChatReferenceBinaryData:Dx,LanguageModelChatMessageRole:dr,LanguageModelChatMessage:Ax,LanguageModelToolResultPart:E0,LanguageModelTextPart:xi,LanguageModelToolCallPart:xu,LanguageModelError:Us,LanguageModelToolResult:S0,LanguageModelChatToolMode:x0,LanguageModelPromptTsxPart:sc,NewSymbolName:UF,NewSymbolNameTag:e0,NewSymbolNameTriggerKind:nu,InlineEdit:JF,InlineEditTriggerKind:ku,ExcludeSettingOptions:pr,TextSearchContextNew:Zp,TextSearchMatchNew:Hs,TextSearchCompleteMessageTypeNew:Kp,ReferenceType:T0}}}var sm,Oy=class{constructor(t,i,r,s,n,o,a){this.c=t,this.d=i,this.e=r,this.f=s,this.g=n,this.h=o,this.i=a,this.a=new Map,this.b=[]}async install(){this.j(),Ct("code/extHost/willWaitForConfig");const t=await this.f.getConfigProvider();Ct("code/extHost/didWaitForConfig");const i=await this.g.getExtensionPathIndex();this.register(new rz(this.c,i,this.d,t,this.i)),this.register(this.e.createInstance(Fy)),this.h.remote.isRemote&&this.register(this.e.createInstance(My,i,this.h.environment.appUriScheme))}register(t){if("nodeModuleName"in t)if(Array.isArray(t.nodeModuleName))for(const i of t.nodeModuleName)this.a.set(i,t);else this.a.set(t.nodeModuleName,t);typeof t.alternativeModuleName=="function"&&this.b.push(i=>t.alternativeModuleName(i))}};Oy=__decorate([__param(2,Sd),__param(3,gr),__param(4,zs),__param(5,Qt),__param(6,Ce)],Oy);var Fy=class{static{sm=this}static{this.a=new Map([["vscode-ripgrep","@vscode/ripgrep"],["vscode-windows-registry","@vscode/windows-registry"]])}constructor(t){if(t.environment.appRoot&&sm.a.size){const i=un(this.c(t.environment.appRoot.fsPath)),r="[a-z0-9_.-]",s=`@${r}+\\/${r}+|${r}+`,n="node_modules|node_modules\\.asar(?:\\.unpacked)?";this.b=new RegExp(`^(${i}/${n}\\/)(${s})(.*)$`,"i")}}alternativeModuleName(t){if(!this.b)return;const i=this.b.exec(this.c(t));if(!i)return;const[,r,s,n]=i,o=sm.a.get(s);if(o!==void 0)return console.warn(`${s} as been renamed to ${o}, please update your imports`),r+o+n}c(t){return t.replace(/\\/g,"/")}};Fy=sm=__decorate([__param(0,Qt)],Fy);var rz=class{constructor(e,t,i,r,s){this.c=e,this.d=t,this.e=i,this.f=r,this.g=s,this.nodeModuleName="vscode",this.a=new Rs}load(e,t){const i=this.d.findSubstr(t);if(i){let r=this.a.get(i.identifier);return r||(r=this.c(i,this.e,this.f),this.a.set(i.identifier,r)),r}if(!this.b){let r="";this.d.forEach((s,n)=>r+=`	${n} -> ${s.identifier.value}
`),this.g.warn(`Could not identify extension for 'vscode' require call from ${t}. These are the extension path mappings: 
${r}`),this.b=this.c(PM,this.e,this.f)}return this.b}},My=class{constructor(t,i,r){this.e=t,this.f=i,this.nodeModuleName=["open","opn"],this.d=r.getProxy(q.MainThreadTelemetry);const s=r.getProxy(q.MainThreadWindow);this.c=(n,o)=>{const a=E.parse(n);return o?this.g(n,o):a.scheme==="http"||a.scheme==="https"?s.$openUri(a,n,{allowTunneling:!0}):a.scheme==="mailto"||a.scheme===this.f?s.$openUri(a,n,{}):this.g(n,o)}}load(t,i,r){const s=this.e.findSubstr(i);return s&&(this.a=s.identifier.value,this.h()),this.b=r(t),this.c}g(t,i){return this.i(),this.b(t,i)}h(){this.a&&this.d.$publicLog2("shimming.open",{extension:this.a})}i(){this.a&&this.d.$publicLog2("shimming.open.call.noForward",{extension:this.a})}};My=__decorate([__param(2,Ie)],My);import{LogLevel as Qo,createHttpPatch as h3,createProxyResolver as sz,createTlsPatch as nz,createNetPatch as oz,loadSystemCertificates as az}from"@vscode/proxy-agent";import{createRequire as cz}from"node:module";var Oc=cz(import.meta.url),d3=Oc("http"),nm=Oc("https"),f3=Oc("tls"),p3=Oc("net"),g3=!1,m3=!1;function lz(e,t,i,r,s,n,o){hz(t,s,n,o);const a=n.environment.useHostProxy,c=typeof a=="boolean"?a:!n.remote.isRemote,l={resolveProxy:d=>e.resolveProxy(d),lookupProxyAuthorization:mz.bind(void 0,e,r,s,t,{},{},n.remote.isRemote,c),getProxyURL:()=>t.getConfiguration("http").get("proxy"),getProxySupport:()=>t.getConfiguration("http").get("proxySupport")||"off",getNoProxyConfig:()=>t.getConfiguration("http").get("noProxy")||[],addCertificatesV1:()=>fz(t),addCertificatesV2:()=>pz(t),log:r,getLogLevel:()=>{const d=r.getLevel();switch(d){case de.Trace:return Qo.Trace;case de.Debug:return Qo.Debug;case de.Info:return Qo.Info;case de.Warning:return Qo.Warning;case de.Error:return Qo.Error;case de.Off:return Qo.Off;default:return f(d)}function f(g){return r.error("Unknown log level",g),Qo.Debug}},proxyResolveTelemetry:()=>{},useHostProxy:c,loadAdditionalCertificates:async()=>{const d=[];if(n.remote.isRemote&&d.push(az({log:r})),c){r.trace("ProxyResolver#loadAdditionalCertificates: Loading certificates from main process");const f=e.loadCertificates();f.then(g=>r.trace("ProxyResolver#loadAdditionalCertificates: Loaded certificates from main process",g.length)),d.push(f)}return n.environment.extensionTestsLocationURI&&nm.globalAgent.testCertificates?.length&&(r.trace("ProxyResolver#loadAdditionalCertificates: Loading test certificates"),d.push(Promise.resolve(nm.globalAgent.testCertificates))),(await Promise.all(d)).flat()},env:process.env},u=sz(l),h=dz(l,u);return gz(i,h)}var uz=["content-length","host","trailer","te","upgrade","cookie2","keep-alive","transfer-encoding","set-cookie"];function hz(e,t,i,r){if(!i.remote.isRemote&&!globalThis.__originalFetch){const s=globalThis.fetch;globalThis.__originalFetch=s;let n=e.getConfiguration("http").get("electronFetch",m3);r.add(e.onDidChangeConfiguration(a=>{a.affectsConfiguration("http.electronFetch")&&(n=e.getConfiguration("http").get("electronFetch",m3))}));const o=Oc("electron");globalThis.fetch=async function(c,l){function u(x){return l&&x in l?l[x]:typeof c=="object"&&"cache"in c?c[x]:void 0}const h=typeof c=="string"?c:"cache"in c?c.url:c.toString(),d=h.startsWith("data:");d&&Fc(t,"data");const f=h.startsWith("blob:");f&&Fc(t,"blob");const g=u("redirect")==="manual";g&&Fc(t,"manualRedirect");const v=u("integrity");if(v&&Fc(t,"integrity"),!n||d||f||g||v){const x=await s(c,l);return v3(t,x,h),x}if(l?.headers){const x=new Headers(l.headers);for(const P of uz)x.delete(P);l={...l,headers:x}}const y=c instanceof URL?c.toString():c,S=await o.net.fetch(y,l);return v3(t,S,h),S}}}function v3(e,t,i){const r=t.url;Object.defineProperty(t,"url",{get(){return Fc(e,"url"),r||i}});const s=t.type;Object.defineProperty(t,"type",{get(){return Fc(e,"typeProperty"),s!=="default"?s:"basic"}})}var w3={url:0,typeProperty:0,data:0,blob:0,integrity:0,manualRedirect:0},om;function Fc(e,t){w3[t]++||(om&&clearTimeout(om),om=setTimeout(()=>{e.$publicLog2("fetchFeatureUse",w3)},1e4),om.unref())}function dz(e,t){function i(r,s){return Object.assign(r.default||r,s)}return{http:i(d3,h3(e,d3,t)),https:i(nm,h3(e,nm,t)),net:i(p3,oz(e,p3)),tls:i(f3,nz(e,f3))}}function fz(e){const t=e.getConfiguration("http");return!t.get("experimental.systemCertificatesV2",g3)&&!!t.get("systemCertificates")}function pz(e){const t=e.getConfiguration("http");return!!t.get("experimental.systemCertificatesV2",g3)&&!!t.get("systemCertificates")}var b3=new Map;function gz(e,t){return e.getExtensionPathIndex().then(i=>{const r=Oc("module"),s=r._load;r._load=function(o,a,c){if(o==="net")return t.net;if(o==="tls")return t.tls;if(o!=="http"&&o!=="https")return s.apply(this,arguments);const l=i.findSubstr(E.file(a.filename));let u=b3.get(l);if(u||b3.set(l,u={}),!u[o]){const h=t[o];u[o]={...h}}return u[o]}})}async function mz(e,t,i,r,s,n,o,a,c,l,u){const h=s[c];l&&(s[c]=l),t.trace("ProxyResolver#lookupProxyAuthorization callback",`proxyURL:${c}`,`proxyAuthenticate:${l}`,`proxyAuthenticateCache:${h}`);const d=l||h,f=Array.isArray(d)?d:typeof d=="string"?[d]:[];if(vz(i,f,o),f.some(v=>/^(Negotiate|Kerberos)( |$)/i.test(v))&&!u.kerberosRequested){u.kerberosRequested=!0;try{const v=await import("kerberos"),y=new URL(c),S=r.getConfiguration("http").get("proxyKerberosServicePrincipal")||(process.platform==="win32"?`HTTP/${y.hostname}`:`HTTP@${y.hostname}`);return t.debug("ProxyResolver#lookupProxyAuthorization Kerberos authentication lookup",`proxyURL:${c}`,`spn:${S}`),"Negotiate "+await(await v.initializeClient(S)).step("")}catch(v){t.debug("ProxyResolver#lookupProxyAuthorization Kerberos authentication failed",v)}if(o&&a){t.debug("ProxyResolver#lookupProxyAuthorization Kerberos authentication lookup on host",`proxyURL:${c}`);const v=await e.lookupKerberosAuthorization(c);if(v)return"Negotiate "+v}}const g=f.find(v=>/^Basic( |$)/i.test(v));if(g)try{const v=n[c];if(v)if(u.basicAuthCacheUsed)t.debug("ProxyResolver#lookupProxyAuthorization Basic authentication deleting cached credentials",`proxyURL:${c}`),delete n[c];else return t.debug("ProxyResolver#lookupProxyAuthorization Basic authentication using cached credentials",`proxyURL:${c}`),u.basicAuthCacheUsed=!0,v;u.basicAuthAttempt=(u.basicAuthAttempt||0)+1;const y=/ realm="([^"]+)"/i.exec(g)?.[1];t.debug("ProxyResolver#lookupProxyAuthorization Basic authentication lookup",`proxyURL:${c}`,`realm:${y}`);const S=new URL(c),x={scheme:"basic",host:S.hostname,port:Number(S.port),realm:y||"",isProxy:!0,attempt:u.basicAuthAttempt},P=await e.lookupAuthorization(x);if(P){t.debug("ProxyResolver#lookupProxyAuthorization Basic authentication received credentials",`proxyURL:${c}`,`realm:${y}`);const D="Basic "+Buffer.from(`${P.username}:${P.password}`).toString("base64");return n[c]=D,D}else t.debug("ProxyResolver#lookupProxyAuthorization Basic authentication received no credentials",`proxyURL:${c}`,`realm:${y}`)}catch(v){t.error("ProxyResolver#lookupProxyAuthorization Basic authentication failed",v)}}var y3=!1;function vz(e,t,i){y3||!t.length||(y3=!0,e.$publicLog2("proxyAuthenticationRequest",{authenticationType:t.map(r=>r.split(" ")[0]).join(","),extensionHostType:i?"remote":"local"}))}import{tmpdir as wz}from"os";var Uy=class extends X{constructor(t,i){super();const r=t.getProxy(q.MainThreadDownloadService);i.registerCommand(!1,"_workbench.downloadResource",async s=>{const n=E.file(rt(wz(),Ht()));return await r.$download(s,n),n})}};Uy=__decorate([__param(0,Ie),__param(1,rr)],Uy);import*as bz from"http";import*as E3 from"fs";var yz=class{constructor(e,t,i){this.b=e,this.c=t,this.f=i,this.a=bz.createServer((r,s)=>this.h(r,s)),this.g().catch(r=>(t.error(r),""))}get ipcHandlePath(){return this.f}async g(){try{this.a.listen(this.ipcHandlePath),this.a.on("error",e=>this.c.error(e))}catch{this.c.error("Could not start open from terminal server.")}return this.f}h(e,t){const i=(s,n)=>{t.writeHead(s,{"content-type":"application/json"}),t.end(JSON.stringify(n||null),o=>o&&this.c.error(o))},r=[];e.setEncoding("utf8"),e.on("data",s=>r.push(s)),e.on("end",async()=>{try{const s=JSON.parse(r.join(""));let n;switch(s.type){case"open":n=await this.i(s);break;case"openExternal":n=await this.j(s);break;case"status":n=await this.l(s);break;case"extensionManagement":n=await this.k(s);break;default:i(404,`Unknown message type: ${s.type}`);break}i(200,n)}catch(s){const n=s instanceof Error?s.message:JSON.stringify(s);i(500,n),this.c.error("Error while processing pipe request",s)}})}async i(e){const{fileURIs:t,folderURIs:i,forceNewWindow:r,diffMode:s,mergeMode:n,addMode:o,forceReuseWindow:a,gotoLineMode:c,waitMarkerFilePath:l,remoteAuthority:u}=e,h=[];if(Array.isArray(i))for(const v of i)try{h.push({folderUri:E.parse(v)})}catch{}if(Array.isArray(t))for(const v of t)try{yL(v)?h.push({workspaceUri:E.parse(v)}):h.push({fileUri:E.parse(v)})}catch{}const d=l?E.file(l):void 0,g={forceNewWindow:r,diffMode:s,mergeMode:n,addMode:o,gotoLineMode:c,forceReuseWindow:a,preferNewWindow:!a&&!d&&!o,waitMarkerFileURI:d,remoteAuthority:u};this.b.executeCommand("_remoteCLI.windowOpen",h,g)}async j(e){for(const t of e.uris){const i=E.parse(t),r=i.scheme==="file"?i:t;await this.b.executeCommand("_remoteCLI.openExternal",r)}}async k(e){const t=r=>r?.map(s=>/\.vsix$/i.test(s)?E.parse(s):s),i={list:e.list,install:t(e.install),uninstall:t(e.uninstall),force:e.force};return await this.b.executeCommand("_remoteCLI.manageExtensions",i)}async l(e){return await this.b.executeCommand("_remoteCLI.getSystemStatus")}dispose(){this.a.close(),this.f&&process.platform!=="win32"&&E3.existsSync(this.f)&&E3.unlinkSync(this.f)}},_y=class extends yz{constructor(t,i){super(t,i,E2())}};_y=__decorate([__param(0,rr),__param(1,Ce)],_y);var jy=class{constructor(t,i){this.a=t.getProxy(q.MainThreadConsole),this.b=i.consoleForward.includeStack,this.c=i.consoleForward.logNative,this.d("info","log"),this.d("log","log"),this.d("warn","warn"),this.d("debug","debug"),this.d("error","error")}d(t,i){const r=this,s=console[t];Object.defineProperty(console,t,{set:()=>{},get:()=>function(){r.e(t,i,s,arguments)}})}e(t,i,r,s){this.a.$logExtensionHostMessage({type:"__$console",severity:i,arguments:Sz(s,this.b)}),this.c&&this.f(t,r,s)}};jy=__decorate([__param(0,Ie),__param(1,Qt)],jy);var Ez=1e5;function Sz(e,t){const i=[];if(e.length)for(let r=0;r<e.length;r++){let s=e[r];if(typeof s>"u")s="undefined";else if(s instanceof Error){const n=s;n.stack?s=n.stack:s=n.toString()}i.push(s)}if(t){const r=new Error().stack;r&&i.push({__$stack:r.split(`
`).slice(3).join(`
`)})}try{const r=x2(i);return r.length>Ez?"Output omitted for a large object that exceeds the limits":r}catch(r){return`Output omitted for an object that cannot be inspected ('${r.toString()}')`}}var xz=1024*1024,Hy=class extends jy{constructor(t,i){super(t,i),this.g=!1,this.j("stderr","error"),this.j("stdout","log")}f(t,i,r){const s=t==="error"||t==="warn"?process.stderr:process.stdout;this.g=!0,s.write(`
START_NATIVE_LOG
`),i.apply(console,r),s.write(`
END_NATIVE_LOG
`),this.g=!1}j(t,i){const r=process[t],s=r.write;let n="";Object.defineProperty(r,"write",{set:()=>{},get:()=>(o,a,c)=>{if(!this.g){n+=o.toString(a);const l=n.length>xz?n.length:n.lastIndexOf(`
`);l!==-1&&(console[i](n.slice(0,l)),n=n.slice(l+1))}s.call(r,o,a,c)}})}};Hy=__decorate([__param(0,Ie),__param(1,Qt)],Hy);import{promises as qn}from"fs";async function kz(e,t,i,r,s,n){let o;try{await $z(e,t,i,r,s,n)}catch(a){o=a}finally{o&&s.errorTransformer&&(o=s.errorTransformer(o)),typeof o<"u"&&i.error(o),i.end()}}async function $z(e,t,i,r,s,n){By(n);const o=await e.open(t,{create:!1});try{By(n);let a=0,c=0,l=s&&typeof s.length=="number"?s.length:void 0,u=J.alloc(Math.min(s.bufferSize,typeof l=="number"?l:s.bufferSize)),h=s&&typeof s.position=="number"?s.position:0,d=0;do c=await e.read(o,h,u.buffer,d,u.byteLength-d),h+=c,d+=c,a+=c,typeof l=="number"&&(l-=c),d===u.byteLength&&(await i.write(r(u)),u=J.alloc(Math.min(s.bufferSize,typeof l=="number"?l:s.bufferSize)),d=0);while(c>0&&(typeof l!="number"||l>0)&&By(n)&&Cz(a,s));if(d>0){let f=d;typeof l=="number"&&(f=Math.min(d,l)),i.write(r(u.slice(0,f)))}}catch(a){throw $N(a)}finally{await e.close(o)}}function By(e){if(e.isCancellationRequested)throw Qc();return!0}function Cz(e,t){if(typeof t?.limits?.size=="number"&&e>t.limits.size)throw As(p(1940,null),se.FileTooLarge);return!0}var Iz=class extends X{constructor(e,t){super(),this.a=e,this.b=t,this.c=this.B(new I),this.onDidChangeFile=this.c.event,this.g=this.B(new I),this.onDidWatchError=this.g.event,this.j=[],this.m=this.B(new ad(0)),this.y=[],this.z=this.B(new ad(0))}watch(e,t){return t.recursive||this.b?.watcher?.forceUniversal?this.n(e,t):this.C(e,t)}n(e,t){const i=this.r(e,t),r=j4(this.j,i);return this.s(),ee(()=>{r(),this.s()})}r(e,t){const i={path:this.L(e),excludes:t.excludes,includes:t.includes,recursive:t.recursive,filter:t.filter,correlationId:t.correlationId};if(hB(i)){const r=this.b?.watcher?.recursive?.usePolling;r===!0?i.pollingInterval=this.b?.watcher?.recursive?.pollingInterval??5e3:Array.isArray(r)&&r.includes(i.path)&&(i.pollingInterval=this.b?.watcher?.recursive?.pollingInterval??5e3)}return i}s(){this.m.trigger(()=>this.t()).catch(e=>Et(e))}t(){return this.h||(this.h=this.B(this.u(e=>this.c.fire(iC(e)),e=>this.H(e),this.a.getLevel()===de.Trace)),this.B(this.a.onDidChangeLogLevel(()=>{this.h?.setVerboseLogging(this.a.getLevel()===de.Trace)}))),this.h.watch(this.j)}C(e,t){const i={path:this.L(e),excludes:t.excludes,includes:t.includes,recursive:!1,filter:t.filter,correlationId:t.correlationId},r=j4(this.y,i);return this.D(),ee(()=>{r(),this.D()})}D(){this.z.trigger(()=>this.F()).catch(e=>Et(e))}F(){return this.w||(this.w=this.B(this.G(e=>this.c.fire(iC(e)),e=>this.H(e),this.a.getLevel()===de.Trace)),this.B(this.a.onDidChangeLogLevel(()=>{this.w?.setVerboseLogging(this.a.getLevel()===de.Trace)}))),this.w.watch(this.y)}H(e){e.type==="error"&&this.g.fire(e.message),this.I(e)}I(e){this.a[e.type](e.message)}J(e){return ys(e.fsPath)}L(e){const t=this.J(e);return MA(t)}};import{fork as Pz}from"child_process";function Dz(e){const t=e;return t&&typeof t.type=="string"&&typeof t.severity=="string"}function Az(e){const t=[];let i;try{const r=JSON.parse(e.arguments),s=r[r.length-1];s&&s.__$stack&&(r.pop(),i=s.__$stack),t.push(...r)}catch{t.push("Unable to log remote console arguments",e.arguments)}return{args:t,stack:i}}function Rz(e){if(!e)return e;const t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function Tz(e,t){const{args:i,stack:r}=Az(e),s=typeof i[0]=="string"&&i.length===1;let n=Rz(r);n&&(n=`(${n.trim()})`);let o=[];if(typeof i[0]=="string"?n&&s?o=[`%c[${t}] %c${i[0]} %c${n}`,Mc("blue"),Mc(""),Mc("grey")]:o=[`%c[${t}] %c${i[0]}`,Mc("blue"),Mc(""),...i.slice(1)]:o=[`%c[${t}]%`,Mc("blue"),...i],n&&!s&&o.push(n),typeof console[e.severity]!="function")throw new Error("Unknown console method");Nz(o)||console[e.severity].apply(console,o)}function Mc(e){return`color: ${e}`}var Lz=["/opt/tiger/consul_deploy"];function Nz(e){try{return!!e.filter(i=>Lz.some(r=>i.includes(r)))}catch{return!1}}var Oz=class{constructor(e,t){this.i=e,this.j=t,this.c=new Set,this.g=new Map,this.h=new I,this.onDidProcessExit=this.h.event;const i=t&&t.timeout?t.timeout:6e4;this.b=new cE(i),this.d=null,this.f=null}getChannel(e){const t=this;return{call(i,r,s){return t.k(e,i,r,s)},listen(i,r){return t.l(e,i,r)}}}k(e,t,i,r=Ge.None){if(!this.b)return Promise.reject(new Error("disposed"));if(r.isCancellationRequested)return Promise.reject(Qc());this.b.cancel();const s=this.n(e),n=Qr(c=>s.call(t,i,c)),o=r.onCancellationRequested(()=>n.cancel()),a=ee(()=>n.cancel());return this.c.add(a),n.finally(()=>{o.dispose(),this.c.delete(a),this.c.size===0&&this.b&&this.b.trigger(()=>this.o())}),n}l(e,t,i){if(!this.b)return ze.None;this.b.cancel();let r;const s=new I({onWillAddFirstListener:()=>{r=this.n(e).listen(t,i)(s.fire,s),this.c.add(r)},onDidRemoveLastListener:()=>{this.c.delete(r),r.dispose(),this.c.size===0&&this.b&&this.b.trigger(()=>this.o())}});return s.event}get m(){if(!this.f){const e=this.j&&this.j.args?this.j.args:[],t=Object.create(null);t.env={...ot(process.env),VSCODE_PARENT_PID:String(process.pid)},this.j&&this.j.env&&(t.env={...t.env,...this.j.env}),this.j&&this.j.freshExecArgv&&(t.execArgv=[]),this.j&&typeof this.j.debug=="number"&&(t.execArgv=["--nolazy","--inspect="+this.j.debug]),this.j&&typeof this.j.debugBrk=="number"&&(t.execArgv=["--nolazy","--inspect-brk="+this.j.debugBrk]),t.execArgv===void 0&&(t.execArgv=process.execArgv.filter(u=>!/^--inspect(-brk)?=/.test(u)).filter(u=>!u.startsWith("--vscode-"))),z_(t.env),this.d=Pz(this.i,e,t);const i=new I,s=ze.fromNodeEventEmitter(this.d,"message",u=>u)(u=>{if(Dz(u)){Tz(u,`IPC Library: ${this.j.serverName}`);return}i.fire(J.wrap(Buffer.from(u,"base64")))}),n=this.j.useQueue?q_(this.d):this.d,o=u=>this.d&&this.d.connected&&n.send(u.buffer.toString("base64")),a=i.event,c={send:o,onMessage:a};this.f=new OE(c);const l=()=>this.o();process.once("exit",l),this.d.on("error",u=>console.warn('IPC "'+this.j.serverName+'" errored with '+u)),this.d.on("exit",(u,h)=>{process.removeListener("exit",l),s.dispose(),this.c.forEach(d=>Sr(d)),this.c.clear(),u!==0&&h!=="SIGTERM"&&console.warn('IPC "'+this.j.serverName+'" crashed with exit code '+u+" and signal "+h),this.b?.cancel(),this.o(),this.h.fire({code:u,signal:h})})}return this.f}n(e){let t=this.g.get(e);return t||(t=this.m.getChannel(e),this.g.set(e,t)),t}o(){this.f&&(this.d&&(this.d.kill(),this.d=null),this.f=null,this.g.clear())}dispose(){this.h.dispose(),this.b?.cancel(),this.b=void 0,this.o(),this.c.clear()}},Fz=class extends fB{constructor(e,t,i){super(e,t,i),this.s()}r(e){const t=e.add(new Oz(eE.asFileUri("bootstrap-fork").fsPath,{serverName:"File Watcher",args:["--type=fileWatcher"],env:{VSCODE_ESM_ENTRYPOINT:"vs/platform/files/node/watcher/watcherMain",VSCODE_PIPE_LOGGING:"true",VSCODE_VERBOSE_LOGGING:"true"}}));return e.add(t.onDidProcessExit(({code:i,signal:r})=>this.t(`terminated by itself with code ${i}, signal: ${r} (ETERM)`))),f1.toService(a2(t.getChannel("watcher")))}};import{watchFile as Mz,unwatchFile as Uz}from"fs";var _z=class extends X{constructor(){super(),this.a=this.B(new I),this.onDidChangeFile=this.a.event,this.b=this.B(new I),this.onDidLogMessage=this.b.event,this.c=this.B(new I),this.f=this.c.event,this.g=new Map,this.h=new Map,this.j=this.B(new Bh),this.m=new Set,this.n=this.B(new ad(this.y())),this.r=5007,this.s=new Ss,this.R=!1,this.B(this.f(e=>this.z({id:this.u(e),correlationId:this.t(e)?e.correlationId:void 0,path:e.path})))}t(e){return eC(e)}u(e){return this.t(e)?e.correlationId:Is(e)}async watch(e){this.s.isSettled||this.s.complete(),this.s=new Ss;try{this.g.clear(),this.h.clear();for(const t of e)this.t(t)?this.g.set(t.correlationId,t):this.h.set(this.u(t),t);for(const[t]of this.j)!this.h.has(t)&&!this.g.has(t)&&(this.j.deleteAndDispose(t),this.m.delete(t));return await this.w(!1)}finally{this.s.complete()}}w(e){const t=[];for(const[i,r]of[...this.h,...this.g])this.j.has(i)||t.push(r);return this.n.trigger(()=>this.N(t),e?this.y():0).catch(i=>Et(i))}y(){return 800}isSuspended(e){const t=this.u(e);return this.m.has(t)?"polling":this.j.has(t)}async z(e){if(this.j.has(e.id))return;const t=new ue;this.j.set(e.id,t),await this.s.p,!t.isDisposed&&(this.D(e,t),this.w(!0))}C(e){this.j.deleteAndDispose(e.id),this.m.delete(e.id),this.w(!1)}D(e,t){this.F(e,t)?(this.P(`reusing an existing recursive watcher to monitor ${e.path}`),this.m.delete(e.id)):(this.G(e,t),this.m.add(e.id))}F(e,t){const i=this.O?.subscribe(e.path,(r,s)=>{t.isDisposed||(r?this.D(e,t):s?.type===1&&this.H(e))});return i?(t.add(i),!0):!1}G(e,t){let i=!1;const r=(s,n)=>{if(t.isDisposed)return;const o=this.I(s),a=this.I(n),c=i;i=o,!o&&(a||c)&&this.H(e)};this.P(`starting fs.watchFile() on ${e.path} (correlationId: ${e.correlationId})`);try{Mz(e.path,{persistent:!1,interval:this.r},r)}catch(s){this.Q(`fs.watchFile() failed with error ${s} on path ${e.path} (correlationId: ${e.correlationId})`)}t.add(ee(()=>{this.P(`stopping fs.watchFile() on ${e.path} (correlationId: ${e.correlationId})`);try{Uz(e.path,r)}catch(s){this.Q(`fs.unwatchFile() failed with error ${s} on path ${e.path} (correlationId: ${e.correlationId})`)}}))}H(e){this.P(`detected ${e.path} exists again, resuming watcher (correlationId: ${e.correlationId})`);const t={resource:E.file(e.path),type:1,cId:e.correlationId};this.a.fire([t]),this.J(t,e),this.C(e)}I(e){return e.ctimeMs===0&&e.ino===0}async stop(){this.j.clearAndDisposeAll(),this.m.clear()}J(e,t){if(this.R){const i=` >> normalized ${e.type===1?"[ADDED]":e.type===2?"[DELETED]":"[CHANGED]"} ${e.resource.fsPath}`;this.L(i,t)}}L(e,t){this.R&&this.P(`${e}${typeof t.correlationId=="number"?` <${t.correlationId}> `:""}`)}M(e){return`${e.path} (excludes: ${e.excludes.length>0?e.excludes:"<none>"}, includes: ${e.includes&&e.includes.length>0?JSON.stringify(e.includes):"<all>"}, filter: ${vB(e.filter)}, correlationId: ${typeof e.correlationId=="number"?e.correlationId:"<none>"})`}async setVerboseLogging(e){this.R=e}};import{watch as jz,promises as Hz}from"fs";var Bz=class Dm extends X{static{this.a=100}static{this.b=75}get isReusingRecursiveWatcher(){return this.n}get failed(){return this.r}constructor(t,i,r,s,n,o){super(),this.s=t,this.t=i,this.u=r,this.w=s,this.y=n,this.z=o,this.c=this.B(new dR({maxWorkChunkSize:100,throttleDelay:200,maxBufferedWork:1e4},a=>this.u(a))),this.f=this.B(new hR(a=>this.M(a),Dm.b)),this.g=sC(this.s.path,this.s.excludes),this.h=this.s.includes?sC(this.s.path,this.s.includes):void 0,this.j=eC(this.s)?this.s.filter:void 0,this.m=new lt,this.ready=this.C(),this.n=!1,this.r=!1}async C(){try{const t=await this.F(this.s);if(this.m.token.isCancellationRequested)return;const i=await Hz.stat(t);if(this.m.token.isCancellationRequested)return;this.B(await this.G(t,i.isDirectory()))}catch(t){t.code!=="ENOENT"?this.O(t):this.Q(`ignoring a path for watching who's stat info failed to resolve: ${this.s.path} (error: ${t})`),this.D()}}D(){this.r=!0,this.w?.()}async F(t){let i=t.path;try{i=await ht.realpath(t.path),t.path===i&&(i=await u1(t.path,this.m.token)??t.path),t.path!==i&&this.Q(`correcting a path to watch that seems to be a symbolic link or wrong casing (original: ${t.path}, real: ${i})`)}catch{}return i}async G(t,i){const r=new ue;return this.H(t,i,r)?(this.Q(`reusing an existing recursive watcher for ${this.s.path}`),this.n=!0):(this.n=!1,await this.I(t,i,r)),r}H(t,i,r){if(i)return!1;const s=E.file(this.s.path),n=this.t?.subscribe(this.s.path,async(o,a)=>{if(!r.isDisposed)if(o){const c=await this.G(t,i);r.isDisposed?c.dispose():r.add(c)}else a&&(typeof a.cId=="number"||typeof this.s.correlationId=="number")&&this.L({resource:s,type:a.type,cId:this.s.correlationId},!0)});return n?(r.add(n),!0):!1}async I(t,i,r){if(Dt&&dn(t,"/Volumes/",!0)){this.O(`Refusing to watch ${t} for changes using fs.watch() for possibly being a network share where watching is unreliable and unstable.`);return}const s=new lt(this.m.token);r.add(ee(()=>s.dispose(!0)));const n=new ue;r.add(n);try{const o=E.file(this.s.path),a=ut(t),c=jz(t);n.add(ee(()=>{c.removeAllListeners(),c.close()})),this.Q(`Started watching: '${t}'`);const l=new Set;if(i)try{for(const h of await ht.readdir(t))l.add(h)}catch(h){this.O(h)}if(s.token.isCancellationRequested)return;const u=new Map;n.add(ee(()=>{for(const[,h]of u)h.dispose();u.clear()})),c.on("error",(h,d)=>{s.token.isCancellationRequested||(this.O(`Failed to watch ${t} for changes using fs.watch() (${h}, ${d})`),this.D())}),c.on("change",(h,d)=>{if(s.token.isCancellationRequested)return;this.z&&this.R(`[raw] ["${h}"] ${d}`);let f="";if(d&&(f=d.toString(),Dt&&(f=ul(f))),!(!f||h!=="change"&&h!=="rename"))if(i)if(h==="rename"){u.get(f)?.dispose();const g=setTimeout(async()=>{if(u.delete(f),f===a&&!await ht.exists(t)){this.J(o);return}if(s.token.isCancellationRequested)return;const v=await this.N(rt(t,f));if(s.token.isCancellationRequested)return;let y;v?l.has(f)?y=0:(y=1,l.add(f)):(l.delete(f),y=2),this.L({resource:Rt(o,f),type:y,cId:this.s.correlationId})},Dm.a);u.set(f,ee(()=>clearTimeout(g)))}else{let g;l.has(f)?g=0:(g=1,l.add(f)),this.L({resource:Rt(o,f),type:g,cId:this.s.correlationId})}else if(h==="rename"||f!==a){const g=setTimeout(async()=>{const v=await ht.exists(t);s.token.isCancellationRequested||(v?(this.L({resource:o,type:0,cId:this.s.correlationId},!0),n.add(await this.G(t,!1))):this.J(o))},Dm.a);n.clear(),n.add(ee(()=>clearTimeout(g)))}else this.L({resource:o,type:0,cId:this.s.correlationId},!0)})}catch(o){s.token.isCancellationRequested||this.O(`Failed to watch ${t} for changes using fs.watch() (${o.toString()})`),this.D()}}J(t){this.P("Watcher shutdown because watched path got deleted"),this.L({resource:t,type:2,cId:this.s.correlationId},!0),this.f.flush(),this.D()}L(t,i=!1){this.m.token.isCancellationRequested||(this.z&&this.R(`${t.type===1?"[ADDED]":t.type===2?"[DELETED]":"[CHANGED]"} ${t.resource.fsPath}`),!i&&this.g.some(r=>r(t.resource.fsPath))?this.z&&this.R(` >> ignored (excluded) ${t.resource.fsPath}`):!i&&this.h&&this.h.length>0&&!this.h.some(r=>r(t.resource.fsPath))?this.z&&this.R(` >> ignored (not included) ${t.resource.fsPath}`):this.f.work(t))}M(t){const i=pB(t),r=[];for(const n of i){if(mB(n,this.j)){this.z&&this.R(` >> ignored (filtered) ${n.resource.fsPath}`);continue}r.push(n)}if(r.length===0)return;if(this.z)for(const n of r)this.R(` >> normalized ${n.type===1?"[ADDED]":n.type===2?"[DELETED]":"[CHANGED]"} ${n.resource.fsPath}`);this.c.work(r)?this.c.pending>0&&this.Q(`started throttling events due to large amount of file change events at once (pending: ${this.c.pending}, most recent change: ${r[0].resource.fsPath}). Use 'files.watcherExclude' setting to exclude folders with lots of changing files (e.g. compilation output).`):this.P(`started ignoring events due to too many file change events at once (incoming: ${r.length}, most recent change: ${r[0].resource.fsPath}). Use 'files.watcherExclude' setting to exclude folders with lots of changing files (e.g. compilation output).`)}async N(t){if(At)return ht.exists(t);try{const i=ut(t);return(await ht.readdir(wi(t))).some(s=>s===i)}catch(i){return this.Q(i),!1}}setVerboseLogging(t){this.z=t}O(t){this.m.token.isCancellationRequested||this.y?.({type:"error",message:`[File Watcher (node.js)] ${t}`})}P(t){this.m.token.isCancellationRequested||this.y?.({type:"warn",message:`[File Watcher (node.js)] ${t}`})}Q(t){!this.m.token.isCancellationRequested&&this.z&&this.y?.({type:"trace",message:`[File Watcher (node.js)] ${t}`})}R(t){!this.m.token.isCancellationRequested&&this.z&&this.Q(`${t}${typeof this.s.correlationId=="number"?` <${this.s.correlationId}> `:""}`)}dispose(){this.m.dispose(!0),super.dispose()}},Wz=class extends _z{constructor(e){super(),this.O=e,this.onDidError=ze.None,this.watchers=new Set}async N(e){e=this.Z(e);const t=[],i=new Set(Array.from(this.watchers));for(const r of e){const s=this.W(r);s&&f9(s.request.excludes,r.excludes)&&f9(s.request.includes,r.includes)?i.delete(s):t.push(r)}t.length&&this.P(`Request to start watching: ${t.map(r=>this.M(r)).join(",")}`),i.size&&this.P(`Request to stop watching: ${Array.from(i).map(r=>this.M(r.request)).join(",")}`);for(const r of i)this.Y(r);for(const r of t)this.X(r)}W(e){for(const t of this.watchers)if(typeof e.correlationId=="number"||typeof t.request.correlationId=="number"){if(t.request.correlationId===e.correlationId)return t}else if(Xm(t.request.path,e.path,!At))return t}X(e){const t=new Bz(e,this.O,r=>this.a.fire(r),()=>this.c.fire(e),r=>this.b.fire(r),this.R),i={request:e,instance:t};this.watchers.add(i)}async stop(){await super.stop();for(const e of this.watchers)this.Y(e)}Y(e){this.P("stopping file watcher",e),this.watchers.delete(e),e.instance.dispose()}Z(e){const t=new Map;for(const i of e){const r=At?i.path:i.path.toLowerCase();let s=t.get(i.correlationId);s||(s=new Map,t.set(i.correlationId,s)),s.has(r)&&this.P(`ignoring a request for watching who's path is already watched: ${this.M(i)}`),s.set(r,i)}return Array.from(t.values()).map(i=>Array.from(i.values())).flat()}async setVerboseLogging(e){super.setVerboseLogging(e);for(const t of this.watchers)t.instance.setVerboseLogging(e)}P(e,t){this.R&&this.b.fire({type:"trace",message:this.bb(e,t)})}Q(e){this.b.fire({type:"warn",message:this.bb(e)})}bb(e,t){return t?`[File Watcher (node.js)] ${e} (${this.M(t.request)})`:`[File Watcher (node.js)] ${e}`}},zz=class extends dB{constructor(e,t,i){super(e,t,i),this.s()}r(e){return e.add(new Wz(void 0))}},Vz=class Oh extends Iz{static{this.M=!1}constructor(t,i){super(t,i),this.onDidChangeCapabilities=ze.None,this.Q=new Gt(r=>t1.getComparisonKey(r)),this.Y=new Map,this.Z=new Map,this.$=new Map}get capabilities(){return this.N||(this.N=253982,At&&(this.N|=1024)),this.N}async stat(t){try{const{stat:i,symbolicLink:r}=await Cr.stat(this.J(t));return{type:this.P(i,r),ctime:i.birthtime.getTime(),mtime:i.mtime.getTime(),size:i.size,permissions:i.mode&128?void 0:bn.Locked}}catch(i){throw this.ib(i)}}async O(t){try{return await this.stat(t)}catch{return}}async readdir(t){try{const i=await ht.readdir(this.J(t),{withFileTypes:!0}),r=[];return await Promise.all(i.map(async s=>{try{let n;s.isSymbolicLink()?n=(await this.stat(Rt(t,s.name))).type:n=this.P(s),r.push([s.name,n])}catch(n){this.a.trace(n)}})),r}catch(i){throw this.ib(i)}}P(t,i){let r;return i?.dangling?r=zi.Unknown:t.isFile()?r=zi.File:t.isDirectory()?r=zi.Directory:r=zi.Unknown,i&&(r|=zi.SymbolicLink),r}async R(t){const i=this.J(t);this.S(`[Disk FileSystemProvider]: createResourceLock() - request to acquire resource lock (${i})`);let r;for(;r=this.Q.get(t);)this.S(`[Disk FileSystemProvider]: createResourceLock() - waiting for resource lock to be released (${i})`),await r.wait();const s=new ur;return this.Q.set(t,s),this.S(`[Disk FileSystemProvider]: createResourceLock() - new resource lock created (${i})`),ee(()=>{this.S(`[Disk FileSystemProvider]: createResourceLock() - resource lock dispose() (${i})`),this.Q.get(t)===s&&(this.S(`[Disk FileSystemProvider]: createResourceLock() - resource lock removed from resource-lock map (${i})`),this.Q.delete(t)),this.S(`[Disk FileSystemProvider]: createResourceLock() - resource lock barrier open() (${i})`),s.open()})}async readFile(t,i){let r;try{i?.atomic&&(this.S(`[Disk FileSystemProvider]: atomic read operation started (${this.J(t)})`),r=await this.R(t));const s=this.J(t);return await qn.readFile(s)}catch(s){throw this.ib(s)}finally{r?.dispose()}}S(t){Oh.M&&this.a.trace(t)}readFileStream(t,i,r){const s=mR(n=>J.concat(n.map(o=>J.wrap(o))).buffer);return kz(this,t,s,n=>n.buffer,{...i,bufferSize:256*1024},r),s}async writeFile(t,i,r){return r?.atomic!==!1&&r?.atomic?.postfix&&await this.U(t)?this.W(t,Rt(od(t),`${Jr(t)}${r.atomic.postfix}`),i,r):this.X(t,i,r)}async U(t){try{const i=this.J(t),{symbolicLink:r}=await Cr.stat(i);if(r)return!1}catch{}return!0}async W(t,i,r,s){const n=new ue;try{n.add(await this.R(t)),n.add(await this.R(i)),await this.X(i,r,s,!0);try{await this.rename(i,t,{overwrite:!0})}catch(o){try{await this.delete(i,{recursive:!1,useTrash:!1,atomic:!1})}catch{}throw o}}finally{n.dispose()}}async X(t,i,r,s){let n;try{const o=this.J(t);if(!r.create||!r.overwrite){if(await ht.exists(o)){if(!r.overwrite)throw As(p(1943,null),se.FileExists)}else if(!r.create)throw As(p(1944,null),se.FileNotFound)}n=await this.open(t,{create:!0,unlock:r.unlock},s),await this.write(n,0,i,0,i.byteLength)}catch(o){throw await this.jb(t,o)}finally{typeof n=="number"&&await this.close(n)}}static{this.ab=!0}static configureFlushOnWrite(t){Oh.ab=t}async open(t,i,r){const s=this.J(t);let n;Dl(i)&&!r&&(n=await this.R(t));let o;try{if(Dl(i)&&i.unlock)try{const{stat:c}=await Cr.stat(s);c.mode&128||await qn.chmod(s,c.mode|128)}catch(c){c.code!=="ENOENT"&&this.a.trace(c)}let a;if(Dl(i)){if(it)try{await qn.truncate(s,0),a="r+"}catch(c){c.code!=="ENOENT"&&this.a.trace(c)}a||(a="w")}else a="r";o=await ht.open(s,a)}catch(a){throw n?.dispose(),Dl(i)?await this.jb(t,a):this.ib(a)}if(this.Y.set(o,0),Dl(i)&&this.$.set(o,t),n){const a=this.Z.get(o);this.S(`[Disk FileSystemProvider]: open() - storing lock for handle ${o} (${s})`),this.Z.set(o,n),a&&(this.S(`[Disk FileSystemProvider]: open() - disposing a previous lock that was still stored on same handle ${o} (${s})`),a.dispose())}return o}async close(t){const i=this.Z.get(t);try{if(this.Y.delete(t),this.$.delete(t)&&Oh.ab)try{await ht.fdatasync(t)}catch(r){Oh.configureFlushOnWrite(!1),this.a.error(r)}return await ht.close(t)}catch(r){throw this.ib(r)}finally{i&&(this.Z.get(t)===i&&(this.S(`[Disk FileSystemProvider]: close() - resource lock removed from handle-lock map ${t}`),this.Z.delete(t)),this.S(`[Disk FileSystemProvider]: close() - disposing lock for handle ${t}`),i.dispose())}}async read(t,i,r,s,n){const o=this.bb(t,i);let a=null;try{a=(await ht.read(t,r,s,n,o)).bytesRead}catch(c){throw this.ib(c)}finally{this.cb(t,o,a)}return a}bb(t,i){return i===this.Y.get(t)?null:i}cb(t,i,r){const s=this.Y.get(t);typeof s=="number"&&(typeof i=="number"||(typeof r=="number"?this.Y.set(t,s+r):this.Y.delete(t)))}async write(t,i,r,s,n){return gR(()=>this.db(t,i,r,s,n),100,3)}async db(t,i,r,s,n){const o=this.bb(t,i);let a=null;try{a=(await ht.write(t,r,s,n,o)).bytesWritten}catch(c){throw await this.jb(this.$.get(t),c)}finally{this.cb(t,o,a)}return a}async mkdir(t){try{await qn.mkdir(this.J(t))}catch(i){throw this.ib(i)}}async delete(t,i){try{const r=this.J(t);if(i.recursive){let s;i?.atomic!==!1&&i.atomic.postfix&&(s=rt(wi(r),`${ut(r)}${i.atomic.postfix}`)),await ht.rm(r,ao.MOVE,s)}else try{await qn.unlink(r)}catch(s){if(s.code==="EPERM"||s.code==="EISDIR"){let n=!1;try{const{stat:o,symbolicLink:a}=await Cr.stat(r);n=o.isDirectory()&&!a}catch{}if(n)await qn.rmdir(r);else throw s}else throw s}}catch(r){throw this.ib(r)}}async rename(t,i,r){const s=this.J(t),n=this.J(i);if(s!==n)try{await this.eb(t,i,"move",r.overwrite),await ht.rename(s,n)}catch(o){throw(o.code==="EINVAL"||o.code==="EBUSY"||o.code==="ENAMETOOLONG")&&(o=new Error(p(1945,null,ut(s),ut(wi(n)),o.toString()))),this.ib(o)}}async copy(t,i,r){const s=this.J(t),n=this.J(i);if(s!==n)try{await this.eb(t,i,"copy",r.overwrite),await ht.copy(s,n,{preserveSymlinks:!0})}catch(o){throw(o.code==="EINVAL"||o.code==="EBUSY"||o.code==="ENAMETOOLONG")&&(o=new Error(p(1946,null,ut(s),ut(wi(n)),o.toString()))),this.ib(o)}}async eb(t,i,r,s){const n=this.J(t),o=this.J(i);let a=!1;if(!!(this.capabilities&1024)||(a=Xm(n,o,!0)),a){if(r==="copy")throw As(p(1947,null),se.FileExists);if(r==="move")return}const l=await this.O(t);if(!l)throw As(p(1948,null),se.FileNotFound);const u=await this.O(i);if(u){if(!s)throw As(p(1949,null),se.FileExists);l.type&zi.File&&u.type&zi.File||await this.delete(i,{recursive:!0,useTrash:!1,atomic:!1})}}async cloneFile(t,i){return this.fb(t,i,!1)}async fb(t,i,r){const s=this.J(t),n=this.J(i),o=!!(this.capabilities&1024);if(Xm(s,n,!o))return;const a=new ue;try{a.add(await this.R(t)),a.add(await this.R(i)),r&&await qn.mkdir(wi(n),{recursive:!0}),await qn.copyFile(s,n)}catch(c){if(c.code==="ENOENT"&&!r)return this.fb(t,i,!0);throw this.ib(c)}finally{a.dispose()}}u(t,i,r){return new Fz(s=>t(s),s=>i(s),r)}G(t,i,r){return new zz(s=>t(s),s=>i(s),r)}ib(t){if(t instanceof Fd)return t;let i=t,r;switch(t.code){case"ENOENT":r=se.FileNotFound;break;case"EISDIR":r=se.FileIsADirectory;break;case"ENOTDIR":r=se.FileNotADirectory;break;case"EEXIST":r=se.FileExists;break;case"EPERM":case"EACCES":r=se.NoPermissions;break;case"ERR_UNC_HOST_NOT_ALLOWED":i=`${t.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`,r=se.Unknown;break;default:r=se.Unknown}return As(i,r)}async jb(t,i){let r=this.ib(i);if(t&&r.code===se.NoPermissions)try{const{stat:s}=await Cr.stat(this.J(t));s.mode&128||(r=As(i,se.FileWriteLocked))}catch(s){this.a.trace(s)}return r}},Wy=class{constructor(t,i){t.addFileSystemProvider(z.file,new qz(i),{isCaseSensitive:At})}};Wy=__decorate([__param(0,qu),__param(1,Ce)],Wy);var qz=class{constructor(e){this.b=e,this.a=new Vz(this.b)}async stat(e){const t=await this.a.stat(e);return{type:t.type,ctime:t.ctime,mtime:t.mtime,size:t.size,permissions:t.permissions===bn.Readonly?1:void 0}}readDirectory(e){return this.a.readdir(e)}createDirectory(e){return this.a.mkdir(e)}readFile(e){return this.a.readFile(e)}writeFile(e,t,i){return this.a.writeFile(e,t,{...i,unlock:!1,atomic:!1})}delete(e,t){return this.a.delete(e,{...t,useTrash:!1,atomic:!1})}rename(e,t,i){return this.a.rename(e,t,i)}copy(e,t,i){return this.a.copy(e,t,i)}get onDidChangeFile(){throw new Error("Method not implemented.")}watch(e,t){throw new Error("Method not implemented.")}};import{createRequire as Gz}from"node:module";var zy=class extends X{constructor(t){super(),t.registerCommand(!0,"icube.cloudide.rpcPing",async()=>"pong")}};zy=__decorate([__param(0,rr)],zy);import*as S3 from"fs";import{exec as Jz}from"child_process";import{promisify as Qz}from"util";var Yz="/sys/fs/cgroup/cpu/cpu.cfs_quota_us",Xz="/sys/fs/cgroup/cpu/cpu.cfs_period_us",x3="/sys/fs/cgroup/cpu/cpuacct.usage",Zz="/sys/fs/cgroup/memory/memory.usage_in_bytes",Kz="/sys/fs/cgroup/memory/memory.stat",eV="/sys/fs/cgroup/memory/memory.limit_in_bytes";async function tV(){const[e,t,i]=await Promise.all([Uc(Yz),Uc(Xz),Uc(x3)]);await nV(1e3);const r=await Uc(x3),s=e/t,n=(r-i)/s/1e7;return{cores:s,usage:n}}async function Uc(e){const t=await S3.promises.readFile(e);return parseFloat(t.toString())}async function iV(e){const i=(await S3.promises.readFile(e)).toString().split(`
`);let r;return i.forEach(n=>{n.startsWith("total_inactive_file")&&(r=n.split(" ")[1])}),parseFloat(r||"0")}async function rV(){const[e,t,i]=await Promise.all([Uc(Zz),Uc(eV),iV(Kz)]);return{real:e,max:t,inactive:i}}var sV=e=>Math.ceil(e*10)/10;function nV(e){return new Promise(t=>setTimeout(t,e))}async function oV(){const t=(await Qz(Jz)("df -h $IDE_WORKSPACE")).stdout.trim().split(`
`),i=t[0].split(/\s+/),r=t[1].split(/\s+/),s=i.indexOf("Size"),n=i.indexOf("Used");if(s===-1||n===-1||t.length<2)return{size:1,used:0};const o=a=>{let c=1;const l=a.charAt(a.length-1),u=parseFloat(a.substring(0,a.length-1));switch(l.toUpperCase()){case"K":c=1;break;case"M":c=Math.pow(1024,1);break;case"G":c=Math.pow(1024,2);break;case"T":c=Math.pow(1024,3);break}return sV(c*u/1024/1024)};return{size:o(r[s]),used:o(r[n])}}var Vy=class extends X{constructor(t){super(),t.registerCommand(!0,"icube.cloudide.getQuota",()=>Promise.all([tV(),rV(),oV()]).then(([i,r,s])=>({cpu:i,memory:r,disk:s})))}};Vy=__decorate([__param(0,rr)],Vy);var k3=Gz(import.meta.url),aV=class extends Oy{j(){const e=this,t=k3("module"),i=t._load;t._load=function(a,c,l){return a=n(a),e.a.has(a)?e.a.get(a).load(a,E.file(KR(c.filename)),u=>i.apply(this,[u,c,l])):i.apply(this,arguments)};const r=t._resolveLookupPaths;t._resolveLookupPaths=(o,a)=>r.call(this,n(o),a);const s=t._resolveFilename;t._resolveFilename=function(a,c,l,u){return a==="vsda"&&Array.isArray(u?.paths)&&u?.paths.length===0&&(u.paths=t._nodeModulePaths(import.meta.dirname)),s.call(this,a,c,l,u)};const n=o=>{for(const a of e.b){const c=a(o);if(c){o=c;break}}return o}}},cV=class extends tb{constructor(){super(...arguments),this.extensionRuntime=ep.Node}async vb(){this.h.createInstance(Hy);const e=this.h.invokeFunction(iz);if(this.h.createInstance(Uy),this.h.createInstance(zy),this.h.createInstance(Vy),this.f.remote.isRemote&&this.f.remote.authority){const r=this.h.createInstance(_y);process.env.VSCODE_IPC_HOOK_CLI=r.ipcHandlePath}this.h.createInstance(Wy),await this.h.createInstance(aV,e,{mine:this.J,all:this.L}).install(),Ct("code/extHost/didInitAPI");const i=await this.m.getConfigProvider();await lz(this.j,i,this,this.s,this.z,this.f,this.q),Ct("code/extHost/didInitProxyResolver")}wb(e){return e.main}yb(e,t){try{process.env.CLOUDIDE_WORKSPACEPATH&&e.id&&wH.writeFile(rt(process.env.CLOUDIDE_WORKSPACEPATH,".icube","performance"),`${t} ${e.id} ${Date.now()}
`,{flag:"a"},()=>{})}catch{}}async xb(e,t,i){if(e&&this.yb(e,"willLoadExtensionCode"),t.scheme!==z.file)throw new Error(`Cannot load URI: '${t}', must be of file-scheme`);let r=null;i.codeLoadingStart(),this.s.trace(`ExtensionService#loadCommonJSModule ${t.toString(!0)}`),this.s.flush();const s=e?.identifier.value;e&&await this.w.initializeLocalizedMessages(e);try{s&&Ct(`code/extHost/willLoadExtensionCode/${s}`),r=k3(t.fsPath)}finally{s&&Ct(`code/extHost/didLoadExtensionCode/${s}`),i.codeLoadingStop()}return r}async $setRemoteEnvironment(e){if(this.f.remote.isRemote)for(const t in e){const i=e[t];i===null?delete process.env[t]:process.env[t]=i}}};import*as xh from"fs";import{exec as $3}from"child_process";var lV=(e,t,i)=>{const r=new Uint8Array(16);for(let o=0;o<16;o++)r[o]=Math.round(Math.random()*256);const s=dd(J.wrap(r));return[`GET ws://localhost${e}?${t}&skipWebSocketFrames=true HTTP/1.1`,"Connection: Upgrade","Upgrade: websocket",`Sec-WebSocket-Key: ${s}`].join(`\r
`)+`\r
\r
`},C3=J.fromString(`\r
\r
`);async function uV(e,t,i,r,s){e.write(J.fromString(lV(t,i,r)));const n=new ue;try{return await new Promise((o,a)=>{let c;n.add(e.onData(l=>{c?c=J.concat([c,l],c.byteLength+l.byteLength):c=l;const u=c.indexOf(C3);if(u===-1)return;o(e),e.pauseData();const h=c.slice(u+C3.byteLength);h.byteLength&&s.onData.fire(h)})),n.add(e.onClose(l=>a(l??new Error("socket closed")))),n.add(e.onEnd(()=>a(new Error("socket ended"))))})}catch(o){throw e.dispose(),o}finally{n.dispose()}}var hV=class extends X{constructor(e,t){super(),this.g=e,this.a=this.B(new tl),this.onData=(...i)=>(this.a.isPaused&&queueMicrotask(()=>this.a.resume()),this.a.event(...i)),this.b=this.B(new I),this.onDidDispose=this.b.event,this.f=!1,this.B(t.onData),this.B(t.onData.event(i=>this.a.fire(i))),this.onClose=this.B(t.onClose).event,this.onEnd=this.B(t.onEnd).event}pauseData(){this.a.pause()}drain(){return Promise.resolve()}end(){this.f=!0,this.h()}traceSocketEvent(e,t){mn.traceSocketEvent(this,this.g,e,t)}dispose(){this.f||this.h(),this.b.fire(),super.dispose()}},dV="signService",kh=V(dV);import*as fV from"net";import*as pV from"os";import*as gV from"net";var I3={1:!0,7:!0,9:!0,11:!0,13:!0,15:!0,17:!0,19:!0,20:!0,21:!0,22:!0,23:!0,25:!0,37:!0,42:!0,43:!0,53:!0,69:!0,77:!0,79:!0,87:!0,95:!0,101:!0,102:!0,103:!0,104:!0,109:!0,110:!0,111:!0,113:!0,115:!0,117:!0,119:!0,123:!0,135:!0,137:!0,139:!0,143:!0,161:!0,179:!0,389:!0,427:!0,465:!0,512:!0,513:!0,514:!0,515:!0,526:!0,530:!0,531:!0,532:!0,540:!0,548:!0,554:!0,556:!0,563:!0,587:!0,601:!0,636:!0,989:!0,990:!0,993:!0,995:!0,1719:!0,1720:!0,1723:!0,2049:!0,3659:!0,4045:!0,5060:!0,5061:!0,6e3:!0,6566:!0,6665:!0,6666:!0,6667:!0,6668:!0,6669:!0,6697:!0,10080:!0};function mV(e,t,i,r="127.0.0.1"){let s=!1,n,o=1;const a=gV.createServer({pauseOnConnect:!0});function c(l,u){s||(s=!0,a.removeAllListeners(),a.close(),n&&clearTimeout(n),u(l))}return new Promise(l=>{n=setTimeout(()=>{c(0,l)},i),a.on("listening",()=>{c(e,l)}),a.on("error",u=>{u&&(u.code==="EADDRINUSE"||u.code==="EACCES")&&o<t?(e++,o++,a.listen(e,r)):c(0,l)}),a.on("close",()=>{c(0,l)}),a.listen(e,r)})}var P3={},D3=30*1e3,A3;(function(e){e[e.Management=1]="Management",e[e.ExtensionHost=2]="ExtensionHost",e[e.Tunnel=3]="Tunnel",e[e.Download=128]="Download"})(A3||(A3={}));function pi(e){switch(e){case 1:return"Management";case 2:return"ExtensionHost";case 3:return"Tunnel";case 128:return"Download"}}function qy(e){const t=new lt;return setTimeout(()=>t.cancel(),e),t.token}function vV(e,t){if(e.isCancellationRequested||t.isCancellationRequested)return Ge.Cancelled;const i=new lt;return e.onCancellationRequested(()=>i.cancel()),t.onCancellationRequested(()=>i.cancel()),i.token}var Gy=class{get didTimeout(){return this.c==="timedout"}constructor(e){this.c="pending",this.d=new ue,{promise:this.promise,resolve:this.f,reject:this.g}=aE(),e.isCancellationRequested?this.h():this.d.add(e.onCancellationRequested(()=>this.h()))}registerDisposable(e){this.c==="pending"?this.d.add(e):e.dispose()}h(){this.c==="pending"&&(this.d.dispose(),this.c="timedout",this.g(this.i()))}i(){const e=new Error("Time limit reached");return e.code="ETIMEDOUT",e.syscall="connect",e}resolve(e){this.c==="pending"&&(this.d.dispose(),this.c="resolved",this.f(e))}reject(e){this.c==="pending"&&(this.d.dispose(),this.c="rejected",this.g(e))}};function wV(e,t){const i=new Gy(t);return i.registerDisposable(e.onControlMessage(r=>{const s=JSON.parse(r.toString()),n=kV(s);n?i.reject(n):i.resolve(s)})),i.promise}function bV(e,t,i,r,s,n,o,a){const c=new Gy(a),l=ri.create(!1);return e.info(`Creating a socket (${o})...`),Ct(`code/willCreateSocket/${n}`),t.connect(i,r,s,o).then(u=>{c.didTimeout?(Ct(`code/didCreateSocketError/${n}`),e.info(`Creating a socket (${o}) finished after ${l.elapsed()} ms, but this is too late and has timed out already.`),Xt(`Creating a socket (${o}) finished after ${l.elapsed()} ms, but this is too late and has timed out already. will dispose socket`,n),u?.dispose()):(Ct(`code/didCreateSocketOK/${n}`),e.info(`Creating a socket (${o}) was successful after ${l.elapsed()} ms.`),Xt(`Creating a socket (${o}) was successful after ${l.elapsed()} ms.`,n),c.resolve(u))},u=>{Ct(`code/didCreateSocketError/${n}`),e.info(`Creating a socket (${o}) returned an error after ${l.elapsed()} ms.`),Xt(`Creating a socket (${o}) returned an error after ${l.elapsed()} ms. Error: ${Ei(u)}`,n),c.reject(u)}),c.promise}function Jy(e,t){const i=new Gy(t);return e.then(r=>{i.didTimeout||i.resolve(r)},r=>{i.didTimeout||i.reject(r)}),i.promise}function Xt(e,t){const i=P3.serviceCollection?.get(bM);!i||i instanceof Kr||i.publicLog2("remoteAgentConnectionState",{connectionType:typeof t=="string"?t:pi(t),trace:e})}async function yV(e,t,i,r){const s=M3(e,t);e.logService.trace(`${s} 1/6. invoking socketFactory.connect().`),Xt("invoking socketFactory.connect()",t);let n;try{const u=globalThis;n=u.__vscodeCachedSocket||await bV(e.logService,e.remoteSocketFactoryService,e.connectTo,Z5.getServerRootPath(),`reconnectionToken=${e.reconnectionToken}&reconnection=${e.reconnectionProtocol?"true":"false"}`,pi(t),`renderer-${pi(t)}-${e.reconnectionToken}`,r),u.__vscodeCachedSocket&&(u.__vscodeCachedSocket.vscodeVars.VSBuffer=J,delete u.__vscodeCachedSocket)}catch(u){throw e.logService.error(`${s} socketFactory.connect() failed or timed out. Error:`),Xt(`socketFactory.connect() failed or timed out. Error: ${Ei(u)}`,t),u}e.logService.trace(`${s} 2/6. socketFactory.connect() was successful.`),Xt("socketFactory.connect() was successful.",t);let o,a;e.reconnectionProtocol?(e.reconnectionProtocol.beginAcceptReconnection(n,null),o=e.reconnectionProtocol,a=!1):(o=new g1({socket:n}),a=!0),e.logService.trace(`${s} 3/6. sending AuthRequest control message.`),Xt("sending AuthRequest control message.",t);const c=await Jy(e.signService.createNewMessage(Ht()),r),l={type:"auth",auth:e.connectionToken||"00000000000000000000",data:c.data};o.sendControl(J.fromString(JSON.stringify(l)));try{const u=await wV(o,vV(r,qy(1e4)));if(u.type!=="sign"||typeof u.data!="string"){const g=new Error("Unexpected handshake message");throw g.code="VSCODE_CONNECTION_ERROR",g}if(P3.multiContainerOptions=u.payload,e.logService.trace(`${s} 4/6. received SignRequest control message.`),Xt("received SignRequest control message.",t),!await Jy(e.signService.validate(c,u.signedData),r)){const g=new Error("Refused to connect to unsupported server");throw g.code="VSCODE_CONNECTION_ERROR",g}const d=await Jy(e.signService.sign(u.data),r),f={type:"connectionType",commit:e.commit,signedData:d,desiredConnectionType:t};return i&&(f.args=i),t===2&&(f.args={...i,product:{iCubeApp:Cs.iCubeApp}}),e.logService.trace(`${s} 5/6. sending ConnectionTypeRequest control message.`),Xt("sending ConnectionTypeRequest control message.",t),o.sendControl(J.fromString(JSON.stringify(f))),{protocol:o,ownsProtocol:a}}catch(u){throw u&&u.code==="ETIMEDOUT"&&(e.logService.error(`${s} the handshake timed out. Error:`),Xt(`the handshake timed out. Error: ${Ei(u)}`,t)),u&&u.code==="VSCODE_CONNECTION_ERROR"&&(e.logService.error(`${s} received error control message when negotiating connection. Error:`),Xt(`received error control message when negotiating connection. Error: ${Ei(u)}`,t)),a&&Yy(o,pi(t)),u}}async function EV(e,t,i){const r=Date.now(),s=M3(e,3),{protocol:n}=await yV(e,3,t,i);return e.logService.trace(`${s} 6/6. handshake finished, connection is up and running after ${U3(r)}!`),Xt(`handshake finished, connection is up and running after ${U3(r)}!`,3),n}async function Qy(e,t,i){const{connectTo:r,connectionToken:s}=await e.addressProvider.getAddress();return{commit:e.commit,quality:e.quality,connectTo:r,connectionToken:s,reconnectionToken:t,reconnectionProtocol:i,remoteSocketFactoryService:e.remoteSocketFactoryService,signService:e.signService,logService:e.logService}}async function SV(e,t,i){const r=await Qy(e,Ht(),null);return await EV(r,{host:t,port:i},Ge.None)}function R3(e){return Qr(t=>new Promise((i,r)=>{const s=setTimeout(i,e*1e3);t.onCancellationRequested(()=>{clearTimeout(s),i()})}))}var T3;(function(e){e[e.ConnectionLost=0]="ConnectionLost",e[e.ReconnectionWait=1]="ReconnectionWait",e[e.ReconnectionRunning=2]="ReconnectionRunning",e[e.ReconnectionPermanentFailure=3]="ReconnectionPermanentFailure",e[e.ConnectionGain=4]="ConnectionGain"})(T3||(T3={}));var L3=class{constructor(e,t,i){this.reconnectionToken=e,this.millisSinceLastIncomingData=t,this.connectionType=i,this.type=0}},N3=class{constructor(e,t,i,r){this.reconnectionToken=e,this.millisSinceLastIncomingData=t,this.durationSeconds=i,this.c=r,this.type=1}skipWait(){this.c.cancel()}},O3=class{constructor(e,t,i,r){this.reconnectionToken=e,this.millisSinceLastIncomingData=t,this.attempt=i,this.connectionType=r,this.type=2}},am=class{constructor(e,t,i,r,s){this.reconnectionToken=e,this.millisSinceLastIncomingData=t,this.millisSinceLastLost=i,this.attempt=r,this.connectionType=s,this.type=4}},F3=class{constructor(e,t,i,r,s){this.reconnectionToken=e,this.millisSinceLastIncomingData=t,this.attempt=i,this.handled=r,this.connectionType=s,this.type=3}},xV=class tn extends X{static triggerPermanentFailure(t,i,r){this._permanentFailure=!0,this.f=t,this.g=i,this.h=r,this.j.forEach(s=>s.F(this.f,this.g,this.h))}static debugTriggerReconnection(){this.j.forEach(t=>t.z())}static debugPauseSocketWriting(){this.j.forEach(t=>t.G())}static{this._permanentFailure=!1}static{this.f=0}static{this.g=0}static{this.h=!1}static{this.j=[]}get n(){return this.c||tn._permanentFailure}constructor(t,i,r,s,n){super(),this.u=t,this.w=i,this.reconnectionToken=r,this.protocol=s,this.y=n,this.m=this.B(new I),this.onDidStateChange=this.m.event,this.c=!1,this.r=!1,this.s=!1,this.t=!1,this.m.fire(new am(this.reconnectionToken,0,0,0,pi(this.u))),this.B(s.onSocketClose(o=>{const a=Yo(this.u,this.reconnectionToken,!0);if(!o)this.w.logService.info(`${a} received socket close event.`),Xt("received socket close event.",this.u);else if(o.type===0){if(this.w.logService.info(`${a} received socket close event (hadError: ${o.hadError}).`),Xt(`received socket close event (hadError: ${o.hadError}).`,this.u),o.error?.message?.includes(kv)){this.t=!0;return}o.error&&Xt(Ei(o.error),this.u)}else this.w.logService.info(`${a} received socket close event (wasClean: ${o.wasClean}, code: ${o.code}, reason: ${o.reason}).`),Xt(`received socket close event (wasClean: ${o.wasClean}, code: ${o.code}, reason: ${o.reason}).`,this.u),o.event&&Xt(Ei(o.event),this.u);this.z()})),this.B(s.onSocketTimeout(o=>{if(this.t)return;const a=Yo(this.u,this.reconnectionToken,!0);this.w.logService.info(`${a} received socket timeout event (unacknowledgedMsgCount: ${o.unacknowledgedMsgCount}, timeSinceOldestUnacknowledgedMsg: ${o.timeSinceOldestUnacknowledgedMsg}, timeSinceLastReceivedSomeData: ${o.timeSinceLastReceivedSomeData}).`),Xt(`received socket timeout event (unacknowledgedMsgCount: ${o.unacknowledgedMsgCount}, timeSinceOldestUnacknowledgedMsg: ${o.timeSinceOldestUnacknowledgedMsg}, timeSinceLastReceivedSomeData: ${o.timeSinceLastReceivedSomeData}).`,this.u),this.z()})),tn.j.push(this),this.B(ee(()=>{const o=tn.j.indexOf(this);o>=0&&tn.j.splice(o,1)})),this.n&&this.F(tn.f,tn.g,tn.h)}dispose(){super.dispose(),this.s=!0}async z(){if(!this.r)try{this.r=!0,await this.C()}finally{this.r=!1}}async C(){if(this.n||this.s)return;const t=Yo(this.u,this.reconnectionToken,!0);this.w.logService.info(`${t} starting reconnecting loop. You can get more information with the trace log level.`);const i=Date.now();this.m.fire(new L3(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData(),pi(this.u)));const r=[0,5,5,10,10,10,10,10,30];let s=-1;do{s++;const n=s<r.length?r[s]:r[r.length-1];try{if(n>0){const a=R3(n);this.m.fire(new N3(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData(),n,a)),this.w.logService.info(`${t} waiting for ${n} seconds before reconnecting...`);try{await a}catch{}}if(this.n){this.w.logService.error(`${t} permanent failure occurred while running the reconnecting loop.`);break}this.m.fire(new O3(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData(),s+1,pi(this.u))),this.w.logService.info(`${t} resolving connection...`);const o=await Qy(this.w,this.reconnectionToken,this.protocol);this.w.logService.info(`${t} connecting to ${o.connectTo}...`),await this.H(o,qy(D3)),this.w.logService.info(`${t} reconnected!`),this.m.fire(new am(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData(),s+1,Date.now()-i,pi(this.u)));break}catch(o){if(o.code==="VSCODE_CONNECTION_ERROR"){this.w.logService.error(`${t} A permanent error occurred in the reconnecting loop! Will give up now! Error:`),this.y&&this.w.logService.error(o),this.D(this.protocol.getMillisSinceLastIncomingData(),s+1,!1);break}if(s>360){this.w.logService.error(`${t} An error occurred while reconnecting, but it will be treated as a permanent error because the reconnection grace time has expired! Will give up now! Error:`),this.y&&this.w.logService.error(o),this.D(this.protocol.getMillisSinceLastIncomingData(),s+1,!1);break}if(kn.isTemporarilyNotAvailable(o)||o?.error?.message?.includes("TemporarilyNotAvailable")){this.w.logService.info(`${t} A temporarily not available error occurred while trying to reconnect, will try again...`),this.w.logService.trace(o);continue}if((o.code==="ETIMEDOUT"||o.code==="ENETUNREACH"||o.code==="ECONNREFUSED"||o.code==="ECONNRESET")&&o.syscall==="connect"){this.w.logService.info(`${t} A network error occurred while trying to reconnect, will try again...`),this.w.logService.trace(o);continue}if(zr(o)){this.w.logService.info(`${t} A promise cancelation error occurred while trying to reconnect, will try again...`),this.w.logService.trace(o);continue}if(o instanceof kn){this.w.logService.error(`${t} A RemoteAuthorityResolverError occurred while trying to reconnect. Will give up now! Error:`),this.y&&this.w.logService.error(o),this.D(this.protocol.getMillisSinceLastIncomingData(),s+1,kn.isHandled(o));break}this.w.logService.error(`${t} An unknown error occurred while trying to reconnect, since this is an unknown case, it will be treated as a permanent error! Will give up now! Error:`),this.y&&this.w.logService.error(o),this.D(this.protocol.getMillisSinceLastIncomingData(),s+1,kn.isHandled(o));break}}while(!this.n&&!this.s)}D(t,i,r){this.y?tn.triggerPermanentFailure(t,i,r):this.F(t,i,r)}F(t,i,r){this.m.fire(new F3(this.reconnectionToken,t,i,r,pi(this.u))),Yy(this.protocol,pi(this.u))}G(){this.protocol.pauseSocketWriting()}},gee=class Yn extends X{static triggerPermanentFailure(t,i,r){this._permanentFailure=!0,this.f=t,this.g=i,this.h=r,this.j.forEach(s=>s.F(this.f,this.g,this.h))}static debugTriggerReconnection(){this.j.forEach(t=>t.z())}static debugPauseSocketWriting(){this.j.forEach(t=>t.G())}static{this._permanentFailure=!1}static{this.f=0}static{this.g=0}static{this.h=!1}static{this.j=[]}get n(){return this.c||Yn._permanentFailure}constructor(t,i,r,s,n){super(),this.u=t,this.w=i,this.reconnectionToken=r,this.protocol=s,this.y=n,this.m=this.B(new I),this.onDidStateChange=this.m.event,this.c=!1,this.r=!1,this.s=!1,this.t=!1,this.m.fire(new am(this.reconnectionToken,0,0,0,pi(this.u))),this.B(s.onSocketClose(o=>{const a=Yo(this.u,this.reconnectionToken,!0);if(!o)this.w.logService.info(`${a} received socket close event.`);else if(o.type===0){if(this.w.logService.info(`${a} received socket close event (hadError: ${o.hadError}).`),o.error?.message?.includes(kv)){this.t=!0;return}}else this.w.logService.info(`${a} received socket close event (wasClean: ${o.wasClean}, code: ${o.code}, reason: ${o.reason}).`);this.z()})),this.B(s.onSocketTimeout(o=>{if(this.t)return;const a=Yo(this.u,this.reconnectionToken,!0);this.w.logService.info(`${a} received socket timeout event (unacknowledgedMsgCount: ${o.unacknowledgedMsgCount}, timeSinceOldestUnacknowledgedMsg: ${o.timeSinceOldestUnacknowledgedMsg}, timeSinceLastReceivedSomeData: ${o.timeSinceLastReceivedSomeData}).`),this.z()})),Yn.j.push(this),this.B(ee(()=>{const o=Yn.j.indexOf(this);o>=0&&Yn.j.splice(o,1)})),this.n&&this.F(Yn.f,Yn.g,Yn.h)}dispose(){super.dispose(),this.s=!0}async z(){if(!this.r)try{this.r=!0,await this.C()}finally{this.r=!1}}async C(){if(this.n||this.s)return;const t=Yo(this.u,this.reconnectionToken,!0);this.w.logService.info(`${t} starting reconnecting loop. You can get more information with the trace log level.`);const i=Date.now();this.m.fire(new L3(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData(),pi(this.u)));const r=[0,5,5,10,10,10,10,10,30];let s=-1;do{s++;const n=s<r.length?r[s]:r[r.length-1];try{if(n>0){const a=R3(n);this.m.fire(new N3(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData(),n,a)),this.w.logService.info(`${t} waiting for ${n} seconds before reconnecting...`);try{await a}catch{}}if(this.n){this.w.logService.error(`${t} permanent failure occurred while running the reconnecting loop.`);break}this.m.fire(new O3(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData(),s+1,pi(this.u))),this.w.logService.info(`${t} resolving connection...`);const o=await Qy(this.w,this.reconnectionToken,this.protocol);this.w.logService.info(`${t} connecting to ${o.connectTo}...`),await this.H(o,qy(D3)),this.w.logService.info(`${t} reconnected!`),this.m.fire(new am(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData(),Date.now()-i,s+1,pi(this.u)));break}catch(o){if(o.code==="VSCODE_CONNECTION_ERROR"){this.w.logService.error(`${t} A permanent error occurred in the reconnecting loop! Will give up now! Error:`),this.y&&this.w.logService.error(o),this.D(this.protocol.getMillisSinceLastIncomingData(),s+1,!1);break}if(s>360){this.w.logService.error(`${t} An error occurred while reconnecting, but it will be treated as a permanent error because the reconnection grace time has expired! Will give up now! Error:`),this.y&&this.w.logService.error(o),this.D(this.protocol.getMillisSinceLastIncomingData(),s+1,!1);break}if(kn.isTemporarilyNotAvailable(o)||o?.error?.message?.includes("TemporarilyNotAvailable")){this.w.logService.info(`${t} A temporarily not available error occurred while trying to reconnect, will try again...`),this.w.logService.trace(o);continue}if((o.code==="ETIMEDOUT"||o.code==="ENETUNREACH"||o.code==="ECONNREFUSED"||o.code==="ECONNRESET")&&o.syscall==="connect"){this.w.logService.info(`${t} A network error occurred while trying to reconnect, will try again...`),this.w.logService.trace(o);continue}if(zr(o)){this.w.logService.info(`${t} A promise cancelation error occurred while trying to reconnect, will try again...`),this.w.logService.trace(o);continue}if(o instanceof kn){this.w.logService.error(`${t} A RemoteAuthorityResolverError occurred while trying to reconnect. Will give up now! Error:`),this.y&&this.w.logService.error(o),this.D(this.protocol.getMillisSinceLastIncomingData(),s+1,kn.isHandled(o));break}this.w.logService.error(`${t} An unknown error occurred while trying to reconnect, since this is an unknown case, it will be treated as a permanent error! Will give up now! Error:`),this.y&&this.w.logService.error(o),this.D(this.protocol.getMillisSinceLastIncomingData(),s+1,kn.isHandled(o));break}}while(!this.n&&!this.s)}D(t,i,r){this.y?xV.triggerPermanentFailure(t,i,r):this.F(t,i,r)}F(t,i,r){this.m.fire(new F3(this.reconnectionToken,t,i,r,pi(this.u))),Yy(this.protocol,pi(this.u))}G(){this.protocol.pauseSocketWriting()}};function Yy(e,t){try{e.acceptDisconnect();const i=e.getSocket();e.dispose(),i.dispose(),Xt("safeDisposeProtocolAndSocket",t)}catch(i){Et(i),Xt(`got error when safeDisposeProtocolAndSocket, Error: ${Ei(i)}`,t)}}function kV(e){if(e&&e.type==="error"){const t=new Error(`Connection error: ${e.reason}`);return t.code="VSCODE_CONNECTION_ERROR",t}return null}function $V(e,t){for(;e.length<t;)e+=" ";return e}function CV(e,t){return`[remote-connection][${$V(pi(e),13)}][${t.substr(0,5)}\u2026]`}function Yo(e,t,i){return`${CV(e,t)}[${i?"reconnect":"initial"}]`}function M3(e,t){return`${Yo(t,e.reconnectionToken,!!e.reconnectionProtocol)}[${e.connectTo}]`}function U3(e){return`${Date.now()-e} ms`}var Xy=V("remoteSocketFactoryService");async function IV(e,t,i,r,s){let n;for(let o=3;o&&(n?.dispose(),n=await new _3(e,t,i,r,s).waitForReady(),!(s&&I3[s]||!I3[n.tunnelLocalPort]));o--);return n}var _3=class extends X{constructor(e,t,i,r,s){super(),this.m=t,this.n=s,this.privacy=cs.Private,this.j=new Map,this.a=e,this.b=fV.createServer(),this.c=new ur,this.f=()=>this.c.open(),this.b.on("listening",this.f),this.g=n=>this.r(n),this.b.on("connection",this.g),this.h=()=>{},this.b.on("error",this.h),this.tunnelRemotePort=r,this.tunnelRemoteHost=i}async dispose(){super.dispose(),this.b.removeListener("listening",this.f),this.b.removeListener("connection",this.g),this.b.removeListener("error",this.h),this.b.close(),Array.from(this.j.values()).forEach(t=>{t()})}async waitForReady(){const e=this.n??this.tunnelRemotePort,t=Bs(this.m)?"0.0.0.0":"127.0.0.1";let i=await mV(e,2,1e3,t),r=null;return this.b.listen(i,this.m),await this.c.wait(),r=this.b.address(),r||(i=0,this.b.listen(i,this.m),await this.c.wait(),r=this.b.address()),this.tunnelLocalPort=r.port,this.localAddress=`${this.tunnelRemoteHost==="127.0.0.1"?"127.0.0.1":"localhost"}:${r.port}`,this}async r(e){e.pause();const t=Wo(this.tunnelRemoteHost)||Bs(this.tunnelRemoteHost)?"localhost":this.tunnelRemoteHost,i=await SV(this.a,t,this.tunnelRemotePort),r=i.getSocket(),s=i.readEntireBuffer();i.dispose(),s.byteLength>0&&e.write(s.buffer),e.on("end",()=>{e.localAddress&&this.j.delete(e.localAddress),r.end()}),e.on("close",()=>r.end()),e.on("error",()=>{e.localAddress&&this.j.delete(e.localAddress),r instanceof hl?r.socket.destroy():r.end()}),r instanceof hl?this.t(e,r):this.s(e,r),e.localAddress&&this.j.set(e.localAddress,()=>{e.end(),r.end()})}s(e,t){t.onClose(()=>e.destroy()),t.onEnd(()=>e.end()),t.onData(i=>e.write(i.buffer)),e.on("data",i=>t.write(J.wrap(i))),e.resume()}t(e,t){const i=t.socket;i.on("end",()=>e.end()),i.on("close",()=>e.end()),i.on("error",()=>{e.destroy()}),i.pipe(e),e.pipe(i)}},Zy=class extends Tw{constructor(t,i,r,s,n){super(i,n),this.H=t,this.I=r,this.J=s}isPortPrivileged(t){return FM(t,this.t,g5,pV.release())}F(t,i,r,s,n,o,a,c){const l=this.D(i,r);if(l)return++l.refcount,l.value;if(NM(t))return this.G(t,i,r,n,o,a,c);{this.r.trace(`ForwardedPorts: (TunnelService) Creating tunnel without provider ${i}:${r} on local port ${n}.`);const u={commit:this.J.commit,quality:this.J.quality,addressProvider:t,remoteSocketFactoryService:this.H,signService:this.I,logService:this.r,ipcLogger:null},h=IV(u,s,i,r,n);return this.r.trace("ForwardedPorts: (TunnelService) Tunnel created without provider."),this.z(i,r,h),h}}};Zy=__decorate([__param(0,Xy),__param(1,Ce),__param(2,kh),__param(3,jd),__param(4,Sn)],Zy);var Ky=class extends Zy{constructor(t,i,r,s,n){super(t,i,r,s,n)}};Ky=__decorate([__param(0,Xy),__param(1,Ce),__param(2,kh),__param(3,jd),__param(4,Sn)],Ky);var j3=class extends X{constructor(t,i,r,s,n){super(),this.b=t,this.c=i,this.f=r,this.g=s,this.h=n,this.a=new Map}async openTunnel(t,i,r,s,n,o,a,c,l){if(this.c.trace(`ForwardedPorts: (SharedTunnelService) openTunnel request for ${r}:${s} on local port ${o}.`),!this.a.has(t)){const u=new Ky(this.b,this.c,this.g,this.f,this.h);this.B(u),this.a.set(t,u),u.onTunnelClosed(async()=>{(await u.tunnels).length===0&&(u.dispose(),this.a.delete(t))})}return this.a.get(t).openTunnel(i,r,s,n,o,a,c,l)}};j3=__decorate([__param(0,Xy),__param(1,Ce),__param(2,jd),__param(3,kh),__param(4,Sn)],j3);var PV=V("dialogService"),H3;(function(e){e[e.Confirmation=1]="Confirmation",e[e.Prompt=2]="Prompt",e[e.Input=3]="Input"})(H3||(H3={}));var bee=V("fileDialogService"),B3;(function(e){e[e.SAVE=0]="SAVE",e[e.DONT_SAVE=1]="DONT_SAVE",e[e.CANCEL=2]="CANCEL"})(B3||(B3={}));var DV=10*1e3,cm="remote.tunnels.toRestore",e4="remote.tunnels.toRestoreExpiration",AV=1e3*60*60*24*14,W3="onTunnel",yee=new j("forwardedPortsViewEnabled",!1,p(13681,null)),RV=new j("forwardedPortsViewOnlyEnabled",!1,p(13682,null));function z3(e){const t=e.match(/^([a-zA-Z0-9_-]+(?:\.[a-zA-Z0-9_-]+)*:)?([0-9]+)$/);if(t)return{host:t[1]?.substring(0,t[1].length-1)||"localhost",port:Number(t[2])}}var $h;(function(e){e.Other="Other",e.User="User",e.AutoForwardEnd="AutoForwardEnd"})($h||($h={}));var Xs;(function(e){e[e.User=0]="User",e[e.Auto=1]="Auto",e[e.Extension=2]="Extension"})(Xs||(Xs={}));var t4={source:Xs.User,description:p(13683,null)},Eee={source:Xs.Auto,description:p(13684,null)};function V3(e,t,i){const r=e.get(Gi(t,i));if(r)return r;if(Wo(t))for(const s of Gu){const n=Gi(s,i);if(e.has(n))return e.get(n)}else if(Bs(t))for(const s of og){const n=Gi(s,i);if(e.has(n))return e.get(n)}}function Fi(e,t,i){const r=V3(e,t,i);if(r)return r;const s=Bs(t)?"localhost":Wo(t)?"0.0.0.0":void 0;if(s)return V3(e,s,i)}function Gi(e,t){return e+":"+t}var Gn;(function(e){e.Notify="notify",e.OpenBrowser="openBrowser",e.OpenBrowserOnce="openBrowserOnce",e.OpenPreview="openPreview",e.Silent="silent",e.Ignore="ignore"})(Gn||(Gn={}));function TV(e){return e&&"host"in e&&typeof e.host=="string"&&"port"in e&&typeof e.port=="number"&&(!("detail"in e)||typeof e.detail=="string")&&(!("pid"in e)||typeof e.pid=="string")}var q3=class Br extends X{static{this.c="remote.portsAttributes"}static{this.f="remote.otherPortsAttributes"}static{this.g=/^(\d+)\-(\d+)$/}static{this.h=/^([a-z0-9\-]+):(\d{1,5})$/}constructor(t){super(),this.r=t,this.j=[],this.n=new I,this.onDidChangeAttributes=this.n.event,this.B(t.onDidChangeConfiguration(i=>{(i.affectsConfiguration(Br.c)||i.affectsConfiguration(Br.f))&&this.s()})),this.s()}s(){this.j=this.y(),this.n.fire()}getAttributes(t,i,r){let s=this.w(t,i,r,this.j,0);const n={label:void 0,onAutoForward:void 0,elevateIfNeeded:void 0,requireLocalPort:void 0,protocol:void 0};for(;s>=0;){const o=this.j[s];o.key===t?(n.onAutoForward=o.onAutoForward??n.onAutoForward,n.elevateIfNeeded=o.elevateIfNeeded!==void 0?o.elevateIfNeeded:n.elevateIfNeeded,n.label=o.label??n.label,n.requireLocalPort=o.requireLocalPort,n.protocol=o.protocol):(n.onAutoForward=n.onAutoForward??o.onAutoForward,n.elevateIfNeeded=n.elevateIfNeeded!==void 0?n.elevateIfNeeded:o.elevateIfNeeded,n.label=n.label??o.label,n.requireLocalPort=n.requireLocalPort!==void 0?n.requireLocalPort:void 0,n.protocol=n.protocol??o.protocol),s=this.w(t,i,r,this.j,s+1)}return n.onAutoForward!==void 0||n.elevateIfNeeded!==void 0||n.label!==void 0||n.requireLocalPort!==void 0||n.protocol!==void 0?n:this.C()}t(t){return t.start!==void 0&&t.end!==void 0}u(t){return t.host!==void 0&&t.port!==void 0&&De(t.host)&&Xi(t.port)}w(t,i,r,s,n){if(n>=s.length)return-1;const o=!Wo(i)&&!Bs(i),c=s.slice(n).findIndex(l=>Xi(l.key)?o?!1:l.key===t:this.t(l.key)?o?!1:t>=l.key.start&&t<=l.key.end:this.u(l.key)?t===l.key.port&&i===l.key.host:r?l.key.test(r):!1);return c>=0?c+n:-1}y(){const t=this.r.getValue(Br.c);if(!t||!St(t))return[];const i=[];for(const s in t){if(s===void 0)continue;const n=t[s];let o;if(Number(s))o=Number(s);else if(De(s))if(Br.g.test(s)){const a=s.match(Br.g);o={start:Number(a[1]),end:Number(a[2])}}else if(Br.h.test(s)){const a=s.match(Br.h);o={host:a[1],port:Number(a[2])}}else{let a;try{a=RegExp(s)}catch{}a&&(o=a)}o&&i.push({key:o,elevateIfNeeded:n.elevateIfNeeded,onAutoForward:n.onAutoForward,label:n.label,requireLocalPort:n.requireLocalPort,protocol:n.protocol})}const r=this.r.getValue(Br.f);return r&&(this.m={elevateIfNeeded:r.elevateIfNeeded,label:r.label,onAutoForward:r.onAutoForward,requireLocalPort:r.requireLocalPort,protocol:r.protocol}),this.z(i)}z(t){function i(r,s){return Xi(r.key)?r.key:s.t(r.key)?r.key.start:s.u(r.key)?r.key.port:Number.MAX_VALUE}return t.sort((r,s)=>i(r,this)-i(s,this))}C(){return this.m}static providedActionToAction(t){switch(t){case Hn.Notify:return Gn.Notify;case Hn.OpenBrowser:return Gn.OpenBrowser;case Hn.OpenBrowserOnce:return Gn.OpenBrowserOnce;case Hn.OpenPreview:return Gn.OpenPreview;case Hn.Silent:return Gn.Silent;case Hn.Ignore:return Gn.Ignore;default:return}}async addAttributes(t,i,r){const n=this.r.inspect(Br.c).userRemoteValue;let o;!n||!St(n)?o={}:o=ot(n),o[`${t}`]||(o[`${t}`]={});for(const a in i)o[`${t}`][a]=i[a];return this.r.updateValue(Br.c,o,r)}},i4=class extends X{constructor(t,i,r,s,n,o,a,c,l,u){super(),this.H=t,this.I=i,this.J=r,this.L=s,this.M=n,this.N=o,this.O=a,this.P=c,this.Q=l,this.R=u,this.c=new Map,this.g=new I,this.onForwardPort=this.g.event,this.h=new I,this.onClosePort=this.h.event,this.j=new I,this.onPortName=this.j.event,this.n=new I,this.onCandidatesChanged=this.n.event,this.t=new I,this.onEnvironmentTunnelsSet=this.t.event,this.u=!1,this.w=void 0,this.z=!1,this.C=new I,this.D=new Map,this.F=new Map,this.G=[],this.U=!1,this.eb=new Date,this.configPortsAttributes=new q3(r),this.s=this.bb(),this.B(this.configPortsAttributes.onDidChangeAttributes(this.kb,this)),this.forwarded=new Map,this.f=new Map,this.H.tunnels.then(async h=>{const d=await this.getAttributes(h.map(f=>({port:f.tunnelRemotePort,host:f.tunnelRemoteHost})));for(const f of h)if(f.localAddress){const g=Gi(f.tunnelRemoteHost,f.tunnelRemotePort),v=Fi(this.m??new Map,f.tunnelRemoteHost,f.tunnelRemotePort);this.forwarded.set(g,{remotePort:f.tunnelRemotePort,remoteHost:f.tunnelRemoteHost,localAddress:f.localAddress,protocol:d?.get(f.tunnelRemotePort)?.protocol??mr.Http,localUri:await this.Y(f.localAddress,d?.get(f.tunnelRemotePort)),localPort:f.tunnelLocalPort,name:d?.get(f.tunnelRemotePort)?.label,runningProcess:v?.detail,hasRunningProcess:!!v,pid:v?.pid,privacy:f.privacy,source:t4}),this.f.set(g,f)}}),this.detected=new Map,this.B(this.H.onTunnelOpened(async h=>{const d=Gi(h.tunnelRemoteHost,h.tunnelRemotePort);if(!Fi(this.forwarded,h.tunnelRemoteHost,h.tunnelRemotePort)&&!Fi(this.detected,h.tunnelRemoteHost,h.tunnelRemotePort)&&!Fi(this.c,h.tunnelRemoteHost,h.tunnelRemotePort)&&h.localAddress){const f=Fi(this.m??new Map,h.tunnelRemoteHost,h.tunnelRemotePort),g=(await this.getAttributes([{port:h.tunnelRemotePort,host:h.tunnelRemoteHost}]))?.get(h.tunnelRemotePort);this.forwarded.set(d,{remoteHost:h.tunnelRemoteHost,remotePort:h.tunnelRemotePort,localAddress:h.localAddress,protocol:g?.protocol??mr.Http,localUri:await this.Y(h.localAddress,g),localPort:h.tunnelLocalPort,name:g?.label,closeable:!0,runningProcess:f?.detail,hasRunningProcess:!!f,pid:f?.pid,privacy:h.privacy,source:t4})}await this.db(),this.W(!0),this.f.set(d,h),this.g.fire(this.forwarded.get(d))})),this.B(this.H.onTunnelClosed(h=>this.X(h,$h.Other))),this.W(!1)}S(){return this.Q.extensions.find(t=>t.activationEvents?.includes(W3))?(this.R.createKey(RV.key,!0),!0):!1}W(t){if(this.U||(t&&(this.U=!0),this.L.remoteAuthority!==void 0&&!t)||this.S())return;const r=this.B(this.Q.onDidRegisterExtensions(()=>{this.S()&&r.dispose()}))}async X(t,i){const r=Gi(t.host,t.port);this.forwarded.has(r)&&(this.forwarded.delete(r),await this.db(),this.h.fire(t))}Y(t,i){if(t.startsWith("http"))return E.parse(t);const r=i?.protocol??"http";return E.parse(`${r}://${t}`)}async Z(t){const i=this.N.getWorkspace(),r=i.configuration?Is(i.configuration.path):i.folders.length>0?Is(i.folders[0].uri.path):void 0;if(r===void 0){this.O.debug("Could not get workspace hash for forwarded ports storage key.");return}return`${t}.${this.L.remoteAuthority}.${r}`}async $(){return this.Z(cm)}async ab(){return this.Z(e4)}async bb(){const t=this.I.get(cm,1);if(t)return this.I.remove(cm,1),await this.db(),t;const i=await this.$();if(i)return this.I.get(i,0)}async restoreForwarded(){if(this.cb(),this.J.getValue("remote.restoreForwardedPorts")){const t=await this.s;if(t&&t!==this.y){const i=JSON.parse(t)??[];this.O.trace(`ForwardedPorts: (TunnelModel) restoring ports ${i.map(r=>r.remotePort).join(", ")}`);for(const r of i){const s=Fi(this.detected,r.remoteHost,r.remotePort);r.source.source!==Xs.Extension&&!s||r.source.source===Xs.Extension&&s?await this.gb({remote:{host:r.remoteHost,port:r.remotePort},local:r.localPort,name:r.name,elevateIfNeeded:!0,source:r.source}):r.source.source===Xs.Extension&&!s&&this.D.set(Gi(r.remoteHost,r.remotePort),r)}}}if(this.z=!0,this.C.fire(),!this.w){const t=await this.$();this.w=this.B(new ue),this.w.add(this.I.onDidChangeValue(0,void 0,this.w)(async i=>{i.key===t&&(this.s=Promise.resolve(this.I.get(t,0)),await this.restoreForwarded())}))}}cb(){const t=this.I.keys(0,0).filter(i=>i.startsWith(e4));for(const i of t){const r=this.I.getNumber(i,0);if(r&&r<Date.now()){this.s=Promise.resolve(void 0);const s=i.replace(e4,cm);this.I.remove(i,0),this.I.remove(s,0)}}}async db(){if(this.J.getValue("remote.restoreForwardedPorts")){const t=Array.from(this.forwarded.values()),i=t.map(o=>({remoteHost:o.remoteHost,remotePort:o.remotePort,localPort:o.localPort,name:o.name,localAddress:o.localAddress,localUri:o.localUri,protocol:o.protocol,source:o.source}));let r;t.length>0&&(r=JSON.stringify(i));const s=await this.$(),n=await this.ab();!r&&s&&n?(this.I.remove(s,0),this.I.remove(n,0)):r!==this.y&&s&&n&&(this.I.store(s,r,0,0),this.I.store(n,Date.now()+AV,0,0)),this.y=r}}async fb(t,i,r){if(!t.tunnelLocalPort||!r?.requireLocalPort||t.tunnelLocalPort===i)return;const s=new Date;if(this.eb.getTime()+DV>s.getTime())return;this.eb=s;const n=p(13685,null,i,t.tunnelRemotePort,t.tunnelLocalPort);return this.P.info(n)}async forward(t,i){return!this.z&&this.L.remoteAuthority&&await ze.toPromise(this.C.event),this.gb(t,i)}async gb(t,i){await this.Q.activateByEvent(W3);const r=Fi(this.forwarded,t.remote.host,t.remote.port);i=i??(i!==null?(await this.getAttributes([t.remote]))?.get(t.remote.port):void 0);const s=t.local!==void 0?t.local:t.remote.port;let n;if(r)return this.ib(r,t,i);{const o=this.L.remoteAuthority,a=o?{getAddress:async()=>(await this.M.resolveAuthority(o)).authority}:void 0,c=Gi(t.remote.host,t.remote.port);this.c.set(c,!0),t=this.hb(c,t);const l=await this.H.openTunnel(a,t.remote.host,t.remote.port,void 0,s,t.elevateIfNeeded?t.elevateIfNeeded:i?.elevateIfNeeded,t.privacy,i?.protocol);if(typeof l=="string")n=l;else if(l&&l.localAddress){const u=Fi(this.m??new Map,t.remote.host,t.remote.port),h=l.protocol?l.protocol===mr.Https?mr.Https:mr.Http:i?.protocol??mr.Http,d={remoteHost:l.tunnelRemoteHost,remotePort:l.tunnelRemotePort,localPort:l.tunnelLocalPort,name:i?.label??t.name,closeable:!0,localAddress:l.localAddress,protocol:h,localUri:await this.Y(l.localAddress,i),runningProcess:u?.detail,hasRunningProcess:!!u,pid:u?.pid,source:t.source??t4,privacy:l.privacy};return this.forwarded.set(c,d),this.f.set(c,l),this.c.delete(c),await this.db(),await this.fb(l,s,i),this.g.fire(d),l}this.c.delete(c)}return n}hb(t,i){const r=this.D.has(t)?this.D:this.F.has(t)?this.F:void 0;if(r){const s=r.get(t);r.delete(t),s&&(i.name=s.name??i.name,i.local=("local"in s?s.local:"localPort"in s?s.localPort:void 0)??i.local,i.privacy=i.privacy)}return i}async ib(t,i,r){const s=r?.label??i.name;let n;(function(a){a[a.None=0]="None",a[a.Fire=1]="Fire",a[a.Reopen=2]="Reopen"})(n||(n={}));let o=n.None;switch(s!==t.name&&(t.name=s,o=n.Fire),(r?.protocol||t.protocol!==mr.Http)&&r?.protocol!==t.protocol&&(i.source=t.source,o=n.Reopen),i.privacy&&t.privacy!==i.privacy&&(o=n.Reopen),o){case n.Fire:{this.g.fire();break}case n.Reopen:await this.close(t.remoteHost,t.remotePort,$h.User),await this.gb(i,r)}return Fi(this.f,i.remote.host,i.remote.port)}async name(t,i,r){const s=Fi(this.forwarded,t,i),n=Gi(t,i);if(s){s.name=r,await this.db(),this.j.fire({host:t,port:i});return}else this.detected.has(n)&&(this.detected.get(n).name=r,this.j.fire({host:t,port:i}))}async close(t,i,r){const s=Gi(t,i),n=this.forwarded.get(s);return r===$h.AutoForwardEnd&&n&&n.source.source===Xs.Auto&&this.F.set(s,{local:n.localPort,name:n.name,privacy:n.privacy}),await this.H.closeTunnel(t,i),this.X({host:t,port:i},r)}address(t,i){const r=Gi(t,i);return(this.forwarded.get(r)||this.detected.get(r))?.localAddress}get environmentTunnelsSet(){return this.u}addEnvironmentTunnels(t){if(t)for(const i of t){const r=Fi(this.m??new Map,i.remoteAddress.host,i.remoteAddress.port),s=typeof i.localAddress=="string"?i.localAddress:Gi(i.localAddress.host,i.localAddress.port);this.detected.set(Gi(i.remoteAddress.host,i.remoteAddress.port),{remoteHost:i.remoteAddress.host,remotePort:i.remoteAddress.port,localAddress:s,protocol:mr.Http,localUri:this.Y(s),closeable:!1,runningProcess:r?.detail,hasRunningProcess:!!r,pid:r?.pid,privacy:cs.ConstantPrivate,source:{source:Xs.Extension,description:p(13686,null)}}),this.H.setEnvironmentTunnel(i.remoteAddress.host,i.remoteAddress.port,s,cs.ConstantPrivate,mr.Http)}this.u=!0,this.t.fire(),this.g.fire()}setCandidateFilter(t){this.r=t}async setCandidates(t){let i=t;this.r&&(i=await this.r(t));const r=this.jb(i);this.O.trace(`ForwardedPorts: (TunnelModel) removed candidates ${Array.from(r.values()).map(s=>s.port).join(", ")}`),this.n.fire(r)}jb(t){const i=this.m??new Map,r=new Map;return this.m=r,t.forEach(s=>{const n=Gi(s.host,s.port);r.set(n,{host:s.host,port:s.port,detail:s.detail,pid:s.pid}),i.has(n)&&i.delete(n);const o=Fi(this.forwarded,s.host,s.port);o&&(o.runningProcess=s.detail,o.hasRunningProcess=!0,o.pid=s.pid)}),i.forEach((s,n)=>{const o=z3(n);if(!o)return;const a=Fi(this.forwarded,o.host,o.port);a&&(a.runningProcess=void 0,a.hasRunningProcess=!1,a.pid=void 0);const c=Fi(this.detected,o.host,o.port);c&&(c.runningProcess=void 0,c.hasRunningProcess=!1,c.pid=void 0)}),i}get candidates(){return this.m?Array.from(this.m.values()):[]}get candidatesOrUndefined(){return this.m?this.candidates:void 0}async kb(){const t=Array.from(this.forwarded.values()),i=await this.getAttributes(t.map(r=>({port:r.remotePort,host:r.remoteHost})),!1);if(i)for(const r of t){const s=i.get(r.remotePort);(s?.protocol||r.protocol!==mr.Http)&&s?.protocol!==r.protocol&&await this.gb({remote:{host:r.remoteHost,port:r.remotePort},local:r.localPort,name:r.name,source:r.source},s),s&&s.label&&s.label!==r.name&&await this.name(r.remoteHost,r.remotePort,s.label)}}async getAttributes(t,i=!0){const r=new Map,s=new Map;t.forEach(l=>{const u=Fi(this.m??new Map,Gu[0],l.port)??l;if(u){r.set(l.port,u);const h=TV(u)?u.pid:void 0;s.has(h)||s.set(h,[]),s.get(h)?.push(l.port)}});const n=new Map;if(t.forEach(l=>{const u=this.configPortsAttributes.getAttributes(l.port,l.host,r.get(l.port)?.detail);u&&n.set(l.port,u)}),this.G.length===0||!i)return n.size>0?n:void 0;const o=await Promise.all(this.G.flatMap(l=>Array.from(s.entries()).map(u=>{const h=u[1],d=r.get(h[0]);return l.providePortAttributes(h,d?.pid,d?.detail,Ge.None)}))),a=new Map;if(o.forEach(l=>l.forEach(u=>{u&&a.set(u.port,u)})),!n&&!a)return;const c=new Map;return t.forEach(l=>{const u=n.get(l.port),h=a.get(l.port);c.set(l.port,{elevateIfNeeded:u?.elevateIfNeeded,label:u?.label,onAutoForward:u?.onAutoForward??q3.providedActionToAction(h?.autoForwardAction),requireLocalPort:u?.requireLocalPort,protocol:u?.protocol})}),c}addAttributesProvider(t){this.G.push(t)}};__decorate([vd(1e3)],i4.prototype,"db",null),i4=__decorate([__param(0,LM),__param(1,e9),__param(2,Sn),__param(3,r8),__param(4,$F),__param(5,$d),__param(6,Ce),__param(7,PV),__param(8,DM),__param(9,zS)],i4);function LV(e){const t=e.trim().split(`
`),i=[];return t.forEach(s=>{const n=/\/proc\/(\d+)\/fd\/\d+ -> socket:\[(\d+)\]/.exec(s);n&&n.length>=3&&i.push({pid:parseInt(n[1],10),socket:parseInt(n[2],10)})}),i.reduce((s,n)=>(s[n.socket]=n,s),{})}function NV(...e){const t=[].concat(...e.map(FV));return[...new Map(t.filter(i=>i.st==="0A").map(i=>{const r=i.local_address.split(":");return{socket:parseInt(i.inode,10),ip:OV(r[0]),port:parseInt(r[1],16)}}).map(i=>[i.ip+":"+i.port,i])).values()]}function OV(e){let t="";if(e.length===8)for(let i=e.length-2;i>=0;i-=2)t+=parseInt(e.substr(i,2),16),i!==0&&(t+=".");else for(let i=0;i<e.length;i+=8){const r=e.substring(i,i+8);let s="";for(let n=8;n>=2;n-=2)s+=r.substring(n-2,n),(n===6||n===2)&&(s=parseInt(s,16).toString(16),t+=`${s}`,s="",i+n!==e.length-6&&(t+=":"))}return t}function FV(e){const t=e.trim().split(`
`),i=t.shift().trim().split(/\s+/).filter(s=>s!=="rx_queue"&&s!=="tm->when");return t.map(s=>s.trim().split(/\s+/).reduce((n,o,a)=>(n[i[a]||a]=o,n),{}))}function MV(e){return e.length>500?!1:!!e.match(/.*\.vscode-server-[a-zA-Z]+\/bin.*/)||e.indexOf("out/server-main.js")!==-1||e.indexOf("_productName=VSCode")!==-1}function UV(e){const t=e.trim().split(`
`),i=[];return t.forEach(r=>{const s=/^\d+\s+\D+\s+root\s+(\d+)\s+(\d+).+\d+\:\d+\:\d+\s+(.+)$/.exec(r);s&&s.length>=4&&i.push({pid:parseInt(s[1],10),ppid:parseInt(s[2]),cmd:s[3]})}),i}async function _V(e,t,i){const r=i.reduce((n,o)=>(n[o.pid]=o,n),{}),s=[];return e.forEach(({socket:n,ip:o,port:a})=>{const c=t[n]?t[n].pid:void 0,l=c?r[c]?.cmd:void 0;c&&l&&!MV(l)&&s.push({host:o,port:a,detail:l,pid:c})}),s}function jV(e,t,i){const r=new Map,s=UV(t);for(const n of e){const o=i.get(n.port);if(o){r.set(n.port,o);continue}const a=s.find(c=>c.cmd.includes(`${n.port}`));if(a){let c=a,l;do l=s.find(u=>u.ppid===c.pid),l&&(c=l);while(l);r.set(n.port,{host:n.ip,port:n.port,pid:c.pid,detail:c.cmd,ppid:c.ppid})}else r.set(n.port,{host:n.ip,port:n.port,ppid:Number.MAX_VALUE})}return r}var r4=class extends cg{constructor(t,i,r,s){super(t,i,r),this.D=i,this.F=s,this.y=void 0,this.z=new Map,this.C=!1,At&&i.remote.isRemote&&i.remote.authority&&(this.a.$setRemoteTunnelService(process.pid),this.H())}async $registerCandidateFinder(t){if(t&&this.C)return;this.C=t;let i;this.y&&(i=this.y,await this.a.$onFoundNewCandidates(this.y));const r=new pL;let s=0;for(;this.C;){const n=new Date().getTime(),o=(await this.I()).filter(l=>Wo(l.host)||Bs(l.host));this.s.trace(`ForwardedPorts: (ExtHostTunnelService) found candidate ports ${o.map(l=>l.port).join(", ")}`);const a=new Date().getTime()-n;this.s.trace(`ForwardedPorts: (ExtHostTunnelService) candidate port scan took ${a} ms.`),s++>3&&r.update(a),(!i||JSON.stringify(i)!==JSON.stringify(o))&&(i=o,await this.a.$onFoundNewCandidates(i));const c=this.G(r.value);this.s.trace(`ForwardedPorts: (ExtHostTunnelService) next candidate port scan in ${c} ms.`),await new Promise(l=>setTimeout(()=>l(),c))}}G(t){return Math.max(t*20,2e3)}async H(){this.y=await this.I(),this.s.trace(`ForwardedPorts: (ExtHostTunnelService) Initial candidates found: ${this.y.map(t=>t.port).join(", ")}`)}async I(){let t="",i="";try{t=await xh.promises.readFile("/proc/net/tcp","utf8"),i=await xh.promises.readFile("/proc/net/tcp6","utf8")}catch{}const r=NV(t,i),s=await new Promise(d=>{$3("ls -l /proc/[0-9]*/fd/[0-9]* | grep socket:",(f,g,v)=>{d(g)})}),n=LV(s),o=await ht.readdir("/proc"),a=[];for(const d of o)try{const f=Number(d),g=Rt(E.file("/proc"),d);if((await xh.promises.stat(g.fsPath)).isDirectory()&&!isNaN(f)){const y=await xh.promises.readlink(Rt(g,"cwd").fsPath),S=await xh.promises.readFile(Rt(g,"cmdline").fsPath,"utf8");a.push({pid:f,cwd:y,cmd:S})}}catch{}const c=[],l=r.filter(d=>{const f=n[d.socket];return f||c.push(d),f}),u=_V(l,n,a);let h;if(this.s.trace(`ForwardedPorts: (ExtHostTunnelService) number of possible root ports ${c.length}`),c.length>0){const d=await new Promise(f=>{$3("ps -F -A -l | grep root",(g,v,y)=>{f(v)})});this.z=jV(c,d,this.z),h=Array.from(this.z.values()),this.s.trace(`ForwardedPorts: (ExtHostTunnelService) heuristic ports ${h.map(f=>f.port).join(", ")}`)}return u.then(d=>h?d.concat(h):d)}w(t){return async i=>{const r=new _3({commit:this.D.commit,quality:this.D.quality,logService:this.s,ipcLogger:null,remoteSocketFactoryService:{_serviceBrand:void 0,async connect(n,o,a,c){const l=await t.makeConnection();return HV.connect(l,o,a,c)},register(){throw new Error("not implemented")}},addressProvider:{getAddress(){return Promise.resolve({connectTo:new K9(0),connectionToken:t.connectionToken})}},signService:this.F},"localhost",i.remoteAddress.host||"localhost",i.remoteAddress.port,i.localAddressPort);await r.waitForReady();const s=new I;return{localAddress:z3(r.localAddress)??r.localAddress,remoteAddress:{port:r.tunnelRemotePort,host:r.tunnelRemoteHost},onDidDispose:s.event,dispose:()=>{r.dispose(),s.fire(),s.dispose()}}}}};r4=__decorate([__param(0,Ie),__param(1,Qt),__param(2,Ce),__param(3,kh)],r4);var HV=class bP extends hV{static connect(t,i,r,s){const n=new ue,o={onClose:n.add(new I),onData:n.add(new I),onEnd:n.add(new I)};n.add(t.onDidReceiveMessage(c=>o.onData.fire(J.wrap(c)))),n.add(t.onDidEnd(()=>o.onEnd.fire())),n.add(t.onDidClose(c=>o.onClose.fire({type:0,error:c,hadError:!!c})));const a=new bP(t,s,o);return a.B(n),uV(a,i,r,s,o)}constructor(t,i,r){super(i,r),this.n=t}write(t){this.n.send(t.buffer)}h(){this.n.end()}async drain(){await this.n.drain?.()}};import*as Xo from"fs";var BV=class extends Rw{constructor(){super(...arguments),this.i=null}async g(e){const t=await super.g(e);if(t.scheme!==z.file)return t;if(this.b.skipWorkspaceStorageLock)return this.d.info(`Skipping acquiring lock for ${t.fsPath}.`),t;const i=t.fsPath;let r=0;do{let s;r===0?s=i:s=/[/\\]$/.test(i)?`${i.substr(0,i.length-1)}-${r}`:`${i}-${r}`,await WV(s);const n=rt(s,"vscode.lock"),o=await J3(this.d,n,!1);if(o)return this.i=o,process.on("exit",()=>{o.dispose()}),E.file(s);r++}while(r<10);return t}onWillDeactivateAll(){this.i?.setWillRelease(6e3)}};async function WV(e){try{await Xo.promises.stat(e);return}catch{}try{await Xo.promises.mkdir(e,{recursive:!0})}catch{}}var zV=1e3,G3=10*60*1e3,VV=class extends X{constructor(e,t){super(),this.b=e,this.c=t,this.a=this.B(new hE),this.a.cancelAndSet(async()=>{const i=await s4(e,t);(!i||i.pid!==process.pid)&&(e.info(`Lock '${t}': The lock was lost unexpectedly.`),this.a.cancel());try{await Xo.promises.utimes(t,new Date,new Date)}catch(r){e.error(r),e.info(`Lock '${t}': Could not update mtime.`)}},zV)}dispose(){super.dispose();try{Xo.unlinkSync(this.c)}catch{}}async setWillRelease(e){this.b.info(`Lock '${this.c}': Marking the lockfile as scheduled to be released in ${e} ms.`);try{const t={pid:process.pid,willReleaseAt:Date.now()+e};await ht.writeFile(this.c,JSON.stringify(t),{flag:"w"})}catch(t){this.b.error(t)}}};async function J3(e,t,i){try{const s={pid:process.pid,willReleaseAt:0};await ht.writeFile(t,JSON.stringify(s),{flag:"wx"})}catch(s){e.error(s)}const r=await s4(e,t);return!r||r.pid!==process.pid?i?(e.info(`Lock '${t}': Could not acquire lock, giving up.`),null):(e.info(`Lock '${t}': Could not acquire lock, checking if the file is stale.`),GV(e,t)):(e.info(`Lock '${t}': Lock acquired.`),new VV(e,t))}async function s4(e,t){let i;try{i=await Xo.promises.readFile(t)}catch(r){return e.error(r),null}try{return JSON.parse(String(i))}catch(r){return e.error(r),null}}async function n4(e,t){let i;try{i=await Xo.promises.stat(t)}catch(r){return e.error(r),0}return i.mtime.getTime()}function qV(e){try{return process.kill(e,0),!0}catch{return!1}}async function GV(e,t){const i=await s4(e,t);if(!i)return e.info(`Lock '${t}': Could not read pid of lock holder.`),Ch(e,t);if(i.willReleaseAt){let a=i.willReleaseAt-Date.now();if(a<5e3){for(a>0?e.info(`Lock '${t}': The lockfile is scheduled to be released in ${a} ms.`):e.info(`Lock '${t}': The lockfile is scheduled to have been released.`);a>0;){if(await bi(Math.min(100,a)),await n4(e,t)===0)return Ch(e,t);a=i.willReleaseAt-Date.now()}return Ch(e,t)}}if(!qV(i.pid))return e.info(`Lock '${t}': The pid ${i.pid} appears to be gone.`),Ch(e,t);const r=await n4(e,t),s=Date.now()-r;if(s<=G3)return e.info(`Lock '${t}': The lock does not look stale, elapsed: ${s} ms, giving up.`),null;e.info(`Lock '${t}': The lock looks stale, waiting for 2s.`),await bi(2e3);const n=await n4(e,t),o=Date.now()-n;return o<=G3?(e.info(`Lock '${t}': The lock does not look stale, elapsed: ${o} ms, giving up.`),null):(e.info(`Lock '${t}': The lock looks stale even after waiting for 2s.`),Ch(e,t))}async function Ch(e,t){e.info(`Lock '${t}': Deleting a stale lock.`);try{await Xo.promises.unlink(t)}catch{}return J3(e,t,!0)}var Zs;(function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warning=3]="Warning",e[e.Error=4]="Error",e[e.Critical=5]="Critical",e[e.Off=6]="Off"})(Zs||(Zs={}));async function JV(e,t,i,r,s){try{const n=await import("@vscode/spdlog");n.setFlushOn(Zs.Trace);const o=await n.createAsyncRotatingLogger(e,t,i,r);return s?o.clearFormatters():o.setPattern("%Y-%m-%dT%H:%M:%S.%e%z [%l] %v"),o}catch(n){console.error(n)}return null}function Q3(e,t,i){switch(t){case de.Trace:e.trace(i);break;case de.Debug:e.debug(i);break;case de.Info:e.info(i);break;case de.Warning:e.warn(i);break;case de.Error:e.error(i);break;case de.Off:break;default:throw new Error(`Invalid log level ${t}`)}}function Y3(e,t){switch(t){case de.Trace:e.setLevel(Zs.Trace);break;case de.Debug:e.setLevel(Zs.Debug);break;case de.Info:e.setLevel(Zs.Info);break;case de.Warning:e.setLevel(Zs.Warning);break;case de.Error:e.setLevel(Zs.Error);break;case de.Off:e.setLevel(Zs.Off);break;default:throw new Error(`Invalid log level ${t}`)}}var QV=class extends L1{constructor(e,t,i,r,s){super(),this.m=[],this.setLevel(s),this.n=this.s(e,t,i,r),this.B(this.onDidChangeLogLevel(n=>{this.r&&Y3(this.r,n)}))}async s(e,t,i,r){const s=i?6:1,n=30/s*m7.MB,o=await JV(e,t,n,s,r);if(o){this.r=o,Y3(this.r,this.getLevel());for(const{level:a,message:c}of this.m)Q3(this.r,a,c);this.m=[]}}g(e,t){this.r?Q3(this.r,e,t):this.getLevel()<=e&&this.m.push({level:e,message:t})}flush(){this.q.isDisposed||(this.r?this.r.flush():this.n.then(()=>this.flush()))}dispose(){this.r?this.u():this.n.then(()=>this.u()),super.dispose()}u(){this.r&&(this.r.drop(),this.r=void 0)}},YV=class extends Ig{s(e,t,i){return e.scheme===z.file?new QV(i?.name||Ht(),e.fsPath,!i?.donotRotate,!!i?.donotUseFormatters,t):super.s(e,t,i)}registerLogger(e){super.registerLogger(e),this.r.$registerLogger(e)}deregisterLogger(e){super.deregisterLogger(e),this.r.$deregisterLogger(e)}};import{homedir as XV}from"os";var ZV=class extends kg{m(){return XV()}},KV=class extends X{constructor(e,t=[]){super(),this.a=new tL([e,...t]),this.B(e.onDidChangeLogLevel(i=>this.setLevel(i)))}get onDidChangeLogLevel(){return this.a.onDidChangeLogLevel}setLevel(e){this.a.setLevel(e)}getLevel(){return this.a.getLevel()}trace(e,...t){this.a.trace(e,...t)}debug(e,...t){this.a.debug(e,...t)}info(e,...t){this.a.info(e,...t)}warn(e,...t){this.a.warn(e,...t)}error(e,...t){this.a.error(e,...t)}flush(){this.a.flush()}},o4=class extends KV{constructor(t,i,r){const s=r.remote.isRemote?"remoteexthost":t?"workerexthost":"exthost",n=r.remote.isRemote?p(3013,null):p(t?3014:3015,null);super(i.createLogger(s,{name:n}))}};o4=__decorate([__param(1,xa),__param(2,Qt)],o4);import{createServer as eq}from"net";import{join as tq}from"path";import{existsSync as X3,mkdirSync as iq,unlinkSync as Z3}from"fs";var Dee=V("iCubeClientServiceService"),a4;(function(e){e.NotDetected="NotDetected",e.RunningInWeb="RunningInWeb",e.RunningInClient="RunningInClient"})(a4||(a4={}));var lm,c4="/tmp/byteide-client",K3="__handshake__",l4=class{static{lm=this}static{this.a=1}constructor(t,i){this.i=i,this.d=new Map,this.c=eq(),this.b=t.getProxy(q.MainThreadICubeClientBridge),this.f=new Promise((r,s)=>{this.c.on("error",s),this.c.on("listening",r)}),this.e=new Ss,this.ready=Promise.all([this.e,this.f]).then(),this.l().catch(r=>this.i.error(`[iCube] failed to start client bridge socket ${r}`))}$dispose(){this.dispose()}dispose(){this.c.close(),this.h&&Z3(this.h)}async handleConnection(t){const i=lm.a++;this.d.set(i,t),t.on("data",r=>{this.$handleMessage([r.toString(),i])}),t.on("close",()=>this.d.delete(i))}$postMessage([t,i]){if(this.i.info("received",t,this.e.isSettled),!this.e.isSettled){this.k(t);return}const r=typeof t=="string"?t:JSON.stringify(t)+`
`,s=this.d.get(i||-1);i&&!s&&this.i.error("[iCube] Message target connection id does not exist",i,t),s?s.write(r):this.d.forEach(n=>n.write(r))}$handleMessage(t){this.b.$postMessage(t)}j(){const t={id:K3,type:"invoke",action:"handshake"};this.b.$postMessage([JSON.stringify(t)+`
`,lm.a++])}k(t){try{if(typeof t!="string")throw new Error("Invalid handshake response");const i=JSON.parse(t);if(i.id!==K3||!i.payload)throw new Error(`Invalid handshake response: ${t}`);this.g=i.payload,this.e.complete(i)}catch(i){this.i.error(`[iCube] failed to handshake with client: ${t}, ${i}`),this.e.error(i)}}async l(){if(await this.b.$detectClient()===a4.NotDetected)return;if(this.i.info("[iCube] Detected running in client, starting client bridge"),this.j(),await this.e.p,!this.g?.machine){this.i.info("[iCube] handshake failed");return}X3(c4)||iq(c4);const i=tq(c4,`${this.g.machine}.sock`);await this.m(i)}async m(t){this.c.on("connection",i=>this.handleConnection(i)),process.on("beforeExit",()=>this.dispose()),X3(t)&&(this.i.info("[iCube] Another bridge is listening, replace it"),Z3(t)),this.c.listen(t),await this.f,this.h=t,this.i.info("[iCube] Client bridge started")}};l4=lm=__decorate([__param(0,Ie),__param(1,Ce)],l4),Ae(zs,cV,0),Ae(xa,YV,1),Ae(Ce,new Kr(o4,[!1],!0)),Ae(kh,r$,1),Ae(Aw,BV,0),Ae(Cb,Bb,0),Ae(Db,Xb,0),Ae(Sb,Mb,0),Ae(Ws,Fb,0),Ae(ag,r4,0),Ae(Cc,ZV,0),Ae(Nb,l4,0);import{createRequire as rq}from"node:module";var eI=rq(import.meta.url);(function(){for(let t=0;t<process.execArgv.length;t++)process.execArgv[t]==="--inspect-port=0"&&(process.execArgv.splice(t,1),t--)})();var um=(0,JP.default)(process.argv.slice(2),{boolean:["transformURIs","skipWorkspaceStorageLock"],string:["useHostProxy"]});(function(){const e=eI("module"),t=e._load;e._load=function(i){if(i==="natives")throw new Error('Either the extension or an NPM dependency is using the [unsupported "natives" node module](https://go.microsoft.com/fwlink/?linkid=871887).');return t.apply(this,arguments)}})();var hm=process.exit.bind(process),sq=process.on.bind(process);function nq(e){process.exit=function(t){if(e)hm(t);else{const i=new Error("An extension called process.exit() and this was prevented.");console.warn(i.stack)}},process.crash=function(){const t=new Error("An extension called process.crash() and this was prevented.");console.warn(t.stack)},process.env.ELECTRON_RUN_AS_NODE="1",process.on=function(t,i){t==="uncaughtException"&&(i=function(){try{return i.call(void 0,arguments)}catch{}}),sq(t,i)}}var us=function(e){hm()};function oq(){const e=IU(process.env);if(e.type===3)return new Promise((t,i)=>{const r=s=>{const n=s[0],o=new uo;n.on("message",a=>o.fire(J.wrap(a.data))),n.on("close",()=>{us("renderer closed the MessagePort")}),n.start(),t({onMessage:o.event,send:a=>n.postMessage(a.buffer)})};process.parentPort.on("message",s=>r(s.ports))});if(e.type===2)return new Promise((t,i)=>{let r=null;const s=setTimeout(()=>{us("VSCODE_EXTHOST_IPC_SOCKET timeout")},6e4),n=2592e5,o=3e5,a=new dE(()=>us("renderer disconnected for too long (1)"),n),c=new dE(()=>us("renderer disconnected for too long (2)"),o);process.on("message",(u,h)=>{if(u&&u.type==="VSCODE_EXTHOST_IPC_SOCKET"){h.setNoDelay(!0),u.product&&Object.assign(Cs,{iCubeApp:{...Cs.iCubeApp,...u.product.iCubeApp}});const d=J.wrap(Buffer.from(u.initialDataChunk,"base64"));let f;if(u.skipWebSocketFrames)f=new hl(h,"extHost-socket");else{const g=J.wrap(Buffer.from(u.inflateBytes,"base64"));f=new g2(new hl(h,"extHost-socket"),u.permessageDeflate,g,!1)}r?(a.cancel(),c.cancel(),r.beginAcceptReconnection(f,d),r.endAcceptReconnection(),r.sendResume()):(clearTimeout(s),r=new g1({socket:f,initialChunk:d}),r.sendResume(),r.onDidDispose(()=>us("renderer disconnected")),t(r),r.onSocketClose(()=>{a.schedule()}))}if(u&&u.type==="VSCODE_EXTHOST_IPC_REDUCE_GRACE_TIME"){if(c.isScheduled())return;a.isScheduled()&&c.schedule()}});const l={type:"VSCODE_EXTHOST_IPC_READY"};process.send?.(l)});{const t=e.pipeName;return new Promise((i,r)=>{const s=QP.createConnection(t,()=>{s.removeListener("error",r);const n=new g1({socket:new hl(s,"extHost-renderer")});n.sendResume(),i(n)});s.once("error",r),s.on("close",()=>{us("renderer closed the socket")})})}}async function aq(){const e=await oq();return new class{constructor(){this.a=new uo,this.onMessage=this.a.event,this.b=!1,this.d=e.onMessage(t=>{VM(t,2)?(this.b=!0,this.d.dispose(),us("received terminate message from renderer")):this.a.fire(t)})}send(t){this.b||e.send(t)}async drain(){if(e.drain)return e.drain()}}}function cq(e){return new Promise(t=>{const i=e.onMessage(r=>{i.dispose();const s=JSON.parse(r.toString()),n=s.commit,o=Cs.commit;n&&o&&n!==o&&hm(55);const a=process.env.ICUBE_MULTI_CONTAINER?.toLowerCase()==="true"&&process.env.ICUBE_EXT_MULTI_CONTAINER?.toLowerCase()!=="false";if(s.parentPid&&!a){let c=0;setInterval(function(){try{process.kill(s.parentPid,0),c=0}catch(u){u&&u.code==="EPERM"?(c++,c>=3&&us(`parent process ${s.parentPid} does not exist anymore (3 x EPERM): ${u.message} (code: ${u.code}) (errno: ${u.errno})`)):us(`parent process ${s.parentPid} does not exist anymore: ${u.message} (code: ${u.code}) (errno: ${u.errno})`)}},1e3);let l;try{l=eI("native-watchdog"),l.start(s.parentPid)}catch(u){Et(u)}}e.send(kk(0)),t({protocol:e,initData:s})});e.send(kk(1))})}async function lq(){const e=[];process.on("unhandledRejection",(a,c)=>{e.push(c),setTimeout(()=>{const l=e.indexOf(c);l>=0&&c.catch(u=>{e.splice(l,1),zr(u)||(console.warn(`rejected promise not handled within 1 second: ${u}`),u&&u.stack&&console.warn(`stack trace: ${u.stack}`),a&&Et(a))})},1e3)}),process.on("rejectionHandled",a=>{const c=e.indexOf(a);c>=0&&e.splice(c,1)}),process.on("uncaughtException",function(a){ZP(a)||Et(a)}),Ct("code/extHost/willConnectToRenderer");const t=await aq();Ct("code/extHost/didConnectToRenderer");const i=await cq(t);Ct("code/extHost/didWaitForInitData");const{initData:r}=i;nq(!!r.environment.extensionTestsLocationURI),r.environment.useHostProxy=um.useHostProxy!==void 0?um.useHostProxy!=="false":void 0,r.environment.skipWorkspaceStorageLock=Q(um.skipWorkspaceStorageLock,!1);const s=new class{constructor(){this.pid=process.pid}exit(c){hm(c)}fsExists(c){return ht.exists(c)}fsRealpath(c){return ZR(c)}};let n=null;r.remote.authority&&um.transformURIs&&(n=$U(r.remote.authority));const o=new xU(i.protocol,r,s,n);us=a=>o.terminate(a)}lq().catch(e=>console.log(e));

//# sourceMappingURL=https://trae.private/sourcemaps/424b4bd987c6c6a4cadf1a08da420593cc6bf75a/vs/workbench/api/node/extensionHostProcess.js.map
