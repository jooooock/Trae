"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ObjectFactory = exports.Inject = void 0;
exports.SingletonInjectable = SingletonInjectable;
exports.ExecutionInjectable = ExecutionInjectable;
const injection_1 = require("@artus/injection");
var injection_2 = require("@artus/injection");
Object.defineProperty(exports, "Inject", { enumerable: true, get: function () { return injection_2.Inject; } });
const container = new injection_1.Container("default");
var ObjectFactory;
(function (ObjectFactory) {
    function register(type) {
        container.set({ type });
    }
    ObjectFactory.register = register;
    function getObject(type, ...args) {
        const obj = container.get(type);
        if (obj.init) {
            obj.init(...args);
        }
        return obj;
    }
    ObjectFactory.getObject = getObject;
})(ObjectFactory || (exports.ObjectFactory = ObjectFactory = {}));
function SingletonInjectable(constructor) {
    (0, injection_1.Injectable)({ scope: injection_1.ScopeEnum.SINGLETON })(constructor);
    ObjectFactory.register(constructor);
}
function ExecutionInjectable(constructor) {
    (0, injection_1.Injectable)({ scope: injection_1.ScopeEnum.EXECUTION })(constructor);
    ObjectFactory.register(constructor);
}
