import test from 'ava';
import sinon from 'sinon';
import { createDestroyAgent } from '../destroy';
test('destroyAgent', function (t) {
    var destroyAgent = createDestroyAgent();
    var pluginATearDown1 = sinon.spy();
    var pluginATearDownGroup = [pluginATearDown1];
    destroyAgent.set('pluginA', 'dataA', pluginATearDownGroup);
    t.assert(pluginATearDown1.notCalled);
    destroyAgent.remove('pluginA');
    t.assert(pluginATearDown1.calledOnce);
    t.is(pluginATearDownGroup.length, 0);
    destroyAgent.removeByEvType('dataA');
    t.assert(pluginATearDown1.calledOnce);
    var pluginATearDown2 = sinon.spy();
    destroyAgent.set('pluginA', 'dataA', [pluginATearDown2]);
    destroyAgent.removeByEvType('dataA');
    t.assert(pluginATearDown1.calledOnce);
    t.assert(pluginATearDown2.calledOnce);
    t.true(destroyAgent.has('pluginA'));
    destroyAgent.remove('pluginA');
    t.false(destroyAgent.has('pluginA'));
    t.assert(pluginATearDown2.calledOnce);
    var pluginATearDown3 = sinon.spy();
    destroyAgent.set('pluginA', 'dataA', [pluginATearDown3]);
    t.true(destroyAgent.has('pluginA'));
    destroyAgent.clear();
    t.assert(pluginATearDown1.calledOnce);
    t.assert(pluginATearDown2.calledOnce);
    t.assert(pluginATearDown3.calledOnce);
    var pluginATearDown4 = sinon.spy();
    destroyAgent.set('pluginA', 'dataA', [pluginATearDown4]);
    t.assert(pluginATearDown4.calledOnce);
});//# sourceMappingURL=https://trae.private/sourcemaps/424b4bd987c6c6a4cadf1a08da420593cc6bf75a/node_modules/@slardar/integrations/node_modules/@slardar/sdk-template/esm/utils/__tests__/destroy.spec.js.map