"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.format = void 0;
const formatRegExp = /%[sdjo%]/g;
function isObject(arg) {
    return typeof arg === 'object' && arg !== null;
}
function platformIndependentFormat(format, ..._) {
    let i = 1;
    let args = arguments;
    let len = args.length;
    let str = String(format).replace(formatRegExp, (x) => {
        if (x === '%%')
            return '%';
        if (i >= len)
            return x;
        switch (x) {
            case '%s':
                return String(args[i++]);
            case '%d':
                return Number(args[i++]).toString();
            case '%j':
                try {
                    return JSON.stringify(args[i++]);
                }
                catch (_) {
                    return '[Circular]';
                }
            default:
                return x;
        }
    });
    for (var x = args[i]; i < len; x = args[++i]) {
        if (x === null || !isObject(x)) {
            str += ' ' + x;
        }
        else {
            str += ' ' + JSON.stringify(x);
        }
    }
    return str;
}
function format(format, ...params) {
    var _a;
    const isNode = typeof process === 'object' && typeof ((_a = process === null || process === void 0 ? void 0 : process.versions) === null || _a === void 0 ? void 0 : _a.node) === 'string';
    if (isNode) {
        return require('util').format(format, ...params);
    }
    return platformIndependentFormat(format, ...params);
}
exports.format = format;
