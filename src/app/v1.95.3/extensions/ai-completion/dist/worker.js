var serverExportVar;(()=>{"use strict";var e={686:function(e,t,n){var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.ProposedFeatures=void 0,o(n(6019),t),function(e){e.all={__brand:"features"}}(r||(t.ProposedFeatures=r={}))},6019:function(e,t,n){var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorMessageTracker=void 0,t.combineConsoleFeatures=function(e,t){return function(n){return t(e(n))}},t.combineTracerFeatures=function(e,t){return function(n){return t(e(n))}},t.combineClientFeatures=function(e,t){return function(n){return t(e(n))}},t.combineWorkspaceFeatures=function(e,t){return function(n){return t(e(n))}},t.createConnection=function(e,t,n){const r=n&&n.console?new(n.console(d)):new d,i=e(r);r.rawAttach(i);const o=n&&n.tracer?new(n.tracer(f)):new f,s=n&&n.client?new(n.client(l)):new l,h=[r,o,s];let p,g,m;const y={listen:()=>i.listen(),sendRequest:(e,...t)=>i.sendRequest(u.string(e)?e:e.method,...t),onRequest:(e,t)=>i.onRequest(e,t),sendNotification:(e,t)=>{const n=u.string(e)?e:e.method;return i.sendNotification(n,t)},onNotification:(e,t)=>i.onNotification(e,t),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:e=>(g=e,{dispose:()=>{g=void 0}}),onInitialized:e=>i.onNotification(a.InitializedNotification.type,e),onShutdown:e=>(p=e,{dispose:()=>{p=void 0}}),onExit:e=>(m=e,{dispose:()=>{m=void 0}}),get console(){return r},get tracer(){return o},get client(){return s},onDidChangeConfiguration:e=>i.onNotification(a.DidChangeConfigurationNotification.type,e),__textDocumentSync:void 0,onDidOpenTextDocument:e=>i.onNotification(a.DidOpenTextDocumentNotification.type,e),onDidChangeTextDocument:e=>i.onNotification(a.DidChangeTextDocumentNotification.type,e),onDidCloseTextDocument:e=>i.onNotification(a.DidCloseTextDocumentNotification.type,e),onWillSaveTextDocument:e=>i.onNotification(a.WillSaveTextDocumentNotification.type,e),onDidSaveTextDocument:e=>i.onNotification(a.DidSaveTextDocumentNotification.type,e),dispose:()=>i.dispose()};for(const e of h)e.attach(y);return i.onRequest(a.InitializeRequest.type,(e=>{t.initialize(e);for(const e of h)e.initialize({});if(g){const t=g(e,(new c.CancellationTokenSource).token);return(n=t,n instanceof Promise?n:u.thenable(n)?new Promise(((e,t)=>{n.then((t=>e(t)),(e=>t(e)))})):Promise.resolve(n)).then((e=>{if(e instanceof c.ResponseError)return e;let t=e;return t||(t={capabilities:{}}),t}))}{const e={capabilities:{textDocumentSync:a.TextDocumentSyncKind.None}};for(const t of h)t.fillServerCapabilities(e.capabilities);return e}var n})),i.onRequest(a.ShutdownRequest.type,(()=>(t.shutdownReceived=!0,p?p((new c.CancellationTokenSource).token):void 0))),i.onNotification(a.ExitNotification.type,(()=>{try{if(m)return m()}finally{t.shutdownReceived?t.exit(0):t.exit(1)}})),i.onNotification(c.SetTraceNotification.type,(e=>{o.trace=c.Trace.fromString(e.value)})),y};const a=n(6727),c=n(3717),u=s(n(4150));t.ErrorMessageTracker=class{constructor(){this._messages=Object.create(null)}add(e){let t=this._messages[e];t||(t=0),t++,this._messages[e]=t}};class d{constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(a.MessageType.Error,e)}warn(e){this.send(a.MessageType.Warning,e)}info(e){this.send(a.MessageType.Info,e)}log(e){this.send(a.MessageType.Log,e)}debug(e){this.send(a.MessageType.Log,e)}send(e,t){this._rawConnection&&this._rawConnection.sendNotification(a.LogMessageNotification.type,{type:e,message:t}).catch((()=>{(0,c.RAL)().console.error("Sending log message failed")}))}}class l{attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}}class f{constructor(){this._trace=c.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,t){this._trace!==c.Trace.Off&&this.connection.sendNotification(c.LogTraceNotification.type,{message:e,verbose:this._trace===c.Trace.Verbose?t:void 0}).catch((()=>{}))}}},4150:(e,t)=>{function n(e){return"string"==typeof e||e instanceof String}function r(e){return"function"==typeof e}function i(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=n,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=r,t.array=i,t.stringArray=function(e){return i(e)&&e.every((e=>n(e)))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.thenable=function(e){return e&&r(e.then)}},8178:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserMessageWriter=t.BrowserMessageReader=void 0,t.createConnection=function(e,t,n,r){let i,c,u,l;void 0!==e&&"features"===e.__brand&&(i=e,e=t,t=n,n=r);a.ConnectionStrategy.is(e)||a.ConnectionOptions.is(e)?l=e:(c=e,u=t,l=n);return(0,o.createConnection)((e=>(0,s.createProtocolConnection)(c,u,e,l)),d,i)};const o=n(686),s=n(6727),a=n(3717);i(n(686),t);var c=n(2433);Object.defineProperty(t,"BrowserMessageReader",{enumerable:!0,get:function(){return c.BrowserMessageReader}}),Object.defineProperty(t,"BrowserMessageWriter",{enumerable:!0,get:function(){return c.BrowserMessageWriter}});let u=!1;const d={initialize:e=>{},get shutdownReceived(){return u},set shutdownReceived(e){u=e},exit:e=>{}}},4843:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createProtocolConnection=function(e,t,n,i){r.ConnectionStrategy.is(i)&&(i={connectionStrategy:i});return(0,r.createMessageConnection)(e,t,n,i)};const r=n(3717)},5413:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.AISPErrorCodes=void 0,function(e){e.RequestCancelled=-32800,e.RequestFailed=-32801}(n||(t.AISPErrorCodes=n={}))},6727:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(4843),t),i(n(757),t),i(n(4086),t),i(n(2364),t),i(n(6806),t),i(n(5413),t)},6974:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AuthResult=t.IsLoginRequest=t.AuthorizeRequest=void 0;const r=n(757);var i,o;!function(e){e.method="authorize/getJWTToken",e.messageDirection=r.MessageDirection.serverToClient,e.type=new r.ProtocolRequestType(e.method)}(i||(t.AuthorizeRequest=i={})),function(e){e.method="authorize/getIsLogin",e.messageDirection=r.MessageDirection.serverToClient,e.type=new r.ProtocolRequestType(e.method)}(o||(t.IsLoginRequest=o={}));t.AuthResult=class{}},2760:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PromptConfig=t.GetConfigRequest=void 0;const r=n(757);var i;!function(e){e.method="code/get_config",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolRequestType0(e.method)}(i||(t.GetConfigRequest=i={}));t.PromptConfig=class{constructor(){this.multi_edit_fetch_internal=500,this.should_enable_multi_edit_cursor=!0,this.max_enable_count=100}}},5065:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DidChangeConfigurationNotification=void 0;const r=n(757);var i;!function(e){e.method="workspace/didChangeConfiguration",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolNotificationType(e.method)}(i||(t.DidChangeConfigurationNotification=i={}))},1222:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OpenDocumentRequest=void 0;const r=n(757);var i;!function(e){e.method="code/open_document",e.messageDirection=r.MessageDirection.serverToClient,e.type=new r.ProtocolRequestType(e.method)}(i||(t.OpenDocumentRequest=i={}))},6765:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PingSuccessResult=t.PingRequest=void 0;const r=n(757);var i;!function(e){e.method="ping",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolRequestType0(e.method)}(i||(t.PingRequest=i={})),t.PingSuccessResult=1},4568:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.DidDeleteTextDocumentNotification=t.DidCreateTextDocumentNotification=t.DidAccessTextDocumentNotification=t.DidSaveTextDocumentNotification=t.WillSaveTextDocumentNotification=t.TextDocumentSaveReason=t.DidCloseTextDocumentNotification=t.DidChangeTextDocumentNotification=t.DidOpenTextDocumentNotification=t.TextDocumentRegistrationOptions=t.TextDocumentSyncKind=t.DocumentSelector=t.DocumentFilter=void 0;const s=n(757),a=o(n(8092));var c,u,d,l,f,h,p,g,m,y,v,_,b;!function(e){e.is=function(e){const t=e;return a.string(t)||a.string(t.language)||a.string(t.scheme)||a.string(t.pattern)}}(c||(t.DocumentFilter=c={})),function(e){e.is=function(e){if(!Array.isArray(e))return!1;for(let t of e)if(!a.string(t)&&!c.is(t))return!1;return!0}}(u||(t.DocumentSelector=u={})),function(e){e.None=0,e.Full=1,e.Incremental=2}(d||(t.TextDocumentSyncKind=d={})),function(e){e.is=function(e){const t=e;return t&&(null===t.documentSelector||u.is(t.documentSelector))}}(l||(t.TextDocumentRegistrationOptions=l={})),function(e){e.method="textDocument/didOpen",e.messageDirection=s.MessageDirection.clientToServer,e.type=new s.ProtocolNotificationType(e.method)}(f||(t.DidOpenTextDocumentNotification=f={})),function(e){e.method="textDocument/didChange",e.messageDirection=s.MessageDirection.clientToServer,e.type=new s.ProtocolNotificationType(e.method)}(h||(t.DidChangeTextDocumentNotification=h={})),function(e){e.method="textDocument/didClose",e.messageDirection=s.MessageDirection.clientToServer,e.type=new s.ProtocolNotificationType(e.method)}(p||(t.DidCloseTextDocumentNotification=p={})),function(e){e.Manual=1,e.AfterDelay=2,e.FocusOut=3}(g||(t.TextDocumentSaveReason=g={})),function(e){e.method="textDocument/willSave",e.messageDirection=s.MessageDirection.clientToServer,e.type=new s.ProtocolNotificationType(e.method)}(m||(t.WillSaveTextDocumentNotification=m={})),function(e){e.method="textDocument/didSave",e.messageDirection=s.MessageDirection.clientToServer,e.type=new s.ProtocolNotificationType(e.method)}(y||(t.DidSaveTextDocumentNotification=y={})),function(e){e.method="textDocument/didAccess",e.messageDirection=s.MessageDirection.clientToServer,e.type=new s.ProtocolNotificationType(e.method)}(v||(t.DidAccessTextDocumentNotification=v={})),function(e){e.method="textDocument/didCreate",e.messageDirection=s.MessageDirection.clientToServer,e.type=new s.ProtocolNotificationType(e.method)}(_||(t.DidCreateTextDocumentNotification=_={})),function(e){e.method="textDocument/didDelete",e.messageDirection=s.MessageDirection.clientToServer,e.type=new s.ProtocolNotificationType(e.method)}(b||(t.DidDeleteTextDocumentNotification=b={}))},5797:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DidChangeWorkspaceFoldersNotification=void 0;const r=n(757);var i;!function(e){e.method="workspace/didChangeWorkspaceFolders",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolNotificationType(e.method)}(i||(t.DidChangeWorkspaceFoldersNotification=i={}))},6899:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EMPTY_DOCUMENT_CONTEXT=t.EndpointID=t.ChatResultCode=t.ConversationOptions=t.SceneLocation=t.SwitchConversationNotification=t.ClearChatHistoryNotification=t.DeleteChatHistoryNotification=t.InlineChatCompletionRequest=t.ChatCompletionRequest=void 0;const r=n(757);var i,o,s,a,c,u,d,l;!function(e){e.method="code/chatCompletion",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolRequestType(e.method)}(i||(t.ChatCompletionRequest=i={})),function(e){e.method="code/inlineChatCompletion",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolRequestType(e.method)}(o||(t.InlineChatCompletionRequest=o={})),function(e){e.method="code/deleteChatHistory",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolNotificationType(e.method)}(s||(t.DeleteChatHistoryNotification=s={})),function(e){e.method="code/clearChatHistory",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolNotificationType(e.method)}(a||(t.ClearChatHistoryNotification=a={})),function(e){e.method="code/switchConversation",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolNotificationType(e.method)}(c||(t.SwitchConversationNotification=c={})),function(e){e[e.InlineChat=1]="InlineChat",e[e.Chatview=2]="Chatview"}(u||(t.SceneLocation=u={}));t.ConversationOptions=class{constructor(){this.temperature=.1,this.topP=1,this.rejectionMessage="Sorry, but I can only assist with programming related questions."}},function(e){e[e.SUCCESS=0]="SUCCESS",e[e.ERROR=-1]="ERROR",e[e.LENGTH=-2]="LENGTH",e[e.SENSITIVE_CONTENT=-3]="SENSITIVE_CONTENT",e[e.ErrLogOut=4010]="ErrLogOut",e[e.ErrAccessReject=4011]="ErrAccessReject",e[e.ErrTrafficReject=3004]="ErrTrafficReject"}(d||(t.ChatResultCode=d={})),function(e){e.GPT3_5="ide-gpt3.5",e.GPT4="ide-gpt4",e.INTERNAL="ide-internal"}(l||(t.EndpointID=l={})),t.EMPTY_DOCUMENT_CONTEXT={document:{uri:""},fileName:"",language:{languageId:""},selectedCode:"",selection:{start:{line:0,character:0},end:{line:0,character:0}},selections:[{start:{line:0,character:0},end:{line:0,character:0}}],wholeRange:{start:{line:0,character:0},end:{line:0,character:0}}}},3518:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ckgErrorCode=void 0,function(e){e[e.Success=0]="Success",e[e.ErrCKGUnexpected=1001]="ErrCKGUnexpected",e[e.ErrCKGOsNotCompatible=1002]="ErrCKGOsNotCompatible"}(n||(t.ckgErrorCode=n={}))},2318:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CodeAcceptCompletionRequest=void 0;const r=n(757);var i;!function(e){e.method="code/accept_completion",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolRequestType(e.method)}(i||(t.CodeAcceptCompletionRequest=i={}))},9314:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CompletionResultType=t.CodeGetCompletionRequest=void 0,t.cursorHistoryToJsonString=function(e){try{if(e){let t=new Map;for(const[n,r]of e)t.set(n,JSON.stringify([...r]));return JSON.stringify([...t])}}catch(e){}return""},t.jsonStringToCursorHistory=function(e){try{if(e){let t=new Map,n=new Map(JSON.parse(e));for(const[e,r]of n)t.set(e,new Map(JSON.parse(r)));return t}}catch(e){}return};const r=n(757);var i,o;!function(e){e.method="code/get_completion",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolRequestType(e.method)}(i||(t.CodeGetCompletionRequest=i={})),function(e){e.Network="Network",e.Cache="Cache",e.TypingAsSuggested="TypingAsSuggested",e.Cycling="Cycling"}(o||(t.CompletionResultType=o={}))},2208:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CodeReviewRequest=void 0;const r=n(757);var i;!function(e){e.method="code/review",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolRequestType(e.method)}(i||(t.CodeReviewRequest=i={}))},6006:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},5850:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FunctionDocIntent_ID=t.ChatTurnReference=t.CONTEXT_SET_FOR_MODEL_TO_SELECT=t.DEFAULT_REQUIRED_CONTEXTS=t.PromptContextKind=t.RegisterContextResolverRequest=void 0;const r=n(757);var i,o;!function(e){e.method="context/register",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolRequestType(e.method)}(i||(t.RegisterContextResolverRequest=i={})),function(e){e.CurrentEditor="current-editor",e.CurrentSelection="current-selection",e.CurrentSelectionClassDecl="current-selection-class-declarations",e.CurrentSelectionFunctionImpl="current-selection-function-implementations",e.CurrentSelectionTypeDecl="current-selection-type-declarations",e.DebugConsoleOutput="debug-console-output",e.Diagnostics="diagnostics",e.DocSelection="doc-selection",e.FixSelection="fix-selection",e.InlineChatSelection="inline-chat-selection",e.ProjectLabels="project-labels",e.TerminalSelection="terminal-selection",e.TerminalLastCommand="terminal-last-command",e.Workspace="workspace",e.GitMetadata="git-metadata",e.UnitTestTarget="unittest-target",e.ActiveSelection="active-selection",e.RepoMetadataFromServer="repo_metadata_server",e.KeyFilesContentFromServer="key_files_content_server",e.SimilarCodeFromServer="similar_code_server",e.RelatedSymbolsFromServer="related_symbols_server",e.LintErrorFixSelection="lint-error-fix-selection",e.LintErrorFormatConstraint="lint-error-format-constraint",e.LintErrorFixDiagnostics="lint-error-fix-diagnostics",e.WebSearch="web_search",e.NoContext="no_context"}(o||(t.PromptContextKind=o={})),t.DEFAULT_REQUIRED_CONTEXTS=[o.InlineChatSelection,o.CurrentSelectionClassDecl,o.CurrentSelectionFunctionImpl,o.CurrentSelectionTypeDecl,o.CurrentSelection,o.ProjectLabels],t.CONTEXT_SET_FOR_MODEL_TO_SELECT=new Set([o.DebugConsoleOutput,o.Workspace]);t.ChatTurnReference=class{constructor(e,t){this.anchor=e,this.languageId=t}},t.FunctionDocIntent_ID="doc"},8782:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ResolveContextRequest=void 0;const r=n(757);var i;!function(e){e.method="context/resolve",e.messageDirection=r.MessageDirection.serverToClient,e.type=new r.ProtocolRequestType(e.method)}(i||(t.ResolveContextRequest=i={}))},9529:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorCode=void 0,function(e){e[e.Success=0]="Success",e[e.ErrNoAuth=1001]="ErrNoAuth",e[e.ErrCheckAuth=1002]="ErrCheckAuth",e[e.ErrInternal=2001]="ErrInternal",e[e.ErrModelReqFail=3003]="ErrModelReqFail",e[e.ErrParamInvalid=4001]="ErrParamInvalid",e[e.ErrContentTooLong=4006]="ErrContentTooLong",e[e.ErrRateLimitExceeded=4007]="ErrRateLimitExceeded",e[e.ErrLogOut=4010]="ErrLogOut",e[e.ErrAccessReject=4011]="ErrAccessReject"}(n||(t.ErrorCode=n={}))},3419:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExplainCodeRequest=void 0;const r=n(757);var i;!function(e){e.method="code/explain",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolRequestType(e.method)}(i||(t.ExplainCodeRequest=i={}))},7366:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AIFeature=t.GetAIFeaturesRequest=void 0;const r=n(757);var i,o;!function(e){e.method="code/features",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolRequestType(e.method)}(i||(t.GetAIFeaturesRequest=i={})),function(e){e[e.HashWorkspace=0]="HashWorkspace"}(o||(t.AIFeature=o={}))},9174:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GetAppVersionRequest=void 0;const r=n(757);var i;!function(e){e.method="code/get_app_version",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolRequestType0(e.method)}(i||(t.GetAppVersionRequest=i={}))},1958:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GetChatViewBannerInfoRequest=void 0;const r=n(757);var i;!function(e){e.method="code/chat_view_banner",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolRequestType(e.method)}(i||(t.GetChatViewBannerInfoRequest=i={}))},6694:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GetDefinitionsRequest=void 0;const r=n(757);var i;!function(e){e.method="code/get_definitions",e.messageDirection=r.MessageDirection.serverToClient,e.type=new r.ProtocolRequestType(e.method)}(i||(t.GetDefinitionsRequest=i={}))},2163:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GetDiagnosticsRequest=void 0;const r=n(757);var i;!function(e){e.method="code/get_diagnostics",e.messageDirection=r.MessageDirection.serverToClient,e.type=new r.ProtocolRequestType(e.method)}(i||(t.GetDiagnosticsRequest=i={}))},8112:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GetImplementationRequest=void 0;const r=n(757);var i;!function(e){e.method="code/get_implementation",e.messageDirection=r.MessageDirection.serverToClient,e.type=new r.ProtocolRequestType(e.method)}(i||(t.GetImplementationRequest=i={}))},8268:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GetModelNamesRequest=void 0;const r=n(757);var i;!function(e){e.method="code/get_model_names",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolRequestType0(e.method)}(i||(t.GetModelNamesRequest=i={}))},8913:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NeighborFileType=t.GetNeighborFileRequest=void 0;const r=n(757);var i,o;!function(e){e.method="code/get_neighbor_file",e.messageDirection=r.MessageDirection.serverToClient,e.type=new r.ProtocolRequestType(e.method)}(i||(t.GetNeighborFileRequest=i={})),function(e){e.None="none",e.OpenTabs="opentabs",e.CursorMostRecent="cursormostrecent",e.CursorMostCount="cursormostcount",e.CursorBeforeCurrentFile="cursorbeforecurrentfile",e.WorkspaceSharingSameFolder="workspacesharingsamefolder",e.WorkspaceSmallestPathDist="workspacesmallestpathdist",e.OpenTabsAndCocommitted="opentabsandcocommitted"}(o||(t.NeighborFileType=o={}))},2597:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GetRepositoriesRequest=void 0;const r=n(757);var i;!function(e){e.method="code/get_repositories",e.messageDirection=r.MessageDirection.serverToClient,e.type=new r.ProtocolRequestType(e.method)}(i||(t.GetRepositoriesRequest=i={}))},2542:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GetSymbolContextRequest=void 0;const r=n(757);var i;!function(e){e.method="code/get_symbol_context",e.messageDirection=r.MessageDirection.serverToClient,e.type=new r.ProtocolRequestType(e.method)}(i||(t.GetSymbolContextRequest=i={}))},272:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GetUnitTestContext=void 0;const r=n(757);var i;!function(e){e.method="code/get_unittest_context",e.messageDirection=r.MessageDirection.serverToClient,e.type=new r.ProtocolRequestType(e.method)}(i||(t.GetUnitTestContext=i={}))},6782:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MultiPointCompletionRequest=void 0;const r=n(757);var i;!function(e){e.method="code/multi_point",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolRequestType(e.method)}(i||(t.MultiPointCompletionRequest=i={}))},1193:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UIFeatureNotification=void 0;const r=n(757);var i;!function(e){e.method="ui/feature",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolNotificationType(e.method)}(i||(t.UIFeatureNotification=i={}))},7052:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExitNotification=void 0;const r=n(757);var i;!function(e){e.method="exit",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolNotificationType0(e.method)}(i||(t.ExitNotification=i={}))},9936:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InitializeRequest=void 0;const r=n(757);var i;!function(e){e.method="initialize",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolRequestType(e.method)}(i||(t.InitializeRequest=i={}))},8894:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InitializedNotification=void 0;const r=n(757);var i;!function(e){e.method="initialized",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolNotificationType(e.method)}(i||(t.InitializedNotification=i={}))},5437:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LogMessageNotification=void 0;const r=n(757);var i;!function(e){e.method="window/logMessage",e.messageDirection=r.MessageDirection.serverToClient,e.type=new r.ProtocolNotificationType(e.method)}(i||(t.LogMessageNotification=i={}))},9389:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ReportMessageNotification=void 0;const r=n(757);var i;!function(e){e.method="workspace/reportMessage",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolNotificationType(e.method)}(i||(t.ReportMessageNotification=i={}))},4052:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ShowMessageNotification=void 0;const r=n(757);var i;!function(e){e.method="window/showMessage",e.messageDirection=r.MessageDirection.serverToClient,e.type=new r.ProtocolNotificationType(e.method)}(i||(t.ShowMessageNotification=i={}))},8244:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ShutdownRequest=void 0;const r=n(757);var i;!function(e){e.method="shutdown",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolRequestType0(e.method)}(i||(t.ShutdownRequest=i={}))},5455:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UserInfoNotification=void 0;const r=n(757);var i;!function(e){e.method="userInfoChanged",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolNotificationType(e.method)}(i||(t.UserInfoNotification=i={}))},6806:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(9128),t),i(n(9936),t),i(n(8894),t),i(n(8244),t),i(n(7052),t),i(n(5437),t),i(n(9389),t),i(n(4052),t),i(n(5455),t),i(n(5065),t),i(n(4568),t),i(n(5797),t),i(n(2760),t),i(n(6974),t),i(n(1222),t),i(n(6765),t),i(n(9314),t),i(n(2318),t),i(n(2208),t),i(n(6782),t),i(n(3419),t),i(n(9174),t),i(n(8913),t),i(n(2542),t),i(n(6694),t),i(n(8112),t),i(n(2163),t),i(n(2597),t),i(n(6006),t),i(n(5850),t),i(n(8782),t),i(n(6899),t),i(n(8268),t),i(n(9529),t),i(n(3518),t),i(n(272),t),i(n(7366),t),i(n(1958),t),i(n(1193),t),i(n(6398),t),i(n(7924),t),i(n(6710),t),i(n(9376),t),i(n(3895),t),i(n(6099),t),i(n(3150),t),i(n(9609),t),i(n(4544),t)},3150:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ChatEvent=t.InlineChatOpenSource=t.SideChatOpenSource=t.ChatEventType=void 0;const r=n(7924);var i,o,s,a;!function(e){e.use_chat="use_chat",e.create_new_chat="create_new_chat",e.chat_retry="chat_retry",e.chat_delete="chat_delete",e.chat_stop="chat_stop",e.inline_explain="inline_explain",e.inline_doc="inline_doc",e.inline_test="inline_test",e.quick_explain="quick_explain",e.quick_doc="quick_doc",e.quick_test="quick_test",e.clear_history="clear_history",e.select_hisotry="select_history",e.delete_history="delete_history",e.open_side_chat="open_side_chat",e.open_inline_chat="open_inline_chat",e.inline_chat_retry="inline_chat_retry",e.inline_chat_stop="inline_chat_stop",e.inline_chat_followup="inline_chat_followup",e.inline_chat_show_diff="inline_chat_show_diff"}(i||(t.ChatEventType=i={})),function(e){e.Click="click",e.ShortCut="short_cut",e.Command="command",e.Menu="menu",e.CodeLens="code_lens",e.QuickFix="quick_fix"}(o||(t.SideChatOpenSource=o={})),function(e){e.CodeLens="codelens",e.ShortCut="short_cut"}(s||(t.InlineChatOpenSource=s={})),function(e){e.chat=new r.TelemetryActionType("chat_action")}(a||(t.ChatEvent=a={}))},3895:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CommonAction=void 0;const r=n(7924);var i;!function(e){e.Switch=new r.TelemetryActionType("plugin_switch"),e.Install=new r.TelemetryActionType("plugin_install"),e.LoginTrace=new r.TelemetryActionType("common_action"),e.PluginCommonAction=new r.TelemetryActionType("plugin_common_action")}(i||(t.CommonAction=i={}))},6710:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CompletionAction=void 0;const r=n(7924);var i;!function(e){e.Accept=new r.TelemetryActionType("completion_accept"),e.Shown=new r.TelemetryActionType("completion_show"),e.Success=new r.TelemetryActionType("completion_success"),e.Reject=new r.TelemetryActionType("completion_reject"),e.CommitCode=new r.TelemetryActionType("code_commit"),e.GroundTruth=new r.TelemetryActionType("completion_reject")}(i||(t.CompletionAction=i={}))},9376:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ComprehensionAction=void 0;const r=n(7924);var i;!function(e){let t,n,i;e.CopyCode=new r.TelemetryActionType("comprehension_copy_code"),e.CopySelectionCode=new r.TelemetryActionType("comprehension_copy_selection_code"),e.InsertCode=new r.TelemetryActionType("comprehension_insert_code"),e.InsertCodeToNewFile=new r.TelemetryActionType("comprehension_insert_code_to_new_file"),e.Feedback=new r.TelemetryActionType("comprehension_feedback"),e.Trigger=new r.TelemetryActionType("comprehension_trigger"),e.ParseCode=new r.TelemetryActionType("comprehension_parse_code"),e.Accept=new r.TelemetryActionType("comprehension_accept"),e.Reject=new r.TelemetryActionType("comprehension_reject"),e.ShowHashReference=new r.TelemetryActionType("comprehension_show_reference"),function(e){e.GenerateUnitTest="generate_unittests",e.ExplainCode="explain_code",e.QuickFix="quick_fix",e.Doc="doc"}(t=e.Scene||(e.Scene={})),function(e){e.Default="default",e.Dislike="dislike",e.Like="like"}(n=e.FeedbackState||(e.FeedbackState={})),function(e){e.NatualLanguage="natual_language",e.ManualCommand="manual_slash_command",e.CommandWithNL="slash_command_with_nl",e.MenuExplain="menu_explain",e.MenuTest="menu_test",e.MenuDoc="menu_doc",e.CodelensExplain="codelens_explain",e.CodelensDoc="codelens_doc",e.CodelensTest="codelens_test",e.CommandExplain="command_explain",e.CommandDoc="command_doc",e.CommandTest="command_test",e.CommandFix="command_fix",e.QuickFixFix="quick_fix_fix"}(i=e.TriggerAction||(e.TriggerAction={}))}(i||(t.ComprehensionAction=i={}))},4544:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GitAction=void 0;const r=n(7924);var i;!function(e){e.Commit=new r.TelemetryActionType("git_commit")}(i||(t.GitAction=i={}))},6099:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LoginAction=void 0;const r=n(7924);var i;!function(e){e.login=new r.TelemetryActionType("login_action")}(i||(t.LoginAction=i={}))},9609:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PerfAction=void 0;const r=n(7924);var i;!function(e){e.startup=new r.TelemetryActionType("perf_action")}(i||(t.PerfAction=i={}))},7924:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryActionType=void 0;const r=n(757);class i extends r.ProtocolNotificationType{constructor(e){super("telemetry/action_"+e),this.name=e}}t.TelemetryActionType=i},6398:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ActionTypeEnum=void 0,function(e){e.CodeDiff="codeDiff",e.Cursor="cursor",e.Select="select",e.NewLine="newLine",e.DeleteLine="deleteLine",e.ModifyLine="modifyLine",e.Delete="delete",e.Paste="paste",e.Accept="accept",e.Reject="reject",e.OpenFile="openFile",e.CloseFile="closeFile"}(n||(t.ActionTypeEnum=n={}))},8092:(e,t)=>{function n(e){return"string"==typeof e||e instanceof String}function r(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=n,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=r,t.stringArray=function(e){return r(e)&&e.every((e=>n(e)))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.objectLiteral=function(e){return null!==e&&"object"==typeof e}},4086:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageType=void 0,function(e){e.Error=1,e.Warning=2,e.Info=3,e.Log=4,e.NEVER=5}(n||(t.MessageType=n={}))},757:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProtocolNotificationType=t.ProtocolNotificationType0=t.ProtocolRequestType=t.ProtocolRequestType0=t.RegistrationType=t.MessageDirection=void 0;const r=n(3717);var i;!function(e){e.clientToServer="clientToServer",e.serverToClient="serverToClient",e.both="both"}(i||(t.MessageDirection=i={}));t.RegistrationType=class{constructor(e){this.method=e}};class o extends r.RequestType0{constructor(e){super(e)}}t.ProtocolRequestType0=o;class s extends r.RequestType{constructor(e){super(e,r.ParameterStructures.byName)}}t.ProtocolRequestType=s;class a extends r.NotificationType0{constructor(e){super(e)}}t.ProtocolNotificationType0=a;class c extends r.NotificationType{constructor(e){super(e,r.ParameterStructures.byName)}}t.ProtocolNotificationType=c},2364:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},2433:(e,t,n)=>{e.exports=n(3717)},3717:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.createMessageConnection=t.BrowserMessageWriter=t.BrowserMessageReader=void 0;n(4977).default.install();const o=n(7683);i(n(7683),t);class s extends o.AbstractMessageReader{constructor(e){super(),this._onData=new o.Emitter,this._messageListener=e=>{this._onData.fire(e.data)},e.addEventListener("error",(e=>this.fireError(e))),e.onmessage=this._messageListener}listen(e){return this._onData.event(e)}}t.BrowserMessageReader=s;class a extends o.AbstractMessageWriter{constructor(e){super(),this.port=e,this.errorCount=0,e.addEventListener("error",(e=>this.fireError(e)))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}}t.BrowserMessageWriter=a,t.createMessageConnection=function(e,t,n,r){return void 0===n&&(n=o.NullLogger),o.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,o.createMessageConnection)(e,t,n,r)}},4977:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(7683);class i extends r.AbstractMessageBuffer{constructor(e="utf-8"){super(e),this.asciiDecoder=new TextDecoder("ascii")}emptyBuffer(){return i.emptyBuffer}fromString(e,t){return(new TextEncoder).encode(e)}toString(e,t){return"ascii"===t?this.asciiDecoder.decode(e):new TextDecoder(t).decode(e)}asNative(e,t){return void 0===t?e:e.slice(0,t)}allocNative(e){return new Uint8Array(e)}}i.emptyBuffer=new Uint8Array(0);class o{constructor(e){this.socket=e,this._onData=new r.Emitter,this._messageListener=e=>{e.data.arrayBuffer().then((e=>{this._onData.fire(new Uint8Array(e))}),(()=>{(0,r.RAL)().console.error("Converting blob to array buffer failed.")}))},this.socket.addEventListener("message",this._messageListener)}onClose(e){return this.socket.addEventListener("close",e),r.Disposable.create((()=>this.socket.removeEventListener("close",e)))}onError(e){return this.socket.addEventListener("error",e),r.Disposable.create((()=>this.socket.removeEventListener("error",e)))}onEnd(e){return this.socket.addEventListener("end",e),r.Disposable.create((()=>this.socket.removeEventListener("end",e)))}onData(e){return this._onData.event(e)}}class s{constructor(e){this.socket=e}onClose(e){return this.socket.addEventListener("close",e),r.Disposable.create((()=>this.socket.removeEventListener("close",e)))}onError(e){return this.socket.addEventListener("error",e),r.Disposable.create((()=>this.socket.removeEventListener("error",e)))}onEnd(e){return this.socket.addEventListener("end",e),r.Disposable.create((()=>this.socket.removeEventListener("end",e)))}write(e,t){if("string"==typeof e){if(void 0!==t&&"utf-8"!==t)throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${t}`);this.socket.send(e)}else this.socket.send(e);return Promise.resolve()}end(){this.socket.close()}}const a=new TextEncoder,c=Object.freeze({messageBuffer:Object.freeze({create:e=>new i(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>{if("utf-8"!==t.charset)throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${t.charset}`);return Promise.resolve(a.encode(JSON.stringify(e,void 0,0)))}}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>{if(!(e instanceof Uint8Array))throw new Error("In a Browser environments only Uint8Arrays are supported.");return Promise.resolve(JSON.parse(new TextDecoder(t.charset).decode(e)))}})}),stream:Object.freeze({asReadableStream:e=>new o(e),asWritableStream:e=>new s(e)}),console,timer:Object.freeze({setTimeout(e,t,...n){const r=setTimeout(e,t,...n);return{dispose:()=>clearTimeout(r)}},setImmediate(e,...t){const n=setTimeout(e,0,...t);return{dispose:()=>clearTimeout(n)}},setInterval(e,t,...n){const r=setInterval(e,t,...n);return{dispose:()=>clearInterval(r)}}})});function u(){return c}!function(e){e.install=function(){r.RAL.install(c)}}(u||(u={})),t.default=u},7683:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressType=t.ProgressToken=t.createMessageConnection=t.NullLogger=t.ConnectionOptions=t.ConnectionStrategy=t.AbstractMessageBuffer=t.WriteableStreamMessageWriter=t.AbstractMessageWriter=t.MessageWriter=t.ReadableStreamMessageReader=t.AbstractMessageReader=t.MessageReader=t.SharedArrayReceiverStrategy=t.SharedArraySenderStrategy=t.CancellationToken=t.CancellationTokenSource=t.Emitter=t.Event=t.Disposable=t.LRUCache=t.Touch=t.LinkedMap=t.ParameterStructures=t.NotificationType9=t.NotificationType8=t.NotificationType7=t.NotificationType6=t.NotificationType5=t.NotificationType4=t.NotificationType3=t.NotificationType2=t.NotificationType1=t.NotificationType0=t.NotificationType=t.ErrorCodes=t.ResponseError=t.RequestType9=t.RequestType8=t.RequestType7=t.RequestType6=t.RequestType5=t.RequestType4=t.RequestType3=t.RequestType2=t.RequestType1=t.RequestType0=t.RequestType=t.Message=t.RAL=void 0,t.MessageStrategy=t.CancellationStrategy=t.CancellationSenderStrategy=t.CancellationReceiverStrategy=t.ConnectionError=t.ConnectionErrors=t.LogTraceNotification=t.SetTraceNotification=t.TraceFormat=t.TraceValues=t.Trace=void 0;const r=n(3239);Object.defineProperty(t,"Message",{enumerable:!0,get:function(){return r.Message}}),Object.defineProperty(t,"RequestType",{enumerable:!0,get:function(){return r.RequestType}}),Object.defineProperty(t,"RequestType0",{enumerable:!0,get:function(){return r.RequestType0}}),Object.defineProperty(t,"RequestType1",{enumerable:!0,get:function(){return r.RequestType1}}),Object.defineProperty(t,"RequestType2",{enumerable:!0,get:function(){return r.RequestType2}}),Object.defineProperty(t,"RequestType3",{enumerable:!0,get:function(){return r.RequestType3}}),Object.defineProperty(t,"RequestType4",{enumerable:!0,get:function(){return r.RequestType4}}),Object.defineProperty(t,"RequestType5",{enumerable:!0,get:function(){return r.RequestType5}}),Object.defineProperty(t,"RequestType6",{enumerable:!0,get:function(){return r.RequestType6}}),Object.defineProperty(t,"RequestType7",{enumerable:!0,get:function(){return r.RequestType7}}),Object.defineProperty(t,"RequestType8",{enumerable:!0,get:function(){return r.RequestType8}}),Object.defineProperty(t,"RequestType9",{enumerable:!0,get:function(){return r.RequestType9}}),Object.defineProperty(t,"ResponseError",{enumerable:!0,get:function(){return r.ResponseError}}),Object.defineProperty(t,"ErrorCodes",{enumerable:!0,get:function(){return r.ErrorCodes}}),Object.defineProperty(t,"NotificationType",{enumerable:!0,get:function(){return r.NotificationType}}),Object.defineProperty(t,"NotificationType0",{enumerable:!0,get:function(){return r.NotificationType0}}),Object.defineProperty(t,"NotificationType1",{enumerable:!0,get:function(){return r.NotificationType1}}),Object.defineProperty(t,"NotificationType2",{enumerable:!0,get:function(){return r.NotificationType2}}),Object.defineProperty(t,"NotificationType3",{enumerable:!0,get:function(){return r.NotificationType3}}),Object.defineProperty(t,"NotificationType4",{enumerable:!0,get:function(){return r.NotificationType4}}),Object.defineProperty(t,"NotificationType5",{enumerable:!0,get:function(){return r.NotificationType5}}),Object.defineProperty(t,"NotificationType6",{enumerable:!0,get:function(){return r.NotificationType6}}),Object.defineProperty(t,"NotificationType7",{enumerable:!0,get:function(){return r.NotificationType7}}),Object.defineProperty(t,"NotificationType8",{enumerable:!0,get:function(){return r.NotificationType8}}),Object.defineProperty(t,"NotificationType9",{enumerable:!0,get:function(){return r.NotificationType9}}),Object.defineProperty(t,"ParameterStructures",{enumerable:!0,get:function(){return r.ParameterStructures}});const i=n(8386);Object.defineProperty(t,"LinkedMap",{enumerable:!0,get:function(){return i.LinkedMap}}),Object.defineProperty(t,"LRUCache",{enumerable:!0,get:function(){return i.LRUCache}}),Object.defineProperty(t,"Touch",{enumerable:!0,get:function(){return i.Touch}});const o=n(4649);Object.defineProperty(t,"Disposable",{enumerable:!0,get:function(){return o.Disposable}});const s=n(7966);Object.defineProperty(t,"Event",{enumerable:!0,get:function(){return s.Event}}),Object.defineProperty(t,"Emitter",{enumerable:!0,get:function(){return s.Emitter}});const a=n(6412);Object.defineProperty(t,"CancellationTokenSource",{enumerable:!0,get:function(){return a.CancellationTokenSource}}),Object.defineProperty(t,"CancellationToken",{enumerable:!0,get:function(){return a.CancellationToken}});const c=n(5498);Object.defineProperty(t,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return c.SharedArraySenderStrategy}}),Object.defineProperty(t,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return c.SharedArrayReceiverStrategy}});const u=n(7691);Object.defineProperty(t,"MessageReader",{enumerable:!0,get:function(){return u.MessageReader}}),Object.defineProperty(t,"AbstractMessageReader",{enumerable:!0,get:function(){return u.AbstractMessageReader}}),Object.defineProperty(t,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return u.ReadableStreamMessageReader}});const d=n(939);Object.defineProperty(t,"MessageWriter",{enumerable:!0,get:function(){return d.MessageWriter}}),Object.defineProperty(t,"AbstractMessageWriter",{enumerable:!0,get:function(){return d.AbstractMessageWriter}}),Object.defineProperty(t,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return d.WriteableStreamMessageWriter}});const l=n(1458);Object.defineProperty(t,"AbstractMessageBuffer",{enumerable:!0,get:function(){return l.AbstractMessageBuffer}});const f=n(7947);Object.defineProperty(t,"ConnectionStrategy",{enumerable:!0,get:function(){return f.ConnectionStrategy}}),Object.defineProperty(t,"ConnectionOptions",{enumerable:!0,get:function(){return f.ConnectionOptions}}),Object.defineProperty(t,"NullLogger",{enumerable:!0,get:function(){return f.NullLogger}}),Object.defineProperty(t,"createMessageConnection",{enumerable:!0,get:function(){return f.createMessageConnection}}),Object.defineProperty(t,"ProgressToken",{enumerable:!0,get:function(){return f.ProgressToken}}),Object.defineProperty(t,"ProgressType",{enumerable:!0,get:function(){return f.ProgressType}}),Object.defineProperty(t,"Trace",{enumerable:!0,get:function(){return f.Trace}}),Object.defineProperty(t,"TraceValues",{enumerable:!0,get:function(){return f.TraceValues}}),Object.defineProperty(t,"TraceFormat",{enumerable:!0,get:function(){return f.TraceFormat}}),Object.defineProperty(t,"SetTraceNotification",{enumerable:!0,get:function(){return f.SetTraceNotification}}),Object.defineProperty(t,"LogTraceNotification",{enumerable:!0,get:function(){return f.LogTraceNotification}}),Object.defineProperty(t,"ConnectionErrors",{enumerable:!0,get:function(){return f.ConnectionErrors}}),Object.defineProperty(t,"ConnectionError",{enumerable:!0,get:function(){return f.ConnectionError}}),Object.defineProperty(t,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return f.CancellationReceiverStrategy}}),Object.defineProperty(t,"CancellationSenderStrategy",{enumerable:!0,get:function(){return f.CancellationSenderStrategy}}),Object.defineProperty(t,"CancellationStrategy",{enumerable:!0,get:function(){return f.CancellationStrategy}}),Object.defineProperty(t,"MessageStrategy",{enumerable:!0,get:function(){return f.MessageStrategy}});const h=n(8996);t.RAL=h.default},6412:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationTokenSource=t.CancellationToken=void 0;const r=n(8996),i=n(9387),o=n(7966);var s;!function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:o.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:o.Event.None}),e.is=function(t){const n=t;return n&&(n===e.None||n===e.Cancelled||i.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}}(s||(t.CancellationToken=s={}));const a=Object.freeze((function(e,t){const n=(0,r.default)().timer.setTimeout(e.bind(t),0);return{dispose(){n.dispose()}}}));class c{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?a:(this._emitter||(this._emitter=new o.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}t.CancellationTokenSource=class{get token(){return this._token||(this._token=new c),this._token}cancel(){this._token?this._token.cancel():this._token=s.Cancelled}dispose(){this._token?this._token instanceof c&&this._token.dispose():this._token=s.None}}},7947:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createMessageConnection=t.ConnectionOptions=t.MessageStrategy=t.CancellationStrategy=t.CancellationSenderStrategy=t.CancellationReceiverStrategy=t.RequestCancellationReceiverStrategy=t.IdCancellationReceiverStrategy=t.ConnectionStrategy=t.ConnectionError=t.ConnectionErrors=t.LogTraceNotification=t.SetTraceNotification=t.TraceFormat=t.TraceValues=t.Trace=t.NullLogger=t.ProgressType=t.ProgressToken=void 0;const r=n(8996),i=n(9387),o=n(3239),s=n(8386),a=n(7966),c=n(6412);var u,d,l,f,h,p,g,m,y,v,_,b,T,w,C,S,E,R,M;!function(e){e.type=new o.NotificationType("$/cancelRequest")}(u||(u={})),function(e){e.is=function(e){return"string"==typeof e||"number"==typeof e}}(d||(t.ProgressToken=d={})),function(e){e.type=new o.NotificationType("$/progress")}(l||(l={}));t.ProgressType=class{constructor(){}},function(e){e.is=function(e){return i.func(e)}}(f||(f={})),t.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}}),function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Compact=2]="Compact",e[e.Verbose=3]="Verbose"}(h||(t.Trace=h={})),function(e){e.Off="off",e.Messages="messages",e.Compact="compact",e.Verbose="verbose"}(p||(t.TraceValues=p={})),function(e){e.fromString=function(t){if(!i.string(t))return e.Off;switch(t=t.toLowerCase()){case"off":default:return e.Off;case"messages":return e.Messages;case"compact":return e.Compact;case"verbose":return e.Verbose}},e.toString=function(t){switch(t){case e.Off:return"off";case e.Messages:return"messages";case e.Compact:return"compact";case e.Verbose:return"verbose";default:return"off"}}}(h||(t.Trace=h={})),function(e){e.Text="text",e.JSON="json"}(g||(t.TraceFormat=g={})),function(e){e.fromString=function(t){return i.string(t)&&"json"===(t=t.toLowerCase())?e.JSON:e.Text}}(g||(t.TraceFormat=g={})),function(e){e.type=new o.NotificationType("$/setTrace")}(m||(t.SetTraceNotification=m={})),function(e){e.type=new o.NotificationType("$/logTrace")}(y||(t.LogTraceNotification=y={})),function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"}(v||(t.ConnectionErrors=v={}));class P extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,P.prototype)}}t.ConnectionError=P,function(e){e.is=function(e){const t=e;return t&&i.func(t.cancelUndispatched)}}(_||(t.ConnectionStrategy=_={})),function(e){e.is=function(e){const t=e;return t&&(void 0===t.kind||"id"===t.kind)&&i.func(t.createCancellationTokenSource)&&(void 0===t.dispose||i.func(t.dispose))}}(b||(t.IdCancellationReceiverStrategy=b={})),function(e){e.is=function(e){const t=e;return t&&"request"===t.kind&&i.func(t.createCancellationTokenSource)&&(void 0===t.dispose||i.func(t.dispose))}}(T||(t.RequestCancellationReceiverStrategy=T={})),function(e){e.Message=Object.freeze({createCancellationTokenSource:e=>new c.CancellationTokenSource}),e.is=function(e){return b.is(e)||T.is(e)}}(w||(t.CancellationReceiverStrategy=w={})),function(e){e.Message=Object.freeze({sendCancellation:(e,t)=>e.sendNotification(u.type,{id:t}),cleanup(e){}}),e.is=function(e){const t=e;return t&&i.func(t.sendCancellation)&&i.func(t.cleanup)}}(C||(t.CancellationSenderStrategy=C={})),function(e){e.Message=Object.freeze({receiver:w.Message,sender:C.Message}),e.is=function(e){const t=e;return t&&w.is(t.receiver)&&C.is(t.sender)}}(S||(t.CancellationStrategy=S={})),function(e){e.is=function(e){const t=e;return t&&i.func(t.handleMessage)}}(E||(t.MessageStrategy=E={})),function(e){e.is=function(e){const t=e;return t&&(S.is(t.cancellationStrategy)||_.is(t.connectionStrategy)||E.is(t.messageStrategy))}}(R||(t.ConnectionOptions=R={})),function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"}(M||(M={})),t.createMessageConnection=function(e,n,p,_){const T=void 0!==p?p:t.NullLogger;let w=0,C=0,R=0;const O="2.0";let N;const x=new Map;let D;const k=new Map,j=new Map;let A,L,q=new s.LinkedMap,I=new Map,F=new Set,$=new Map,W=h.Off,U=g.Text,z=M.New;const V=new a.Emitter,B=new a.Emitter,G=new a.Emitter,J=new a.Emitter,K=new a.Emitter,H=_&&_.cancellationStrategy?_.cancellationStrategy:S.Message;function X(e){if(null===e)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+e.toString()}function Q(e,t){var n;o.Message.isRequest(t)?e.set(X(t.id),t):o.Message.isResponse(t)?e.set(null===(n=t.id)?"res-unknown-"+(++R).toString():"res-"+n.toString(),t):e.set("not-"+(++C).toString(),t)}function Y(e){}function Z(){return z===M.Listening}function ee(){return z===M.Closed}function te(){return z===M.Disposed}function ne(){z!==M.New&&z!==M.Listening||(z=M.Closed,B.fire(void 0))}function re(){A||0===q.size||(A=(0,r.default)().timer.setImmediate((()=>{A=void 0,function(){if(0===q.size)return;const e=q.shift();try{const t=_?.messageStrategy;E.is(t)?t.handleMessage(e,ie):ie(e)}finally{re()}}()})))}function ie(e){o.Message.isRequest(e)?function(e){if(te())return;function t(t,r,i){const s={jsonrpc:O,id:e.id};t instanceof o.ResponseError?s.error=t.toJson():s.result=void 0===t?null:t,ae(s,r,i),n.write(s).catch((()=>T.error("Sending response failed.")))}function r(t,r,i){const o={jsonrpc:O,id:e.id,error:t.toJson()};ae(o,r,i),n.write(o).catch((()=>T.error("Sending response failed.")))}function s(t,r,i){void 0===t&&(t=null);const o={jsonrpc:O,id:e.id,result:t};ae(o,r,i),n.write(o).catch((()=>T.error("Sending response failed.")))}!function(e){if(W===h.Off||!L)return;if(U===g.Text){let t;W!==h.Verbose&&W!==h.Compact||!e.params||(t=`Params: ${se(e.params)}\n\n`),L.log(`Received request '${e.method} - (${e.id})'.`,t)}else ue("receive-request",e)}(e);const a=x.get(e.method);let c,u;a&&(c=a.type,u=a.handler);const d=Date.now();if(u||N){const n=e.id??String(Date.now()),a=b.is(H.receiver)?H.receiver.createCancellationTokenSource(n):H.receiver.createCancellationTokenSource(e);null!==e.id&&F.has(e.id)&&a.cancel(),null!==e.id&&$.set(n,a);try{let l;if(u)if(void 0===e.params){if(void 0!==c&&0!==c.numberOfParams)return void r(new o.ResponseError(o.ErrorCodes.InvalidParams,`Request ${e.method} defines ${c.numberOfParams} params but received none.`),e.method,d);l=u(a.token)}else if(Array.isArray(e.params)){if(void 0!==c&&c.parameterStructures===o.ParameterStructures.byName)return void r(new o.ResponseError(o.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by name but received parameters by position`),e.method,d);l=u(...e.params,a.token)}else{if(void 0!==c&&c.parameterStructures===o.ParameterStructures.byPosition)return void r(new o.ResponseError(o.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by position but received parameters by name`),e.method,d);l=u(e.params,a.token)}else N&&(l=N(e.method,e.params,a.token));const f=l;l?f.then?f.then((r=>{$.delete(n),t(r,e.method,d)}),(t=>{$.delete(n),t instanceof o.ResponseError?r(t,e.method,d):t&&i.string(t.message)?r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,d):r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,d)})):($.delete(n),t(l,e.method,d)):($.delete(n),s(l,e.method,d))}catch(s){$.delete(n),s instanceof o.ResponseError?t(s,e.method,d):s&&i.string(s.message)?r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${s.message}`),e.method,d):r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,d)}}else r(new o.ResponseError(o.ErrorCodes.MethodNotFound,`Unhandled method ${e.method}`),e.method,d)}(e):o.Message.isNotification(e)?function(e){if(te())return;let t,n;if(e.method===u.type.method){const t=e.params.id;return F.delete(t),void ce(e)}{const r=k.get(e.method);r&&(n=r.handler,t=r.type)}if(n||D)try{if(ce(e),n)if(void 0===e.params)void 0!==t&&0!==t.numberOfParams&&t.parameterStructures!==o.ParameterStructures.byName&&T.error(`Notification ${e.method} defines ${t.numberOfParams} params but received none.`),n();else if(Array.isArray(e.params)){const r=e.params;e.method===l.type.method&&2===r.length&&d.is(r[0])?n({token:r[0],value:r[1]}):(void 0!==t&&(t.parameterStructures===o.ParameterStructures.byName&&T.error(`Notification ${e.method} defines parameters by name but received parameters by position`),t.numberOfParams!==e.params.length&&T.error(`Notification ${e.method} defines ${t.numberOfParams} params but received ${r.length} arguments`)),n(...r))}else void 0!==t&&t.parameterStructures===o.ParameterStructures.byPosition&&T.error(`Notification ${e.method} defines parameters by position but received parameters by name`),n(e.params);else D&&D(e.method,e.params)}catch(t){t.message?T.error(`Notification handler '${e.method}' failed with message: ${t.message}`):T.error(`Notification handler '${e.method}' failed unexpectedly.`)}else G.fire(e)}(e):o.Message.isResponse(e)?function(e){if(te())return;if(null===e.id)e.error?T.error(`Received response message without id: Error is: \n${JSON.stringify(e.error,void 0,4)}`):T.error("Received response message without id. No further error information provided.");else{const t=e.id,n=I.get(t);if(function(e,t){if(W===h.Off||!L)return;if(U===g.Text){let n;if(W!==h.Verbose&&W!==h.Compact||(e.error&&e.error.data?n=`Error data: ${se(e.error.data)}\n\n`:e.result?n=`Result: ${se(e.result)}\n\n`:void 0===e.error&&(n="No result returned.\n\n")),t){const r=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:"";L.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${r}`,n)}else L.log(`Received response ${e.id} without active response promise.`,n)}else ue("receive-response",e)}(e,n),void 0!==n){I.delete(t);try{if(e.error){const t=e.error;n.reject(new o.ResponseError(t.code,t.message,t.data))}else{if(void 0===e.result)throw new Error("Should never happen.");n.resolve(e.result)}}catch(e){e.message?T.error(`Response handler '${n.method}' failed with message: ${e.message}`):T.error(`Response handler '${n.method}' failed unexpectedly.`)}}}}(e):function(e){if(!e)return void T.error("Received empty message.");T.error(`Received message which is neither a response nor a notification message:\n${JSON.stringify(e,null,4)}`);const t=e;if(i.string(t.id)||i.number(t.id)){const e=t.id,n=I.get(e);n&&n.reject(new Error("The received response has neither a result nor an error property."))}}(e)}e.onClose(ne),e.onError((function(e){V.fire([e,void 0,void 0])})),n.onClose(ne),n.onError((function(e){V.fire(e)}));const oe=e=>{try{if(o.Message.isNotification(e)&&e.method===u.type.method){const t=e.params.id,r=X(t),i=q.get(r);if(o.Message.isRequest(i)){const o=_?.connectionStrategy,s=o&&o.cancelUndispatched?o.cancelUndispatched(i,Y):void 0;if(s&&(void 0!==s.error||void 0!==s.result))return q.delete(r),$.delete(t),s.id=i.id,ae(s,e.method,Date.now()),void n.write(s).catch((()=>T.error("Sending response for canceled message failed.")))}const s=$.get(t);if(void 0!==s)return s.cancel(),void ce(e);F.add(t)}Q(q,e)}finally{re()}};function se(e){if(null!=e)switch(W){case h.Verbose:return JSON.stringify(e,null,4);case h.Compact:return JSON.stringify(e);default:return}}function ae(e,t,n){if(W!==h.Off&&L)if(U===g.Text){let r;W!==h.Verbose&&W!==h.Compact||(e.error&&e.error.data?r=`Error data: ${se(e.error.data)}\n\n`:e.result?r=`Result: ${se(e.result)}\n\n`:void 0===e.error&&(r="No result returned.\n\n")),L.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-n}ms`,r)}else ue("send-response",e)}function ce(e){if(W!==h.Off&&L&&e.method!==y.type.method)if(U===g.Text){let t;W!==h.Verbose&&W!==h.Compact||(t=e.params?`Params: ${se(e.params)}\n\n`:"No parameters provided.\n\n"),L.log(`Received notification '${e.method}'.`,t)}else ue("receive-notification",e)}function ue(e,t){if(!L||W===h.Off)return;const n={isLSPMessage:!0,type:e,message:t,timestamp:Date.now()};L.log(n)}function de(){if(ee())throw new P(v.Closed,"Connection is closed.");if(te())throw new P(v.Disposed,"Connection is disposed.")}function le(e){return void 0===e?null:e}function fe(e){return null===e?void 0:e}function he(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}function pe(e,t){switch(e){case o.ParameterStructures.auto:return he(t)?fe(t):[le(t)];case o.ParameterStructures.byName:if(!he(t))throw new Error("Received parameters by name but param is not an object literal.");return fe(t);case o.ParameterStructures.byPosition:return[le(t)];default:throw new Error(`Unknown parameter structure ${e.toString()}`)}}function ge(e,t){let n;const r=e.numberOfParams;switch(r){case 0:n=void 0;break;case 1:n=pe(e.parameterStructures,t[0]);break;default:n=[];for(let e=0;e<t.length&&e<r;e++)n.push(le(t[e]));if(t.length<r)for(let e=t.length;e<r;e++)n.push(null)}return n}const me={sendNotification:(e,...t)=>{let r,s;if(de(),i.string(e)){r=e;const n=t[0];let i=0,a=o.ParameterStructures.auto;o.ParameterStructures.is(n)&&(i=1,a=n);let c=t.length;const u=c-i;switch(u){case 0:s=void 0;break;case 1:s=pe(a,t[i]);break;default:if(a===o.ParameterStructures.byName)throw new Error(`Received ${u} parameters for 'by Name' notification parameter structure.`);s=t.slice(i,c).map((e=>le(e)))}}else{const n=t;r=e.method,s=ge(e,n)}const a={jsonrpc:O,method:r,params:s};return function(e){if(W!==h.Off&&L)if(U===g.Text){let t;W!==h.Verbose&&W!==h.Compact||(t=e.params?`Params: ${se(e.params)}\n\n`:"No parameters provided.\n\n"),L.log(`Sending notification '${e.method}'.`,t)}else ue("send-notification",e)}(a),n.write(a).catch((e=>{throw T.error("Sending notification failed."),e}))},onNotification:(e,t)=>{let n;return de(),i.func(e)?D=e:t&&(i.string(e)?(n=e,k.set(e,{type:void 0,handler:t})):(n=e.method,k.set(e.method,{type:e,handler:t}))),{dispose:()=>{void 0!==n?k.delete(n):D=void 0}}},onProgress:(e,t,n)=>{if(j.has(t))throw new Error(`Progress handler for token ${t} already registered`);return j.set(t,n),{dispose:()=>{j.delete(t)}}},sendProgress:(e,t,n)=>me.sendNotification(l.type,{token:t,value:n}),onUnhandledProgress:J.event,sendRequest:(e,...t)=>{let r,s,a;if(de(),function(){if(!Z())throw new Error("Call listen() first.")}(),i.string(e)){r=e;const n=t[0],i=t[t.length-1];let u=0,d=o.ParameterStructures.auto;o.ParameterStructures.is(n)&&(u=1,d=n);let l=t.length;c.CancellationToken.is(i)&&(l-=1,a=i);const f=l-u;switch(f){case 0:s=void 0;break;case 1:s=pe(d,t[u]);break;default:if(d===o.ParameterStructures.byName)throw new Error(`Received ${f} parameters for 'by Name' request parameter structure.`);s=t.slice(u,l).map((e=>le(e)))}}else{const n=t;r=e.method,s=ge(e,n);const i=e.numberOfParams;a=c.CancellationToken.is(n[i])?n[i]:void 0}const u=w++;let d;a&&(d=a.onCancellationRequested((()=>{const e=H.sender.sendCancellation(me,u);return void 0===e?(T.log(`Received no promise from cancellation strategy when cancelling id ${u}`),Promise.resolve()):e.catch((()=>{T.log(`Sending cancellation messages for id ${u} failed`)}))})));const l={jsonrpc:O,id:u,method:r,params:s};return function(e){if(W!==h.Off&&L)if(U===g.Text){let t;W!==h.Verbose&&W!==h.Compact||!e.params||(t=`Params: ${se(e.params)}\n\n`),L.log(`Sending request '${e.method} - (${e.id})'.`,t)}else ue("send-request",e)}(l),"function"==typeof H.sender.enableCancellation&&H.sender.enableCancellation(l),new Promise((async(e,t)=>{const i={method:r,timerStart:Date.now(),resolve:t=>{e(t),H.sender.cleanup(u),d?.dispose()},reject:e=>{t(e),H.sender.cleanup(u),d?.dispose()}};try{I.set(u,i),await n.write(l)}catch(e){throw I.delete(u),i.reject(new o.ResponseError(o.ErrorCodes.MessageWriteError,e.message?e.message:"Unknown reason")),T.error("Sending request failed."),e}}))},onRequest:(e,t)=>{de();let n=null;return f.is(e)?(n=void 0,N=e):i.string(e)?(n=null,void 0!==t&&(n=e,x.set(e,{handler:t,type:void 0}))):void 0!==t&&(n=e.method,x.set(e.method,{type:e,handler:t})),{dispose:()=>{null!==n&&(void 0!==n?x.delete(n):N=void 0)}}},hasPendingResponse:()=>I.size>0,trace:async(e,t,n)=>{let r=!1,o=g.Text;void 0!==n&&(i.boolean(n)?r=n:(r=n.sendNotification||!1,o=n.traceFormat||g.Text)),W=e,U=o,L=W===h.Off?void 0:t,!r||ee()||te()||await me.sendNotification(m.type,{value:h.toString(e)})},onError:V.event,onClose:B.event,onUnhandledNotification:G.event,onDispose:K.event,end:()=>{n.end()},dispose:()=>{if(te())return;z=M.Disposed,K.fire(void 0);const t=new o.ResponseError(o.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(const e of I.values())e.reject(t);I=new Map,$=new Map,F=new Set,q=new s.LinkedMap,i.func(n.dispose)&&n.dispose(),i.func(e.dispose)&&e.dispose()},listen:()=>{de(),function(){if(Z())throw new P(v.AlreadyListening,"Connection is already listening")}(),z=M.Listening,e.listen(oe)},inspect:()=>{(0,r.default)().console.log("inspect")}};return me.onNotification(y.type,(e=>{if(W===h.Off||!L)return;const t=W===h.Verbose||W===h.Compact;L.log(e.message,t?e.verbose:void 0)})),me.onNotification(l.type,(e=>{const t=j.get(e.token);t?t(e.value):J.fire(e)})),me}},4649:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Disposable=void 0,function(e){e.create=function(e){return{dispose:e}}}(n||(t.Disposable=n={}))},7966:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Emitter=t.Event=void 0;const r=n(8996);var i;!function(e){const t={dispose(){}};e.None=function(){return t}}(i||(t.Event=i={}));class o{add(e,t=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks)return;let n=!1;for(let r=0,i=this._callbacks.length;r<i;r++)if(this._callbacks[r]===e){if(this._contexts[r]===t)return this._callbacks.splice(r,1),void this._contexts.splice(r,1);n=!0}if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];const t=[],n=this._callbacks.slice(0),i=this._contexts.slice(0);for(let o=0,s=n.length;o<s;o++)try{t.push(n[o].apply(i[o],e))}catch(e){(0,r.default)().console.error(e)}return t}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class s{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,n)=>{this._callbacks||(this._callbacks=new o),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t);const r={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,t),r.dispose=s._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(n)&&n.push(r),r}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}t.Emitter=s,s._noop=function(){}},9387:(e,t)=>{function n(e){return"string"==typeof e||e instanceof String}function r(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.stringArray=t.array=t.func=t.error=t.number=t.string=t.boolean=void 0,t.boolean=function(e){return!0===e||!1===e},t.string=n,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=r,t.stringArray=function(e){return r(e)&&e.every((e=>n(e)))}},8386:(e,t)=>{var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCache=t.LinkedMap=t.Touch=void 0,function(e){e.None=0,e.First=1,e.AsOld=e.First,e.Last=2,e.AsNew=e.Last}(r||(t.Touch=r={}));class i{constructor(){this[n]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,t=r.None){const n=this._map.get(e);if(n)return t!==r.None&&this.touch(n,t),n.value}set(e,t,n=r.None){let i=this._map.get(e);if(i)i.value=t,n!==r.None&&this.touch(i,n);else{switch(i={key:e,value:t,next:void 0,previous:void 0},n){case r.None:this.addItemLast(i);break;case r.First:this.addItemFirst(i);break;case r.Last:default:this.addItemLast(i)}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const n=this._state;let r=this._head;for(;r;){if(t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");r=r.next}}keys(){const e=this._state;let t=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){const e={value:t.key,done:!1};return t=t.next,e}return{value:void 0,done:!0}}};return n}values(){const e=this._state;let t=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){const e={value:t.value,done:!1};return t=t.next,e}return{value:void 0,done:!0}}};return n}entries(){const e=this._state;let t=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){const e={value:[t.key,t.value],done:!1};return t=t.next,e}return{value:void 0,done:!0}}};return n}[(n=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(0===e)return void this.clear();let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e,this._state++}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(t===r.First||t===r.Last)if(t===r.First){if(e===this._head)return;const t=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(t.previous=n,n.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===r.Last){if(e===this._tail)return;const t=e.next,n=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=n,n.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}toJSON(){const e=[];return this.forEach(((t,n)=>{e.push([n,t])})),e}fromJSON(e){this.clear();for(const[t,n]of e)this.set(t,n)}}t.LinkedMap=i;t.LRUCache=class extends i{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=r.AsNew){return super.get(e,t)}peek(e){return super.get(e,r.None)}set(e,t){return super.set(e,t,r.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}},1458:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractMessageBuffer=void 0;t.AbstractMessageBuffer=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){const t="string"==typeof e?this.fromString(e,this._encoding):e;this._chunks.push(t),this._totalLength+=t.byteLength}tryReadHeaders(e=!1){if(0===this._chunks.length)return;let t=0,n=0,r=0,i=0;e:for(;n<this._chunks.length;){const e=this._chunks[n];for(r=0;r<e.length;){switch(e[r]){case 13:switch(t){case 0:t=1;break;case 2:t=3;break;default:t=0}break;case 10:switch(t){case 1:t=2;break;case 3:t=4,r++;break e;default:t=0}break;default:t=0}r++}i+=e.byteLength,n++}if(4!==t)return;const o=this._read(i+r),s=new Map,a=this.toString(o,"ascii").split("\r\n");if(a.length<2)return s;for(let t=0;t<a.length-2;t++){const n=a[t],r=n.indexOf(":");if(-1===r)throw new Error(`Message header must separate key and value using ':'\n${n}`);const i=n.substr(0,r),o=n.substr(r+1).trim();s.set(e?i.toLowerCase():i,o)}return s}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(0===e)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){const t=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(t)}if(this._chunks[0].byteLength>e){const t=this._chunks[0],n=this.asNative(t,e);return this._chunks[0]=t.slice(e),this._totalLength-=e,n}const t=this.allocNative(e);let n=0;for(;e>0;){const r=this._chunks[0];if(r.byteLength>e){const i=r.slice(0,e);t.set(i,n),n+=e,this._chunks[0]=r.slice(e),this._totalLength-=e,e-=e}else t.set(r,n),n+=r.byteLength,this._chunks.shift(),this._totalLength-=r.byteLength,e-=r.byteLength}return t}}},7691:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ReadableStreamMessageReader=t.AbstractMessageReader=t.MessageReader=void 0;const r=n(8996),i=n(9387),o=n(7966),s=n(9697);var a,c;!function(e){e.is=function(e){let t=e;return t&&i.func(t.listen)&&i.func(t.dispose)&&i.func(t.onError)&&i.func(t.onClose)&&i.func(t.onPartialMessage)}}(a||(t.MessageReader=a={}));class u{constructor(){this.errorEmitter=new o.Emitter,this.closeEmitter=new o.Emitter,this.partialMessageEmitter=new o.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${i.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageReader=u,function(e){e.fromOptions=function(e){let t,n;const i=new Map;let o;const s=new Map;if(void 0===e||"string"==typeof e)t=e??"utf-8";else{if(t=e.charset??"utf-8",void 0!==e.contentDecoder&&(n=e.contentDecoder,i.set(n.name,n)),void 0!==e.contentDecoders)for(const t of e.contentDecoders)i.set(t.name,t);if(void 0!==e.contentTypeDecoder&&(o=e.contentTypeDecoder,s.set(o.name,o)),void 0!==e.contentTypeDecoders)for(const t of e.contentTypeDecoders)s.set(t.name,t)}return void 0===o&&(o=(0,r.default)().applicationJson.decoder,s.set(o.name,o)),{charset:t,contentDecoder:n,contentDecoders:i,contentTypeDecoder:o,contentTypeDecoders:s}}}(c||(c={}));t.ReadableStreamMessageReader=class extends u{constructor(e,t){super(),this.readable=e,this.options=c.fromOptions(t),this.buffer=(0,r.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new s.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;const t=this.readable.onData((e=>{this.onData(e)}));return this.readable.onError((e=>this.fireError(e))),this.readable.onClose((()=>this.fireClose())),t}onData(e){try{for(this.buffer.append(e);;){if(-1===this.nextMessageLength){const e=this.buffer.tryReadHeaders(!0);if(!e)return;const t=e.get("content-length");if(!t)return void this.fireError(new Error(`Header must provide a Content-Length property.\n${JSON.stringify(Object.fromEntries(e))}`));const n=parseInt(t);if(isNaN(n))return void this.fireError(new Error(`Content-Length value must be a number. Got ${t}`));this.nextMessageLength=n}const e=this.buffer.tryReadBody(this.nextMessageLength);if(void 0===e)return void this.setPartialMessageTimer();this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock((async()=>{const t=void 0!==this.options.contentDecoder?await this.options.contentDecoder.decode(e):e,n=await this.options.contentTypeDecoder.decode(t,this.options);this.callback(n)})).catch((e=>{this.fireError(e)}))}}catch(e){this.fireError(e)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=(0,r.default)().timer.setTimeout(((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())}),this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}},939:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WriteableStreamMessageWriter=t.AbstractMessageWriter=t.MessageWriter=void 0;const r=n(8996),i=n(9387),o=n(9697),s=n(7966);var a,c;!function(e){e.is=function(e){let t=e;return t&&i.func(t.dispose)&&i.func(t.onClose)&&i.func(t.onError)&&i.func(t.write)}}(a||(t.MessageWriter=a={}));class u{constructor(){this.errorEmitter=new s.Emitter,this.closeEmitter=new s.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,n){this.errorEmitter.fire([this.asError(e),t,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${i.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageWriter=u,function(e){e.fromOptions=function(e){return void 0===e||"string"==typeof e?{charset:e??"utf-8",contentTypeEncoder:(0,r.default)().applicationJson.encoder}:{charset:e.charset??"utf-8",contentEncoder:e.contentEncoder,contentTypeEncoder:e.contentTypeEncoder??(0,r.default)().applicationJson.encoder}}}(c||(c={}));t.WriteableStreamMessageWriter=class extends u{constructor(e,t){super(),this.writable=e,this.options=c.fromOptions(t),this.errorCount=0,this.writeSemaphore=new o.Semaphore(1),this.writable.onError((e=>this.fireError(e))),this.writable.onClose((()=>this.fireClose()))}async write(e){return this.writeSemaphore.lock((async()=>this.options.contentTypeEncoder.encode(e,this.options).then((e=>void 0!==this.options.contentEncoder?this.options.contentEncoder.encode(e):e)).then((t=>{const n=[];return n.push("Content-Length: ",t.byteLength.toString(),"\r\n"),n.push("\r\n"),this.doWrite(e,n,t)}),(e=>{throw this.fireError(e),e}))))}async doWrite(e,t,n){try{return await this.writable.write(t.join(""),"ascii"),this.writable.write(n)}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){this.writable.end()}}},3239:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Message=t.NotificationType9=t.NotificationType8=t.NotificationType7=t.NotificationType6=t.NotificationType5=t.NotificationType4=t.NotificationType3=t.NotificationType2=t.NotificationType1=t.NotificationType0=t.NotificationType=t.RequestType9=t.RequestType8=t.RequestType7=t.RequestType6=t.RequestType5=t.RequestType4=t.RequestType3=t.RequestType2=t.RequestType1=t.RequestType=t.RequestType0=t.AbstractMessageSignature=t.ParameterStructures=t.ResponseError=t.ErrorCodes=void 0;const r=n(9387);var i,o;!function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.jsonrpcReservedErrorRangeStart=-32099,e.serverErrorStart=-32099,e.MessageWriteError=-32099,e.MessageReadError=-32098,e.PendingResponseRejected=-32097,e.ConnectionInactive=-32096,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.jsonrpcReservedErrorRangeEnd=-32e3,e.serverErrorEnd=-32e3}(i||(t.ErrorCodes=i={}));class s extends Error{constructor(e,t,n){super(t),this.code=r.number(e)?e:i.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,s.prototype)}toJson(){const e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data),e}}t.ResponseError=s;class a{constructor(e){this.kind=e}static is(e){return e===a.auto||e===a.byName||e===a.byPosition}toString(){return this.kind}}t.ParameterStructures=a,a.auto=new a("auto"),a.byPosition=new a("byPosition"),a.byName=new a("byName");class c{constructor(e,t){this.method=e,this.numberOfParams=t}get parameterStructures(){return a.auto}}t.AbstractMessageSignature=c;t.RequestType0=class extends c{constructor(e){super(e,0)}};t.RequestType=class extends c{constructor(e,t=a.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};t.RequestType1=class extends c{constructor(e,t=a.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};t.RequestType2=class extends c{constructor(e){super(e,2)}};t.RequestType3=class extends c{constructor(e){super(e,3)}};t.RequestType4=class extends c{constructor(e){super(e,4)}};t.RequestType5=class extends c{constructor(e){super(e,5)}};t.RequestType6=class extends c{constructor(e){super(e,6)}};t.RequestType7=class extends c{constructor(e){super(e,7)}};t.RequestType8=class extends c{constructor(e){super(e,8)}};t.RequestType9=class extends c{constructor(e){super(e,9)}};t.NotificationType=class extends c{constructor(e,t=a.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};t.NotificationType0=class extends c{constructor(e){super(e,0)}};t.NotificationType1=class extends c{constructor(e,t=a.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};t.NotificationType2=class extends c{constructor(e){super(e,2)}};t.NotificationType3=class extends c{constructor(e){super(e,3)}};t.NotificationType4=class extends c{constructor(e){super(e,4)}};t.NotificationType5=class extends c{constructor(e){super(e,5)}};t.NotificationType6=class extends c{constructor(e){super(e,6)}};t.NotificationType7=class extends c{constructor(e){super(e,7)}};t.NotificationType8=class extends c{constructor(e){super(e,8)}};t.NotificationType9=class extends c{constructor(e){super(e,9)}},function(e){e.isRequest=function(e){const t=e;return t&&r.string(t.method)&&(r.string(t.id)||r.number(t.id))},e.isNotification=function(e){const t=e;return t&&r.string(t.method)&&void 0===e.id},e.isResponse=function(e){const t=e;return t&&(void 0!==t.result||!!t.error)&&(r.string(t.id)||r.number(t.id)||null===t.id)}}(o||(t.Message=o={}))},8996:(e,t)=>{let n;function r(){if(void 0===n)throw new Error("No runtime abstraction layer installed");return n}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.install=function(e){if(void 0===e)throw new Error("No runtime abstraction layer provided");n=e}}(r||(r={})),t.default=r},9697:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Semaphore=void 0;const r=n(8996);t.Semaphore=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise(((t,n)=>{this._waiting.push({thunk:e,resolve:t,reject:n}),this.runNext()}))}get active(){return this._active}runNext(){0!==this._waiting.length&&this._active!==this._capacity&&(0,r.default)().timer.setImmediate((()=>this.doRunNext()))}doRunNext(){if(0===this._waiting.length||this._active===this._capacity)return;const e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{const t=e.thunk();t instanceof Promise?t.then((t=>{this._active--,e.resolve(t),this.runNext()}),(t=>{this._active--,e.reject(t),this.runNext()})):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}}},5498:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SharedArrayReceiverStrategy=t.SharedArraySenderStrategy=void 0;const r=n(6412);var i;!function(e){e.Continue=0,e.Cancelled=1}(i||(i={}));t.SharedArraySenderStrategy=class{constructor(){this.buffers=new Map}enableCancellation(e){if(null===e.id)return;const t=new SharedArrayBuffer(4);new Int32Array(t,0,1)[0]=i.Continue,this.buffers.set(e.id,t),e.$cancellationData=t}async sendCancellation(e,t){const n=this.buffers.get(t);if(void 0===n)return;const r=new Int32Array(n,0,1);Atomics.store(r,0,i.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};class o{constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===i.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}}class s{constructor(e){this.token=new o(e)}cancel(){}dispose(){}}t.SharedArrayReceiverStrategy=class{constructor(){this.kind="request"}createCancellationTokenSource(e){const t=e.$cancellationData;return void 0===t?new r.CancellationTokenSource:new s(t)}}},2152:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(3194),t)},3194:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(4e3),t)},4e3:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LSPLogger=void 0;const n={trace:"color: gray;",info:"color: blue;",warn:"color: orange;",error:"color: red;"};t.LSPLogger=class{constructor(e,t){this.name=e,this.enabled=t?.enabled??!0,this.level=t?.level??"info",this.styles=t?.styles?Object.assign(n,...Object.entries(t.styles).map((([e,t])=>({[e]:`color: ${t}`})))):n}setLoggerLevel(e){this.level=e}setEnabled(e){this.enabled=e}enable(){this.enabled=!0}disable(){this.enabled=!1}shouldLog(e){const t=["trace","info","warn","error"];return t.indexOf(e)>=t.indexOf(this.level)}formatMessage(e){return"object"==typeof e?JSON.stringify(e,null,2):JSON.stringify(JSON.parse(e),null,2)}log(e,t,n,r="info"){if(!this.enabled||!this.shouldLog(r))return;const i=(new Date).toLocaleString();this.name,this.formatMessage(n)}error(e,t,n){this.log(e,t,n,"error")}info(e,t,n){this.log(e,t,n,"info")}trace(e,t,n){this.log(e,t,n,"trace")}warn(e,t,n){this.log(e,t,n,"warn")}}},9128:(e,t,n)=>{var r,i,o,s,a,c,u,d,l,f,h,p,g,m,y,v,_,b,T,w,C,S,E,R,M,P,O,N,x,D,k,j,A,L,q,I,F,$,W,U,z,V,B,G,J,K,H,X,Q,Y,Z,ee,te,ne,re,ie,oe,se,ae,ce,ue,de,le,fe,he,pe,ge,me,ye,ve,_e,be,Te,we,Ce,Se,Ee,Re;n.r(t),n.d(t,{AnnotatedTextEdit:()=>E,ChangeAnnotation:()=>C,ChangeAnnotationIdentifier:()=>S,CodeAction:()=>oe,CodeActionContext:()=>ie,CodeActionKind:()=>ne,CodeActionTriggerKind:()=>re,CodeDescription:()=>_,CodeLens:()=>se,Color:()=>l,ColorInformation:()=>f,ColorPresentation:()=>h,Command:()=>T,CompletionItem:()=>z,CompletionItemKind:()=>q,CompletionItemLabelDetails:()=>U,CompletionItemTag:()=>F,CompletionList:()=>V,CreateFile:()=>M,DeleteFile:()=>O,Diagnostic:()=>b,DiagnosticRelatedInformation:()=>m,DiagnosticSeverity:()=>y,DiagnosticTag:()=>v,DocumentHighlight:()=>X,DocumentHighlightKind:()=>H,DocumentLink:()=>ce,DocumentSymbol:()=>te,DocumentUri:()=>r,EOL:()=>Ne,FoldingRange:()=>g,FoldingRangeKind:()=>p,FormattingOptions:()=>ae,Hover:()=>G,InlayHint:()=>_e,InlayHintKind:()=>ye,InlayHintLabelPart:()=>ve,InlineCompletionContext:()=>Ee,InlineCompletionItem:()=>Te,InlineCompletionList:()=>we,InlineCompletionTriggerKind:()=>Ce,InlineValueContext:()=>me,InlineValueEvaluatableExpression:()=>ge,InlineValueText:()=>he,InlineValueVariableLookup:()=>pe,InsertReplaceEdit:()=>$,InsertTextFormat:()=>I,InsertTextMode:()=>W,Location:()=>u,LocationLink:()=>d,MarkedString:()=>B,MarkupContent:()=>L,MarkupKind:()=>A,OptionalVersionedTextDocumentIdentifier:()=>k,ParameterInformation:()=>J,Position:()=>a,Range:()=>c,RenameFile:()=>P,SelectedCompletionInfo:()=>Se,SelectionRange:()=>ue,SemanticTokenModifiers:()=>le,SemanticTokenTypes:()=>de,SemanticTokens:()=>fe,SignatureInformation:()=>K,StringValue:()=>be,SymbolInformation:()=>Z,SymbolKind:()=>Q,SymbolTag:()=>Y,TextDocument:()=>xe,TextDocumentEdit:()=>R,TextDocumentIdentifier:()=>x,TextDocumentItem:()=>j,TextEdit:()=>w,URI:()=>i,VersionedTextDocumentIdentifier:()=>D,WorkspaceChange:()=>Oe,WorkspaceEdit:()=>N,WorkspaceFolder:()=>Re,WorkspaceSymbol:()=>ee,integer:()=>o,uinteger:()=>s}),function(e){e.is=function(e){return"string"==typeof e}}(r||(r={})),function(e){e.is=function(e){return"string"==typeof e}}(i||(i={})),function(e){e.MIN_VALUE=-2147483648,e.MAX_VALUE=2147483647,e.is=function(t){return"number"==typeof t&&e.MIN_VALUE<=t&&t<=e.MAX_VALUE}}(o||(o={})),function(e){e.MIN_VALUE=0,e.MAX_VALUE=2147483647,e.is=function(t){return"number"==typeof t&&e.MIN_VALUE<=t&&t<=e.MAX_VALUE}}(s||(s={})),function(e){e.create=function(e,t){return e===Number.MAX_VALUE&&(e=s.MAX_VALUE),t===Number.MAX_VALUE&&(t=s.MAX_VALUE),{line:e,character:t}},e.is=function(e){let t=e;return De.objectLiteral(t)&&De.uinteger(t.line)&&De.uinteger(t.character)}}(a||(a={})),function(e){e.create=function(e,t,n,r){if(De.uinteger(e)&&De.uinteger(t)&&De.uinteger(n)&&De.uinteger(r))return{start:a.create(e,t),end:a.create(n,r)};if(a.is(e)&&a.is(t))return{start:e,end:t};throw new Error(`Range#create called with invalid arguments[${e}, ${t}, ${n}, ${r}]`)},e.is=function(e){let t=e;return De.objectLiteral(t)&&a.is(t.start)&&a.is(t.end)}}(c||(c={})),function(e){e.create=function(e,t){return{uri:e,range:t}},e.is=function(e){let t=e;return De.objectLiteral(t)&&c.is(t.range)&&(De.string(t.uri)||De.undefined(t.uri))}}(u||(u={})),function(e){e.create=function(e,t,n,r){return{targetUri:e,targetRange:t,targetSelectionRange:n,originSelectionRange:r}},e.is=function(e){let t=e;return De.objectLiteral(t)&&c.is(t.targetRange)&&De.string(t.targetUri)&&c.is(t.targetSelectionRange)&&(c.is(t.originSelectionRange)||De.undefined(t.originSelectionRange))}}(d||(d={})),function(e){e.create=function(e,t,n,r){return{red:e,green:t,blue:n,alpha:r}},e.is=function(e){const t=e;return De.objectLiteral(t)&&De.numberRange(t.red,0,1)&&De.numberRange(t.green,0,1)&&De.numberRange(t.blue,0,1)&&De.numberRange(t.alpha,0,1)}}(l||(l={})),function(e){e.create=function(e,t){return{range:e,color:t}},e.is=function(e){const t=e;return De.objectLiteral(t)&&c.is(t.range)&&l.is(t.color)}}(f||(f={})),function(e){e.create=function(e,t,n){return{label:e,textEdit:t,additionalTextEdits:n}},e.is=function(e){const t=e;return De.objectLiteral(t)&&De.string(t.label)&&(De.undefined(t.textEdit)||w.is(t))&&(De.undefined(t.additionalTextEdits)||De.typedArray(t.additionalTextEdits,w.is))}}(h||(h={})),function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(p||(p={})),function(e){e.create=function(e,t,n,r,i,o){const s={startLine:e,endLine:t};return De.defined(n)&&(s.startCharacter=n),De.defined(r)&&(s.endCharacter=r),De.defined(i)&&(s.kind=i),De.defined(o)&&(s.collapsedText=o),s},e.is=function(e){const t=e;return De.objectLiteral(t)&&De.uinteger(t.startLine)&&De.uinteger(t.startLine)&&(De.undefined(t.startCharacter)||De.uinteger(t.startCharacter))&&(De.undefined(t.endCharacter)||De.uinteger(t.endCharacter))&&(De.undefined(t.kind)||De.string(t.kind))}}(g||(g={})),function(e){e.create=function(e,t){return{location:e,message:t}},e.is=function(e){let t=e;return De.defined(t)&&u.is(t.location)&&De.string(t.message)}}(m||(m={})),function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4}(y||(y={})),function(e){e.Unnecessary=1,e.Deprecated=2}(v||(v={})),function(e){e.is=function(e){const t=e;return De.objectLiteral(t)&&De.string(t.href)}}(_||(_={})),function(e){e.create=function(e,t,n,r,i,o){let s={range:e,message:t};return De.defined(n)&&(s.severity=n),De.defined(r)&&(s.code=r),De.defined(i)&&(s.source=i),De.defined(o)&&(s.relatedInformation=o),s},e.is=function(e){var t;let n=e;return De.defined(n)&&c.is(n.range)&&De.string(n.message)&&(De.number(n.severity)||De.undefined(n.severity))&&(De.integer(n.code)||De.string(n.code)||De.undefined(n.code))&&(De.undefined(n.codeDescription)||De.string(null===(t=n.codeDescription)||void 0===t?void 0:t.href))&&(De.string(n.source)||De.undefined(n.source))&&(De.undefined(n.relatedInformation)||De.typedArray(n.relatedInformation,m.is))}}(b||(b={})),function(e){e.create=function(e,t,...n){let r={title:e,command:t};return De.defined(n)&&n.length>0&&(r.arguments=n),r},e.is=function(e){let t=e;return De.defined(t)&&De.string(t.title)&&De.string(t.command)}}(T||(T={})),function(e){e.replace=function(e,t){return{range:e,newText:t}},e.insert=function(e,t){return{range:{start:e,end:e},newText:t}},e.del=function(e){return{range:e,newText:""}},e.is=function(e){const t=e;return De.objectLiteral(t)&&De.string(t.newText)&&c.is(t.range)}}(w||(w={})),function(e){e.create=function(e,t,n){const r={label:e};return void 0!==t&&(r.needsConfirmation=t),void 0!==n&&(r.description=n),r},e.is=function(e){const t=e;return De.objectLiteral(t)&&De.string(t.label)&&(De.boolean(t.needsConfirmation)||void 0===t.needsConfirmation)&&(De.string(t.description)||void 0===t.description)}}(C||(C={})),function(e){e.is=function(e){const t=e;return De.string(t)}}(S||(S={})),function(e){e.replace=function(e,t,n){return{range:e,newText:t,annotationId:n}},e.insert=function(e,t,n){return{range:{start:e,end:e},newText:t,annotationId:n}},e.del=function(e,t){return{range:e,newText:"",annotationId:t}},e.is=function(e){const t=e;return w.is(t)&&(C.is(t.annotationId)||S.is(t.annotationId))}}(E||(E={})),function(e){e.create=function(e,t){return{textDocument:e,edits:t}},e.is=function(e){let t=e;return De.defined(t)&&k.is(t.textDocument)&&Array.isArray(t.edits)}}(R||(R={})),function(e){e.create=function(e,t,n){let r={kind:"create",uri:e};return void 0===t||void 0===t.overwrite&&void 0===t.ignoreIfExists||(r.options=t),void 0!==n&&(r.annotationId=n),r},e.is=function(e){let t=e;return t&&"create"===t.kind&&De.string(t.uri)&&(void 0===t.options||(void 0===t.options.overwrite||De.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||De.boolean(t.options.ignoreIfExists)))&&(void 0===t.annotationId||S.is(t.annotationId))}}(M||(M={})),function(e){e.create=function(e,t,n,r){let i={kind:"rename",oldUri:e,newUri:t};return void 0===n||void 0===n.overwrite&&void 0===n.ignoreIfExists||(i.options=n),void 0!==r&&(i.annotationId=r),i},e.is=function(e){let t=e;return t&&"rename"===t.kind&&De.string(t.oldUri)&&De.string(t.newUri)&&(void 0===t.options||(void 0===t.options.overwrite||De.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||De.boolean(t.options.ignoreIfExists)))&&(void 0===t.annotationId||S.is(t.annotationId))}}(P||(P={})),function(e){e.create=function(e,t,n){let r={kind:"delete",uri:e};return void 0===t||void 0===t.recursive&&void 0===t.ignoreIfNotExists||(r.options=t),void 0!==n&&(r.annotationId=n),r},e.is=function(e){let t=e;return t&&"delete"===t.kind&&De.string(t.uri)&&(void 0===t.options||(void 0===t.options.recursive||De.boolean(t.options.recursive))&&(void 0===t.options.ignoreIfNotExists||De.boolean(t.options.ignoreIfNotExists)))&&(void 0===t.annotationId||S.is(t.annotationId))}}(O||(O={})),function(e){e.is=function(e){let t=e;return t&&(void 0!==t.changes||void 0!==t.documentChanges)&&(void 0===t.documentChanges||t.documentChanges.every((e=>De.string(e.kind)?M.is(e)||P.is(e)||O.is(e):R.is(e))))}}(N||(N={}));class Me{constructor(e,t){this.edits=e,this.changeAnnotations=t}insert(e,t,n){let r,i;if(void 0===n?r=w.insert(e,t):S.is(n)?(i=n,r=E.insert(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=E.insert(e,t,i)),this.edits.push(r),void 0!==i)return i}replace(e,t,n){let r,i;if(void 0===n?r=w.replace(e,t):S.is(n)?(i=n,r=E.replace(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=E.replace(e,t,i)),this.edits.push(r),void 0!==i)return i}delete(e,t){let n,r;if(void 0===t?n=w.del(e):S.is(t)?(r=t,n=E.del(e,t)):(this.assertChangeAnnotations(this.changeAnnotations),r=this.changeAnnotations.manage(t),n=E.del(e,r)),this.edits.push(n),void 0!==r)return r}add(e){this.edits.push(e)}all(){return this.edits}clear(){this.edits.splice(0,this.edits.length)}assertChangeAnnotations(e){if(void 0===e)throw new Error("Text edit change is not configured to manage change annotations.")}}class Pe{constructor(e){this._annotations=void 0===e?Object.create(null):e,this._counter=0,this._size=0}all(){return this._annotations}get size(){return this._size}manage(e,t){let n;if(S.is(e)?n=e:(n=this.nextId(),t=e),void 0!==this._annotations[n])throw new Error(`Id ${n} is already in use.`);if(void 0===t)throw new Error(`No annotation provided for id ${n}`);return this._annotations[n]=t,this._size++,n}nextId(){return this._counter++,this._counter.toString()}}class Oe{constructor(e){this._textEditChanges=Object.create(null),void 0!==e?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new Pe(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach((e=>{if(R.is(e)){const t=new Me(e.edits,this._changeAnnotations);this._textEditChanges[e.textDocument.uri]=t}}))):e.changes&&Object.keys(e.changes).forEach((t=>{const n=new Me(e.changes[t]);this._textEditChanges[t]=n}))):this._workspaceEdit={}}get edit(){return this.initDocumentChanges(),void 0!==this._changeAnnotations&&(0===this._changeAnnotations.size?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit}getTextEditChange(e){if(k.is(e)){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");const t={uri:e.uri,version:e.version};let n=this._textEditChanges[t.uri];if(!n){const e=[],r={textDocument:t,edits:e};this._workspaceEdit.documentChanges.push(r),n=new Me(e,this._changeAnnotations),this._textEditChanges[t.uri]=n}return n}{if(this.initChanges(),void 0===this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");let t=this._textEditChanges[e];if(!t){let n=[];this._workspaceEdit.changes[e]=n,t=new Me(n),this._textEditChanges[e]=t}return t}}initDocumentChanges(){void 0===this._workspaceEdit.documentChanges&&void 0===this._workspaceEdit.changes&&(this._changeAnnotations=new Pe,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())}initChanges(){void 0===this._workspaceEdit.documentChanges&&void 0===this._workspaceEdit.changes&&(this._workspaceEdit.changes=Object.create(null))}createFile(e,t,n){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");let r,i,o;if(C.is(t)||S.is(t)?r=t:n=t,void 0===r?i=M.create(e,n):(o=S.is(r)?r:this._changeAnnotations.manage(r),i=M.create(e,n,o)),this._workspaceEdit.documentChanges.push(i),void 0!==o)return o}renameFile(e,t,n,r){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");let i,o,s;if(C.is(n)||S.is(n)?i=n:r=n,void 0===i?o=P.create(e,t,r):(s=S.is(i)?i:this._changeAnnotations.manage(i),o=P.create(e,t,r,s)),this._workspaceEdit.documentChanges.push(o),void 0!==s)return s}deleteFile(e,t,n){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");let r,i,o;if(C.is(t)||S.is(t)?r=t:n=t,void 0===r?i=O.create(e,n):(o=S.is(r)?r:this._changeAnnotations.manage(r),i=O.create(e,n,o)),this._workspaceEdit.documentChanges.push(i),void 0!==o)return o}}!function(e){e.create=function(e){return{uri:e}},e.is=function(e){let t=e;return De.defined(t)&&De.string(t.uri)}}(x||(x={})),function(e){e.create=function(e,t){return{uri:e,version:t}},e.is=function(e){let t=e;return De.defined(t)&&De.string(t.uri)&&De.integer(t.version)}}(D||(D={})),function(e){e.create=function(e,t){return{uri:e,version:t}},e.is=function(e){let t=e;return De.defined(t)&&De.string(t.uri)&&(null===t.version||De.integer(t.version))}}(k||(k={})),function(e){e.create=function(e,t,n,r){return{uri:e,languageId:t,version:n,text:r}},e.is=function(e){let t=e;return De.defined(t)&&De.string(t.uri)&&De.string(t.languageId)&&De.integer(t.version)&&De.string(t.text)}}(j||(j={})),function(e){e.PlainText="plaintext",e.Markdown="markdown",e.is=function(t){const n=t;return n===e.PlainText||n===e.Markdown}}(A||(A={})),function(e){e.is=function(e){const t=e;return De.objectLiteral(e)&&A.is(t.kind)&&De.string(t.value)}}(L||(L={})),function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25}(q||(q={})),function(e){e.PlainText=1,e.Snippet=2}(I||(I={})),function(e){e.Deprecated=1}(F||(F={})),function(e){e.create=function(e,t,n){return{newText:e,insert:t,replace:n}},e.is=function(e){const t=e;return t&&De.string(t.newText)&&c.is(t.insert)&&c.is(t.replace)}}($||($={})),function(e){e.asIs=1,e.adjustIndentation=2}(W||(W={})),function(e){e.is=function(e){const t=e;return t&&(De.string(t.detail)||void 0===t.detail)&&(De.string(t.description)||void 0===t.description)}}(U||(U={})),function(e){e.create=function(e){return{label:e}}}(z||(z={})),function(e){e.create=function(e,t){return{items:e||[],isIncomplete:!!t}}}(V||(V={})),function(e){e.fromPlainText=function(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},e.is=function(e){const t=e;return De.string(t)||De.objectLiteral(t)&&De.string(t.language)&&De.string(t.value)}}(B||(B={})),function(e){e.is=function(e){let t=e;return!!t&&De.objectLiteral(t)&&(L.is(t.contents)||B.is(t.contents)||De.typedArray(t.contents,B.is))&&(void 0===e.range||c.is(e.range))}}(G||(G={})),function(e){e.create=function(e,t){return t?{label:e,documentation:t}:{label:e}}}(J||(J={})),function(e){e.create=function(e,t,...n){let r={label:e};return De.defined(t)&&(r.documentation=t),De.defined(n)?r.parameters=n:r.parameters=[],r}}(K||(K={})),function(e){e.Text=1,e.Read=2,e.Write=3}(H||(H={})),function(e){e.create=function(e,t){let n={range:e};return De.number(t)&&(n.kind=t),n}}(X||(X={})),function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26}(Q||(Q={})),function(e){e.Deprecated=1}(Y||(Y={})),function(e){e.create=function(e,t,n,r,i){let o={name:e,kind:t,location:{uri:r,range:n}};return i&&(o.containerName=i),o}}(Z||(Z={})),function(e){e.create=function(e,t,n,r){return void 0!==r?{name:e,kind:t,location:{uri:n,range:r}}:{name:e,kind:t,location:{uri:n}}}}(ee||(ee={})),function(e){e.create=function(e,t,n,r,i,o){let s={name:e,detail:t,kind:n,range:r,selectionRange:i};return void 0!==o&&(s.children=o),s},e.is=function(e){let t=e;return t&&De.string(t.name)&&De.number(t.kind)&&c.is(t.range)&&c.is(t.selectionRange)&&(void 0===t.detail||De.string(t.detail))&&(void 0===t.deprecated||De.boolean(t.deprecated))&&(void 0===t.children||Array.isArray(t.children))&&(void 0===t.tags||Array.isArray(t.tags))}}(te||(te={})),function(e){e.Empty="",e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports",e.SourceFixAll="source.fixAll"}(ne||(ne={})),function(e){e.Invoked=1,e.Automatic=2}(re||(re={})),function(e){e.create=function(e,t,n){let r={diagnostics:e};return null!=t&&(r.only=t),null!=n&&(r.triggerKind=n),r},e.is=function(e){let t=e;return De.defined(t)&&De.typedArray(t.diagnostics,b.is)&&(void 0===t.only||De.typedArray(t.only,De.string))&&(void 0===t.triggerKind||t.triggerKind===re.Invoked||t.triggerKind===re.Automatic)}}(ie||(ie={})),function(e){e.create=function(e,t,n){let r={title:e},i=!0;return"string"==typeof t?(i=!1,r.kind=t):T.is(t)?r.command=t:r.edit=t,i&&void 0!==n&&(r.kind=n),r},e.is=function(e){let t=e;return t&&De.string(t.title)&&(void 0===t.diagnostics||De.typedArray(t.diagnostics,b.is))&&(void 0===t.kind||De.string(t.kind))&&(void 0!==t.edit||void 0!==t.command)&&(void 0===t.command||T.is(t.command))&&(void 0===t.isPreferred||De.boolean(t.isPreferred))&&(void 0===t.edit||N.is(t.edit))}}(oe||(oe={})),function(e){e.create=function(e,t){let n={range:e};return De.defined(t)&&(n.data=t),n},e.is=function(e){let t=e;return De.defined(t)&&c.is(t.range)&&(De.undefined(t.command)||T.is(t.command))}}(se||(se={})),function(e){e.create=function(e,t){return{tabSize:e,insertSpaces:t}},e.is=function(e){let t=e;return De.defined(t)&&De.uinteger(t.tabSize)&&De.boolean(t.insertSpaces)}}(ae||(ae={})),function(e){e.create=function(e,t,n){return{range:e,target:t,data:n}},e.is=function(e){let t=e;return De.defined(t)&&c.is(t.range)&&(De.undefined(t.target)||De.string(t.target))}}(ce||(ce={})),function(e){e.create=function(e,t){return{range:e,parent:t}},e.is=function(t){let n=t;return De.objectLiteral(n)&&c.is(n.range)&&(void 0===n.parent||e.is(n.parent))}}(ue||(ue={})),function(e){e.namespace="namespace",e.type="type",e.class="class",e.enum="enum",e.interface="interface",e.struct="struct",e.typeParameter="typeParameter",e.parameter="parameter",e.variable="variable",e.property="property",e.enumMember="enumMember",e.event="event",e.function="function",e.method="method",e.macro="macro",e.keyword="keyword",e.modifier="modifier",e.comment="comment",e.string="string",e.number="number",e.regexp="regexp",e.operator="operator",e.decorator="decorator"}(de||(de={})),function(e){e.declaration="declaration",e.definition="definition",e.readonly="readonly",e.static="static",e.deprecated="deprecated",e.abstract="abstract",e.async="async",e.modification="modification",e.documentation="documentation",e.defaultLibrary="defaultLibrary"}(le||(le={})),function(e){e.is=function(e){const t=e;return De.objectLiteral(t)&&(void 0===t.resultId||"string"==typeof t.resultId)&&Array.isArray(t.data)&&(0===t.data.length||"number"==typeof t.data[0])}}(fe||(fe={})),function(e){e.create=function(e,t){return{range:e,text:t}},e.is=function(e){const t=e;return null!=t&&c.is(t.range)&&De.string(t.text)}}(he||(he={})),function(e){e.create=function(e,t,n){return{range:e,variableName:t,caseSensitiveLookup:n}},e.is=function(e){const t=e;return null!=t&&c.is(t.range)&&De.boolean(t.caseSensitiveLookup)&&(De.string(t.variableName)||void 0===t.variableName)}}(pe||(pe={})),function(e){e.create=function(e,t){return{range:e,expression:t}},e.is=function(e){const t=e;return null!=t&&c.is(t.range)&&(De.string(t.expression)||void 0===t.expression)}}(ge||(ge={})),function(e){e.create=function(e,t){return{frameId:e,stoppedLocation:t}},e.is=function(e){const t=e;return De.defined(t)&&c.is(e.stoppedLocation)}}(me||(me={})),function(e){e.Type=1,e.Parameter=2,e.is=function(e){return 1===e||2===e}}(ye||(ye={})),function(e){e.create=function(e){return{value:e}},e.is=function(e){const t=e;return De.objectLiteral(t)&&(void 0===t.tooltip||De.string(t.tooltip)||L.is(t.tooltip))&&(void 0===t.location||u.is(t.location))&&(void 0===t.command||T.is(t.command))}}(ve||(ve={})),function(e){e.create=function(e,t,n){const r={position:e,label:t};return void 0!==n&&(r.kind=n),r},e.is=function(e){const t=e;return De.objectLiteral(t)&&a.is(t.position)&&(De.string(t.label)||De.typedArray(t.label,ve.is))&&(void 0===t.kind||ye.is(t.kind))&&void 0===t.textEdits||De.typedArray(t.textEdits,w.is)&&(void 0===t.tooltip||De.string(t.tooltip)||L.is(t.tooltip))&&(void 0===t.paddingLeft||De.boolean(t.paddingLeft))&&(void 0===t.paddingRight||De.boolean(t.paddingRight))}}(_e||(_e={})),function(e){e.createSnippet=function(e){return{kind:"snippet",value:e}}}(be||(be={})),function(e){e.create=function(e,t,n,r){return{insertText:e,filterText:t,range:n,command:r}}}(Te||(Te={})),function(e){e.create=function(e){return{items:e}}}(we||(we={})),function(e){e.Invoked=0,e.Automatic=1}(Ce||(Ce={})),function(e){e.create=function(e,t){return{range:e,text:t}}}(Se||(Se={})),function(e){e.create=function(e,t){return{triggerKind:e,selectedCompletionInfo:t}}}(Ee||(Ee={})),function(e){e.is=function(e){const t=e;return De.objectLiteral(t)&&i.is(t.uri)&&De.string(t.name)}}(Re||(Re={}));const Ne=["\n","\r\n","\r"];var xe,De;!function(e){function t(e,n){if(e.length<=1)return e;const r=e.length/2|0,i=e.slice(0,r),o=e.slice(r);t(i,n),t(o,n);let s=0,a=0,c=0;for(;s<i.length&&a<o.length;){let t=n(i[s],o[a]);e[c++]=t<=0?i[s++]:o[a++]}for(;s<i.length;)e[c++]=i[s++];for(;a<o.length;)e[c++]=o[a++];return e}e.create=function(e,t,n,r){return new ke(e,t,n,r)},e.is=function(e){let t=e;return!!(De.defined(t)&&De.string(t.uri)&&(De.undefined(t.languageId)||De.string(t.languageId))&&De.uinteger(t.lineCount)&&De.func(t.getText)&&De.func(t.positionAt)&&De.func(t.offsetAt))},e.applyEdits=function(e,n){let r=e.getText(),i=t(n,((e,t)=>{let n=e.range.start.line-t.range.start.line;return 0===n?e.range.start.character-t.range.start.character:n})),o=r.length;for(let t=i.length-1;t>=0;t--){let n=i[t],s=e.offsetAt(n.range.start),a=e.offsetAt(n.range.end);if(!(a<=o))throw new Error("Overlapping edit");r=r.substring(0,s)+n.newText+r.substring(a,r.length),o=s}return r}}(xe||(xe={}));class ke{constructor(e,t,n,r){this._uri=e,this._languageId=t,this._version=n,this._content=r,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content}update(e,t){this._content=e.text,this._version=t,this._lineOffsets=void 0}getLineOffsets(){if(void 0===this._lineOffsets){let e=[],t=this._content,n=!0;for(let r=0;r<t.length;r++){n&&(e.push(r),n=!1);let i=t.charAt(r);n="\r"===i||"\n"===i,"\r"===i&&r+1<t.length&&"\n"===t.charAt(r+1)&&r++}n&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let t=this.getLineOffsets(),n=0,r=t.length;if(0===r)return a.create(0,e);for(;n<r;){let i=Math.floor((n+r)/2);t[i]>e?r=i:n=i+1}let i=n-1;return a.create(i,e-t[i])}offsetAt(e){let t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;let n=t[e.line],r=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,r),n)}get lineCount(){return this.getLineOffsets().length}}!function(e){const t=Object.prototype.toString;e.defined=function(e){return void 0!==e},e.undefined=function(e){return void 0===e},e.boolean=function(e){return!0===e||!1===e},e.string=function(e){return"[object String]"===t.call(e)},e.number=function(e){return"[object Number]"===t.call(e)},e.numberRange=function(e,n,r){return"[object Number]"===t.call(e)&&n<=e&&e<=r},e.integer=function(e){return"[object Number]"===t.call(e)&&-2147483648<=e&&e<=2147483647},e.uinteger=function(e){return"[object Number]"===t.call(e)&&0<=e&&e<=2147483647},e.func=function(e){return"[object Function]"===t.call(e)},e.objectLiteral=function(e){return null!==e&&"object"==typeof e},e.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)}}(De||(De={}))}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{var e=r;Object.defineProperty(e,"__esModule",{value:!0});const t=n(8178),i=new(n(2152).LSPLogger)("ICUBE-AI-COMPLETION-Features",{styles:{trace:"cyan"},level:"trace"});self.onmessage=function(e){const{endpoint:n,trace:r}=e.data;i.setEnabled(!!r),i.trace("onmessage","WORKER INIT",e.data),n&&(function(e,n=!1){if(!g){const e=new t.BrowserMessageReader(self),n=new t.BrowserMessageWriter(self);g=(0,t.createConnection)(e,n)}const r=new URL(e),o=decodeURIComponent(r.password);r.username=r.password="";const c=new WebSocket(r,o.split(",").filter(Boolean));p=c,c.onopen=()=>{h.forEach((e=>{c.send(e)})),h.length=0,l=!0,u=!1},c.onclose=e=>{l=!1,u||(u=!0,g?.sendNotification("$/exit",{}))},c.onerror=e=>{l=!1,u||(u=!0,g?.sendNotification("$/exit",{}))},c.onmessage=function(e){const t=JSON.parse(e.data);if(t.id&&f.has(t.id)){const e=f.get(t.id);if(e){const{resolve:n,message:r}=e;i.trace(`onRequest: ${t.id}`,r.method,t),n(t.result),f.delete(t.id)}else i.trace(`onRequest: ${t.id}`,"UNKNOWN METHOD",t)}else{if(!g)return;if(t.method===s)return;"$/exit"===t.method?(i.trace("onNotification","$/exit",t),u=!0,g.sendNotification("$/exit",t.params),c.close()):t.method&&t.params&&void 0!==t.id?(i.trace("get request",`${t.method}: ${t.id}`,t),g.sendRequest(t.method,t.params).then((e=>{!async function(e,t,n){new Promise((()=>{const r=JSON.stringify({...e,id:n,jsonrpc:"2.0"});i.trace(`send Response: ${n}`,t,r),l&&p?p.send(r):h.push(r)}))}({result:e},t.method,t.id)}))):t.method&&t.params?(i.trace("onNotification",`${t.method}`,t),g.sendNotification(t.method,t.params)):i.trace("unhandled onmessage",`${t.method||"Recv JSONRPC DATA"}`,t)}},n&&y();setInterval(a,2e4)}(n),function(){if(!g)return;g.onInitialize((e=>y(e))),g.onRequest(((e,t)=>m({params:t,method:e}))),g.onNotification(((e,t)=>{const n={params:t,method:e,jsonrpc:"2.0"};if(i.trace("sendNotification",e,n),"$/plugin_exit"===e)return u=!0,void(p&&p.close());p&&p.send(JSON.stringify(n))})),g.onDidOpenTextDocument((e=>{const t={params:e,method:"textDocument/didOpen",jsonrpc:"2.0"};i.trace("onDidOpenTextDocument","textDocument/didOpen",t),p&&p.send(JSON.stringify(t))})),g.listen()}())};const o="$/ping",s="$/pong";function a(){if(p?.readyState===WebSocket.OPEN){const e=JSON.stringify({method:o,jsonrpc:"2.0",params:{}});p.send(e)}}let c;let u=!1,d=0,l=!1;const f=new Map,h=[];let p,g=null;async function m(e){return new Promise(((t,n)=>{const r=++d,o=JSON.stringify({...e,id:r,jsonrpc:"2.0"});f.set(r,{resolve:t,message:e}),i.trace(`send Request: ${r}`,e.method,o),l&&p?p.send(o):h.push(o),setTimeout((()=>{f.has(r)&&(f.delete(r),i.trace(`Request ${r} timeout`,e.method,o),n(new Error(`Request ${e.method} timeout in 30 seconds`)))}),3e4)}))}async function y(e){if(i.trace("sendInitializeRequest","initialize",e||{}),c)return m(c);if(!e)return;const t={params:{rootUri:e.workspaceFolders?.[0]?e.workspaceFolders[0].uri.toString():void 0,...e},method:"initialize"};return function(e){c=e}(t),m(t)}})(),serverExportVar=r})();