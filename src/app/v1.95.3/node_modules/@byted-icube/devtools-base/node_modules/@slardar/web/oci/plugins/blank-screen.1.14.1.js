!function(){"use strict";var H=function(){return(H=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}).apply(this,arguments)};function M(n,e){var t="function"==typeof Symbol&&n[Symbol.iterator];if(!t)return n;var r,o,i=t.call(n),u=[];try{for(;(void 0===e||0<e--)&&!(r=i.next()).done;)u.push(r.value)}catch(n){o={error:n}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return u}function Y(){return{}}function t(n){return"object"==typeof n&&null!==n}function G(n){return"function"==typeof n}var f=function(n,e,t,r){return n.destroyAgent.set(e,t,r)};function s(n,e){return n.initSubject(e)}function N(){return Date.now()}function F(){if("object"==typeof window&&t(window))return window}function z(){if("object"==typeof document&&t(document))return document}function i(){if(F()&&G(window.PerformanceObserver))return window.PerformanceObserver}function u(n,e,t,r){return void 0===r&&(r=!1),n.addEventListener(e,t,r),function(){n.removeEventListener(e,t,r)}}function c(n,e,t){return n=M(o(n,e),3),e=n[0],n=n[2],e(t),n}var l=function(n,e){return t(n)?H(H({},e),n):!!n&&e},a=["resource"],r=["longtask"],o=function(r,o,i){var u=r&&new r(function(n,r){n.getEntries?n.getEntries().forEach(function(n,e,t){return o(n,e,t,r)}):i&&i()});return[function(n){if(!r||!u)return i&&i();try{u.observe({entryTypes:n})}catch(n){return i&&i()}},function(n,e){if(!r||!u)return i&&i();try{var t={type:n,buffered:!0};void 0!==e&&(t.durationThreshold=e),u.observe(t)}catch(n){return i&&i()}u.observe({type:n,buffered:!1})},function(){return u&&u.disconnect()}]},d=["longtask_0",function(n,e){var t=i();t&&e(c(t,n,r))}],v=["resource_0",function(e,n){var t,r,o=i();o&&(r=new RegExp("\\/monitor_web\\/collect|\\/monitor_browser\\/collect\\/batch","i"),t=function(n){return r.test(n)},n(c(o,function(n){t(n.name)||e(n)},a)))}],W="js_error",J="http",K="resource_error",Q="blank_screen";function V(n,e){return~y.indexOf(n.tagName)||g<e}function X(n){return{width:(n=n.getBoundingClientRect()).width,height:n.height,top:n.top}}function Z(n){return n?document.querySelector(n):document.body}function $(t,r,n,o){if(void 0===r&&(r=0),void 0===n&&(n=0),void 0===o&&(o=1.5),!t||V(t,r)||o<=n)return n;var e=function(){if(!r)return 0;var n=X(t),e=n.top,n=n.height;return e>innerHeight||n<=0?0:1/(1<<r-1)}();return[].reduceRight.call(t.children,function(n,e){return $(e,r+1,n,o)},n+e)}var m=["unload_0",function(n,e){var t,r,o,i,u,c=F();c&&(t=M((r=n,o=!1,[function(n){o||(o=!0,r&&r(n))}]),1)[0],i=function(){t()},u=[],["unload","beforeunload","pagehide"].forEach(function(n){var e,t,r,o;u.push((t=n,r=i,void 0===(o=!1)&&(o=!1),(e=c).addEventListener(t,r,o),function(){e.removeEventListener(t,r,o)}))}),e(function(){u.forEach(function(n){return n()})}))}],p=["domLoad_1",function(n,e){var t,r,o=F(),i=z();o&&i&&(t=!1,r=Y,o=function(){setTimeout(function(){n(),t=!0},0)},"loading"!==i.readyState?o():r=u(i,"DOMContentLoaded",o,!1),e(function(){r()},function(n){t&&n()}))}],h=["activated_0",function(n,e){var t,r,o,i=z();i&&(t=!1,r=Y,o=function(){n(),t=!0},i&&i.prerendering?r=u(i,"prerenderingchange",o,!0):o(),e(function(){r()},function(n){t&&n()}))}],y=["SCRIPT","STYLE","META","HEAD"],nn=[W,J,K],g=4,en=["performance","performance_longtask","performance_timing","custom"];function tn(n){var t=n.cb,e=n.screenshotUrl,r=n.window,o=n.document,i=n.mask,u=n.partialShot,c=n.quality,a=n.rootSelector;if(F()&&"Promise"in window&&Promise&&r&&o){if(r.html2canvas)return f(),0;n=o.createElement("script");n.src=e,n.crossOrigin="anonymous",n.onload=f,n.onerror=function(){t()},null!==(e=o.head)&&void 0!==e&&e.appendChild(n)}function f(){var e;((e=r).requestIdleCallback||function(n){return e.setTimeout(n,1)})(function(){r.html2canvas&&r.html2canvas(u&&a&&o.querySelector(a)||o.body,{scale:360/r.innerWidth,mask:i}).then(function(n){t("data:image"===(n=n.toDataURL("image/jpeg",c)).slice(0,10)?n:b())}).catch(function(){t(b())})})}}function b(n,e){void 0===n&&(n=192),void 0===e&&(e=108);var t=document.createElement("canvas");t.width=n,t.height=e;var r=t.getContext("2d");return r&&(r.fillStyle="#ffffff",r.fillRect(0,0,n,e)),t.toDataURL("image/jpeg")}var w=function(t,o,n,e){function r(n,e){C||(a=I())&&(C=!0,o.forEach(function(n){return n()}),o.length=0,t({ev_type:Q,payload:{timestamp:a[0],score:a[1],screenshot:e,error:f,serialized_dom:function t(n,r,e){if(void 0===r&&(r=0),void 0===e&&(e=!0),!n||V(n,r))return"";var o=H(H({},X(n)),{id:n.getAttribute("id"),class:n.getAttribute("class")}),i=Object.keys(o).reduce(function(n,e){return n+("number"==typeof o[e]||o[e]?" "+e+'="'+o[e]+'"':"")},""),u=n.tagName.toLowerCase(),n=[].reduce.call(n.children,function(n,e){return n+t(e,r+1,!1)},"");return"<"+u+i+(e?' innerHeight="'+innerHeight+'"':"")+">"+n+"</"+u+">"}(Z(S))},overrides:{timestamp:n||a[0]}}))}function i(){d&&clearTimeout(d),s&&clearTimeout(s),s=L.setTimeout(function(){l=j(function(){(a=I())&&B()})},1e3)}var u,c,a,f,s,l,d,v,m,p=M(n,5),h=p[0],y=p[1],g=p[2],b=p[3],w=p[4],_=e.threshold,n=e.screenshot,S=e.rootSelector,p=e.autoDetect,T=e.ssUrl,E=e.quality,R=e.mask,D=e.partialShot,k=e.initDetTime,O=e.runDetTime,L=F(),A=z(),j=L.requestAnimationFrame||Y,q=L.cancelAnimationFrame||Y,x=M((u=performance,[c=u&&u.timing||void 0,function(){return u&&u.now?u.now():(Date.now?Date.now():+new Date)-(c&&c.navigationStart||0)},function(n){var e=(u||{}).getEntriesByType;return G(e)&&e.call(u,n)||[]},function(){var n=(u||{}).clearResourceTimings;G(n)&&n.call(u)},function(n){var e=(u||{}).getEntriesByName;return G(e)&&e.call(u,n)||[]}]),2)[1],P=0,C=!1,U=!n,I=function(){var n=Z(S);if(n){n=$(n,0,0,_);return n<_?[N(),n]:void 0}},B=(v=function(){a&&!C&&(U?r():(U=!0,tn({cb:r.bind(null,N()),screenshotUrl:T,window:L,document:A,mask:R,partialShot:D,quality:E,rootSelector:S})))},function(){d&&clearTimeout(d),m=N(),d=L.setTimeout(function(){(m<P?i:v)()},1e4<x()?O:k)});return o.push(w[0](function(){f&&r()})),p&&o.push(h[0](function(){var n=y();o.push(n[0](function(){var n,t,n=M((n=function(){if(F()&&G(window.MutationObserver))return window.MutationObserver}(),e=i,t=n&&new n(e),[function(n,e){t&&n&&t.observe(n,e)},function(){return t&&t.disconnect()}]),2),e=n[0],r=n[1];o.push(function(){clearTimeout(s),clearTimeout(d),q(l),r&&r()}),e(null===(e=z())||void 0===e?void 0:e.body,{subtree:!0,childList:!0}),o.push(g()[0](function(){s&&i()})),o.push(b()[0](function(){s&&i()})),i()}))})),[function(n){C||~en.indexOf(n.ev_type)||(P=N(),f=function(n,e){if(-1===nn.indexOf(e.ev_type))return n;if(e.ev_type===J&&e.payload.response.status<400)return n;if(n&&nn.indexOf(n.type)<nn.indexOf(e.ev_type))return n;var t="";switch(e.ev_type){case W:t=e.payload.error.message;break;case J:t=e.payload.request.url;break;case K:t=e.payload.url}return{type:e.ev_type,message:t,timestamp:N()}}(f=f&&1e4<P-f.timestamp?void 0:f,n))},i]},_="blankScreen";var n,e,S,T,E="1.14.1";n=_,e=function(c,a){c.on("init",function(){var n,e,t,r,o,i={autoDetect:!0,threshold:1.5,screenshot:!0,mask:!1,ssUrl:c.config().pluginPathPrefix+"/screenshot.min.js",partialShot:!0,quality:.1,initDetTime:8e3,runDetTime:4e3},u=a?l(a,i):(e=_,o=i,e=null===(u=(u=c).config())||void 0===u?void 0:u.plugins[e],l(e,o));u&&(n=c,e=u,o=z(),u=F(),o&&u&&(u=[],e=M(w(n.report.bind(n),u,[s(n,h),function(){return s(n,p)},function(){return s(n,d)},function(){return s(n,v)},s(n,m)],e),2),t=e[0],e=e[1],n.on("report",r=function(n){return t(n),n}),u.push(function(){n.off("report",r)}),f(n,_,Q,u),n.provide("detectBlankScreen",e)))})},(S=void 0===S?function(n){if(n)return n.__SLARDAR_REGISTRY__||(n.__SLARDAR_REGISTRY__={Slardar:{plugins:[],errors:[],subject:{}}}),n.__SLARDAR_REGISTRY__.Slardar}(F()):S)&&S.plugins&&(T=n,S.plugins.filter(function(n){return n.name===T&&n.version===E})[0]||S.plugins.push({name:n,version:E,apply:e}))}();
