!function(){"use strict";var c=function(){return(c=Object.assign||function(n){for(var t,r=1,e=arguments.length;r<e;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}).apply(this,arguments)};function y(n,t){var r="function"==typeof Symbol&&n[Symbol.iterator];if(!r)return n;var e,o,u=r.call(n),i=[];try{for(;(void 0===t||0<t--)&&!(e=u.next()).done;)i.push(e.value)}catch(n){o={error:n}}finally{try{e&&!e.done&&(r=u.return)&&r.call(u)}finally{if(o)throw o.error}}return i}var g=function(){return{}};function n(n){return n}function r(n){return"object"==typeof n&&null!==n}var t=Object.prototype;function l(n){return"[object Array]"===t.toString.call(n)}function a(n){return"function"==typeof n}function u(n){return"string"==typeof n}function e(n){return l(n)&&n.length?function(n){for(var t=[],r=n.length,e=0;e<r;e++){var o=n[e];u(o)?t.push(o.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")):o&&o.source&&t.push(o.source)}return new RegExp(t.join("|"),"i")}(n):null}function o(u,i,c){return function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];if(!u)return g;var r=u[i],e=c.apply(void 0,function(n,t,r){if(r||2===arguments.length)for(var e,o=0,u=t.length;o<u;o++)!e&&o in t||((e=e||Array.prototype.slice.call(t,0,o))[o]=t[o]);return n.concat(e||Array.prototype.slice.call(t))}([r],y(n),!1)),o=e;return a(o)&&(o=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return e.apply(this,n)}),u[i]=o,function(){o===u[i]?u[i]=r:e=r}}}function v(e,n){var t=[];try{t=n.reduce(function(n,t){try{var r=t(e);"function"==typeof r&&n.push(r)}catch(n){}return n},[])}catch(n){}return function(n){return v(n,t)}}var w=function(n,t){n=e(n||[]);return!!n&&n.test(t)},f=function(n){return Math.random()<Number(n)},s=function(n){function t(n){c=function(n,t){if(!l(n))return n;var r=n.indexOf(t);if(0<=r){t=n.slice();return t.splice(r,1),t}return n}(c,n),f||s()}var r,e,o,u,i,c=[],a=[],f=!1,s=(e=function(){return c.length},o=function(){f=!0,r&&r[0](),a.forEach(function(n){return n()}),a.length=0,r=void 0},-1===(u=n=void(i=0)===n?3e5:n)?g:function(){if(e())return i&&clearTimeout(i),void(i=0);0===i&&(i=setTimeout(o,u))});return{next:function(n){return v(n,c)},complete:function(n){a.push(n)},attach:function(n,t){r=[n,t]},subscribe:function(n){if(f)throw new Error("Observer is closed");return c.push(n),r&&r[1]&&r[1](n),s(),function(){return t(n)}},unsubscribe:t}};function d(n,t){return n.initSubject(t)}var m=function(){return Date.now()};function i(){if("object"==typeof window&&r(window))return window}function b(n){var t=function(){if("object"==typeof document&&r(document))return document}();if(!t||!n)return"";t=t.createElement("a");return t.href=n,t.href}function p(){var n=i()&&i()&&window.location;return n?n.href:""}function h(e,o){return function(n,t){var r=o([n,t=void 0===t?{}:t]),t=e(n,t);return t.then(function(n){r(n)},function(){r(void 0)}),t}}var x=function(n){var t=n.config(),t={pid:t.pid,view_id:t.viewId,url:p()};return t.context=n.context?n.context.toString():{},t},_=function(n,t){return r(n)?c(c({},t),n):!!n&&t},R=["fetch_0",function(n,t){var r,e=i();e&&fetch&&((r=[]).push(o(e,"fetch",h)(n)),t(function(){r.forEach(function(n){return n()})}))}],E=["resource"],S=function(t,o,r){var e=t&&new t(function(n,e){n.getEntries?n.getEntries().forEach(function(n,t,r){return o(n,t,r,e)}):r&&r()});return[function(n){if(!t||!e)return r&&r();try{e.observe({entryTypes:n})}catch(n){return r&&r()}},function(n){if(!t||!e)return r&&r();try{e.observe({type:n,buffered:!0})}catch(n){return r&&r()}e.observe({type:n,buffered:!1})},function(){return e&&e.disconnect()}]},A=["resource_0",function(n,t){var r=function(){if(i()&&a(window.PerformanceObserver))return window.PerformanceObserver}();r&&t(function(n,t,r){n=y(S(n,t),3),t=n[0],n=n[2];return t(r),n}(r,n,E))}],j="http",O="03",T="01",q="traceparent",C={sampleRate:1,origins:[]},k=function(){var n=window&&(window.crypto||window.msCrypto);if(void 0!==n&&n.getRandomValues){var t=new Uint16Array(8);n.getRandomValues(t);n=function(n){for(var t=n.toString(16);t.length<4;)t="0"+t;return t};return n(t[0])+n(t[1])+n(t[2])+n(t[3])+n(t[4])+n(t[5])+n(t[6])+n(t[7])}return"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".replace(/[x]/g,function(){return(16*Math.random()|0).toString(16)})},D=new RegExp("(cookie|auth|jwt|token|key|ticket|secret|credential|session|password)","i"),I=new RegExp("(bearer|session)","i"),L=function(t){var r=!1;return function(n){r||(r=!0,t(n))}},U=function(n,t){try{var r;t&&(r=n.request.url,n.request.url=t(r),n.extra=c(c({},n.extra),{original_url:r}))}catch(n){}};function G(n,t,f){var r=y(t,2),t=r[0],s=r[1],l=f.setTraceHeader,v=f.ignoreUrls,d=f.setContextAtReq,p=f.extractUrl,h=window.Headers,x=window.Request;x&&h&&n.push(t[0](function(n){var n=y(n,2),e=n[0],o=n[1],t=b(e instanceof x?e.url:e);if(!B(t)||w(v,t))return g;l&&l(t,function(n,t){return M(n,t,e,o,x,h)});var u=d(),i=m(),c=void 0,a=s()[0](function(n){t!==n.name||c||(c=n)});return function(n){var t=V(e,o,n,x,h,f,i),r=L(function(n){c&&(n.response.timing=c),U(n,p),u&&u({ev_type:j,payload:n}),a()});setTimeout(function(){r(t)},1e3)}}))}function H(n,t){return n instanceof t}function P(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];try{return n.reduce(function(o,n){return new t(n||{}).forEach(function(n,t){return e=n,!(!(r=t)||!e||(D.test(r)||I.test(e)))&&(o[t]=n);var r,e}),o},{})}catch(n){return{}}}function Y(n,t,r){return H(n,r)?n.body:null==t?void 0:t.body}var B=function(n){if(!u(n))return!1;var t=y(n.split(":"),2),n=t[0];return!t[1]||"http"===n||"https"===n},M=function(n,t,r,e,o,u){H(r,o)?r.headers.set(n,t):e.headers instanceof u?e.headers.set(n,t):e.headers=c(c({},e.headers),((e={})[n]=t,e))},V=function(t,r,n,e,o,u,i){function c(){var n;f&&(a.request.body=null===(n=Y(t,r,e))||void 0===n?void 0:n.toString())}var a={api:"fetch",request:{method:function(n,t,r){t=t&&t.method||"get";return(t=H(n,r)?n.method||t:t).toLowerCase()}(t,r,e),timestamp:i,url:b(t instanceof e?t.url:t),headers:P(o,t.headers,r.headers)},response:{status:n&&n.status||0,is_custom_error:!1,timestamp:m()},duration:m()-i},f=u.collectBodyOnError,s=u.extraExtractor;if(n)try{var l=P(o,n.headers);a.response.headers=l;try{-1!==(l["content-type"]||"").indexOf("application/json")&&s&&n.clone().json().then(function(n){n=s(n,a,null===(n=Y(t,r,e))||void 0===n?void 0:n.toString());n&&(a.extra=n,a.response.is_custom_error=!0,c())}).catch(g)}catch(n){}400<=n.status&&c()}catch(n){}else c();return a},W="fetch",$={autoWrap:!0,setContextAtReq:function(){return n},ignoreUrls:[],collectBodyOnError:!1};var F,N,z,J,K="1.12.3";F=W,N=function(i){i.on("init",function(){var n,t,r,e,o,u,r=(t=W,r=$,t=null===(n=(n=i).config())||void 0===n?void 0:n.plugins[t],_(t,r));r&&(e=[],o=c(c({},r),{setContextAtReq:function(){return function(t,n){void 0===n&&(n=!1);var r=x(t);return n&&(r.timestamp=m()),function(n){t.report(c(c({},n),{overrides:r}))}}(i,!0)},setTraceHeader:function(n){var e=_(n,C);if(e&&f(e.sampleRate))return function(n,t){var r=e.origins;r.length&&w(r,n)&&t(q,O+"-"+k()+"-"+k().substring(16)+"-"+T)}}(r.trace)}),u=function(){return d(i,A)},o.autoWrap&&G(e,[d(i,R),u],o),i.destroyAgent.set(W,j,e),i.provide("wrapFetch",function(t){var r=void 0;return G(e,[function(n,t,r){r=s(r);try{n(r.next,r.attach),t&&r.complete(t)}catch(n){}return[r.subscribe,r.unsubscribe]}(function(n){r=h(t,n)}),u],o),r}))})},(z=void 0===z?function(n){if(n)return n.__SLARDAR_REGISTRY__||(n.__SLARDAR_REGISTRY__={Slardar:{plugins:[],errors:[],subject:{}}}),n.__SLARDAR_REGISTRY__.Slardar}(i()):z)&&z.plugins&&(J=F,z.plugins.filter(function(n){return n.name===J&&n.version===K})[0]||z.plugins.push({name:F,version:K,apply:N}))}();
