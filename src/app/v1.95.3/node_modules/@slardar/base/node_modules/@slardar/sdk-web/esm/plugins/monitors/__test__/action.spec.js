import test from 'ava';
import sinon from 'sinon';
import { createTestWebClient } from '../../../utils/__test__/util';
import { ActionMonitorPlugin } from '../action';
var browserEnv = require('browser-env');
test.before(function () {
    browserEnv();
});
test.serial('ActionMonitorBasePlugin - pure', function (t) {
    var client = createTestWebClient();
    ActionMonitorPlugin(client);
    var onReport = sinon.fake();
    client.on('report', onReport);
    client.init({
        pid: 'pid0',
        viewId: 'viewId0',
        plugins: {
            action: true,
        },
    });
    client.start();
    t.assert(client.startAction);
    client.startAction('action1', 'click');
    client.startAction('action2', 'click');
    t.true(onReport.calledOnce);
    t.like(onReport.args[0][0], {
        ev_type: 'action',
        payload: {
            type: 'click',
            target: { name: 'action1' },
        },
        overrides: {
            pid: 'pid0',
            view_id: 'viewId0',
        },
    });
});
test.serial('ActionMonitorBasePlugin - not pure', function (t) {
    var client = createTestWebClient();
    ActionMonitorPlugin(client);
    var onReport = sinon.fake();
    client.on('report', onReport);
    client.init({
        pid: 'pid0',
        viewId: 'viewId0',
        plugins: {
            action: { pure: false },
        },
    });
    client.start();
    t.assert(client.startAction);
    client.startAction('action1', 'click');
    client.startAction('action2', 'click');
    t.true(onReport.notCalled);
});//# sourceMappingURL=https://trae.private/sourcemaps/424b4bd987c6c6a4cadf1a08da420593cc6bf75a/node_modules/@slardar/base/node_modules/@slardar/sdk-web/esm/plugins/monitors/__test__/action.spec.js.map