import systemInformation from 'systeminformation';
import os from 'os';
import Registry from 'winreg';
import crypto from 'crypto';
import { promisify } from 'util';
import child_process from 'child_process';
import fs from 'fs/promises';
import zlib from 'zlib';
import JSONBig from 'json-bigint';
import fetch from 'node-fetch';

function memoize(func) {
    let cache = null;
    return function () {
        if (cache === null) {
            cache = func();
        }
        return cache;
    };
}

async function getDiskSerial() {
    const disks = await systemInformation.diskLayout();
    if (disks.length > 0) {
        return disks[0].serialNum.toUpperCase().replace(/ /g, '_');
    }
    return '';
}
const memoizedGetDiskSerial = memoize(getDiskSerial);

async function getGraphicResolution() {
    const graphics = await systemInformation.graphics();
    if (graphics.displays?.length > 0) {
        // 注意这里与原版 C SDK 行为不一致，C SDK 使用了缩放后的分辨率，我们取实际分辨率
        const x = graphics.displays[0]?.resolutionX || 0;
        const y = graphics.displays[0]?.resolutionY || 0;
        return `${x}x${y}`;
    }
    return '0x0';
}
const memoizedGetGraphicResolution = memoize(getGraphicResolution);

var DrPlatform;
(function (DrPlatform) {
    DrPlatform[DrPlatform["UNKNOWN"] = 0] = "UNKNOWN";
    DrPlatform[DrPlatform["MAC"] = 1] = "MAC";
    DrPlatform[DrPlatform["WIN"] = 2] = "WIN";
    DrPlatform[DrPlatform["LINUX"] = 3] = "LINUX";
})(DrPlatform || (DrPlatform = {}));
const DR_TARGET_PLATFORM = (() => {
    if (typeof process === 'undefined') {
        return DrPlatform.UNKNOWN;
    }
    switch (process.platform) {
        case 'win32':
            return DrPlatform.WIN;
        case 'darwin':
            return DrPlatform.MAC;
        case 'linux':
        case 'freebsd':
        case 'openbsd':
        case 'netbsd':
        case 'freebsd':
        case 'aix':
            return DrPlatform.LINUX;
        default:
            return DrPlatform.UNKNOWN;
    }
})();
const OS_NAME = (() => {
    switch (DR_TARGET_PLATFORM) {
        case DrPlatform.WIN:
            return 'Windows';
        case DrPlatform.MAC:
            return 'MacOS';
        case DrPlatform.LINUX:
            return 'Linux';
        default:
            return '';
    }
})();
const DEVICE_PLATFORM = (() => {
    switch (DR_TARGET_PLATFORM) {
        case DrPlatform.WIN:
            return 'PC';
        case DrPlatform.MAC:
            return 'MacOS';
        case DrPlatform.LINUX:
            return 'PC';
        default:
            return '';
    }
})();

const AES_BLOCK_SIZE = 16;
var KeySize;
(function (KeySize) {
    KeySize[KeySize["AES128"] = 16] = "AES128";
    KeySize[KeySize["AES192"] = 14] = "AES192";
    KeySize[KeySize["AES256"] = 32] = "AES256";
})(KeySize || (KeySize = {}));

const AES_CBC_IV_SIZE = AES_BLOCK_SIZE;

const SHA512_HASH_SIZE = 64;
function sha512Calculate(buffer) {
    const hash = crypto.createHash('sha512');
    hash.update(buffer);
    return Uint8Array.from(hash.digest());
}

const KEY_SEED_SIZE = 32;
const KEY_SALT_SIZE = 64;
const APP_HEAD_SIZE = 6;
const APP_MAGIC_0 = 0x74;
const APP_MAGIC_1 = 0x63;
const APP_HEAD_VERSION_M = 0x5;
const APP_HEAD_3 = 0x10;
const APP_HEAD_VERSION_1 = 0x0;
const APP_HEAD_VERSION_2 = 0x0;
const PP_MAGIC_0 = 0x12;
const PP_MAGIC_1 = 0x39;
const PP_HEAD_VERSION_M = 0x20;
const PP_HEAD_3 = 0x20;
const PP_HEAD_VERSION_1 = 0x02;
const PP_HEAD_VERSION_2 = 0x03;
var EncryptVersion;
(function (EncryptVersion) {
    EncryptVersion[EncryptVersion["AES"] = 1] = "AES";
    EncryptVersion[EncryptVersion["AES_PRIVATE"] = 2] = "AES_PRIVATE";
    EncryptVersion[EncryptVersion["SS_V31"] = 3] = "SS_V31";
    EncryptVersion[EncryptVersion["SS_V32"] = 4] = "SS_V32";
    EncryptVersion[EncryptVersion["SS_V33"] = 5] = "SS_V33";
    EncryptVersion[EncryptVersion["SS_V2"] = 6] = "SS_V2";
    EncryptVersion[EncryptVersion["SS_V1"] = 7] = "SS_V1";
    EncryptVersion[EncryptVersion["UNKNOWN"] = 8] = "UNKNOWN";
})(EncryptVersion || (EncryptVersion = {}));
const p_salt_1 = new Uint8Array([
    0xbf, 0xc0, 0xd8, 0xfa, 0x7a, 0xf6, 0xdc, 0x61, 0x1f, 0xfe, 0x62, 0x1b, 0x08, 0x48, 0x47, 0xb0,
    0x87, 0x63, 0x60, 0x12, 0x7f, 0x65, 0xcb, 0x68, 0xd3, 0x66, 0xbf, 0x7d, 0x25, 0x48, 0x96, 0x9c,
    0x33, 0xe5, 0x79, 0x23, 0x11, 0x99, 0x8d, 0xb1, 0x6e, 0x83, 0x96, 0x80, 0xac, 0xff, 0xfe, 0x06,
    0x12, 0x8c, 0x37, 0x3e, 0xec, 0xf9, 0x87, 0x40, 0x87, 0x0c, 0x75, 0x04, 0x59, 0x95, 0xa8, 0xd1,
]);
const p_salt_2 = new Uint8Array([
    0xf6, 0xcc, 0x1a, 0xe8, 0xe8, 0x46, 0x81, 0x6d, 0xdf, 0x92, 0xa9, 0xf2, 0x17, 0xf1, 0x69, 0x91,
    0x32, 0xc4, 0xa5, 0x2a, 0xfe, 0x78, 0x03, 0x36, 0xf4, 0xcf, 0xd1, 0x55, 0x35, 0x06, 0x8a, 0x6a,
    0xaf, 0x94, 0x1f, 0xcc, 0xba, 0xba, 0xa5, 0xb6, 0x57, 0x8e, 0x31, 0x0a, 0x27, 0x6e, 0x1a, 0x9a,
    0x56, 0x38, 0xad, 0x7d, 0x12, 0x40, 0xc6, 0xe1, 0x63, 0x63, 0x53, 0x52, 0xbf, 0x86, 0x4c, 0xaa,
]);
/// The salt array
/// real salt[i] = salt_1[i] ^ salt_2[i]
const salt_1 = Uint8Array.from([
    0x52, 0x09, 0x6a, 0xd5, 0x30, 0x36, 0xa5, 0x38, 0xbf, 0x40, 0xa3, 0x9e, 0x81, 0xf3, 0xd7, 0xfb,
    0x7c, 0xe3, 0x39, 0x82, 0x9b, 0x2f, 0xff, 0x87, 0x34, 0x8e, 0x43, 0x44, 0xc4, 0xde, 0xe9, 0xcb,
    0x54, 0x7b, 0x94, 0x32, 0xa6, 0xc2, 0x23, 0x3d, 0xee, 0x4c, 0x95, 0x0b, 0x42, 0xfa, 0xc3, 0x4e,
    0x08, 0x2e, 0xa1, 0x66, 0x28, 0xd9, 0x24, 0xb2, 0x76, 0x5b, 0xa2, 0x49, 0x6d, 0x8b, 0xd1, 0x25
]);
const salt_2 = Uint8Array.from([
    0x1f, 0xdd, 0xa8, 0x33, 0x88, 0x07, 0xc7, 0x31, 0xb1, 0x12, 0x10, 0x59, 0x27, 0x80, 0xec, 0x5f,
    0x60, 0x51, 0x7f, 0xa9, 0x19, 0xb5, 0x4a, 0x0d, 0x2d, 0xe5, 0x7a, 0x9f, 0x93, 0xc9, 0x9c, 0xef,
    0xa0, 0xe0, 0x3b, 0x4d, 0xae, 0x2a, 0xf5, 0xb0, 0xc8, 0xeb, 0xbb, 0x3c, 0x83, 0x53, 0x99, 0x61,
    0x17, 0x2b, 0x04, 0x7e, 0xba, 0x77, 0xd6, 0x26, 0xe1, 0x69, 0x14, 0x63, 0x55, 0x21, 0x0c, 0x7d
]);
function applogSalt(saltLength, version = EncryptVersion.AES) {
    const slat = new Uint8Array(saltLength);
    if (version === EncryptVersion.AES_PRIVATE) {
        for (let i = 0; i < saltLength; i++) {
            slat[i] = p_salt_1[i] ^ p_salt_2[i];
        }
    }
    else if (version === EncryptVersion.AES) {
        for (let i = 0; i < saltLength; i++) {
            slat[i] = salt_1[i] ^ salt_2[i];
        }
    }
    return slat;
}
function applogAesKey(key, aesKeyLength, ivLength, version = EncryptVersion.AES) {
    const bufferLength = SHA512_HASH_SIZE + KEY_SALT_SIZE;
    const buffer = new Uint8Array(bufferLength);
    const keyHash = sha512Calculate(key);
    const salt = applogSalt(KEY_SALT_SIZE, version);
    buffer.set(keyHash, 0);
    buffer.set(salt, SHA512_HASH_SIZE);
    // 计算 buffer 的哈希值并覆盖 buffer 的开头部分
    const bufferHash = sha512Calculate(buffer);
    buffer.set(bufferHash, 0);
    const aesKey = buffer.slice(0, aesKeyLength);
    const iv = buffer.slice(aesKeyLength, aesKeyLength + ivLength);
    return { aesKey, iv };
}

function aesCbcDecryptWithKey(aesKey, iv, inBuffer) {
    if (inBuffer.length % AES_BLOCK_SIZE !== 0) {
        return new Uint8Array(0);
    }
    const decipher = crypto.createDecipheriv('aes-128-cbc', aesKey, iv);
    const decrypted = Buffer.concat([decipher.update(Buffer.from(inBuffer)), decipher.final()]);
    return Uint8Array.from(decrypted);
}

function applogCheckHeader(data) {
    if (data[2] === PP_HEAD_VERSION_M &&
        data[3] === PP_HEAD_3 &&
        data[4] === PP_HEAD_VERSION_1 &&
        data[5] === PP_HEAD_VERSION_2 &&
        data[0] === PP_MAGIC_0 &&
        data[1] === PP_MAGIC_1) {
        return EncryptVersion.AES_PRIVATE;
    }
    if (data[0] !== APP_MAGIC_0 || data[1] !== APP_MAGIC_1) {
        return EncryptVersion.UNKNOWN;
    }
    if (data[2] === APP_HEAD_VERSION_M &&
        data[3] === APP_HEAD_3 &&
        data[4] === APP_HEAD_VERSION_1 &&
        data[5] === APP_HEAD_VERSION_2) {
        return EncryptVersion.AES;
    }
    if (data[2] === 0x03 && data[3] < 0x16) {
        if (data[4] === 0 && data[5] === 0x01) {
            return EncryptVersion.SS_V31;
        }
        if (data[4] === 0 && data[5] === 0x02) {
            return EncryptVersion.SS_V32;
        }
        if (data[4] === 0 && data[5] === 0x03) {
            return EncryptVersion.SS_V33;
        }
    }
    if (data[2] === 0x02 && data[3] < 0x16) {
        return EncryptVersion.SS_V2;
    }
    if (data[2] === 0x01 && data[3] < 0x16) {
        return EncryptVersion.SS_V1;
    }
    return EncryptVersion.UNKNOWN;
}
function applogGetHeaderKey(data, keyLength) {
    const version = applogCheckHeader(data);
    if (version !== EncryptVersion.AES && version !== EncryptVersion.AES_PRIVATE) {
        return {
            version: EncryptVersion.UNKNOWN,
            key: new Uint8Array(0),
        };
    }
    return {
        version,
        key: data.slice(APP_HEAD_SIZE, APP_HEAD_SIZE + keyLength),
    };
}
function applogDecrypt(dataIn) {
    const keyLength = KEY_SEED_SIZE;
    const { version, key } = applogGetHeaderKey(dataIn, keyLength);
    if (key.length !== KEY_SEED_SIZE) {
        return new Uint8Array(0);
    }
    const aesKeyLength = KeySize.AES128;
    const ivLength = AES_CBC_IV_SIZE;
    const { aesKey, iv } = applogAesKey(key, aesKeyLength, ivLength, version);
    const bufferOut = aesCbcDecryptWithKey(aesKey, iv, dataIn.slice(KEY_SEED_SIZE + APP_HEAD_SIZE));
    if (bufferOut.length > 0) {
        /// hash check
        const hash = sha512Calculate(bufferOut.slice(SHA512_HASH_SIZE));
        if (new Array(SHA512_HASH_SIZE).every((_, index) => hash[index] === bufferOut[index])) {
            return bufferOut.slice(SHA512_HASH_SIZE);
        }
        else {
            return new Uint8Array(0);
        }
    }
    else {
        return new Uint8Array(0);
    }
}

function safeBigInt(value, fallback) {
    if (value === undefined) {
        return fallback;
    }
    try {
        return BigInt(value);
    }
    catch (error) {
        return fallback;
    }
}
class DrCacheInfo {
    static parse(text) {
        const formats = text.split(DrCacheInfo.SPLITTER).filter(Boolean);
        const parts = {};
        for (let i = 0; i < formats.length - 1; i++) {
            const current = formats[i];
            const next = formats[i + 1];
            if (current.length > 1 && current.endsWith('=') && !next.endsWith('=')) {
                const key = formats[i].slice(0, -1);
                const value = key === 'uuid' ? next : next.replace(/\D.*/, ''); // 如果不是文本的话，扔掉匹配到的非数字和之后的字符，增加健壮性
                parts[key] = value;
            }
        }
        return new DrCacheInfo(parseInt(parts.version, 10) || 0, safeBigInt(parts.dr_did, 0n), safeBigInt(parts.iid, 0n), parts.active_success === '1', parts.activated === '1', parts.uuid || '');
    }
    static stringify(value) {
        return `version=${value.version}dr_did=${value.deviceId}iid=${value.installId}active_success=${value.isActiveSuccess ? 1 : 0}activated=${value.isActivated ? 1 : 0}uuid=${value.uuid}`;
    }
    constructor(version, did, iid, isActiveSuccess, isActivated, uuid) {
        this.version = version;
        this.deviceId = did;
        this.installId = iid;
        this.isActiveSuccess = isActiveSuccess;
        this.isActivated = isActivated;
        this.uuid = uuid;
    }
    isValidVersion() {
        // 主线分支是 3，支持 looki 的分支是 4，虽然不支持 looki id，但可以解析 looki 的 cache
        return this.version === DrCacheInfo.DR_CACHE_VERSION || this.version === 4;
    }
    toString() {
        return DrCacheInfo.stringify(this);
    }
}
DrCacheInfo.DR_CACHE_VERSION = 3;
DrCacheInfo.SPLITTER = /(version=|dr_did=|iid=|active_success=|activated=|uuid=|looki_did=|row_did=)/;

function aesCbcEncryptWithKey(aesKey, iv, inBuffer) {
    const cipher = crypto.createCipheriv('aes-128-cbc', aesKey, iv);
    const encrypted = Buffer.concat([cipher.update(Buffer.from(inBuffer)), cipher.final()]);
    return Uint8Array.from(encrypted);
}

function applogKeyGenerate(keyLength) {
    const key = new Uint8Array(keyLength);
    for (let i = 0; i < keyLength; i++) {
        key[i] = Math.floor(Math.random() * 256);
    }
    return key;
}
function applogHeaderKey(key) {
    const bufferOut = new Uint8Array(key.length + APP_HEAD_SIZE);
    bufferOut[0] = APP_MAGIC_0;
    bufferOut[1] = APP_MAGIC_1;
    bufferOut[2] = APP_HEAD_VERSION_M;
    bufferOut[3] = APP_HEAD_3;
    bufferOut[4] = APP_HEAD_VERSION_1;
    bufferOut[5] = APP_HEAD_VERSION_2;
    bufferOut.set(key, APP_HEAD_SIZE);
    return bufferOut;
}
function applogDecoratedInternal(dataIn) {
    const aesKeyLength = KeySize.AES128; // size_t
    const ivLength = AES_CBC_IV_SIZE; // size_t
    const key = applogKeyGenerate(KEY_SEED_SIZE);
    const { aesKey, iv } = applogAesKey(key, aesKeyLength, ivLength);
    const encryptData = new Uint8Array(SHA512_HASH_SIZE + dataIn.length);
    /// hash check
    const hash = sha512Calculate(dataIn);
    encryptData.set(hash, 0);
    /// original data
    encryptData.set(dataIn, SHA512_HASH_SIZE);
    const header = applogHeaderKey(key);
    const body = aesCbcEncryptWithKey(aesKey, iv, encryptData);
    if (body.length > 0) {
        const bufferOut = new Uint8Array(header.length + body.length);
        bufferOut.set(header, 0);
        bufferOut.set(body, header.length);
        return bufferOut;
    }
    return new Uint8Array(0);
}
function applogDecorated(dataIn) {
    return applogDecoratedInternal(dataIn);
}

// type RegValueType = string | string[] | number | bigint | Buffer | undefined;
// REG_SZ -> value
// REG_MULTI_SZ -> value.split(',')
// REG_EXPAND_SZ -> value
// REG_DWORD -> parseInt(value, 16)
// REG_QWORD -> BigInt(value)
// REG_BINARY -> Buffer.from(value, 'hex')
// REG_NONE -> undefined
// only support buffer
async function readValueFromReg(regPath, keyName) {
    const reg = new Registry({
        hive: Registry.HKCU, // HKEY_CURRENT_USER
        key: regPath,
    });
    return new Promise((resolve) => {
        reg.get(keyName, (err, result) => {
            if (err || result.type !== Registry.REG_BINARY) {
                resolve(undefined);
            }
            else {
                resolve(Buffer.from(result.value, 'hex'));
            }
        });
    });
}
// only support buffer
async function writeValueToReg(regPath, keyName, value) {
    const reg = new Registry({
        hive: Registry.HKCU, // HKEY_CURRENT_USER
        key: regPath,
    });
    return new Promise((resolve, reject) => {
        reg.set(keyName, Registry.REG_BINARY, value.toString('hex'), (err) => {
            if (err) {
                reject(err);
            }
            else {
                resolve(undefined);
            }
        });
    });
}
const DR_CACHE_REG_KEY = 'Info';
async function drCacheLoad$3(cachePath) {
    const buffer = await readValueFromReg(cachePath, DR_CACHE_REG_KEY);
    if (buffer) {
        const decData = applogDecrypt(new Uint8Array(buffer));
        const data = new TextDecoder('utf-8').decode(decData);
        if (data.startsWith('version')) {
            const drCacheInfo = DrCacheInfo.parse(data);
            if (drCacheInfo.isValidVersion()) {
                return drCacheInfo;
            }
        }
    }
    return undefined;
}
async function drCacheStore$3(drCacheInfo, cachePath) {
    if (!drCacheInfo.isValidVersion()) {
        throw new Error('drCacheInfo version is not current version');
    }
    const buffer = new Uint8Array(Buffer.from(drCacheInfo.toString(), 'utf-8'));
    const encData = applogDecorated(buffer);
    await writeValueToReg(cachePath, DR_CACHE_REG_KEY, Buffer.from(encData));
}

const DEFAULT_MAC_ADDRESS = '02:00:00:00:00:00';
const invalidMacAddresses = new Set([
    '00:00:00:00:00:00',
    'ff:ff:ff:ff:ff:ff',
    'ac:de:48:00:11:22'
]);
function validateMacAddress(candidate) {
    const tempCandidate = candidate.replace(/\-/g, ':').toLowerCase();
    return !invalidMacAddresses.has(tempCandidate);
}
function getMacAddressOnMac() {
    const preferredNICs = ['en0', 'en1', 'en2', 'llw0'];
    const ifaces = os.networkInterfaces();
    for (const preferredNIC of preferredNICs) {
        const networkInterface = ifaces[preferredNIC];
        if (networkInterface) {
            for (const { mac, internal } of networkInterface) {
                if (!internal && validateMacAddress(mac)) {
                    return mac;
                }
            }
        }
    }
    return DEFAULT_MAC_ADDRESS; // 都没有就算了
}
async function getMacAddressOnWindows() {
    const cachePath = '\\SOFTWARE\\DeviceInfo\\MacAddr';
    const cache = await readValueFromReg(cachePath, 'mac');
    if (cache) {
        return cache.toString('utf-8');
    }
    const ifaces = os.networkInterfaces();
    // TODO 需要优化 windows 上取 mac 逻辑
    for (const name in ifaces) {
        const networkInterface = ifaces[name];
        if (networkInterface) {
            for (const { mac, internal } of networkInterface) {
                if (!internal && validateMacAddress(mac)) {
                    writeValueToReg(cachePath, 'mac', Buffer.from(mac, 'utf-8'));
                    return mac;
                }
            }
        }
    }
    return DEFAULT_MAC_ADDRESS; // 都没有就算了
}
function getMacAddressOnLinux() {
    const preferredNICs = ['wlan0', 'eth0', 'eth1', 'eth2'];
    const ifaces = os.networkInterfaces();
    for (const preferredNIC of preferredNICs) {
        const networkInterface = ifaces[preferredNIC];
        if (networkInterface) {
            for (const { mac, internal } of networkInterface) {
                if (!internal && validateMacAddress(mac)) {
                    return mac;
                }
            }
        }
    }
    return DEFAULT_MAC_ADDRESS; // 都没有就算了
}
async function getMacAddress() {
    switch (DR_TARGET_PLATFORM) {
        case DrPlatform.MAC:
            return getMacAddressOnMac();
        case DrPlatform.WIN:
            return await getMacAddressOnWindows();
        case DrPlatform.LINUX:
            return getMacAddressOnLinux();
    }
    return DEFAULT_MAC_ADDRESS;
}
const memoizedGetMacAddress = memoize(getMacAddress);

async function getOsRelease() {
    if (DR_TARGET_PLATFORM === DrPlatform.WIN) {
        return os.release(); // windows 上是相同的
    }
    // posix 系统上 os release 与 kernel version 不等同
    const osInfo = await systemInformation.osInfo();
    return osInfo.release;
}
const memoizedGetOsRelease = memoize(getOsRelease);

function getTimeZoneInfo() {
    const date = new Date();
    const offset = -date.getTimezoneOffset();
    return {
        timeZone: offset / 60,
        tzOffset: offset * 60,
        tzName: Intl.DateTimeFormat().resolvedOptions().timeZone.toLocaleLowerCase(),
    };
}

const SDK_VERSION_MAJOR = 0;
const SDK_VERSION_MINOR = 0;
const SDK_VERSION_PATCH = 2;
const SDK_VERSION_CODE = SDK_VERSION_MAJOR * 100 + SDK_VERSION_MINOR * 10 + SDK_VERSION_PATCH;
const SDK_VERSION_NAME = `${SDK_VERSION_MAJOR}.${SDK_VERSION_MINOR}.${SDK_VERSION_PATCH}`;

const execAsync = promisify(child_process.exec);
function cbParseKeychainLoad(result) {
    const b64DecodeData = new Uint8Array(Buffer.from(result, 'base64'));
    const decData = applogDecrypt(b64DecodeData);
    const data = new TextDecoder('utf-8').decode(decData);
    if (data.startsWith('version')) {
        const drCacheInfo = DrCacheInfo.parse(data);
        if (drCacheInfo.isValidVersion()) {
            return drCacheInfo;
        }
    }
    return undefined;
}
async function drCacheLoad$2(name) {
    const command = `security -i find-generic-password -l 'BDdr_${name}' -a Info -w`;
    try {
        const { stdout } = await execAsync(command);
        return cbParseKeychainLoad(stdout.toString());
    }
    catch (error) {
        return undefined;
    }
}
async function drCacheStore$2(drCacheInfo, name) {
    if (!drCacheInfo.isValidVersion()) {
        throw new Error('drCacheInfo version is not current version');
    }
    const buffer = new Uint8Array(Buffer.from(drCacheInfo.toString(), 'utf-8'));
    const encData = applogDecorated(buffer);
    const b64OutStr = Buffer.from(encData).toString('base64');
    const command = `security add-generic-password -s 'BDdr_${name}' -a Info -U -w ${b64OutStr}`;
    await execAsync(command);
}

async function drCacheLoad$1(cachePath) {
    if (!cachePath) {
        return undefined;
    }
    try {
        await fs.access(cachePath);
    }
    catch {
        return undefined;
    }
    const buffer = new Uint8Array(await fs.readFile(cachePath));
    const decData = applogDecrypt(buffer);
    const data = new TextDecoder('utf-8').decode(decData);
    if (data.startsWith('version')) {
        const drCacheInfo = DrCacheInfo.parse(data);
        if (drCacheInfo.isValidVersion()) {
            return drCacheInfo;
        }
    }
    return undefined;
}
async function drCacheStore$1(drCacheInfo, cachePath) {
    if (!drCacheInfo.isValidVersion() || !cachePath) {
        throw new Error('drCacheInfo version is not current version');
    }
    const buffer = new Uint8Array(Buffer.from(drCacheInfo.toString(), 'utf-8'));
    const encData = applogDecorated(buffer);
    await fs.writeFile(cachePath, encData);
}

async function drCacheLoad(name, cachePath) {
    if (DR_TARGET_PLATFORM === DrPlatform.MAC && name) {
        return await drCacheLoad$2(name);
    }
    else if (DR_TARGET_PLATFORM === DrPlatform.WIN && cachePath) {
        return await drCacheLoad$3(cachePath);
    }
    else if (DR_TARGET_PLATFORM === DrPlatform.LINUX && cachePath) {
        return await drCacheLoad$1(cachePath);
    }
    return undefined;
}
async function drCacheStore(drCacheInfo, name, cachePath) {
    if (DR_TARGET_PLATFORM === DrPlatform.MAC && name) {
        await drCacheStore$2(drCacheInfo, name);
    }
    else if (DR_TARGET_PLATFORM === DrPlatform.WIN && cachePath) {
        await drCacheStore$3(drCacheInfo, cachePath);
    }
    else if (DR_TARGET_PLATFORM === DrPlatform.LINUX && cachePath) {
        await drCacheStore$1(drCacheInfo, cachePath);
    }
}

async function getSystem() {
    const system = await systemInformation.system();
    return {
        model: system.model.replace(' ', '_'),
        uuid: system.uuid.toUpperCase(),
        sku: system.sku,
        serial: system.serial,
    };
}
const memoizedGetSystem = memoize(getSystem);
getSystem();

class DeviceRegister {
    constructor(appInfo, config) {
        this.appInfo = appInfo;
        this.force = config.force ?? false;
        this.newUserMode = config.newUserMode ?? false;
        this.cachePath = config.cachePath;
        this.registryUrl = config.registryUrl;
        this.activeUrl = config.activeUrl;
        this.logger = config.logger ?? {};
        this.logger?.debug && this.logger?.debug?.(`[DeviceRegister] (constructor) start with appInfo: ${JSON.stringify(appInfo)}, config: ${JSON.stringify(config)}`);
        this.logger?.trace && this.logger?.trace?.(`[DeviceRegister] (constructor) parsed config: force: ${this.force}, newUserMode: ${this.newUserMode}, cachePath: ${this.cachePath}, registryUrl: ${this.registryUrl}, activeUrl: ${this.activeUrl}`);
    }
    setForce(force) {
        this.force = force;
    }
    setNewUserMode(newUserMode) {
        this.newUserMode = newUserMode;
    }
    setCachePath(cachePath) {
        this.cachePath = cachePath;
    }
    async loadCache() {
        this.logger?.trace && this.logger?.trace?.(`[DeviceRegister] (loadCache) with force: ${this.force}, newUserMode: ${this.newUserMode}, cachePath: ${this.cachePath}`);
        const uuid = DR_TARGET_PLATFORM === DrPlatform.MAC ? (await memoizedGetSystem()).uuid : (await memoizedGetDiskSerial());
        this.logger?.trace && this.logger?.trace?.(`[DeviceRegister] (loadCache) uuid: ${uuid}`);
        const cache = await drCacheLoad(this.appInfo.name, this.cachePath);
        if (cache) {
            this.logger?.trace && this.logger?.trace?.(`[DeviceRegister] (loadCache) get cahce.`);
            if (cache.deviceId > 0n && cache.installId !== 0n) {
                if (cache.uuid === uuid) {
                    this.logger?.info && this.logger?.info?.(`[DeviceRegister] (loadCache) cache uuid match, return cache ${cache.toString()}.`);
                    return cache;
                }
            }
        }
    }
    async storeCache(cache) {
        this.logger?.debug && this.logger?.debug?.(`[DeviceRegister] (storeCache): ${cache.toString()}`);
        await drCacheStore(cache, this.appInfo.name, this.cachePath);
        this.logger?.info && this.logger?.info?.(`[DeviceRegister] (storeCache) done.`);
    }
    async genRegistryRequestUrl() {
        this.logger?.trace && this.logger?.trace?.(`[DeviceRegister] (genRegistryRequestUrl) start.`);
        const [system, osRelease, diskSerial] = await Promise.all([
            memoizedGetSystem(),
            memoizedGetOsRelease(),
            DR_TARGET_PLATFORM === DrPlatform.MAC ? Promise.resolve('') : memoizedGetDiskSerial(),
        ]);
        const params = {
            aid: this.appInfo.id,
            channel: this.appInfo.channel,
            os: OS_NAME,
            os_version: osRelease,
            device_platform: DEVICE_PLATFORM,
            version_code: this.appInfo.version,
        };
        if (DR_TARGET_PLATFORM === DrPlatform.MAC) {
            params['macos_uuid'] = system.uuid;
            params['macos_serial'] = system.serial;
        }
        else {
            params['pc_uuid'] = system.uuid;
            params['pc_serial'] = diskSerial;
        }
        const url = `${this.registryUrl}?${Object.keys(params).map(key => `${key}=${params[key]}`).join('&')}`;
        this.logger?.debug && this.logger?.debug?.(`[DeviceRegister] (genRegistryRequestUrl) url: ${url}`);
        return url;
    }
    async genRegistryRequestBody() {
        this.logger?.trace && this.logger?.trace?.(`[DeviceRegister] (genRegistryRequestBody) start.`);
        const timeZoneInfo = getTimeZoneInfo();
        const [macAddress, osRelease, system, resolution, diskSerial,] = await Promise.all([
            memoizedGetMacAddress(),
            memoizedGetOsRelease(),
            memoizedGetSystem(),
            memoizedGetGraphicResolution(),
            DR_TARGET_PLATFORM === DrPlatform.MAC ? Promise.resolve('') : memoizedGetDiskSerial(),
        ]);
        const header = {
            device_id: 0,
            install_id: 0,
            os: OS_NAME,
            device_platform: DEVICE_PLATFORM,
            sdk_version: SDK_VERSION_NAME,
            sdk_version_code: SDK_VERSION_CODE,
            aid: this.appInfo.id,
            mc: macAddress,
            channel: this.appInfo.channel,
            package: this.appInfo.package,
            language: this.appInfo.language,
            app_version: this.appInfo.version,
            os_version: osRelease,
            device_model: system.model,
            time_zone: timeZoneInfo.timeZone,
            tz_name: timeZoneInfo.tzName,
            tz_offset: timeZoneInfo.tzOffset,
            resolution,
            app_region: this.appInfo.region,
            app_language: this.appInfo.language,
            display_name: this.appInfo.name,
            new_user_mode: Number(this.newUserMode),
        };
        if (DR_TARGET_PLATFORM === DrPlatform.MAC) {
            header['macos_uuid'] = system.uuid;
            header['macos_serial'] = system.serial;
            header['sku'] = system.sku;
        }
        else {
            header['pc_uuid'] = system.uuid;
            header['pc_serial'] = diskSerial;
        }
        const body = {
            header,
            _gen_time: Math.floor(Date.now() / 1000),
            magic_tag: 'ss_app_log',
        };
        this.logger?.debug && this.logger?.debug?.(`[DeviceRegister] (genRegistryRequestBody) header: ${JSON.stringify(header)}, body: ${JSON.stringify(body)}`);
        return body;
    }
    async genActiveRequestUrl(did, iid) {
        this.logger?.trace && this.logger?.trace?.(`[DeviceRegister] (genActiveRequestUrl) start.`);
        const [system, diskSerial] = await Promise.all([
            memoizedGetSystem(),
            DR_TARGET_PLATFORM === DrPlatform.MAC ? Promise.resolve('') : memoizedGetDiskSerial(),
        ]);
        const params = {
            aid: this.appInfo.id,
            app_name: this.appInfo.name,
            version_code: this.appInfo.version,
            channel: this.appInfo.channel,
            os: OS_NAME,
            device_platform: DEVICE_PLATFORM,
            device_id: did.toString(),
            iid: iid.toString(),
        };
        if (DR_TARGET_PLATFORM === DrPlatform.MAC) {
            params['macos_uuid'] = system.uuid;
            params['macos_serial'] = system.serial;
        }
        else {
            params['pc_uuid'] = system.uuid;
            params['pc_serial'] = diskSerial;
        }
        const url = `${this.activeUrl}?${Object.keys(params).map(key => `${key}=${params[key]}`).join('&')}`;
        this.logger?.debug && this.logger?.debug?.(`[DeviceRegister] (genActiveRequestUrl) url: ${url}`);
        return url;
    }
    async getDidFromCache() {
        this.logger?.trace && this.logger?.trace?.(`[DeviceRegister] (getDidFromCache) start.`);
        const cache = await this.loadCache();
        this.logger?.info && this.logger?.info?.(`[DeviceRegister] (getDidFromCache) cache: ${cache?.toString()}`);
        return {
            deviceId: cache?.deviceId ?? 0n,
            installId: cache?.installId ?? 0n,
        };
    }
    async registry() {
        this.logger?.trace && this.logger?.trace?.(`[DeviceRegister] (registry) start.`);
        const [url, body] = await Promise.all([
            this.genRegistryRequestUrl(),
            this.genRegistryRequestBody(),
        ]);
        const json = JSON.stringify(body);
        this.logger?.debug && this.logger?.debug?.(`[DeviceRegister] (registry) url: ${url}, body: ${json}`);
        const buf = new Uint8Array(await zlib.gzipSync(Buffer.from(json, 'utf-8')));
        const decData = applogDecorated(buf);
        if (decData.length === 0) {
            this.logger?.error && this.logger?.error?.(`[DeviceRegister] (registry) applogDecorated failed.`);
            return { deviceId: 0n, installId: 0n };
        }
        this.logger?.trace && this.logger?.trace?.(`[DeviceRegister] (registry) decData success.`);
        try {
            const res = await fetch(url, {
                method: 'POST',
                body: Buffer.from(decData),
                headers: {
                    'Content-Type': 'application/json',
                    'User-Agent': 'TTNetwork PC',
                },
            });
            this.logger?.debug && this.logger?.debug?.(`[DeviceRegister] (registry) res: ${res.status}`);
            if (res.status === 200) {
                const text = await res.text();
                const result = JSONBig.parse(text);
                this.logger?.info && this.logger?.info?.(`[DeviceRegister] (registry) result: ${text}`);
                return {
                    deviceId: BigInt(result.device_id ?? 0),
                    installId: BigInt(result.install_id ?? 0),
                    isNewUser: !!result.new_user,
                };
            }
        }
        catch (e) {
            this.logger?.error && this.logger?.error?.(`[DeviceRegister] (registry) failed: ${e}`);
        }
        this.logger?.error && this.logger?.error?.(`[DeviceRegister] (registry) failed.`);
        return { deviceId: 0n, installId: 0n, isNewUser: false };
    }
    async active(deviceId, installId) {
        this.logger?.trace && this.logger?.trace?.(`[DeviceRegister] (active) start.`);
        const url = await this.genActiveRequestUrl(deviceId, installId);
        this.logger?.debug && this.logger?.debug?.(`[DeviceRegister] (active) url: ${url}`);
        try {
            const res = await fetch(url, { method: 'POST', headers: { 'User-Agent': 'TTNetwork PC' } });
            this.logger?.debug && this.logger?.debug?.(`[DeviceRegister] (active) res: ${res.status}`);
            if (res.status === 200) {
                const result = await res.json();
                this.logger?.info && this.logger?.info?.(`[DeviceRegister] (active) result: ${JSON.stringify(result)}`);
                const isActiveSuccess = result?.message === 'success';
                const isActivated = !!result?.data?.is_activated;
                return {
                    isActiveSuccess,
                    isActivated,
                };
            }
        }
        catch (e) {
            this.logger?.error && this.logger?.error?.(`[DeviceRegister] (active) failed: ${e}`);
        }
        this.logger?.error && this.logger?.error?.(`[DeviceRegister] (active) failed.`);
        return {
            isActiveSuccess: false,
            isActivated: false,
        };
    }
    async registryAndActive() {
        this.logger?.trace && this.logger?.trace?.(`[DeviceRegister] (registryAndActive) start.`);
        if (!this.force && !this.newUserMode) {
            const cache = await this.loadCache();
            if (cache) {
                this.logger?.debug && this.logger?.debug?.(`[DeviceRegister] (registryAndActive) cache: ${cache.toString()}`);
                return {
                    deviceId: cache.deviceId,
                    installId: cache.installId,
                    isActiveSuccess: false,
                    isActivated: false,
                };
            }
        }
        this.logger?.trace && this.logger?.trace?.(`[DeviceRegister] (registryAndActive) registry start.`);
        const registryResult = await this.registry();
        this.logger?.debug && this.logger?.debug?.(`[DeviceRegister] (registryAndActive) registry result: did: ${registryResult.deviceId}, iid: ${registryResult.installId}`);
        if (registryResult.deviceId === 0n || registryResult.installId === 0n) {
            this.logger?.error && this.logger?.error?.(`[DeviceRegister] (registryAndActive) registry failed.`);
            return {
                deviceId: registryResult.deviceId,
                installId: registryResult.installId,
                isActiveSuccess: false,
                isActivated: false,
            };
        }
        this.logger?.trace && this.logger?.trace?.(`[DeviceRegister] (registryAndActive) active start.`);
        if (!this.newUserMode && !registryResult.isNewUser) {
            return {
                deviceId: registryResult.deviceId,
                installId: registryResult.installId,
                isActiveSuccess: true,
                isActivated: true,
            };
        }
        const activeResult = await this.active(registryResult.deviceId, registryResult.installId);
        this.logger?.debug && this.logger?.debug?.(`[DeviceRegister] (registryAndActive) active result: isActiveSuccess: ${activeResult.isActiveSuccess}, isActivated: ${activeResult.isActivated}`);
        if (activeResult.isActiveSuccess) {
            const cache = new DrCacheInfo(DrCacheInfo.DR_CACHE_VERSION, registryResult.deviceId, registryResult.installId, activeResult.isActiveSuccess, activeResult.isActivated, DR_TARGET_PLATFORM === DrPlatform.MAC ? (await memoizedGetSystem()).uuid : (await memoizedGetDiskSerial()));
            this.storeCache(cache);
            this.logger?.debug && this.logger?.debug?.(`[DeviceRegister] (registryAndActive) store cache: ${cache.toString()}`);
        }
        else {
            this.logger?.error && this.logger?.error?.(`[DeviceRegister] (registryAndActive) active failed.`);
        }
        const result = {
            deviceId: registryResult.deviceId,
            installId: registryResult.installId,
            isActiveSuccess: activeResult.isActiveSuccess,
            isActivated: activeResult.isActivated,
        };
        this.logger?.debug && this.logger?.debug?.(`[DeviceRegister] (registryAndActive) result: ${JSONBig.stringify(result)}`);
        return result;
    }
}

export { DeviceRegister };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXgubWpzIiwic291cmNlcyI6WyIuLi9zcmMvc3lzdGVtaW5mb3JtYXRpb24vdXRpbHMudHMiLCIuLi9zcmMvc3lzdGVtaW5mb3JtYXRpb24vZGlzay50cyIsIi4uL3NyYy9zeXN0ZW1pbmZvcm1hdGlvbi9ncmFwaGljcy50cyIsIi4uL3NyYy9wbGF0Zm9ybS50cyIsIi4uL3NyYy9jcnlwdG9yL2Jhc2UvYWVzX2Jhc2UudHMiLCIuLi9zcmMvY3J5cHRvci9iYXNlL2Flc19jYmMudHMiLCIuLi9zcmMvY3J5cHRvci9iYXNlL3NoYV81MTIudHMiLCIuLi9zcmMvY3J5cHRvci9iYXNlL2FwcF9sb2dfYWVzLnRzIiwiLi4vc3JjL2NyeXB0b3IvZGVjcnlwdC9hZXNfY2JjX2QudHMiLCIuLi9zcmMvY3J5cHRvci9kZWNyeXB0L2FwcF9sb2dfYWVzX2QudHMiLCIuLi9zcmMvY2FjaGUvY29tbW9uLnRzIiwiLi4vc3JjL2NyeXB0b3IvZW5jcnlwdC9hZXNfY2JjX2UudHMiLCIuLi9zcmMvY3J5cHRvci9lbmNyeXB0L2FwcF9sb2dfYWVzX2UudHMiLCIuLi9zcmMvY2FjaGUvd2luZG93cy50cyIsIi4uL3NyYy9zeXN0ZW1pbmZvcm1hdGlvbi9uZXR3b3JrLnRzIiwiLi4vc3JjL3N5c3RlbWluZm9ybWF0aW9uL29zLnRzIiwiLi4vc3JjL3N5c3RlbWluZm9ybWF0aW9uL3RpbWV6b25lLnRzIiwiLi4vc3JjL3ZlcnNpb24udHMiLCIuLi9zcmMvY2FjaGUvbWFjLnRzIiwiLi4vc3JjL2NhY2hlL2xpbnV4LnRzIiwiLi4vc3JjL2NhY2hlL2luZGV4LnRzIiwiLi4vc3JjL3N5c3RlbWluZm9ybWF0aW9uL3N5c3RlbS50cyIsIi4uL3NyYy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gbWVtb2l6ZTxSPihmdW5jOiAoKSA9PiBSKTogKCkgPT4gUiB7XG4gIGxldCBjYWNoZTogUiB8IG51bGwgPSBudWxsO1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgaWYgKGNhY2hlID09PSBudWxsKSB7XG4gICAgICBjYWNoZSA9IGZ1bmMoKTtcbiAgICB9XG4gICAgcmV0dXJuIGNhY2hlO1xuICB9O1xufVxuIiwiaW1wb3J0IHN5c3RlbUluZm9ybWF0aW9uIGZyb20gJ3N5c3RlbWluZm9ybWF0aW9uJztcbmltcG9ydCB7IG1lbW9pemUgfSBmcm9tICcuL3V0aWxzJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldERpc2tTZXJpYWwoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgY29uc3QgZGlza3MgPSBhd2FpdCBzeXN0ZW1JbmZvcm1hdGlvbi5kaXNrTGF5b3V0KCk7XG4gIGlmIChkaXNrcy5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuIGRpc2tzWzBdLnNlcmlhbE51bS50b1VwcGVyQ2FzZSgpLnJlcGxhY2UoLyAvZywgJ18nKTs7XG4gIH1cbiAgcmV0dXJuICcnO1xufVxuXG5leHBvcnQgY29uc3QgbWVtb2l6ZWRHZXREaXNrU2VyaWFsID0gbWVtb2l6ZShnZXREaXNrU2VyaWFsKTsiLCJpbXBvcnQgc3lzdGVtSW5mb3JtYXRpb24gZnJvbSAnc3lzdGVtaW5mb3JtYXRpb24nO1xuaW1wb3J0IHsgbWVtb2l6ZSB9IGZyb20gJy4vdXRpbHMnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0R3JhcGhpY1Jlc29sdXRpb24oKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgY29uc3QgZ3JhcGhpY3MgPSBhd2FpdCBzeXN0ZW1JbmZvcm1hdGlvbi5ncmFwaGljcygpO1xuICBpZiAoZ3JhcGhpY3MuZGlzcGxheXM/Lmxlbmd0aCA+IDApIHtcbiAgICAvLyDms6jmhI/ov5nph4zkuI7ljp/niYggQyBTREsg6KGM5Li65LiN5LiA6Ie077yMQyBTREsg5L2/55So5LqG57yp5pS+5ZCO55qE5YiG6L6o546H77yM5oiR5Lus5Y+W5a6e6ZmF5YiG6L6o546HXG4gICAgY29uc3QgeCA9IGdyYXBoaWNzLmRpc3BsYXlzWzBdPy5yZXNvbHV0aW9uWCB8fCAwO1xuICAgIGNvbnN0IHkgPSBncmFwaGljcy5kaXNwbGF5c1swXT8ucmVzb2x1dGlvblkgfHwgMDtcbiAgICByZXR1cm4gYCR7eH14JHt5fWA7XG4gIH1cbiAgcmV0dXJuICcweDAnO1xufVxuXG5leHBvcnQgY29uc3QgbWVtb2l6ZWRHZXRHcmFwaGljUmVzb2x1dGlvbiA9IG1lbW9pemUoZ2V0R3JhcGhpY1Jlc29sdXRpb24pOyIsImV4cG9ydCBlbnVtIERyUGxhdGZvcm0ge1xuICBVTktOT1dOID0gMCxcbiAgTUFDID0gMSxcbiAgV0lOID0gMixcbiAgTElOVVggPSAzXG59XG5cbmV4cG9ydCBjb25zdCBEUl9UQVJHRVRfUExBVEZPUk06IERyUGxhdGZvcm0gPSAoKCkgPT4ge1xuICBpZiAodHlwZW9mIHByb2Nlc3MgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIERyUGxhdGZvcm0uVU5LTk9XTjtcbiAgfVxuXG4gIHN3aXRjaChwcm9jZXNzLnBsYXRmb3JtKSB7XG4gICAgY2FzZSAnd2luMzInOlxuICAgICAgcmV0dXJuIERyUGxhdGZvcm0uV0lOO1xuICAgIGNhc2UgJ2Rhcndpbic6XG4gICAgICByZXR1cm4gRHJQbGF0Zm9ybS5NQUM7XG4gICAgY2FzZSAnbGludXgnOlxuICAgIGNhc2UgJ2ZyZWVic2QnOlxuICAgIGNhc2UgJ29wZW5ic2QnOlxuICAgIGNhc2UgJ25ldGJzZCc6XG4gICAgY2FzZSAnZnJlZWJzZCc6XG4gICAgY2FzZSAnYWl4JzpcbiAgICAgIHJldHVybiBEclBsYXRmb3JtLkxJTlVYO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gRHJQbGF0Zm9ybS5VTktOT1dOO1xuICB9XG59KSgpO1xuXG5leHBvcnQgY29uc3QgT1NfTkFNRTogc3RyaW5nID0gKCgpID0+IHtcbiAgc3dpdGNoKERSX1RBUkdFVF9QTEFURk9STSkge1xuICAgIGNhc2UgRHJQbGF0Zm9ybS5XSU46XG4gICAgICByZXR1cm4gJ1dpbmRvd3MnO1xuICAgIGNhc2UgRHJQbGF0Zm9ybS5NQUM6XG4gICAgICByZXR1cm4gJ01hY09TJztcbiAgICBjYXNlIERyUGxhdGZvcm0uTElOVVg6XG4gICAgICByZXR1cm4gJ0xpbnV4JztcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuICcnO1xuICB9XG59KSgpO1xuXG5leHBvcnQgY29uc3QgREVWSUNFX1BMQVRGT1JNOiBzdHJpbmcgPSAoKCkgPT4ge1xuICBzd2l0Y2goRFJfVEFSR0VUX1BMQVRGT1JNKSB7XG4gICAgY2FzZSBEclBsYXRmb3JtLldJTjpcbiAgICAgIHJldHVybiAnUEMnO1xuICAgIGNhc2UgRHJQbGF0Zm9ybS5NQUM6XG4gICAgICByZXR1cm4gJ01hY09TJztcbiAgICBjYXNlIERyUGxhdGZvcm0uTElOVVg6XG4gICAgICByZXR1cm4gJ1BDJztcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuICcnO1xuICB9XG59KSgpO1xuXG4iLCJleHBvcnQgY29uc3QgQUVTX0JMT0NLX1NJWkUgPSAxNjtcblxuZXhwb3J0IGVudW0gS2V5U2l6ZSB7XG4gIEFFUzEyOCA9IDE2LFxuICBBRVMxOTIgPSAxNCxcbiAgQUVTMjU2ID0gMzJcbn1cbiIsImltcG9ydCB7IEFFU19CTE9DS19TSVpFIH0gZnJvbSAnLi9hZXNfYmFzZSc7XG5cbmV4cG9ydCBjb25zdCBBRVNfQ0JDX0lWX1NJWkUgPSBBRVNfQkxPQ0tfU0laRTsiLCJpbXBvcnQgY3J5cHRvIGZyb20gJ2NyeXB0byc7XG5cbmV4cG9ydCBjb25zdCBTSEE1MTJfSEFTSF9TSVpFID0gNjQ7XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGE1MTJDYWxjdWxhdGUoYnVmZmVyOiBjcnlwdG8uQmluYXJ5TGlrZSk6IFVpbnQ4QXJyYXkge1xuICBjb25zdCBoYXNoID0gY3J5cHRvLmNyZWF0ZUhhc2goJ3NoYTUxMicpO1xuICBoYXNoLnVwZGF0ZShidWZmZXIpO1xuICByZXR1cm4gVWludDhBcnJheS5mcm9tKGhhc2guZGlnZXN0KCkpO1xufVxuIiwiaW1wb3J0IHsgU0hBNTEyX0hBU0hfU0laRSwgc2hhNTEyQ2FsY3VsYXRlIH0gZnJvbSAnLi9zaGFfNTEyJztcblxuZXhwb3J0IGNvbnN0IEtFWV9TRUVEX1NJWkUgPSAzMjtcbmV4cG9ydCBjb25zdCBLRVlfU0FMVF9TSVpFID0gNjQ7XG5cbmV4cG9ydCBjb25zdCBBUFBfSEVBRF9TSVpFID0gNjtcbmV4cG9ydCBjb25zdCBBUFBfTUFHSUNfMCA9IDB4NzQ7XG5leHBvcnQgY29uc3QgQVBQX01BR0lDXzEgPSAweDYzO1xuZXhwb3J0IGNvbnN0IEFQUF9IRUFEX1ZFUlNJT05fTSA9IDB4NTtcbmV4cG9ydCBjb25zdCBBUFBfSEVBRF8zID0gMHgxMDtcbmV4cG9ydCBjb25zdCBBUFBfSEVBRF9WRVJTSU9OXzEgPSAweDA7XG5leHBvcnQgY29uc3QgQVBQX0hFQURfVkVSU0lPTl8yID0gMHgwO1xuXG5leHBvcnQgY29uc3QgUFBfTUFHSUNfMCA9IDB4MTI7XG5leHBvcnQgY29uc3QgUFBfTUFHSUNfMSA9IDB4Mzk7XG5leHBvcnQgY29uc3QgUFBfSEVBRF9WRVJTSU9OX00gPSAweDIwO1xuZXhwb3J0IGNvbnN0IFBQX0hFQURfMyA9IDB4MjA7XG5leHBvcnQgY29uc3QgUFBfSEVBRF9WRVJTSU9OXzEgPSAweDAyO1xuZXhwb3J0IGNvbnN0IFBQX0hFQURfVkVSU0lPTl8yID0gMHgwMztcblxuZXhwb3J0IGVudW0gRW5jcnlwdFZlcnNpb24ge1xuICBBRVMgPSAxLFxuICBBRVNfUFJJVkFURSxcbiAgU1NfVjMxLFxuICBTU19WMzIsXG4gIFNTX1YzMyxcbiAgU1NfVjIsXG4gIFNTX1YxLFxuICBVTktOT1dOXG59XG5cbmNvbnN0IHBfc2FsdF8xID0gbmV3IFVpbnQ4QXJyYXkoW1xuICAweGJmLCAweGMwLCAweGQ4LCAweGZhLCAweDdhLCAweGY2LCAweGRjLCAweDYxLCAweDFmLCAweGZlLCAweDYyLCAweDFiLCAweDA4LCAweDQ4LCAweDQ3LCAweGIwLFxuICAweDg3LCAweDYzLCAweDYwLCAweDEyLCAweDdmLCAweDY1LCAweGNiLCAweDY4LCAweGQzLCAweDY2LCAweGJmLCAweDdkLCAweDI1LCAweDQ4LCAweDk2LCAweDljLFxuICAweDMzLCAweGU1LCAweDc5LCAweDIzLCAweDExLCAweDk5LCAweDhkLCAweGIxLCAweDZlLCAweDgzLCAweDk2LCAweDgwLCAweGFjLCAweGZmLCAweGZlLCAweDA2LFxuICAweDEyLCAweDhjLCAweDM3LCAweDNlLCAweGVjLCAweGY5LCAweDg3LCAweDQwLCAweDg3LCAweDBjLCAweDc1LCAweDA0LCAweDU5LCAweDk1LCAweGE4LCAweGQxLFxuXSk7XG5cbmNvbnN0IHBfc2FsdF8yID0gbmV3IFVpbnQ4QXJyYXkoW1xuICAweGY2LCAweGNjLCAweDFhLCAweGU4LCAweGU4LCAweDQ2LCAweDgxLCAweDZkLCAweGRmLCAweDkyLCAweGE5LCAweGYyLCAweDE3LCAweGYxLCAweDY5LCAweDkxLFxuICAweDMyLCAweGM0LCAweGE1LCAweDJhLCAweGZlLCAweDc4LCAweDAzLCAweDM2LCAweGY0LCAweGNmLCAweGQxLCAweDU1LCAweDM1LCAweDA2LCAweDhhLCAweDZhLFxuICAweGFmLCAweDk0LCAweDFmLCAweGNjLCAweGJhLCAweGJhLCAweGE1LCAweGI2LCAweDU3LCAweDhlLCAweDMxLCAweDBhLCAweDI3LCAweDZlLCAweDFhLCAweDlhLFxuICAweDU2LCAweDM4LCAweGFkLCAweDdkLCAweDEyLCAweDQwLCAweGM2LCAweGUxLCAweDYzLCAweDYzLCAweDUzLCAweDUyLCAweGJmLCAweDg2LCAweDRjLCAweGFhLFxuXSk7XG5cbi8vLyBUaGUgc2FsdCBhcnJheVxuLy8vIHJlYWwgc2FsdFtpXSA9IHNhbHRfMVtpXSBeIHNhbHRfMltpXVxuY29uc3Qgc2FsdF8xID0gVWludDhBcnJheS5mcm9tKFtcbiAgMHg1MiwgMHgwOSwgMHg2YSwgMHhkNSwgMHgzMCwgMHgzNiwgMHhhNSwgMHgzOCwgMHhiZiwgMHg0MCwgMHhhMywgMHg5ZSwgMHg4MSwgMHhmMywgMHhkNywgMHhmYixcbiAgMHg3YywgMHhlMywgMHgzOSwgMHg4MiwgMHg5YiwgMHgyZiwgMHhmZiwgMHg4NywgMHgzNCwgMHg4ZSwgMHg0MywgMHg0NCwgMHhjNCwgMHhkZSwgMHhlOSwgMHhjYixcbiAgMHg1NCwgMHg3YiwgMHg5NCwgMHgzMiwgMHhhNiwgMHhjMiwgMHgyMywgMHgzZCwgMHhlZSwgMHg0YywgMHg5NSwgMHgwYiwgMHg0MiwgMHhmYSwgMHhjMywgMHg0ZSxcbiAgMHgwOCwgMHgyZSwgMHhhMSwgMHg2NiwgMHgyOCwgMHhkOSwgMHgyNCwgMHhiMiwgMHg3NiwgMHg1YiwgMHhhMiwgMHg0OSwgMHg2ZCwgMHg4YiwgMHhkMSwgMHgyNVxuXSk7XG5cbmNvbnN0IHNhbHRfMiA9IFVpbnQ4QXJyYXkuZnJvbShbXG4gIDB4MWYsIDB4ZGQsIDB4YTgsIDB4MzMsIDB4ODgsIDB4MDcsIDB4YzcsIDB4MzEsIDB4YjEsIDB4MTIsIDB4MTAsIDB4NTksIDB4MjcsIDB4ODAsIDB4ZWMsIDB4NWYsXG4gIDB4NjAsIDB4NTEsIDB4N2YsIDB4YTksIDB4MTksIDB4YjUsIDB4NGEsIDB4MGQsIDB4MmQsIDB4ZTUsIDB4N2EsIDB4OWYsIDB4OTMsIDB4YzksIDB4OWMsIDB4ZWYsXG4gIDB4YTAsIDB4ZTAsIDB4M2IsIDB4NGQsIDB4YWUsIDB4MmEsIDB4ZjUsIDB4YjAsIDB4YzgsIDB4ZWIsIDB4YmIsIDB4M2MsIDB4ODMsIDB4NTMsIDB4OTksIDB4NjEsXG4gIDB4MTcsIDB4MmIsIDB4MDQsIDB4N2UsIDB4YmEsIDB4NzcsIDB4ZDYsIDB4MjYsIDB4ZTEsIDB4NjksIDB4MTQsIDB4NjMsIDB4NTUsIDB4MjEsIDB4MGMsIDB4N2Rcbl0pO1xuXG5leHBvcnQgZnVuY3Rpb24gYXBwbG9nU2FsdChcbiAgc2FsdExlbmd0aDogbnVtYmVyLFxuICB2ZXJzaW9uOiBFbmNyeXB0VmVyc2lvbiA9IEVuY3J5cHRWZXJzaW9uLkFFU1xuKTogVWludDhBcnJheSB7XG4gIGNvbnN0IHNsYXQgPSBuZXcgVWludDhBcnJheShzYWx0TGVuZ3RoKTtcbiAgaWYgKHZlcnNpb24gPT09IEVuY3J5cHRWZXJzaW9uLkFFU19QUklWQVRFKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzYWx0TGVuZ3RoOyBpKyspIHtcbiAgICAgICAgc2xhdFtpXSA9IHBfc2FsdF8xW2ldIF4gcF9zYWx0XzJbaV07XG4gICAgfVxuICB9IGVsc2UgaWYgKHZlcnNpb24gPT09IEVuY3J5cHRWZXJzaW9uLkFFUykge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2FsdExlbmd0aDsgaSsrKSB7XG4gICAgICAgIHNsYXRbaV0gPSBzYWx0XzFbaV0gXiBzYWx0XzJbaV07XG4gICAgfVxuICB9XG4gIHJldHVybiBzbGF0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXBwbG9nQWVzS2V5KFxuICBrZXk6IFVpbnQ4QXJyYXksXG4gIGFlc0tleUxlbmd0aDogbnVtYmVyLFxuICBpdkxlbmd0aDogbnVtYmVyLFxuICB2ZXJzaW9uOiBFbmNyeXB0VmVyc2lvbiA9IEVuY3J5cHRWZXJzaW9uLkFFU1xuKTogeyBhZXNLZXk6IFVpbnQ4QXJyYXksIGl2OiBVaW50OEFycmF5IH0ge1xuICBjb25zdCBidWZmZXJMZW5ndGggPSBTSEE1MTJfSEFTSF9TSVpFICsgS0VZX1NBTFRfU0laRTtcbiAgY29uc3QgYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyTGVuZ3RoKTtcblxuICBjb25zdCBrZXlIYXNoID0gc2hhNTEyQ2FsY3VsYXRlKGtleSk7XG4gIGNvbnN0IHNhbHQgPSBhcHBsb2dTYWx0KEtFWV9TQUxUX1NJWkUsIHZlcnNpb24pO1xuXG4gIGJ1ZmZlci5zZXQoa2V5SGFzaCwgMCk7XG4gIGJ1ZmZlci5zZXQoc2FsdCwgU0hBNTEyX0hBU0hfU0laRSk7XG5cbiAgLy8g6K6h566XIGJ1ZmZlciDnmoTlk4jluIzlgLzlubbopobnm5YgYnVmZmVyIOeahOW8gOWktOmDqOWIhlxuICBjb25zdCBidWZmZXJIYXNoID0gc2hhNTEyQ2FsY3VsYXRlKGJ1ZmZlcik7XG4gIGJ1ZmZlci5zZXQoYnVmZmVySGFzaCwgMCk7XG5cbiAgY29uc3QgYWVzS2V5ID0gYnVmZmVyLnNsaWNlKDAsIGFlc0tleUxlbmd0aCk7XG4gIGNvbnN0IGl2ID0gYnVmZmVyLnNsaWNlKGFlc0tleUxlbmd0aCwgYWVzS2V5TGVuZ3RoICsgaXZMZW5ndGgpO1xuXG4gIHJldHVybiB7IGFlc0tleSwgaXYgfTtcbn1cbiIsImltcG9ydCBjcnlwdG8gZnJvbSAnY3J5cHRvJztcbmltcG9ydCB7IEFFU19CTE9DS19TSVpFIH0gZnJvbSAnLi4vYmFzZS9hZXNfYmFzZSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBhZXNDYmNEZWNyeXB0V2l0aEtleShcbiAgYWVzS2V5OiBVaW50OEFycmF5LFxuICBpdjogVWludDhBcnJheSxcbiAgaW5CdWZmZXI6IFVpbnQ4QXJyYXksXG4pOiBVaW50OEFycmF5IHtcbiAgaWYgKGluQnVmZmVyLmxlbmd0aCAlIEFFU19CTE9DS19TSVpFICE9PSAwKSB7XG4gICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KDApO1xuICB9XG5cbiAgY29uc3QgZGVjaXBoZXIgPSBjcnlwdG8uY3JlYXRlRGVjaXBoZXJpdignYWVzLTEyOC1jYmMnLCBhZXNLZXksIGl2KTtcbiAgY29uc3QgZGVjcnlwdGVkID0gQnVmZmVyLmNvbmNhdChbZGVjaXBoZXIudXBkYXRlKEJ1ZmZlci5mcm9tKGluQnVmZmVyKSksIGRlY2lwaGVyLmZpbmFsKCldKTtcbiAgcmV0dXJuIFVpbnQ4QXJyYXkuZnJvbShkZWNyeXB0ZWQpO1xufSIsImltcG9ydCB7IEtleVNpemUgfSBmcm9tICcuLi9iYXNlL2Flc19iYXNlJztcbmltcG9ydCB7IEFFU19DQkNfSVZfU0laRSB9IGZyb20gJy4uL2Jhc2UvYWVzX2NiYyc7XG5pbXBvcnQgeyBhcHBsb2dBZXNLZXksIEFQUF9IRUFEXzMsIEFQUF9IRUFEX1NJWkUsIEFQUF9IRUFEX1ZFUlNJT05fMSwgQVBQX0hFQURfVkVSU0lPTl8yLCBBUFBfSEVBRF9WRVJTSU9OX00sIEFQUF9NQUdJQ18wLCBBUFBfTUFHSUNfMSwgRW5jcnlwdFZlcnNpb24sIEtFWV9TRUVEX1NJWkUsIFBQX0hFQURfMywgUFBfSEVBRF9WRVJTSU9OXzEsIFBQX0hFQURfVkVSU0lPTl8yLCBQUF9IRUFEX1ZFUlNJT05fTSwgUFBfTUFHSUNfMCwgUFBfTUFHSUNfMSB9IGZyb20gJy4uL2Jhc2UvYXBwX2xvZ19hZXMnO1xuaW1wb3J0IHsgU0hBNTEyX0hBU0hfU0laRSwgc2hhNTEyQ2FsY3VsYXRlIH0gZnJvbSAnLi4vYmFzZS9zaGFfNTEyJztcbmltcG9ydCB7IGFlc0NiY0RlY3J5cHRXaXRoS2V5IH0gZnJvbSAnLi9hZXNfY2JjX2QnO1xuXG5mdW5jdGlvbiBhcHBsb2dDaGVja0hlYWRlcihkYXRhOiBVaW50OEFycmF5KTogRW5jcnlwdFZlcnNpb24ge1xuICBpZiAoXG4gICAgZGF0YVsyXSA9PT0gUFBfSEVBRF9WRVJTSU9OX00gJiZcbiAgICBkYXRhWzNdID09PSBQUF9IRUFEXzMgJiZcbiAgICBkYXRhWzRdID09PSBQUF9IRUFEX1ZFUlNJT05fMSAmJlxuICAgIGRhdGFbNV0gPT09IFBQX0hFQURfVkVSU0lPTl8yICYmXG4gICAgZGF0YVswXSA9PT0gUFBfTUFHSUNfMCAmJlxuICAgIGRhdGFbMV0gPT09IFBQX01BR0lDXzFcbiAgKSB7XG4gICAgICByZXR1cm4gRW5jcnlwdFZlcnNpb24uQUVTX1BSSVZBVEU7XG4gIH1cblxuICBpZiAoZGF0YVswXSAhPT0gQVBQX01BR0lDXzAgfHwgZGF0YVsxXSAhPT0gQVBQX01BR0lDXzEpIHtcbiAgICAgIHJldHVybiBFbmNyeXB0VmVyc2lvbi5VTktOT1dOO1xuICB9XG5cbiAgaWYgKFxuICAgIGRhdGFbMl0gPT09IEFQUF9IRUFEX1ZFUlNJT05fTSAmJlxuICAgIGRhdGFbM10gPT09IEFQUF9IRUFEXzMgJiZcbiAgICBkYXRhWzRdID09PSBBUFBfSEVBRF9WRVJTSU9OXzEgJiZcbiAgICBkYXRhWzVdID09PSBBUFBfSEVBRF9WRVJTSU9OXzJcbiAgKSB7XG4gICAgcmV0dXJuIEVuY3J5cHRWZXJzaW9uLkFFUztcbiAgfVxuXG4gIGlmIChkYXRhWzJdID09PSAweDAzICYmIGRhdGFbM10gPCAweDE2KSB7XG4gICAgaWYgKGRhdGFbNF0gPT09IDAgJiYgZGF0YVs1XSA9PT0gMHgwMSkge1xuICAgICAgICByZXR1cm4gRW5jcnlwdFZlcnNpb24uU1NfVjMxO1xuICAgIH1cblxuICAgIGlmIChkYXRhWzRdID09PSAwICYmIGRhdGFbNV0gPT09IDB4MDIpIHtcbiAgICAgICAgcmV0dXJuIEVuY3J5cHRWZXJzaW9uLlNTX1YzMjtcbiAgICB9XG5cbiAgICBpZiAoZGF0YVs0XSA9PT0gMCAmJiBkYXRhWzVdID09PSAweDAzKSB7XG4gICAgICAgIHJldHVybiBFbmNyeXB0VmVyc2lvbi5TU19WMzM7XG4gICAgfVxuICB9XG5cbiAgaWYgKGRhdGFbMl0gPT09IDB4MDIgJiYgZGF0YVszXSA8IDB4MTYpIHtcbiAgICAgIHJldHVybiBFbmNyeXB0VmVyc2lvbi5TU19WMjtcbiAgfVxuXG4gIGlmIChkYXRhWzJdID09PSAweDAxICYmIGRhdGFbM10gPCAweDE2KSB7XG4gICAgICByZXR1cm4gRW5jcnlwdFZlcnNpb24uU1NfVjE7XG4gIH1cblxuICByZXR1cm4gRW5jcnlwdFZlcnNpb24uVU5LTk9XTjtcbn1cblxuZnVuY3Rpb24gYXBwbG9nR2V0SGVhZGVyS2V5KGRhdGE6IFVpbnQ4QXJyYXksIGtleUxlbmd0aDogbnVtYmVyKToge1xuICB2ZXJzaW9uOiBFbmNyeXB0VmVyc2lvbjtcbiAga2V5OiBVaW50OEFycmF5O1xufSB7XG4gIGNvbnN0IHZlcnNpb24gPSBhcHBsb2dDaGVja0hlYWRlcihkYXRhKTtcbiAgaWYgKHZlcnNpb24gIT09IEVuY3J5cHRWZXJzaW9uLkFFUyAmJiB2ZXJzaW9uICE9PSBFbmNyeXB0VmVyc2lvbi5BRVNfUFJJVkFURSkge1xuICAgIHJldHVybiB7XG4gICAgICB2ZXJzaW9uOiBFbmNyeXB0VmVyc2lvbi5VTktOT1dOLFxuICAgICAga2V5OiBuZXcgVWludDhBcnJheSgwKSxcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHZlcnNpb24sXG4gICAga2V5OiBkYXRhLnNsaWNlKEFQUF9IRUFEX1NJWkUsIEFQUF9IRUFEX1NJWkUgKyBrZXlMZW5ndGgpLFxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhcHBsb2dEZWNyeXB0KGRhdGFJbjogVWludDhBcnJheSk6IFVpbnQ4QXJyYXkge1xuICAgIGNvbnN0IGtleUxlbmd0aCA9IEtFWV9TRUVEX1NJWkU7XG4gICAgY29uc3QgeyB2ZXJzaW9uLCBrZXkgfSA9IGFwcGxvZ0dldEhlYWRlcktleShkYXRhSW4sIGtleUxlbmd0aCk7XG4gICAgaWYgKGtleS5sZW5ndGggIT09IEtFWV9TRUVEX1NJWkUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KDApO1xuICAgIH1cblxuICAgIGNvbnN0IGFlc0tleUxlbmd0aCA9IEtleVNpemUuQUVTMTI4O1xuICAgIGNvbnN0IGl2TGVuZ3RoID0gQUVTX0NCQ19JVl9TSVpFO1xuICAgIGNvbnN0IHsgYWVzS2V5LCBpdiB9ID0gYXBwbG9nQWVzS2V5KGtleSwgYWVzS2V5TGVuZ3RoLCBpdkxlbmd0aCwgdmVyc2lvbik7XG5cbiAgICBjb25zdCBidWZmZXJPdXQgPSBhZXNDYmNEZWNyeXB0V2l0aEtleShhZXNLZXksIGl2LCBkYXRhSW4uc2xpY2UoS0VZX1NFRURfU0laRSArIEFQUF9IRUFEX1NJWkUpKTtcbiAgICBpZiAoYnVmZmVyT3V0Lmxlbmd0aCA+IDApIHtcbiAgICAgIC8vLyBoYXNoIGNoZWNrXG4gICAgICBjb25zdCBoYXNoID0gc2hhNTEyQ2FsY3VsYXRlKGJ1ZmZlck91dC5zbGljZShTSEE1MTJfSEFTSF9TSVpFKSk7XG5cbiAgICAgIGlmIChuZXcgQXJyYXkoU0hBNTEyX0hBU0hfU0laRSkuZXZlcnkoKF8sIGluZGV4KSA9PiBoYXNoW2luZGV4XSA9PT0gYnVmZmVyT3V0W2luZGV4XSkpIHsgXG4gICAgICAgICAgcmV0dXJuIGJ1ZmZlck91dC5zbGljZShTSEE1MTJfSEFTSF9TSVpFKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KDApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSgwKTtcbiAgICB9XG59IiwiZnVuY3Rpb24gc2FmZUJpZ0ludCh2YWx1ZTogYmlnaW50IHwgYm9vbGVhbiB8IG51bWJlciB8IHN0cmluZyB8IHVuZGVmaW5lZCwgZmFsbGJhY2s6IGJpZ2ludCk6IGJpZ2ludCB7XG4gIGlmKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gZmFsbGJhY2s7XG4gIH1cbiAgdHJ5IHtcbiAgICByZXR1cm4gQmlnSW50KHZhbHVlKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gZmFsbGJhY2s7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIERyQ2FjaGVJbmZvIHtcbiAgc3RhdGljIERSX0NBQ0hFX1ZFUlNJT04gPSAzO1xuICBzdGF0aWMgU1BMSVRURVIgPSAvKHZlcnNpb249fGRyX2RpZD18aWlkPXxhY3RpdmVfc3VjY2Vzcz18YWN0aXZhdGVkPXx1dWlkPXxsb29raV9kaWQ9fHJvd19kaWQ9KS87XG5cbiAgc3RhdGljIHBhcnNlKHRleHQ6IHN0cmluZyk6IERyQ2FjaGVJbmZvIHtcbiAgICBjb25zdCBmb3JtYXRzID0gdGV4dC5zcGxpdChEckNhY2hlSW5mby5TUExJVFRFUikuZmlsdGVyKEJvb2xlYW4pO1xuXG4gICAgY29uc3QgcGFydHM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcbiAgXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmb3JtYXRzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgY29uc3QgY3VycmVudCA9IGZvcm1hdHNbaV07XG4gICAgICBjb25zdCBuZXh0ID0gZm9ybWF0c1tpICsgMV07XG4gICAgICBpZiAoY3VycmVudC5sZW5ndGggPiAxICYmIGN1cnJlbnQuZW5kc1dpdGgoJz0nKSAmJiAhbmV4dC5lbmRzV2l0aCgnPScpKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IGZvcm1hdHNbaV0uc2xpY2UoMCwgLTEpO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGtleSA9PT0gJ3V1aWQnID8gbmV4dCA6IG5leHQucmVwbGFjZSgvXFxELiovLCAnJyk7IC8vIOWmguaenOS4jeaYr+aWh+acrOeahOivne+8jOaJlOaOieWMuemFjeWIsOeahOmdnuaVsOWtl+WSjOS5i+WQjueahOWtl+espu+8jOWinuWKoOWBpeWjruaAp1xuICAgICAgICBwYXJ0c1trZXldID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBEckNhY2hlSW5mbyhcbiAgICAgIHBhcnNlSW50KHBhcnRzLnZlcnNpb24sIDEwKSB8fCAwLFxuICAgICAgc2FmZUJpZ0ludChwYXJ0cy5kcl9kaWQsIDBuKSxcbiAgICAgIHNhZmVCaWdJbnQocGFydHMuaWlkLCAwbiksXG4gICAgICBwYXJ0cy5hY3RpdmVfc3VjY2VzcyA9PT0gJzEnLFxuICAgICAgcGFydHMuYWN0aXZhdGVkID09PSAnMScsXG4gICAgICBwYXJ0cy51dWlkIHx8ICcnLFxuICAgICk7XG4gIH1cblxuICBzdGF0aWMgc3RyaW5naWZ5KHZhbHVlOiBEckNhY2hlSW5mbyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGB2ZXJzaW9uPSR7dmFsdWUudmVyc2lvbn1kcl9kaWQ9JHt2YWx1ZS5kZXZpY2VJZH1paWQ9JHt2YWx1ZS5pbnN0YWxsSWR9YWN0aXZlX3N1Y2Nlc3M9JHt2YWx1ZS5pc0FjdGl2ZVN1Y2Nlc3MgPyAxIDogMH1hY3RpdmF0ZWQ9JHt2YWx1ZS5pc0FjdGl2YXRlZCA/IDEgOiAwfXV1aWQ9JHt2YWx1ZS51dWlkfWA7XG4gIH1cblxuICBwdWJsaWMgdmVyc2lvbjogbnVtYmVyOyAvLyBpbnRcbiAgcHVibGljIGRldmljZUlkOiBiaWdpbnQ7IC8vIHVpbnQ2NF90XG4gIHB1YmxpYyBpbnN0YWxsSWQ6IGJpZ2ludDsgLy8gdWludDY0X3RcbiAgcHVibGljIGlzQWN0aXZlU3VjY2VzczogYm9vbGVhbjsgLy8gaW50XG4gIHB1YmxpYyBpc0FjdGl2YXRlZDogYm9vbGVhbjsgLy8gaW50XG4gIHB1YmxpYyB1dWlkOiBzdHJpbmc7IC8vIGNoYXJbMjU2XVxuXG4gIGNvbnN0cnVjdG9yKHZlcnNpb246IG51bWJlciwgZGlkOiBiaWdpbnQsIGlpZDogYmlnaW50LCBpc0FjdGl2ZVN1Y2Nlc3M6IGJvb2xlYW4sIGlzQWN0aXZhdGVkOiBib29sZWFuLCB1dWlkOiBzdHJpbmcpIHtcbiAgICB0aGlzLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgIHRoaXMuZGV2aWNlSWQgPSBkaWQ7XG4gICAgdGhpcy5pbnN0YWxsSWQgPSBpaWQ7XG4gICAgdGhpcy5pc0FjdGl2ZVN1Y2Nlc3MgPSBpc0FjdGl2ZVN1Y2Nlc3M7XG4gICAgdGhpcy5pc0FjdGl2YXRlZCA9IGlzQWN0aXZhdGVkO1xuICAgIHRoaXMudXVpZCA9IHV1aWQ7XG4gIH1cblxuICBwdWJsaWMgaXNWYWxpZFZlcnNpb24oKTogYm9vbGVhbiB7XG4gICAgLy8g5Li757q/5YiG5pSv5pivIDPvvIzmlK/mjIEgbG9va2kg55qE5YiG5pSv5pivIDTvvIzomb3nhLbkuI3mlK/mjIEgbG9va2kgaWTvvIzkvYblj6/ku6Xop6PmnpAgbG9va2kg55qEIGNhY2hlXG4gICAgcmV0dXJuIHRoaXMudmVyc2lvbiA9PT0gRHJDYWNoZUluZm8uRFJfQ0FDSEVfVkVSU0lPTiB8fCB0aGlzLnZlcnNpb24gPT09IDQ7XG4gIH1cblxuICBwdWJsaWMgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gRHJDYWNoZUluZm8uc3RyaW5naWZ5KHRoaXMpO1xuICB9XG59IiwiaW1wb3J0IGNyeXB0byBmcm9tICdjcnlwdG8nO1xuXG5leHBvcnQgZnVuY3Rpb24gYWVzQ2JjRW5jcnlwdFdpdGhLZXkoXG4gIGFlc0tleTogVWludDhBcnJheSxcbiAgaXY6IFVpbnQ4QXJyYXksXG4gIGluQnVmZmVyOiBVaW50OEFycmF5XG4pOiBVaW50OEFycmF5IHtcbiAgY29uc3QgY2lwaGVyID0gY3J5cHRvLmNyZWF0ZUNpcGhlcml2KCdhZXMtMTI4LWNiYycsIGFlc0tleSwgaXYpO1xuICBjb25zdCBlbmNyeXB0ZWQgPSBCdWZmZXIuY29uY2F0KFtjaXBoZXIudXBkYXRlKEJ1ZmZlci5mcm9tKGluQnVmZmVyKSksIGNpcGhlci5maW5hbCgpXSk7XG4gIHJldHVybiBVaW50OEFycmF5LmZyb20oZW5jcnlwdGVkKTtcbn0iLCJpbXBvcnQgeyBLZXlTaXplIH0gZnJvbSAnLi4vYmFzZS9hZXNfYmFzZSc7XG5pbXBvcnQgeyBBRVNfQ0JDX0lWX1NJWkUgfSBmcm9tICcuLi9iYXNlL2Flc19jYmMnO1xuaW1wb3J0IHsgYXBwbG9nQWVzS2V5LCBBUFBfSEVBRF8zLCBBUFBfSEVBRF9TSVpFLCBBUFBfSEVBRF9WRVJTSU9OXzEsIEFQUF9IRUFEX1ZFUlNJT05fMiwgQVBQX0hFQURfVkVSU0lPTl9NLCBBUFBfTUFHSUNfMCwgQVBQX01BR0lDXzEsIEtFWV9TRUVEX1NJWkUgfSBmcm9tICcuLi9iYXNlL2FwcF9sb2dfYWVzJztcbmltcG9ydCB7IFNIQTUxMl9IQVNIX1NJWkUsIHNoYTUxMkNhbGN1bGF0ZSB9IGZyb20gJy4uL2Jhc2Uvc2hhXzUxMic7XG5pbXBvcnQgeyBhZXNDYmNFbmNyeXB0V2l0aEtleSB9IGZyb20gJy4vYWVzX2NiY19lJztcblxuZnVuY3Rpb24gYXBwbG9nS2V5R2VuZXJhdGUoa2V5TGVuZ3RoOiBudW1iZXIpOiBVaW50OEFycmF5IHtcbiAgY29uc3Qga2V5ID0gbmV3IFVpbnQ4QXJyYXkoa2V5TGVuZ3RoKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlMZW5ndGg7IGkrKykge1xuICAgICAga2V5W2ldID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMjU2KTtcbiAgfVxuICByZXR1cm4ga2V5O1xufVxuXG5mdW5jdGlvbiBhcHBsb2dIZWFkZXJLZXkoa2V5OiBVaW50OEFycmF5KSB7XG4gIGNvbnN0IGJ1ZmZlck91dCA9IG5ldyBVaW50OEFycmF5KGtleS5sZW5ndGggKyBBUFBfSEVBRF9TSVpFKTtcbiAgYnVmZmVyT3V0WzBdID0gQVBQX01BR0lDXzA7XG4gIGJ1ZmZlck91dFsxXSA9IEFQUF9NQUdJQ18xO1xuICBidWZmZXJPdXRbMl0gPSBBUFBfSEVBRF9WRVJTSU9OX007XG4gIGJ1ZmZlck91dFszXSA9IEFQUF9IRUFEXzM7XG4gIGJ1ZmZlck91dFs0XSA9IEFQUF9IRUFEX1ZFUlNJT05fMTtcbiAgYnVmZmVyT3V0WzVdID0gQVBQX0hFQURfVkVSU0lPTl8yO1xuICBidWZmZXJPdXQuc2V0KGtleSwgQVBQX0hFQURfU0laRSk7XG4gIHJldHVybiBidWZmZXJPdXQ7XG59XG5cbmZ1bmN0aW9uIGFwcGxvZ0RlY29yYXRlZEludGVybmFsKGRhdGFJbjogVWludDhBcnJheSk6IFVpbnQ4QXJyYXkge1xuICBjb25zdCBhZXNLZXlMZW5ndGggPSBLZXlTaXplLkFFUzEyODsgLy8gc2l6ZV90XG4gIGNvbnN0IGl2TGVuZ3RoID0gQUVTX0NCQ19JVl9TSVpFOyAvLyBzaXplX3RcbiAgY29uc3Qga2V5ID0gYXBwbG9nS2V5R2VuZXJhdGUoS0VZX1NFRURfU0laRSk7XG4gIGNvbnN0IHsgYWVzS2V5LCBpdiB9ID0gYXBwbG9nQWVzS2V5KGtleSwgYWVzS2V5TGVuZ3RoLCBpdkxlbmd0aCk7XG5cbiAgY29uc3QgZW5jcnlwdERhdGEgPSBuZXcgVWludDhBcnJheShTSEE1MTJfSEFTSF9TSVpFICsgZGF0YUluLmxlbmd0aCk7ICBcbiAgLy8vIGhhc2ggY2hlY2tcbiAgY29uc3QgaGFzaCA9IHNoYTUxMkNhbGN1bGF0ZShkYXRhSW4pO1xuICBlbmNyeXB0RGF0YS5zZXQoaGFzaCwgMCk7XG4gIC8vLyBvcmlnaW5hbCBkYXRhXG4gIGVuY3J5cHREYXRhLnNldChkYXRhSW4sIFNIQTUxMl9IQVNIX1NJWkUpO1xuXG4gIGNvbnN0IGhlYWRlciA9IGFwcGxvZ0hlYWRlcktleShrZXkpO1xuICBjb25zdCBib2R5ID0gYWVzQ2JjRW5jcnlwdFdpdGhLZXkoYWVzS2V5LCBpdiwgZW5jcnlwdERhdGEpO1xuICBpZiAoYm9keS5sZW5ndGggPiAwKSB7XG4gICAgY29uc3QgYnVmZmVyT3V0ID0gbmV3IFVpbnQ4QXJyYXkoaGVhZGVyLmxlbmd0aCArIGJvZHkubGVuZ3RoKTtcbiAgICBidWZmZXJPdXQuc2V0KGhlYWRlciwgMCk7XG4gICAgYnVmZmVyT3V0LnNldChib2R5LCBoZWFkZXIubGVuZ3RoKTtcbiAgICByZXR1cm4gYnVmZmVyT3V0O1xuICB9XG4gIHJldHVybiBuZXcgVWludDhBcnJheSgwKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFwcGxvZ0RlY29yYXRlZChkYXRhSW46IFVpbnQ4QXJyYXkpOiBVaW50OEFycmF5IHtcbiAgcmV0dXJuIGFwcGxvZ0RlY29yYXRlZEludGVybmFsKGRhdGFJbik7XG59IiwiaW1wb3J0IFJlZ2lzdHJ5IGZyb20gJ3dpbnJlZyc7XG5pbXBvcnQgeyBhcHBsb2dEZWNyeXB0IH0gZnJvbSAnLi4vY3J5cHRvci9kZWNyeXB0L2FwcF9sb2dfYWVzX2QnO1xuaW1wb3J0IHsgRHJDYWNoZUluZm8gfSBmcm9tICcuL2NvbW1vbic7XG5pbXBvcnQgeyBhcHBsb2dEZWNvcmF0ZWQgfSBmcm9tICcuLi9jcnlwdG9yL2VuY3J5cHQvYXBwX2xvZ19hZXNfZSc7XG5cbi8vIHR5cGUgUmVnVmFsdWVUeXBlID0gc3RyaW5nIHwgc3RyaW5nW10gfCBudW1iZXIgfCBiaWdpbnQgfCBCdWZmZXIgfCB1bmRlZmluZWQ7XG5cbi8vIFJFR19TWiAtPiB2YWx1ZVxuLy8gUkVHX01VTFRJX1NaIC0+IHZhbHVlLnNwbGl0KCcsJylcbi8vIFJFR19FWFBBTkRfU1ogLT4gdmFsdWVcbi8vIFJFR19EV09SRCAtPiBwYXJzZUludCh2YWx1ZSwgMTYpXG4vLyBSRUdfUVdPUkQgLT4gQmlnSW50KHZhbHVlKVxuLy8gUkVHX0JJTkFSWSAtPiBCdWZmZXIuZnJvbSh2YWx1ZSwgJ2hleCcpXG4vLyBSRUdfTk9ORSAtPiB1bmRlZmluZWRcblxuLy8gb25seSBzdXBwb3J0IGJ1ZmZlclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlYWRWYWx1ZUZyb21SZWcocmVnUGF0aDogc3RyaW5nLCBrZXlOYW1lOiBzdHJpbmcpOiBQcm9taXNlPEJ1ZmZlciB8IHVuZGVmaW5lZD4ge1xuICBjb25zdCByZWcgPSBuZXcgUmVnaXN0cnkoe1xuICAgIGhpdmU6IFJlZ2lzdHJ5LkhLQ1UsIC8vIEhLRVlfQ1VSUkVOVF9VU0VSXG4gICAga2V5OiByZWdQYXRoLFxuICB9KTtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgcmVnLmdldChrZXlOYW1lLCAoZXJyOiBFcnJvciwgcmVzdWx0KSA9PiB7XG4gICAgICBpZiAoZXJyIHx8IHJlc3VsdC50eXBlICE9PSBSZWdpc3RyeS5SRUdfQklOQVJZKSB7XG4gICAgICAgIHJlc29sdmUodW5kZWZpbmVkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc29sdmUoQnVmZmVyLmZyb20ocmVzdWx0LnZhbHVlLCAnaGV4JykpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn1cblxuLy8gb25seSBzdXBwb3J0IGJ1ZmZlclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdyaXRlVmFsdWVUb1JlZyhyZWdQYXRoOiBzdHJpbmcsIGtleU5hbWU6IHN0cmluZywgdmFsdWU6IEJ1ZmZlcikge1xuICBjb25zdCByZWcgPSBuZXcgUmVnaXN0cnkoe1xuICAgIGhpdmU6IFJlZ2lzdHJ5LkhLQ1UsIC8vIEhLRVlfQ1VSUkVOVF9VU0VSXG4gICAga2V5OiByZWdQYXRoLFxuICB9KTtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICByZWcuc2V0KGtleU5hbWUsIFJlZ2lzdHJ5LlJFR19CSU5BUlksIHZhbHVlLnRvU3RyaW5nKCdoZXgnKSwgKGVycjogRXJyb3IpID0+IHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNvbHZlKHVuZGVmaW5lZCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufVxuXG5jb25zdCBEUl9DQUNIRV9SRUdfS0VZID0gJ0luZm8nO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZHJDYWNoZUxvYWQoY2FjaGVQYXRoOiBzdHJpbmcpOiBQcm9taXNlPERyQ2FjaGVJbmZvIHwgdW5kZWZpbmVkPiB7XG4gIGNvbnN0IGJ1ZmZlciA9IGF3YWl0IHJlYWRWYWx1ZUZyb21SZWcoY2FjaGVQYXRoLCBEUl9DQUNIRV9SRUdfS0VZKTtcbiAgaWYgKGJ1ZmZlcikge1xuICAgICAgY29uc3QgZGVjRGF0YSA9IGFwcGxvZ0RlY3J5cHQobmV3IFVpbnQ4QXJyYXkoYnVmZmVyKSk7XG4gICAgICBjb25zdCBkYXRhID0gbmV3IFRleHREZWNvZGVyKCd1dGYtOCcpLmRlY29kZShkZWNEYXRhKTtcbiAgICAgIGlmIChkYXRhLnN0YXJ0c1dpdGgoJ3ZlcnNpb24nKSkge1xuICAgICAgICBjb25zdCBkckNhY2hlSW5mbyA9IERyQ2FjaGVJbmZvLnBhcnNlKGRhdGEpO1xuICAgICAgICBpZiAoZHJDYWNoZUluZm8uaXNWYWxpZFZlcnNpb24oKSkge1xuICAgICAgICAgIHJldHVybiBkckNhY2hlSW5mbztcbiAgICAgICAgfVxuICAgICAgfVxuICB9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkckNhY2hlU3RvcmUoZHJDYWNoZUluZm86IERyQ2FjaGVJbmZvLCBjYWNoZVBhdGg6IHN0cmluZykge1xuICBpZiAoIWRyQ2FjaGVJbmZvLmlzVmFsaWRWZXJzaW9uKCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2RyQ2FjaGVJbmZvIHZlcnNpb24gaXMgbm90IGN1cnJlbnQgdmVyc2lvbicpO1xuICB9XG4gIGNvbnN0IGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KEJ1ZmZlci5mcm9tKGRyQ2FjaGVJbmZvLnRvU3RyaW5nKCksICd1dGYtOCcpKTtcbiAgY29uc3QgZW5jRGF0YSA9IGFwcGxvZ0RlY29yYXRlZChidWZmZXIpO1xuICBhd2FpdCB3cml0ZVZhbHVlVG9SZWcoY2FjaGVQYXRoLCBEUl9DQUNIRV9SRUdfS0VZLCBCdWZmZXIuZnJvbShlbmNEYXRhKSk7XG59XG4iLCJpbXBvcnQgeyBEUl9UQVJHRVRfUExBVEZPUk0sIERyUGxhdGZvcm0gfSBmcm9tICcuLi9wbGF0Zm9ybSc7XG5pbXBvcnQgb3MgZnJvbSAnb3MnO1xuaW1wb3J0IHsgcmVhZFZhbHVlRnJvbVJlZywgd3JpdGVWYWx1ZVRvUmVnIH0gZnJvbSAnLi4vY2FjaGUvd2luZG93cyc7XG5pbXBvcnQgeyBtZW1vaXplIH0gZnJvbSAnLi91dGlscyc7XG5cbmNvbnN0IERFRkFVTFRfTUFDX0FERFJFU1MgPSAnMDI6MDA6MDA6MDA6MDA6MDAnO1xuXG5jb25zdCBpbnZhbGlkTWFjQWRkcmVzc2VzID0gbmV3IFNldChbXG4gICcwMDowMDowMDowMDowMDowMCcsXG4gICdmZjpmZjpmZjpmZjpmZjpmZicsXG4gICdhYzpkZTo0ODowMDoxMToyMidcbl0pO1xuXG5mdW5jdGlvbiB2YWxpZGF0ZU1hY0FkZHJlc3MoY2FuZGlkYXRlOiBzdHJpbmcpIHtcbiAgY29uc3QgdGVtcENhbmRpZGF0ZSA9IGNhbmRpZGF0ZS5yZXBsYWNlKC9cXC0vZywgJzonKS50b0xvd2VyQ2FzZSgpO1xuICByZXR1cm4gIWludmFsaWRNYWNBZGRyZXNzZXMuaGFzKHRlbXBDYW5kaWRhdGUpO1xufVxuXG5mdW5jdGlvbiBnZXRNYWNBZGRyZXNzT25NYWMoKTogc3RyaW5nIHtcbiAgY29uc3QgcHJlZmVycmVkTklDcyA9IFsnZW4wJywgJ2VuMScsICdlbjInLCAnbGx3MCddO1xuICBjb25zdCBpZmFjZXMgPSBvcy5uZXR3b3JrSW50ZXJmYWNlcygpO1xuICBmb3IgKGNvbnN0IHByZWZlcnJlZE5JQyBvZiBwcmVmZXJyZWROSUNzKSB7XG4gICAgY29uc3QgbmV0d29ya0ludGVyZmFjZSA9IGlmYWNlc1twcmVmZXJyZWROSUNdO1xuICAgIGlmIChuZXR3b3JrSW50ZXJmYWNlKSB7XG4gICAgICBmb3IgKGNvbnN0IHsgbWFjLCBpbnRlcm5hbCB9IG9mIG5ldHdvcmtJbnRlcmZhY2UpIHtcbiAgICAgICAgaWYgKCFpbnRlcm5hbCAmJiB2YWxpZGF0ZU1hY0FkZHJlc3MobWFjKSkge1xuICAgICAgICAgIHJldHVybiBtYWM7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gREVGQVVMVF9NQUNfQUREUkVTUzsgLy8g6YO95rKh5pyJ5bCx566X5LqGXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldE1hY0FkZHJlc3NPbldpbmRvd3MoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgY29uc3QgY2FjaGVQYXRoID0gJ1xcXFxTT0ZUV0FSRVxcXFxEZXZpY2VJbmZvXFxcXE1hY0FkZHInO1xuICBjb25zdCBjYWNoZSA9IGF3YWl0IHJlYWRWYWx1ZUZyb21SZWcoY2FjaGVQYXRoLCAnbWFjJyk7XG4gIGlmIChjYWNoZSkge1xuICAgIHJldHVybiBjYWNoZS50b1N0cmluZygndXRmLTgnKTtcbiAgfVxuXG4gIGNvbnN0IGlmYWNlcyA9IG9zLm5ldHdvcmtJbnRlcmZhY2VzKCk7XG5cbiAgLy8gVE9ETyDpnIDopoHkvJjljJYgd2luZG93cyDkuIrlj5YgbWFjIOmAu+i+kVxuICBmb3IgKGNvbnN0IG5hbWUgaW4gaWZhY2VzKSB7XG4gICAgY29uc3QgbmV0d29ya0ludGVyZmFjZSA9IGlmYWNlc1tuYW1lXTtcbiAgICBpZiAobmV0d29ya0ludGVyZmFjZSkge1xuICAgICAgZm9yIChjb25zdCB7IG1hYywgaW50ZXJuYWwgfSBvZiBuZXR3b3JrSW50ZXJmYWNlKSB7XG4gICAgICAgIGlmICghaW50ZXJuYWwgJiYgdmFsaWRhdGVNYWNBZGRyZXNzKG1hYykpIHtcbiAgICAgICAgICAgIHdyaXRlVmFsdWVUb1JlZyhjYWNoZVBhdGgsICdtYWMnLCBCdWZmZXIuZnJvbShtYWMsICd1dGYtOCcpKTtcbiAgICAgICAgICAgIHJldHVybiBtYWM7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gREVGQVVMVF9NQUNfQUREUkVTUzsgLy8g6YO95rKh5pyJ5bCx566X5LqGXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRNYWNBZGRyZXNzT25MaW51eCgpOiBzdHJpbmcge1xuICBjb25zdCBwcmVmZXJyZWROSUNzID0gWyd3bGFuMCcsICdldGgwJywgJ2V0aDEnLCAnZXRoMiddO1xuICBjb25zdCBpZmFjZXMgPSBvcy5uZXR3b3JrSW50ZXJmYWNlcygpO1xuICBmb3IgKGNvbnN0IHByZWZlcnJlZE5JQyBvZiBwcmVmZXJyZWROSUNzKSB7XG4gICAgY29uc3QgbmV0d29ya0ludGVyZmFjZSA9IGlmYWNlc1twcmVmZXJyZWROSUNdO1xuICAgIGlmIChuZXR3b3JrSW50ZXJmYWNlKSB7XG4gICAgICBmb3IgKGNvbnN0IHsgbWFjLCBpbnRlcm5hbCB9IG9mIG5ldHdvcmtJbnRlcmZhY2UpIHtcbiAgICAgICAgaWYgKCFpbnRlcm5hbCAmJiB2YWxpZGF0ZU1hY0FkZHJlc3MobWFjKSkge1xuICAgICAgICAgIHJldHVybiBtYWM7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gREVGQVVMVF9NQUNfQUREUkVTUzsgLy8g6YO95rKh5pyJ5bCx566X5LqGXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRNYWNBZGRyZXNzKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gIHN3aXRjaChEUl9UQVJHRVRfUExBVEZPUk0pIHtcbiAgICBjYXNlIERyUGxhdGZvcm0uTUFDOlxuICAgICAgcmV0dXJuIGdldE1hY0FkZHJlc3NPbk1hYygpO1xuICAgIGNhc2UgRHJQbGF0Zm9ybS5XSU46XG4gICAgICByZXR1cm4gYXdhaXQgZ2V0TWFjQWRkcmVzc09uV2luZG93cygpO1xuICAgIGNhc2UgRHJQbGF0Zm9ybS5MSU5VWDpcbiAgICAgIHJldHVybiBnZXRNYWNBZGRyZXNzT25MaW51eCgpO1xuICB9XG4gIHJldHVybiBERUZBVUxUX01BQ19BRERSRVNTO1xufVxuXG5leHBvcnQgY29uc3QgbWVtb2l6ZWRHZXRNYWNBZGRyZXNzID0gbWVtb2l6ZShnZXRNYWNBZGRyZXNzKTsiLCJpbXBvcnQgc3lzdGVtSW5mb3JtYXRpb24gZnJvbSAnc3lzdGVtaW5mb3JtYXRpb24nO1xuaW1wb3J0IHsgbWVtb2l6ZSB9IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IG9zIGZyb20gJ29zJztcbmltcG9ydCB7IERSX1RBUkdFVF9QTEFURk9STSwgRHJQbGF0Zm9ybSB9IGZyb20gJy4uL3BsYXRmb3JtJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE9zUmVsZWFzZSgpOiBQcm9taXNlPHN0cmluZz4ge1xuICBpZiAoRFJfVEFSR0VUX1BMQVRGT1JNID09PSBEclBsYXRmb3JtLldJTikge1xuICAgIHJldHVybiBvcy5yZWxlYXNlKCk7IC8vIHdpbmRvd3Mg5LiK5piv55u45ZCM55qEXG4gIH1cbiAgLy8gcG9zaXgg57O757uf5LiKIG9zIHJlbGVhc2Ug5LiOIGtlcm5lbCB2ZXJzaW9uIOS4jeetieWQjFxuICBjb25zdCBvc0luZm8gPSBhd2FpdCBzeXN0ZW1JbmZvcm1hdGlvbi5vc0luZm8oKTtcbiAgcmV0dXJuIG9zSW5mby5yZWxlYXNlO1xufVxuXG5leHBvcnQgY29uc3QgbWVtb2l6ZWRHZXRPc1JlbGVhc2UgPSBtZW1vaXplKGdldE9zUmVsZWFzZSk7XG4iLCJpbXBvcnQgeyBtZW1vaXplIH0gZnJvbSAnLi91dGlscyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRUaW1lWm9uZUluZm8oKSB7XG4gIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSgpO1xuICBjb25zdCBvZmZzZXQgPSAtZGF0ZS5nZXRUaW1lem9uZU9mZnNldCgpO1xuICByZXR1cm4ge1xuICAgIHRpbWVab25lOiBvZmZzZXQgLyA2MCxcbiAgICB0ek9mZnNldDogb2Zmc2V0ICogNjAsXG4gICAgdHpOYW1lOiBJbnRsLkRhdGVUaW1lRm9ybWF0KCkucmVzb2x2ZWRPcHRpb25zKCkudGltZVpvbmUudG9Mb2NhbGVMb3dlckNhc2UoKSxcbiAgfTtcbn1cblxuZXhwb3J0IGNvbnN0IG1lbW9pemVkR2V0VGltZVpvbmVJbmZvID0gbWVtb2l6ZShnZXRUaW1lWm9uZUluZm8pO1xuIiwiZXhwb3J0IGNvbnN0IFNES19WRVJTSU9OX01BSk9SID0gMDtcbmV4cG9ydCBjb25zdCBTREtfVkVSU0lPTl9NSU5PUiA9IDA7XG5leHBvcnQgY29uc3QgU0RLX1ZFUlNJT05fUEFUQ0ggPSAyO1xuXG5leHBvcnQgY29uc3QgU0RLX1ZFUlNJT05fQ09ERSA9IFNES19WRVJTSU9OX01BSk9SICogMTAwICsgU0RLX1ZFUlNJT05fTUlOT1IgKiAxMCArIFNES19WRVJTSU9OX1BBVENIO1xuXG5leHBvcnQgY29uc3QgU0RLX1ZFUlNJT05fTkFNRSA9IGAke1NES19WRVJTSU9OX01BSk9SfS4ke1NES19WRVJTSU9OX01JTk9SfS4ke1NES19WRVJTSU9OX1BBVENIfWA7XG4iLCJpbXBvcnQgeyBwcm9taXNpZnkgfSBmcm9tICd1dGlsJztcbmltcG9ydCBjaGlsZF9wcm9jZXNzIGZyb20gJ2NoaWxkX3Byb2Nlc3MnO1xuaW1wb3J0IHsgRHJDYWNoZUluZm8gfSBmcm9tICcuL2NvbW1vbic7XG5pbXBvcnQgeyBhcHBsb2dEZWNyeXB0IH0gZnJvbSAnLi4vY3J5cHRvci9kZWNyeXB0L2FwcF9sb2dfYWVzX2QnO1xuaW1wb3J0IHsgYXBwbG9nRGVjb3JhdGVkIH0gZnJvbSAnLi4vY3J5cHRvci9lbmNyeXB0L2FwcF9sb2dfYWVzX2UnO1xuXG5jb25zdCBleGVjQXN5bmMgPSBwcm9taXNpZnkoY2hpbGRfcHJvY2Vzcy5leGVjKTtcblxuZnVuY3Rpb24gY2JQYXJzZUtleWNoYWluTG9hZChyZXN1bHQ6IHN0cmluZyk6IERyQ2FjaGVJbmZvIHwgdW5kZWZpbmVkIHtcbiAgY29uc3QgYjY0RGVjb2RlRGF0YSA9IG5ldyBVaW50OEFycmF5KEJ1ZmZlci5mcm9tKHJlc3VsdCwgJ2Jhc2U2NCcpKTtcbiAgY29uc3QgZGVjRGF0YSA9IGFwcGxvZ0RlY3J5cHQoYjY0RGVjb2RlRGF0YSk7XG4gIGNvbnN0IGRhdGEgPSBuZXcgVGV4dERlY29kZXIoJ3V0Zi04JykuZGVjb2RlKGRlY0RhdGEpO1xuXG4gIGlmIChkYXRhLnN0YXJ0c1dpdGgoJ3ZlcnNpb24nKSkge1xuICAgIGNvbnN0IGRyQ2FjaGVJbmZvID0gRHJDYWNoZUluZm8ucGFyc2UoZGF0YSk7XG4gICAgaWYgKGRyQ2FjaGVJbmZvLmlzVmFsaWRWZXJzaW9uKCkpIHtcbiAgICAgIHJldHVybiBkckNhY2hlSW5mbztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRyQ2FjaGVMb2FkKG5hbWU6IHN0cmluZyk6IFByb21pc2U8RHJDYWNoZUluZm8gfCB1bmRlZmluZWQ+IHtcbiAgY29uc3QgY29tbWFuZCA9IGBzZWN1cml0eSAtaSBmaW5kLWdlbmVyaWMtcGFzc3dvcmQgLWwgJ0JEZHJfJHtuYW1lfScgLWEgSW5mbyAtd2A7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBzdGRvdXQgfSA9IGF3YWl0IGV4ZWNBc3luYyhjb21tYW5kKTtcbiAgICByZXR1cm4gY2JQYXJzZUtleWNoYWluTG9hZChzdGRvdXQudG9TdHJpbmcoKSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZHJDYWNoZVN0b3JlKGRyQ2FjaGVJbmZvOiBEckNhY2hlSW5mbywgbmFtZTogc3RyaW5nKSB7XG4gIGlmICghZHJDYWNoZUluZm8uaXNWYWxpZFZlcnNpb24oKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignZHJDYWNoZUluZm8gdmVyc2lvbiBpcyBub3QgY3VycmVudCB2ZXJzaW9uJyk7XG4gIH1cbiAgY29uc3QgYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoQnVmZmVyLmZyb20oZHJDYWNoZUluZm8udG9TdHJpbmcoKSwgJ3V0Zi04JykpO1xuICBjb25zdCBlbmNEYXRhID0gYXBwbG9nRGVjb3JhdGVkKGJ1ZmZlcik7XG4gIGNvbnN0IGI2NE91dFN0ciA9IEJ1ZmZlci5mcm9tKGVuY0RhdGEpLnRvU3RyaW5nKCdiYXNlNjQnKTtcbiAgY29uc3QgY29tbWFuZCA9IGBzZWN1cml0eSBhZGQtZ2VuZXJpYy1wYXNzd29yZCAtcyAnQkRkcl8ke25hbWV9JyAtYSBJbmZvIC1VIC13ICR7YjY0T3V0U3RyfWA7XG4gIGF3YWl0IGV4ZWNBc3luYyhjb21tYW5kKTtcbn1cblxuIiwiaW1wb3J0IGZzIGZyb20gJ2ZzL3Byb21pc2VzJztcbmltcG9ydCB7IGFwcGxvZ0RlY3J5cHQgfSBmcm9tICcuLi9jcnlwdG9yL2RlY3J5cHQvYXBwX2xvZ19hZXNfZCc7XG5pbXBvcnQgeyBhcHBsb2dEZWNvcmF0ZWQgfSBmcm9tICcuLi9jcnlwdG9yL2VuY3J5cHQvYXBwX2xvZ19hZXNfZSc7XG5pbXBvcnQgeyBEckNhY2hlSW5mbyB9IGZyb20gJy4vY29tbW9uJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRyQ2FjaGVMb2FkKGNhY2hlUGF0aDogc3RyaW5nKTogUHJvbWlzZTxEckNhY2hlSW5mbyB8IHVuZGVmaW5lZD4ge1xuICBpZiAoIWNhY2hlUGF0aCkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICB0cnkge1xuICAgIGF3YWl0IGZzLmFjY2VzcyhjYWNoZVBhdGgpO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgY29uc3QgYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoYXdhaXQgZnMucmVhZEZpbGUoY2FjaGVQYXRoKSk7XG4gIGNvbnN0IGRlY0RhdGEgPSBhcHBsb2dEZWNyeXB0KGJ1ZmZlcik7XG4gIGNvbnN0IGRhdGEgPSBuZXcgVGV4dERlY29kZXIoJ3V0Zi04JykuZGVjb2RlKGRlY0RhdGEpO1xuICBpZiAoZGF0YS5zdGFydHNXaXRoKCd2ZXJzaW9uJykpIHtcbiAgICBjb25zdCBkckNhY2hlSW5mbyA9IERyQ2FjaGVJbmZvLnBhcnNlKGRhdGEpO1xuICAgIGlmIChkckNhY2hlSW5mby5pc1ZhbGlkVmVyc2lvbigpKSB7XG4gICAgICByZXR1cm4gZHJDYWNoZUluZm87XG4gICAgfVxuICB9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRyQ2FjaGVTdG9yZShkckNhY2hlSW5mbzogRHJDYWNoZUluZm8sIGNhY2hlUGF0aDogc3RyaW5nKSB7XG4gIGlmICghZHJDYWNoZUluZm8uaXNWYWxpZFZlcnNpb24oKSB8fCAhY2FjaGVQYXRoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdkckNhY2hlSW5mbyB2ZXJzaW9uIGlzIG5vdCBjdXJyZW50IHZlcnNpb24nKTtcbiAgfVxuICBjb25zdCBidWZmZXIgPSBuZXcgVWludDhBcnJheShCdWZmZXIuZnJvbShkckNhY2hlSW5mby50b1N0cmluZygpLCAndXRmLTgnKSk7XG4gIGNvbnN0IGVuY0RhdGEgPSBhcHBsb2dEZWNvcmF0ZWQoYnVmZmVyKTtcbiAgYXdhaXQgZnMud3JpdGVGaWxlKGNhY2hlUGF0aCwgZW5jRGF0YSk7XG59XG4iLCJpbXBvcnQgeyBEUl9UQVJHRVRfUExBVEZPUk0sIERyUGxhdGZvcm0gfSBmcm9tICcuLi9wbGF0Zm9ybSc7XG5pbXBvcnQgeyBEckNhY2hlSW5mbyB9IGZyb20gJy4vY29tbW9uJztcblxuaW1wb3J0IHsgZHJDYWNoZUxvYWQgYXMgZHJDYWNoZUxvYWRNYWMsIGRyQ2FjaGVTdG9yZSBhcyBkckNhY2hlU3RvcmVNYWMgfSBmcm9tICcuL21hYyc7XG5pbXBvcnQgeyBkckNhY2hlTG9hZCBhcyBkckNhY2hlTG9hZFdpbiwgZHJDYWNoZVN0b3JlIGFzIGRyQ2FjaGVTdG9yZVdpbiB9IGZyb20gJy4vd2luZG93cyc7XG5pbXBvcnQgeyBkckNhY2hlTG9hZCBhcyBkckNhY2hlTG9hZExpbnV4LCBkckNhY2hlU3RvcmUgYXMgZHJDYWNoZVN0b3JlTGludXggfSBmcm9tICcuL2xpbnV4JztcblxuZXhwb3J0IHtcbiAgZHJDYWNoZUxvYWRNYWMsXG4gIGRyQ2FjaGVTdG9yZU1hYyxcbiAgZHJDYWNoZUxvYWRMaW51eCxcbiAgZHJDYWNoZVN0b3JlTGludXgsXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkckNhY2hlTG9hZChuYW1lPzogc3RyaW5nLCBjYWNoZVBhdGg/OiBzdHJpbmcpOiBQcm9taXNlPERyQ2FjaGVJbmZvIHwgdW5kZWZpbmVkPiB7XG4gIGlmIChEUl9UQVJHRVRfUExBVEZPUk0gPT09IERyUGxhdGZvcm0uTUFDICYmIG5hbWUpIHtcbiAgICByZXR1cm4gYXdhaXQgZHJDYWNoZUxvYWRNYWMobmFtZSk7XG4gIH0gZWxzZSBpZiAoRFJfVEFSR0VUX1BMQVRGT1JNID09PSBEclBsYXRmb3JtLldJTiAmJiBjYWNoZVBhdGgpIHtcbiAgICByZXR1cm4gYXdhaXQgZHJDYWNoZUxvYWRXaW4oY2FjaGVQYXRoKTtcbiAgfSBlbHNlIGlmIChEUl9UQVJHRVRfUExBVEZPUk0gPT09IERyUGxhdGZvcm0uTElOVVggJiYgY2FjaGVQYXRoKSB7XG4gICAgcmV0dXJuIGF3YWl0IGRyQ2FjaGVMb2FkTGludXgoY2FjaGVQYXRoKTtcbiAgfVxuICBcbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cblxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZHJDYWNoZVN0b3JlKGRyQ2FjaGVJbmZvOiBEckNhY2hlSW5mbywgbmFtZTogc3RyaW5nLCBjYWNoZVBhdGg/OiBzdHJpbmcpIHtcbiAgaWYgKERSX1RBUkdFVF9QTEFURk9STSA9PT0gRHJQbGF0Zm9ybS5NQUMgJiYgbmFtZSkge1xuICAgIGF3YWl0IGRyQ2FjaGVTdG9yZU1hYyhkckNhY2hlSW5mbywgbmFtZSk7XG4gIH0gZWxzZSBpZiAoRFJfVEFSR0VUX1BMQVRGT1JNID09PSBEclBsYXRmb3JtLldJTiAmJiBjYWNoZVBhdGgpIHtcbiAgICBhd2FpdCBkckNhY2hlU3RvcmVXaW4oZHJDYWNoZUluZm8sIGNhY2hlUGF0aCk7XG4gIH0gZWxzZSBpZiAoRFJfVEFSR0VUX1BMQVRGT1JNID09PSBEclBsYXRmb3JtLkxJTlVYICYmIGNhY2hlUGF0aCkge1xuICAgIGF3YWl0IGRyQ2FjaGVTdG9yZUxpbnV4KGRyQ2FjaGVJbmZvLCBjYWNoZVBhdGgpO1xuICB9XG59XG4iLCJpbXBvcnQgc3lzdGVtSW5mb3JtYXRpb24gZnJvbSAnc3lzdGVtaW5mb3JtYXRpb24nO1xuaW1wb3J0IHsgbWVtb2l6ZSB9IGZyb20gJy4vdXRpbHMnO1xuXG5leHBvcnQgdHlwZSBEclN5c3RlbSA9IHtcbiAgbW9kZWw6IHN0cmluZztcbiAgdXVpZDogc3RyaW5nO1xuICBza3U6IHN0cmluZztcbiAgc2VyaWFsOiBzdHJpbmc7XG59O1xuXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTeXN0ZW0oKTogUHJvbWlzZTxEclN5c3RlbT4ge1xuICBjb25zdCBzeXN0ZW0gPSBhd2FpdCBzeXN0ZW1JbmZvcm1hdGlvbi5zeXN0ZW0oKTtcbiAgcmV0dXJuIHtcbiAgICBtb2RlbDogc3lzdGVtLm1vZGVsLnJlcGxhY2UoJyAnLCAnXycpLFxuICAgIHV1aWQ6IHN5c3RlbS51dWlkLnRvVXBwZXJDYXNlKCksXG4gICAgc2t1OiBzeXN0ZW0uc2t1LFxuICAgIHNlcmlhbDogc3lzdGVtLnNlcmlhbCxcbiAgfTtcbn1cblxuZXhwb3J0IGNvbnN0IG1lbW9pemVkR2V0U3lzdGVtID0gbWVtb2l6ZShnZXRTeXN0ZW0pO1xuXG5nZXRTeXN0ZW0oKSIsImltcG9ydCB7IG1lbW9pemVkR2V0RGlza1NlcmlhbCB9IGZyb20gJy4vc3lzdGVtaW5mb3JtYXRpb24vZGlzayc7XG5pbXBvcnQgeyBtZW1vaXplZEdldEdyYXBoaWNSZXNvbHV0aW9uIH0gZnJvbSAnLi9zeXN0ZW1pbmZvcm1hdGlvbi9ncmFwaGljcyc7XG5pbXBvcnQgeyBtZW1vaXplZEdldE1hY0FkZHJlc3MgfSBmcm9tICcuL3N5c3RlbWluZm9ybWF0aW9uL25ldHdvcmsnO1xuaW1wb3J0IHsgbWVtb2l6ZWRHZXRPc1JlbGVhc2UgfSBmcm9tICcuL3N5c3RlbWluZm9ybWF0aW9uL29zJztcbmltcG9ydCB7IGdldFRpbWVab25lSW5mbyB9IGZyb20gJy4vc3lzdGVtaW5mb3JtYXRpb24vdGltZXpvbmUnO1xuaW1wb3J0IHsgU0RLX1ZFUlNJT05fQ09ERSwgU0RLX1ZFUlNJT05fTkFNRSB9IGZyb20gJy4vdmVyc2lvbic7XG5pbXBvcnQgeyBERVZJQ0VfUExBVEZPUk0sIERSX1RBUkdFVF9QTEFURk9STSwgRHJQbGF0Zm9ybSwgT1NfTkFNRSB9IGZyb20gJy4vcGxhdGZvcm0nO1xuaW1wb3J0IHsgZHJDYWNoZUxvYWQsIGRyQ2FjaGVTdG9yZSB9IGZyb20gJy4vY2FjaGUnO1xuaW1wb3J0IHsgbWVtb2l6ZWRHZXRTeXN0ZW0gfSBmcm9tICcuL3N5c3RlbWluZm9ybWF0aW9uL3N5c3RlbSc7XG5pbXBvcnQgeyBhcHBsb2dEZWNvcmF0ZWQgfSBmcm9tICcuL2NyeXB0b3IvZW5jcnlwdC9hcHBfbG9nX2Flc19lJztcbmltcG9ydCB6bGliIGZyb20gJ3psaWInO1xuaW1wb3J0IEpTT05CaWcgZnJvbSAnanNvbi1iaWdpbnQnO1xuaW1wb3J0IHsgRHJDYWNoZUluZm8gfSBmcm9tICcuL2NhY2hlL2NvbW1vbic7XG5pbXBvcnQgZmV0Y2ggZnJvbSAnbm9kZS1mZXRjaCc7XG5cbmV4cG9ydCB0eXBlIERyQXBwSW5mbyA9IHtcbiAgaWQ6IG51bWJlcjsgLy8gdWludDY0X3RcbiAgY2hhbm5lbDogc3RyaW5nOyAvLyBjaGFyKlxuICBwYWNrYWdlOiBzdHJpbmc7IC8vIGNoYXIqXG4gIG5hbWU6IHN0cmluZzsgLy8gY2hhcipcbiAgdmVyc2lvbjogc3RyaW5nOyAvLyBjaGFyKlxuICBsYW5ndWFnZTogc3RyaW5nOyAvLyBjaGFyKlxuICByZWdpb246IHN0cmluZzsgLy8gY2hhcipcbn1cblxuZXhwb3J0IHR5cGUgRHJMb2dnZXIgPSB7XG4gIHRyYWNlPzogKG1lc3NhZ2U6IHN0cmluZykgPT4gdm9pZDtcbiAgZGVidWc/OiAobWVzc2FnZTogc3RyaW5nKSA9PiB2b2lkO1xuICBpbmZvPzogKG1lc3NhZ2U6IHN0cmluZykgPT4gdm9pZDtcbiAgd2Fybj86IChtZXNzYWdlOiBzdHJpbmcpID0+IHZvaWQ7XG4gIGVycm9yPzogKG1lc3NhZ2U6IHN0cmluZykgPT4gdm9pZDtcbn1cblxuZXhwb3J0IHR5cGUgRHJDb25maWcgPSB7XG4gIGZvcmNlOiBib29sZWFuO1xuICBuZXdVc2VyTW9kZTogYm9vbGVhbjtcbiAgY2FjaGVQYXRoOiBzdHJpbmc7XG4gIHJlZ2lzdHJ5VXJsOiBzdHJpbmc7XG4gIGFjdGl2ZVVybDogc3RyaW5nO1xuICBsb2dnZXI/OiBEckxvZ2dlcjtcbn1cblxuZXhwb3J0IGNsYXNzIERldmljZVJlZ2lzdGVyIHtcbiAgcHJpdmF0ZSBhcHBJbmZvOiBEckFwcEluZm87XG5cbiAgcHJpdmF0ZSBmb3JjZTogYm9vbGVhbjtcbiAgcHJpdmF0ZSBuZXdVc2VyTW9kZTogYm9vbGVhbjtcbiAgcHJpdmF0ZSBjYWNoZVBhdGg6IHN0cmluZztcblxuICBwcml2YXRlIHJlZ2lzdHJ5VXJsOiBzdHJpbmc7XG4gIHByaXZhdGUgYWN0aXZlVXJsOiBzdHJpbmc7XG5cbiAgcHJpdmF0ZSBsb2dnZXI6IERyTG9nZ2VyO1xuXG4gIGNvbnN0cnVjdG9yKGFwcEluZm86IERyQXBwSW5mbywgY29uZmlnOiBEckNvbmZpZykge1xuICAgIHRoaXMuYXBwSW5mbyA9IGFwcEluZm87XG5cbiAgICB0aGlzLmZvcmNlID0gY29uZmlnLmZvcmNlID8/IGZhbHNlO1xuICAgIHRoaXMubmV3VXNlck1vZGUgPSBjb25maWcubmV3VXNlck1vZGU/PyBmYWxzZTtcbiAgICB0aGlzLmNhY2hlUGF0aCA9IGNvbmZpZy5jYWNoZVBhdGg7XG4gICAgdGhpcy5yZWdpc3RyeVVybCA9IGNvbmZpZy5yZWdpc3RyeVVybDtcbiAgICB0aGlzLmFjdGl2ZVVybCA9IGNvbmZpZy5hY3RpdmVVcmw7XG4gICAgdGhpcy5sb2dnZXIgPSBjb25maWcubG9nZ2VyID8/IHt9O1xuXG4gICAgdGhpcy5sb2dnZXI/LmRlYnVnICYmIHRoaXMubG9nZ2VyPy5kZWJ1Zz8uKGBbRGV2aWNlUmVnaXN0ZXJdIChjb25zdHJ1Y3Rvcikgc3RhcnQgd2l0aCBhcHBJbmZvOiAke0pTT04uc3RyaW5naWZ5KGFwcEluZm8pfSwgY29uZmlnOiAke0pTT04uc3RyaW5naWZ5KGNvbmZpZyl9YCk7XG4gICAgdGhpcy5sb2dnZXI/LnRyYWNlICYmIHRoaXMubG9nZ2VyPy50cmFjZT8uKGBbRGV2aWNlUmVnaXN0ZXJdIChjb25zdHJ1Y3RvcikgcGFyc2VkIGNvbmZpZzogZm9yY2U6ICR7dGhpcy5mb3JjZX0sIG5ld1VzZXJNb2RlOiAke3RoaXMubmV3VXNlck1vZGV9LCBjYWNoZVBhdGg6ICR7dGhpcy5jYWNoZVBhdGh9LCByZWdpc3RyeVVybDogJHt0aGlzLnJlZ2lzdHJ5VXJsfSwgYWN0aXZlVXJsOiAke3RoaXMuYWN0aXZlVXJsfWApO1xuICB9XG5cbiAgcHVibGljIHNldEZvcmNlKGZvcmNlOiBib29sZWFuKSB7XG4gICAgdGhpcy5mb3JjZSA9IGZvcmNlO1xuICB9XG5cbiAgcHVibGljIHNldE5ld1VzZXJNb2RlKG5ld1VzZXJNb2RlOiBib29sZWFuKSB7XG4gICAgdGhpcy5uZXdVc2VyTW9kZSA9IG5ld1VzZXJNb2RlO1xuICB9XG5cbiAgcHVibGljIHNldENhY2hlUGF0aChjYWNoZVBhdGg6IHN0cmluZykge1xuICAgIHRoaXMuY2FjaGVQYXRoID0gY2FjaGVQYXRoO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBsb2FkQ2FjaGUoKTogUHJvbWlzZTxEckNhY2hlSW5mbyB8IHVuZGVmaW5lZD4ge1xuICAgIHRoaXMubG9nZ2VyPy50cmFjZSAmJiB0aGlzLmxvZ2dlcj8udHJhY2U/LihgW0RldmljZVJlZ2lzdGVyXSAobG9hZENhY2hlKSB3aXRoIGZvcmNlOiAke3RoaXMuZm9yY2V9LCBuZXdVc2VyTW9kZTogJHt0aGlzLm5ld1VzZXJNb2RlfSwgY2FjaGVQYXRoOiAke3RoaXMuY2FjaGVQYXRofWApO1xuICAgIGNvbnN0IHV1aWQgPSBEUl9UQVJHRVRfUExBVEZPUk0gPT09IERyUGxhdGZvcm0uTUFDPyAoYXdhaXQgbWVtb2l6ZWRHZXRTeXN0ZW0oKSkudXVpZCA6IChhd2FpdCBtZW1vaXplZEdldERpc2tTZXJpYWwoKSk7XG4gICAgdGhpcy5sb2dnZXI/LnRyYWNlICYmIHRoaXMubG9nZ2VyPy50cmFjZT8uKGBbRGV2aWNlUmVnaXN0ZXJdIChsb2FkQ2FjaGUpIHV1aWQ6ICR7dXVpZH1gKTtcbiAgICBjb25zdCBjYWNoZSA9IGF3YWl0IGRyQ2FjaGVMb2FkKHRoaXMuYXBwSW5mby5uYW1lLCB0aGlzLmNhY2hlUGF0aCk7XG4gICAgaWYgKGNhY2hlKSB7XG4gICAgICB0aGlzLmxvZ2dlcj8udHJhY2UgJiYgdGhpcy5sb2dnZXI/LnRyYWNlPy4oYFtEZXZpY2VSZWdpc3Rlcl0gKGxvYWRDYWNoZSkgZ2V0IGNhaGNlLmApO1xuICAgICAgaWYgKGNhY2hlLmRldmljZUlkID4gMG4gJiYgY2FjaGUuaW5zdGFsbElkICE9PSAwbikge1xuICAgICAgICBpZiAoY2FjaGUudXVpZCA9PT0gdXVpZCkge1xuICAgICAgICAgIHRoaXMubG9nZ2VyPy5pbmZvICYmIHRoaXMubG9nZ2VyPy5pbmZvPy4oYFtEZXZpY2VSZWdpc3Rlcl0gKGxvYWRDYWNoZSkgY2FjaGUgdXVpZCBtYXRjaCwgcmV0dXJuIGNhY2hlICR7Y2FjaGUudG9TdHJpbmcoKX0uYCk7XG4gICAgICAgICAgcmV0dXJuIGNhY2hlO1xuICAgICAgICB9XG4gICAgICBcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHN0b3JlQ2FjaGUoY2FjaGU6IERyQ2FjaGVJbmZvKSB7XG4gICAgdGhpcy5sb2dnZXI/LmRlYnVnICYmIHRoaXMubG9nZ2VyPy5kZWJ1Zz8uKGBbRGV2aWNlUmVnaXN0ZXJdIChzdG9yZUNhY2hlKTogJHtjYWNoZS50b1N0cmluZygpfWApO1xuICAgIGF3YWl0IGRyQ2FjaGVTdG9yZShjYWNoZSwgdGhpcy5hcHBJbmZvLm5hbWUsIHRoaXMuY2FjaGVQYXRoKTtcbiAgICB0aGlzLmxvZ2dlcj8uaW5mbyAmJiB0aGlzLmxvZ2dlcj8uaW5mbz8uKGBbRGV2aWNlUmVnaXN0ZXJdIChzdG9yZUNhY2hlKSBkb25lLmApO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZW5SZWdpc3RyeVJlcXVlc3RVcmwoKSB7XG4gICAgdGhpcy5sb2dnZXI/LnRyYWNlICYmIHRoaXMubG9nZ2VyPy50cmFjZT8uKGBbRGV2aWNlUmVnaXN0ZXJdIChnZW5SZWdpc3RyeVJlcXVlc3RVcmwpIHN0YXJ0LmApO1xuICAgIGNvbnN0IFtzeXN0ZW0sIG9zUmVsZWFzZSwgZGlza1NlcmlhbF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICBtZW1vaXplZEdldFN5c3RlbSgpLFxuICAgICAgbWVtb2l6ZWRHZXRPc1JlbGVhc2UoKSxcbiAgICAgIERSX1RBUkdFVF9QTEFURk9STSA9PT0gRHJQbGF0Zm9ybS5NQUM/IFByb21pc2UucmVzb2x2ZSgnJykgOiBtZW1vaXplZEdldERpc2tTZXJpYWwoKSxcbiAgICBdKTtcbiAgICBjb25zdCBwYXJhbXM6IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge1xuICAgICAgYWlkOiB0aGlzLmFwcEluZm8uaWQsXG4gICAgICBjaGFubmVsOiB0aGlzLmFwcEluZm8uY2hhbm5lbCxcbiAgICAgIG9zOiBPU19OQU1FLFxuICAgICAgb3NfdmVyc2lvbjogb3NSZWxlYXNlLFxuICAgICAgZGV2aWNlX3BsYXRmb3JtOiBERVZJQ0VfUExBVEZPUk0sXG4gICAgICB2ZXJzaW9uX2NvZGU6IHRoaXMuYXBwSW5mby52ZXJzaW9uLFxuICAgIH07XG4gICAgaWYgKERSX1RBUkdFVF9QTEFURk9STSA9PT0gRHJQbGF0Zm9ybS5NQUMpIHtcbiAgICAgIHBhcmFtc1snbWFjb3NfdXVpZCddID0gc3lzdGVtLnV1aWQ7XG4gICAgICBwYXJhbXNbJ21hY29zX3NlcmlhbCddID0gc3lzdGVtLnNlcmlhbDtcbiAgICB9IGVsc2Uge1xuICAgICAgcGFyYW1zWydwY191dWlkJ10gPSBzeXN0ZW0udXVpZDtcbiAgICAgIHBhcmFtc1sncGNfc2VyaWFsJ10gPSBkaXNrU2VyaWFsO1xuICAgIH1cbiAgICBjb25zdCB1cmwgPSBgJHt0aGlzLnJlZ2lzdHJ5VXJsfT8ke1xuICAgICAgT2JqZWN0LmtleXMocGFyYW1zKS5tYXAoa2V5ID0+IGAke2tleX09JHtwYXJhbXNba2V5XX1gKS5qb2luKCcmJylcbiAgICB9YDtcbiAgICB0aGlzLmxvZ2dlcj8uZGVidWcgJiYgdGhpcy5sb2dnZXI/LmRlYnVnPy4oYFtEZXZpY2VSZWdpc3Rlcl0gKGdlblJlZ2lzdHJ5UmVxdWVzdFVybCkgdXJsOiAke3VybH1gKTtcbiAgICByZXR1cm4gdXJsO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZW5SZWdpc3RyeVJlcXVlc3RCb2R5KCkge1xuICAgIHRoaXMubG9nZ2VyPy50cmFjZSAmJiB0aGlzLmxvZ2dlcj8udHJhY2U/LihgW0RldmljZVJlZ2lzdGVyXSAoZ2VuUmVnaXN0cnlSZXF1ZXN0Qm9keSkgc3RhcnQuYCk7XG4gICAgY29uc3QgdGltZVpvbmVJbmZvID0gZ2V0VGltZVpvbmVJbmZvKCk7XG4gICAgY29uc3QgW1xuICAgICAgbWFjQWRkcmVzcyxcbiAgICAgIG9zUmVsZWFzZSxcbiAgICAgIHN5c3RlbSxcbiAgICAgIHJlc29sdXRpb24sXG4gICAgICBkaXNrU2VyaWFsLFxuICAgIF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICBtZW1vaXplZEdldE1hY0FkZHJlc3MoKSxcbiAgICAgIG1lbW9pemVkR2V0T3NSZWxlYXNlKCksXG4gICAgICBtZW1vaXplZEdldFN5c3RlbSgpLFxuICAgICAgbWVtb2l6ZWRHZXRHcmFwaGljUmVzb2x1dGlvbigpLFxuICAgICAgRFJfVEFSR0VUX1BMQVRGT1JNID09PSBEclBsYXRmb3JtLk1BQyA/IFByb21pc2UucmVzb2x2ZSgnJykgOiBtZW1vaXplZEdldERpc2tTZXJpYWwoKSxcbiAgICBdKTtcbiAgICBjb25zdCBoZWFkZXI6IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge1xuICAgICAgZGV2aWNlX2lkOiAwLFxuICAgICAgaW5zdGFsbF9pZDogMCxcbiAgICAgIG9zOiBPU19OQU1FLFxuICAgICAgZGV2aWNlX3BsYXRmb3JtOiBERVZJQ0VfUExBVEZPUk0sXG4gICAgICBzZGtfdmVyc2lvbjogU0RLX1ZFUlNJT05fTkFNRSxcbiAgICAgIHNka192ZXJzaW9uX2NvZGU6IFNES19WRVJTSU9OX0NPREUsXG4gICAgICBhaWQ6IHRoaXMuYXBwSW5mby5pZCxcbiAgICAgIG1jOiBtYWNBZGRyZXNzLFxuICAgICAgY2hhbm5lbDogdGhpcy5hcHBJbmZvLmNoYW5uZWwsXG4gICAgICBwYWNrYWdlOiB0aGlzLmFwcEluZm8ucGFja2FnZSxcbiAgICAgIGxhbmd1YWdlOiB0aGlzLmFwcEluZm8ubGFuZ3VhZ2UsXG4gICAgICBhcHBfdmVyc2lvbjogdGhpcy5hcHBJbmZvLnZlcnNpb24sXG4gICAgICBvc192ZXJzaW9uOiBvc1JlbGVhc2UsXG4gICAgICBkZXZpY2VfbW9kZWw6IHN5c3RlbS5tb2RlbCxcbiAgICAgIHRpbWVfem9uZTogdGltZVpvbmVJbmZvLnRpbWVab25lLFxuICAgICAgdHpfbmFtZTogdGltZVpvbmVJbmZvLnR6TmFtZSxcbiAgICAgIHR6X29mZnNldDogdGltZVpvbmVJbmZvLnR6T2Zmc2V0LFxuICAgICAgcmVzb2x1dGlvbixcbiAgICAgIGFwcF9yZWdpb246IHRoaXMuYXBwSW5mby5yZWdpb24sXG4gICAgICBhcHBfbGFuZ3VhZ2U6IHRoaXMuYXBwSW5mby5sYW5ndWFnZSxcbiAgICAgIGRpc3BsYXlfbmFtZTogdGhpcy5hcHBJbmZvLm5hbWUsXG4gICAgICBuZXdfdXNlcl9tb2RlOiBOdW1iZXIodGhpcy5uZXdVc2VyTW9kZSksXG4gICAgfVxuICAgIGlmIChEUl9UQVJHRVRfUExBVEZPUk0gPT09IERyUGxhdGZvcm0uTUFDKSB7XG4gICAgICBoZWFkZXJbJ21hY29zX3V1aWQnXSA9IHN5c3RlbS51dWlkO1xuICAgICAgaGVhZGVyWydtYWNvc19zZXJpYWwnXSA9IHN5c3RlbS5zZXJpYWw7XG4gICAgICBoZWFkZXJbJ3NrdSddID0gc3lzdGVtLnNrdTtcbiAgICB9IGVsc2Uge1xuICAgICAgaGVhZGVyWydwY191dWlkJ10gPSBzeXN0ZW0udXVpZDtcbiAgICAgIGhlYWRlclsncGNfc2VyaWFsJ10gPSBkaXNrU2VyaWFsO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBib2R5ID0ge1xuICAgICAgaGVhZGVyLFxuICAgICAgX2dlbl90aW1lOiBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxMDAwKSxcbiAgICAgIG1hZ2ljX3RhZzogJ3NzX2FwcF9sb2cnLFxuICAgIH1cbiBcbiAgICB0aGlzLmxvZ2dlcj8uZGVidWcgJiYgdGhpcy5sb2dnZXI/LmRlYnVnPy4oYFtEZXZpY2VSZWdpc3Rlcl0gKGdlblJlZ2lzdHJ5UmVxdWVzdEJvZHkpIGhlYWRlcjogJHtKU09OLnN0cmluZ2lmeShoZWFkZXIpfSwgYm9keTogJHtKU09OLnN0cmluZ2lmeShib2R5KX1gKTtcbiAgICByZXR1cm4gYm9keTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2VuQWN0aXZlUmVxdWVzdFVybChkaWQ6IGJpZ2ludCwgaWlkOiBiaWdpbnQpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHRoaXMubG9nZ2VyPy50cmFjZSAmJiB0aGlzLmxvZ2dlcj8udHJhY2U/LihgW0RldmljZVJlZ2lzdGVyXSAoZ2VuQWN0aXZlUmVxdWVzdFVybCkgc3RhcnQuYCk7XG4gICAgY29uc3QgW3N5c3RlbSwgZGlza1NlcmlhbF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICBtZW1vaXplZEdldFN5c3RlbSgpLFxuICAgICAgRFJfVEFSR0VUX1BMQVRGT1JNID09PSBEclBsYXRmb3JtLk1BQz8gUHJvbWlzZS5yZXNvbHZlKCcnKSA6IG1lbW9pemVkR2V0RGlza1NlcmlhbCgpLFxuICAgIF0pO1xuICAgIGNvbnN0IHBhcmFtczogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gPSB7XG4gICAgICBhaWQ6IHRoaXMuYXBwSW5mby5pZCxcbiAgICAgIGFwcF9uYW1lOiB0aGlzLmFwcEluZm8ubmFtZSxcbiAgICAgIHZlcnNpb25fY29kZTogdGhpcy5hcHBJbmZvLnZlcnNpb24sXG4gICAgICBjaGFubmVsOiB0aGlzLmFwcEluZm8uY2hhbm5lbCxcbiAgICAgIG9zOiBPU19OQU1FLFxuICAgICAgZGV2aWNlX3BsYXRmb3JtOiBERVZJQ0VfUExBVEZPUk0sXG4gICAgICBkZXZpY2VfaWQ6IGRpZC50b1N0cmluZygpLFxuICAgICAgaWlkOiBpaWQudG9TdHJpbmcoKSxcbiAgICB9XG4gICAgaWYgKERSX1RBUkdFVF9QTEFURk9STSA9PT0gRHJQbGF0Zm9ybS5NQUMpIHtcbiAgICAgIHBhcmFtc1snbWFjb3NfdXVpZCddID0gc3lzdGVtLnV1aWQ7XG4gICAgICBwYXJhbXNbJ21hY29zX3NlcmlhbCddID0gc3lzdGVtLnNlcmlhbDtcbiAgICB9IGVsc2Uge1xuICAgICAgcGFyYW1zWydwY191dWlkJ10gPSBzeXN0ZW0udXVpZDtcbiAgICAgIHBhcmFtc1sncGNfc2VyaWFsJ10gPSBkaXNrU2VyaWFsO1xuICAgIH1cblxuICAgIGNvbnN0IHVybCA9IGAke3RoaXMuYWN0aXZlVXJsfT8ke1xuICAgICAgT2JqZWN0LmtleXMocGFyYW1zKS5tYXAoa2V5ID0+IGAke2tleX09JHtwYXJhbXNba2V5XX1gKS5qb2luKCcmJylcbiAgICB9YDtcbiAgICB0aGlzLmxvZ2dlcj8uZGVidWcgJiYgdGhpcy5sb2dnZXI/LmRlYnVnPy4oYFtEZXZpY2VSZWdpc3Rlcl0gKGdlbkFjdGl2ZVJlcXVlc3RVcmwpIHVybDogJHt1cmx9YCk7XG4gICAgcmV0dXJuIHVybDtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXREaWRGcm9tQ2FjaGUoKTogUHJvbWlzZTx7IGRldmljZUlkOiBiaWdpbnQ7IGluc3RhbGxJZDogYmlnaW50OyB9PiB7XG4gICAgdGhpcy5sb2dnZXI/LnRyYWNlICYmIHRoaXMubG9nZ2VyPy50cmFjZT8uKGBbRGV2aWNlUmVnaXN0ZXJdIChnZXREaWRGcm9tQ2FjaGUpIHN0YXJ0LmApO1xuICAgIGNvbnN0IGNhY2hlID0gYXdhaXQgdGhpcy5sb2FkQ2FjaGUoKTtcbiAgICB0aGlzLmxvZ2dlcj8uaW5mbyAmJiB0aGlzLmxvZ2dlcj8uaW5mbz8uKGBbRGV2aWNlUmVnaXN0ZXJdIChnZXREaWRGcm9tQ2FjaGUpIGNhY2hlOiAke2NhY2hlPy50b1N0cmluZygpfWApO1xuICAgIHJldHVybiB7XG4gICAgICBkZXZpY2VJZDogY2FjaGU/LmRldmljZUlkID8/IDBuLFxuICAgICAgaW5zdGFsbElkOiBjYWNoZT8uaW5zdGFsbElkID8/IDBuLFxuICAgIH07XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgcmVnaXN0cnkoKSB7XG4gICAgdGhpcy5sb2dnZXI/LnRyYWNlICYmIHRoaXMubG9nZ2VyPy50cmFjZT8uKGBbRGV2aWNlUmVnaXN0ZXJdIChyZWdpc3RyeSkgc3RhcnQuYCk7XG4gICAgY29uc3QgW3VybCwgYm9keV0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICB0aGlzLmdlblJlZ2lzdHJ5UmVxdWVzdFVybCgpLFxuICAgICAgdGhpcy5nZW5SZWdpc3RyeVJlcXVlc3RCb2R5KCksXG4gICAgXSk7XG4gICAgY29uc3QganNvbiA9IEpTT04uc3RyaW5naWZ5KGJvZHkpO1xuXG4gICAgdGhpcy5sb2dnZXI/LmRlYnVnICYmIHRoaXMubG9nZ2VyPy5kZWJ1Zz8uKGBbRGV2aWNlUmVnaXN0ZXJdIChyZWdpc3RyeSkgdXJsOiAke3VybH0sIGJvZHk6ICR7anNvbn1gKTtcblxuICAgIGNvbnN0IGJ1ZiA9IG5ldyBVaW50OEFycmF5KGF3YWl0IHpsaWIuZ3ppcFN5bmMoQnVmZmVyLmZyb20oanNvbiwgJ3V0Zi04JykpKTtcbiAgICBjb25zdCBkZWNEYXRhID0gYXBwbG9nRGVjb3JhdGVkKGJ1Zik7XG5cbiAgICBpZiAoZGVjRGF0YS5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMubG9nZ2VyPy5lcnJvciAmJiB0aGlzLmxvZ2dlcj8uZXJyb3I/LihgW0RldmljZVJlZ2lzdGVyXSAocmVnaXN0cnkpIGFwcGxvZ0RlY29yYXRlZCBmYWlsZWQuYCk7XG4gICAgICByZXR1cm4geyBkZXZpY2VJZDogMG4sIGluc3RhbGxJZDogMG4gfTtcbiAgICB9XG5cbiAgICB0aGlzLmxvZ2dlcj8udHJhY2UgJiYgdGhpcy5sb2dnZXI/LnRyYWNlPy4oYFtEZXZpY2VSZWdpc3Rlcl0gKHJlZ2lzdHJ5KSBkZWNEYXRhIHN1Y2Nlc3MuYCk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBCdWZmZXIuZnJvbShkZWNEYXRhKSxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgJ1VzZXItQWdlbnQnOiAnVFROZXR3b3JrIFBDJyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLmxvZ2dlcj8uZGVidWcgJiYgdGhpcy5sb2dnZXI/LmRlYnVnPy4oYFtEZXZpY2VSZWdpc3Rlcl0gKHJlZ2lzdHJ5KSByZXM6ICR7cmVzLnN0YXR1c31gKTtcbiAgXG4gICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCByZXMudGV4dCgpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBKU09OQmlnLnBhcnNlKHRleHQpO1xuXG4gICAgICAgIHRoaXMubG9nZ2VyPy5pbmZvICYmIHRoaXMubG9nZ2VyPy5pbmZvPy4oYFtEZXZpY2VSZWdpc3Rlcl0gKHJlZ2lzdHJ5KSByZXN1bHQ6ICR7dGV4dH1gKTtcbiAgXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZGV2aWNlSWQ6IEJpZ0ludChyZXN1bHQuZGV2aWNlX2lkID8/IDApLFxuICAgICAgICAgIGluc3RhbGxJZDogQmlnSW50KHJlc3VsdC5pbnN0YWxsX2lkPz8gMCksXG4gICAgICAgICAgaXNOZXdVc2VyOiAhIXJlc3VsdC5uZXdfdXNlcixcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2goZSkge1xuICAgICAgdGhpcy5sb2dnZXI/LmVycm9yICYmIHRoaXMubG9nZ2VyPy5lcnJvcj8uKGBbRGV2aWNlUmVnaXN0ZXJdIChyZWdpc3RyeSkgZmFpbGVkOiAke2V9YCk7XG4gICAgfVxuXG4gICAgdGhpcy5sb2dnZXI/LmVycm9yICYmIHRoaXMubG9nZ2VyPy5lcnJvcj8uKGBbRGV2aWNlUmVnaXN0ZXJdIChyZWdpc3RyeSkgZmFpbGVkLmApO1xuICAgIHJldHVybiB7IGRldmljZUlkOiAwbiwgaW5zdGFsbElkOiAwbiwgaXNOZXdVc2VyOiBmYWxzZSAgfTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBhY3RpdmUoZGV2aWNlSWQ6IGJpZ2ludCwgaW5zdGFsbElkOiBiaWdpbnQpOiBQcm9taXNlPHsgaXNBY3RpdmVTdWNjZXNzOiBib29sZWFuOyBpc0FjdGl2YXRlZDogYm9vbGVhbjsgfT4ge1xuICAgIHRoaXMubG9nZ2VyPy50cmFjZSAmJiB0aGlzLmxvZ2dlcj8udHJhY2U/LihgW0RldmljZVJlZ2lzdGVyXSAoYWN0aXZlKSBzdGFydC5gKTtcbiAgICBjb25zdCB1cmwgPSBhd2FpdCB0aGlzLmdlbkFjdGl2ZVJlcXVlc3RVcmwoZGV2aWNlSWQsIGluc3RhbGxJZCk7XG4gICAgdGhpcy5sb2dnZXI/LmRlYnVnICYmIHRoaXMubG9nZ2VyPy5kZWJ1Zz8uKGBbRGV2aWNlUmVnaXN0ZXJdIChhY3RpdmUpIHVybDogJHt1cmx9YCk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsLCB7IG1ldGhvZDogJ1BPU1QnLCBoZWFkZXJzOiB7ICdVc2VyLUFnZW50JzogJ1RUTmV0d29yayBQQycgfX0pO1xuICAgICAgdGhpcy5sb2dnZXI/LmRlYnVnICYmIHRoaXMubG9nZ2VyPy5kZWJ1Zz8uKGBbRGV2aWNlUmVnaXN0ZXJdIChhY3RpdmUpIHJlczogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSAoYXdhaXQgcmVzLmpzb24oKSBhcyB7XG4gICAgICAgICAgbWVzc2FnZTogc3RyaW5nO1xuICAgICAgICAgIGRhdGE/OiB7XG4gICAgICAgICAgICBpc19hY3RpdmF0ZWQ6IGJvb2xlYW47XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5sb2dnZXI/LmluZm8gJiYgdGhpcy5sb2dnZXI/LmluZm8/LihgW0RldmljZVJlZ2lzdGVyXSAoYWN0aXZlKSByZXN1bHQ6ICR7SlNPTi5zdHJpbmdpZnkocmVzdWx0KX1gKTtcbiAgICAgICAgY29uc3QgaXNBY3RpdmVTdWNjZXNzID0gcmVzdWx0Py5tZXNzYWdlID09PSAnc3VjY2Vzcyc7XG4gICAgICAgIGNvbnN0IGlzQWN0aXZhdGVkID0gISFyZXN1bHQ/LmRhdGE/LmlzX2FjdGl2YXRlZDtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBpc0FjdGl2ZVN1Y2Nlc3MsXG4gICAgICAgICAgaXNBY3RpdmF0ZWQsXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgIHRoaXMubG9nZ2VyPy5lcnJvciAmJiB0aGlzLmxvZ2dlcj8uZXJyb3I/LihgW0RldmljZVJlZ2lzdGVyXSAoYWN0aXZlKSBmYWlsZWQ6ICR7ZX1gKTtcbiAgICB9XG4gICAgdGhpcy5sb2dnZXI/LmVycm9yICYmIHRoaXMubG9nZ2VyPy5lcnJvcj8uKGBbRGV2aWNlUmVnaXN0ZXJdIChhY3RpdmUpIGZhaWxlZC5gKTtcbiAgICByZXR1cm4ge1xuICAgICAgaXNBY3RpdmVTdWNjZXNzOiBmYWxzZSxcbiAgICAgIGlzQWN0aXZhdGVkOiBmYWxzZSxcbiAgICB9O1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHJlZ2lzdHJ5QW5kQWN0aXZlKCkge1xuICAgIHRoaXMubG9nZ2VyPy50cmFjZSAmJiB0aGlzLmxvZ2dlcj8udHJhY2U/LihgW0RldmljZVJlZ2lzdGVyXSAocmVnaXN0cnlBbmRBY3RpdmUpIHN0YXJ0LmApO1xuICAgIGlmICghdGhpcy5mb3JjZSAmJiAhdGhpcy5uZXdVc2VyTW9kZSkge1xuICAgICAgY29uc3QgY2FjaGUgPSBhd2FpdCB0aGlzLmxvYWRDYWNoZSgpO1xuICAgICAgaWYgKGNhY2hlKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyPy5kZWJ1ZyAmJiB0aGlzLmxvZ2dlcj8uZGVidWc/LihgW0RldmljZVJlZ2lzdGVyXSAocmVnaXN0cnlBbmRBY3RpdmUpIGNhY2hlOiAke2NhY2hlLnRvU3RyaW5nKCl9YCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZGV2aWNlSWQ6IGNhY2hlLmRldmljZUlkLFxuICAgICAgICAgIGluc3RhbGxJZDogY2FjaGUuaW5zdGFsbElkLFxuICAgICAgICAgIGlzQWN0aXZlU3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgaXNBY3RpdmF0ZWQ6IGZhbHNlLFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5sb2dnZXI/LnRyYWNlICYmIHRoaXMubG9nZ2VyPy50cmFjZT8uKGBbRGV2aWNlUmVnaXN0ZXJdIChyZWdpc3RyeUFuZEFjdGl2ZSkgcmVnaXN0cnkgc3RhcnQuYCk7XG4gICAgY29uc3QgcmVnaXN0cnlSZXN1bHQgPSBhd2FpdCB0aGlzLnJlZ2lzdHJ5KCk7XG4gICAgdGhpcy5sb2dnZXI/LmRlYnVnICYmIHRoaXMubG9nZ2VyPy5kZWJ1Zz8uKGBbRGV2aWNlUmVnaXN0ZXJdIChyZWdpc3RyeUFuZEFjdGl2ZSkgcmVnaXN0cnkgcmVzdWx0OiBkaWQ6ICR7cmVnaXN0cnlSZXN1bHQuZGV2aWNlSWR9LCBpaWQ6ICR7cmVnaXN0cnlSZXN1bHQuaW5zdGFsbElkfWApO1xuXG4gICAgaWYgKHJlZ2lzdHJ5UmVzdWx0LmRldmljZUlkID09PSAwbiB8fCByZWdpc3RyeVJlc3VsdC5pbnN0YWxsSWQgPT09IDBuKSB7XG4gICAgICB0aGlzLmxvZ2dlcj8uZXJyb3IgJiYgdGhpcy5sb2dnZXI/LmVycm9yPy4oYFtEZXZpY2VSZWdpc3Rlcl0gKHJlZ2lzdHJ5QW5kQWN0aXZlKSByZWdpc3RyeSBmYWlsZWQuYCk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkZXZpY2VJZDogcmVnaXN0cnlSZXN1bHQuZGV2aWNlSWQsXG4gICAgICAgIGluc3RhbGxJZDogcmVnaXN0cnlSZXN1bHQuaW5zdGFsbElkLFxuICAgICAgICBpc0FjdGl2ZVN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBpc0FjdGl2YXRlZDogZmFsc2UsXG4gICAgICB9O1xuICAgIH1cblxuICAgIHRoaXMubG9nZ2VyPy50cmFjZSAmJiB0aGlzLmxvZ2dlcj8udHJhY2U/LihgW0RldmljZVJlZ2lzdGVyXSAocmVnaXN0cnlBbmRBY3RpdmUpIGFjdGl2ZSBzdGFydC5gKTtcbiAgICBpZiAoIXRoaXMubmV3VXNlck1vZGUgJiYgIXJlZ2lzdHJ5UmVzdWx0LmlzTmV3VXNlcikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGV2aWNlSWQ6IHJlZ2lzdHJ5UmVzdWx0LmRldmljZUlkLFxuICAgICAgICBpbnN0YWxsSWQ6IHJlZ2lzdHJ5UmVzdWx0Lmluc3RhbGxJZCxcbiAgICAgICAgaXNBY3RpdmVTdWNjZXNzOiB0cnVlLFxuICAgICAgICBpc0FjdGl2YXRlZDogdHJ1ZSxcbiAgICAgIH07XG5cbiAgICB9XG5cbiAgICBjb25zdCBhY3RpdmVSZXN1bHQgPSBhd2FpdCB0aGlzLmFjdGl2ZShyZWdpc3RyeVJlc3VsdC5kZXZpY2VJZCwgcmVnaXN0cnlSZXN1bHQuaW5zdGFsbElkKTtcbiAgICB0aGlzLmxvZ2dlcj8uZGVidWcgJiYgdGhpcy5sb2dnZXI/LmRlYnVnPy4oYFtEZXZpY2VSZWdpc3Rlcl0gKHJlZ2lzdHJ5QW5kQWN0aXZlKSBhY3RpdmUgcmVzdWx0OiBpc0FjdGl2ZVN1Y2Nlc3M6ICR7YWN0aXZlUmVzdWx0LmlzQWN0aXZlU3VjY2Vzc30sIGlzQWN0aXZhdGVkOiAke2FjdGl2ZVJlc3VsdC5pc0FjdGl2YXRlZH1gKTtcbiAgICBpZiAoYWN0aXZlUmVzdWx0LmlzQWN0aXZlU3VjY2Vzcykge1xuICAgICAgY29uc3QgY2FjaGUgPSBuZXcgRHJDYWNoZUluZm8oXG4gICAgICAgIERyQ2FjaGVJbmZvLkRSX0NBQ0hFX1ZFUlNJT04sXG4gICAgICAgIHJlZ2lzdHJ5UmVzdWx0LmRldmljZUlkLFxuICAgICAgICByZWdpc3RyeVJlc3VsdC5pbnN0YWxsSWQsXG4gICAgICAgIGFjdGl2ZVJlc3VsdC5pc0FjdGl2ZVN1Y2Nlc3MsXG4gICAgICAgIGFjdGl2ZVJlc3VsdC5pc0FjdGl2YXRlZCxcbiAgICAgICAgRFJfVEFSR0VUX1BMQVRGT1JNID09PSBEclBsYXRmb3JtLk1BQz8gKGF3YWl0IG1lbW9pemVkR2V0U3lzdGVtKCkpLnV1aWQgOiAoYXdhaXQgbWVtb2l6ZWRHZXREaXNrU2VyaWFsKCkpLFxuICAgICAgKTtcbiAgICAgIHRoaXMuc3RvcmVDYWNoZShjYWNoZSk7XG4gICAgICB0aGlzLmxvZ2dlcj8uZGVidWcgJiYgdGhpcy5sb2dnZXI/LmRlYnVnPy4oYFtEZXZpY2VSZWdpc3Rlcl0gKHJlZ2lzdHJ5QW5kQWN0aXZlKSBzdG9yZSBjYWNoZTogJHtjYWNoZS50b1N0cmluZygpfWApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmxvZ2dlcj8uZXJyb3IgJiYgdGhpcy5sb2dnZXI/LmVycm9yPy4oYFtEZXZpY2VSZWdpc3Rlcl0gKHJlZ2lzdHJ5QW5kQWN0aXZlKSBhY3RpdmUgZmFpbGVkLmApO1xuICAgIH1cblxuICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgIGRldmljZUlkOiByZWdpc3RyeVJlc3VsdC5kZXZpY2VJZCxcbiAgICAgIGluc3RhbGxJZDogcmVnaXN0cnlSZXN1bHQuaW5zdGFsbElkLFxuICAgICAgaXNBY3RpdmVTdWNjZXNzOiBhY3RpdmVSZXN1bHQuaXNBY3RpdmVTdWNjZXNzLFxuICAgICAgaXNBY3RpdmF0ZWQ6IGFjdGl2ZVJlc3VsdC5pc0FjdGl2YXRlZCxcbiAgICB9O1xuXG4gICAgdGhpcy5sb2dnZXI/LmRlYnVnICYmIHRoaXMubG9nZ2VyPy5kZWJ1Zz8uKGBbRGV2aWNlUmVnaXN0ZXJdIChyZWdpc3RyeUFuZEFjdGl2ZSkgcmVzdWx0OiAke0pTT05CaWcuc3RyaW5naWZ5KHJlc3VsdCl9YCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxufVxuXG5cbiJdLCJuYW1lcyI6WyJkckNhY2hlTG9hZCIsImRyQ2FjaGVTdG9yZSIsImRyQ2FjaGVMb2FkTWFjIiwiZHJDYWNoZUxvYWRXaW4iLCJkckNhY2hlTG9hZExpbnV4IiwiZHJDYWNoZVN0b3JlTWFjIiwiZHJDYWNoZVN0b3JlV2luIiwiZHJDYWNoZVN0b3JlTGludXgiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQU0sU0FBVSxPQUFPLENBQUksSUFBYSxFQUFBO0lBQ3RDLElBQUksS0FBSyxHQUFhLElBQUk7SUFDMUIsT0FBTyxZQUFBO0FBQ0wsUUFBQSxJQUFJLEtBQUssS0FBSyxJQUFJLEVBQUU7WUFDbEIsS0FBSyxHQUFHLElBQUksRUFBRTs7QUFFaEIsUUFBQSxPQUFPLEtBQUs7QUFDZCxLQUFDO0FBQ0g7O0FDTE8sZUFBZSxhQUFhLEdBQUE7QUFDakMsSUFBQSxNQUFNLEtBQUssR0FBRyxNQUFNLGlCQUFpQixDQUFDLFVBQVUsRUFBRTtBQUNsRCxJQUFBLElBQUksS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7QUFDcEIsUUFBQSxPQUFPLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsV0FBVyxFQUFFLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxHQUFHLENBQUM7O0FBRTVELElBQUEsT0FBTyxFQUFFO0FBQ1g7QUFFTyxNQUFNLHFCQUFxQixHQUFHLE9BQU8sQ0FBQyxhQUFhLENBQUM7O0FDUnBELGVBQWUsb0JBQW9CLEdBQUE7QUFDeEMsSUFBQSxNQUFNLFFBQVEsR0FBRyxNQUFNLGlCQUFpQixDQUFDLFFBQVEsRUFBRTtJQUNuRCxJ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QUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSTtBQUM5RixJQUFBLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUk7QUFDL0YsQ0FBQSxDQUFDO0FBRUYsTUFBTSxRQUFRLEdBQUcsSUFBSSxVQUFVLENBQUM7QUFDOUIsSUFBQSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJO0FBQzlGLElBQUEsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSTtBQUM5RixJQUFBLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUk7QUFDOUYsSUFBQSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJO0FBQy9GLENBQUEsQ0FBQztBQUVGO0FBQ0E7QUFDQSxNQUFNLE1BQU0sR0FBRyxVQUFVLENBQUMsSUFBSSxDQUFDO0FBQzdCLElBQUEsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSTtBQUM5RixJQUFBLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUk7QUFDOUYsSUFBQSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJO0FBQzlGLElBQUEsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUU7QUFDM0YsQ0FBQSxDQUFDO0FBRUYsTUFBTSxNQUFNLEdBQUcsVUFBVSxDQUFDLElBQUksQ0FBQztBQUM3QixJQUFBLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFB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
