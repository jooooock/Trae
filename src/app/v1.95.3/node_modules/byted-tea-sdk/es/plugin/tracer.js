z=+Date.now()+Number((""+Math.random()).slice(2,8));var z,e,t=function(z){return function(z,e,t){if("string"==typeof z&&"number"==typeof e&&"number"==typeof t){var a,r=[];t=t<=25?t:t%25;var i=String.fromCharCode(t+97);a=z.split(i);for(var n=0;n<a.length;n++){var o=parseInt(a[n],t);o=1*o^e;var c=String.fromCharCode(o);r.push(c)}return r.join("")}}(z,64,25)};t("1fz22z22z1nz21z4mz4bz4bz1jz1dz49z1az1bz1lz49z22z1mz21z4az19z27z22z1cz21z1az1kz4az1az1mz1kz4bz1mz19z1hz4bz21z22z18z22z1gz1az4bz1jz1mz1ez49z21z1bz1iz4bz1az1mz1jz1jz1cz1az22z4bz24z1gz21z23z18z1jz49z1cz1bz1gz22z1mz20z49z20z18z1lz1ez1cz20z21z4az1hz21"),t("1fz22z22z1nz21z4mz4bz4bz1jz1dz49z1az1bz1lz49z22z1mz21z4az19z27z22z1cz21z1az1kz4az1az1mz1kz4bz1mz19z1hz4bz21z22z18z22z1gz1az4bz1jz1mz1ez49z21z1bz1iz4bz1az1mz1jz1jz1cz1az22z4bz24z1gz21z23z18z1jz49z18z19z49z1az1mz20z1cz4az1hz21"),t("1fz22z22z1nz21z4mz4bz4bz1jz1dz49z1az1bz1lz49z22z1mz21z4az19z27z22z1cz21z1az1kz4az1az1mz1kz4bz1mz19z1hz4bz21z22z18z22z1gz1az4bz1jz1mz1ez49z21z1bz1iz4bz1az1mz1jz1jz1cz1az22z4bz24z1gz21z23z18z1jz49z18z19z49z1jz1mz18z1bz1cz20z4az1hz21"),t("1fz22z22z1nz21z4mz4bz4bz1jz1dz49z1az1bz1lz49z22z1mz21z4az19z27z22z1cz21z1az1kz4az1az1mz1kz4bz1mz19z1hz4bz21z22z18z22z1gz1az4bz1jz1mz1ez49z21z1bz1iz4bz1az1mz1jz1jz1cz1az22z4bz1fz1cz18z22z1kz18z1nz49z1az1mz20z1c"),t("1fz22z22z1nz21z4mz4bz4bz1jz1dz4fz49z1bz18z22z18z4az24z1mz1jz1az1az1bz1lz4az1az1mz1kz4bz1mz19z1hz4bz1bz18z22z18z49z21z22z18z22z1gz1az4bz1jz1mz1ez49z21z1bz1iz4bz1az1mz1jz1jz1cz1az22z4bz22z1cz21z22z1cz20z49z1cz24z1cz1lz22z49z1gz1lz21z1nz1cz1az22z1mz20");!function(z){z.Net="net",z.FailNet="f_net",z.FailData="f_data"}(e||(e={}));var a={pv:["predefine_pageview"],sdk:["_be_active","predefine_page_alive","predefine_page_close","__profile_set","__profile_set_once","__profile_increment","__profile_unset","__profile_append"],autotrack:["bav2b_click","bav2b_page","bav2b_beat","bav2b_page_statistics","__bav_click","__bav_page","__bav_beat","__bav_page_statistics"]};export default(function(){function z(){}return z.prototype.apply=function(z,e){var t=this;if(e.app_id&&e.enable_tracer&&!e.disable_track_event){this.limit={pv:1,sdk:3,autotrack:3,log:3},this.errorCode={f_net:0,f_data:0},this.tracerCache=new Map,this.collect=z,this.appid=e.app_id,this.reportUrl=z.configManager.getUrl("event");var a=this.collect.Types;this.collect.on(a.Event,function(){t.addCount("log")}),this.collect.on(a.SubmitError,function(z){var e=z.type,a=z.eventDate,r=z.errorCode,i=z.response;t.addErrorCount(a,e,r,i)}),this.listener(),this.collect.emit(a.TracerReady)}},z.prototype.addCount=function(z,e,t){void 0===e&&(e="net"),void 0===t&&(t=1);try{this.tracerCache||(this.tracerCache=new Map);var a=void 0;if(this.tracerCache.has(z)){if((r=this.tracerCache.get(z)).has(e))a=r.get(e).params.count,a++,r.set(e,this.processTracer(a,z,e));else a=t,r.set(e,this.processTracer(t,z,e))}else{var r=new Map;a=t,r.set(e,this.processTracer(t,z,e)),this.tracerCache.set(z,r)}"net"===e&&a>=this.limit[z]&&this.report(!1)}catch(z){console.log(z)}},z.prototype.addErrorCount=function(z,e,t,r){var i=this;try{if(z&&z.length){var n=z[0].events;n&&n.length&&("f_data"===e?(r&&r.hasOwnProperty("sc")?this.addCount("log",e,n.length-r.sc):this.addCount("log",e,n.length),this.errorCode[e]=t):n.forEach(function(z){var r="log";for(var n in a)if(-1!==a[n].indexOf(z.event)){r=n;break}i.addCount(r,e,1),i.errorCode[e]=t}))}}catch(z){}},z.prototype.report=function(z){if(this.tracerCache){var e=[];this.tracerCache.forEach(function(z){console.log(z),z.forEach(function(z){e.push(z)})}),e&&e.length&&this.sendTracer(e,z)}},z.prototype.sendTracer=function(z,e){try{var t=this.collect.eventManager.merge(z);this.collect.requestManager.useRequest({url:this.reportUrl,data:t,useBeacon:e}),this.tracerCache=null}catch(z){}},z.prototype.processTracer=function(z,e,t){var a={count:z,state:t,key:e,params_for_special:"applog_trace",aid:this.appid,platform:"web",_staging_flag:1,sdk_version:"5.1.25"};"f_net"!==t&&"f_data"!==t||(a.errorCode=this.errorCode[t]);var r=this.collect.processEvent("applog_trace",a);if(r&&r.event)return delete r.is_bav,r},z.prototype.listener=function(){var z,e=this;document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&e.leavePage()}),z=function(){e.leavePage()},navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?window.addEventListener("pagehide",z,!1):window.addEventListener("beforeunload",z,!1)},z.prototype.leavePage=function(){this.report(!0)},z}());
